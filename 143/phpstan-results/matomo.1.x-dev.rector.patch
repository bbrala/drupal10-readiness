diff --git a/matomo.module b/matomo.module
index 14e439f..4508072 100644
--- a/matomo.module
+++ b/matomo.module
@@ -580,7 +580,7 @@ function _matomo_cache($location, $synchronize = FALSE) {
           \Drupal::logger('matomo')->info('Locally cached tracking code file has been saved.');
 
           // Return the local JS file path.
-          return file_url_transform_relative(file_create_url($file_destination));
+          return \Drupal::service('file_url_generator')->generateString($file_destination);
         }
       }
     }
@@ -590,7 +590,7 @@ function _matomo_cache($location, $synchronize = FALSE) {
   }
   else {
     // Return the local JS file path.
-    return file_url_transform_relative(file_create_url($file_destination));
+    return \Drupal::service('file_url_generator')->generateString($file_destination);
   }
 }
 
