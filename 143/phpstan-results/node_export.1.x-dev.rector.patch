diff --git a/src/NodeExport.php b/src/NodeExport.php
index 3ea75b2..757ef51 100755
--- a/src/NodeExport.php
+++ b/src/NodeExport.php
@@ -77,7 +77,7 @@ class NodeExport {
         // TODO: Implement XML.
         break;
     }
-    return $save ? file_save_data($data, NodeExport::getFileUri($format), FileSystemInterface::EXISTS_REPLACE) : $data;
+    return $save ? \Drupal::service('file.repository')->writeData($data, NodeExport::getFileUri($format), FileSystemInterface::EXISTS_REPLACE) : $data;
   }
 
   /**
