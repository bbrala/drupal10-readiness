modules/contrib/lingotek_copy_target/lingotek_copy_target.module
modules/contrib/lingotek_copy_target/src/Form/ConfigTargets.php
modules/contrib/lingotek_copy_target/src/Form/ConfigTargetsDeleteForm.php
modules/contrib/lingotek_copy_target/tests/src/Functional/Form/ConfigTargetsFormTest.php
modules/contrib/lingotek_copy_target/tests/src/Functional/LingotekConfigBulkTranslationTest.php
modules/contrib/lingotek_copy_target/tests/src/Functional/LingotekNodeBulkTranslationTest.php

3 files with changes
====================

1) modules/contrib/lingotek_copy_target/tests/src/Functional/LingotekNodeBulkTranslationTest.php:67

    ---------- begin diff ----------
@@ @@
       'new_mapping[original_language]' => 'es',
       'new_mapping[copy_language]' => 'es-AR',
     ];
-    $this->drupalPostForm('admin/lingotek/settings/lingotek_copy_target/config', $edit, 'Save configuration');
+    $this->drupalGet('admin/lingotek/settings/lingotek_copy_target/config');
+    $this->submitForm($edit, 'Save configuration');

   }

@@ @@
     $this->assertNoLingotekRequestTranslationLink('es_MX');

     $this->clickLink('EN');
-    $this->assertText('Node Llamas are cool has been uploaded.');
-    $this->assertIdentical('en_US', \Drupal::state()
+    $this->assertSession()->pageTextContains('Node Llamas are cool has been uploaded.');
+    $this->assertSame('en_US', \Drupal::state()
       ->get('lingotek.uploaded_locale'));

     // There is a link for checking status.
@@ @@
     $this->assertLingotekRequestTranslationLink('es_MX');

     $this->clickLink('EN');
-    $this->assertText('The import for node Llamas are cool is complete.');
+    $this->assertSession()->pageTextContains('The import for node Llamas are cool is complete.');

     // Request the Spanish translation.
     $this->assertLingotekRequestTranslationLink('es_MX');
     $this->clickLink('ES');
-    $this->assertText("Locale 'es_MX' was added as a translation target for node Llamas are cool.");
-    $this->assertIdentical('es_MX', \Drupal::state()
+    $this->assertSession()->pageTextContains("Locale 'es_MX' was added as a translation target for node Llamas are cool.");
+    $this->assertSame('es_MX', \Drupal::state()
       ->get('lingotek.added_target_locale'));

     // Check status of the Spanish translation.
     $this->assertLingotekCheckTargetStatusLink('es_MX');
     $this->clickLink('ES');
-    $this->assertIdentical('es_MX', \Drupal::state()
+    $this->assertSame('es_MX', \Drupal::state()
       ->get('lingotek.checked_target_locale'));
-    $this->assertText('The es_MX translation for node Llamas are cool is ready for download.');
+    $this->assertSession()->pageTextContains('The es_MX translation for node Llamas are cool is ready for download.');

     // We can download the Spanish translation as a regular one.
     $this->assertLingotekDownloadTargetLink('es_MX');
     $this->clickLink('ES');
-    $this->assertText('The translation of node Llamas are cool into es_MX has been downloaded.');
-    $this->assertIdentical('es_MX', \Drupal::state()
+    $this->assertSession()->pageTextContains('The translation of node Llamas are cool into es_MX has been downloaded.');
+    $this->assertSame('es_MX', \Drupal::state()
       ->get('lingotek.downloaded_locale'));
     $this->assertTargetStatus('ES', Lingotek::STATUS_CURRENT);

@@ @@
     $this->drupalGet('node/1/translations');
     $this->clickLink('Las llamas son chulas');

-    $this->assertUrl('es-AR/node/1');
-    $this->assertText('Las llamas son chulas');
-    $this->assertText('Las llamas son muy chulas');
+    $this->assertSession()->addressEquals('es-AR/node/1');
+    $this->assertSession()->pageTextContains('Las llamas son chulas');
+    $this->assertSession()->pageTextContains('Las llamas son muy chulas');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertIdenticalRector
 * AssertTextRector
 * AssertUrlRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/lingotek_copy_target/tests/src/Functional/LingotekConfigBulkTranslationTest.php:57

    ---------- begin diff ----------
@@ @@
       'new_mapping[original_language]' => 'es',
       'new_mapping[copy_language]' => 'es-AR',
     ];
-    $this->drupalPostForm('admin/lingotek/settings/lingotek_copy_target/config', $edit, 'Save configuration');
+    $this->drupalGet('admin/lingotek/settings/lingotek_copy_target/config');
+    $this->submitForm($edit, 'Save configuration');
     \Drupal::state()->set('lingotek.uploaded_content_type', 'body');
   }

@@ @@
     $this->goToConfigBulkManagementForm('node_fields');

     $basepath = \Drupal::request()->getBasePath();
-    $this->assertUniqueText('Article');
+    $this->assertSession()->pageTextContainsOnce('Article');
     // Upload the content.
     $this->clickLink('EN');
-    $this->assertIdentical('en_US', \Drupal::state()
+    $this->assertSame('en_US', \Drupal::state()
       ->get('lingotek.uploaded_locale'));

     // There is a link for checking status.
-    $this->assertLinkByHref($basepath . '/admin/lingotek/config/check_upload/field_config/node.article.body?destination=' . $basepath . '/admin/lingotek/config/manage');
+    $this->assertSession()->linkByHrefExists($basepath . '/admin/lingotek/config/check_upload/field_config/node.article.body?destination=' . $basepath . '/admin/lingotek/config/manage');
     // And we can already request a translation.
-    $this->assertLinkByHref($basepath . '/admin/lingotek/config/request/field_config/node.article.body/es_MX?destination=' . $basepath . '/admin/lingotek/config/manage');
+    $this->assertSession()->linkByHrefExists($basepath . '/admin/lingotek/config/request/field_config/node.article.body/es_MX?destination=' . $basepath . '/admin/lingotek/config/manage');
     $this->goToConfigBulkManagementForm('node_fields');
     $this->clickLink('EN');
-    $this->assertText('Body status checked successfully');
+    $this->assertSession()->pageTextContains('Body status checked successfully');

     // Request the Spanish translation.
     $this->clickLink('ES');
-    $this->assertText("Translation to es_MX requested successfully");
-    $this->assertIdentical('es_MX', \Drupal::state()
+    $this->assertSession()->pageTextContains("Translation to es_MX requested successfully");
+    $this->assertSame('es_MX', \Drupal::state()
       ->get('lingotek.added_target_locale'));

     // Check status of the Spanish translation.
     $this->clickLink('ES');
-    $this->assertIdentical('es_MX', \Drupal::state()
+    $this->assertSame('es_MX', \Drupal::state()
       ->get('lingotek.checked_target_locale'));
-    $this->assertText('Translation to es_MX status checked successfully');
+    $this->assertSession()->pageTextContains('Translation to es_MX status checked successfully');

     // There is a link for downloading.
-    $this->assertLinkByHref($basepath . '/admin/lingotek/config/download/field_config/node.article.body/es_MX?destination=' . $basepath . '/admin/lingotek/config/manage');
+    $this->assertSession()->linkByHrefExists($basepath . '/admin/lingotek/config/download/field_config/node.article.body/es_MX?destination=' . $basepath . '/admin/lingotek/config/manage');
     $this->clickLink('ES');
-    $this->assertText('Translation to es_MX downloaded successfully');
+    $this->assertSession()->pageTextContains('Translation to es_MX downloaded successfully');
     $this->assertidentical('es_MX', \Drupal::state()
       ->get('lingotek.downloaded_locale'));
     $this->assertTargetStatus('ES', Lingotek::STATUS_CURRENT);
     $this->assertTargetStatus('ES-AR', Lingotek::STATUS_UNTRACKED);
     $this->drupalGet('admin/config/regional/config-translation/node_fields');
-    $this->assertText('Body');
+    $this->assertSession()->pageTextContains('Body');
     $this->drupalGet('es/admin/config/regional/config-translation/node_fields');
-    $this->assertText('Cuerpo');
+    $this->assertSession()->pageTextContains('Cuerpo');
     $this->drupalGet('es-AR/admin/config/regional/config-translation/node_fields');
-    $this->assertText('Cuerpo');
+    $this->assertSession()->pageTextContains('Cuerpo');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertIdenticalRector
 * AssertLinkByHrefRector
 * AssertTextRector
 * AssertUniqueTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/lingotek_copy_target/tests/src/Functional/Form/ConfigTargetsFormTest.php:45

    ---------- begin diff ----------
@@ @@

   public function testFormIsLinked() {
     $this->drupalGet('admin/config/regional/language/edit/es');
-    $this->assertLink('Configure copy target');
-    $this->assertLinkByHref('admin/lingotek/settings/lingotek_copy_target/config');
+    $this->assertSession()->linkExists('Configure copy target');
+    $this->assertSession()->linkByHrefExists('admin/lingotek/settings/lingotek_copy_target/config');
   }

   public function testAddingEditingRemovingMappings() {
     $this->drupalGet('admin/lingotek/settings/lingotek_copy_target/config');
-    $this->assertText('No mappings available');
+    $this->assertSession()->pageTextContains('No mappings available');

     $edit = [
       'new_mapping[original_language]' => 'es',
       'new_mapping[copy_language]' => 'es-MX',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
+    $this->submitForm($edit, 'Save configuration');

-    $this->assertText('The configuration options have been saved.');
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');

     // There is one row in the table.
     $this->assertSession()->elementsCount('css', 'table#edit-mappings tbody tr', 1);
-    $this->assertFieldByName('mappings[0][original_language]', 'es');
-    $this->assertFieldByName('mappings[0][copy_language]', 'es-MX');
+    $this->assertSession()->fieldValueEquals('mappings[0][original_language]', 'es');
+    $this->assertSession()->fieldValueEquals('mappings[0][copy_language]', 'es-MX');

     $edit = [
       'mappings[0][original_language]' => 'es-AR',
@@ @@
       'new_mapping[original_language]' => 'es-AR',
       'new_mapping[copy_language]' => 'es-419',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
+    $this->submitForm($edit, 'Save configuration');

-    $this->assertText('The configuration options have been saved.');
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');

     // There are two rows in the table.
     $this->assertSession()->elementsCount('css', 'table#edit-mappings tbody tr', 2);
-    $this->assertFieldByName('mappings[0][original_language]', 'es-AR');
-    $this->assertFieldByName('mappings[0][copy_language]', 'es-MX');
-    $this->assertFieldByName('mappings[1][original_language]', 'es-AR');
-    $this->assertFieldByName('mappings[1][copy_language]', 'es-419');
+    $this->assertSession()->fieldValueEquals('mappings[0][original_language]', 'es-AR');
+    $this->assertSession()->fieldValueEquals('mappings[0][copy_language]', 'es-MX');
+    $this->assertSession()->fieldValueEquals('mappings[1][original_language]', 'es-AR');
+    $this->assertSession()->fieldValueEquals('mappings[1][copy_language]', 'es-419');

     // Delete the last one.
     $this->clickLink('Delete', 1);
-    $this->assertText('Are you sure you want to delete the mapping Spanish - Argentina (es-AR) &rarr; Spanish - Latin America and Caribbean (es-419)?');
-    $this->drupalPostForm(NULL, [], 'Confirm');
+    $this->assertSession()->pageTextContains('Are you sure you want to delete the mapping Spanish - Argentina (es-AR) &rarr; Spanish - Latin America and Caribbean (es-419)?');
+    $this->submitForm([], 'Confirm');

     // There is only one row in the table.
     $this->assertSession()->elementsCount('css', 'table#edit-mappings tbody tr', 1);
-    $this->assertFieldByName('mappings[0][original_language]', 'es-AR');
-    $this->assertFieldByName('mappings[0][copy_language]', 'es-MX');
+    $this->assertSession()->fieldValueEquals('mappings[0][original_language]', 'es-AR');
+    $this->assertSession()->fieldValueEquals('mappings[0][copy_language]', 'es-MX');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertLinkByHrefRector
 * AssertLinkRector
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 3 files have been changed by Rector                                       

