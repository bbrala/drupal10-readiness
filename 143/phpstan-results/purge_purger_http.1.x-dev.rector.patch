diff --git a/tests/src/Functional/HttpPurgerConfigFormTestBase.php b/tests/src/Functional/HttpPurgerConfigFormTestBase.php
index b215623..b5af5b8 100644
--- a/tests/src/Functional/HttpPurgerConfigFormTestBase.php
+++ b/tests/src/Functional/HttpPurgerConfigFormTestBase.php
@@ -70,7 +70,7 @@ abstract class HttpPurgerConfigFormTestBase extends PurgerConfigFormTestBase {
     $this->drupalGet($this->getPath());
     $this->assertSession()->pageTextContains('Tokens');
     foreach ($this->tokenGroups as $token_group) {
-      $this->assertRaw('<code>[' . $token_group . ':');
+      $this->assertSession()->responseContains('<code>[' . $token_group . ':');
     }
   }
 
@@ -162,7 +162,8 @@ abstract class HttpPurgerConfigFormTestBase extends PurgerConfigFormTestBase {
       'max_requests' => 25,
       'http_errors' => 1,
     ];
-    $this->drupalPostForm($this->getPath(), $edit, 'Save configuration');
+    $this->drupalGet($this->getPath());
+    $this->submitForm($edit, 'Save configuration');
     $this->drupalGet($this->getPath());
     foreach ($edit as $field => $value) {
       $this->assertSession()->fieldValueEquals('edit-' . str_replace('_', '-', $field), $value);
