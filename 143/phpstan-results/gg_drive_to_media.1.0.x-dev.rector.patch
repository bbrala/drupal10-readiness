diff --git a/src/GoogleDriveFilesToMediaManager.php b/src/GoogleDriveFilesToMediaManager.php
index 082fc98..f6d2936 100644
--- a/src/GoogleDriveFilesToMediaManager.php
+++ b/src/GoogleDriveFilesToMediaManager.php
@@ -254,7 +254,7 @@ class GoogleDriveFilesToMediaManager {
         $file_response = $this->googleDriveService->files->get($file->getId(), ['alt' => 'media']);
         $file_content = $file_response->getBody();
         $file_destination = $folder_to_save_data . '/' . $file->getName();
-        $drupal_file = file_save_data($file_content,  $file_destination);
+        $drupal_file = \Drupal::service('file.repository')->writeData($file_content, $file_destination);
         $drupal_file->setPermanent();
         $drupal_file->save();
         $media_data = [
