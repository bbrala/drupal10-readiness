diff --git a/Commands/materialize/SubThemeCommands.php b/Commands/materialize/SubThemeCommands.php
index ee0c00c..ae82c82 100644
--- a/Commands/materialize/SubThemeCommands.php
+++ b/Commands/materialize/SubThemeCommands.php
@@ -106,7 +106,7 @@ class SubThemeCommands extends DrushCommands {
     ));
 
     // Ensure the STARTERKIT directory exists.
-    $starterkit_path = Utils::normalizePath($drupal_root . '/' . drupal_get_path('theme', 'materialize') . '/STARTERKIT');
+    $starterkit_path = Utils::normalizePath($drupal_root . '/' . \Drupal::service('extension.list.theme')->getPath('materialize') . '/STARTERKIT');
     if (!is_dir($starterkit_path)) {
       return drush_set_error('MATERIALIZE_STARTERKIT_NOT_FOUND',
         dt('The STARTERKIT directory was not found in "!directory"',
diff --git a/materialize.drush.inc b/materialize.drush.inc
index 71afa3e..50ed012 100644
--- a/materialize.drush.inc
+++ b/materialize.drush.inc
@@ -123,7 +123,7 @@ function drush_materialize_subtheme($machine_name = NULL, $name = NULL) {
   }
 
   // Ensure the STARTERKIT directory exists.
-  $starterkit_path = drush_normalize_path(drush_get_context('DRUSH_DRUPAL_ROOT') . '/' . drupal_get_path('theme', 'materialize') . '/STARTERKIT');
+  $starterkit_path = drush_normalize_path(drush_get_context('DRUSH_DRUPAL_ROOT') . '/' . \Drupal::service('extension.list.theme')->getPath('materialize') . '/STARTERKIT');
   if (!is_dir($starterkit_path)) {
     return drush_set_error('MATERIALIZE_STARTERKIT_NOT_FOUND', dt('The STARTERKIT directory was not found in "!directory"', ['!directory' => dirname($starterkit_path)]));
     // Allow localize.drupal.org to pick up the string to translate.
diff --git a/src/Plugin/Preprocess/FileLink.php b/src/Plugin/Preprocess/FileLink.php
index 3190adf..dc10423 100644
--- a/src/Plugin/Preprocess/FileLink.php
+++ b/src/Plugin/Preprocess/FileLink.php
@@ -28,7 +28,7 @@ class FileLink extends PreprocessBase {
     $options = [];
 
     $file = ($variables['file'] instanceof File) ? $variables['file'] : File::load($variables['file']->fid);
-    $url = file_create_url($file->getFileUri());
+    $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
 
     $file_size = $file->getSize();
     $mime_type = $file->getMimeType();
diff --git a/src/ThemeSettings.php b/src/ThemeSettings.php
index c2c7414..45e2945 100644
--- a/src/ThemeSettings.php
+++ b/src/ThemeSettings.php
@@ -171,7 +171,7 @@ class ThemeSettings extends Config {
       $logo_url = FALSE;
       foreach (['svg', 'png', 'jpg'] as $type) {
         if (file_exists($theme->getPath() . "/logo.$type")) {
-          $logo_url = file_create_url($theme->getPath() . "/logo.$type");
+          $logo_url = \Drupal::service('file_url_generator')->generateAbsoluteString($theme->getPath() . "/logo.$type");
           break;
         }
       }
