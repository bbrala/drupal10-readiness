diff --git a/contrib/wizard/src/Plugin/FormEnhancer/WizardParameters.php b/contrib/wizard/src/Plugin/FormEnhancer/WizardParameters.php
index b9d1b51..214f3a7 100644
--- a/contrib/wizard/src/Plugin/FormEnhancer/WizardParameters.php
+++ b/contrib/wizard/src/Plugin/FormEnhancer/WizardParameters.php
@@ -33,7 +33,7 @@ class WizardParameters extends FormEnhancerBase {
    */
   public function initFormEntityConfig() {
     list(, $wizard_id, $step) = explode('.', $this->getFormDisplay()->id(), 3);
-    $wizard = entity_load('flexiform_wizard', $wizard_id);
+    $wizard = \Drupal::service('entity_type.manager')->getStorage('flexiform_wizard')->load($wizard_id);
 
     $form_entity_settings = [];
     foreach ($wizard->get('parameters') as $param_name => $param_info) {
diff --git a/src/Plugin/FlexiformFormEntity/FlexiformFormEntityCurrentUser.php b/src/Plugin/FlexiformFormEntity/FlexiformFormEntityCurrentUser.php
index f8c7632..371dea5 100644
--- a/src/Plugin/FlexiformFormEntity/FlexiformFormEntityCurrentUser.php
+++ b/src/Plugin/FlexiformFormEntity/FlexiformFormEntityCurrentUser.php
@@ -24,7 +24,7 @@ class FlexiformFormEntityCurrentUser extends FlexiformFormEntityBase {
    */
   public function getEntity() {
     $uid = \Drupal::currentUser()->id();
-    return entity_load('user', $uid);
+    return \Drupal::service('entity_type.manager')->getStorage('user')->load($uid);
   }
 
 }
diff --git a/tests/src/Functional/FlexiformEntityFormTest.php b/tests/src/Functional/FlexiformEntityFormTest.php
index 1d10ca7..28fb4f1 100644
--- a/tests/src/Functional/FlexiformEntityFormTest.php
+++ b/tests/src/Functional/FlexiformEntityFormTest.php
@@ -28,7 +28,7 @@ class FlexiformEntityFormTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $permissions = [
@@ -89,13 +89,15 @@ class FlexiformEntityFormTest extends BrowserTestBase {
       'title[0][value]' => $title1,
       'body[0][value]' => $this->randomString(127),
     ];
+    $this->drupalGet('node/add/article');
 
-    $this->drupalPostForm('node/add/article', $edit, t('Save'));
+    $this->submitForm($edit, t('Save'));
     $node = $this->drupalGetNodeByTitle($title1, TRUE);
     $this->assertTrue($node, 'Article node found in the database.');
 
     $edit['title[0][value]'] = $title2;
-    $this->drupalPostForm('node/' . $node->id() . '/edit', $edit, t('Save'));
+    $this->drupalGet('node/' . $node->id() . '/edit');
+    $this->submitForm($edit, t('Save'));
 
     $node = $this->drupalGetNodeByTitle($title1, TRUE);
     $this->assertFalse($node, 'The Article node has been modified.');
@@ -106,7 +108,7 @@ class FlexiformEntityFormTest extends BrowserTestBase {
 
     $this->drupalGet('node/' . $node->id() . '/edit');
     $this->clickLink(t('Delete'));
-    $this->drupalPostForm(NULL, [], t('Delete'));
+    $this->submitForm([], t('Delete'));
     $node = $this->drupalGetNodeByTitle($title2, TRUE);
     $this->assertFalse($node, 'Article node not found in the database.');
   }
