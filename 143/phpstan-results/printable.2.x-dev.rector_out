modules/contrib/printable/modules/printable_pdf/printable_pdf.module
modules/contrib/printable/src/Controller/PrintableController.php
modules/contrib/printable/modules/printable_pdf/src/Plugin/PrintableFormat/PdfFormat.php
modules/contrib/printable/src/PrintableLinkBuilderInterface.php
modules/contrib/printable/src/Routing/RouteSubscriber.php
modules/contrib/printable/src/Form/FormatConfigurationFormPdf.php
modules/contrib/printable/src/StreamWrapper/PrintableStream.php
modules/contrib/printable/src/Tests/PrintableBlockTest.php
modules/contrib/printable/src/Form/FormatConfigurationFormPrint.php
modules/contrib/printable/src/Form/LinksConfigurationForm.php
modules/contrib/printable/src/Form/PdfLinksConfigurationForm.php
modules/contrib/printable/src/Form/PrintableConfigurationForm.php
modules/contrib/printable/src/LinkExtractor/InlineLinkExtractor.php
modules/contrib/printable/src/LinkExtractor/LinkExtractorInterface.php
modules/contrib/printable/src/Plugin/Block/PrintableLinksBlock.php
modules/contrib/printable/printable.install
modules/contrib/printable/printable.module
modules/contrib/printable/src/Tests/PrintableFormTest.php
modules/contrib/printable/src/Plugin/Derivative/PrintableFormatConfigureTabs.php
modules/contrib/printable/src/Plugin/Derivative/PrintableLinksBlock.php
modules/contrib/printable/src/Plugin/PrintableFormat/PrintFormat.php
modules/contrib/printable/src/Plugin/PrintableFormatBase.php
modules/contrib/printable/src/Tests/PrintableLinkTest.php
modules/contrib/printable/src/Annotation/PrintableFormat.php
modules/contrib/printable/src/Plugin/PrintableFormatInterface.php
modules/contrib/printable/src/PrintableCssInclude.php
modules/contrib/printable/src/Tests/PrintablePageTest.php
modules/contrib/printable/src/PrintableCssIncludeInterface.php
modules/contrib/printable/src/PrintableEntityManager.php
modules/contrib/printable/src/PrintableEntityManagerInterface.php
modules/contrib/printable/src/PrintableFormatPluginManager.php
modules/contrib/printable/src/PrintableLinkBuilder.php
modules/contrib/printable/src/Tests/PrintablePdfFormTest.php
modules/contrib/printable/src/Tests/PrintablePdfTest.php
modules/contrib/printable/src/Tests/PrintableUninstallTest.php
modules/contrib/printable/tests/src/Unit/Plugin/Block/PrintableLinkBlockTest.php
modules/contrib/printable/tests/src/Unit/Plugin/Derivative/PrintableFormatConfigureTabsTest.php
modules/contrib/printable/tests/src/Unit/Plugin/Derivative/PrintableLinksBlockTest.php
modules/contrib/printable/tests/src/Unit/Plugin/PrintableFormat/PrintFormatTest.php
modules/contrib/printable/tests/src/Unit/PrintableCssIncludeTest.php
modules/contrib/printable/tests/src/Unit/PrintableEntityManagerTest.php
modules/contrib/printable/tests/src/Unit/PrintableLinkBuilderTest.php

18 files with changes
=====================

1) modules/contrib/printable/printable.module:72

    ---------- begin diff ----------
@@ @@
  * Implements hook_theme().
  */
 function printable_theme() {
-  $module_path = drupal_get_path('module', 'printable');
+  $module_path = \Drupal::service('extension.list.module')->getPath('printable');
   return [
     'printable_navigation' => [
       'variables' => ['printable_link' => NULL],
@@ @@
   global $base_url;

   $config = \Drupal::config('printable.settings');
-  $variables['base_url'] = $base_url . '/' . drupal_get_path('module', 'printable');
+  $variables['base_url'] = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('printable');

   $request = \Drupal::request();
   $title = '';
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


2) modules/contrib/printable/modules/printable_pdf/src/Plugin/PrintableFormat/PdfFormat.php:239

    ---------- begin diff ----------
@@ @@
     $pdf_header = [
       '#theme' => 'printable_pdf_header',
     ];
-    return render($pdf_header);
+    return \Drupal::service('renderer')->render($pdf_header);
   }

   /**
@@ @@
     $pdf_footer = [
       '#theme' => 'printable_pdf_footer',
     ];
-    return render($pdf_footer);
+    return \Drupal::service('renderer')->render($pdf_footer);
   }

   /**
@@ @@
    */
   public function buildPdfContent() {
     $content = parent::buildContent();
-    $content = render($content);
+    $content = \Drupal::service('renderer')->render($content);

     $content = preg_replace(['#printable://#', '/\?itok=.*"/'], ['', '"'], $content);
     $rendered_page = parent::extractLinks($content);
    ----------- end diff -----------

Applied rules:
 * RenderRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/printable/modules/printable_pdf/printable_pdf.module:8

    ---------- begin diff ----------
@@ @@
  * Implements hook_theme().
  */
 function printable_pdf_theme() {
-  $module_path = drupal_get_path('module', 'printable_pdf');
+  $module_path = \Drupal::service('extension.list.module')->getPath('printable_pdf');
   return [
     'printable_pdf_footer' => [
       'template' => 'printable-footer',
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


4) modules/contrib/printable/src/Plugin/PrintableFormatBase.php:174

    ---------- begin diff ----------
@@ @@
     $this->footerContent = NULL;
     if ($this->configFactory->get('printable.settings')
       ->get('list_attribute')) {
-      $this->footerContent = $this->linkExtractor->listAttribute((string) render($this->content));
+      $this->footerContent = $this->linkExtractor->listAttribute((string) \Drupal::service('renderer')->render($this->content));
     }
   }

@@ @@
   public function getOutput() {
     $content = $this->buildContent();
     // @todo add a renderer service over here.
-    return $this->extractLinks(render($content));
+    return $this->extractLinks(\Drupal::service('renderer')->render($content));
   }

 }
    ----------- end diff -----------

Applied rules:
 * RenderRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/printable/tests/src/Unit/PrintableLinkBuilderTest.php:42

    ---------- begin diff ----------
@@ @@

     $config = $this->getConfigFactoryStub(['printable.settings' => ['open_target_blank' => TRUE]]);

-    $printable_manager = $this->getMockBuilder('Drupal\printable\PrintableFormatPluginManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $printable_manager = $this->createMock('Drupal\printable\PrintableFormatPluginManager');
     $printable_manager->expects($this->once())
       ->method('getDefinitions')
       ->will($this->returnValue($definitions));
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/printable/tests/src/Unit/PrintableEntityManagerTest.php:29

    ---------- begin diff ----------
@@ @@
    */
   public function testGetPrintableEntities() {
     // Construct a printable entity manager and it's dependencies.
-    $entity_definition = $this->getMockBuilder('Drupal\Core\Entity\EntityType')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_definition = $this->createMock('Drupal\Core\Entity\EntityType');
     $entity_definition->expects($this->any())
       ->method('hasHandlerClass')
       ->will($this->returnValue(TRUE));
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


7) modules/contrib/printable/tests/src/Unit/PrintableCssIncludeTest.php:36

    ---------- begin diff ----------
@@ @@
       'bartik' => new \stdClass(),
     ];
     $theme_info['bartik']->uri = 'core/themes/bartik/bartik.info.yml';
-    $theme_handler = $this->getMockBuilder('Drupal\Core\Extension\ThemeHandlerInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $theme_handler = $this->createMock('Drupal\Core\Extension\ThemeHandlerInterface');
     $theme_handler->expects($this->any())
       ->method('listInfo')
       ->will($this->returnValue($theme_info));
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


8) modules/contrib/printable/tests/src/Unit/Plugin/PrintableFormat/PrintFormatTest.php:119

    ---------- begin diff ----------
@@ @@
   public function testSetConfiguration() {
     $new_configuration = ['show_print_dialogue' => FALSE];

-    $config_mock = $this->getMockBuilder('\Drupal\Core\Config\Config')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $config_mock = $this->createMock('\Drupal\Core\Config\Config');
     $config_mock->expects($this->once())
       ->method('set')
       ->with('print', $new_configuration)
@@ @@
     $config_mock->expects($this->once())
       ->method('save');

-    $config_factory_mock = $this->getMockBuilder('\Drupal\Core\Config\ConfigFactory')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $config_factory_mock = $this->createMock('\Drupal\Core\Config\ConfigFactory');
     $config_factory_mock->expects($this->once())
       ->method('get')
       ->with('printable.format')
@@ @@
    * Get the CSS include stub.
    */
   protected function getCssIncludeStub() {
-    return $this->getMockBuilder('Drupal\printable\PrintableCssIncludeInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    return $this->createMock('Drupal\printable\PrintableCssIncludeInterface');
   }

   /**
@@ @@
    * Get the Link extractor stub.
    */
   protected function getLinkExtractorIncludeStub() {
-    return $this->getMockBuilder('Drupal\printable\LinkExtractor\LinkExtractorInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    return $this->createMock('Drupal\printable\LinkExtractor\LinkExtractorInterface');
   }

 }
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


9) modules/contrib/printable/tests/src/Unit/Plugin/Derivative/PrintableLinksBlockTest.php:28

    ---------- begin diff ----------
@@ @@
    * @covers PrintableLinksBlock::GetDerivativeDefinitions
    */
   public function testGetDerivativeDefinitions() {
-    $entity_definition = $this->getMockBuilder('Drupal\Core\Entity\EntityType')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_definition = $this->createMock('Drupal\Core\Entity\EntityType');

-    $printable_format_manager = $this->getMockBuilder('Drupal\printable\PrintableEntityManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $printable_format_manager = $this->createMock('Drupal\printable\PrintableEntityManager');
     $printable_format_manager->expects($this->once())
       ->method('getPrintableEntities')
       ->will($this->returnValue([
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


10) modules/contrib/printable/tests/src/Unit/Plugin/Derivative/PrintableFormatConfigureTabsTest.php:28

    ---------- begin diff ----------
@@ @@
    * @covers PrintableFormatConfigureTabs::GetDerivativeDefinitions
    */
   public function testGetDerivativeDefinitions() {
-    $printable_format_manager = $this->getMockBuilder('Drupal\printable\PrintableFormatPluginManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $printable_format_manager = $this->createMock('Drupal\printable\PrintableFormatPluginManager');
     $printable_format_manager->expects($this->once())
       ->method('getDefinitions')
       ->will($this->returnValue([
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


11) modules/contrib/printable/tests/src/Unit/Plugin/Block/PrintableLinkBlockTest.php:44

    ---------- begin diff ----------
@@ @@
    * @covers PrintableLinksBlock::build
    */
   public function testBuild() {
-    $routematch = $this->getMockBuilder('Drupal\Core\Routing\CurrentRouteMatch')
-      ->disableOriginalConstructor()
-      ->setMethods(['getMasterRouteMatch', 'getParameter'])
-      ->getMock();
+    $routematch = $this->createMock('Drupal\Core\Routing\CurrentRouteMatch');
     $routematch->expects($this->exactly(2))
       ->method('getMasterRouteMatch')
       ->will($this->returnSelf());
@@ @@
         'target' => '_blank',
       ],
     ];
-    $links_builder = $this->getMockBuilder('Drupal\printable\PrintableLinkBuilderInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $links_builder = $this->createMock('Drupal\printable\PrintableLinkBuilderInterface');
     $links_builder->expects($this->once())
       ->method('buildLinks')
       ->will($this->returnValue($links));
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


12) modules/contrib/printable/src/Tests/PrintableUninstallTest.php:25

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $web_user = $this->drupalCreateUser([
       'create page content',
@@ @@
     // Test /node/add page with only one content type.
     $node_type_storage->load('article')->delete();
     $this->drupalGet('node/add');
-    $this->assertResponse(200);
-    $this->assertUrl('node/add/page');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->addressEquals('node/add/page');
     // Create a node.
     $edit = [];
     $edit['title[0][value]'] = $this->randomMachineName(8);
     $edit['body[0][value]'] = $this->randomMachineName(16);
-    $this->drupalPostForm('node/add/page', $edit, t('Save'));
+    $this->drupalGet('node/add/page');
+    $this->submitForm($edit, t('Save'));

     // Check that the Basic page has been created.
-    $this->assertRaw(t('@post %title has been created.', [
+    $this->assertSession()->responseContains(t('@post %title has been created.', [
       '@post' => 'Basic page',
       '%title' => $edit['title[0][value]'],
-    ]), 'Basic page created.');
+    ]));

     // Check that the node exists in the database.
     $node = $this->drupalGetNodeByTitle($edit['title[0][value]']);
@@ @@

     // Verify that pages do not show submitted information by default.
     $this->drupalGet('node/' . $node->id());
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $this->drupalGet('node/' . $node->id() . '/printable/print');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     // Uninstall the printable module and check the printable version of node
     // is also deleted.
     \Drupal::service('module_installer')->uninstall(['printable']);
     $this->drupalGet('node/' . $node->id() . '/printable/print');
-    $this->assertResponse(404);
+    $this->assertSession()->statusCodeEquals(404);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * AssertResponseRector
 * AssertUrlRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/printable/src/Tests/PrintablePdfTest.php:38

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $web_user = $this->drupalCreateUser([
       'create page content',
@@ @@
     // Test /node/add page with only one content type.
     $node_type_storage->load('article')->delete();
     $this->drupalGet('node/add');
-    $this->assertResponse(200);
-    $this->assertUrl('node/add/page');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->addressEquals('node/add/page');
     // Create a node.
     $edit = [];
     $edit['title[0][value]'] = $this->randomMachineName(8);
     $bodytext = $this->randomMachineName(16) . 'This is functional test which I am writing for printable module.';
     $edit['body[0][value]'] = $bodytext;
-    $this->drupalPostForm('node/add/page', $edit, t('Save'));
+    $this->drupalGet('node/add/page');
+    $this->submitForm($edit, t('Save'));

     // Check that the Basic page has been created.
-    $this->assertRaw(t('@post %title has been created.', [
+    $this->assertSession()->responseContains(t('@post %title has been created.', [
       '@post' => 'Basic page',
       '%title' => $edit['title[0][value]'],
-    ]), 'Basic page created.');
+    ]));

     // Check that the node exists in the database.
     $node = $this->drupalGetNodeByTitle($edit['title[0][value]']);
@@ @@

     // Verify that pages do not show submitted information by default.
     $this->drupalGet('node/' . $node->id());
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Set the PDF generating tool.
     $this->drupalGet('admin/config/user-interface/printable/pdf');
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'print_pdf_pdf_tool' => 'mPDF',
       'print_pdf_content_disposition' => 1,
       'print_pdf_filename' => 'modules/custom/printable/src/Tests/testPDF',
     ], t('Submit'));
     $this->drupalGet('admin/config/user-interface/printable/pdf');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Test whether PDF page is being generated.
     $this->drupalGet('node/' . $node->id() . '/printable/pdf');
@@ @@
     $new_edit['title[0][value]'] = $this->randomMachineName(8);
     $bodytext = $text;
     $new_edit['body[0][value]'] = $bodytext;
-    $this->drupalPostForm('node/add/page', $new_edit, t('Save'));
+    $this->drupalGet('node/add/page');
+    $this->submitForm($new_edit, t('Save'));
     $new_node = $this->drupalGetNodeByTitle($new_edit['title[0][value]']);
     $this->drupalGet('node/' . $new_node->id());
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Checks the presence of body in the page.
-    $this->assertRaw($edit['body[0][value]'], 'Body discovered successfully in the printable page');
+    $this->assertSession()->responseContains($edit['body[0][value]']);

     // Check if footer is rendering correctly.
-    $this->assertRaw($base_url . '/node/' . $node->id(), 'Source Url discovered in the printable page');
+    $this->assertSession()->responseContains($base_url . '/node/' . $node->id());
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * AssertResponseRector
 * AssertUrlRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/printable/src/Tests/PrintablePdfFormTest.php:32

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer printable']);
     $this->drupalLogin($this->user);
@@ @@
   public function testPdfFormWorks() {
     $this->drupalLogin($this->user);
     $this->drupalGet('admin/config/user-interface/printable/pdf');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $config = $this->config('printable.settings');
-    $this->assertFieldByName('print_pdf_pdf_tool', $config->get('printable.pdf_tool'), 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_content_disposition', $config->get('printable.save_pdf'), 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_paper_size', $config->get('printable.paper_size'), 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_page_orientation', $config->get('printable.page_orientation'), 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_filename', $config->get('printable.pdf_location'), 'The field was found with the correct value.');
+    $this->assertSession()->fieldValueEquals('print_pdf_pdf_tool', $config->get('printable.pdf_tool'));
+    $this->assertSession()->fieldValueEquals('print_pdf_content_disposition', $config->get('printable.save_pdf'));
+    $this->assertSession()->fieldValueEquals('print_pdf_paper_size', $config->get('printable.paper_size'));
+    $this->assertSession()->fieldValueEquals('print_pdf_page_orientation', $config->get('printable.page_orientation'));
+    $this->assertSession()->fieldValueEquals('print_pdf_filename', $config->get('printable.pdf_location'));

-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'print_pdf_pdf_tool' => 'wkhtmltopdf',
       'print_pdf_content_disposition' => 1,
       'print_pdf_paper_size' => 'A10',
@@ @@
       'print_pdf_filename' => 'test_pdf',
     ], t('Submit'));
     $this->drupalGet('admin/config/user-interface/printable/pdf');
-    $this->assertResponse(200);
-    $this->assertFieldByName('print_pdf_pdf_tool', 'wkhtmltopdf', 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_content_disposition', 1, 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_paper_size', 'A10', 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_page_orientation', 'landscape', 'The field was found with the correct value.');
-    $this->assertFieldByName('print_pdf_filename', 'test_pdf', 'The field was found with the correct value.');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->fieldValueEquals('print_pdf_pdf_tool', 'wkhtmltopdf');
+    $this->assertSession()->fieldValueEquals('print_pdf_content_disposition', 1);
+    $this->assertSession()->fieldValueEquals('print_pdf_paper_size', 'A10');
+    $this->assertSession()->fieldValueEquals('print_pdf_page_orientation', 'landscape');
+    $this->assertSession()->fieldValueEquals('print_pdf_filename', 'test_pdf');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/printable/src/Tests/PrintablePageTest.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $web_user = $this->drupalCreateUser([
       'create page content',
@@ @@
     // Test /node/add page with only one content type.
     $node_type_storage->load('article')->delete();
     $this->drupalGet('node/add');
-    $this->assertResponse(200);
-    $this->assertUrl('node/add/page');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->addressEquals('node/add/page');
     // Create a node.
     $edit = [];
     $edit['title[0][value]'] = $this->randomMachineName(8);
     $bodytext = $this->randomMachineName(16) . 'This is functional test which I am writing for printable module.';
     $edit['body[0][value]'] = $bodytext;
-    $this->drupalPostForm('node/add/page', $edit, t('Save'));
+    $this->drupalGet('node/add/page');
+    $this->submitForm($edit, t('Save'));

     // Check that the Basic page has been created.
-    $this->assertRaw(t('@post %title has been created.', [
+    $this->assertSession()->responseContains(t('@post %title has been created.', [
       '@post' => 'Basic page',
       '%title' => $edit['title[0][value]'],
-    ]), 'Basic page created.');
+    ]));

     // Check that the node exists in the database.
     $node = $this->drupalGetNodeByTitle($edit['title[0][value]']);
@@ @@

     // Verify that pages do not show submitted information by default.
     $this->drupalGet('node/' . $node->id());
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->drupalGet('node/' . $node->id() . '/printable/print');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     // Checks the presence of header in the page.
-    $this->assertRaw($edit['title[0][value]'], 'Title discovered successfully in the printable page');
+    $this->assertSession()->responseContains($edit['title[0][value]']);
     // Checks the presence of image in the header.
-    $this->assertRaw(theme_get_setting('logo.url'), 'Image discovered successfully in the printable page');
+    $this->assertSession()->responseContains(theme_get_setting('logo.url'));
     // Checks the presence of body in the page.
-    $this->assertRaw($edit['body[0][value]'], 'Body discovered successfully in the printable page');
+    $this->assertSession()->responseContains($edit['body[0][value]']);
     // Check if footer is rendering correctly.
-    $this->assertRaw($base_url . '/node/' . $node->id(), 'Source Url discovered in the printable page');
+    $this->assertSession()->responseContains($base_url . '/node/' . $node->id());
     $this->verbose($base_url);
     // Enable the option of showing links present in the footer of page.
     $this->drupalGet('admin/config/user-interface/printable/print');
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'print_html_display_sys_urllist' => 1,
     ], t('Submit'));

     // Check that the printable URL can be retrieved without error.
     $this->drupalGet('node/' . $node->id() . '/printable/print');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Check that invalid plugin URLs throw a 404.
     $this->drupalGet('node/' . $node->id() . '/printable/UNDEFINED');
-    $this->assertResponse(404);
+    $this->assertSession()->statusCodeEquals(404);

     // Checks whether the URLs in the footer region are rendering properly.
-    $this->assertRaw('List of links present in page', 'Main heading for displaying URLs discovered in the printable page');
-    $this->assertRaw($base_url . '/node/' . $node->id(), 'First link discovered successfully');
-    $this->assertRaw('/user/1', 'Second link discovered successfully');
-    $this->assertRaw('/node/' . $node->id() . '/printable/print', 'Third link discovered successfully');
+    $this->assertSession()->responseContains('List of links present in page');
+    $this->assertSession()->responseContains($base_url . '/node/' . $node->id());
+    $this->assertSession()->responseContains('/user/1');
+    $this->assertSession()->responseContains('/node/' . $node->id() . '/printable/print');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * AssertResponseRector
 * AssertUrlRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/printable/src/Tests/PrintableLinkTest.php:25

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $user = $this->drupalCreateUser([
       'create page content',
@@ @@
    */
   public function testPrintLinkExists() {
     $this->drupalGet('admin/config/user-interface/printable/links');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     // Enable the print link in content area.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'print_print_link_pos' => 'node',
     ], t('Submit'));
     $this->drupalGet('admin/config/user-interface/printable/pdf');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $node_type_storage = \Drupal::entityTypeManager()->getStorage('node_type');

@@ @@
     $edit = [];
     $edit['title[0][value]'] = $this->randomMachineName(8);
     $edit['body[0][value]'] = $this->randomMachineName(16);
-    $this->drupalPostForm('node/add/page', $edit, t('Save'));
+    $this->drupalGet('node/add/page');
+    $this->submitForm($edit, t('Save'));

     // Check that the Basic page has been created.
-    $this->assertRaw(t('@post %title has been created.', [
+    $this->assertSession()->responseContains(t('@post %title has been created.', [
       '@post' => 'Basic page',
       '%title' => $edit['title[0][value]'],
-    ]), 'Basic page created.');
+    ]));

     // Check that the node exists in the database.
     $node = $this->drupalGetNodeByTitle($edit['title[0][value]']);
@@ @@

     // Verify that pages do not show submitted information by default.
     $this->drupalGet('node/' . $node->id());
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

-    $this->assertRaw('Print', 'Print link discovered successfully in the printable page');
+    $this->assertSession()->responseContains('Print');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/printable/src/Tests/PrintableFormTest.php:32

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer printable']);
     $this->drupalLogin($this->user);
@@ @@
   public function testPrintFormWorks() {
     $this->drupalLogin($this->user);
     $this->drupalGet('admin/config/user-interface/printable/print');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $config = $this->config('printable.settings');
-    $this->assertFieldByName('print_html_sendtoprinter', $config->get('printable.send_to_printer'), 'The field was found with the correct value.');
+    $this->assertSession()->fieldValueEquals('print_html_sendtoprinter', $config->get('printable.send_to_printer'));

-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'print_html_sendtoprinter' => 1,
     ], t('Submit'));
     $this->drupalGet('admin/config/user-interface/printable/print');
-    $this->assertResponse(200);
-    $this->assertFieldByName('print_html_sendtoprinter', 1, 'The field was found with the correct value.');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->fieldValueEquals('print_html_sendtoprinter', 1);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


18) modules/contrib/printable/src/Tests/PrintableBlockTest.php:33

    ---------- begin diff ----------
@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // Create users and test node.
@@ @@
       'visibility[node_type][bundles][article]' => 'article',
     ];
     $theme = \Drupal::service('theme_handler')->getDefault();
-    $this->drupalPostForm("admin/structure/block/add/printable_links_block%3Anode/$theme", $edit, t('Save block'));
+    $this->drupalGet("admin/structure/block/add/printable_links_block%3Anode/$theme");
+    $this->submitForm($edit, t('Save block'));

     $block = Block::load($edit['id']);
     $visibility = $block->getVisibility();
@@ @@
     // Test deleting the block from the edit form.
     $this->drupalGet('admin/structure/block/manage/' . $edit['id']);
     $this->clickLink(t('Delete'));
-    $this->assertRaw(t('Are you sure you want to delete the block %name?', ['%name' => $edit['settings[label]']]));
-    $this->drupalPostForm(NULL, [], t('Delete'));
-    $this->assertRaw(t('The block %name has been deleted.', ['%name' => $edit['settings[label]']]));
+    $this->assertSession()->responseContains(t('Are you sure you want to delete the block %name?', ['%name' => $edit['settings[label]']]));
+    $this->submitForm([], t('Delete'));
+    $this->assertSession()->responseContains(t('The block %name has been deleted.', ['%name' => $edit['settings[label]']]));
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 18 files have been changed by Rector                                      

