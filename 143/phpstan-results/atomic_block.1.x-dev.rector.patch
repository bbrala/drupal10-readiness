diff --git a/atomic_block.info.yml b/atomic_block.info.yml
index 775272d..ad27988 100644
--- a/atomic_block.info.yml
+++ b/atomic_block.info.yml
@@ -2,7 +2,7 @@ name: Atomic Block
 description: Atomic Block.
 package: Atomic Block
 type: module
-core_version_requirement: ^8.9.0 || ^9.0
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:layout_builder
   - drupal:system (>=8.7)
diff --git a/atomic_block.module b/atomic_block.module
index 1db3a36..d6bd35e 100644
--- a/atomic_block.module
+++ b/atomic_block.module
@@ -6,7 +6,7 @@
 function atomic_block_theme($existing, $type, $theme, $path) {
   // Define templates for every block plugin of this module.
   $themes = [];
-  $module_path = drupal_get_path('module', 'atomic_block');
+  $module_path = \Drupal::service('extension.list.module')->getPath('atomic_block');
   // Do not use the plugin filterer here, but still filter by contexts.
   $definitions = \Drupal::service('plugin.manager.block')->getDefinitions();
 
diff --git a/composer.json b/composer.json
index 5e19199..a80b3b5 100644
--- a/composer.json
+++ b/composer.json
@@ -5,8 +5,8 @@
     "homepage": "http://drupal.org/project/atomic_block",
     "license": "GPL-2.0+",
     "require": {
-        "drupal/core": "^8.9 || ^9",
-        "mexitek/phpcolors": "^1.0"
+        "mexitek/phpcolors": "^1.0",
+        "drupal/core": "^9.3 || ^10"
     },
     "require-dev": {},
     "minimum-stability": "dev"
diff --git a/src/Plugin/Block/AtomicBlockBlockBase.php b/src/Plugin/Block/AtomicBlockBlockBase.php
index 4d3245c..1e8124b 100644
--- a/src/Plugin/Block/AtomicBlockBlockBase.php
+++ b/src/Plugin/Block/AtomicBlockBlockBase.php
@@ -30,7 +30,7 @@ abstract class AtomicBlockBlockBase extends BlockBase {
     global $base_path;
     $this->base_path = $base_path;
     $this->base_url = \Drupal::request()->getSchemeAndHttpHost();
-    $this->module_path = drupal_get_path('module', 'atomic_block');
+    $this->module_path = \Drupal::service('extension.list.module')->getPath('atomic_block');
     $this->block_path = $this->getBlockPath();
   }
 
diff --git a/src/Plugin/Block/background_image/AtomicBlockBackgroundImageBlock.php b/src/Plugin/Block/background_image/AtomicBlockBackgroundImageBlock.php
index 69b9eaa..f51a7c7 100644
--- a/src/Plugin/Block/background_image/AtomicBlockBackgroundImageBlock.php
+++ b/src/Plugin/Block/background_image/AtomicBlockBackgroundImageBlock.php
@@ -103,7 +103,7 @@ class AtomicBlockBackgroundImageBlock extends AtomicBlockBlockBase {
         $image->setPermanent();
         $image->save();
         if ($this->configuration['element_properties']['image_style'] == 'none') {
-          $build['#image_url'] = Url::fromUri(file_create_url($image->getFileUri()));
+          $build['#image_url'] = \Drupal::service('file_url_generator')->generate($image->getFileUri());
         }
         else {
           $build['#image_url'] = ImageStyle::load($this->configuration['element_properties']['image_style'])->buildUrl($image->getFileUri());
