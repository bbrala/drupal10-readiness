diff --git a/config_sync.install b/config_sync.install
index 32e04a1..8be64cc 100644
--- a/config_sync.install
+++ b/config_sync.install
@@ -63,7 +63,7 @@ function config_sync_update_8001() {
         // For each extension, determine what configuration it currently provides.
         foreach (array_keys($installed_type) as $name) {
 
-          $pathname = drupal_get_filename($type, $name);
+          $pathname = \Drupal::service('extension.path.resolver')->getPathname($type, $name);
           $extension = new Extension(\Drupal::root(), $type, $pathname);
           $extensions = [
             $name => $extension,
diff --git a/src/ConfigSyncSnapshotter.php b/src/ConfigSyncSnapshotter.php
index 2c0b3f9..99b34d9 100644
--- a/src/ConfigSyncSnapshotter.php
+++ b/src/ConfigSyncSnapshotter.php
@@ -218,7 +218,7 @@ class ConfigSyncSnapshotter implements ConfigSyncSnapshotterInterface {
    *   found.
    */
   protected function drupalGetFilename($type, $name) {
-    return drupal_get_filename($type, $name);
+    return \Drupal::service('extension.path.resolver')->getPathname($type, $name);
   }
 
 }
diff --git a/src/EventSubscriber/ConfigSyncSnapshotSubscriber.php b/src/EventSubscriber/ConfigSyncSnapshotSubscriber.php
index 5c8d5aa..f4c2daa 100644
--- a/src/EventSubscriber/ConfigSyncSnapshotSubscriber.php
+++ b/src/EventSubscriber/ConfigSyncSnapshotSubscriber.php
@@ -2,12 +2,12 @@
 
 namespace Drupal\config_sync\EventSubscriber;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\config_distro\Event\ConfigDistroEvents;
 use Drupal\config_filter\ConfigFilterManagerInterface;
 use Drupal\config_sync\Plugin\ConfigFilter\SyncFilter;
 use Drupal\config_sync\ConfigSyncSnapshotterInterface;
 use Drupal\Core\State\StateInterface;
-use Symfony\Component\EventDispatcher\Event;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 
 /**
diff --git a/src/Plugin/ConfigFilter/SyncFilter.php b/src/Plugin/ConfigFilter/SyncFilter.php
index fd8b769..8cd714e 100644
--- a/src/Plugin/ConfigFilter/SyncFilter.php
+++ b/src/Plugin/ConfigFilter/SyncFilter.php
@@ -121,7 +121,7 @@ class SyncFilter extends ConfigFilterBase implements ContainerFactoryPluginInter
     // storage.
     if ($update_mode === ConfigSyncListerInterface::UPDATE_MODE_FULL_RESET) {
       // Create a storage with configuration installable from this extension.
-      $pathname = drupal_get_filename($configuration['extension_type'], $configuration['extension_name']);
+      $pathname = \Drupal::service('extension.path.resolver')->getPathname($configuration['extension_type'], $configuration['extension_name']);
       $extension = new Extension($root, $configuration['extension_type'], $pathname);
       $extensions = [
         $configuration['extension_name'] => $extension,
@@ -173,7 +173,7 @@ class SyncFilter extends ConfigFilterBase implements ContainerFactoryPluginInter
                 $updated = $config_merger->mergeConfigItemStates($previous, $current, $active);
                 $logs = $config_merger->getLogs();
                 $event = new ConfigMergeEvent($item_name, $logs, $configuration['extension_type'], $configuration['extension_name']);
-                $event_dispatcher->dispatch(ConfigMergeEvents::POST_MERGE, $event);
+                $event_dispatcher->dispatch($event, ConfigMergeEvents::POST_MERGE);
                 break;
               // Reset to the currently provided value.
               case ConfigSyncListerInterface::UPDATE_MODE_PARTIAL_RESET:
diff --git a/tests/src/Functional/ImportTest.php b/tests/src/Functional/ImportTest.php
index 4ee46c5..74b955f 100644
--- a/tests/src/Functional/ImportTest.php
+++ b/tests/src/Functional/ImportTest.php
@@ -60,12 +60,13 @@ class ImportTest extends BrowserTestBase {
     $this->assertSession()->pageTextContains('View differences');
     $this->assertSession()->responseContains('Import');
     $this->assertSession()->pageTextNotContains('There are no configuration changes to import.');
+    $this->drupalGet('admin/config/development/configuration/distro');
 
     // Import the configuration.
-    $this->drupalPostForm('admin/config/development/configuration/distro', [], t('Import'));
+    $this->submitForm([], t('Import'));
 
     // Check that there are no errors.
-    $this->assertIdentical($this->configImporter()->getErrors(), []);
+    $this->assertSame($this->configImporter()->getErrors(), []);
 
     // Ensure that we have no configuration changes to import.
     $storage_comparer = new StorageComparer(
@@ -73,7 +74,7 @@ class ImportTest extends BrowserTestBase {
       $this->container->get('config.storage'),
       $this->container->get('config.manager')
     );
-    $this->assertIdentical($storage_comparer->createChangelist()->getChangelist(), $storage_comparer->getEmptyChangelist());
+    $this->assertSame($storage_comparer->createChangelist()->getChangelist(), $storage_comparer->getEmptyChangelist());
 
     // We should not see changes for import.
     $this->drupalGet('/admin/config/development/configuration/distro');
@@ -82,12 +83,12 @@ class ImportTest extends BrowserTestBase {
 
     // Check that the node type name was updated.
     $node_type = NodeType::load('config_sync_test_1');
-    $this->assertIdentical($node_type->get('name'), $provided_name);
+    $this->assertSame($node_type->get('name'), $provided_name);
 
     // Check that the snapshot was updated.
     $test_module_config = ConfigSnapshot::load(ConfigSyncSnapshotterInterface::CONFIG_SNAPSHOT_SET . '.module.config_sync_test');
     $items = $test_module_config->getItems();
-    $this->assertIdentical($items[0]['data']['name'], $provided_name);
+    $this->assertSame($items[0]['data']['name'], $provided_name);
   }
 
 }
diff --git a/tests/src/Kernel/UpdateModeTest.php b/tests/src/Kernel/UpdateModeTest.php
index 729ce7a..653ad0f 100644
--- a/tests/src/Kernel/UpdateModeTest.php
+++ b/tests/src/Kernel/UpdateModeTest.php
@@ -80,7 +80,7 @@ class UpdateModeTest extends KernelTestBase {
     'config_sync_test',
   ];
 
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installEntitySchema('node');
