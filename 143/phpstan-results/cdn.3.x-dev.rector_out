modules/contrib/cdn/cdn.install
modules/contrib/cdn/src/Asset/CssOptimizer.php
modules/contrib/cdn/tests/src/Kernel/CdnStreamWrapperConstraintValidatorTest.php
modules/contrib/cdn/src/CdnFarfutureController.php
modules/contrib/cdn/cdn.module
modules/contrib/cdn/tests/src/Kernel/EditorFileReferenceFilterTest.php
modules/contrib/cdn/src/CdnServiceProvider.php
modules/contrib/cdn/cdn_ui/src/Form/CdnSettingsForm.php
modules/contrib/cdn/src/CdnSettings.php
modules/contrib/cdn/tests/src/Unit/CdnSettingsTest.php
modules/contrib/cdn/tests/src/Unit/File/FileUrlGeneratorTest.php
modules/contrib/cdn/src/EventSubscriber/ConfigSubscriber.php
modules/contrib/cdn/src/EventSubscriber/HtmlResponseSubscriber.php
modules/contrib/cdn/cdn_ui/src/Form/ValidatableConfigFormBase.php
modules/contrib/cdn/src/File/FileUrlGenerator.php
modules/contrib/cdn/src/PathProcessor/CdnFarfuturePathProcessor.php
modules/contrib/cdn/src/Plugin/Validation/Constraint/CdnDomainConstraint.php
modules/contrib/cdn/src/Plugin/Validation/Constraint/CdnDomainConstraintValidator.php
modules/contrib/cdn/src/Plugin/Validation/Constraint/CdnSchemeConstraint.php
modules/contrib/cdn/src/Plugin/Validation/Constraint/CdnSchemeConstraintValidator.php
modules/contrib/cdn/src/Plugin/Validation/Constraint/CdnStreamWrapperConstraint.php
modules/contrib/cdn/src/Plugin/Validation/Constraint/CdnStreamWrapperConstraintValidator.php
modules/contrib/cdn/src/StackMiddleware/DuplicateContentPreventionMiddleware.php
modules/contrib/cdn/tests/fixtures/update/drupal-8.cdn-cdn_update_8001.php
modules/contrib/cdn/tests/src/Unit/Plugin/Validation/Constraint/CdnDomainConstraintValidatorTest.php
modules/contrib/cdn/tests/src/Functional/CdnIntegrationTest.php
modules/contrib/cdn/tests/src/Functional/Update/CdnDefaultSettingsUpdateTest.php
modules/contrib/cdn/tests/src/Functional/Update/CdnSchemeSettingsUpdateTest.php
modules/contrib/cdn/tests/src/Functional/Update/CdnStreamWrapperSettingsUpdateTest.php
modules/contrib/cdn/tests/src/Unit/Plugin/Validation/Constraint/CdnSchemeConstraintValidatorTest.php
modules/contrib/cdn/tests/src/Unit/StackMiddleware/DuplicateContentPreventionMiddlewareTest.php

7 files with changes
====================

1) modules/contrib/cdn/cdn.module:89

    ---------- begin diff ----------
@@ @@

   $ckeditor_plugin_manager = \Drupal::service('plugin.manager.ckeditor.plugin');
   $root_relative_file_url = function ($uri) {
-    return file_url_transform_relative(file_create_url($uri));
+    return \Drupal::service('file_url_generator')->generateString($uri);
   };
   foreach ($settings['editor']['formats'] as $format => &$format_settings) {
     if ($format_settings['editor'] === 'ckeditor') {
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector


2) modules/contrib/cdn/src/EventSubscriber/HtmlResponseSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\cdn\EventSubscriber;

+use Symfony\Component\HttpKernel\Event\ResponseEvent;
 use Drupal\cdn\CdnSettings;
 use Drupal\Core\Render\HtmlResponse;
-use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;

@@ @@
   }

   /**
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    */
-  public function onRespond(FilterResponseEvent $event) {
+  public function onRespond(ResponseEvent $event) {
     $response = $event->getResponse();
     if (!$response instanceof HtmlResponse) {
       return;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


3) modules/contrib/cdn/tests/src/Unit/StackMiddleware/DuplicateContentPreventionMiddlewareTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\cdn\Unit\StackMiddleware;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\cdn\StackMiddleware\DuplicateContentPreventionMiddleware;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Utility\UnroutedUrlAssemblerInterface;
@@ @@
  */
 class DuplicateContentPreventionMiddlewareTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @covers ::handle
    * @covers ::getRedirectUrl
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/cdn/tests/src/Unit/Plugin/Validation/Constraint/CdnSchemeConstraintValidatorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\cdn\Unit\Plugin\Validation\Constraint;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\cdn\Plugin\Validation\Constraint\CdnSchemeConstraint;
 use Drupal\cdn\Plugin\Validation\Constraint\CdnSchemeConstraintValidator;
 use Drupal\Tests\UnitTestCase;
@@ @@
  */
 class CdnSchemeConstraintValidatorTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @covers ::validate
    *
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/cdn/tests/src/Unit/Plugin/Validation/Constraint/CdnDomainConstraintValidatorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\cdn\Unit\Plugin\Validation\Constraint;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\cdn\Plugin\Validation\Constraint\CdnDomainConstraint;
 use Drupal\cdn\Plugin\Validation\Constraint\CdnDomainConstraintValidator;
 use Drupal\Tests\UnitTestCase;
@@ @@
  */
 class CdnDomainConstraintValidatorTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @covers ::validate
    *
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/cdn/tests/src/Unit/File/FileUrlGeneratorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\cdn\Unit\File;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\cdn\CdnSettings;
 use Drupal\cdn\File\FileUrlGenerator;
 use Drupal\Component\Utility\Crypt;
@@ @@
  */
 class FileUrlGeneratorTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The private key to use in tests.
    *
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


7) modules/contrib/cdn/tests/src/Kernel/CdnStreamWrapperConstraintValidatorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\cdn\Kernel;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\cdn\Plugin\Validation\Constraint\CdnStreamWrapperConstraint;
 use Drupal\cdn\Plugin\Validation\Constraint\CdnStreamWrapperConstraintValidator;
 use Drupal\KernelTests\KernelTestBase;
@@ @@
  */
 class CdnStreamWrapperConstraintValidatorTest extends KernelTestBase {

+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 7 files have been changed by Rector                                       

