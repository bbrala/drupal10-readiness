modules/contrib/media_acquiadam/media_acquiadam.install
modules/contrib/media_acquiadam/modules/media_acquiadam_example/media_acquiadam_example.install
modules/contrib/media_acquiadam/src/Client.php
modules/contrib/media_acquiadam/src/Service/AssetMetadataHelper.php
modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamAssetDataTrait.php
modules/contrib/media_acquiadam/modules/media_acquiadam_report/media_acquiadam_report.install
modules/contrib/media_acquiadam/modules/media_acquiadam_report/media_acquiadam_report.module
modules/contrib/media_acquiadam/modules/media_acquiadam_report/src/EventSubscriber/AcquiadamUsageSubscriber.php
modules/contrib/media_acquiadam/src/Service/AssetRefreshManager.php
modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamAssetImageHelperTrait.php
modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamConfigTrait.php
modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamLoggerFactoryTrait.php
modules/contrib/media_acquiadam/modules/media_acquiadam_report/src/Routing/RouteSubscriber.php
modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamMockedMediaEntityTrait.php
modules/contrib/media_acquiadam/src/Acquiadam.php
modules/contrib/media_acquiadam/src/AcquiadamAuthService.php
modules/contrib/media_acquiadam/src/Service/AssetRefreshManagerInterface.php
modules/contrib/media_acquiadam/tests/modules/media_acquiadam_test/src/TestClient.php
modules/contrib/media_acquiadam/tests/src/Kernel/AcquiadamKernelTestBase.php
modules/contrib/media_acquiadam/src/AcquiadamAuthServiceInterface.php
modules/contrib/media_acquiadam/src/AcquiadamInterface.php
modules/contrib/media_acquiadam/src/AssetData.php
modules/contrib/media_acquiadam/media_acquiadam.module
modules/contrib/media_acquiadam/src/AssetDataInterface.php
modules/contrib/media_acquiadam/src/Batch/AcquiadamUpdateAssetsReference.php
modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamAssetTest.php
modules/contrib/media_acquiadam/tests/src/Kernel/AcquiadamMediaTest.php
modules/contrib/media_acquiadam/src/Commands/AcquiadamCommands.php
modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamAuthTest.php
modules/contrib/media_acquiadam/src/Controller/AcquiadamAuthController.php
modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamClientTest.php
modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamConfigFormTest.php
modules/contrib/media_acquiadam/src/Controller/AcquiadamController.php
modules/contrib/media_acquiadam/src/Entity/Asset.php
modules/contrib/media_acquiadam/src/Entity/Category.php
modules/contrib/media_acquiadam/src/Entity/EntityInterface.php
modules/contrib/media_acquiadam/src/Exception/InvalidCredentialsException.php
modules/contrib/media_acquiadam/src/Exception/UploadAssetException.php
modules/contrib/media_acquiadam/src/Form/AcquiadamConfig.php
modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamServiceTest.php
modules/contrib/media_acquiadam/tests/src/Unit/AssetDataTest.php
modules/contrib/media_acquiadam/tests/src/Unit/AssetFileEntityHelperTest.php
modules/contrib/media_acquiadam/src/Form/AcquiadamUpdateAssetsReference.php
modules/contrib/media_acquiadam/src/MediaEntityHelper.php
modules/contrib/media_acquiadam/tests/src/Unit/AssetImageHelperTest.php
modules/contrib/media_acquiadam/src/Plugin/EntityBrowser/Widget/Acquiadam.php
modules/contrib/media_acquiadam/tests/src/Unit/AssetMediaFactoryTest.php
modules/contrib/media_acquiadam/tests/src/Unit/AssetMetadataHelperTest.php
modules/contrib/media_acquiadam/tests/src/Unit/AssetRefreshManagerTest.php
modules/contrib/media_acquiadam/src/Plugin/Linkit/Substitution/DAMAsset.php
modules/contrib/media_acquiadam/tests/src/Unit/MediaEntityHelperTest.php
modules/contrib/media_acquiadam/src/Plugin/QueueWorker/AssetRefresh.php
modules/contrib/media_acquiadam/tests/src/Unit/Plugin/QueueWorker/AssetRefreshTest.php
modules/contrib/media_acquiadam/src/Plugin/QueueWorker/IntegrationLinkReport.php
modules/contrib/media_acquiadam/src/Plugin/media/Source/AcquiadamAsset.php
modules/contrib/media_acquiadam/src/Service/AssetFileEntityHelper.php
modules/contrib/media_acquiadam/src/Service/AssetImageHelper.php
modules/contrib/media_acquiadam/src/Service/AssetMediaFactory.php

18 files with changes
=====================

1) modules/contrib/media_acquiadam/tests/src/Kernel/AcquiadamKernelTestBase.php:72

    ---------- begin diff ----------
@@ @@
   protected function setTestClient() {
     $this->testClient = new TestClient();

-    $acquiadam_client_factory = $this->getMockBuilder(Client::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $acquiadam_client_factory = $this->createMock(Client::class);
     $acquiadam_client_factory->expects($this->any())
       ->method('getAsset')
       ->willReturnCallback(function ($assetId) {
@@ @@
     $this->container->set('media_acquiadam.client',
       $acquiadam_client_factory);

-    $asset_data = $this->getMockBuilder(AssetData::class)
-      ->disableOriginalConstructor()
-      ->onlyMethods(['get', 'set', 'isUpdatedAsset'])
-      ->getMock();
+    $asset_data = $this->createMock(AssetData::class);
     $asset_data->expects($this->any())
       ->method('get')->willReturn(function ($assetId, $name) {
         return $this->asset->${name};
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/media_acquiadam/tests/src/Unit/MediaEntityHelperTest.php:48

    ---------- begin diff ----------
@@ @@
     $this->assertInstanceOf(FileInterface::class,
       $this->getNewMediaEntityHelper()->getExistingFile());

-    $media = $this->getMockBuilder(MediaInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $media = $this->createMock(MediaInterface::class);

     /** @var \Drupal\media\MediaInterface|\PHPUnit\Framework\MockObject\MockObject $media */
     $this->assertFalse($this->getNewMediaEntityHelper($media)
@@ @@
       $this->getNewMediaEntityHelper()->getExistingFileId());

     /** @var \Drupal\media\MediaInterface|\PHPUnit\Framework\MockObject\MockObject $media */
-    $media = $this->getMockBuilder(MediaInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $media = $this->createMock(MediaInterface::class);

     $this->assertFalse($this->getNewMediaEntityHelper($media)
       ->getExistingFileId());
@@ @@
       $this->getNewMediaEntityHelper()->getAssetFileField());

     /** @var \Drupal\media\MediaInterface|\PHPUnit\Framework\MockObject\MockObject $media */
-    $media = $this->getMockBuilder(MediaInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $media = $this->createMock(MediaInterface::class);

     $this->assertFalse($this->getNewMediaEntityHelper($media)
       ->getAssetFileField());
@@ @@
   protected function setUp(): void {
     parent::setUp();

-    $this->acquiadamClient = $this->getMockBuilder(Acquiadam::class)
-      ->onlyMethods(['getAsset'])
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->acquiadamClient = $this->createMock(Acquiadam::class);

     $this->container = new ContainerBuilder();
     $this->setMockedDrupalServices($this->container);
@@ @@
     $media_bundle->method('getFieldMap')
       ->willReturn(['file' => 'phpunit_file_field']);

-    $entity_storage = $this->getMockBuilder(EntityStorageInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_storage = $this->createMock(EntityStorageInterface::class);
     $entity_storage->method('load')->willReturnMap([
       [$this->getMockedFileEntity()->id(), $this->getMockedFileEntity()],
       ['media_acquiadam', $media_bundle],
@@ @@
       ],
     ]);

-    $entity_type_manager = $this->getMockBuilder(EntityTypeManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);
     $entity_type_manager->method('getStorage')->willReturnMap([
       ['file', $entity_storage],
       ['media_type', $entity_storage],
@@ @@
    *   The container to set mocks into.
    */
   protected function setMockedAcquiaDamServices(ContainerBuilder $container) {
-    $asset_data = $this->getMockBuilder(AssetData::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_data = $this->createMock(AssetData::class);
     $asset_data->method('isUpdatedAsset')->willReturnOnConsecutiveCalls(FALSE,
       TRUE);

-    $acquiadam = $this->getMockBuilder(Acquiadam::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $acquiadam = $this->createMock(Acquiadam::class);
     $acquiadam->method('getAsset')->willReturnMap([
       [$this->getAssetData()->id, TRUE, $this->getAssetData()],
     ]);

-    $asset_file_helper = $this->getMockBuilder(AssetFileEntityHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_file_helper = $this->createMock(AssetFileEntityHelper::class);
     $asset_file_helper->method('getDestinationFromEntity')
       ->willReturn('private://assets/replaced');
     $asset_file_helper->method('createNewFile')->with($this->anything(),
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/media_acquiadam/tests/src/Unit/AssetRefreshManagerTest.php:169

    ---------- begin diff ----------
@@ @@
     $real_time = new \DateTime('now');
     $sync_time = new \DateTime('now');
     $sync_time->modify($last_sync_offset);
-    $state = $this->getMockBuilder(State::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $state = $this->createMock(State::class);
     $state->method('get')
       ->with('media_acquiadam.last_sync')
       ->willReturn($sync_time->getTimestamp());
-    $time = $this->getMockBuilder(TimeInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $time = $this->createMock(TimeInterface::class);
     $time->method('getCurrentTime')
       ->willReturn($real_time->getTimestamp());
     $asset_before_time = $real_time->modify('-1 hour');
@@ @@
       ->disableOriginalConstructor()
       ->getMock();

-    $this->state = $this->getMockBuilder(State::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->state = $this->createMock(State::class);
     $this->state->method('get')
       ->with('media_acquiadam.last_sync')
       // 2022-05-24T09:14:42Z UTC.
       ->willReturn('1653383682');

-    $this->queue = $this->getMockBuilder(DatabaseQueue::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->queue = $this->createMock(DatabaseQueue::class);
     /** @var \Drupal\Core\Queue\QueueFactory|\PHPUnit\Framework\MockObject\MockObject $queue_factory */
-    $queue_factory = $this->getMockBuilder(QueueFactory::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $queue_factory = $this->createMock(QueueFactory::class);
     $queue_factory->method('get')
       ->willReturn($this->queue);

-    $this->entityQuery = $this->getMockBuilder(Query::class)
-      ->onlyMethods(['orConditionGroup', 'condition', 'execute'])
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->entityQuery = $this->createMock(Query::class);

-    $entity_storage = $this->getMockBuilder(EntityStorageInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_storage = $this->createMock(EntityStorageInterface::class);
     $entity_storage->method('getQuery')->willReturn($this->entityQuery);

-    $entity_type_manager = $this->getMockBuilder(EntityTypeManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);
     $entity_type_manager->method('getStorage')->willReturnMap([
       ['media', $entity_storage],
     ]);

-    $language_manager = $this->getMockBuilder(LanguageManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $language_manager = $this->createMock(LanguageManagerInterface::class);
     $language_manager->method('getCurrentLanguage')
       ->willReturn(new Language(Language::$defaultValues));

-    $time = $this->getMockBuilder(TimeInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $time = $this->createMock(TimeInterface::class);
     $time->method('getCurrentTime')
       // 2022-05-24T15:17:00Z UTC.
       ->willReturn('1653405420');
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/media_acquiadam/tests/src/Unit/AssetMetadataHelperTest.php:122

    ---------- begin diff ----------
@@ @@
   protected function setUp(): void {
     parent::setUp();

-    $date_formatter = $this->getMockBuilder(DateFormatterInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $date_formatter = $this->createMock(DateFormatterInterface::class);
     $date_formatter->method('format')
       ->willReturnCallback(function ($timestamp, $type, $format) {
         if ('custom' == $type) {
@@ @@
         return FALSE;
       });

-    $acquiadam_client = $this->getMockBuilder(Acquiadam::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $acquiadam_client = $this->createMock(Acquiadam::class);

     $this->container = new ContainerBuilder();
     $this->container->set('string_translation',
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/media_acquiadam/tests/src/Unit/AssetMediaFactoryTest.php:197

    ---------- begin diff ----------
@@ @@
     $media_bundle->method('getFieldMap')
       ->willReturn(['file' => 'phpunit_file_field']);

-    $entity_storage = $this->getMockBuilder(EntityStorageInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_storage = $this->createMock(EntityStorageInterface::class);
     $entity_storage->method('loadByProperties')
       ->with(['source' => 'acquiadam_asset'])
       ->willReturn([
@@ @@
       ['media_acquiadam', $media_bundle],
     ]);

-    $entity_type_manager = $this->getMockBuilder(EntityTypeManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);
     $entity_type_manager->method('getStorage')->willReturnMap([
       ['media_type', $entity_storage],
       ['media', $entity_storage],
@@ @@
       ['file', $entity_storage],
     ]);

-    $asset_data = $this->getMockBuilder(AssetDataInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_data = $this->createMock(AssetDataInterface::class);

-    $acquiadam_client = $this->getMockBuilder(AcquiadamInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $acquiadam_client = $this->createMock(AcquiadamInterface::class);

-    $asset_file_helper = $this->getMockBuilder(AssetFileEntityHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_file_helper = $this->createMock(AssetFileEntityHelper::class);

     $this->container = new ContainerBuilder();
     $this->container->set('entity_type.manager', $entity_type_manager);
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/media_acquiadam/tests/src/Unit/AssetImageHelperTest.php:223

    ---------- begin diff ----------
@@ @@
   protected function setUp(): void {
     parent::setUp();

-    $http_client = $this->getMockBuilder(GuzzleClient::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $http_client = $this->createMock(GuzzleClient::class);

     $file_system = $this->getMockBuilder(FileSystem::class)
       ->disableOriginalConstructor()
@@ @@
         return is_string($target) ? $target . '_copy' : $target . '_blah';
       });

-    $mime_type_guesser = $this->getMockBuilder(MimeTypeGuesser::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $mime_type_guesser = $this->createMock(MimeTypeGuesser::class);
     $mime_type_guesser->method('guessMimeType')->willReturnCallback(function ($uri) {
       $map = [
         'public://test.jpg' => 'image/jpg',
@@ @@
       return $map[$uri] ?? '';
     });

-    $image_factory = $this->getMockBuilder(ImageFactory::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $image_factory = $this->createMock(ImageFactory::class);

-    $url_assembler = $this->getMockBuilder(UnroutedUrlAssemblerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $url_assembler = $this->createMock(UnroutedUrlAssemblerInterface::class);

     $url_assembler
       ->expects($this->any())
@@ @@
         ['https://demo.widen.net/content/demoextid/original/theHumanRaceMakesSense.jpg?u=lv0nkk&download=true', ['query' => ['h' => 650, 'q' => 80], 'external' => TRUE], FALSE, 'https://demo.widen.net/content/demoextid/original/theHumanRaceMakesSense.jpg?u=lv0nkk&download=true&h=650&q=80'],
       ]);

-    $entity_type_manager = $this->getMockBuilder(EntityTypeManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);

     $this->container = new ContainerBuilder();
     $this->container->set('http_client', $http_client);
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


7) modules/contrib/media_acquiadam/tests/src/Unit/AssetFileEntityHelperTest.php:91

    ---------- begin diff ----------
@@ @@
       ->getMockForAbstractClass();
     $this->mockedFileEntity->method('id')->willReturn(333);

-    $acquiadam = $this->getMockBuilder(Acquiadam::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $acquiadam = $this->createMock(Acquiadam::class);

-    $asset_media_factory = $this->getMockBuilder(AssetMediaFactory::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_media_factory = $this->createMock(AssetMediaFactory::class);
     $asset_media_factory->method('getFileEntity')
       ->willReturn($this->mockedFileEntity->id());

@@ @@
    *   The container to set mocks into.
    */
   protected function setMockedDrupalServices(ContainerBuilder $container) {
-    $file_storage = $this->getMockBuilder(EntityStorageInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $file_storage = $this->createMock(EntityStorageInterface::class);
     $file_storage->method('load')
       ->with($this->mockedFileEntity->id())
       ->willReturn($this->mockedFileEntity);
@@ @@
       ],
     ]);

-    $entity_type_manager = $this->getMockBuilder(EntityTypeManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);
     $entity_type_manager->method('getStorage')->willReturnMap([
       ['file', $file_storage],
     ]);

-    $data_definition = $this->getMockBuilder(DataDefinitionInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $data_definition = $this->createMock(DataDefinitionInterface::class);
     $data_definition->method('getSetting')->willReturnMap([
       ['uri_scheme', 'private'],
       ['file_directory', 'assets/[token]'],
     ]);

-    $field_definition = $this->getMockBuilder(FieldDefinitionInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $field_definition = $this->createMock(FieldDefinitionInterface::class);
     $field_definition->method('getItemDefinition')
       ->willReturn($data_definition);

-    $entity_field_manager = $this->getMockBuilder(EntityFieldManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_field_manager = $this->createMock(EntityFieldManagerInterface::class);
     $entity_field_manager->method('getFieldDefinitions')->willReturnMap([
       ['media', 'media_acquiadam', ['phpunit_file_field' => $field_definition]],
     ]);

-    $token = $this->getMockBuilder(Token::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $token = $this->createMock(Token::class);
     $token->method('replace')
       ->willReturnCallback(function ($string, $a, $b, $c) {
         return ('assets/[token]' == $string) ? 'assets/replaced' : $string;
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


8) modules/contrib/media_acquiadam/tests/src/Unit/AssetDataTest.php:48

    ---------- begin diff ----------
@@ @@
   protected function setUp() :void {
     parent::setUp();

-    $connection = $this->getMockBuilder(Connection::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $connection = $this->createMock(Connection::class);

-    $asset_data = $this->getMockBuilder(AssetData::class)
-      ->disableOriginalConstructor()
-      ->onlyMethods(['get', 'set'])
-      ->getMock();
+    $asset_data = $this->createMock(AssetData::class);
     $asset_data->method('get')->willReturnMap([
       ["34asd3q2-e294-4908-bbd9-f43f433d2e23", 'file_upload_date', 1632508262],
       ["34asd3q2-e294-4908-bbd9-f43f433d2e23", 'file_upload_date', 1632508262],
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


9) modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamServiceTest.php:84

    ---------- begin diff ----------
@@ @@
   protected function setUp() :void {
     parent::setUp();

-    $dam_client = $this->getMockBuilder(Client::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $dam_client = $this->createMock(Client::class);
     $dam_client->expects($this->any())
       ->method('getCategoryData')
       ->willReturnCallback(function ($category) {
@@ @@
       ->willReturnCallback(function () {
         return $this->getAssetData();
       });
-    $acquiadam_asset_data = $this->getMockBuilder(AssetDataInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $acquiadam_asset_data = $this->createMock(AssetDataInterface::class);

     $this->container = new ContainerBuilder();
     $this->container->set('logger.factory', $this->getLoggerFactoryStub());
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


10) modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamConfigFormTest.php:102

    ---------- begin diff ----------
@@ @@
    */
   public function testPerformManualSync() {
     $form = [];
-    $form_state = $this->getMockBuilder(FormStateInterface::class)
-      ->getMock();
+    $form_state = $this->createMock(FormStateInterface::class);

     $this->assertFalse($this->acquiaDamConfig->performManualSync($form, $form_state));

@@ @@
   protected function setUp(): void {
     parent::setUp();

-    $http_client = $this->getMockBuilder(ClientInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
-    $time = $this->getMockBuilder(Time::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $http_client = $this->createMock(ClientInterface::class);
+    $time = $this->createMock(Time::class);
     $time->method('getRequestTime')
       ->willReturn(1560000000);

-    $this->queueWorker = $this->getMockBuilder(AssetRefresh::class)
-      ->disableOriginalConstructor()
-      ->getMock();
-    $queue_worker_manager = $this->getMockBuilder(QueueWorkerManager::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->queueWorker = $this->createMock(AssetRefresh::class);
+    $queue_worker_manager = $this->createMock(QueueWorkerManager::class);
     $queue_worker_manager->expects($this->any())
       ->method('createInstance')
       ->willReturn($this->queueWorker);

-    $this->state = $this->getMockBuilder(State::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->state = $this->createMock(State::class);

     $this->container = new ContainerBuilder();
     $this->container->set('string_translation',
@@ @@
    */
   protected function getMockedAcquidamConfig() {

-    $messenger = $this->getMockBuilder(Messenger::class)
-      ->onlyMethods([
-        'addWarning',
-        'addStatus',
-      ])
-      ->disableOriginalConstructor()
-      ->getMock();
+    $messenger = $this->createMock(Messenger::class);

     $config = $this->getMockBuilder(AcquiadamConfig::class)
       ->setConstructorArgs([
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


11) modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamClientTest.php:53

    ---------- begin diff ----------
@@ @@
   protected function setUp(): void {
     parent::setUp();

-    $current_user = $this->getMockBuilder(AccountProxyInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $current_user = $this->createMock(AccountProxyInterface::class);

-    $http_client = $this->getMockBuilder(ClientInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $http_client = $this->createMock(ClientInterface::class);

-    $user_data = $this->getMockBuilder(UserDataInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $user_data = $this->createMock(UserDataInterface::class);

-    $request_stack = $this->getMockBuilder(RequestStack::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $request_stack = $this->createMock(RequestStack::class);

     $client = new Client($http_client, $user_data, $current_user, $this->getDefaultConfigFactoryStub(), $request_stack);
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


12) modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamAuthTest.php:83

    ---------- begin diff ----------
@@ @@
     parent::setUp();

     $acquidamAuth = new AcquiadamAuthService();
-    $response = $this->getMockBuilder(ResponseInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $response = $this->createMock(ResponseInterface::class);
     $response->expects($this->any())
       ->method('getBody')
       ->willReturn('{"access_token":"subdomain/l0p94ab7m05646d0a7f2dc023b94nm90", "username":"abc@abc.com"}');
@@ @@
       ->getMock();
     $http_client->expects($this->any())->method('post')->willReturn($response);

-    $messenger = $this->getMockBuilder(Messenger::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $messenger = $this->createMock(Messenger::class);

     $this->container = new ContainerBuilder();
     \Drupal::setContainer($this->container);
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


13) modules/contrib/media_acquiadam/tests/src/Unit/AcquiadamAssetTest.php:56

    ---------- begin diff ----------
@@ @@
   protected function setUp(): void {
     parent::setUp();

-    $entity_type_manager = $this->getMockBuilder(EntityTypeManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);

-    $entity_field_manager = $this->getMockBuilder(EntityFieldManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_field_manager = $this->createMock(EntityFieldManagerInterface::class);

-    $field_type_plugin_manager = $this->getMockBuilder(FieldTypePluginManagerInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $field_type_plugin_manager = $this->createMock(FieldTypePluginManagerInterface::class);

-    $asset_image_helper = $this->getMockBuilder(AssetImageHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_image_helper = $this->createMock(AssetImageHelper::class);

-    $asset_metadata_helper = $this->getMockBuilder(AssetMetadataHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_metadata_helper = $this->createMock(AssetMetadataHelper::class);

-    $asset_media_helper = $this->getMockBuilder(MediaEntityHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_media_helper = $this->createMock(MediaEntityHelper::class);
     $asset_media_helper->method('getAsset')->willReturn($this->getAssetData());
     $asset_media_helper->method('getFile')
       ->willReturn($this->getMockedFileEntity());

-    $asset_media_factory = $this->getMockBuilder(AssetMediaFactory::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_media_factory = $this->createMock(AssetMediaFactory::class);
     $asset_media_factory->method('get')->willReturn($asset_media_helper);

     $this->container = new ContainerBuilder();
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


14) modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamMockedMediaEntityTrait.php:62

    ---------- begin diff ----------
@@ @@

     $sourceField = $sourceField ?? 'phpunit_asset_id_field';

-    $source_field_definition = $this->getMockBuilder(FieldDefinitionInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $source_field_definition = $this->createMock(FieldDefinitionInterface::class);
     $source_field_definition->method('getName')
       ->willReturn($sourceField);

-    $media_source = $this->getMockBuilder(MediaSourceInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $media_source = $this->createMock(MediaSourceInterface::class);
     $media_source->method('getSourceFieldDefinition')
       ->willReturn($source_field_definition);

@@ @@
     $bundle_definition->method('first')->willReturn($bundle_definition_item);
     $bundle_definition->method('__get')->with('entity')->willReturn($media_bundle);

-    $media = $this->getMockBuilder(MediaInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $media = $this->createMock(MediaInterface::class);

     $media->method('getSource')->willReturn($media_source);
     $media->method('uuid')->willReturn('e63ce44d-4cfe-44d4-af7d-0692821d52cc');
@@ @@
    *   A mocked file entity.
    */
   protected function getMockedFileEntity() {
-    $file_entity = $this->getMockBuilder(FileInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $file_entity = $this->createMock(FileInterface::class);
     $file_entity->method('id')->willReturn(894782578);

     return $file_entity;
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector


15) modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamLoggerFactoryTrait.php:16

    ---------- begin diff ----------
@@ @@
    *   A mock LoggerChannelFactoryInstance with a acquiadam channel.
    */
   protected function getLoggerFactoryStub() {
-    $logger_channel = $this->getMockBuilder(LoggerChannelInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $logger_channel = $this->createMock(LoggerChannelInterface::class);

-    $logger_factory = $this->getMockBuilder(LoggerChannelFactoryInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $logger_factory = $this->createMock(LoggerChannelFactoryInterface::class);
     $logger_factory->method('get')
       ->with('media_acquiadam')
       ->willReturn($logger_channel);
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector


16) modules/contrib/media_acquiadam/tests/src/Traits/AcquiadamAssetImageHelperTrait.php:15

    ---------- begin diff ----------
@@ @@
    *   The stubbed service.
    */
   public function getAssetImageHelperStub() {
-    $asset_image_helper = $this->getMockBuilder(AssetImageHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $asset_image_helper = $this->createMock(AssetImageHelper::class);
     $asset_image_helper->method('getMimeTypeFromFileUri')->willReturnMap([
       ['public://test.jpg', ['discrete' => 'image', 'sub' => 'jpg']],
       ['public://test.mov', ['discrete' => 'quicktime', 'sub' => 'mov']],
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector


17) modules/contrib/media_acquiadam/src/Service/AssetFileEntityHelper.php:425

    ---------- begin diff ----------
@@ @@
     if ($this->fileRepository instanceof FileRepositoryInterface) {
       return $this->fileRepository->writeData($data, $destination, FileSystemInterface::EXISTS_REPLACE);
     }
-    return file_save_data($data, $destination, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->writeData($data, $destination, FileSystemInterface::EXISTS_REPLACE);
   }

 }
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * ArgumentRemoverRector
 * WrapReturnRector


18) modules/contrib/media_acquiadam/src/Plugin/Linkit/Substitution/DAMAsset.php:84

    ---------- begin diff ----------
@@ @@
             }
             else {
               // @phpstan-ignore-next-line
-              $generated_url = file_create_url($file->getFileUri());
+              $generated_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
             }
             $url->setGeneratedUrl($generated_url);
             $url->addCacheableDependency($entity);
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector


 [OK] 18 files have been changed by Rector                                      

