diff --git a/mailchimp.module b/mailchimp.module
index 15bd32f..def673a 100644
--- a/mailchimp.module
+++ b/mailchimp.module
@@ -1,5 +1,6 @@
 <?php
 
+use function GuzzleHttp\default_user_agent;
 /**
  * @file
  * Mailchimp module.
@@ -66,7 +67,7 @@ function _mailchimp_get_user_agent() {
     }
   }
 
-  $user_agent = "DrupalMailchimp/$version " . \GuzzleHttp\default_user_agent();
+  $user_agent = "DrupalMailchimp/$version " . default_user_agent();
 
   return $user_agent;
 }
diff --git a/modules/mailchimp_campaign/src/Form/MailchimpCampaignForm.php b/modules/mailchimp_campaign/src/Form/MailchimpCampaignForm.php
index 2316fcf..1e78b40 100644
--- a/modules/mailchimp_campaign/src/Form/MailchimpCampaignForm.php
+++ b/modules/mailchimp_campaign/src/Form/MailchimpCampaignForm.php
@@ -847,7 +847,7 @@ class MailchimpCampaignForm extends ContentEntityForm {
         }
       }
 
-      return render($element);
+      return \Drupal::service('renderer')->render($element);
     }
     else {
       return $this->t('No custom merge vars exist for the current audience.');
diff --git a/modules/mailchimp_campaign/src/Plugin/Filter/FilterMailchimpCampaign.php b/modules/mailchimp_campaign/src/Plugin/Filter/FilterMailchimpCampaign.php
index 986ee97..487bb99 100644
--- a/modules/mailchimp_campaign/src/Plugin/Filter/FilterMailchimpCampaign.php
+++ b/modules/mailchimp_campaign/src/Plugin/Filter/FilterMailchimpCampaign.php
@@ -66,7 +66,7 @@ class FilterMailchimpCampaign extends FilterBase {
       if (isset($build[$entity_type][$entity_id]['#contextual_links'])) {
         unset($build[$entity_type][$entity_id]['#contextual_links']);
       }
-      $content = render($build);
+      $content = \Drupal::service('renderer')->render($build);
     }
 
     return $content;
diff --git a/modules/mailchimp_campaign/tests/src/Functional/MailchimpCampaignTestBase.php b/modules/mailchimp_campaign/tests/src/Functional/MailchimpCampaignTestBase.php
index 6294b50..f6f944f 100644
--- a/modules/mailchimp_campaign/tests/src/Functional/MailchimpCampaignTestBase.php
+++ b/modules/mailchimp_campaign/tests/src/Functional/MailchimpCampaignTestBase.php
@@ -18,7 +18,7 @@ abstract class MailchimpCampaignTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     \Drupal::configFactory()->addOverride(new MailchimpCampaignConfigOverrider());
diff --git a/modules/mailchimp_lists/tests/src/Functional/MailchimpListsTestBase.php b/modules/mailchimp_lists/tests/src/Functional/MailchimpListsTestBase.php
index 85648d6..adbaa95 100644
--- a/modules/mailchimp_lists/tests/src/Functional/MailchimpListsTestBase.php
+++ b/modules/mailchimp_lists/tests/src/Functional/MailchimpListsTestBase.php
@@ -18,7 +18,7 @@ abstract class MailchimpListsTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     \Drupal::configFactory()->addOverride(new MailchimpListsConfigOverrider());
diff --git a/modules/mailchimp_signup/src/Plugin/Field/FieldFormatter/MailchimpSignupFormFormatter.php b/modules/mailchimp_signup/src/Plugin/Field/FieldFormatter/MailchimpSignupFormFormatter.php
index a8ead52..cd8787a 100644
--- a/modules/mailchimp_signup/src/Plugin/Field/FieldFormatter/MailchimpSignupFormFormatter.php
+++ b/modules/mailchimp_signup/src/Plugin/Field/FieldFormatter/MailchimpSignupFormFormatter.php
@@ -46,7 +46,7 @@ class MailchimpSignupFormFormatter extends EntityReferenceFormatterBase {
 
       $messenger = \Drupal::messenger();
 
-      $form = new \Drupal\mailchimp_signup\Form\MailchimpSignupPageForm($messenger);
+      $form = new MailchimpSignupPageForm($messenger);
 
       $form->setFormID($this->getFormId($signup));
       $form->setSignup($signup);
diff --git a/modules/mailchimp_signup/tests/src/Functional/MailchimpSignupFormTest.php b/modules/mailchimp_signup/tests/src/Functional/MailchimpSignupFormTest.php
index e2ac83d..9d79151 100644
--- a/modules/mailchimp_signup/tests/src/Functional/MailchimpSignupFormTest.php
+++ b/modules/mailchimp_signup/tests/src/Functional/MailchimpSignupFormTest.php
@@ -20,7 +20,7 @@ class MailchimpSignupFormTest extends FunctionalMailchimpTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $rid = $this->adminUser->getRoles()[1];
@@ -81,7 +81,7 @@ class MailchimpSignupFormTest extends FunctionalMailchimpTestBase {
     $manager->clearCachedDefinitions();
 
     // Test the block.
-    $this->assertNoText('My signup block');
+    $this->assertSession()->pageTextNotContains('My signup block');
     $this->drupalPlaceBlock('mailchimp_signup_subscribe_block:my_signup_form', ['label' => 'My signup block']);
     $this->drupalGet('/foo');
     $this->assertSession()->pageTextContains('My signup block');
diff --git a/tests/src/Functional/FunctionalMailchimpTestBase.php b/tests/src/Functional/FunctionalMailchimpTestBase.php
index d0a351e..9297f9d 100644
--- a/tests/src/Functional/FunctionalMailchimpTestBase.php
+++ b/tests/src/Functional/FunctionalMailchimpTestBase.php
@@ -44,7 +44,7 @@ abstract class FunctionalMailchimpTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->drupalPlaceBlock('page_title_block');
