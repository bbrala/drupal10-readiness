diff --git a/src/Element/ExternalMediaFile.php b/src/Element/ExternalMediaFile.php
index 55bbab3..9113add 100644
--- a/src/Element/ExternalMediaFile.php
+++ b/src/Element/ExternalMediaFile.php
@@ -69,7 +69,7 @@ class ExternalMediaFile extends ManagedFile {
                 if (!empty($item['source_data'])) {
                   // @compatibility for older Drupal versions.
                   if (function_exists('file_save_data')) {
-                    $file = file_save_data($item['source_data'], $item['destination']);
+                    $file = \Drupal::service('file.repository')->writeData($item['source_data'], $item['destination']);
                   }
                   else {
                     $file = \Drupal::service('file.repository')->writeData($item['source_data'], $item['destination']);
