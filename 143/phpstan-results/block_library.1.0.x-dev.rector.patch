diff --git a/src/Controller/ChooseBlockController.php b/src/Controller/ChooseBlockController.php
index d7a7ce8..1a4edf1 100644
--- a/src/Controller/ChooseBlockController.php
+++ b/src/Controller/ChooseBlockController.php
@@ -31,7 +31,7 @@ class ChooseBlockController extends ChooseBlockControllerBase {
       // Check if block type has icon.
       if ($block_entity && $block_entity->getThirdPartySetting('block_library', 'icon_path')) {
         $icon_path = $block_entity->getThirdPartySetting('block_library', 'icon_path');
-        $icon_url = file_url_transform_relative(file_create_url($icon_path));
+        $icon_url = \Drupal::service('file_url_generator')->generateString($icon_path);
 
         // Add the image to the link title.
         $build['links']['#links'][$key]['title'] = Markup::create('<img src="' . $icon_url . '" class="bl-block-icon" /> ' . '<span class="bl-block-title">' . $link['title'] . '</span>');
