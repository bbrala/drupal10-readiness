modules/contrib/advagg/advagg.developer-documentation.php
modules/contrib/advagg/advagg_bundler/src/Asset/AdvaggJsCollectionGrouper.php
modules/contrib/advagg/advagg.drush.inc
modules/contrib/advagg/advagg_css_minify/advagg_css_minify.install
modules/contrib/advagg/advagg_ext_minify/src/Asset/Minifier.php
modules/contrib/advagg/advagg_js_minify/src/Asset/JsMinifier.php
modules/contrib/advagg/advagg_mod/src/Asset/RemoveConsoleLog.php
modules/contrib/advagg/advagg_validator/src/Form/BaseValidatorForm.php
modules/contrib/advagg/advagg_mod/src/Asset/TranslateCss.php
modules/contrib/advagg/advagg_css_minify/src/Asset/CssMinifier.php
modules/contrib/advagg/src/AdvaggSettersTrait.php
modules/contrib/advagg/tests/src/Kernel/Form/InfoFormTest.php
modules/contrib/advagg/advagg_bundler/src/EventSubscriber/MinificationSubscriber.php
modules/contrib/advagg/advagg_mod/src/EventSubscriber/InitSubscriber.php
modules/contrib/advagg/advagg_bundler/src/Form/SettingsForm.php
modules/contrib/advagg/advagg_css_minify/src/EventSubscriber/MinificationSubscriber.php
modules/contrib/advagg/advagg_css_minify/src/Form/SettingsForm.php
modules/contrib/advagg/src/Asset/AssetOptimizationEvent.php
modules/contrib/advagg/advagg.install
modules/contrib/advagg/advagg_bundler/tests/modules/advagg_bundler_test/advagg_bundler_test.module
modules/contrib/advagg/advagg_bundler/tests/src/Functional/BundlerTest.php
modules/contrib/advagg/src/Asset/AssetOptimizer.php
modules/contrib/advagg/advagg_ext_minify/src/EventSubscriber/MinificationSubscriber.php
modules/contrib/advagg/advagg_css_minify/tests/src/Functional/CssMinifyPagesTest.php
modules/contrib/advagg/advagg_ext_minify/src/Form/SettingsForm.php
modules/contrib/advagg/advagg_mod/src/Form/SettingsForm.php
modules/contrib/advagg/advagg_bundler/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/advagg_css_minify/tests/src/Kernel/Asset/CssMinifierUnitTest.php
modules/contrib/advagg/advagg_cdn/advagg_cdn.install
modules/contrib/advagg/tests/src/Kernel/Form/OperationsFormTest.php
modules/contrib/advagg/advagg_cdn/advagg_cdn.module
modules/contrib/advagg/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/advagg.module
modules/contrib/advagg/advagg_cdn/src/Form/SettingsForm.php
modules/contrib/advagg/advagg_ext_minify/tests/src/Functional/ExtMinifyPagesTest.php
modules/contrib/advagg/advagg_css_minify/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/advagg_ext_minify/advagg_ext_minify.install
modules/contrib/advagg/advagg_bundler/advagg_bundler.install
modules/contrib/advagg/advagg_ext_minify/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/advagg_bundler/src/Asset/AdvaggCssCollectionGrouper.php
modules/contrib/advagg/advagg_cdn/tests/src/Functional/CdnTest.php
modules/contrib/advagg/advagg_cdn/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/src/Asset/CssOptimizer.php
modules/contrib/advagg/advagg_mod/tests/src/Functional/ModifierPagesTest.php
modules/contrib/advagg/advagg_validator/src/Form/CssLintForm.php
modules/contrib/advagg/advagg_js_minify/src/EventSubscriber/MinificationSubscriber.php
modules/contrib/advagg/advagg_js_minify/advagg_js_minify.install
modules/contrib/advagg/advagg_js_minify/src/Form/SettingsForm.php
modules/contrib/advagg/advagg_validator/src/Form/CssW3Form.php
modules/contrib/advagg/advagg_js_minify/jshrink.inc
modules/contrib/advagg/advagg_mod/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/advagg_js_minify/tests/src/Functional/JsMinifyPagesTest.php
modules/contrib/advagg/src/Asset/JsOptimizer.php
modules/contrib/advagg/advagg_js_minify/tests/src/Kernel/Asset/JsMinifierUnitTest.php
modules/contrib/advagg/src/Asset/SingleAssetOptimizerBase.php
modules/contrib/advagg/advagg_old_ie_compatibility/advagg_old_ie_compatibility.install
modules/contrib/advagg/advagg_old_ie_compatibility/src/Asset/AdvaggCssCollectionGrouper.php
modules/contrib/advagg/advagg_js_minify/jsminplus.inc
modules/contrib/advagg/src/Commands/AdvaggCommands.php
modules/contrib/advagg/advagg_old_ie_compatibility/src/EventSubscriber/CssSubscriber.php
modules/contrib/advagg/advagg_old_ie_compatibility/src/Form/SettingsForm.php
modules/contrib/advagg/src/EventSubscriber/ResponseSubscriber.php
modules/contrib/advagg/advagg_old_ie_compatibility/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/src/Form/AdvaggFormBase.php
modules/contrib/advagg/advagg_validator/src/Form/JsHintForm.php
modules/contrib/advagg/advagg_js_minify/tests/src/Kernel/Form/SettingsFormTest.php
modules/contrib/advagg/src/Form/InfoForm.php
modules/contrib/advagg/advagg_validator/tests/src/Functional/ValidatorPagesTest.php
modules/contrib/advagg/advagg_mod/advagg_mod.install
modules/contrib/advagg/advagg_mod/advagg_mod.module
modules/contrib/advagg/advagg_validator/tests/src/Kernel/Form/CssLintFormTest.php
modules/contrib/advagg/advagg_validator/tests/src/Kernel/Form/CssW3FormTest.php
modules/contrib/advagg/src/Form/OperationsForm.php
modules/contrib/advagg/advagg_validator/tests/src/Kernel/Form/JsHintFormTest.php
modules/contrib/advagg/advagg_mod/src/Asset/AsyncJs.php
modules/contrib/advagg/advagg_mod/src/Asset/DeferCss.php
modules/contrib/advagg/advagg_mod/src/Asset/DeferJs.php
modules/contrib/advagg/src/Form/SettingsForm.php
modules/contrib/advagg/tests/modules/advagg_test/advagg_test.module
modules/contrib/advagg/tests/src/Functional/AdminPagesTest.php
modules/contrib/advagg/tests/src/Functional/AdvaggFunctionalTestBase.php
modules/contrib/advagg/tests/src/Functional/AdvaggPathManipulationTest.php
modules/contrib/advagg/tests/src/Functional/CombineMediaQueriesTest.php
modules/contrib/advagg/tests/src/Kernel/Asset/CssOptimizerUnitTest.php
modules/contrib/advagg/advagg_js_minify/jspacker.inc
modules/contrib/advagg/advagg_js_minify/jsqueeze.inc

24 files with changes
=====================

1) modules/contrib/advagg/tests/src/Kernel/Form/SettingsFormTest.php:31

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->settingsForm = SettingsForm::create($this->container);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/advagg/tests/src/Kernel/Form/OperationsFormTest.php:34

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/advagg/tests/src/Kernel/Form/InfoFormTest.php:34

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/advagg/advagg_css_minify/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/advagg/advagg_css_minify/tests/src/Kernel/Asset/CssMinifierUnitTest.php:28

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig('advagg_css_minify');
     $this->optimizer = \Drupal::service('advagg.css_minifier');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/advagg/advagg_cdn/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/advagg/advagg_bundler/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/advagg/advagg_old_ie_compatibility/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/advagg/advagg_mod/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/advagg/advagg_validator/tests/src/Kernel/Form/JsHintFormTest.php:31

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/advagg/advagg_validator/tests/src/Kernel/Form/CssW3FormTest.php:31

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/advagg/advagg_validator/tests/src/Kernel/Form/CssLintFormTest.php:31

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/advagg/advagg_mod/src/Asset/DeferJs.php:54

    ---------- begin diff ----------
@@ @@

     // Admin Toolbar 8x fails when deferred.
     if ($this->moduleHandler->moduleExists('admin_toolbar')) {
-      $this->skipList[] = Crypt::hashBase64(drupal_get_path('module', 'admin_toolbar') . '/js/admin_toolbar.js' . $this->counter);
+      $this->skipList[] = Crypt::hashBase64(\Drupal::service('extension.list.module')->getPath('admin_toolbar') . '/js/admin_toolbar.js' . $this->counter);
     }
   }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector


14) modules/contrib/advagg/advagg_mod/src/Asset/DeferCss.php:63

    ---------- begin diff ----------
@@ @@

     // Put JS inline if configured.
     if ($this->deferMethod === 0) {
-      $path = drupal_get_path('module', 'advagg_mod') . '/js/loadCSS.js';
+      $path = \Drupal::service('extension.list.module')->getPath('advagg_mod') . '/js/loadCSS.js';
       if (!strpos($content, $path)) {
         $path = Crypt::hashBase64($path . $this->counter);
       }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector


15) modules/contrib/advagg/advagg_mod/advagg_mod.module:15

    ---------- begin diff ----------
@@ @@
   }
   $config = \Drupal::config('advagg_mod.settings');
   // Use the current file system path for advagg_mod.
-  $module_path = drupal_get_path('module', 'advagg_mod');
+  $module_path = \Drupal::service('extension.list.module')->getPath('advagg_mod');
   if (isset($js[$module_path . '/js/loadCSS.js'])) {
     if ($config->get('css_defer_js_code') === 4) {
       $js[$module_path . '/js/loadCSS.js']['type'] = 'external';
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


16) modules/contrib/advagg/advagg_js_minify/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/advagg/advagg_js_minify/tests/src/Kernel/Asset/JsMinifierUnitTest.php:28

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig('advagg_js_minify');
     $this->optimizer = \Drupal::service('advagg.js_minifier');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


18) modules/contrib/advagg/advagg_js_minify/src/Asset/JsMinifier.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\advagg_js_minify\Asset;

+use JShrink\Minifier;
+use Patchwork\JSqueeze;
 use Drupal\Component\Utility\Unicode;
 use Drupal\advagg\Asset\SingleAssetOptimizerBase;
 use Drupal\Core\Config\ConfigFactoryInterface;
@@ @@

     // Only include jsminplus.inc if the JSMinPlus class doesn't exist.
     if (!class_exists('\JSMinPlus')) {
-      include drupal_get_path('module', 'advagg_js_minify') . '/jsminplus.inc';
+      include \Drupal::service('extension.list.module')->getPath('advagg_js_minify') . '/jsminplus.inc';
       $nesting_level = ini_get('xdebug.max_nesting_level');
       if (!empty($nesting_level) && $nesting_level < 200) {
         ini_set('xdebug.max_nesting_level', 200);
@@ @@
   public function minifyJspacker(&$contents) {
     // Use Packer on the contents of the aggregated file.
     if (!class_exists('\JavaScriptPacker')) {
-      include drupal_get_path('module', 'advagg_js_minify') . '/jspacker.inc';
+      include \Drupal::service('extension.list.module')->getPath('advagg_js_minify') . '/jspacker.inc';
     }

     // Add semicolons to the end of lines if missing.
@@ @@

     // Only include jshrink.inc if the JShrink\Minifier class doesn't exist.
     if (!class_exists('\JShrink\Minifier')) {
-      include drupal_get_path('module', 'advagg_js_minify') . '/jshrink.inc';
+      include \Drupal::service('extension.list.module')->getPath('advagg_js_minify') . '/jshrink.inc';
       $nesting_level = ini_get('xdebug.max_nesting_level');
       if (!empty($nesting_level) && $nesting_level < 200) {
         ini_set('xdebug.max_nesting_level', 200);
@@ @@
     try {
       // JShrink the contents of the aggregated file.
       // @codingStandardsIgnoreLine
-      $contents = \JShrink\Minifier::minify($contents, ['flaggedComments' => FALSE]);
+      $contents = Minifier::minify($contents, ['flaggedComments' => FALSE]);

       // Capture any output from JShrink.
       $error = trim(ob_get_contents());
@@ @@

     // Only include jshrink.inc if the Patchwork\JSqueeze class doesn't exist.
     if (!class_exists('\Patchwork\JSqueeze')) {
-      include drupal_get_path('module', 'advagg_js_minify') . '/jsqueeze.inc';
+      include \Drupal::service('extension.list.module')->getPath('advagg_js_minify') . '/jsqueeze.inc';
       $nesting_level = ini_get('xdebug.max_nesting_level');
       if (!empty($nesting_level) && $nesting_level < 200) {
         ini_set('xdebug.max_nesting_level', 200);
@@ @@
     try {
       // Minify the contents of the aggregated file.
       // @codingStandardsIgnoreLine
-      $jz = new \Patchwork\JSqueeze();
+      $jz = new JSqueeze();
       $contents = $jz->squeeze(
         $contents,
         TRUE,
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


19) modules/contrib/advagg/tests/src/Kernel/Asset/CssOptimizerUnitTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig('advagg');
     $this->optimizer = \Drupal::service('advagg.optimizer.css');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


20) modules/contrib/advagg/tests/src/Functional/AdvaggFunctionalTestBase.php:42

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser([
       'administer site configuration',
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


21) modules/contrib/advagg/src/Asset/SingleAssetOptimizerBase.php:57

    ---------- begin diff ----------
@@ @@
    */
   public function addLicense(&$contents, $path) {
     if ($this->config->get('add_license')) {
-      $url = file_create_url($path);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($path);
       $contents = "/* Source and licensing information for the line(s) below can be found at $url. */\n" . $contents . "\n/* Source and licensing information for the above line(s) can be found at $url. */";
     }
   }
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector


22) modules/contrib/advagg/src/Asset/JsOptimizer.php:122

    ---------- begin diff ----------
@@ @@
    */
   protected function optimizeFile(array &$asset, array $data) {
     $asset_event = new AssetOptimizationEvent($data['contents'], $asset, $data);
-    $this->eventDispatcher->dispatch(AssetOptimizationEvent::JS, $asset_event);
+    $this->eventDispatcher->dispatch($asset_event, AssetOptimizationEvent::JS);
     $contents = $asset_event->getContent();
     $asset = $asset_event->getAsset();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


23) modules/contrib/advagg/src/Asset/CssOptimizer.php:87

    ---------- begin diff ----------
@@ @@
       $asset['media'] = 'all';
     }
     $asset_event = new AssetOptimizationEvent($contents, $asset, $data);
-    $this->eventDispatcher->dispatch(AssetOptimizationEvent::CSS, $asset_event);
+    $this->eventDispatcher->dispatch($asset_event, AssetOptimizationEvent::CSS);
     $contents = $asset_event->getContent();
     $asset = $asset_event->getAsset();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


24) modules/contrib/advagg/advagg_ext_minify/tests/src/Kernel/Form/SettingsFormTest.php:35

    ---------- begin diff ----------
@@ @@
    *
    * @covers ::__construct
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(static::$modules);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 24 files have been changed by Rector                                      

