modules/contrib/config_sync/config_sync.install
modules/contrib/config_sync/src/Plugin/SyncConfigCollectorInterface.php
modules/contrib/config_sync/src/Plugin/SyncConfigProviderInterface.php
modules/contrib/config_sync/src/Routing/RouteSubscriber.php
modules/contrib/config_sync/tests/src/Functional/ImportTest.php
modules/contrib/config_sync/tests/src/Kernel/UpdateModeTest.php
modules/contrib/config_sync/config_sync.module
modules/contrib/config_sync/src/Commands/ConfigSyncCommands.php
modules/contrib/config_sync/src/Config/SettableStorageComparer.php
modules/contrib/config_sync/src/ConfigSyncActiveStoragesTrait.php
modules/contrib/config_sync/src/ConfigSyncExtensionsTrait.php
modules/contrib/config_sync/src/ConfigSyncLister.php
modules/contrib/config_sync/src/ConfigSyncListerInterface.php
modules/contrib/config_sync/src/ConfigSyncServiceProvider.php
modules/contrib/config_sync/src/ConfigSyncSnapshotter.php
modules/contrib/config_sync/src/ConfigSyncSnapshotterInterface.php
modules/contrib/config_sync/src/EventSubscriber/ConfigSyncSnapshotSubscriber.php
modules/contrib/config_sync/src/Form/ConfigSyncImportForm.php
modules/contrib/config_sync/src/Plugin/ConfigFilter/SyncFilter.php
modules/contrib/config_sync/src/Plugin/ConfigFilter/SyncFilterDeriver.php
modules/contrib/config_sync/src/Plugin/SyncConfigCollector.php

5 files with changes
====================

1) modules/contrib/config_sync/tests/src/Functional/ImportTest.php:69

    ---------- begin diff ----------
@@ @@
     $this->assertSession()->pageTextContains('View differences');
     $this->assertSession()->responseContains('Import');
     $this->assertSession()->pageTextNotContains('The staged configuration is identical to the active configuration.');
+    $this->drupalGet('/admin/config/development/distro');

     // Import the configuration.
-    $this->drupalPostForm('/admin/config/development/distro', [], $this->t('Import'));
+    $this->submitForm([], $this->t('Import'));

     // Check that there are no errors.
-    $this->assertIdentical($this->configImporter()->getErrors(), []);
+    $this->assertSame($this->configImporter()->getErrors(), []);

     // Ensure that we have no configuration changes to import.
     $storage_comparer = new StorageComparer(
@@ @@
       $this->container->get('config_distro.storage.distro'),
       $this->container->get('config.storage')
     );
-    $this->assertIdentical($storage_comparer->createChangelist()->getChangelist(), $storage_comparer->getEmptyChangelist());
+    $this->assertSame($storage_comparer->createChangelist()->getChangelist(), $storage_comparer->getEmptyChangelist());

     // We should not see changes for import.
     $this->drupalGet('/admin/config/development/distro');
@@ @@

     // Check that the node type name was updated.
     $node_type = NodeType::load('config_sync_test_1');
-    $this->assertIdentical($node_type->get('name'), $provided_name);
+    $this->assertSame($node_type->get('name'), $provided_name);

     // Check that the snapshot was updated.
     $test_module_config = ConfigSnapshot::load(ConfigSyncSnapshotterInterface::CONFIG_SNAPSHOT_SET . '.module.config_sync_test');
     $items = $test_module_config->getItems();
-    $this->assertIdentical($items[0]['data']['name'], $provided_name);
+    $this->assertSame($items[0]['data']['name'], $provided_name);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertIdenticalRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/config_sync/src/Plugin/ConfigFilter/SyncFilter.php:120

    ---------- begin diff ----------
@@ @@
     // storage.
     if ($update_mode === ConfigSyncListerInterface::UPDATE_MODE_FULL_RESET) {
       // Create a storage with configuration installable from this extension.
-      $pathname = drupal_get_filename($configuration['extension_type'], $configuration['extension_name']);
+      $pathname = \Drupal::service('extension.path.resolver')->getPathname($configuration['extension_type'], $configuration['extension_name']);
       $extension = new Extension($root, $configuration['extension_type'], $pathname);
       $extensions = [
         $configuration['extension_name'] => $extension,
@@ @@
                 $updated = $config_merger->mergeConfigItemStates($previous, $current, $active);
                 $logs = $config_merger->getLogs();
                 $event = new ConfigMergeEvent($item_name, $logs, $configuration['extension_type'], $configuration['extension_name']);
-                $event_dispatcher->dispatch(ConfigMergeEvents::POST_MERGE, $event);
+                $event_dispatcher->dispatch($event, ConfigMergeEvents::POST_MERGE);
                 break;

               // Reset to the currently provided value.
    ----------- end diff -----------

Applied rules:
 * DrupalGetFilenameRector
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/config_sync/src/EventSubscriber/ConfigSyncSnapshotSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\config_sync\EventSubscriber;

+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\config_distro\Event\ConfigDistroEvents;
 use Drupal\config_filter\ConfigFilterManagerInterface;
 use Drupal\config_sync\ConfigSyncSnapshotterInterface;
 use Drupal\Core\State\StateInterface;
-use Symfony\Component\EventDispatcher\Event;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;

 /**
@@ @@
   /**
    * Refreshes the snapshot for extensions whose updates were imported.
    *
-   * @param \Symfony\Component\EventDispatcher\Event $event
+   * @param \Symfony\Contracts\EventDispatcher\Event $event
    *   The Event to process.
    */
   public function onConfigDistroImport(Event $event) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


4) modules/contrib/config_sync/src/ConfigSyncSnapshotter.php:218

    ---------- begin diff ----------
@@ @@
    *   found.
    */
   protected function drupalGetFilename($type, $name) {
-    return drupal_get_filename($type, $name);
+    return \Drupal::service('extension.path.resolver')->getPathname($type, $name);
   }

 }
    ----------- end diff -----------

Applied rules:
 * DrupalGetFilenameRector
 * ArgumentRemoverRector
 * WrapReturnRector


5) modules/contrib/config_sync/config_sync.install:62

    ---------- begin diff ----------
@@ @@
         // provides.
         foreach (array_keys($installed_type) as $name) {

-          $pathname = drupal_get_filename($type, $name);
+          $pathname = \Drupal::service('extension.path.resolver')->getPathname($type, $name);
           $extension = new Extension(\Drupal::root(), $type, $pathname);
           $extensions = [
             $name => $extension,
    ----------- end diff -----------

Applied rules:
 * DrupalGetFilenameRector
 * ArgumentRemoverRector


 [OK] 5 files have been changed by Rector                                       

