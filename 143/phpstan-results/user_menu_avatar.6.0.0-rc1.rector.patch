diff --git a/user_menu_avatar.info.yml b/user_menu_avatar.info.yml
index 5c81192..dc3504f 100644
--- a/user_menu_avatar.info.yml
+++ b/user_menu_avatar.info.yml
@@ -2,8 +2,7 @@ name: User Menu Avatar
 type: module
 description: 'Replaces a menu defined "link title" with the current user picture and/or the username. '
 package: 'Tinsel Suite'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 hidden: false
 dependencies:
   - drupal:user
diff --git a/user_menu_avatar.module b/user_menu_avatar.module
index 96cf404..a32b8f5 100644
--- a/user_menu_avatar.module
+++ b/user_menu_avatar.module
@@ -158,7 +158,7 @@ function uma_ImageURL() {
         ->getFileUri());
 
       // Set $imageURL as anonymous image field url value.
-      $imageURL = file_url_transform_relative($imageStyleURL);
+      $imageURL = \Drupal::service('file_url_generator')->transformRelative($imageStyleURL);
     }
   }
   // Check to show avatar.
@@ -179,7 +179,7 @@ function uma_ImageURL() {
           ->$avatarImageField->entity->uri->value);
 
         // Set $imageURL as image field url value.
-        $imageURL = file_url_transform_relative($imageStyleURL);
+        $imageURL = \Drupal::service('file_url_generator')->transformRelative($imageStyleURL);
 
       }
       // No primary image, check for default image.
@@ -199,7 +199,7 @@ function uma_ImageURL() {
           ->buildUrl($imageURI);
 
         // Set $imageURL as image field default URI value.
-        $imageURL = file_url_transform_relative($imageStyleURL);
+        $imageURL = \Drupal::service('file_url_generator')->transformRelative($imageStyleURL);
       }
     }
   }
