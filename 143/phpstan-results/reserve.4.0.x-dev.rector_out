modules/contrib/reserve/reservation.inc
modules/contrib/reserve/src/Controller/ReservePermissions.php
modules/contrib/reserve/src/Plugin/Field/FieldWidget/ReserveCategorySelect.php
modules/contrib/reserve/src/Entity/ReserveCategory.php
modules/contrib/reserve/src/ReserveCategoryAccessControlHandler.php
modules/contrib/reserve/src/ReserveCategoryHtmlRouteProvider.php
modules/contrib/reserve/reserve.inc
modules/contrib/reserve/src/ReserveCategoryListBuilder.php
modules/contrib/reserve/src/Entity/ReserveCategoryInterface.php
modules/contrib/reserve/src/Entity/ReserveCategoryViewsData.php
modules/contrib/reserve/src/ReserveCategoryTranslationHandler.php
modules/contrib/reserve/src/Entity/ReserveReservation.php
modules/contrib/reserve/src/ReserveReservationAccessControlHandler.php
modules/contrib/reserve/src/ReserveReservationHtmlRouteProvider.php
modules/contrib/reserve/src/ReserveReservationListBuilder.php
modules/contrib/reserve/src/ReserveReservationTranslationHandler.php
modules/contrib/reserve/src/Tests/LoadTest.php
modules/contrib/reserve/src/Entity/ReserveReservationInterface.php
modules/contrib/reserve/src/Entity/ReserveReservationViewsData.php
modules/contrib/reserve/src/Form/CalendarDatePicker.php
modules/contrib/reserve/src/Form/ReserveCategoryDeleteForm.php
modules/contrib/reserve/src/Form/ReserveCategoryForm.php
modules/contrib/reserve/src/Form/ReserveCategorySettingsForm.php
modules/contrib/reserve/src/Form/ReserveDailyHoursForm.php
modules/contrib/reserve/src/Form/ReserveDefaultHoursForm.php
modules/contrib/reserve/src/Form/ReserveDisplayForm.php
modules/contrib/reserve/src/Form/ReserveReservationDeleteForm.php
modules/contrib/reserve/src/Form/ReserveReservationForm.php
modules/contrib/reserve/src/Form/ReserveReservationSettingsForm.php
modules/contrib/reserve/src/Form/ReserveSettingsForm.php
modules/contrib/reserve/src/Plugin/Field/FieldFormatter/ReserveCategoryFormatter.php
modules/contrib/reserve/src/Plugin/Field/FieldType/ReserveCategory.php
modules/contrib/reserve/reserve.module
modules/contrib/reserve/reserve.series.inc
modules/contrib/reserve/reserve_category.page.inc
modules/contrib/reserve/reserve_reservation.page.inc
modules/contrib/reserve/src/Controller/CalendarController.php

4 files with changes
====================

1) modules/contrib/reserve/src/Plugin/Field/FieldWidget/ReserveCategorySelect.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\reserve\Plugin\Field\FieldWidget;

+use Drupal\reserve\Entity\ReserveCategory;
 use Drupal\Core\Field\FieldItemListInterface;
 use Drupal\Core\Field\WidgetBase;
 use Drupal\Core\Form\FormStateInterface;
@@ @@
     $set = $items->getSettings()['categories'];

     $ids = \Drupal::entityQuery('reserve_category')->sort('name', 'ASC')->execute();
-    $categories =  \Drupal\reserve\Entity\ReserveCategory::loadMultiple($ids);
+    $categories =  ReserveCategory::loadMultiple($ids);
     $options = array();
     foreach ($categories as $key => $cat) {
       if (!in_array($key, $set)) continue;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/reserve/src/Plugin/Field/FieldFormatter/ReserveCategoryFormatter.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\reserve\Plugin\Field\FieldFormatter;

+use Drupal\reserve\Entity\ReserveCategory;
 use Drupal\Core\Field\FormatterBase;
 use Drupal\Core\Field\FieldItemListInterface;

@@ @@
     $element = [];

     foreach ($items as $delta => $item) {
-      $category =  \Drupal\reserve\Entity\ReserveCategory::load($item->cid);
+      $category =  ReserveCategory::load($item->cid);
       // Render each element as markup.
       $element[$delta] = [
         '#type' => 'markup',
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/reserve/src/Controller/CalendarController.php:0

    ---------- begin diff ----------
@@ @@
 <?php
 namespace Drupal\reserve\Controller;

+use Drupal\field\Entity\FieldConfig;
 use Drupal\Core\Controller\ControllerBase;
 use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
 use Drupal\Core\Link;
@@ @@
     $extended = \Drupal::currentUser()->hasPermission('add reservations extended');
     $config = \Drupal::config('reserve.settings');
     $category_field = reserve_category_fields($ebundle);
-    $clearimg = '<img src="' . base_path() . drupal_get_path('module', 'reserve') . '/images/clear.png" />';
+    $clearimg = '<img src="' . base_path() . \Drupal::service('extension.list.module')->getPath('reserve') . '/images/clear.png" />';
     $modal = ['attributes' => [
       'class' => ['use-ajax'],
       'data-dialog-type' => 'modal',
@@ @@
     $variables['#calendar-text'] = $config->get('calendar_text');
     $variables['#reserve_room_instructions_text'] = $config->get('reserve_instructions') ? $config->get('reserve_instructions') :
       t('To make a reservation, click on the desired time/day in the calendar below. You will be asked to login.');
-    $variables['#arrow'] = base_path() . drupal_get_path('module', 'reserve') . '/images/arrow-icon.png';
+    $variables['#arrow'] = base_path() . \Drupal::service('extension.list.module')->getPath('reserve') . '/images/arrow-icon.png';
     $variables['#date'] = \Drupal::service('date.formatter')->format(strtotime($month . ' ' . $xday . ', ' . $year), 'custom', 'l, F d, Y');
     $variables['#date_picker'] = \Drupal::formBuilder()->getForm('Drupal\reserve\Form\CalendarDatePicker');

     $field = reserve_category_fields($ebundle);
-    $fconfig = \Drupal\field\Entity\FieldConfig::loadByName($entity_type, $bundle, $field)->getSettings();
+    $fconfig = FieldConfig::loadByName($entity_type, $bundle, $field)->getSettings();
     $variables['#calendar_header'] = $fconfig['calendar_header'];
     $variables['#reservation_instructions'] = $fconfig['reservation_instructions'];
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/reserve/reserve.inc:0

    ---------- begin diff ----------
@@ @@
 <?php
+use Drupal\field\Entity\FieldConfig;
 /**
  * @file
  * Classes and general Room Reservations helper functions.
@@ @@
     $entity_type = ebundle_split($ebundle, 'type');
     $bundle = ebundle_split($ebundle, 'bundle');
     $field = reserve_category_fields($ebundle);
-    $fconfig = \Drupal\field\Entity\FieldConfig::loadByName($entity_type, $bundle, $field)->getSettings();
+    $fconfig = FieldConfig::loadByName($entity_type, $bundle, $field)->getSettings();
     $ids = array_filter($fconfig['categories']);
   }
   else {
@@ @@
     )
   ";
   $conflicts_found = FALSE;
-  $conflicts_found = db_query($sql, array(
+  $conflicts_found = \Drupal::database()->query($sql, array(
       ':room' => $room,
       ':date0' => $search_items[0]['date'], ':time0' => $search_items[0]['start_time'], ':length0' => $search_items[0]['length'],
       ':date1' => $search_items[1]['date'], ':time1' => $search_items[1]['start_time'], ':length1' => $search_items[1]['length'],
@@ @@
       ':date4' => $search_items[4]['date'], ':time4' => $search_items[4]['start_time'], ':length4' => $search_items[4]['length'],
       ':date5' => $search_items[5]['date'], ':time5' => $search_items[5]['start_time'], ':length5' => $search_items[5]['length'],
       ':date6' => $search_items[6]['date'], ':time6' => $search_items[6]['start_time'], ':length6' => $search_items[6]['length'],
-      ':date7' => $search_items[7]['date'], ':time7' => $search_items[7]['start_time'], ':length7' => $search_items[7]['length'])
-  )->rowCount();
+      ':date7' => $search_items[7]['date'], ':time7' => $search_items[7]['start_time'], ':length7' => $search_items[7]['length']))->rowCount();
   return $conflicts_found;
 }
    ----------- end diff -----------

Applied rules:
 * DBQueryRector
 * ArgumentRemoverRector


 [ERROR] Could not process "modules/contrib/reserve/src/Tests/LoadTest.php"     
         file, due to:                                                          
         "System error: "Method assertResponse() was not found in reflection of 
         class Drupal\reserve\Tests\LoadTest."                                  
         Run Rector with "--debug" option and post the report here:             
         https://github.com/rectorphp/rector/issues/new". On line: 419          

