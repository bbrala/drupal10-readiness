modules/contrib/limit_domain_access_by_role/limit_domain_access_by_role.module
modules/contrib/limit_domain_access_by_role/src/Form/LimitDomainAccessByRoleConfigForm.php
modules/contrib/limit_domain_access_by_role/tests/src/Functional/LimitdomainaccessbyroleTest.php

1 file with changes
===================

1) modules/contrib/limit_domain_access_by_role/tests/src/Functional/LimitdomainaccessbyroleTest.php:74

    ---------- begin diff ----------
@@ @@
     $url = Url::fromRoute('limit_domain_access_by_role.settings');
     $this->drupalGet($url);
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('Technical domains that are whitelisted to allow admin operations on');
+    $this->assertSession()->pageTextContains('Technical domains that are whitelisted to allow admin operations on');
     // Empty form submission. Check presence of the default value.
-    $this->drupalPostForm(NULL, [], 'Save configuration');
-    $this->assertText('*local*');
+    $this->submitForm([], 'Save configuration');
+    $this->assertSession()->pageTextContains('*local*');
     // Form validation testing of an invalid characters rejection.
     $edit = [
       'technical_domains' => 'some/invalid/ch@r@ter$',
       'kill_sessions' => 1,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
-    $this->assertText('Invalid characters are detected.');
-    $this->assertText('Apart from yourself, there are currently no users with an open session (logged in)');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->pageTextContains('Invalid characters are detected.');
+    $this->assertSession()->pageTextContains('Apart from yourself, there are currently no users with an open session (logged in)');
   }

   /**
@@ @@
     $url = Url::fromRoute('limit_domain_access_by_role.settings');
     $this->drupalGet($url);
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('Technical domains that are whitelisted to allow admin operations on');
+    $this->assertSession()->pageTextContains('Technical domains that are whitelisted to allow admin operations on');
     // A correct form submission.
     $edit = [
       'technical_domains' => \Drupal::request()->getHost(),
       'kill_sessions' => 1,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
-    $this->assertText('The configuration options have been saved.');
-    $this->assertText('There were no users with an open session to terminate.');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');
+    $this->assertSession()->pageTextContains('There were no users with an open session to terminate.');
     // Log out.
     $this->drupalLogout();
     // Log in an unblocked user (non-admin) through the UI. Should access.
@@ @@
       'pass' => $this->user->passRaw,
     ], t('Log in'));
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('Bobby Solo');
-    $this->assertText('Member for');
+    $this->assertSession()->pageTextContains('Bobby Solo');
+    $this->assertSession()->pageTextContains('Member for');
     // Log out.
     $this->drupalLogout();
     // Log in a blocked user (admin) through the UI. Should access.
@@ @@
       'pass' => $this->admintestUser->passRaw,
     ], t('Log in'));
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('Daffy Duck');
-    $this->assertText('Member for');
+    $this->assertSession()->pageTextContains('Daffy Duck');
+    $this->assertSession()->pageTextContains('Member for');
     // Log out.
     $this->drupalLogout();
     // Get back to the settings form and check it loads correctly.
@@ @@
     $url = Url::fromRoute('limit_domain_access_by_role.settings');
     $this->drupalGet($url);
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('Technical domains that are whitelisted to allow admin operations on');
+    $this->assertSession()->pageTextContains('Technical domains that are whitelisted to allow admin operations on');
     // Make a correct form submission but now changing the technical domain.
     $edit = [
       'technical_domains' => 'admin.example.com',
       'kill_sessions' => 1,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
-    $this->assertText('The configuration options have been saved.');
-    $this->assertText('There were no users with an open session to terminate.');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');
+    $this->assertSession()->pageTextContains('There were no users with an open session to terminate.');
     // Log out.
     $this->drupalLogout();
     // Log in an unblocked user (non-admin) through the UI. Should access.
@@ @@
       'pass' => $this->user->passRaw,
     ], t('Log in'));
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('Bobby Solo');
-    $this->assertText('Member for');
+    $this->assertSession()->pageTextContains('Bobby Solo');
+    $this->assertSession()->pageTextContains('Member for');
     // Log out.
     $this->drupalLogout();
     // Log in a blocked user (admin) through the UI. Should get Access denied.
@@ @@
       'pass' => $this->admintestUser->passRaw,
     ], t('Log in'));
     $this->assertSession()->statusCodeEquals(403);
-    $this->assertText('Access denied');
-    $this->assertText('You are not authorized to access this page.');
+    $this->assertSession()->pageTextContains('Access denied');
+    $this->assertSession()->pageTextContains('You are not authorized to access this page.');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

