diff --git a/composer.json b/composer.json
index ffc2086..6235e78 100644
--- a/composer.json
+++ b/composer.json
@@ -5,6 +5,6 @@
     "license": "GPL-2.0+",
     "require": {
         "pclzip/pclzip": "^2.8",
-        "drupal/core": "^8.8 || ^9"
+        "drupal/core": "^9.3 || ^10"
     }
 }
diff --git a/download.info.yml b/download.info.yml
index 8ccf10c..698bc03 100644
--- a/download.info.yml
+++ b/download.info.yml
@@ -1,4 +1,4 @@
 name: Download
 description: 'Provides a download link with compressed files'
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
diff --git a/src/Controller/DefaultController.php b/src/Controller/DefaultController.php
index e23570e..fd49379 100644
--- a/src/Controller/DefaultController.php
+++ b/src/Controller/DefaultController.php
@@ -130,7 +130,7 @@ class DefaultController extends ControllerBase {
     }
 
     $filename = $filename . '.zip';
-    $tmp_file = file_save_data('', 'temporary://' . $filename);
+    $tmp_file = \Drupal::service('file.repository')->writeData('', 'temporary://' . $filename);
     $tmp_file->status = 0;
     $tmp_file->save();
     $archive = new PclZip($this->fileSystem->realpath($tmp_file->getFileUri()));
