diff --git a/particles_orange.theme b/particles_orange.theme
index 132b768..2b149e3 100644
--- a/particles_orange.theme
+++ b/particles_orange.theme
@@ -32,9 +32,9 @@ function particles_orange_preprocess_page(&$variables) {
   //image
   $fid = theme_get_setting("banner_image", "particles_orange");
   if (!empty($fid)) {
-    $file = \Drupal\file\Entity\File::load($fid[0]);
+    $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
     $image_path = $path.'/assets/images/background.jpg';
diff --git a/theme-settings.php b/theme-settings.php
index 4d10693..91ef417 100644
--- a/theme-settings.php
+++ b/theme-settings.php
@@ -12,7 +12,7 @@ use Drupal\Core\Form\FormStateInterface;
  * Implements hook_form_system_theme_settings_alter().
  */
 
-function particles_orange_form_system_theme_settings_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
+function particles_orange_form_system_theme_settings_alter(&$form, FormStateInterface $form_state) {
   $form['particles_orange_settings'] = [
     '#type' => 'fieldset',
     '#title' => t('Particles Responsive Settings'),
@@ -65,7 +65,7 @@ function particles_orange_form_system_theme_settings_alter(&$form, \Drupal\Core\
   ];
   $form['#submit'][] = 'particles_orange_settings_form_submit';
   $theme = \Drupal::theme()->getActiveTheme()->getName();
-  $theme_file = drupal_get_path('theme', $theme) . '/theme-settings.php';
+  $theme_file = \Drupal::service('extension.list.theme')->getPath($theme) . '/theme-settings.php';
   $build_info = $form_state->getBuildInfo();
   if (!in_array($theme_file, $build_info['files'])) {
     $build_info['files'][] = $theme_file;
@@ -149,13 +149,13 @@ function particles_orange_form_system_theme_settings_alter(&$form, \Drupal\Core\
   ];
 }
 
-function particles_orange_settings_form_submit(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
+function particles_orange_settings_form_submit(&$form, FormStateInterface $form_state) {
   $account = \Drupal::currentUser();
   $values = $form_state->getValues();
   for ($i = 1; $i <= 3; $i++) {
     if (isset($values["banner{$i}_image"]) && !empty($values["banner{$i}_image"])) {
       // Load the file via file.fid.
-      if ($file = \Drupal\file\Entity\File::load($values["banner{$i}_image"][0])) {
+      if ($file = File::load($values["banner{$i}_image"][0])) {
         // Change status to permanent.
         $file->setPermanent();
         $file->save();
