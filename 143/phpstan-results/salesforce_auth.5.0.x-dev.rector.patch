diff --git a/salesforce_auth.info.yml b/salesforce_auth.info.yml
index 3d569d4..772c5ac 100644
--- a/salesforce_auth.info.yml
+++ b/salesforce_auth.info.yml
@@ -2,7 +2,7 @@ name: Salesforce SSO
 description: This module allow users to authorized Salesforce in Drupal by it's REST API console.
 package: Salesforce
 type: module
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^8 || ^9 || ^10
 configure: salesforce_auth.settings
 
 #Libraries
diff --git a/salesforce_auth.module b/salesforce_auth.module
index 7664569..878bd9e 100644
--- a/salesforce_auth.module
+++ b/salesforce_auth.module
@@ -60,8 +60,8 @@ function salesforce_auth_form_alter(&$form, FormStateInterface $form_state, $for
  * Implements hook_user_delete().
  */
 function salesforce_auth_user_delete($account) {
-  db_delete('fs_authmap')->condition('uid', $account->id())->execute();
-  db_delete('fs_salesforce_auth')->condition('uid', $account->id())->execute();
+  \Drupal::database()->delete('fs_authmap')->condition('uid', $account->id())->execute();
+  \Drupal::database()->delete('fs_salesforce_auth')->condition('uid', $account->id())->execute();
 }
 
 /**
@@ -75,5 +75,5 @@ function salesforce_auth_user_logout($account) {
     session_destroy();
   }
   drupal_goto();
-  drupal_set_message(t('Thanks for visiting, come again!'));
+  \Drupal::messenger()->addStatus(t('Thanks for visiting, come again!'));
 }
diff --git a/src/Rest/RestClient.php b/src/Rest/RestClient.php
index 29f385c..e306b06 100644
--- a/src/Rest/RestClient.php
+++ b/src/Rest/RestClient.php
@@ -346,7 +346,7 @@ class RestClient implements RestClientInterface {
    */
   public function getAccessToken() {
     $access_token = $this->state->get('salesforce_auth.access_token');
-    return isset($access_token) && Unicode::strlen($access_token) !== 0 ? $access_token : FALSE;
+    return isset($access_token) && mb_strlen($access_token) !== 0 ? $access_token : FALSE;
   }
 
   /**
@@ -947,7 +947,7 @@ class RestClient implements RestClientInterface {
    *   The REQUEST_TIME server variable.
    */
   protected function getRequestTime() {
-    return defined('REQUEST_TIME') ? REQUEST_TIME : (int) $_SERVER['REQUEST_TIME'];
+    return defined('REQUEST_TIME') ? \Drupal::time()->getRequestTime() : (int) $_SERVER['REQUEST_TIME'];
   }
 
 }
