diff --git a/src/Event/NumberFormatDefinitionEvent.php b/src/Event/NumberFormatDefinitionEvent.php
index e7fdabe..bdf4edb 100644
--- a/src/Event/NumberFormatDefinitionEvent.php
+++ b/src/Event/NumberFormatDefinitionEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\price\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Defines the number format definition event.
diff --git a/src/Event/NumberFormatEvent.php b/src/Event/NumberFormatEvent.php
index 04c9c49..e9543ad 100644
--- a/src/Event/NumberFormatEvent.php
+++ b/src/Event/NumberFormatEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\price\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Defines the number format event.
diff --git a/src/Form/PriceModifierForm.php b/src/Form/PriceModifierForm.php
index cbc9e1c..cf501dd 100644
--- a/src/Form/PriceModifierForm.php
+++ b/src/Form/PriceModifierForm.php
@@ -85,10 +85,10 @@ class PriceModifierForm extends EntityForm {
     $status = $entity->save();
 
     if ($status == SAVED_UPDATED) {
-      drupal_set_message($this->t($entity_label . ' %label has been updated.', ['%label' => $entity->label()]));
+      $this->messenger()->addStatus($this->t($entity_label . ' %label has been updated.', ['%label' => $entity->label()]));
     }
     else {
-      drupal_set_message($this->t($entity_label . ' %label has been created.', ['%label' => $entity->label()]));
+      $this->messenger()->addStatus($this->t($entity_label . ' %label has been created.', ['%label' => $entity->label()]));
     }
 
     $form_state->setRedirect('entity.' . $entity_type->id() . '.collection');
diff --git a/src/Repository/NumberFormatRepository.php b/src/Repository/NumberFormatRepository.php
index fce3461..7437cfe 100644
--- a/src/Repository/NumberFormatRepository.php
+++ b/src/Repository/NumberFormatRepository.php
@@ -42,7 +42,7 @@ class NumberFormatRepository extends ExternalNumberFormatRepository implements N
     $definition = parent::processDefinition($locale, $definition);
     // Let the definition be altered.
     $event = new NumberFormatDefinitionEvent($definition);
-    $this->eventDispatcher->dispatch(PriceEvents::NUMBER_FORMAT, $event);
+    $this->eventDispatcher->dispatch($event, PriceEvents::NUMBER_FORMAT);
     $definition = $event->getDefinition();
 
     return $definition;
