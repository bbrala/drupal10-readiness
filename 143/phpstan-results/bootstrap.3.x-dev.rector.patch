diff --git a/src/Bootstrap.php b/src/Bootstrap.php
index 7697735..6fdbdcc 100644
--- a/src/Bootstrap.php
+++ b/src/Bootstrap.php
@@ -1357,6 +1357,7 @@ class Bootstrap {
       static::$messenger->addMessage($message, $type, $repeat);
     }
     else {
+      // @noRector
       drupal_set_message($message, $type, $repeat);
     }
   }
diff --git a/src/Plugin/Provider/ProviderBase.php b/src/Plugin/Provider/ProviderBase.php
index 8c94254..26ab537 100644
--- a/src/Plugin/Provider/ProviderBase.php
+++ b/src/Plugin/Provider/ProviderBase.php
@@ -649,7 +649,7 @@ class ProviderBase extends PluginBase implements ProviderInterface {
         $fileSystem->prepareDirectory($provider_path, $options);
       }
       else {
-        file_prepare_directory($provider_path, $options);
+        \Drupal::service('file_system')->prepareDirectory($provider_path, $options);
       }
 
       // Use manually imported API data, if it exists.
