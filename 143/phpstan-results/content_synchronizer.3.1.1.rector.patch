diff --git a/src/Events/ImportEvent.php b/src/Events/ImportEvent.php
index e8b9ecf..2260319 100644
--- a/src/Events/ImportEvent.php
+++ b/src/Events/ImportEvent.php
@@ -2,8 +2,8 @@
 
 namespace Drupal\content_synchronizer\Events;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\Core\Entity\EntityInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * Import event.
diff --git a/src/Form/ExportConfirmForm.php b/src/Form/ExportConfirmForm.php
index 6244a2e..69448e8 100644
--- a/src/Form/ExportConfirmForm.php
+++ b/src/Form/ExportConfirmForm.php
@@ -70,7 +70,7 @@ class ExportConfirmForm extends ConfirmFormBase {
   public static function create(ContainerInterface $container) {
     return new static(
       $container->get('tempstore.private'),
-      $container->get(ExportManager::SERVICE_NAME)
+      $this->exportManager
     );
   }
 
diff --git a/src/Form/LaunchExportForm.php b/src/Form/LaunchExportForm.php
index 9c2225a..12e23ba 100644
--- a/src/Form/LaunchExportForm.php
+++ b/src/Form/LaunchExportForm.php
@@ -181,7 +181,7 @@ class LaunchExportForm extends FormBase {
           '#tag'        => 'iframe',
           '#attributes' => [
             'style' => ['display:none'],
-            'src'   => file_create_url($archiveUri),
+            'src'   => \Drupal::service('file_url_generator')->generateAbsoluteString($archiveUri),
           ],
         ];
       }
diff --git a/src/Plugin/Action/ExportAction.php b/src/Plugin/Action/ExportAction.php
index a47d7df..9b29501 100644
--- a/src/Plugin/Action/ExportAction.php
+++ b/src/Plugin/Action/ExportAction.php
@@ -92,7 +92,7 @@ class ExportAction extends ActionBase implements ContainerFactoryPluginInterface
       $plugin_definition,
       $container->get('tempstore.private'),
       $container->get('current_user'),
-      $container->get(ExportManager::SERVICE_NAME)
+      $this->exportManager
     );
   }
 
diff --git a/src/Plugin/content_synchronizer/entity_processor/FileProcessor.php b/src/Plugin/content_synchronizer/entity_processor/FileProcessor.php
index b277668..097fbd8 100644
--- a/src/Plugin/content_synchronizer/entity_processor/FileProcessor.php
+++ b/src/Plugin/content_synchronizer/entity_processor/FileProcessor.php
@@ -53,7 +53,7 @@ class FileProcessor extends EntityProcessorBase implements EntityProcessorInterf
     $destination = $this->createDirTreeForFileDest(str_replace('://', '/', $file->getFileUri()), $assetsDir);
 
     // Copy file in destination directory.
-    file_copy($file, $destination);
+    \Drupal::service('file.repository')->copy($file, $destination);
   }
 
   /**
diff --git a/src/Processors/Entity/EntityProcessorBase.php b/src/Processors/Entity/EntityProcessorBase.php
index 858c213..9dd388d 100644
--- a/src/Processors/Entity/EntityProcessorBase.php
+++ b/src/Processors/Entity/EntityProcessorBase.php
@@ -389,7 +389,7 @@ class EntityProcessorBase extends PluginBase implements EntityProcessorInterface
     $event->setEntity($entity);
     $event->setGid($gid);
 
-    $dispatcher->dispatch(ImportEvent::ON_ENTITY_IMPORTER, $event);
+    $dispatcher->dispatch($event, ImportEvent::ON_ENTITY_IMPORTER);
   }
 
   /**
