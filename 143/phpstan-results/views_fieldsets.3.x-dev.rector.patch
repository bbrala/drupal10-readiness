diff --git a/src/RowFieldset.php b/src/RowFieldset.php
index 8dad316..9f61cba 100644
--- a/src/RowFieldset.php
+++ b/src/RowFieldset.php
@@ -93,7 +93,7 @@ class RowFieldset {
       $element['#attributes']['class'][] = 'collapsed';
     }
 
-    return render($element);
+    return \Drupal::service('renderer')->render($element);
   }
 
   /**
diff --git a/views_fieldsets.info.yml b/views_fieldsets.info.yml
index 154de2d..f634ee8 100644
--- a/views_fieldsets.info.yml
+++ b/views_fieldsets.info.yml
@@ -2,4 +2,4 @@ name: Views Fieldsets
 type: module
 description: Adds fieldsets to Views.
 package: Views
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
diff --git a/views_fieldsets.module b/views_fieldsets.module
index 4ad8fa2..9da5fbc 100644
--- a/views_fieldsets.module
+++ b/views_fieldsets.module
@@ -15,7 +15,7 @@ use Drupal\views_ui\ViewUI;
  */
 function views_fieldsets_theme() {
   $vars = ['fields' => [], 'attributes' => []];
-  $path = drupal_get_path('module', 'views_fieldsets');
+  $path = \Drupal::service('extension.list.module')->getPath('views_fieldsets');
   $hooks['views_fieldsets_fieldset'] = [
     'variables' => $vars + [
       'legend' => '',
