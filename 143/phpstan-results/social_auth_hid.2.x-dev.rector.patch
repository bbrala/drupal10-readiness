diff --git a/social_auth_hid.info.yml b/social_auth_hid.info.yml
index cc93cbf..01074fa 100644
--- a/social_auth_hid.info.yml
+++ b/social_auth_hid.info.yml
@@ -2,7 +2,7 @@ name: Social Auth Humanitarian ID
 type: module
 description: 'Social Auth integration for Humanitarian ID.'
 package: Social
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.1 || ^10
 configure: social_auth_hid.settings_form
 dependencies:
   - social_auth:social_auth
diff --git a/social_auth_hid.module b/social_auth_hid.module
index 4fe41cb..0c99086 100644
--- a/social_auth_hid.module
+++ b/social_auth_hid.module
@@ -93,6 +93,6 @@ function social_auth_hid_user_presave(UserInterface $user) {
     // We set the password manually when the password field is hidden to ensure
     // the user account doesn't end up with empty password value.
     // \Drupal\Core\Password\PasswordGeneratorInterface::generate()
-    $user->setPassword(user_password());
+    $user->setPassword(\Drupal::service('password_generator')->generate());
   }
 }
