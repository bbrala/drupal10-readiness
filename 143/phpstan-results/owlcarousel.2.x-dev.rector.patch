diff --git a/owlcarousel.module b/owlcarousel.module
index 4054d39..6393c97 100755
--- a/owlcarousel.module
+++ b/owlcarousel.module
@@ -55,7 +55,7 @@ function template_preprocess_owlcarousel(&$variables) {
   if (!empty($items)) {
     $i = 0;
     foreach ($items as $item) {
-      $html .= '<div class="owl-item-inner owl-item-inner' . $i . '">' . render($item) . '</div>';
+      $html .= '<div class="owl-item-inner owl-item-inner' . $i . '">' . \Drupal::service('renderer')->render($item) . '</div>';
       $i++;
     }
   }
@@ -63,7 +63,7 @@ function template_preprocess_owlcarousel(&$variables) {
     '#type' => 'markup',
     '#markup' => $html,
   ];
-  $variables['output'] = render($output);
+  $variables['output'] = \Drupal::service('renderer')->render($output);
 
 }
 
@@ -90,7 +90,7 @@ function template_preprocess_owlcarousel_views(array &$variables) {
   $attached = [
     '#attached' => ['library' => ['owlcarousel/owlcarousel']],
   ];
-  render($attached);
+  \Drupal::service('renderer')->render($attached);
   template_preprocess_views_view_unformatted($variables);
 }
 
diff --git a/src/Plugin/Field/FieldFormatter/OwlCarouselFieldFormatter.php b/src/Plugin/Field/FieldFormatter/OwlCarouselFieldFormatter.php
index e5b0ccf..0c80eba 100755
--- a/src/Plugin/Field/FieldFormatter/OwlCarouselFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/OwlCarouselFieldFormatter.php
@@ -281,7 +281,7 @@ class OwlCarouselFieldFormatter extends EntityReferenceFormatterBase implements
     foreach ($files as $delta => $file) {
       if (isset($link_file)) {
         $image_uri = $file->getFileUri();
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
       }
       $cache_tags = Cache::mergeTags($cache_tags, $file->getCacheTags());
 
