diff --git a/src/Config.php b/src/Config.php
index bd4b1db..d06821f 100644
--- a/src/Config.php
+++ b/src/Config.php
@@ -185,7 +185,7 @@ class Config {
    *   In unable to save the config.
    */
   public function importModule($module, $directory = 'install', array $options = []) {
-    $this->importDirectory(drupal_get_path('module', $module) . '/config/' . $directory, $options);
+    $this->importDirectory(\Drupal::service('extension.list.module')->getPath($module) . '/config/' . $directory, $options);
   }
 
   /**
@@ -266,7 +266,7 @@ class Config {
    *   If the directory is not writeable or if the configuration does not exist.
    */
   public function reExportModule($module, $directory = 'install', array $options = []) {
-    $this->reExportDirectory(drupal_get_path('module', $module) . '/config/' . $directory, $options);
+    $this->reExportDirectory(\Drupal::service('extension.list.module')->getPath($module) . '/config/' . $directory, $options);
   }
 
   /**
diff --git a/src/File.php b/src/File.php
index dd6a930..9473af2 100644
--- a/src/File.php
+++ b/src/File.php
@@ -2,10 +2,10 @@
 
 namespace Drupal\helper;
 
+use Symfony\Component\Mime\MimeTypesInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\file\FileInterface;
 use Symfony\Component\HttpFoundation\File\Exception\AccessDeniedException;
-use Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface;
 
 /**
  * Provides helpers for working with files.
@@ -22,7 +22,7 @@ class File {
   /**
    * The mime type guesser.
    *
-   * @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface
+   * @var \Symfony\Component\Mime\MimeTypesInterface
    */
   protected $mimeTypeGuesser;
 
@@ -31,10 +31,10 @@ class File {
    *
    * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface $mime_type_guesser
+   * @param \Symfony\Component\Mime\MimeTypesInterface $mime_type_guesser
    *   The mime type guesser.
    */
-  public function __construct(EntityTypeManagerInterface $entity_type_manager, MimeTypeGuesserInterface $mime_type_guesser) {
+  public function __construct(EntityTypeManagerInterface $entity_type_manager, MimeTypesInterface $mime_type_guesser) {
     $this->fileStorage = $entity_type_manager->getStorage('file');
     $this->mimeTypeGuesser = $mime_type_guesser;
   }
diff --git a/src/InstallProfile.php b/src/InstallProfile.php
index e9ab735..e2e12f8 100644
--- a/src/InstallProfile.php
+++ b/src/InstallProfile.php
@@ -168,7 +168,7 @@ class InstallProfile {
     // Ensure that the profile's .install file and classes are available, since
     // drupal_check_profile only does this for the install profile's
     // dependencies, but not the install profile itself.
-    $profile_path = drupal_get_path('profile', $profile);
+    $profile_path = \Drupal::service('extension.list.profile')->getPath($profile);
     $profile_install_file = DRUPAL_ROOT . '/' . $profile_path . "/$profile.install";
     \Drupal::service('class_loader')->addPsr4('Drupal\\' . $profile_path . '\\', \Drupal::root() . "/$profile_path/src");
     if (is_file($profile_install_file)) {
diff --git a/src/Response/JsonEncodeResponse.php b/src/Response/JsonEncodeResponse.php
index d45cf7a..57ca926 100644
--- a/src/Response/JsonEncodeResponse.php
+++ b/src/Response/JsonEncodeResponse.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\helper\Response;
 
+use function GuzzleHttp\json_encode;
 use GuzzleHttp\Psr7\Response;
 
 /**
@@ -29,7 +30,7 @@ class JsonEncodeResponse extends Response {
    *   code).
    */
   public function __construct($data, $status = 200, array $headers = [], $version = '1.1', $reason = NULL) {
-    $body = \GuzzleHttp\json_encode($data);
+    $body = json_encode($data);
     $headers += [
       'Content-Type' => 'application/json',
     ];
diff --git a/tests/src/Kernel/InstallProfileTest.php b/tests/src/Kernel/InstallProfileTest.php
index 7f8ad3a..c3329a4 100644
--- a/tests/src/Kernel/InstallProfileTest.php
+++ b/tests/src/Kernel/InstallProfileTest.php
@@ -32,7 +32,7 @@ class InstallProfileTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installProfile = $this->container->get('helper.install_profile');
     $this->setInstallProfile('testing');
