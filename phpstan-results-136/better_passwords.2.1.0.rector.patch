diff --git a/better_passwords.info.yml b/better_passwords.info.yml
index 5940723..a9f8f91 100644
--- a/better_passwords.info.yml
+++ b/better_passwords.info.yml
@@ -2,8 +2,7 @@ name: Better Passwords
 description: Attempts to ensure better passwords according to recommendations from NIST.
 package: Security
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.1 || ^10
 dependencies:
 configure: better_passwords.admin_settings
 
diff --git a/better_passwords.module b/better_passwords.module
index dfaa18a..472dcdf 100644
--- a/better_passwords.module
+++ b/better_passwords.module
@@ -73,7 +73,7 @@ function better_passwords_validate(array $element, FormStateInterface $form_stat
 
   if ($value === "") {
     if ($autoGenerate && \Drupal::currentUser()->isAuthenticated() && ($form_state->getFormObject()->getFormId() == 'user_register_form')) {
-      $genpass = user_password(64);
+      $genpass = \Drupal::service('password_generator')->generate(64);
       $form_state->setValueForElement($element, ['pass1' => $genpass, 'pass2' => $genpass]);
     }
     return TRUE;
