diff --git a/baidu_analytics.info.yml b/baidu_analytics.info.yml
index e8fd5c4..ee945c3 100644
--- a/baidu_analytics.info.yml
+++ b/baidu_analytics.info.yml
@@ -2,7 +2,7 @@ name: 'Baidu Tongji'
 description: 'Allows your site to be tracked by Baidu Analytics by adding a Javascript tracking code to every page.'
 package: Statistics
 type: module
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 test_dependencies:
   - token:token
 configure: baidu_analytics.admin_settings_form
diff --git a/baidu_analytics.module b/baidu_analytics.module
index c17031b..7641eb6 100644
--- a/baidu_analytics.module
+++ b/baidu_analytics.module
@@ -443,7 +443,7 @@ function _baidu_analytics_cache($location, $sync_cached_file = FALSE) {
           \Drupal::logger('baidu_analytics')->info('Locally cached tracking code file has been saved.');
 
           // Return the local JS file path.
-          return file_url_transform_relative(file_create_url($file_destination));
+          return \Drupal::service('file_url_generator')->generateString($file_destination);
         }
       }
     }
@@ -453,7 +453,7 @@ function _baidu_analytics_cache($location, $sync_cached_file = FALSE) {
   }
   else {
     // Return the local JS file path.
-    return file_url_transform_relative(file_create_url($file_destination));
+    return \Drupal::service('file_url_generator')->generateString($file_destination);
   }
 }
 
