diff --git a/block_library.info.yml b/block_library.info.yml
index fdd8d30..451f253 100644
--- a/block_library.info.yml
+++ b/block_library.info.yml
@@ -1,8 +1,7 @@
 name: 'Block Library'
 description: 'Adds additional functionality to the core block library.'
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'Layout Builder'
 dependencies:
   - drupal:layout_builder
diff --git a/composer.json b/composer.json
index b291c49..ca910a2 100644
--- a/composer.json
+++ b/composer.json
@@ -5,7 +5,7 @@
   "license": "GPL-2.0+",
   "description": "Adds additional functionality to the core block library.",
   "require": {
-      "drupal/core": "^8.7.7 || ^9",
-      "drupal/layout_builder_restrictions": "^2.7"
+      "drupal/layout_builder_restrictions": "^2.7",
+    "drupal/core": "^9.3 || ^10"
   }
 }
diff --git a/src/Controller/ChooseBlockController.php b/src/Controller/ChooseBlockController.php
index d7a7ce8..1a4edf1 100644
--- a/src/Controller/ChooseBlockController.php
+++ b/src/Controller/ChooseBlockController.php
@@ -31,7 +31,7 @@ class ChooseBlockController extends ChooseBlockControllerBase {
       // Check if block type has icon.
       if ($block_entity && $block_entity->getThirdPartySetting('block_library', 'icon_path')) {
         $icon_path = $block_entity->getThirdPartySetting('block_library', 'icon_path');
-        $icon_url = file_url_transform_relative(file_create_url($icon_path));
+        $icon_url = \Drupal::service('file_url_generator')->generateString($icon_path);
 
         // Add the image to the link title.
         $build['links']['#links'][$key]['title'] = Markup::create('<img src="' . $icon_url . '" class="bl-block-icon" /> ' . '<span class="bl-block-title">' . $link['title'] . '</span>');
