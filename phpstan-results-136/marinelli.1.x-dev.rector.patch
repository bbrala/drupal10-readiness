diff --git a/marinelli.theme b/marinelli.theme
index 5330575..a09b521 100644
--- a/marinelli.theme
+++ b/marinelli.theme
@@ -9,7 +9,7 @@ use Drupal\file\Entity\File;
 
 define('OUTTAG', (theme_get_setting('outside_tags') ? 'p' : 'h2'));
 
-include_once drupal_get_path('theme', 'marinelli') . '/inc/logics/layout.inc';
+include_once \Drupal::service('extension.list.theme')->getPath('marinelli') . '/inc/logics/layout.inc';
 
 /**
  * Implements hook_preprocess_page().
@@ -26,10 +26,10 @@ function marinelli_preprocess_page(&$vars) {
   if (!empty($fid)) {
     $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'marinelli') . '/images/advertise/1.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('marinelli') . '/images/advertise/1.jpg';
   }
   $vars['slide1_image'] = $image_path;
 
@@ -41,10 +41,10 @@ function marinelli_preprocess_page(&$vars) {
   if (!empty($fid)) {
     $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'marinelli') . '/images/advertise/2.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('marinelli') . '/images/advertise/2.jpg';
   }
   $vars['slide2_image'] = $image_path;
 
@@ -56,10 +56,10 @@ function marinelli_preprocess_page(&$vars) {
   if (!empty($fid)) {
     $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'marinelli') . '/images/advertise/3.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('marinelli') . '/images/advertise/3.jpg';
   }
   $vars['slide3_image'] = $image_path;
 
@@ -71,10 +71,10 @@ function marinelli_preprocess_page(&$vars) {
   if (!empty($fid)) {
     $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'marinelli') . '/images/advertise/4.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('marinelli') . '/images/advertise/4.jpg';
   }
   $vars['slide4_image'] = $image_path;
 
@@ -86,10 +86,10 @@ function marinelli_preprocess_page(&$vars) {
   if (!empty($fid)) {
     $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'marinelli') . '/images/advertise/5.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('marinelli') . '/images/advertise/5.jpg';
   }
   $vars['slide5_image'] = $image_path;
 
@@ -101,10 +101,10 @@ function marinelli_preprocess_page(&$vars) {
   if (!empty($fid)) {
     $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'marinelli') . '/images/advertise/6.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('marinelli') . '/images/advertise/6.jpg';
   }
   $vars['slide6_image'] = $image_path;
 
