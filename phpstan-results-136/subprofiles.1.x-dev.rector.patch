diff --git a/subprofiles.install.inc b/subprofiles.install.inc
index a1e29b3..64ac0ba 100644
--- a/subprofiles.install.inc
+++ b/subprofiles.install.inc
@@ -187,7 +187,7 @@ function subprofiles_get_data($profile = NULL, $key = NULL) {
 
   if (is_null($data)) {
     $profile = _subprofiles_get_profile($profile);
-    $filename = drupal_get_path('profile', $profile) . '/' . $profile . '.subprofiles.yml';
+    $filename = \Drupal::service('extension.list.profile')->getPath($profile) . '/' . $profile . '.subprofiles.yml';
     if (file_exists($filename)) {
       $data = Yaml::decode(file_get_contents($filename));
     }
