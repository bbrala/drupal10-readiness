diff --git a/tests/src/Functional/EncryptTest.php b/tests/src/Functional/EncryptTest.php
index 7aeaa20..fe5b9e4 100644
--- a/tests/src/Functional/EncryptTest.php
+++ b/tests/src/Functional/EncryptTest.php
@@ -18,14 +18,17 @@ class EncryptTest extends EncryptTestBase {
 
     // Check if the plugin exists.
     // Encryption method option is present.
-    $this->assertOption('edit-encryption-method', 'test_encryption_method');
+    $this->assertSession()->optionExists('edit-encryption-method', 'test_encryption_method');
     // Encryption method text is present.
-    $this->assertText('Test Encryption method');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Test Encryption method');
 
     $edit = [
       'encryption_method' => 'test_encryption_method',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     $edit = [
       'id' => 'test_encryption_profile',
@@ -33,7 +36,7 @@ class EncryptTest extends EncryptTestBase {
       'encryption_method' => 'test_encryption_method',
       'encryption_key' => $this->testKeys['testing_key_128']->id(),
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     $encryption_profile = \Drupal::service('entity_type.manager')->getStorage('encryption_profile')->load('test_encryption_profile');
     $this->assertNotEmpty($encryption_profile, 'Encryption profile was successfully saved.');
@@ -57,14 +60,17 @@ class EncryptTest extends EncryptTestBase {
 
     // Check if the plugin exists.
     // Encryption method option is present.
-    $this->assertOption('edit-encryption-method', 'test_encryption_method');
+    $this->assertSession()->optionExists('edit-encryption-method', 'test_encryption_method');
     // Encryption method text is present.
-    $this->assertText('Test Encryption method');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Test Encryption method');
 
     $edit = [
       'encryption_method' => 'test_encryption_method',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Create an encryption profile.
     $edit = [
@@ -73,52 +79,77 @@ class EncryptTest extends EncryptTestBase {
       'encryption_method' => 'test_encryption_method',
       'encryption_key' => $this->testKeys['testing_key_128']->id(),
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Test the encryption profile edit form.
     $this->drupalGet('admin/config/system/encryption/profiles/manage/test_encryption_profile');
     // The warning about editing an encryption profile is visible.
-    $this->assertText('Be extremely careful when editing an encryption profile! It may result in making data encrypted with this profile unreadable. Are you sure you want to edit this profile?');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Be extremely careful when editing an encryption profile! It may result in making data encrypted with this profile unreadable. Are you sure you want to edit this profile?');
     // The encryption method field is not visible.
-    $this->assertNoFieldByName('encryption_method', NULL);
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: buttonNotExists() if this is for a button.
+    $this->assertSession()->fieldNotExists('encryption_method');
     // The encryption key field is not visible.
-    $this->assertNoFieldByName('encryption_key', NULL);
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: buttonNotExists() if this is for a button.
+    $this->assertSession()->fieldNotExists('encryption_key');
 
-    $this->drupalPostForm(NULL, [], 'Edit');
+    $this->submitForm([], 'Edit');
 
     // The warning about editing an encryption profile is no longer visible.
-    $this->assertNoText('Be extremely careful when editing an encryption profile! It may result in making data encrypted with this profile unreadable. Are you sure you want to edit this profile?');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains('Be extremely careful when editing an encryption profile! It may result in making data encrypted with this profile unreadable. Are you sure you want to edit this profile?');
     // The encryption method field is now visible.
-    $this->assertFieldByName('encryption_method', NULL);
+    $this->assertSession()->fieldExists('encryption_method');
     // The encryption key field is now visible.
-    $this->assertFieldByName('encryption_key', NULL);
+    $this->assertSession()->fieldExists('encryption_key');
 
     // Check that the 128 bit key exists so display changes don't give false
     // positives on the key deletion assertions below.
     $this->drupalGet('admin/config/system/encryption/profiles');
-    $this->assertText('Key 128 bit');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Key 128 bit');
 
     // Now delete the testkey.
     $this->drupalGet('admin/config/system/keys');
     $this->clickLink('Delete');
     // Warning is shown that linked dependency will also be deleted when
     // deleting the key.
-    $this->assertText('Encryption Profile');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Encryption Profile');
     // The encryption profile linked dependency is listed as the linked
     // dependency.
-    $this->assertText('Test encryption profile');
-    $this->drupalPostForm(NULL, [], 'Delete');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Test encryption profile');
+    $this->submitForm([], 'Delete');
 
     // Check that the 128 bit key no longer exists.
     $this->drupalGet('admin/config/system/encryption/profiles');
-    $this->assertNoText('Key 128 bit');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains('Key 128 bit');
 
     // Test "check_profile_status" setting.
     $this->config('encrypt.settings')
       ->set('check_profile_status', FALSE)
       ->save();
     $this->drupalGet('admin/config/system/encryption/profiles');
-    $this->assertNoText('The key linked to this encryption profile does not exist.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains('The key linked to this encryption profile does not exist.');
   }
 
   /**
@@ -130,9 +161,12 @@ class EncryptTest extends EncryptTestBase {
 
     // Check if the plugin exists.
     // Config encryption method option is present.
-    $this->assertOption('edit-encryption-method', 'config_test_encryption_method');
+    $this->assertSession()->optionExists('edit-encryption-method', 'config_test_encryption_method');
     // Config encryption method text is present.
-    $this->assertText('Config Test Encryption method');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Config Test Encryption method');
 
     // Check encryption method without config.
     $edit = [
@@ -141,13 +175,18 @@ class EncryptTest extends EncryptTestBase {
       'encryption_key' => $this->testKeys['testing_key_128']->id(),
       'encryption_method' => 'test_encryption_method',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
-    $this->assertText('Saved the Test encryption profile.');
+    $this->submitForm($edit, 'Save');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Saved the Test encryption profile.');
     $this->drupalGet('admin/config/system/encryption/profiles/manage/test_encryption_profile');
     // First, confirm we want to edit the encryption profile.
-    $this->drupalPostForm(NULL, [], 'Edit');
+    $this->submitForm([], 'Edit');
     // Test encryption method has no config form.
-    $this->assertNoFieldByName('encryption_method_configuration[mode]', NULL);
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: buttonNotExists() if this is for a button.
+    $this->assertSession()->fieldNotExists('encryption_method_configuration[mode]');
 
     // Check encryption method with config.
     $this->drupalGet('admin/config/system/encryption/profiles/add');
@@ -157,15 +196,18 @@ class EncryptTest extends EncryptTestBase {
       'encryption_key' => $this->testKeys['testing_key_128']->id(),
       'encryption_method' => 'config_test_encryption_method',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
-    $this->assertText('Saved the Test 2 encryption profile.');
+    $this->submitForm($edit, 'Save');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Saved the Test 2 encryption profile.');
     $this->drupalGet('admin/config/system/encryption/profiles/manage/test_encryption_profile_2');
     // First, confirm we want to edit the encryption profile.
-    $this->drupalPostForm(NULL, [], 'Edit');
+    $this->submitForm([], 'Edit');
     // Config test encryption method has config form.
-    $this->assertFieldByName('encryption_method_configuration[mode]', NULL);
+    $this->assertSession()->fieldExists('encryption_method_configuration[mode]');
     // Config form shows element.
-    $this->assertOptionByText('encryption_method_configuration[mode]', 'CBC');
+    $this->assertSession()->optionExists('encryption_method_configuration[mode]', 'CBC');
 
     // Save encryption profile with configured encryption method.
     $this->drupalGet('admin/config/system/encryption/profiles/add');
@@ -175,16 +217,16 @@ class EncryptTest extends EncryptTestBase {
       'encryption_method' => 'config_test_encryption_method',
       'encryption_key' => $this->testKeys['testing_key_128']->id(),
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Check if encryption method configuration was succesfully saved.
     $this->drupalGet('admin/config/system/encryption/profiles/manage/test_config_encryption_profile');
     // First, confirm we want to edit the encryption profile.
-    $this->drupalPostForm(NULL, [], 'Edit');
+    $this->submitForm([], 'Edit');
     $edit = [
       'encryption_method_configuration[mode]' => 'CBC',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     /** @var \Drupal\encrypt\EncryptionProfileInterface $encryption_profile */
     $encryption_profile = \Drupal::service('entity_type.manager')->getStorage('encryption_profile')->load('test_config_encryption_profile');
     $this->assertNotEmpty($encryption_profile, 'Encryption profile was successfully saved');
@@ -196,19 +238,21 @@ class EncryptTest extends EncryptTestBase {
     $this->drupalGet('admin/config/system/encryption/profiles/manage/test_config_encryption_profile');
 
     // First, confirm we want to edit the encryption profile.
-    $this->drupalPostForm(NULL, [], 'Edit');
+    $this->submitForm([], 'Edit');
 
     // Select encryption method without config.
     $edit = [
       'encryption_method' => 'test_encryption_method',
       'encryption_key' => $this->testKeys['testing_key_128']->id(),
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('admin/config/system/encryption/profiles/manage/test_config_encryption_profile');
     // First, confirm we want to edit the encryption profile.
-    $this->drupalPostForm(NULL, [], 'Edit');
+    $this->submitForm([], 'Edit');
     // Test encryption method has no config form.
-    $this->assertNoFieldByName('encryption_method_configuration[mode]', NULL);
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: buttonNotExists() if this is for a button.
+    $this->assertSession()->fieldNotExists('encryption_method_configuration[mode]');
   }
 
 }
diff --git a/tests/src/Functional/EncryptTestBase.php b/tests/src/Functional/EncryptTestBase.php
index eb13305..39434b1 100644
--- a/tests/src/Functional/EncryptTestBase.php
+++ b/tests/src/Functional/EncryptTestBase.php
@@ -47,7 +47,7 @@ abstract class EncryptTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->adminUser = $this->drupalCreateUser([
diff --git a/tests/src/Kernel/AsymmetricalEncryptionMethod.php b/tests/src/Kernel/AsymmetricalEncryptionMethod.php
index afe6d7e..2074055 100644
--- a/tests/src/Kernel/AsymmetricalEncryptionMethod.php
+++ b/tests/src/Kernel/AsymmetricalEncryptionMethod.php
@@ -33,7 +33,7 @@ class AsymmetricalEncryptionMethod extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a 128bit testkey.
diff --git a/tests/src/Unit/EncryptServiceTest.php b/tests/src/Unit/EncryptServiceTest.php
index 04082e9..70b9ebf 100644
--- a/tests/src/Unit/EncryptServiceTest.php
+++ b/tests/src/Unit/EncryptServiceTest.php
@@ -22,6 +22,7 @@ use Drupal\encrypt\EncryptService;
  */
 class EncryptServiceTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Default configuration.
    *
@@ -72,7 +73,7 @@ class EncryptServiceTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set up a mock EncryptionProfile entity.
diff --git a/tests/src/Unit/Entity/EncryptionProfileTest.php b/tests/src/Unit/Entity/EncryptionProfileTest.php
index bfcc40b..c427438 100644
--- a/tests/src/Unit/Entity/EncryptionProfileTest.php
+++ b/tests/src/Unit/Entity/EncryptionProfileTest.php
@@ -22,35 +22,35 @@ class EncryptionProfileTest extends UnitTestCase {
   /**
    * A mocked Key entity.
    *
-   * @var \Drupal\key\Entity\Key|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\key\Entity\Key|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $key;
 
   /**
    * A mocked EncryptionMethod.
    *
-   * @var \Drupal\encrypt\EncryptionMethodInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\encrypt\EncryptionMethodInterface|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $encryptionMethod;
 
   /**
    * A mocked KeyRepository.
    *
-   * @var \Drupal\key\KeyRepository|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\key\KeyRepository|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $keyRepository;
 
   /**
    * A mocked plugin collection.
    *
-   * @var \Drupal\Core\Plugin\DefaultLazyPluginCollection|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\Core\Plugin\DefaultLazyPluginCollection|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $pluginCollection;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $container = new ContainerBuilder();
@@ -58,14 +58,10 @@ class EncryptionProfileTest extends UnitTestCase {
     \Drupal::setContainer($container);
 
     // Mock a Key entity.
-    $this->key = $this->getMockBuilder('\Drupal\key\Entity\Key')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->key = $this->createMock('\Drupal\key\Entity\Key');
 
     // Set up expectations for key.
-    $key_type = $this->getMockBuilder('\Drupal\key\Plugin\KeyType\EncryptionKeyType')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $key_type = $this->createMock('\Drupal\key\Plugin\KeyType\EncryptionKeyType');
     $key_type->expects($this->any())
       ->method('getPluginId')
       ->will($this->returnValue('encryption'));
@@ -77,9 +73,7 @@ class EncryptionProfileTest extends UnitTestCase {
       ->will($this->returnValue("key_value"));
 
     // Mock an EncryptionMethod.
-    $this->encryptionMethod = $this->getMockBuilder('\Drupal\encrypt\EncryptionMethodInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->encryptionMethod = $this->createMock('\Drupal\encrypt\EncryptionMethodInterface');
 
     // Set up expectations for encryption method.
     $this->encryptionMethod->expects($this->any())
@@ -87,9 +81,7 @@ class EncryptionProfileTest extends UnitTestCase {
       ->will($this->returnValue([]));
 
     // Mock a KeyRepository.
-    $this->keyRepository = $this->getMockBuilder('\Drupal\key\KeyRepository')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->keyRepository = $this->createMock('\Drupal\key\KeyRepository');
 
     // Mock a plugin collection.
     $this->pluginCollection = $this->getMockBuilder('\Drupal\Core\Plugin\DefaultLazyPluginCollection')
