diff --git a/src/Controller/BackupDatabaseController.php b/src/Controller/BackupDatabaseController.php
index 3acdbd8..1078a6c 100755
--- a/src/Controller/BackupDatabaseController.php
+++ b/src/Controller/BackupDatabaseController.php
@@ -32,7 +32,7 @@ class BackupDatabaseController extends ControllerBase {
     $rows = [];
     foreach ($results as $result) {
       $url = backup_db_link($result->uri);
-      $location = Link::fromTextAndUrl($result->uri, Url::fromUri('base:/' . file_create_url($url)));
+      $location = Link::fromTextAndUrl($result->uri, Url::fromUri('base:/' . \Drupal::service('file_url_generator')->generateAbsoluteString($url)));
       $created = \Drupal::service('date.formatter')
         ->format($result->created, 'html_date');
 
diff --git a/tests/src/Unit/BackupDatabaseAdapterTest.php b/tests/src/Unit/BackupDatabaseAdapterTest.php
index 5de8883..4baf7a0 100755
--- a/tests/src/Unit/BackupDatabaseAdapterTest.php
+++ b/tests/src/Unit/BackupDatabaseAdapterTest.php
@@ -20,10 +20,11 @@ use Drupal\backup_db\Adapter\BackupDatabaseRemoteAdapter;
  */
 class BackupDatabaseAdapterTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $container = new ContainerBuilder();
diff --git a/tests/src/Unit/BackupDatabaseClientTest.php b/tests/src/Unit/BackupDatabaseClientTest.php
index 8505a21..34b9f06 100755
--- a/tests/src/Unit/BackupDatabaseClientTest.php
+++ b/tests/src/Unit/BackupDatabaseClientTest.php
@@ -19,10 +19,11 @@ use Drupal\Core\DependencyInjection\ContainerBuilder;
  */
 class BackupDatabaseClientTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $handler = $this->prophesize('Drupal\backup_db\BackupDatabaseFileHandler');
