diff --git a/src/Plugin/Field/FieldWidget/StyleSelectorWidget.php b/src/Plugin/Field/FieldWidget/StyleSelectorWidget.php
index 709eb58..d7610f0 100644
--- a/src/Plugin/Field/FieldWidget/StyleSelectorWidget.php
+++ b/src/Plugin/Field/FieldWidget/StyleSelectorWidget.php
@@ -40,17 +40,18 @@ class StyleSelectorWidget extends WidgetBase {
   /**
    * {@inheritdoc}
    */
-  public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, array $third_party_settings, ComponentDiscovery $component_discovery, string $app_root) {
+  public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, array $third_party_settings, ComponentDiscovery $component_discovery, string $app_root, \Drupal\cl_components\Component\ComponentDiscovery $componentDiscovery) {
     parent::__construct($plugin_id, $plugin_definition, $field_definition, $settings, $third_party_settings);
     $this->componentDiscovery = $component_discovery;
     $this->appRoot = $app_root;
+    $this->componentDiscovery = $componentDiscovery;
   }
 
   /**
    * {@inheritdoc}
    */
   public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
-    $component_discovery = $container->get(ComponentDiscovery::class);
+    $component_discovery = $this->componentDiscovery;
     assert($component_discovery instanceof ComponentDiscovery);
     return new static(
       $plugin_id,
