modules/contrib/agreement/agreement.install
modules/contrib/agreement/agreement.module
modules/contrib/agreement/agreement.post_update.php
modules/contrib/agreement/agreement.views.inc
modules/contrib/agreement/src/AgreementHandler.php
modules/contrib/agreement/src/AgreementHandlerInterface.php
modules/contrib/agreement/src/Entity/Agreement.php
modules/contrib/agreement/src/Entity/AgreementDeleteForm.php
modules/contrib/agreement/src/Entity/AgreementForm.php
modules/contrib/agreement/src/Entity/AgreementListBuilder.php
modules/contrib/agreement/src/Entity/AgreementViewBuilder.php
modules/contrib/agreement/src/Entity/Routing/AgreementRouteProvider.php
modules/contrib/agreement/src/EventSubscriber/AgreementSubscriber.php
modules/contrib/agreement/src/Form/AgreementForm.php
modules/contrib/agreement/src/Plugin/migrate/destination/Agreement.php
modules/contrib/agreement/src/Plugin/migrate/process/AgreementSettings.php
modules/contrib/agreement/src/Plugin/migrate/source/Agreement.php
modules/contrib/agreement/src/Plugin/migrate/source/d7/AgreementType.php
modules/contrib/agreement/src/Plugin/views/field/AgreementEntity.php
modules/contrib/agreement/tests/fixtures/drupal6.php
modules/contrib/agreement/tests/fixtures/drupal7.php
modules/contrib/agreement/tests/src/Functional/AgreementAccessDeniedRedirectTest.php
modules/contrib/agreement/tests/src/Functional/AgreementAnonymousTest.php
modules/contrib/agreement/tests/src/Functional/AgreementBypassUserTest.php
modules/contrib/agreement/tests/src/Functional/AgreementCustomFrequencyTest.php
modules/contrib/agreement/tests/src/Functional/AgreementCustomUnprivilegedUserTest.php
modules/contrib/agreement/tests/src/Functional/AgreementDefaultsPrivilegedUserTest.php
modules/contrib/agreement/tests/src/Functional/AgreementDefaultsUnprivilegedUserTest.php
modules/contrib/agreement/tests/src/Functional/AgreementLogoutExceptionTest.php
modules/contrib/agreement/tests/src/Functional/AgreementMultilingualTest.php
modules/contrib/agreement/tests/src/Functional/AgreementMultipleRoleTest.php
modules/contrib/agreement/tests/src/Functional/AgreementMultipleTest.php
modules/contrib/agreement/tests/src/Functional/AgreementRecordsViewsTest.php
modules/contrib/agreement/tests/src/Functional/AgreementRevokeTest.php
modules/contrib/agreement/tests/src/Functional/AgreementTestBase.php
modules/contrib/agreement/tests/src/Kernel/d6/AgreementMigrateTest.php
modules/contrib/agreement/tests/src/Kernel/d7/AgreementMigrateTest.php
modules/contrib/agreement/tests/src/Unit/AgreementHandlerTest.php
modules/contrib/agreement/tests/src/Unit/Entity/AgreementTest.php
modules/contrib/agreement/tests/src/Unit/EventSubscriber/AgreementSubscriberTest.php
modules/contrib/agreement/tests/src/Unit/Plugin/views/field/AgreementEntityTest.php

4 files with changes
====================

1) modules/contrib/agreement/tests/src/Unit/Plugin/views/field/AgreementEntityTest.php:14

    ---------- begin diff ----------
@@ @@
  */
 class AgreementEntityTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Agreement entity plugin.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/agreement/tests/src/Unit/EventSubscriber/AgreementSubscriberTest.php:17

    ---------- begin diff ----------
@@ @@
  */
 class AgreementSubscriberTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Asserts that check for redirection method is functional.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/agreement/tests/src/Unit/AgreementHandlerTest.php:16

    ---------- begin diff ----------
@@ @@
  */
 class AgreementHandlerTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Asserts that database operation errors are handled.
    *
@@ @@
       ->willReturn($transactionProphet->reveal());

     // Prophecy does not allow mocking objects that return $this because.
-    $delete = $this->getMockBuilder('\Drupal\Core\Database\Query\Delete')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $delete = $this->createMock('\Drupal\Core\Database\Query\Delete');
     $delete->expects($this->any())
       ->method('condition')
       ->willReturnSelf();
@@ @@
         return 3;
       });

-    $insert = $this->getMockBuilder('\Drupal\Core\Database\Query\Insert')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $insert = $this->createMock('\Drupal\Core\Database\Query\Insert');
     $insert->expects($this->any())
       ->method('fields')
       ->willReturnSelf();
@@ @@
     $statementProphet->fetchField()->willReturn($agreed);

     // Mocks select query using mock object because prophecy.
-    $select = $this->getMockBuilder('\Drupal\Core\Database\Query\SelectInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $select = $this->createMock('\Drupal\Core\Database\Query\SelectInterface');
     $select->expects($this->any())
       ->method('fields')
       ->willReturnSelf();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/agreement/src/AgreementHandler.php:225

    ---------- begin diff ----------
@@ @@
     elseif ($agreement->agreeOnce()) {
       $expire = new \DateTime('+10 years');
     }
-    return new Cookie($cookieName, $agreed, $expire, '/', NULL, NULL, 'lax');
+    return \Symfony\Component\HttpFoundation\Cookie::create($cookieName, $agreed, $expire, '/', NULL, NULL, 'lax');
   }

   /**
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * NewToStaticCallRector
 * AddParamTypeDeclarationRector


 [OK] 4 files have been changed by Rector                                       

