modules/contrib/akamai/akamai.install
modules/contrib/akamai/akamai.module
modules/contrib/akamai/akamai.post_update.php
modules/contrib/akamai/src/AkamaiAuthentication.php
modules/contrib/akamai/src/AkamaiClientBase.php
modules/contrib/akamai/src/AkamaiClientFactory.php
modules/contrib/akamai/src/AkamaiClientInterface.php
modules/contrib/akamai/src/AkamaiClientManager.php
modules/contrib/akamai/src/Annotation/AkamaiClient.php
modules/contrib/akamai/src/Commands/AkamaiCommands.php
modules/contrib/akamai/src/Event/AkamaiHeaderEvents.php
modules/contrib/akamai/src/Event/AkamaiPurgeEvents.php
modules/contrib/akamai/src/EventSubscriber/CacheableResponseSubscriber.php
modules/contrib/akamai/src/Form/CacheControlForm.php
modules/contrib/akamai/src/Form/ClearUrlForm.php
modules/contrib/akamai/src/Form/ConfigForm.php
modules/contrib/akamai/src/Helper/CacheTagFormatter.php
modules/contrib/akamai/src/Helper/Edgescape.php
modules/contrib/akamai/src/KeyProvider.php
modules/contrib/akamai/src/KeyProviderInterface.php
modules/contrib/akamai/src/Plugin/Block/CacheClearBlock.php
modules/contrib/akamai/src/Plugin/Client/AkamaiClientV3.php
modules/contrib/akamai/src/Plugin/Purge/DiagnosticCheck/CredentialCheck.php
modules/contrib/akamai/src/Plugin/Purge/DiagnosticCheck/QueueLengthCheck.php
modules/contrib/akamai/src/Plugin/Purge/Purger/AkamaiPurger.php
modules/contrib/akamai/src/Plugin/Purge/Purger/AkamaiTagPurger.php
modules/contrib/akamai/tests/bootstrap.php
modules/contrib/akamai/tests/src/Functional/AkamaiCacheControlFormTest.php
modules/contrib/akamai/tests/src/Functional/AkamaiConfigFormTest.php
modules/contrib/akamai/tests/src/Functional/AkamaiHomepageTest.php
modules/contrib/akamai/tests/src/Functional/EdgescapeTest.php
modules/contrib/akamai/tests/src/Kernel/EdgeCacheTagHeaderTest.php
modules/contrib/akamai/tests/src/Kernel/EventSubscriber/CacheableResponseSubscriberTest.php
modules/contrib/akamai/tests/src/Kernel/EventSubscriber/MockSubscriber.php
modules/contrib/akamai/tests/src/Kernel/KeyRepositoryAvailableTest.php
modules/contrib/akamai/tests/src/Kernel/KeyRepositoryUnavailableTest.php
modules/contrib/akamai/tests/src/Kernel/MockHeaderSubscriber.php
modules/contrib/akamai/tests/src/Unit/AkamaiAuthenticationTest.php
modules/contrib/akamai/tests/src/Unit/AkamaiClientV3Test.php
modules/contrib/akamai/tests/src/Unit/Helper/CacheTagFormatterTest.php
modules/contrib/akamai/tests/src/Unit/Helper/EdgescapeTest.php
modules/contrib/akamai/tests/src/Unit/Plugin/Purge/Purger/AkamaiPurgerTest.php
modules/contrib/akamai/tests/src/Unit/Plugin/Purge/Purger/AkamaiTagPurgerTest.php

7 files with changes
====================

1) modules/contrib/akamai/tests/src/Unit/AkamaiClientV3Test.php:13

    ---------- begin diff ----------
@@ @@
  */
 class AkamaiClientV3Test extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Creates a client to test.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/akamai/tests/src/Unit/AkamaiAuthenticationTest.php:13

    ---------- begin diff ----------
@@ @@
  */
 class AkamaiAuthenticationTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Tests that we can authorise when specifying edgerc file.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/akamai/tests/src/Kernel/EventSubscriber/MockSubscriber.php:13

    ---------- begin diff ----------
@@ @@
   /**
    * Storage of the last event.
    *
-   * @var Symfony\Component\EventDispatcher\Event
+   * @var \Symfony\Contracts\EventDispatcher\Event
    */
   public $event;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


4) modules/contrib/akamai/tests/src/Functional/EdgescapeTest.php:68

    ---------- begin diff ----------
@@ @@
     $this->drupalGet($akamai_config_path, [], [
       Edgescape::EDGESCAPE_HEADER => $header_value,
     ]);
-    $this->assertRaw('Country Code: RAX');
+    $this->assertSession()->responseContains('Country Code: RAX');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/akamai/src/EventSubscriber/CacheableResponseSubscriber.php:63

    ---------- begin diff ----------
@@ @@
   /**
    * Add cache tags header on cacheable responses.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    */
-  public function onRespond(FilterResponseEvent $event) {
+  public function onRespond(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
     if (!$event->isMasterRequest()) {
       return;
     }
@@ @@

       // Instantiate our event.
       $event = new AkamaiHeaderEvents($tags);
-      $this->eventDispatcher->dispatch(AkamaiHeaderEvents::HEADER_CREATION, $event);
+      $this->eventDispatcher->dispatch($event, AkamaiHeaderEvents::HEADER_CREATION);
       $tags = $event->data;
       foreach ($tags as &$tag) {
         $tag = $this->tagFormatter->format($tag);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


6) modules/contrib/akamai/src/Event/AkamaiPurgeEvents.php:6

    ---------- begin diff ----------
@@ @@
 /**
  * Event that is fired when Akamai purge is formed.
  */
-class AkamaiPurgeEvents extends Event {
+class AkamaiPurgeEvents extends \Symfony\Contracts\EventDispatcher\Event {

   const PURGE_CREATION = 'akamai.purge_creation';
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/akamai/src/Event/AkamaiHeaderEvents.php:6

    ---------- begin diff ----------
@@ @@
 /**
  * Event that is fired when Akamai header is formed.
  */
-class AkamaiHeaderEvents extends Event {
+class AkamaiHeaderEvents extends \Symfony\Contracts\EventDispatcher\Event {
   /**
    * The event dispatched when a response is received for a purge request.
    */
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [ERROR] Could not process                                                      
         "modules/contrib/akamai/tests/src/Unit/Plugin/Purge/Purger/AkamaiTagPurge
         rTest.php" file, due to:                                               
         "Analyze error: "Class Drupal\purge\Plugin\Purge\Purger\PurgerBase not 
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/akamai/tests/src/Unit/Plugin/Purge/Purger/AkamaiPurgerTe
         st.php" file, due to:                                                  
         "Analyze error: "Class Drupal\purge\Plugin\Purge\Purger\PurgerBase not 
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/akamai/src/Plugin/Purge/Purger/AkamaiTagPurger.php"   
         file, due to:                                                          
         "Analyze error: "Class Drupal\purge\Plugin\Purge\Purger\PurgerBase not 
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/akamai/src/Plugin/Purge/Purger/AkamaiPurger.php" file,
         due to:                                                                
         "Analyze error: "Class Drupal\purge\Plugin\Purge\Purger\PurgerBase not 
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/akamai/src/Plugin/Purge/DiagnosticCheck/QueueLengthCheck
         .php" file, due to:                                                    
         "Analyze error: "Class                                                 
         Drupal\purge\Plugin\Purge\DiagnosticCheck\DiagnosticCheckBase not      
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/akamai/src/Plugin/Purge/DiagnosticCheck/CredentialCheck.
         php" file, due to:                                                     
         "Analyze error: "Class                                                 
         Drupal\purge\Plugin\Purge\DiagnosticCheck\DiagnosticCheckBase not      
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

