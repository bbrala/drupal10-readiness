diff --git a/varbase_email.module b/varbase_email.module
index f5c6497..cc9db26 100644
--- a/varbase_email.module
+++ b/varbase_email.module
@@ -67,10 +67,10 @@ function varbase_email_preprocess_email(&$variables) {
         $scheme = StreamWrapperManager::getScheme($uri);
 
         if ($scheme) {
-          $variables['logo'] = file_create_url($uri);
+          $variables['logo'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
         else {
-          $variables['logo'] = $host . file_create_url($uri);
+          $variables['logo'] = $host . \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
       }
       else {
