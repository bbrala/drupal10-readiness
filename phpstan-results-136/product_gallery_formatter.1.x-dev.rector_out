modules/contrib/product_gallery_formatter/product_gallery_formatter.module
modules/contrib/product_gallery_formatter/src/Plugin/Field/FieldFormatter/ProductGalleryFormatter.php

2 files with changes
====================

1) modules/contrib/product_gallery_formatter/src/Plugin/Field/FieldFormatter/ProductGalleryFormatter.php:102

    ---------- begin diff ----------
@@ @@
       '#type' => 'inline_template',
       '#template' => '<a href="{{ path }}"><img src="{{ path }}" /></a>',
       '#context' => [
-        'path' => $style ? $style->buildUrl($uri) : file_create_url($uri)
+        'path' => $style ? $style->buildUrl($uri) : \Drupal::service('file_url_generator')->generateAbsoluteString($uri)
       ]
     ];
   }
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/product_gallery_formatter/product_gallery_formatter.module:75

    ---------- begin diff ----------
@@ @@
 		$path = \Drupal::service('path.current')->getPath();
 		$params = \Drupal\Core\Url::fromUserInput($path)->getRouteParameters();
 		//$product = \Drupal\commerce_product\Entity\Product::load($params['commerce_product']);
-
-		    $query = db_select('commerce_product_variation_field_data', 'v');
+						// TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+						// You will need to use `\Drupal\core\Database\Database::getConnection()` if you do not yet have access to the container here.
+						$query = \Drupal::database()->select('commerce_product_variation_field_data', 'v');
 			$query->addField('v', 'sku');
 			$query->addField('v', 'price__amount');
 			$query->condition('v.product_id', $params['commerce_product']);
@@ @@
 }

 function _get_sku($product_id) {
-	$query = db_select('commerce_product_variation_field_data', 'v');
+	// TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+	// You will need to use `\Drupal\core\Database\Database::getConnection()` if you do not yet have access to the container here.
+	$query = \Drupal::database()->select('commerce_product_variation_field_data', 'v');
 	$query->addField('v', 'sku');
 	$query->addField('v', 'price__amount');
 	$query->condition('v.product_id', $product_id);
    ----------- end diff -----------

Applied rules:
 * DBSelectRector
 * ArgumentRemoverRector


 [OK] 2 files have been changed by Rector                                       

