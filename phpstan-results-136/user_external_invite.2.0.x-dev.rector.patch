diff --git a/user_external_invite.info.yml b/user_external_invite.info.yml
index d3be521..30a818d 100644
--- a/user_external_invite.info.yml
+++ b/user_external_invite.info.yml
@@ -1,7 +1,7 @@
 name: User External Invite
 type: module
 description: Allows users with permissions to assign a role and email invitations to other users. Requires external authentication.
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: user_external_invite.configure
 dependencies:
  - token:token
diff --git a/user_external_invite.tokens.inc b/user_external_invite.tokens.inc
index 0bdf3cb..bf768d8 100644
--- a/user_external_invite.tokens.inc
+++ b/user_external_invite.tokens.inc
@@ -34,7 +34,7 @@ function user_external_invite_tokens($type, $tokens, array $data, array $options
         case 'join-path':
           $values = [];
           foreach (token_element_children($array) as $key) {
-            $value = is_array($array[$key]) ? render($array[$key]) : (string) $array[$key];
+            $value = is_array($array[$key]) ? \Drupal::service('renderer')->render($array[$key]) : (string) $array[$key];
             $value = \Drupal::service('pathauto.alias_cleaner')->cleanString($value, $options);
             $values[] = $value;
           }
