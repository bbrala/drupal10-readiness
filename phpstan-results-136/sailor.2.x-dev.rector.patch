diff --git a/sailor.theme b/sailor.theme
index 5c58659..2159800 100644
--- a/sailor.theme
+++ b/sailor.theme
@@ -388,7 +388,7 @@ function sailor_background_image(array &$variables) {
           . $breakpoint->getMediaQuery()
           . ' and (-webkit-min-device-pixel-ratio: ' . $multiplier . ') { #'
           . $id
-          . ' { background-image: url("' . file_url_transform_relative($url) . '"); '
+          . ' { background-image: url("' . \Drupal::service('file_url_generator')->transformRelative($url) . '"); '
           . '} }';
       }, $mappings);
 
@@ -402,7 +402,7 @@ function sailor_background_image(array &$variables) {
   // Add the image as the background.
   if ($url) {
     // For some reason, an underscore in the variable name does not work.
-    $attributes->setAttribute('style', 'background-image: url("' . file_url_transform_relative($url) . '");');
+    $attributes->setAttribute('style', 'background-image: url("' . \Drupal::service('file_url_generator')->transformRelative($url) . '");');
   }
 }
 
@@ -663,7 +663,7 @@ function sailor_preprocess_sailor_account(array &$variables) {
 function sailor_preprocess_sailor_error(array &$variables) {
   $variables['image'] = [
     '#theme' => 'image',
-    '#uri' => drupal_get_path('theme', 'sailor') . '/images/ico3-gold.png',
+    '#uri' => \Drupal::service('extension.list.theme')->getPath('sailor') . '/images/ico3-gold.png',
   ];
 }
 
diff --git a/tests/src/Unit/SailorThemeTest.php b/tests/src/Unit/SailorThemeTest.php
index 0496904..f5bbda4 100644
--- a/tests/src/Unit/SailorThemeTest.php
+++ b/tests/src/Unit/SailorThemeTest.php
@@ -14,7 +14,7 @@ class SailorThemeTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     require_once __DIR__ . '/../../../sailor.theme';
     return parent::setUp();
   }
@@ -25,7 +25,7 @@ class SailorThemeTest extends UnitTestCase {
   public function testFooterRegions() {
     $regions = sailor_footer_regions();
 
-    $this->assertInternalType('array', $regions);
+    $this->assertIsArray($regions);
 
     $expected = [
       'footer_first',
