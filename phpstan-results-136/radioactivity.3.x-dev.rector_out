modules/contrib/radioactivity/endpoints/file/rest.php
modules/contrib/radioactivity/radioactivity.module
modules/contrib/radioactivity/src/Controller/EmitController.php
modules/contrib/radioactivity/src/DefaultIncidentStorage.php
modules/contrib/radioactivity/src/EntityOperations.php
modules/contrib/radioactivity/src/Event/EnergyBelowCutoffEvent.php
modules/contrib/radioactivity/src/Incident.php
modules/contrib/radioactivity/src/IncidentInterface.php
modules/contrib/radioactivity/src/IncidentStorageInterface.php
modules/contrib/radioactivity/src/Plugin/Field/FieldFormatter/RadioactivityEmitter.php
modules/contrib/radioactivity/src/Plugin/Field/FieldFormatter/RadioactivityValue.php
modules/contrib/radioactivity/src/Plugin/Field/FieldType/RadioactivityField.php
modules/contrib/radioactivity/src/Plugin/Field/FieldWidget/RadioactivityEnergy.php
modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityDecay.php
modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityIncidents.php
modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityQueueWorkerBase.php
modules/contrib/radioactivity/src/RadioactivityProcessor.php
modules/contrib/radioactivity/src/RadioactivityProcessorInterface.php
modules/contrib/radioactivity/src/RestIncidentStorage.php
modules/contrib/radioactivity/src/RestIncidentStorageInterface.php
modules/contrib/radioactivity/src/RestProcessor.php
modules/contrib/radioactivity/src/StorageFactory.php
modules/contrib/radioactivity/tests/src/FunctionalJavascript/EmitTest.php
modules/contrib/radioactivity/tests/src/FunctionalJavascript/RadioactivityFunctionalJavascriptTestBase.php
modules/contrib/radioactivity/tests/src/Kernel/EmitControllerEndpointTest.php
modules/contrib/radioactivity/tests/src/Kernel/RadioactivityFieldTypeTest.php
modules/contrib/radioactivity/tests/src/Kernel/RadioactivityValueFormatterTest.php
modules/contrib/radioactivity/tests/src/Traits/RadioactivityFunctionTestTrait.php
modules/contrib/radioactivity/tests/src/Unit/DefaultIncidentStorageTest.php
modules/contrib/radioactivity/tests/src/Unit/EmitControllerTest.php
modules/contrib/radioactivity/tests/src/Unit/EnergyBelowCutoffTest.php
modules/contrib/radioactivity/tests/src/Unit/EventTestBase.php
modules/contrib/radioactivity/tests/src/Unit/IncidentTest.php
modules/contrib/radioactivity/tests/src/Unit/RadioactivityProcessorTest.php
modules/contrib/radioactivity/tests/src/Unit/RestIncidentStorageTest.php
modules/contrib/radioactivity/tests/src/Unit/RestProcessorTest.php
modules/contrib/radioactivity/tests/src/Unit/StorageFactoryTest.php

9 files with changes
====================

1) modules/contrib/radioactivity/tests/src/Unit/StorageFactoryTest.php:61

    ---------- begin diff ----------
@@ @@
       ->will($this->returnValue($this->config));

     // Mock the class resolver and the classes it provides.
-    $mockRestStorage = $this->getMockBuilder(RestIncidentStorage::class)
-      ->getMock();
-    $mockDefaultStorage = $this->getMockBuilder(DefaultIncidentStorage::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $mockRestStorage = $this->createMock(RestIncidentStorage::class);
+    $mockDefaultStorage = $this->createMock(DefaultIncidentStorage::class);

     $this->classResolver = $this->getMockBuilder(ClassResolverInterface::class)
       ->setMethods(['getInstanceFromDefinition'])
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/radioactivity/tests/src/Unit/RestIncidentStorageTest.php:45

    ---------- begin diff ----------
@@ @@
    * @covers ::addIncident
    */
   public function testAddIncident() {
-    $incident = $this->getMockBuilder(IncidentInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $incident = $this->createMock(IncidentInterface::class);

     $this->expectException("Exception");
     $this->expectExceptionMessage("The Radioactivity rest endpoint expects incidents to be added somewhere else.");
@@ @@

   /**
    * @covers ::clearIncidents
+   * @doesNotPerformAssertions
    */
   public function testClearIncidents() {
     $this->sut->expects($this->once())
    ----------- end diff -----------

Applied rules:
 * AddDoesNotPerformAssertionToNonAssertingTestRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ExplicitPhpErrorApiRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/radioactivity/tests/src/Unit/RadioactivityProcessorTest.php:30

    ---------- begin diff ----------
@@ @@
  */
 class RadioactivityProcessorTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The radioactivity processor under test.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/radioactivity/tests/src/Unit/EmitControllerTest.php:18

    ---------- begin diff ----------
@@ @@
  */
 class EmitControllerTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The request received by the controller.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/radioactivity/tests/src/Unit/DefaultIncidentStorageTest.php:14

    ---------- begin diff ----------
@@ @@
  */
 class DefaultIncidentStorageTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * A mock state storage.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/radioactivity/tests/src/Kernel/RadioactivityFieldTypeTest.php:50

    ---------- begin diff ----------
@@ @@
     parent::setUp();

     // Mock Time::getRequestTime.
-    $dateTime = $this->getMockBuilder(TimeInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $dateTime = $this->createMock(TimeInterface::class);
     $dateTime
       ->expects($this->any())
       ->method('getRequestTime')
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/radioactivity/src/RestIncidentStorage.php:102

    ---------- begin diff ----------
@@ @@
   protected function getDefaultEndpoint() {
     global $base_url;

-    return $base_url . '/' . drupal_get_path('module', 'radioactivity') . '/endpoints/file/rest.php';
+    return $base_url . '/' . \Drupal::service('extension.list.module')->getPath('radioactivity') . '/endpoints/file/rest.php';
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


8) modules/contrib/radioactivity/src/RadioactivityProcessor.php:239

    ---------- begin diff ----------
@@ @@
         // the cutoff value. This is needed for Rules integration, but can be
         // used by any module that wants to use events.
         $event = new EnergyBelowCutoffEvent($entity);
-        $this->eventDispatcher->dispatch('radioactivity_field_cutoff', $event);
+        $this->eventDispatcher->dispatch($event, 'radioactivity_field_cutoff');
       }

       if ($entity->getEntityType()->isRevisionable()) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


9) modules/contrib/radioactivity/src/Event/EnergyBelowCutoffEvent.php:9

    ---------- begin diff ----------
@@ @@
  *
  * @see rules_entity_presave()
  */
-class EnergyBelowCutoffEvent extends Event {
+class EnergyBelowCutoffEvent extends \Symfony\Contracts\EventDispatcher\Event {

   const EVENT_NAME = 'radioactivity_field_cutoff';
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [ERROR] Could not process                                                      
         "modules/contrib/radioactivity/tests/src/Unit/EventTestBase.php" file, 
         due to:                                                                
         "Analyze error: "Class                                                 
         Drupal\Tests\rules\Unit\Integration\Event\EventTestBase not found.".   
         Include your files in "$rectorConfig->autoloadPaths([...]);" or        
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/radioactivity/tests/src/Unit/EnergyBelowCutoffTest.php"
         file, due to:                                                          
         "Analyze error: "Class                                                 
         Drupal\Tests\rules\Unit\Integration\Event\EventTestBase not found.".   
         Include your files in "$rectorConfig->autoloadPaths([...]);" or        
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

