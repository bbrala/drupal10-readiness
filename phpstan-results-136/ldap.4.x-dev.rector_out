modules/contrib/ldap/ldap_authentication/ldap_authentication.api.php
modules/contrib/ldap/ldap_authentication/ldap_authentication.install
modules/contrib/ldap/ldap_authentication/ldap_authentication.module
modules/contrib/ldap/ldap_authentication/src/Access/UserHelpTabAccess.php
modules/contrib/ldap/ldap_authentication/src/AuthenticationServers.php
modules/contrib/ldap/ldap_authentication/src/Controller/LdapHelpRedirect.php
modules/contrib/ldap/ldap_authentication/src/Controller/LoginValidatorBase.php
modules/contrib/ldap/ldap_authentication/src/Controller/LoginValidatorInterface.php
modules/contrib/ldap/ldap_authentication/src/Controller/LoginValidatorLoginForm.php
modules/contrib/ldap/ldap_authentication/src/Controller/LoginValidatorSso.php
modules/contrib/ldap/ldap_authentication/src/Form/LdapAuthenticationAdminForm.php
modules/contrib/ldap/ldap_authentication/src/Form/LdapAuthenticationProfileUpdateForm.php
modules/contrib/ldap/ldap_authentication/src/Plugin/Derivative/DynamicUserHelpLink.php
modules/contrib/ldap/ldap_authentication/src/Routing/EmailTemplateService.php
modules/contrib/ldap/ldap_authentication/src/Routing/RouteSubscriber.php
modules/contrib/ldap/ldap_authentication/tests/src/Functional/LdapAuthenticationAdminFormTest.php
modules/contrib/ldap/ldap_authentication/tests/src/Functional/LdapAuthenticationProfileUpdateFormTest.php
modules/contrib/ldap/ldap_authentication/tests/src/Kernel/HookTest.php
modules/contrib/ldap/ldap_authentication/tests/src/Kernel/LoginTest.php
modules/contrib/ldap/ldap_authentication/tests/src/Kernel/RedirectTest.php
modules/contrib/ldap/ldap_authorization/ldap_authorization.module
modules/contrib/ldap/ldap_authorization/src/Plugin/authorization/Provider/LDAPAuthorizationProvider.php
modules/contrib/ldap/ldap_authorization/tests/src/Kernel/LdapAuthorizationProviderIntegrationTest.php
modules/contrib/ldap/ldap_authorization/tests/src/Unit/LdapAuthorizationProviderTest.php
modules/contrib/ldap/ldap_query/ldap_query.install
modules/contrib/ldap/ldap_query/ldap_query.module
modules/contrib/ldap/ldap_query/ldap_query.views.inc
modules/contrib/ldap/ldap_query/src/Controller/QueryController.php
modules/contrib/ldap/ldap_query/src/Entity/QueryEntity.php
modules/contrib/ldap/ldap_query/src/Form/QueryEntityDeleteForm.php
modules/contrib/ldap/ldap_query/src/Form/QueryEntityForm.php
modules/contrib/ldap/ldap_query/src/Form/QueryTestForm.php
modules/contrib/ldap/ldap_query/src/Plugin/views/VariableAttributeCustomization.php
modules/contrib/ldap/ldap_query/src/Plugin/views/argument/LdapAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/argument/LdapVariableAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/field/LdapAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/field/LdapVariableAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/field/LdapVariableImageAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/filter/LdapAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/filter/LdapVariableAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/query/LdapQuery.php
modules/contrib/ldap/ldap_query/src/Plugin/views/sort/LdapAttribute.php
modules/contrib/ldap/ldap_query/src/Plugin/views/sort/LdapVariableAttribute.php
modules/contrib/ldap/ldap_query/src/QueryEntityHtmlRouteProvider.php
modules/contrib/ldap/ldap_query/src/QueryEntityInterface.php
modules/contrib/ldap/ldap_query/src/QueryEntityListBuilder.php
modules/contrib/ldap/ldap_query/tests/src/Functional/QueryEntityFormTest.php
modules/contrib/ldap/ldap_query/tests/src/Unit/ViewsSortTest.php
modules/contrib/ldap/ldap_servers/ldap_servers.api.php
modules/contrib/ldap/ldap_servers/ldap_servers.install
modules/contrib/ldap/ldap_servers/ldap_servers.module
modules/contrib/ldap/ldap_servers/src/Entity/Server.php
modules/contrib/ldap/ldap_servers/src/Form/DebuggingReviewForm.php
modules/contrib/ldap/ldap_servers/src/Form/LdapDebugSettings.php
modules/contrib/ldap/ldap_servers/src/Form/ServerDeleteForm.php
modules/contrib/ldap/ldap_servers/src/Form/ServerEnableDisableForm.php
modules/contrib/ldap/ldap_servers/src/Form/ServerForm.php
modules/contrib/ldap/ldap_servers/src/Form/ServerTestForm.php
modules/contrib/ldap/ldap_servers/src/Helper/ConversionHelper.php
modules/contrib/ldap/ldap_servers/src/Helper/CredentialsStorage.php
modules/contrib/ldap/ldap_servers/src/LdapBaseManager.php
modules/contrib/ldap/ldap_servers/src/LdapBridge.php
modules/contrib/ldap/ldap_servers/src/LdapBridgeInterface.php
modules/contrib/ldap/ldap_servers/src/LdapGroupManager.php
modules/contrib/ldap/ldap_servers/src/LdapTransformationTraits.php
modules/contrib/ldap/ldap_servers/src/LdapUserAttributesInterface.php
modules/contrib/ldap/ldap_servers/src/LdapUserManager.php
modules/contrib/ldap/ldap_servers/src/Logger/LdapDetailLog.php
modules/contrib/ldap/ldap_servers/src/Mapping.php
modules/contrib/ldap/ldap_servers/src/Processor/TokenProcessor.php
modules/contrib/ldap/ldap_servers/src/ServerInterface.php
modules/contrib/ldap/ldap_servers/src/ServerListBuilder.php
modules/contrib/ldap/ldap_servers/tests/modules/ldap_servers_dummy/src/FakeBridge.php
modules/contrib/ldap/ldap_servers/tests/modules/ldap_servers_dummy/src/FakeCollection.php
modules/contrib/ldap/ldap_servers/tests/modules/ldap_servers_dummy/src/FakeLdap.php
modules/contrib/ldap/ldap_servers/tests/modules/ldap_servers_dummy/src/FakeQuery.php
modules/contrib/ldap/ldap_servers/tests/src/Kernel/GroupManagerTest.php
modules/contrib/ldap/ldap_servers/tests/src/Kernel/ServerTest.php
modules/contrib/ldap/ldap_servers/tests/src/Unit/ConversionHelperTest.php
modules/contrib/ldap/ldap_servers/tests/src/Unit/CredentialsStorageTest.php
modules/contrib/ldap/ldap_servers/tests/src/Unit/LdapExplodeDnMock.php
modules/contrib/ldap/ldap_servers/tests/src/Unit/TokenTest.php
modules/contrib/ldap/ldap_user/ldap_user.api.php
modules/contrib/ldap/ldap_user/ldap_user.install
modules/contrib/ldap/ldap_user/ldap_user.module
modules/contrib/ldap/ldap_user/src/Event/LdapNewUserCreatedEvent.php
modules/contrib/ldap/ldap_user/src/Event/LdapUserDeletedEvent.php
modules/contrib/ldap/ldap_user/src/Event/LdapUserLoginEvent.php
modules/contrib/ldap/ldap_user/src/Event/LdapUserUpdatedEvent.php
modules/contrib/ldap/ldap_user/src/EventSubscriber/LdapEntryDeletionSubscriber.php
modules/contrib/ldap/ldap_user/src/EventSubscriber/LdapEntryProvisionSubscriber.php
modules/contrib/ldap/ldap_user/src/Exception/LdapBadParamsException.php
modules/contrib/ldap/ldap_user/src/FieldProvider.php
modules/contrib/ldap/ldap_user/src/Form/LdapUserAdminForm.php
modules/contrib/ldap/ldap_user/src/Form/LdapUserMappingBaseForm.php
modules/contrib/ldap/ldap_user/src/Form/LdapUserMappingToDrupalForm.php
modules/contrib/ldap/ldap_user/src/Form/LdapUserMappingToLdapForm.php
modules/contrib/ldap/ldap_user/src/Form/LdapUserTestForm.php
modules/contrib/ldap/ldap_user/src/Plugin/Validation/Constraint/LdapProtectedUserFieldConstraint.php
modules/contrib/ldap/ldap_user/src/Plugin/Validation/Constraint/LdapProtectedUserFieldConstraintValidator.php
modules/contrib/ldap/ldap_user/src/Processor/DrupalUserProcessor.php
modules/contrib/ldap/ldap_user/src/Processor/GroupUserUpdateProcessor.php
modules/contrib/ldap/ldap_user/src/Processor/OrphanProcessor.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/AdminFormTest.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/DrupalUserProcessorTest.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/FieldProviderTest.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/GetStringHelper.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/IntegrationTest.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/LdapEntryProvisionTest.php
modules/contrib/ldap/ldap_user/tests/src/Kernel/OrphanProcessorTest.php
modules/contrib/ldap/ldap_user/tests/src/Unit/ProtectedUserFieldConstraintValidatorTest.php

6 files with changes
====================

1) modules/contrib/ldap/ldap_user/tests/src/Kernel/LdapEntryProvisionTest.php:132

    ---------- begin diff ----------
@@ @@
   public function testLoginCreate(): void {
     /** @var \Drupal\ldap_servers_dummy\FakeLdap $ldap */
     $ldap = $this->container->get('ldap.bridge')->get();
-    $response = $this->getMockBuilder(EntryManager::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $response = $this->createMock(EntryManager::class);
     $response
       ->expects(self::once())
       ->method('add')
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/ldap/ldap_user/tests/src/Kernel/DrupalUserProcessorTest.php:21

    ---------- begin diff ----------
@@ @@
  */
 class DrupalUserProcessorTest extends EntityKernelTestBase implements LdapUserAttributesInterface {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/ldap/ldap_user/src/Processor/DrupalUserProcessor.php:444

    ---------- begin diff ----------
@@ @@
       $this->eventDispatcher->dispatch($event, LdapUserLoginEvent::EVENT_NAME);
     }
     else {
-      $this->eventDispatcher->dispatch(LdapUserLoginEvent::EVENT_NAME, $event);
+      $this->eventDispatcher->dispatch($event, LdapUserLoginEvent::EVENT_NAME);
     }
   }

@@ @@
       $this->fileSystem->mkdir($fullDirectoryPath, NULL, TRUE);
     }

-    $managed_file = file_save_data($ldapUserPicture, $fullDirectoryPath . '/' . $fileName . '.' . $extension);
+    $managed_file = \Drupal::service('file.repository')->writeData($ldapUserPicture, $fullDirectoryPath . '/' . $fileName . '.' . $extension);

     $validators = [
       'file_validate_is_image' => [],
@@ @@
         $this->account->set('pass', \Drupal::service('password_generator')->generate(20));
       }
       else {
-        $this->account->set('pass', user_password(20));
+        $this->account->set('pass', \Drupal::service('password_generator')->generate(20));
       }
     }
     if (!$this->account->getInitialEmail()) {
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * UserPasswordRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


4) modules/contrib/ldap/ldap_user/src/EventSubscriber/LdapEntryProvisionSubscriber.php:387

    ---------- begin diff ----------
@@ @@
           $generated = \Drupal::service('password_generator')->generate();
         }
         else {
-          $generated = user_password();
+          $generated = \Drupal::service('password_generator')->generate();
         }
         $value = $pwd ?: $generated;
         break;
@@ @@
           $value = \Drupal::service('password_generator')->generate();
         }
         else {
-          $value = user_password();
+          $value = \Drupal::service('password_generator')->generate();
         }
         break;
    ----------- end diff -----------

Applied rules:
 * UserPasswordRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


5) modules/contrib/ldap/ldap_user/ldap_user.module:106

    ---------- begin diff ----------
@@ @@
     $dispatcher->dispatch($event, LdapNewUserCreatedEvent::EVENT_NAME);
   }
   else {
-    $dispatcher->dispatch(LdapNewUserCreatedEvent::EVENT_NAME, $event);
+    $dispatcher->dispatch($event, LdapNewUserCreatedEvent::EVENT_NAME);
   }
 }

@@ @@
     $dispatcher->dispatch($event, LdapUserUpdatedEvent::EVENT_NAME);
   }
   else {
-    $dispatcher->dispatch(LdapUserUpdatedEvent::EVENT_NAME, $event);
+    $dispatcher->dispatch($event, LdapUserUpdatedEvent::EVENT_NAME);
   }
 }

@@ @@
     $dispatcher->dispatch($event, LdapUserDeletedEvent::EVENT_NAME);
   }
   else {
-    $dispatcher->dispatch(LdapUserDeletedEvent::EVENT_NAME, $event);
+    $dispatcher->dispatch($event, LdapUserDeletedEvent::EVENT_NAME);
   }
 }

@@ @@
       $form['account']['pass']['#value'] = \Drupal::service('password_generator')->generate(40);
     }
     else {
-      $form['account']['pass']['#value'] = user_password(40);
+      $form['account']['pass']['#value'] = \Drupal::service('password_generator')->generate(40);
     }
     $form['account']['pass_disabled']['#type'] = 'fieldset';
     $form['account']['pass_disabled']['#title'] = t('Password');
    ----------- end diff -----------

Applied rules:
 * UserPasswordRector
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector


6) modules/contrib/ldap/ldap_authentication/src/Routing/EmailTemplateService.php:35

    ---------- begin diff ----------
@@ @@
   /**
    * Check for template if enabled.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   Response event.
    */
-  public function checkTemplate(GetResponseEvent $event): void {
+  public function checkTemplate(\Symfony\Component\HttpKernel\Event\RequestEvent $event): void {
     if ($this->config->get('emailTemplateUsagePromptUser') === TRUE) {
       $this->checkForEmailTemplate();
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


 [OK] 6 files have been changed by Rector                                       

