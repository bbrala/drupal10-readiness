modules/contrib/learnosity/learnosity.install
modules/contrib/learnosity/learnosity.module
modules/contrib/learnosity/learnosity.page.inc
modules/contrib/learnosity/learnosity.views.inc
modules/contrib/learnosity/src/Ajax/LearnosityImageUpdateCommand.php
modules/contrib/learnosity/src/Annotation/LearnosityFeature.php
modules/contrib/learnosity/src/Annotation/LearnosityImageUpload.php
modules/contrib/learnosity/src/Commands/LearnosityCommands.php
modules/contrib/learnosity/src/Controller/LearnosityActivityController.php
modules/contrib/learnosity/src/Controller/LearnosityEventController.php
modules/contrib/learnosity/src/Controller/LearnosityImageUploadController.php
modules/contrib/learnosity/src/Element/LearnosityActivityEditor.php
modules/contrib/learnosity/src/Element/LearnosityAssessmentItem.php
modules/contrib/learnosity/src/Element/LearnosityReportsItem.php
modules/contrib/learnosity/src/Entity/LearnosityActivity.php
modules/contrib/learnosity/src/Entity/LearnosityActivityEditor.php
modules/contrib/learnosity/src/Entity/LearnosityActivityInterface.php
modules/contrib/learnosity/src/Entity/LearnosityActivityPlayer.php
modules/contrib/learnosity/src/Entity/LearnosityActivityPlayerInterface.php
modules/contrib/learnosity/src/Event/LearnosityAssessmentEvent.php
modules/contrib/learnosity/src/Event/LearnosityEvent.php
modules/contrib/learnosity/src/EventSubscriber/LearnositySessionExpireSubscriber.php
modules/contrib/learnosity/src/Form/LearnosityActivityDeleteForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityEditorDeleteForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityEditorForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityPlayerDeleteForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityPlayerForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityRevisionDeleteForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityRevisionRevertForm.php
modules/contrib/learnosity/src/Form/LearnosityActivityRevisionRevertTranslationForm.php
modules/contrib/learnosity/src/Form/LearnosityActivitySettingsForm.php
modules/contrib/learnosity/src/Form/LearnosityMappingsForm.php
modules/contrib/learnosity/src/Form/LearnositySettingsForm.php
modules/contrib/learnosity/src/LearnosityActivityAccessControlHandler.php
modules/contrib/learnosity/src/LearnosityActivityEditorAccessControlHandler.php
modules/contrib/learnosity/src/LearnosityActivityEditorListBuilder.php
modules/contrib/learnosity/src/LearnosityActivityEditorPermissions.php
modules/contrib/learnosity/src/LearnosityActivityHtmlRouteProvider.php
modules/contrib/learnosity/src/LearnosityActivityPlayerHtmlRouteProvider.php
modules/contrib/learnosity/src/LearnosityActivityPlayerListBuilder.php
modules/contrib/learnosity/src/LearnosityActivityStorage.php
modules/contrib/learnosity/src/LearnosityActivityStorageInterface.php
modules/contrib/learnosity/src/LearnosityActivityTranslationHandler.php
modules/contrib/learnosity/src/LearnosityApiEventHandler.php
modules/contrib/learnosity/src/LearnosityFeaturePluginManager.php
modules/contrib/learnosity/src/LearnosityImageUploadPluginManager.php
modules/contrib/learnosity/src/LearnosityMappingsHandler.php
modules/contrib/learnosity/src/LearnositySdk.php
modules/contrib/learnosity/src/LearnositySessionHandler.php
modules/contrib/learnosity/src/Plugin/EntityReferenceSelection/LearnosityActivitySelection.php
modules/contrib/learnosity/src/Plugin/Field/FieldFormatter/LearnosityActivityFormatterBase.php
modules/contrib/learnosity/src/Plugin/Field/FieldFormatter/LearnosityActivityReferenceFormatter.php
modules/contrib/learnosity/src/Plugin/Field/FieldFormatter/LearnosityAssessmentPlayerFormatter.php
modules/contrib/learnosity/src/Plugin/Field/FieldType/LearnosityActivity.php
modules/contrib/learnosity/src/Plugin/Field/FieldWidget/LearnosityActivityAuthoringWidget.php
modules/contrib/learnosity/src/Plugin/Field/FieldWidget/LearnosityActivityReferenceWidget.php
modules/contrib/learnosity/src/Plugin/LearnosityFeature/LearnosityFeatureBase.php
modules/contrib/learnosity/src/Plugin/LearnosityFeature/LearnosityFeatureInterface.php
modules/contrib/learnosity/src/Plugin/LearnosityImageUpload/LearnosityImageUploadBase.php
modules/contrib/learnosity/src/Plugin/LearnosityImageUpload/LearnosityImageUploadInterface.php
modules/contrib/learnosity/tests/modules/learnosity_test/src/Plugin/LearnosityFeature/TestFeature.php
modules/contrib/learnosity/tests/modules/learnosity_test/src/Plugin/LearnosityImageUpload/TestImageUpload.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityActivityAuthoringWidgetTest.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityActivityEditorElementFormTest.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityAssessmentPlayerFormatterTest.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityFeatureTest.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityImageUploadTest.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityKernelTestBase.php
modules/contrib/learnosity/tests/src/Kernel/LearnosityReportsItemElementRenderTest.php
modules/contrib/learnosity/tests/src/Unit/LearnosityAjaxCommandsTest.php
modules/contrib/learnosity/tests/src/Unit/LearnosityApiEventHandlerTest.php
modules/contrib/learnosity/tests/src/Unit/LearnosityEventControllerTest.php
modules/contrib/learnosity/tests/src/Unit/LearnositySdkTest.php

9 files with changes
====================

1) modules/contrib/learnosity/tests/src/Unit/LearnositySdkTest.php:16

    ---------- begin diff ----------
@@ @@
  */
 class LearnositySdkTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The service container.
    *
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/learnosity/tests/src/Unit/LearnosityEventControllerTest.php:16

    ---------- begin diff ----------
@@ @@
  */
 class LearnosityEventControllerTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Tests learnosity event controller.
    */
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/learnosity/tests/src/Unit/LearnosityApiEventHandlerTest.php:13

    ---------- begin diff ----------
@@ @@
  */
 class LearnosityApiEventHandlerTest extends UnitTestCase {

+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Test getting subscribed events.
    */
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/learnosity/tests/src/Kernel/LearnosityActivityEditorElementFormTest.php:159

    ---------- begin diff ----------
@@ @@
     // Test the 'activity' element.
     $value = $form_state->getValue('activity_blank');
     // The UUID should match the following pattern.
-    $this->assertRegExp('/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/', $value['entity']->getReference());
+    $this->assertMatchesRegularExpression('/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/', $value['entity']->getReference());
     $this->assertEquals('learnosity_activity', $value['entity']->bundle());
     $this->assertEquals($this->testUser->id(), $value['entity']->getOwnerId());
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * RenameMethodRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/learnosity/src/Form/LearnosityActivityRevisionRevertTranslationForm.php:109

    ---------- begin diff ----------
@@ @@

     $latest_revision_translation->setNewRevision();
     $latest_revision_translation->isDefaultRevision(TRUE);
-    $revision->setRevisionCreationTime(REQUEST_TIME);
+    $revision->setRevisionCreationTime(\Drupal::time()->getRequestTime());

     return $latest_revision_translation;
   }
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/learnosity/src/Form/LearnosityActivityRevisionRevertForm.php:147

    ---------- begin diff ----------
@@ @@
   protected function prepareRevertedRevision(LearnosityActivityInterface $revision, FormStateInterface $form_state) {
     $revision->setNewRevision();
     $revision->isDefaultRevision(TRUE);
-    $revision->setRevisionCreationTime(REQUEST_TIME);
+    $revision->setRevisionCreationTime(\Drupal::time()->getRequestTime());

     return $revision;
   }
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/learnosity/src/Event/LearnosityEvent.php:7

    ---------- begin diff ----------
@@ @@
 /**
  * Represents an event triggered by learnosity.
  */
-class LearnosityEvent extends Event {
+class LearnosityEvent extends \Symfony\Contracts\EventDispatcher\Event {

   /**
    * The name of the event.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/learnosity/src/Controller/LearnosityEventController.php:93

    ---------- begin diff ----------
@@ @@
     $context = $this->processContext();

     $event = new LearnosityEvent($name, $context);
-    $dispatch = $this->eventDispatcher->dispatch('learnosity.' . $name, $event);
+    $dispatch = $this->eventDispatcher->dispatch($event, 'learnosity.' . $name);

     // Check to see if any subscribers return a response. If they do then use
     // that. Otherwise default to an empty ajax response.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/learnosity/src/Controller/LearnosityActivityController.php:145

    ---------- begin diff ----------
@@ @@
           ]));
         }
         else {
-          $link = $entity->link($date);
+          // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+          // Please confirm that `$entity` is an instance of `\Drupal\Core\Entity\EntityInterface`. Only the method name and not the class name was checked for this replacement, so this may be a false positive.
+          $link = $entity->toLink($date)->toString();
         }

         $row = [];
    ----------- end diff -----------

Applied rules:
 * EntityInterfaceLinkRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 9 files have been changed by Rector                                       

