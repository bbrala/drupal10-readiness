diff --git a/entity_normalization_normalizers/tests/src/Unit/Normalizer/DateTimeToEpochNormalizerTest.php b/entity_normalization_normalizers/tests/src/Unit/Normalizer/DateTimeToEpochNormalizerTest.php
index 7e35d72..b6137b0 100644
--- a/entity_normalization_normalizers/tests/src/Unit/Normalizer/DateTimeToEpochNormalizerTest.php
+++ b/entity_normalization_normalizers/tests/src/Unit/Normalizer/DateTimeToEpochNormalizerTest.php
@@ -22,7 +22,7 @@ class DateTimeToEpochNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new DateTimeToEpochNormalizer();
   }
 
diff --git a/entity_normalization_normalizers/tests/src/Unit/Normalizer/EntityUrlNormalizerTest.php b/entity_normalization_normalizers/tests/src/Unit/Normalizer/EntityUrlNormalizerTest.php
index 959b3bf..1248f8c 100644
--- a/entity_normalization_normalizers/tests/src/Unit/Normalizer/EntityUrlNormalizerTest.php
+++ b/entity_normalization_normalizers/tests/src/Unit/Normalizer/EntityUrlNormalizerTest.php
@@ -14,6 +14,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class EntityUrlNormalizerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The normalizer to test.
    *
@@ -24,7 +25,7 @@ class EntityUrlNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new EntityUrlNormalizer();
   }
 
diff --git a/entity_normalization_normalizers/tests/src/Unit/Normalizer/NodeTypeNormalizerTest.php b/entity_normalization_normalizers/tests/src/Unit/Normalizer/NodeTypeNormalizerTest.php
index 49ed2b9..dad8a05 100644
--- a/entity_normalization_normalizers/tests/src/Unit/Normalizer/NodeTypeNormalizerTest.php
+++ b/entity_normalization_normalizers/tests/src/Unit/Normalizer/NodeTypeNormalizerTest.php
@@ -22,7 +22,7 @@ class NodeTypeNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new NodeTypeNormalizer();
   }
 
diff --git a/entity_normalization_normalizers/tests/src/Unit/Normalizer/NullNormalizerTest.php b/entity_normalization_normalizers/tests/src/Unit/Normalizer/NullNormalizerTest.php
index 34bc0c5..60273a3 100644
--- a/entity_normalization_normalizers/tests/src/Unit/Normalizer/NullNormalizerTest.php
+++ b/entity_normalization_normalizers/tests/src/Unit/Normalizer/NullNormalizerTest.php
@@ -21,7 +21,7 @@ class NullNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new NullNormalizer();
   }
 
diff --git a/entity_normalization_normalizers/tests/src/Unit/Normalizer/RichTextNormalizerTest.php b/entity_normalization_normalizers/tests/src/Unit/Normalizer/RichTextNormalizerTest.php
index 1234e3d..68623a9 100644
--- a/entity_normalization_normalizers/tests/src/Unit/Normalizer/RichTextNormalizerTest.php
+++ b/entity_normalization_normalizers/tests/src/Unit/Normalizer/RichTextNormalizerTest.php
@@ -24,7 +24,7 @@ class RichTextNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new RichTextNormalizer();
   }
 
diff --git a/entity_normalization_normalizers/tests/src/Unit/Normalizer/TermParentIdNormalizerTest.php b/entity_normalization_normalizers/tests/src/Unit/Normalizer/TermParentIdNormalizerTest.php
index 1564816..52b6c99 100644
--- a/entity_normalization_normalizers/tests/src/Unit/Normalizer/TermParentIdNormalizerTest.php
+++ b/entity_normalization_normalizers/tests/src/Unit/Normalizer/TermParentIdNormalizerTest.php
@@ -22,7 +22,7 @@ class TermParentIdNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new TermParentIdNormalizer();
   }
 
diff --git a/src/Normalizer/FieldItemNormalizer.php b/src/Normalizer/FieldItemNormalizer.php
index 557625c..3c34512 100644
--- a/src/Normalizer/FieldItemNormalizer.php
+++ b/src/Normalizer/FieldItemNormalizer.php
@@ -54,7 +54,7 @@ class FieldItemNormalizer extends DefaultFieldItemNormalizer implements ContextA
         'alt' => $object->get('alt')->getValue(),
         'title' => $object->get('title')->getValue(),
         // @todo find a way to speed up the url generation, this takes more than 30% of the time.
-        'url' => file_create_url($object->entity->getFileUri()),
+        'url' => \Drupal::service('file_url_generator')->generateAbsoluteString($object->entity->getFileUri()),
       ];
       return $normalizedValue;
     }
diff --git a/tests/src/Unit/EntityNormalizationManagerTest.php b/tests/src/Unit/EntityNormalizationManagerTest.php
index 0d7cf31..e64f6c5 100644
--- a/tests/src/Unit/EntityNormalizationManagerTest.php
+++ b/tests/src/Unit/EntityNormalizationManagerTest.php
@@ -18,6 +18,7 @@ use ReflectionClass;
  */
 class EntityNormalizationManagerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The module handler.
    *
diff --git a/tests/src/Unit/FieldItemNormalizerTest.php b/tests/src/Unit/FieldItemNormalizerTest.php
index e0e3e21..2cd0f04 100644
--- a/tests/src/Unit/FieldItemNormalizerTest.php
+++ b/tests/src/Unit/FieldItemNormalizerTest.php
@@ -13,6 +13,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class FieldItemNormalizerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The normalizer to test.
    *
@@ -23,7 +24,7 @@ class FieldItemNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->normalizer = new FieldItemNormalizer();
   }
 
