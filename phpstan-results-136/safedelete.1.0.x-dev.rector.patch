diff --git a/safedelete.info.yml b/safedelete.info.yml
index 1edef42..a2acfc9 100644
--- a/safedelete.info.yml
+++ b/safedelete.info.yml
@@ -1,8 +1,7 @@
 name: SafeDelete
 description: 'Safely delete nodes without causing broken links in the node body or other entity body fields.'
 package: 'Node'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
 configure: safedelete.settings
 dependencies:
diff --git a/safedelete.module b/safedelete.module
index 45844a5..5e699a0 100644
--- a/safedelete.module
+++ b/safedelete.module
@@ -580,7 +580,7 @@ function batch_ProcessNodes_Op($id, $operation_details, $nid, $filedirectory, $e
                                'reporteddate' => $reporteddate);
      $json = json_encode($arrayforjsonobj, JSON_PRETTY_PRINT|JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE);
      $fp = $filedirectory . $nid . '.json';
-     $file = file_save_data($json, $fp, FileSystemInterface::EXISTS_REPLACE);
+     $file = \Drupal::service('file.repository')->writeData($json, $fp, FileSystemInterface::EXISTS_REPLACE);
    }
    // Optional message displayed under the progressbar.
    $context['message'] = t('Running Batch "@id" @details',
diff --git a/src/AdminHelper.php b/src/AdminHelper.php
index cc0274f..a05c4d1 100644
--- a/src/AdminHelper.php
+++ b/src/AdminHelper.php
@@ -682,7 +682,7 @@ EOT;
                                   'reporteddate' => $reporteddate);
         $json = json_encode($arrayforjsonobj, JSON_PRETTY_PRINT|JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE);
         $fp = $filedirectory . $nid . '.json';
-        $file = file_save_data($json, $fp, FileSystemInterface::EXISTS_REPLACE);
+        $file = \Drupal::service('file.repository')->writeData($json, $fp, FileSystemInterface::EXISTS_REPLACE);
       }
     } // end of search the orphaned nodes
     return;
