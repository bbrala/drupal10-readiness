diff --git a/composer.json b/composer.json
index 840aad6..c3cddf7 100644
--- a/composer.json
+++ b/composer.json
@@ -30,10 +30,10 @@
     "composer/installers": "~1.0 || ~2.0",
     "oomphinc/composer-installers-extender": "~1.0 || ~2.0",
     "cweagans/composer-patches": "~1.0",
-    "drupal/core": "~9.0",
     "vardot/module-installer-factory": "~1.0",
     "drupal/symfony_mailer": "~1.0",
-    "drupal/swiftmailer": "~2.0"
+    "drupal/swiftmailer": "~2.0",
+    "drupal/core": "^9.3 || ^10"
   },
   "extra": {
     "enable-patching": true,
diff --git a/varbase_email.info.yml b/varbase_email.info.yml
index 8acc522..6c61713 100644
--- a/varbase_email.info.yml
+++ b/varbase_email.info.yml
@@ -2,7 +2,7 @@ name: "Varbase Email"
 type: module
 description: "Adds email template for varbase emails"
 package: Varbase
-core_version_requirement: ^9
+core_version_requirement: ^9.3 || ^10
 dependencies: []
 install:
   - symfony_mailer
diff --git a/varbase_email.module b/varbase_email.module
index 11a26d7..9f78278 100644
--- a/varbase_email.module
+++ b/varbase_email.module
@@ -78,10 +78,10 @@ function varbase_email_preprocess_email(&$variables) {
         $scheme = StreamWrapperManager::getScheme($uri);
 
         if ($scheme) {
-          $variables['logo'] = file_create_url($uri);
+          $variables['logo'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
         else {
-          $variables['logo'] = $host . file_create_url($uri);
+          $variables['logo'] = $host . \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
       }
       else {
@@ -139,10 +139,10 @@ function varbase_email_preprocess_swiftmailer(&$variables) {
         $scheme = StreamWrapperManager::getScheme($uri);
 
         if ($scheme) {
-          $variables['logo'] = file_create_url($uri);
+          $variables['logo'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
         else {
-          $variables['logo'] = $host . file_create_url($uri);
+          $variables['logo'] = $host . \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
       }
       else {
