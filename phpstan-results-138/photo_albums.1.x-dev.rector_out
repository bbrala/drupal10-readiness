modules/contrib/photo_albums/photo_albums.install
modules/contrib/photo_albums/photo_albums.module
modules/contrib/photo_albums/src/EventSubscriber/ProtectedAlbumSubscriber.php
modules/contrib/photo_albums/src/Form/ProtectedAlbumLoginForm.php
modules/contrib/photo_albums/src/Plugin/Field/FieldFormatter/PhotoAlbumThumbnailFormatter.php
modules/contrib/photo_albums/src/TwoWayHashService.php

2 files with changes
====================

1) modules/contrib/photo_albums/src/EventSubscriber/ProtectedAlbumSubscriber.php:88

    ---------- begin diff ----------
@@ @@
   /**
    * Redirects user to protected page login screen.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    */
-  public function checkProtectedAlbum(FilterResponseEvent $event) {
+  public function checkProtectedAlbum(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
     if ($this->currentUser->hasPermission('bypass album password protection')) {
       return;
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


2) modules/contrib/photo_albums/photo_albums.module:155

    ---------- begin diff ----------
@@ @@
     }

     if (!count($results) && $protected) {
-      $pass = user_password(8);
+      $pass = \Drupal::service('password_generator')->generate(8);

       // use the two-way hashing service to hash the password
       $tw_hash = \Drupal::service('photo_albums.twowayhash');
@@ @@
     }

     if (isset($variables['attributes']['protected']) && $variables['attributes']['protected'] == '1' && !$cookie_pass_ok) {
-      $variables['uri'] = drupal_get_path('module', 'photo_albums') . '/images/protected.png';
+      $variables['uri'] = \Drupal::service('extension.list.module')->getPath('photo_albums') . '/images/protected.png';
     }
   }

   if (!empty($variables['uri'])) {
-    $variables['attributes']['src'] = file_url_transform_relative(file_create_url($variables['uri']));
+    $variables['attributes']['src'] = \Drupal::service('file_url_generator')->generateString($variables['uri']);
   }
   // Generate a srcset attribute conforming to the spec at
   // http://www.w3.org/html/wg/drafts/html/master/embedded-content.html#attr-img-srcset
@@ @@
     $srcset = [];
     foreach ($variables['srcset'] as $src) {
       // URI is mandatory.
-      $source = file_url_transform_relative(file_create_url($src['uri']));
+      $source = \Drupal::service('file_url_generator')->generateString($src['uri']);
       if (isset($src['width']) && !empty($src['width'])) {
         $source .= ' ' . $src['width'];
       }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileUrlTransformRelativeRector
 * UserPasswordRector
 * ArgumentRemoverRector


 [OK] 2 files have been changed by Rector                                       

