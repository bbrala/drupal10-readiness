diff --git a/ds.module b/ds.module
index dd9765c6..34a5cb77 100644
--- a/ds.module
+++ b/ds.module
@@ -58,7 +58,7 @@ function ds_theme() {
           'render element' => 'elements',
           'template' => strtr($plugin['theme'], '_', '-'),
           'base hook' => 'field',
-          'path' => drupal_get_path('module', $plugin['provider']) . '/templates',
+          'path' => \Drupal::service('extension.list.module')->getPath($plugin['provider']) . '/templates',
         ];
 
         if (!empty($plugin['path'])) {
diff --git a/includes/field_ui.inc b/includes/field_ui.inc
index e3036bbf..db2aeb34 100644
--- a/includes/field_ui.inc
+++ b/includes/field_ui.inc
@@ -987,7 +987,7 @@ function _ds_field_ui_table_layouts_preview(array &$form, FormStateInterface $fo
     }
 
     if ($form_state->hasValue('ds_layout') || (!empty($layout) && isset($layout['regions'])) && (!empty($chosen_layout))) {
-      $fallback_image = drupal_get_path('module', 'ds') . '/images/preview.png';
+      $fallback_image = \Drupal::service('extension.list.module')->getPath('ds') . '/images/preview.png';
       $current_layout = $form_state->hasValue('ds_layout') && (!isset($layout->layout) || $form_state->getValue('ds_layout') != $layout->layout) ? t('Current layout (after save)') : t('Current layout');
       $image = $chosen_layout->getIconPath();
       if (empty($image)) {
diff --git a/modules/ds_switch_view_mode/ds_switch_view_mode.module b/modules/ds_switch_view_mode/ds_switch_view_mode.module
index be8cafc6..b1f5902a 100644
--- a/modules/ds_switch_view_mode/ds_switch_view_mode.module
+++ b/modules/ds_switch_view_mode/ds_switch_view_mode.module
@@ -121,7 +121,7 @@ function ds_switch_view_mode_form_node_form_alter(&$form, FormStateInterface $fo
       $layout_settings = $chosen_layout->getThirdPartySettings('ds');
 
       $ds_layouts = Ds::getLayouts();
-      $fallback_image = drupal_get_path('module', 'ds') . '/images/preview.png';
+      $fallback_image = \Drupal::service('extension.list.module')->getPath('ds') . '/images/preview.png';
 
       if (isset($layout_settings['layout'])) {
         /** @var \Drupal\Core\Layout\LayoutDefinition $chosen_layout */
diff --git a/src/Form/ChangeLayoutForm.php b/src/Form/ChangeLayoutForm.php
index 25341803..08bf0606 100644
--- a/src/Form/ChangeLayoutForm.php
+++ b/src/Form/ChangeLayoutForm.php
@@ -162,10 +162,10 @@ class ChangeLayoutForm extends FormBase {
         '#suffix' => '</div>',
       ];
 
-      $fallback_image = drupal_get_path('module', 'ds') . '/images/preview.png';
+      $fallback_image = \Drupal::service('extension.list.module')->getPath('ds') . '/images/preview.png';
       $old_image = $old_layout_info->getIconPath() ?: $fallback_image;
       $new_image = $new_layout->getIconPath() ?: $fallback_image;
-      $arrow = drupal_get_path('module', 'ds') . '/images/arrow.png';
+      $arrow = \Drupal::service('extension.list.module')->getPath('ds') . '/images/arrow.png';
 
       $form['preview']['old_layout'] = [
         '#markup' => '<div class="ds-layout-preview-image"><img src="' . base_path() . $old_image . '"/></div>',
diff --git a/tests/src/Functional/BlockFieldPluginTest.php b/tests/src/Functional/BlockFieldPluginTest.php
index 3fae3ded..babb2dac 100644
--- a/tests/src/Functional/BlockFieldPluginTest.php
+++ b/tests/src/Functional/BlockFieldPluginTest.php
@@ -37,7 +37,7 @@ class BlockFieldPluginTest extends TestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Ensure that the plugin definitions are cleared.
@@ -89,7 +89,8 @@ class BlockFieldPluginTest extends TestBase {
     $edit = [
       'use_block_title' => '1',
     ];
-    $this->drupalPostForm('admin/structure/ds/fields/manage_block/test_block_title_field', $edit, t('Save'));
+    $this->drupalGet('admin/structure/ds/fields/manage_block/test_block_title_field');
+    $this->submitForm($edit, t('Save'));
     $text = t('The field %name has been saved', ['%name' => 'Test block title field']);
     $this->assertSession()->responseContains((string) $text);
 
@@ -201,7 +202,8 @@ class BlockFieldPluginTest extends TestBase {
     $edit = [
       'add_block_wrappers' => '1',
     ];
-    $this->drupalPostForm('admin/structure/ds/fields/manage_block/test_block_title_field', $edit, t('Save'));
+    $this->drupalGet('admin/structure/ds/fields/manage_block/test_block_title_field');
+    $this->submitForm($edit, t('Save'));
 
     // Verify block wrappers do exist.
     $this->drupalGet('node/' . $node->id());
