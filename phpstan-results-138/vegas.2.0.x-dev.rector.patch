diff --git a/vegas.module b/vegas.module
index 80e64b0..d9f7b15 100644
--- a/vegas.module
+++ b/vegas.module
@@ -35,13 +35,13 @@ function vegas_page_attachments_alter(array &$attachments) {
           if ($mediafile->getEntityTypeId()) {
             if ($mediafile->bundle() == "image") {
               $mediafileuri = $mediafile->field_media_image->entity->getFileUri();
-              $image_path[] = ['src' => file_url_transform_relative(file_create_url($mediafileuri))];
+              $image_path[] = ['src' => \Drupal::service('file_url_generator')->generateString($mediafileuri)];
             }
             elseif ($mediafile->bundle() == "video") {
               $mediafileuri = $mediafile->field_media_video_file->entity->getFileUri();
               $image_path[] = [
                 "video" => [
-                  'src' => file_url_transform_relative(file_create_url($mediafileuri)),
+                  'src' => \Drupal::service('file_url_generator')->generateString($mediafileuri),
                 ],
                 "loop" => "false",
                 "mute" => "true",
