diff --git a/eu_cookie_compliance.module b/eu_cookie_compliance.module
index 6270362..f6f996a 100644
--- a/eu_cookie_compliance.module
+++ b/eu_cookie_compliance.module
@@ -181,7 +181,7 @@ function eu_cookie_compliance_page_attachments(&$variables) {
   if (!empty($config->get('disabled_javascripts'))) {
     if (is_readable($uri)) {
       if ((float) \Drupal::VERSION < 9.3) {
-        $url = file_url_transform_relative(file_create_url($uri));
+        $url = \Drupal::service('file_url_generator')->generateString($uri);
       }
       else {
         $url = \Drupal::service('file_url_generator')->generateString($uri);
@@ -933,7 +933,7 @@ function eu_cookie_compliance_module_set_weight() {
  */
 function _eu_cookie_compliance_convert_relative_uri(&$element) {
   if ((float) \Drupal::VERSION < 9.3) {
-    $element = preg_replace('/^\//', '', file_url_transform_relative(file_create_url($element)));
+    $element = preg_replace('/^\//', '', \Drupal::service('file_url_generator')->generateString($element));
   }
   else {
     $url = \Drupal::service('file_url_generator')->generateString($element);
