diff --git a/cmrf_call_report/src/Controller/CMRFCallreportController.php b/cmrf_call_report/src/Controller/CMRFCallreportController.php
index c61b042..b73e4dc 100644
--- a/cmrf_call_report/src/Controller/CMRFCallreportController.php
+++ b/cmrf_call_report/src/Controller/CMRFCallreportController.php
@@ -48,7 +48,7 @@ class CMRFCallreportController extends ControllerBase {
       $scheduled_date = '';
       if (!empty($call->scheduled_date)) {
         $scheduled_date = new \DateTime($call->scheduled_date);
-        $scheduled_date = format_date($scheduled_date->getTimestamp());
+        $scheduled_date = \Drupal::service('date.formatter')->format($scheduled_date->getTimestamp());
       }
       $caching_until = '';
       if (!empty($call->cached_until)) {
diff --git a/cmrf_example/tests/src/Functional/LoadTest.php b/cmrf_example/tests/src/Functional/LoadTest.php
index c559a65..c118742 100644
--- a/cmrf_example/tests/src/Functional/LoadTest.php
+++ b/cmrf_example/tests/src/Functional/LoadTest.php
@@ -30,7 +30,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $entity=CMRFProfile::load('default');
     //this test will fail until you set up those properties correctly.
diff --git a/cmrf_views/src/Plugin/views/field/File.php b/cmrf_views/src/Plugin/views/field/File.php
index 013b850..464a948 100644
--- a/cmrf_views/src/Plugin/views/field/File.php
+++ b/cmrf_views/src/Plugin/views/field/File.php
@@ -211,7 +211,7 @@ class File extends FieldPluginBase {
           $file_uri_path  = $uri_path . '/' . $attachment['id'] . '.' . $file['extension'];
           $file_real_path = $real_path . '/' . $attachment['id'] . '.' . $file['extension'];
           if (!file_exists($file_real_path)) {
-            system_retrieve_file($attachment['url'], $file_uri_path, FALSE, FILE_EXISTS_REPLACE);
+            system_retrieve_file($attachment['url'], $file_uri_path, FALSE, \Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE);
           }
           if (file_exists($file_real_path)) {
             // Load the image style.
diff --git a/cmrf_views/src/Plugin/views/field/JSON.php b/cmrf_views/src/Plugin/views/field/JSON.php
index 1af4534..fcf8a8b 100644
--- a/cmrf_views/src/Plugin/views/field/JSON.php
+++ b/cmrf_views/src/Plugin/views/field/JSON.php
@@ -68,7 +68,7 @@ class JSON extends \Drupal\views\Plugin\views\field\Standard implements MultiIte
       // Render an item list from the JSON structure as default markup.
       '#item_list' => $this->render_item_item_list($item),
     ];
-    return render($render);
+    return \Drupal::service('renderer')->render($render);
   }
 
   public function render_item_item_list($item) {
diff --git a/tests/src/Functional/InstantiationTests.php b/tests/src/Functional/InstantiationTests.php
index f9754dd..9178c5f 100644
--- a/tests/src/Functional/InstantiationTests.php
+++ b/tests/src/Functional/InstantiationTests.php
@@ -25,7 +25,7 @@ class InstantiationTests extends KernelTestBase {
   protected $profile = 'minimal';
   public static $modules = ['cmrf_core'];
 
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig(['cmrf_core']);
   }
@@ -36,7 +36,7 @@ class InstantiationTests extends KernelTestBase {
     $prop=new \ReflectionProperty('\Drupal\cmrf_core\Core','callfactory');
     $prop->setAccessible(true);
     $factory=$prop->getValue($core);
-    $this->assertNotEqual($factory,null);
+    $this->assertNotEquals($factory, null);
     $prop=new \ReflectionProperty('\CMRF\PersistenceLayer\SQLPersistingCallFactory','table_name');
     $prop->setAccessible(true);
     $table=$prop->getValue($factory);
