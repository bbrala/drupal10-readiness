diff --git a/src/Controller/WeMegaMenuAdminController.php b/src/Controller/WeMegaMenuAdminController.php
index 301f0ba..4697ca4 100644
--- a/src/Controller/WeMegaMenuAdminController.php
+++ b/src/Controller/WeMegaMenuAdminController.php
@@ -102,7 +102,7 @@ class WeMegaMenuAdminController extends ControllerBase {
   public function resetConfigWeMegaMenu() {
     if (isset($_POST['action']) && $_POST['action'] == 'reset' && isset($_POST['menu_name']) && isset($_POST['theme'])) {
       $theme_array = WeMegaMenuBuilder::renderWeMegaMenuBlock($_POST['menu_name'], $_POST['theme']);
-      $markup = render($theme_array);
+      $markup = \Drupal::service('renderer')->render($theme_array);
       echo $markup;
       we_megamenu_flush_render_cache();
       exit;
@@ -115,7 +115,7 @@ class WeMegaMenuAdminController extends ControllerBase {
       $result = $query->execute();
       WeMegaMenuBuilder::initMegamenu($_POST['menu_name'], $_POST['theme']);
       $theme_array = WeMegaMenuBuilder::renderWeMegaMenuBlock($_POST['menu_name'], $_POST['theme']);
-      $markup = render($theme_array);
+      $markup = \Drupal::service('renderer')->render($theme_array);
       echo $markup;
       we_megamenu_flush_render_cache();
       exit;
diff --git a/src/WeMegaMenuBuilder.php b/src/WeMegaMenuBuilder.php
index eb5a2bc..6cf5975 100644
--- a/src/WeMegaMenuBuilder.php
+++ b/src/WeMegaMenuBuilder.php
@@ -255,7 +255,7 @@ class WeMegaMenuBuilder {
         $html .= '<div class="type-of-block">';
         $html .= '<div class="block-inner">';
         $html .= $title_enable ? '<h2>' . $title . '</h2>' : '';
-        $html .= render($block_content);
+        $html .= \Drupal::service('renderer')->render($block_content);
         $html .= '</div>';
         $html .= '</div>';
       }
