diff --git a/src/Element/JQueryColorpickerElement.php b/src/Element/JQueryColorpickerElement.php
index 07147ae..20194ff 100644
--- a/src/Element/JQueryColorpickerElement.php
+++ b/src/Element/JQueryColorpickerElement.php
@@ -112,7 +112,7 @@ class JQueryColorpickerElement extends FormElement {
 
     // Since we know the background, we can then get the URL of it to pass to
     // the javascript function.
-    $background_url = file_create_url('vendor://jaypan/jquery-colorpicker/images/' . $background);
+    $background_url = \Drupal::service('file_url_generator')->generateAbsoluteString('vendor://jaypan/jquery-colorpicker/images/' . $background);
 
     // Next we determine what the default value for the form element is. This
     // will also be passed to the javascript function.
diff --git a/tests/src/Unit/Element/JQueryColorpickerTest.php b/tests/src/Unit/Element/JQueryColorpickerTest.php
index 74bd3c5..3fc2873 100644
--- a/tests/src/Unit/Element/JQueryColorpickerTest.php
+++ b/tests/src/Unit/Element/JQueryColorpickerTest.php
@@ -12,6 +12,7 @@ use Drupal\jquery_colorpicker\Element\JQueryColorpickerElement;
  */
 class JQueryColorpickerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * @covers ::valueCallback
    *
diff --git a/tests/src/Unit/Service/jQueryColorpickerServiceTest.php b/tests/src/Unit/Service/jQueryColorpickerServiceTest.php
index e478e07..56dc920 100644
--- a/tests/src/Unit/Service/jQueryColorpickerServiceTest.php
+++ b/tests/src/Unit/Service/jQueryColorpickerServiceTest.php
@@ -24,7 +24,7 @@ class JQueryColorpickerServiceTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $container = new ContainerBuilder();
     $container->set('string_translation', $this->getStringTranslationStub());
     \Drupal::setContainer($container);
