modules/contrib/amp/amp.install
modules/contrib/amp/amp.module
modules/contrib/amp/amp.post_update.php
modules/contrib/amp/amp.theme.inc
modules/contrib/amp/modules/amp_adsense/amp_adsense.module
modules/contrib/amp/modules/amp_rdf/amp_rdf.module
modules/contrib/amp/modules/amp_toolbar/amp_toolbar.module
modules/contrib/amp/src/AMP/DrupalAMP.php
modules/contrib/amp/src/AMP/DrupalParsedValidatorRules.php
modules/contrib/amp/src/AmpFormTrait.php
modules/contrib/amp/src/Asset/AmpCssCollectionRenderer.php
modules/contrib/amp/src/Controller/AMPTestLibrary.php
modules/contrib/amp/src/Element/AmpAnalytics.php
modules/contrib/amp/src/Element/AmpCustomStyle.php
modules/contrib/amp/src/Element/AmpProcessedText.php
modules/contrib/amp/src/Element/AmpSidebar.php
modules/contrib/amp/src/Element/AmpSocialPost.php
modules/contrib/amp/src/EntityTypeInfo.php
modules/contrib/amp/src/EventSubscriber/AmpEventSubscriber.php
modules/contrib/amp/src/Form/AmpAnalyticsSettingsForm.php
modules/contrib/amp/src/Form/AmpSettingsForm.php
modules/contrib/amp/src/Plugin/Block/AmpGoogleDoubleClickBlock.php
modules/contrib/amp/src/Plugin/Block/AmpSocialShareBlock.php
modules/contrib/amp/src/Plugin/Block/AmpSystemBrandingBlock.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpIframeFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpImageCarousel.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpImageFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpMediaImageFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpSocialPostFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpSummaryOrTrimmedFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpTextFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpTextTrimmedFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpVideoFormatter.php
modules/contrib/amp/src/Plugin/views/style/AmpViewsCarouselStyle.php
modules/contrib/amp/src/Render/AmpHtmlRenderer.php
modules/contrib/amp/src/Render/AmpHtmlResponseAttachmentsProcessor.php
modules/contrib/amp/src/Routing/AmpContext.php
modules/contrib/amp/src/Service/AMPService.php
modules/contrib/amp/src/Theme/AmpNegotiator.php
modules/contrib/amp/src/Utility/AmpQueryParameters.php
modules/contrib/amp/tests/src/Functional/Amp.php
modules/contrib/amp/tests/src/Functional/AmpAdsense.php
modules/contrib/amp/tests/src/Functional/AmpCSSTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterFacebookTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterImageCarouselTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterImageTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterMediaImageTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTestBase.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTextTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTextTrimmedTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTwitterTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterVideoTest.php
modules/contrib/amp/tests/src/Functional/AmpRdf.php
modules/contrib/amp/tests/src/Functional/AmpTestBase.php
modules/contrib/amp/tests/src/Functional/AmpToolbar.php
modules/contrib/amp/tests/src/Functional/AmpViewModeTest.php
modules/contrib/amp/tests/src/Functional/BasicTestCaseBase.php
modules/contrib/amp/tests/src/Unit/AmpSocialPostTest.php

12 files with changes
=====================

1) modules/contrib/amp/tests/src/Functional/BasicTestCaseBase.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     // Make sure to complete the normal setup steps first.
     parent::setUp();

@@ @@
     $this->assertSession()->statusCodeEquals(200);

     // Confirm that the front page contains the standard text.
-    $this->assertText('Welcome to Drupal');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Welcome to Drupal');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/amp/tests/src/Functional/AmpTestBase.php:104

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/amp/tests/src/Functional/AmpFormatterVideoTest.php:44

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/amp/tests/src/Functional/AmpFormatterTwitterTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Add field to the test content type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/amp/tests/src/Functional/AmpFormatterTestBase.php:62

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     if (empty($this->fieldName)) {
       $this->fieldName = strtolower($this->randomMachineName());
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/amp/tests/src/Functional/AmpFormatterMediaImageTest.php:43

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create an image media type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/amp/tests/src/Functional/AmpFormatterImageTest.php:42

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/amp/tests/src/Functional/AmpFormatterImageCarouselTest.php:46

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/amp/tests/src/Functional/AmpFormatterFacebookTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Add field to the test content type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/amp/src/EventSubscriber/AmpEventSubscriber.php:44

    ---------- begin diff ----------
@@ @@
   /**
    * Alters the wrapper format if this is an AMP request.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ViewEvent $event
    *   The event to process.
    */
-  public function onView(GetResponseForControllerResultEvent $event) {
+  public function onView(\Symfony\Component\HttpKernel\Event\ViewEvent $event) {

     // Don't interfere if this is a request that does not use html or amp
     // wrapper formats.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/amp/src/Asset/AmpCssCollectionRenderer.php:342

    ---------- begin diff ----------
@@ @@
       $last = $path;
       $path = preg_replace('`(^|/)(?!\.\./)([^/]+)/\.\./`', '$1', $path);
     }
-    return 'url(' . file_url_transform_relative(file_create_url($path)) . ')';
+    return 'url(' . \Drupal::service('file_url_generator')->generateString($path) . ')';
   }

 }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/amp/amp.module:323

    ---------- begin diff ----------
@@ @@
 function amp_theme_registry_alter(&$theme_registry) {
   $theme_registry['amp_image_wrapper'] = $theme_registry['image'];
   $theme_registry['amp_image_wrapper']['template'] = 'amp-image-wrapper';
-  $theme_registry['amp_image_wrapper']['path'] = drupal_get_path('module', 'amp') . '/templates';
+  $theme_registry['amp_image_wrapper']['path'] = \Drupal::service('extension.list.module')->getPath('amp') . '/templates';
 }

 /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


 [OK] 12 files have been changed by Rector                                      

