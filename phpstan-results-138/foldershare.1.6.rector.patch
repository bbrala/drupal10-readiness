diff --git a/foldershare.module b/foldershare.module
index 2f73a14..72c4315 100644
--- a/foldershare.module
+++ b/foldershare.module
@@ -1748,7 +1748,7 @@ function foldershare_help(string $routeName, RouteMatchInterface $routeMatch) {
 
   $anonymousName = User::getAnonymousUser()->getDisplayName();
 
-  $imagePath = '/' . drupal_get_path('module', Constants::MODULE) . '/images/';
+  $imagePath = '/' . \Drupal::service('extension.list.module')->getPath(Constants::MODULE) . '/images/';
 
   $recommended = '<span class="foldershare-admin-help-recommended">â€¢ ' . t('Recommended practice:') . ' </span>';
 
diff --git a/src/Entity/Controller/FolderShareViewController.php b/src/Entity/Controller/FolderShareViewController.php
index 8dead58..ca34e5a 100755
--- a/src/Entity/Controller/FolderShareViewController.php
+++ b/src/Entity/Controller/FolderShareViewController.php
@@ -1677,7 +1677,7 @@ final class FolderShareViewController extends EntityViewController {
     // themes to mark the button as a button.
     //
     // Create the <img> HTML.
-    $sidebarButtonUrl   = '/' . drupal_get_path('module', 'foldershare') .
+    $sidebarButtonUrl   = '/' . \Drupal::service('extension.list.module')->getPath('foldershare') .
       '/images/button-sidebar.svg';
     $sidebarButtonAlt   = $this->t('Show/hide');
     $sidebarButtonImage = "<img alt=\"$sidebarButtonAlt\" src=\"$sidebarButtonUrl\">";
diff --git a/src/EventSubscriber/FolderShareHttpExceptionSubscriber.php b/src/EventSubscriber/FolderShareHttpExceptionSubscriber.php
index faa5517..c3a8a7d 100644
--- a/src/EventSubscriber/FolderShareHttpExceptionSubscriber.php
+++ b/src/EventSubscriber/FolderShareHttpExceptionSubscriber.php
@@ -223,14 +223,14 @@ class FolderShareHttpExceptionSubscriber extends DefaultExceptionHtmlSubscriber
    * If the event is handled, log and response messages are built that
    * include the event's exception message and request headers.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ExceptionEvent $event
    *   The event to process.
    *
    * @todo When Drupal 8 and pre-Symfony 4.4 compatibility is no longer
    * required, change the argument type to ExceptionEvent. And change the
    * use statement above to \Symfony\Component\HttpKernel\Event\ExceptionEvent.
    */
-  public function onException(GetResponseForExceptionEvent $event) {
+  public function onException(\Symfony\Component\HttpKernel\Event\ExceptionEvent $event) {
     //
     // Verify exception type.
     // ----------------------
@@ -240,7 +240,7 @@ class FolderShareHttpExceptionSubscriber extends DefaultExceptionHtmlSubscriber
     //
     // @todo When Drupal 8 and pre-Symfony 4.4 compatibility is no longer
     // required, change the getException() method here to getThrowable().
-    $exception = $event->getException();
+    $exception = $event->getThrowable();
     if (($exception instanceof HttpExceptionInterface) === FALSE) {
       // Not an HTTP exception.
       return;
diff --git a/src/EventSubscriber/FolderShareScheduledTaskHandler.php b/src/EventSubscriber/FolderShareScheduledTaskHandler.php
index 22d3fee..b9368f8 100644
--- a/src/EventSubscriber/FolderShareScheduledTaskHandler.php
+++ b/src/EventSubscriber/FolderShareScheduledTaskHandler.php
@@ -59,7 +59,7 @@ class FolderShareScheduledTaskHandler implements EventSubscriberInterface {
    * The scheduled task list of the FolderShare module is checked and
    * ready tasks run.
    *
-   * @param \Symfony\Component\HttpKernel\Event\PostResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\TerminateEvent $event
    *   The termination event.
    *
    * @see ::getSubscribedEvents()
@@ -69,7 +69,7 @@ class FolderShareScheduledTaskHandler implements EventSubscriberInterface {
    * required, change the argument type to TerminateEvent. And change the
    * use statement above to Symfony\Component\HttpKernel\Event\TerminateEvent.
    */
-  public function onTerminate(PostResponseEvent $event) {
+  public function onTerminate(\Symfony\Component\HttpKernel\Event\TerminateEvent $event) {
     FolderShareScheduledTask::executeTasks(
       (int) $event->getRequest()->server->get('REQUEST_TIME'));
   }
diff --git a/src/Form/UIAncestorMenu.php b/src/Form/UIAncestorMenu.php
index 8f245d4..9956817 100755
--- a/src/Form/UIAncestorMenu.php
+++ b/src/Form/UIAncestorMenu.php
@@ -83,7 +83,7 @@ final class UIAncestorMenu {
     $menuButtonClass = 'foldershare-ancestormenu-menu-button';
     $menuClass       = 'foldershare-ancestormenu-menu';
 
-    $menuButtonUrl   = '/' . drupal_get_path('module', 'foldershare') .
+    $menuButtonUrl   = '/' . \Drupal::service('extension.list.module')->getPath('foldershare') .
       '/images/menu-ancestor.svg';
     $menuButtonAlt   = t('Location menu');
     $menuButtonImage = "<img alt=\"$menuButtonAlt\" src=\"$menuButtonUrl\">";
diff --git a/src/Form/UIFolderBrowserMenu.php b/src/Form/UIFolderBrowserMenu.php
index e25f341..e63365f 100755
--- a/src/Form/UIFolderBrowserMenu.php
+++ b/src/Form/UIFolderBrowserMenu.php
@@ -544,11 +544,11 @@ class UIFolderBrowserMenu extends FormBase {
 
     if ($disabled === TRUE) {
       // TODO delete this code. It uses the wrong icon.
-      $menuButtonUrl = '/' . drupal_get_path('module', 'foldershare') .
+      $menuButtonUrl = '/' . \Drupal::service('extension.list.module')->getPath('foldershare') .
         '/images/menu-icon.disabled.27x15.png';
     }
     else {
-      $menuButtonUrl = '/' . drupal_get_path('module', 'foldershare') .
+      $menuButtonUrl = '/' . \Drupal::service('extension.list.module')->getPath('foldershare') .
         '/images/menu-file.svg';
     }
 
