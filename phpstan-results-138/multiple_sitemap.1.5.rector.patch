diff --git a/multiple_sitemap.info.yml b/multiple_sitemap.info.yml
index 0c625cf..c9facde 100644
--- a/multiple_sitemap.info.yml
+++ b/multiple_sitemap.info.yml
@@ -3,7 +3,7 @@ description: Create multiple sitemaps.
 type: module
 # version: 1.1
 configure: multiple_sitemap.add_multiple_sitemap
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 # Information added by Drupal.org packaging script on 2021-06-17
 version: '8.x-1.5'
diff --git a/src/MultipleSitemapXml.php b/src/MultipleSitemapXml.php
index b3c719f..ec59c81 100644
--- a/src/MultipleSitemapXml.php
+++ b/src/MultipleSitemapXml.php
@@ -55,7 +55,7 @@ class MultipleSitemapXml {
     if (!empty($filesnames)) {
       foreach ($filesnames as $filesname) {
         $sub_file_name = $dir_name . '/' . $filesname . '.xml';
-        $sub_file_name = file_create_url($sub_file_name);
+        $sub_file_name = \Drupal::service('file_url_generator')->generateAbsoluteString($sub_file_name);
         $writer->startElement('sitemap');
         $writer->writeElement('loc', $sub_file_name);
         $writer->writeElement('lastmod', $lastmod);
