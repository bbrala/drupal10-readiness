modules/contrib/webp_extras/src/Plugin/Filter/WebpImage.php

1 file with changes
===================

1) modules/contrib/webp_extras/src/Plugin/Filter/WebpImage.php:88

    ---------- begin diff ----------
@@ @@

         /** @var \DOMElement $result */
         $rel_path = str_replace('/sites/default/files/', '', $result->getAttribute('src'));
-        $file_uri = file_build_uri($rel_path);
+        $file_uri = \Drupal::service('stream_wrapper_manager')->normalizeUri(\Drupal::config('system.file')->get('default_scheme') . ('://' . $rel_path));
         // Remove query arguments.
         $uri = preg_match('/^.*(?:\.)[a-zA-Z]+/m', $file_uri, $matches) ? $matches[0] : $file_uri;
         $uri = urldecode($uri);
    ----------- end diff -----------

Applied rules:
 * FileBuildUriRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

