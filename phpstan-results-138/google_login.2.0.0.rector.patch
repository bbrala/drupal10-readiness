diff --git a/src/Controller/GoogleLoginCallbackController.php b/src/Controller/GoogleLoginCallbackController.php
index 8a5a690..6c66cfd 100644
--- a/src/Controller/GoogleLoginCallbackController.php
+++ b/src/Controller/GoogleLoginCallbackController.php
@@ -56,7 +56,7 @@ class GoogleLoginCallbackController extends ControllerBase {
   private function googleloginCreateUser(array $account) {
 
     $new_user = User::create();
-    $new_user->setPassword(user_password(25));
+    $new_user->setPassword(\Drupal::service('password_generator')->generate(25));
     $new_user->setEmail($account['email']);
     $new_user->setUsername($account['name']);
     $new_user->set('init', 'email');
diff --git a/src/Form/GoogleLoginForm.php b/src/Form/GoogleLoginForm.php
index aad6068..b42ea09 100644
--- a/src/Form/GoogleLoginForm.php
+++ b/src/Form/GoogleLoginForm.php
@@ -46,7 +46,7 @@ class GoogleLoginForm extends ConfigFormBase {
     $link = Link::fromTextAndUrl($text, $url);
     $new_link = ($link->toRenderable());
     $new_link['#attributes'] = ['target' => ['blank']];
-    $html_link = render($link);
+    $html_link = \Drupal::service('renderer')->render($link);
 
     $form['googlelogin_text'] = array(
       '#type' => 'item',
