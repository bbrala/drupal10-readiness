diff --git a/lazy.info.yml b/lazy.info.yml
index 59b591d..637fa4f 100644
--- a/lazy.info.yml
+++ b/lazy.info.yml
@@ -1,7 +1,7 @@
 name: 'Lazy-load'
 type: module
 description: 'This module enables lazy-loading images and iframes via text-filters and image-fields. Requires lazysizes library.'
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'Input filters'
 configure: lazy.config_form
 dependencies:
diff --git a/lazy.module b/lazy.module
index 6e23418..384b399 100644
--- a/lazy.module
+++ b/lazy.module
@@ -211,7 +211,7 @@ function lazy_process_variables(array &$variables) {
           $placeholder_image_url = "data:${mime_type};base64," . base64_encode($content);
         }
         else {
-          $placeholder_image_url = file_url_transform_relative($placeholder_image_url);
+          $placeholder_image_url = \Drupal::service('file_url_generator')->transformRelative($placeholder_image_url);
         }
         $variables['attributes']['src'] = $placeholder_image_url;
       }
