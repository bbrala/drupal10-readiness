modules/contrib/image_effects/image_effects.api.php
modules/contrib/image_effects/image_effects.install
modules/contrib/image_effects/image_effects.module
modules/contrib/image_effects/src/Commands/ImageEffectsCommands.php
modules/contrib/image_effects/src/Component/ColorUtility.php
modules/contrib/image_effects/src/Component/GdGaussianBlur.php
modules/contrib/image_effects/src/Component/GdImageAnalysis.php
modules/contrib/image_effects/src/Component/ImageUtility.php
modules/contrib/image_effects/src/Component/MatrixUtility.php
modules/contrib/image_effects/src/Component/PositionedRectangle.php
modules/contrib/image_effects/src/Component/Rectangle.php
modules/contrib/image_effects/src/Component/TextUtility.php
modules/contrib/image_effects/src/Element/ImageEffectsColor.php
modules/contrib/image_effects/src/Element/ImageEffectsPxPerc.php
modules/contrib/image_effects/src/Form/SettingsForm.php
modules/contrib/image_effects/src/ImageEffectsConverter.php
modules/contrib/image_effects/src/ImageEffectsUninstallValidator.php
modules/contrib/image_effects/src/Plugin/ImageEffect/AnchorTrait.php
modules/contrib/image_effects/src/Plugin/ImageEffect/AspectSwitcherImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/AutoOrientImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/BackgroundImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/BrightnessImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ColorShiftImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ContrastImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ConvolutionImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ConvolutionSharpenImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/GaussianBlurImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ImagemagickArgumentsImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/InterlaceImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/InvertImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/MaskImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/MirrorImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/OpacityImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/PixelateImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/RelativeCropImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ResizePercentageImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/RotateImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/ScaleAndSmartCropImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/SetCanvasImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/SetTransparentColorImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/SmartCropImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/StripMetadataImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/TextOverlayImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffect/WatermarkImageEffect.php
modules/contrib/image_effects/src/Plugin/ImageEffectsFontSelectorPluginInterface.php
modules/contrib/image_effects/src/Plugin/ImageEffectsPluginBase.php
modules/contrib/image_effects/src/Plugin/ImageEffectsPluginBaseInterface.php
modules/contrib/image_effects/src/Plugin/ImageEffectsPluginManager.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/BackgroundTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/BrightnessTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/ColorshiftTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/ContrastTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/ConvolutionTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/DrawEllipseTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/DrawLineTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/DrawRectangleTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/FontOperationTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/GaussianBlurTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/ImagemagickArgumentsTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/InterlaceTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/MaskTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/MirrorTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/OpacityTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/PixelateTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/ReplaceImageTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/RotateTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/ScaleAndSmartCropTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/SetCanvasTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/SetGifTransparentColorTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/SmartCropTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/TextOverlayTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/TextToWrapperTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/WatermarkTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/AutoOrient.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Background.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Brightness.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Colorshift.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Contrast.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Convolution.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/DrawEllipse.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/DrawLine.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/DrawRectangle.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/GDOperationTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/GaussianBlur.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/ImagemagickArguments.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Interlace.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Invert.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Mask.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Mirror.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Opacity.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Pixelate.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/ReplaceImage.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Rotate.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/ScaleAndSmartCrop.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/SetCanvas.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/SetGifTransparentColor.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/SmartCrop.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Strip.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/TextOverlay.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/TextToWrapper.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/gd/Watermark.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/AutoOrient.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Background.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Brightness.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Colorshift.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Contrast.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Convolution.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/DrawEllipse.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/DrawRectangle.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/GaussianBlur.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/ImagemagickArguments.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/ImagemagickOperationTrait.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Interlace.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Invert.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Mask.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Mirror.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Opacity.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Pixelate.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/ReplaceImage.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Rotate.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/ScaleAndSmartCrop.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/SetCanvas.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/SetGifTransparentColor.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/SmartCrop.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Strip.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/TextToWrapper.php
modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemagick/Watermark.php
modules/contrib/image_effects/src/Plugin/image_effects/ColorSelector/Farbtastic.php
modules/contrib/image_effects/src/Plugin/image_effects/ColorSelector/HtmlColor.php
modules/contrib/image_effects/src/Plugin/image_effects/ColorSelector/JqueryColorPicker.php
modules/contrib/image_effects/src/Plugin/image_effects/FontSelector/Basic.php
modules/contrib/image_effects/src/Plugin/image_effects/FontSelector/Dropdown.php
modules/contrib/image_effects/src/Plugin/image_effects/ImageSelector/Basic.php
modules/contrib/image_effects/src/Plugin/image_effects/ImageSelector/Dropdown.php
modules/contrib/image_effects/src/ProxyClass/ImageEffectsUninstallValidator.php
modules/contrib/image_effects/tests/modules/image_effects_module_test/src/Plugin/ImageEffect/FontSelectionImageEffect.php
modules/contrib/image_effects/tests/modules/image_effects_module_test/src/Plugin/ImageEffect/ImageSelectionImageEffect.php
modules/contrib/image_effects/tests/src/Functional/Effect/AspectSwitcherTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/AutoOrientTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/BackgroundTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/BrightnessTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ColorShiftTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ContrastTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ConvolutionSharpenTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ConvolutionTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/GaussianBlurTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ImagemagickArgumentsTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/InterlaceTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/InvertTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/MaskTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/MirrorTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/OpacityTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/PixelateTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/RelativeCropTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ResizePercentageTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/RotateTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/ScaleAndSmartCropTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/SetCanvasTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/SetTransparentColorTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/SmartCropTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/StripMetadataTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/TextOverlayTest.php
modules/contrib/image_effects/tests/src/Functional/Effect/WatermarkTest.php
modules/contrib/image_effects/tests/src/Functional/ImageEffectsTestBase.php
modules/contrib/image_effects/tests/src/Functional/SelectorPluginTest.php
modules/contrib/image_effects/tests/src/Functional/SettingsFormTest.php
modules/contrib/image_effects/tests/src/Kernel/ConverterTest.php
modules/contrib/image_effects/tests/src/Unit/ColorUtilityTest.php
modules/contrib/image_effects/tests/src/Unit/GdImageAnalysisTest.php
modules/contrib/image_effects/tests/src/Unit/ImageUtilityTest.php
modules/contrib/image_effects/tests/src/Unit/MatrixUtilityTest.php
modules/contrib/image_effects/tests/src/Unit/PositionedRectangleTest.php
modules/contrib/image_effects/tests/src/Unit/RectangleTest.php
modules/contrib/image_effects/tests/src/Unit/TextUtilityTest.php

13 files with changes
=====================

1) modules/contrib/image_effects/tests/src/Functional/SelectorPluginTest.php:25

    ---------- begin diff ----------
@@ @@
    * Image selector test.
    */
   public function testImageSelector() {
-    $image_path = drupal_get_path('module', 'image_effects') . '/tests/images';
+    $image_path = \Drupal::service('extension.list.module')->getPath('image_effects') . '/tests/images';
     $image_file = 'portrait-painting.jpe';

     // Test the Basic plugin.
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/image_effects/tests/src/Functional/ImageEffectsTestBase.php:259

    ---------- begin diff ----------
@@ @@
   protected function getTestImageCopyUri($path, $name = NULL, $type = 'module') {
     $test_directory = 'public://test-images/';
     $this->fileSystem->prepareDirectory($test_directory, FileSystemInterface::CREATE_DIRECTORY);
-    $source_uri = $name ? drupal_get_path($type, $name) : '';
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Unsupported extension type encountered, using extension.path.resolver instead of extension.list
+    $source_uri = $name ? \Drupal::service('extension.path.resolver')->getPath($type, $name) : '';
     $source_uri .= $path;
     $target_uri = $test_directory . \Drupal::service('file_system')->basename($source_uri);
     return $this->fileSystem->copy($source_uri, $target_uri, FileSystemInterface::EXISTS_REPLACE);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/image_effects/tests/src/Functional/Effect/TextOverlayTest.php:115

    ---------- begin diff ----------
@@ @@
       $image = $this->imageFactory->get($original_uri);

       // Load Image Style and get expected derivative URL.
-      $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+      $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));

       // Check that ::applyEffect generates image with expected dimensions
       // and colors at corners.
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/image_effects/tests/src/Functional/Effect/SmartCropTest.php:66

    ---------- begin diff ----------
@@ @@
       $image = $this->imageFactory->get($original_uri);
       $this->assertEquals(40, $image->getWidth());
       $this->assertEquals(40, $image->getHeight());
-      $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+      $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
       $variables = [
         '#theme' => 'image_style',
         '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/image_effects/tests/src/Functional/Effect/SetCanvasTest.php:58

    ---------- begin diff ----------
@@ @@
     $image = $this->imageFactory->get($original_uri);
     $this->assertEquals(40, $image->getWidth());
     $this->assertEquals(20, $image->getHeight());
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
@@ @@
     $image = $this->imageFactory->get($original_uri);
     $this->assertEquals(40, $image->getWidth());
     $this->assertEquals(20, $image->getHeight());
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/image_effects/tests/src/Functional/Effect/ScaleAndSmartCropTest.php:56

    ---------- begin diff ----------
@@ @@

         // Check that ::transformDimensions returns expected dimensions.
         $image = $this->imageFactory->get($original_uri);
-        $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+        $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
         $variables = [
           '#theme' => 'image_style',
           '#style_name' => 'image_effects_test',
@@ @@

         // Check that ::transformDimensions returns expected dimensions.
         $image = $this->imageFactory->get($original_uri);
-        $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+        $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
         $variables = [
           '#theme' => 'image_style',
           '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/image_effects/tests/src/Functional/Effect/RotateTest.php:136

    ---------- begin diff ----------
@@ @@
         }
         $this->assertSame(40, $image->getWidth(), $test_message);
         $this->assertSame(20, $image->getHeight(), $test_message);
-        $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+        $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
         $variables = [
           '#theme' => 'image_style',
           '#style_name' => 'image_effects_test',
@@ @@
     $image = $this->imageFactory->get($original_uri);
     $this->assertSame(40, $image->getWidth());
     $this->assertSame(20, $image->getHeight());
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/image_effects/tests/src/Functional/Effect/ResizePercentageTest.php:147

    ---------- begin diff ----------
@@ @@
       $image = $this->imageFactory->get($original_uri);
       $this->assertEquals(40, $image->getWidth());
       $this->assertEquals(20, $image->getHeight());
-      $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+      $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
       $variables = [
         '#theme' => 'image_style',
         '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/image_effects/tests/src/Functional/Effect/RelativeCropTest.php:49

    ---------- begin diff ----------
@@ @@
     $this->assertEquals(14, $image_gd->getHeight());

     $derivative_uri = $this->testImageStyle->buildUri($test_file_uris['border']);
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($test_file_uris['border']));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($test_file_uris['border']));

     // Test that no cropping will be done if the ratio matches the original.
     $test_data['Matching ratio'] = [
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/image_effects/tests/src/Functional/Effect/ImagemagickArgumentsTest.php:54

    ---------- begin diff ----------
@@ @@

     // Check that ::transformDimensions returns expected dimensions.
     $image = $this->imageFactory->get($original_uri);
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
@@ @@
     // Check that ::transformDimensions does not provide dimension
     // attributes.
     $image = $this->imageFactory->get($original_uri);
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
@@ @@

     // Check that ::transformDimensions returns expected dimensions.
     $image = $this->imageFactory->get($original_uri);
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
@@ @@

     // Check that ::transformDimensions returns expected dimensions.
     $image = $this->imageFactory->get($original_uri);
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/image_effects/tests/src/Functional/Effect/BackgroundTest.php:54

    ---------- begin diff ----------
@@ @@
     $image = $this->imageFactory->get($original_uri);
     $this->assertEquals(40, $image->getWidth());
     $this->assertEquals(20, $image->getHeight());
-    $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+    $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => 'image_effects_test',
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/image_effects/tests/src/Functional/Effect/AutoOrientTest.php:89

    ---------- begin diff ----------
@@ @@
       $this->assertEquals($data['original_height'], $image->getHeight());

       // Get expected derivative URL.
-      $derivative_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_uri));
+      $derivative_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_uri));

       // Check that ::transformDimensions returns expected dimensions.
       $variables = [
@@ @@

     $test_data = [];
     for ($i = 1; $i < 9; $i++) {
-      $test_data[$i]['test_file'] = drupal_get_path('module', 'image_effects') . "/tests/images/image-test-exif-orientation-$i.jpeg";
+      $test_data[$i]['test_file'] = \Drupal::service('extension.list.module')->getPath('image_effects') . "/tests/images/image-test-exif-orientation-$i.jpeg";
     }

     foreach ($test_data as $data) {
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/image_effects/tests/src/Functional/Effect/AspectSwitcherTest.php:117

    ---------- begin diff ----------
@@ @@
     // landscape.
     // Check that ::transformDimensions returns expected dimensions.
     $original_landscape_image = $image_factory->get($original_landscape_uri);
-    $derivative_landscape_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_landscape_uri));
+    $derivative_landscape_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_landscape_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => $this->testImageStyleName,
@@ @@
     // portrait.
     // Check that ::transformDimensions returns expected dimensions.
     $original_portrait_image = $image_factory->get($original_portrait_uri);
-    $derivative_portrait_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_portrait_uri));
+    $derivative_portrait_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_portrait_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => $this->testImageStyleName,
@@ @@
     // Check that no changes are made when source image is portrait.
     // Check that ::transformDimensions returns expected dimensions.
     $original_portrait_image = $image_factory->get($original_portrait_uri);
-    $derivative_portrait_url = file_url_transform_relative($this->testImageStyle->buildUrl($original_portrait_uri));
+    $derivative_portrait_url = \Drupal::service('file_url_generator')->transformRelative($this->testImageStyle->buildUrl($original_portrait_uri));
     $variables = [
       '#theme' => 'image_style',
       '#style_name' => $this->testImageStyleName,
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ExplicitPhpErrorApiRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Watermark.php" file, due to:                                       
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/TextToWrapper.php" file, due to:                                   
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Strip.php" file, due to:                                           
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/SmartCrop.php" file, due to:                                       
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/SetGifTransparentColor.php" file, due to:                          
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/SetCanvas.php" file, due to:                                       
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/ScaleAndSmartCrop.php" file, due to:                               
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Rotate.php" file, due to:                                          
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/ReplaceImage.php" file, due to:                                    
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Pixelate.php" file, due to:                                        
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Opacity.php" file, due to:                                         
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Mirror.php" file, due to:                                          
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Mask.php" file, due to:                                            
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Invert.php" file, due to:                                          
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Interlace.php" file, due to:                                       
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/ImagemagickArguments.php" file, due to:                            
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/GaussianBlur.php" file, due to:                                    
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/DrawRectangle.php" file, due to:                                   
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/DrawEllipse.php" file, due to:                                     
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Convolution.php" file, due to:                                     
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Contrast.php" file, due to:                                        
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Colorshift.php" file, due to:                                      
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Brightness.php" file, due to:                                      
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/Background.php" file, due to:                                      
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/image_effects/src/Plugin/ImageToolkit/Operation/imagemag
         ick/AutoOrient.php" file, due to:                                      
         "Analyze error: "Class                                                 
         Drupal\imagemagick\Plugin\ImageToolkit\Operation\imagemagick\ImagemagickI
         mageToolkitOperationBase not found.". Include your files in            
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

