modules/contrib/samlauth/modules/samlauth_user_fields/samlauth_user_fields.module
modules/contrib/samlauth/modules/samlauth_user_fields/src/EventSubscriber/UserFieldsEventSubscriber.php
modules/contrib/samlauth/modules/samlauth_user_fields/src/Form/SamlauthMappingDeleteForm.php
modules/contrib/samlauth/modules/samlauth_user_fields/src/Form/SamlauthMappingEditForm.php
modules/contrib/samlauth/modules/samlauth_user_fields/src/Form/SamlauthMappingListForm.php
modules/contrib/samlauth/modules/samlauth_user_roles/src/EventSubscriber/UserRolesEventSubscriber.php
modules/contrib/samlauth/modules/samlauth_user_roles/src/Form/SamlauthRoleMappingForm.php
modules/contrib/samlauth/samlauth.install
modules/contrib/samlauth/samlauth.module
modules/contrib/samlauth/samlauth.post_update.php
modules/contrib/samlauth/src/AuthVolatile.php
modules/contrib/samlauth/src/Controller/ExecuteInRenderContextTrait.php
modules/contrib/samlauth/src/Controller/SamlController.php
modules/contrib/samlauth/src/Element/MultiValue.php
modules/contrib/samlauth/src/Event/SamlauthEvents.php
modules/contrib/samlauth/src/Event/SamlauthUserLinkEvent.php
modules/contrib/samlauth/src/Event/SamlauthUserSyncEvent.php
modules/contrib/samlauth/src/EventSubscriber/AccessDeniedSubscriber.php
modules/contrib/samlauth/src/EventSubscriber/UserSyncEventSubscriber.php
modules/contrib/samlauth/src/Form/SamlauthAuthmapDeleteForm.php
modules/contrib/samlauth/src/Form/SamlauthConfigureForm.php
modules/contrib/samlauth/src/Plugin/Menu/LoginLogoutMenuLink.php
modules/contrib/samlauth/src/Plugin/views/field/AuthmapDeleteLink.php
modules/contrib/samlauth/src/SamlService.php
modules/contrib/samlauth/src/Tests/SamlTest.php
modules/contrib/samlauth/src/UserVisibleException.php
modules/contrib/samlauth/test_resources/samlauth_test/samlauth_test.module
modules/contrib/samlauth/test_resources/samlauth_test/src/EventSubscriber/TestSamlauthEventSubscriber.php

6 files with changes
====================

1) modules/contrib/samlauth/src/Tests/SamlTest.php:47

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // Import testshib config.
-    $config = drupal_get_path('module', 'samlauth') . '/test_resources/samlauth.authentication.yml';
+    $config = \Drupal::service('extension.list.module')->getPath('samlauth') . '/test_resources/samlauth.authentication.yml';
     $config = file_get_contents($config);
     $config = Yaml::decode($config);
     \Drupal::configFactory()->getEditable('samlauth.authentication')->setData($config)->save();
@@ @@
     $web_user = $this->drupalCreateUser(['configure saml']);
     $this->drupalLogin($web_user);
     $this->drupalGet('admin/config/people/saml');
-    $this->assertText('Login / Logout', 'Login / Logout fieldset present');
-    $this->assertText('Service Provider', 'SP fieldset present');
-    $this->assertText('Identity Provider', 'iDP fieldset present');
-    $this->assertText('User Info and Syncing', 'User Info and Syncing fieldset present');
-    $this->assertText('SAML Message Construction', 'SAML Message Construction fieldset present');
-    $this->assertText('SAML Message Validation', 'SAML Message Validation fieldset present');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Login / Logout');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Service Provider');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Identity Provider');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('User Info and Syncing');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('SAML Message Construction');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('SAML Message Validation');
   }

   /**
@@ @@

     // Test that we get metadata.
     $this->drupalGet('saml/metadata');
-    $this->assertResponse(200, 'SP metadata is accessible');
-    $this->assertRaw('entityID="samlauth"', 'Entity ID found in the metadata');
+    $this->assertSession()->statusCodeEquals(200, 'SP metadata is accessible');
+    $this->assertSession()->responseContains('entityID="samlauth"');
   }

   /**
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * AssertResponseRector
 * AssertTextRector
 * DrupalGetPathRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/samlauth/src/SamlService.php:440

    ---------- begin diff ----------
@@ @@
       // then by name, then by email.
       if ($config->get('map_users')) {
         $event = new SamlauthUserLinkEvent($this->getAttributes());
-        $this->eventDispatcher->dispatch(SamlauthEvents::USER_LINK, $event);
+        $this->eventDispatcher->dispatch($event, SamlauthEvents::USER_LINK);
         $account = $event->getLinkedAccount();
         if ($account) {
           $this->logger->info('Existing user @name (@uid) was newly matched to SAML login attributes; linking user and logging in.', [
@@ @@
   public function synchronizeUserAttributes(UserInterface $account, $skip_save = FALSE, $first_saml_login = FALSE) {
     // Dispatch a user_sync event.
     $event = new SamlauthUserSyncEvent($account, $this->getAttributes(), $first_saml_login);
-    $this->eventDispatcher->dispatch(SamlauthEvents::USER_SYNC, $event);
+    $this->eventDispatcher->dispatch($event, SamlauthEvents::USER_SYNC);

     if (!$skip_save && $event->isAccountChanged()) {
       $account->save();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector


3) modules/contrib/samlauth/src/EventSubscriber/AccessDeniedSubscriber.php:48

    ---------- begin diff ----------
@@ @@
   /**
    * Redirects users when access is denied.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ExceptionEvent $event
    *   The event to process.
    */
-  public function onException(GetResponseForExceptionEvent $event) {
-    $exception = $event->getException();
+  public function onException(\Symfony\Component\HttpKernel\Event\ExceptionEvent $event) {
+    $exception = $event->getThrowable();
     // If our own routes threw a TooManyRequestsHttpException, don't spend time
     // redirecting to another page and rendering that. (Rendering would need to
     // be done from scratch because the page needs to include includes the
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameMethodRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


4) modules/contrib/samlauth/src/Event/SamlauthUserSyncEvent.php:7

    ---------- begin diff ----------
@@ @@
 /**
  * Wraps a samlauth user sync event for event listeners.
  */
-class SamlauthUserSyncEvent extends Event {
+class SamlauthUserSyncEvent extends \Symfony\Contracts\EventDispatcher\Event {

   /**
    * The Drupal user account.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/samlauth/src/Event/SamlauthUserLinkEvent.php:7

    ---------- begin diff ----------
@@ @@
 /**
  * Wraps a samlauth user link event for event listeners.
  */
-class SamlauthUserLinkEvent extends Event {
+class SamlauthUserLinkEvent extends \Symfony\Contracts\EventDispatcher\Event {

   /**
    * The Drupal user account to link.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/samlauth/modules/samlauth_user_fields/src/Form/SamlauthMappingListForm.php:197

    ---------- begin diff ----------
@@ @@
         $output['table']['#rows'][$id] = [
           $mapping['attribute_name'],
           $user_field,
-          render($operations),
+          \Drupal::service('renderer')->render($operations),
         ];
         if ($linking_enabled) {
           array_splice($output['table']['#rows'][$id], 2, 0, [$mapping['link_user_order'] ?? '']);
    ----------- end diff -----------

Applied rules:
 * RenderRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

