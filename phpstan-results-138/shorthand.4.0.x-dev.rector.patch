diff --git a/shorthand.info.yml b/shorthand.info.yml
index 89b7b78..41481d7 100755
--- a/shorthand.info.yml
+++ b/shorthand.info.yml
@@ -1,7 +1,7 @@
 name: Shorthand
 type: module
 description: A module that allows the publishing of Shorthand stories directly to Drupal.
-core_version_requirement: ^9.2 || ^10
+core_version_requirement: ^9.3 || ^10
 package: Other
 
 dependencies:
diff --git a/src/Entity/ShorthandStory.php b/src/Entity/ShorthandStory.php
index e381f4b..6436cc0 100755
--- a/src/Entity/ShorthandStory.php
+++ b/src/Entity/ShorthandStory.php
@@ -158,7 +158,7 @@ class ShorthandStory extends RevisionableContentEntityBase implements ShorthandS
     // {Shorthand Local} tag with the new local path.
     $thumb = $this->thumbnail->value;
     if (empty($thumb) || strpos($thumb, '{Shorthand Local}/') !== FALSE) {
-      $assets_path = file_create_url($this->getShorthandStoryFilesStorageUri());
+      $assets_path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getShorthandStoryFilesStorageUri());
       $thumb = str_replace('{Shorthand Local}/', $assets_path . '/assets/', $thumb);
       $this->thumbnail->value = $thumb;
     }
@@ -478,8 +478,8 @@ class ShorthandStory extends RevisionableContentEntityBase implements ShorthandS
    *   storage path.
    */
   protected function fixStoryContentPaths($content, $external_assets) {
-    $absolute_assets_path = file_create_url($this->getShorthandStoryFilesStorageUri());
-    $assets_path = file_url_transform_relative($absolute_assets_path);
+    $absolute_assets_path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getShorthandStoryFilesStorageUri());
+    $assets_path = \Drupal::service('file_url_generator')->transformRelative($absolute_assets_path);
     if (!$external_assets) {
       $content = str_replace('./assets/', $assets_path . '/assets/', $content);
     }
