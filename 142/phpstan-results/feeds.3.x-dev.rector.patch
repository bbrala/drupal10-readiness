diff --git a/src/Entity/Feed.php b/src/Entity/Feed.php
index 0e7ecd94..de94f8ba 100644
--- a/src/Entity/Feed.php
+++ b/src/Entity/Feed.php
@@ -307,7 +307,7 @@ class Feed extends ContentEntityBase implements FeedInterface {
    * {@inheritdoc}
    */
   public function dispatchEntityEvent($event, EntityInterface $entity, ItemInterface $item) {
-    return $this->eventDispatcher()->dispatch($event, new EntityEvent($this, $entity, $item));
+    return $this->eventDispatcher()->dispatch(new EntityEvent($this, $entity, $item), $event);
   }
 
   /**
@@ -328,7 +328,7 @@ class Feed extends ContentEntityBase implements FeedInterface {
     }
 
     // Allow other modules to react upon finishing importing.
-    $this->eventDispatcher()->dispatch(FeedsEvents::IMPORT_FINISHED, new ImportFinishedEvent($this));
+    $this->eventDispatcher()->dispatch(new ImportFinishedEvent($this), FeedsEvents::IMPORT_FINISHED);
 
     // Cleanup.
     $this->clearStates();
diff --git a/src/Event/DeleteFeedsEvent.php b/src/Event/DeleteFeedsEvent.php
index 9bb4aabb..fe05f509 100644
--- a/src/Event/DeleteFeedsEvent.php
+++ b/src/Event/DeleteFeedsEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\feeds\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Fired when one or more feeds is being deleted.
diff --git a/src/Event/EventBase.php b/src/Event/EventBase.php
index 1bf0ebe5..c8ce6f33 100644
--- a/src/Event/EventBase.php
+++ b/src/Event/EventBase.php
@@ -2,8 +2,8 @@
 
 namespace Drupal\feeds\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\feeds\FeedInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * Helper class for events that need a feed.
diff --git a/src/Event/EventDispatcherTrait.php b/src/Event/EventDispatcherTrait.php
index 9fe8fcd8..7f9374b0 100644
--- a/src/Event/EventDispatcherTrait.php
+++ b/src/Event/EventDispatcherTrait.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\feeds\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Symfony\Component\EventDispatcher\EventDispatcherInterface;
 
 /**
@@ -28,10 +28,10 @@ trait EventDispatcherTrait {
    *
    * @param string $event_name
    *   The name of the event.
-   * @param \Symfony\Component\EventDispatcher\Event $event
+   * @param \Symfony\Contracts\EventDispatcher\Event $event
    *   The event to dispatch.
    *
-   * @return \Symfony\Component\EventDispatcher\Event
+   * @return \Symfony\Contracts\EventDispatcher\Event
    *   The invoked event.
    */
   protected function dispatchEvent($event_name, Event $event = NULL) {
diff --git a/src/Feeds/Target/File.php b/src/Feeds/Target/File.php
index 3eab9d94..4bb446d1 100644
--- a/src/Feeds/Target/File.php
+++ b/src/Feeds/Target/File.php
@@ -381,7 +381,7 @@ class File extends EntityReference {
   protected function writeData($data, $destination = NULL, $replace = FileSystemInterface::EXISTS_RENAME) {
     // @todo Remove file_save_data() when Drupal 9.2 is no longer supported.
     if (!\Drupal::hasService('file.repository')) {
-      return file_save_data($data, $destination, $replace);
+      return \Drupal::service('file.repository')->writeData($data, $destination, $replace);
     }
 
     if (empty($destination)) {
diff --git a/tests/modules/feeds_test_files/src/Controller/CsvController.php b/tests/modules/feeds_test_files/src/Controller/CsvController.php
index 1ac06032..b78959fb 100644
--- a/tests/modules/feeds_test_files/src/Controller/CsvController.php
+++ b/tests/modules/feeds_test_files/src/Controller/CsvController.php
@@ -168,7 +168,7 @@ class CsvController extends ControllerBase {
   protected function getModulePath(string $module_name): string {
     // @todo Remove drupal_get_path() when Drupal 9.2 is no longer supported.
     if ($this->extensionList == NULL) {
-      return drupal_get_path('module', $module_name);
+      return \Drupal::service('extension.list.module')->getPath($module_name);
     }
 
     return $this->extensionList->getPath($module_name);
diff --git a/tests/src/Functional/Commands/FeedsDrushCommandsTest.php b/tests/src/Functional/Commands/FeedsDrushCommandsTest.php
index 04ad9a4a..b4d06c79 100644
--- a/tests/src/Functional/Commands/FeedsDrushCommandsTest.php
+++ b/tests/src/Functional/Commands/FeedsDrushCommandsTest.php
@@ -26,7 +26,7 @@ class FeedsDrushCommandsTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createFeedType([
diff --git a/tests/src/Functional/CronTest.php b/tests/src/Functional/CronTest.php
index a6001255..50ae5285 100644
--- a/tests/src/Functional/CronTest.php
+++ b/tests/src/Functional/CronTest.php
@@ -60,7 +60,8 @@ class CronTest extends FeedsBrowserTestBase {
     // Check that items import normally.
     \Drupal::cache('feeds_download')->deleteAll();
     sleep(1);
-    $this->drupalPostForm('feed/' . $feed->id() . '/import', [], t('Import'));
+    $this->drupalGet('feed/' . $feed->id() . '/import');
+    $this->submitForm([], t('Import'));
     $feed = $this->reloadEntity($feed);
 
     $manual_imported_time = $feed->getImportedTime();
diff --git a/tests/src/Functional/ExpireTest.php b/tests/src/Functional/ExpireTest.php
index be4e70b8..5ed0349f 100644
--- a/tests/src/Functional/ExpireTest.php
+++ b/tests/src/Functional/ExpireTest.php
@@ -22,7 +22,7 @@ class ExpireTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
diff --git a/tests/src/Functional/FeedDeleteTest.php b/tests/src/Functional/FeedDeleteTest.php
index 41207e11..71dafeaf 100644
--- a/tests/src/Functional/FeedDeleteTest.php
+++ b/tests/src/Functional/FeedDeleteTest.php
@@ -20,9 +20,10 @@ class FeedDeleteTest extends FeedsBrowserTestBase {
     $feed = $this->createFeed($feed_type->id(), [
       'source' => $this->resourcesPath() . '/rss/googlenewstz.rss2',
     ]);
+    $this->drupalGet('/feed/1/delete');
 
     // Now try to delete this feed.
-    $this->drupalPostForm('/feed/1/delete', [], 'Delete');
+    $this->submitForm([], 'Delete');
 
     // Ensure that no errors are shown.
     $this->assertSession()->pageTextNotContains('The website encountered an unexpected error.');
@@ -51,9 +52,10 @@ class FeedDeleteTest extends FeedsBrowserTestBase {
     // Import data.
     $feed->import();
     $this->assertNodeCount(6);
+    $this->drupalGet('/feed/1/delete');
 
     // Now try to delete this feed.
-    $this->drupalPostForm('/feed/1/delete', [], 'Delete');
+    $this->submitForm([], 'Delete');
 
     // Ensure that the feed now no longer exists.
     $this->assertNull($this->reloadEntity($feed));
@@ -79,9 +81,10 @@ class FeedDeleteTest extends FeedsBrowserTestBase {
 
     // Programmatically delete the feed type. The feed is now orphaned.
     $feed_type->delete();
+    $this->drupalGet('/feed/1/delete');
 
     // Now try to delete this feed.
-    $this->drupalPostForm('/feed/1/delete', [], 'Delete');
+    $this->submitForm([], 'Delete');
 
     // Ensure that no errors are shown.
     $this->assertSession()->pageTextNotContains('The website encountered an unexpected error.');
diff --git a/tests/src/Functional/Feeds/Fetcher/HttpFetcherTest.php b/tests/src/Functional/Feeds/Fetcher/HttpFetcherTest.php
index 51b9765c..5ccb9c4e 100644
--- a/tests/src/Functional/Feeds/Fetcher/HttpFetcherTest.php
+++ b/tests/src/Functional/Feeds/Fetcher/HttpFetcherTest.php
@@ -37,7 +37,7 @@ class HttpFetcherTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Flush all caches to make table "cache_feeds_download" available.
@@ -116,7 +116,7 @@ class HttpFetcherTest extends FeedsBrowserTestBase {
 
     $this->drupalGet('feed/' . $feed->id());
     $this->clickLink(t('Import'));
-    $this->drupalPostForm(NULL, [], t('Import'));
+    $this->submitForm([], t('Import'));
     $this->assertSession()->pageTextContains('Created 6');
     $this->assertNodeCount(6);
 
@@ -149,14 +149,16 @@ class HttpFetcherTest extends FeedsBrowserTestBase {
       }
       $this->assertEquals($expected_terms[$nid], $terms);
     }
+    $this->drupalGet('feed/' . $feed->id() . '/import');
 
     // Test cache.
-    $this->drupalPostForm('feed/' . $feed->id() . '/import', [], t('Import'));
+    $this->submitForm([], t('Import'));
     $this->assertSession()->pageTextContains('The feed has not been updated.');
 
     // Import again.
     \Drupal::cache('feeds_download')->deleteAll();
-    $this->drupalPostForm('feed/' . $feed->id() . '/import', [], t('Import'));
+    $this->drupalGet('feed/' . $feed->id() . '/import');
+    $this->submitForm([], t('Import'));
     $this->assertSession()->pageTextContains('There are no new');
 
     // Test force-import.
@@ -166,13 +168,14 @@ class HttpFetcherTest extends FeedsBrowserTestBase {
     $configuration['update_existing'] = ProcessorInterface::UPDATE_EXISTING;
     $this->feedType->getProcessor()->setConfiguration($configuration);
     $this->feedType->save();
-    $this->drupalPostForm('feed/' . $feed->id() . '/import', [], t('Import'));
+    $this->drupalGet('feed/' . $feed->id() . '/import');
+    $this->submitForm([], t('Import'));
     $this->assertNodeCount(6);
     $this->assertSession()->pageTextContains('Updated 6');
 
     // Delete items.
     $this->clickLink(t('Delete items'));
-    $this->drupalPostForm(NULL, [], t('Delete items'));
+    $this->submitForm([], t('Delete items'));
     $this->assertNodeCount(0);
     $this->assertSession()->pageTextContains('Deleted 6');
   }
diff --git a/tests/src/Functional/Feeds/Fetcher/UploadFetcherTest.php b/tests/src/Functional/Feeds/Fetcher/UploadFetcherTest.php
index 31287774..410377f4 100644
--- a/tests/src/Functional/Feeds/Fetcher/UploadFetcherTest.php
+++ b/tests/src/Functional/Feeds/Fetcher/UploadFetcherTest.php
@@ -21,7 +21,7 @@ class UploadFetcherTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
@@ -42,7 +42,8 @@ class UploadFetcherTest extends FeedsBrowserTestBase {
       'title[0][value]' => $this->randomMachineName(),
       'files[plugin_fetcher_source]' => \Drupal::service('file_system')->realpath($this->resourcesPath() . '/rss/googlenewstz.rss2'),
     ];
-    $this->drupalPostForm('feed/add/' . $this->feedType->id(), $edit, t('Save and import'));
+    $this->drupalGet('feed/add/' . $this->feedType->id());
+    $this->submitForm($edit, t('Save and import'));
 
     // Load feed.
     $feed = Feed::load(1);
diff --git a/tests/src/Functional/Feeds/Parser/Form/CsvParserFeedFormTest.php b/tests/src/Functional/Feeds/Parser/Form/CsvParserFeedFormTest.php
index 7acf42dc..f6922a3f 100644
--- a/tests/src/Functional/Feeds/Parser/Form/CsvParserFeedFormTest.php
+++ b/tests/src/Functional/Feeds/Parser/Form/CsvParserFeedFormTest.php
@@ -21,7 +21,7 @@ class CsvParserFeedFormTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
@@ -52,7 +52,8 @@ class CsvParserFeedFormTest extends FeedsBrowserTestBase {
       'title[0][value]' => $this->randomMachineName(),
       'files[plugin_fetcher_source]' => \Drupal::service('file_system')->realpath($this->resourcesPath() . '/csv/nodes_comma.csv'),
     ];
-    $this->drupalPostForm('feed/add/' . $this->feedType->id(), $edit, t('Save and import'));
+    $this->drupalGet('feed/add/' . $this->feedType->id());
+    $this->submitForm($edit, t('Save and import'));
 
     // Load feed.
     $feed = Feed::load(1);
@@ -79,7 +80,8 @@ class CsvParserFeedFormTest extends FeedsBrowserTestBase {
       'files[plugin_fetcher_source]' => \Drupal::service('file_system')->realpath($this->resourcesPath() . '/csv/' . $csv_file),
       'plugin[parser][delimiter]' => $delimiter,
     ];
-    $this->drupalPostForm('feed/add/' . $this->feedType->id(), $edit, t('Save and import'));
+    $this->drupalGet('feed/add/' . $this->feedType->id());
+    $this->submitForm($edit, t('Save and import'));
 
     // Load feed.
     $feed = Feed::load(1);
diff --git a/tests/src/Functional/Feeds/Target/FileTest.php b/tests/src/Functional/Feeds/Target/FileTest.php
index e1f0bbd6..ed939d26 100644
--- a/tests/src/Functional/Feeds/Target/FileTest.php
+++ b/tests/src/Functional/Feeds/Target/FileTest.php
@@ -24,7 +24,7 @@ class FileTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create a file field.
diff --git a/tests/src/Functional/Feeds/Target/PasswordTest.php b/tests/src/Functional/Feeds/Target/PasswordTest.php
index 70fb9f02..9aab85cb 100644
--- a/tests/src/Functional/Feeds/Target/PasswordTest.php
+++ b/tests/src/Functional/Feeds/Target/PasswordTest.php
@@ -37,7 +37,7 @@ class PasswordTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create a feed type for importing users with passwords.
diff --git a/tests/src/Functional/FeedsBrowserTestBase.php b/tests/src/Functional/FeedsBrowserTestBase.php
index dc0026eb..77205caf 100644
--- a/tests/src/Functional/FeedsBrowserTestBase.php
+++ b/tests/src/Functional/FeedsBrowserTestBase.php
@@ -44,7 +44,7 @@ abstract class FeedsBrowserTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a content type.
diff --git a/tests/src/Functional/FeedsInstallTest.php b/tests/src/Functional/FeedsInstallTest.php
index 5111029e..a7a67f99 100644
--- a/tests/src/Functional/FeedsInstallTest.php
+++ b/tests/src/Functional/FeedsInstallTest.php
@@ -38,7 +38,7 @@ class FeedsInstallTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->moduleHandler = $this->container->get('module_handler');
     $this->moduleInstaller = $this->container->get('module_installer');
diff --git a/tests/src/Functional/FeedsUninstallTest.php b/tests/src/Functional/FeedsUninstallTest.php
index 3e8d284e..7e4f71ec 100644
--- a/tests/src/Functional/FeedsUninstallTest.php
+++ b/tests/src/Functional/FeedsUninstallTest.php
@@ -17,7 +17,7 @@ class FeedsUninstallTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Ensure that the queue table exists by making a fake queue item.
diff --git a/tests/src/Functional/FieldValidationTest.php b/tests/src/Functional/FieldValidationTest.php
index 6f4d54a8..84652862 100644
--- a/tests/src/Functional/FieldValidationTest.php
+++ b/tests/src/Functional/FieldValidationTest.php
@@ -132,9 +132,10 @@ class FieldValidationTest extends FeedsBrowserTestBase {
       'import my_feed_type feeds',
     ]);
     $this->drupalLogin($account);
+    $this->drupalGet('feed/1/import');
 
     // And import!
-    $this->drupalPostForm('feed/1/import', [], 'Import');
+    $this->submitForm([], 'Import');
 
     // Assert that 2 nodes have been created.
     $this->assertNodeCount(2);
diff --git a/tests/src/Functional/Form/MappingFormTest.php b/tests/src/Functional/Form/MappingFormTest.php
index 8b992f74..c4ed153f 100644
--- a/tests/src/Functional/Form/MappingFormTest.php
+++ b/tests/src/Functional/Form/MappingFormTest.php
@@ -36,7 +36,8 @@ class MappingFormTest extends FeedsBrowserTestBase {
     $edit = [
       'add_target' => 'status',
     ];
-    $this->drupalPostForm('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping', $edit, 'Save');
+    $this->drupalGet('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping');
+    $this->submitForm($edit, 'Save');
 
     // Now try to map to a new source called 'title'. This shouldn't be allowed
     // because that source name already exists on the feed type.
@@ -45,7 +46,7 @@ class MappingFormTest extends FeedsBrowserTestBase {
       'mappings[2][map][value][custom__csv][value]' => 'title',
       'mappings[2][map][value][custom__csv][machine_name]' => 'title',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Assert that the double source name is detected.
     $this->assertSession()->pageTextContains('The machine-readable name is already in use. It must be unique.');
@@ -214,8 +215,9 @@ class MappingFormTest extends FeedsBrowserTestBase {
     $edit = [
       'dummy' => 'dummyValue',
     ];
+    $this->drupalGet('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping');
 
-    $this->drupalPostForm('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping', $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Assert that the dummy value was saved for the parser.
     $feed_type = $this->reloadEntity($feed_type);
@@ -236,8 +238,9 @@ class MappingFormTest extends FeedsBrowserTestBase {
     $edit = [
       'dummy' => 'invalid',
     ];
+    $this->drupalGet('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping');
 
-    $this->drupalPostForm('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping', $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertSession()->responseContains('Invalid value.');
 
     // Assert that the dummy value was *not* saved for the parser.
@@ -259,13 +262,14 @@ class MappingFormTest extends FeedsBrowserTestBase {
     $edit = [
       'add_target' => 'nid',
     ];
-    $this->drupalPostForm('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping', $edit, 'Save');
+    $this->drupalGet('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping');
+    $this->submitForm($edit, 'Save');
 
     // Now untick "unique".
     $edit = [
       'mappings[2][unique][value]' => 0,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Assert that a message is being displayed.
     $this->assertSession()->pageTextContains('When mapping to the entity ID (ID), it is recommended to set it as unique.');
@@ -298,7 +302,7 @@ class MappingFormTest extends FeedsBrowserTestBase {
     $edit = [
       'remove_mappings[2]' => 1,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Reload the page to clear any warnings.
     $this->drupalGet('/admin/structure/feeds/manage/' . $feed_type->id() . '/mapping');
diff --git a/tests/src/Functional/Plugin/Action/DeleteFeedTest.php b/tests/src/Functional/Plugin/Action/DeleteFeedTest.php
index 1121ed9f..4d840a38 100644
--- a/tests/src/Functional/Plugin/Action/DeleteFeedTest.php
+++ b/tests/src/Functional/Plugin/Action/DeleteFeedTest.php
@@ -43,17 +43,17 @@ class DeleteFeedTest extends FeedsBrowserTestBase {
     // Select the first two feeds.
     $edit = [];
     for ($i = 0; $i < 2; $i++) {
-      $this->assertFieldById('edit-feeds-feed-bulk-form-' . $i);
+      $this->assertSession()->fieldValueEquals('edit-feeds-feed-bulk-form-' . $i, '');
       $edit["feeds_feed_bulk_form[$i]"] = TRUE;
     }
 
     // Delete the selected feeds.
     $edit += ['action' => 'feeds_feed_delete_action'];
-    $this->drupalPostForm(NULL, $edit, 'Apply to selected items');
+    $this->submitForm($edit, 'Apply to selected items');
 
     // Assert a confirmation page is shown.
     $this->assertSession()->pageTextContains('Are you sure you want to delete these items?');
-    $this->drupalPostForm(NULL, [], 'Delete');
+    $this->submitForm([], 'Delete');
 
     // Assert that feed 1 and feed 2 are deleted, but feed 3 is not.
     $this->assertNull(Feed::load(1));
diff --git a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemFormatterTestBase.php b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemFormatterTestBase.php
index a11f7157..a8550e41 100644
--- a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemFormatterTestBase.php
+++ b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemFormatterTestBase.php
@@ -26,7 +26,7 @@ abstract class FeedsItemFormatterTestBase extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create feeds_item field.
diff --git a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemGuidFormatterTest.php b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemGuidFormatterTest.php
index 79de6cbe..e71eff6d 100644
--- a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemGuidFormatterTest.php
+++ b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemGuidFormatterTest.php
@@ -12,7 +12,7 @@ class FeedsItemGuidFormatterTest extends FeedsItemFormatterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set display mode for feeds_item to feeds_item_guid on article content
diff --git a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemImportedFormatterTest.php b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemImportedFormatterTest.php
index d9eab44a..d2cb11b2 100644
--- a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemImportedFormatterTest.php
+++ b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemImportedFormatterTest.php
@@ -12,7 +12,7 @@ class FeedsItemImportedFormatterTest extends FeedsItemFormatterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set display mode for feeds_item to feeds_item_imported on article content
diff --git a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetEntityFormatterTest.php b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetEntityFormatterTest.php
index 22690e42..9f5e8a03 100644
--- a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetEntityFormatterTest.php
+++ b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetEntityFormatterTest.php
@@ -12,7 +12,7 @@ class FeedsItemTargetEntityFormatterTest extends FeedsItemFormatterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set display mode for feeds_item to feeds_item_target_entity_view on
diff --git a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetIdFormatterTest.php b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetIdFormatterTest.php
index a48d21ae..bba43629 100644
--- a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetIdFormatterTest.php
+++ b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetIdFormatterTest.php
@@ -12,7 +12,7 @@ class FeedsItemTargetIdFormatterTest extends FeedsItemFormatterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set display mode for feeds_item to feeds_item_target on article content
diff --git a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetLabelFormatterTest.php b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetLabelFormatterTest.php
index 19659b19..10c408d8 100644
--- a/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetLabelFormatterTest.php
+++ b/tests/src/Functional/Plugin/Field/FieldFormatter/FeedsItemTargetLabelFormatterTest.php
@@ -12,7 +12,7 @@ class FeedsItemTargetLabelFormatterTest extends FeedsItemFormatterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set display mode for feeds_item to feeds_item_target_label on article
diff --git a/tests/src/Functional/PrivateFileTest.php b/tests/src/Functional/PrivateFileTest.php
index 40c89886..be0219b2 100644
--- a/tests/src/Functional/PrivateFileTest.php
+++ b/tests/src/Functional/PrivateFileTest.php
@@ -31,7 +31,7 @@ class PrivateFileTest extends FileFieldTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // This test expects unused managed files to be marked as a temporary file.
diff --git a/tests/src/Functional/UpdateExistingTest.php b/tests/src/Functional/UpdateExistingTest.php
index 8317df8c..040ac077 100644
--- a/tests/src/Functional/UpdateExistingTest.php
+++ b/tests/src/Functional/UpdateExistingTest.php
@@ -22,7 +22,7 @@ class UpdateExistingTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
diff --git a/tests/src/Functional/UpdateNonExistentTest.php b/tests/src/Functional/UpdateNonExistentTest.php
index f47bf82d..41500904 100644
--- a/tests/src/Functional/UpdateNonExistentTest.php
+++ b/tests/src/Functional/UpdateNonExistentTest.php
@@ -25,7 +25,7 @@ class UpdateNonExistentTest extends FeedsBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
diff --git a/tests/src/FunctionalJavascript/Feeds/Parser/ParserTestBase.php b/tests/src/FunctionalJavascript/Feeds/Parser/ParserTestBase.php
index d9a5e9c3..94ccff72 100644
--- a/tests/src/FunctionalJavascript/Feeds/Parser/ParserTestBase.php
+++ b/tests/src/FunctionalJavascript/Feeds/Parser/ParserTestBase.php
@@ -26,7 +26,7 @@ abstract class ParserTestBase extends FeedsJavascriptTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
diff --git a/tests/src/FunctionalJavascript/FeedsJavascriptTestBase.php b/tests/src/FunctionalJavascript/FeedsJavascriptTestBase.php
index cefe5dbf..edfc01b9 100644
--- a/tests/src/FunctionalJavascript/FeedsJavascriptTestBase.php
+++ b/tests/src/FunctionalJavascript/FeedsJavascriptTestBase.php
@@ -46,7 +46,7 @@ abstract class FeedsJavascriptTestBase extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a content type.
diff --git a/tests/src/Kernel/Entity/FeedTest.php b/tests/src/Kernel/Entity/FeedTest.php
index 72b06dcf..05a27961 100644
--- a/tests/src/Kernel/Entity/FeedTest.php
+++ b/tests/src/Kernel/Entity/FeedTest.php
@@ -34,7 +34,7 @@ class FeedTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createFeedType([
diff --git a/tests/src/Kernel/Feeds/Fetcher/DirectoryFetcherTest.php b/tests/src/Kernel/Feeds/Fetcher/DirectoryFetcherTest.php
index ebf8159e..a8ed2355 100644
--- a/tests/src/Kernel/Feeds/Fetcher/DirectoryFetcherTest.php
+++ b/tests/src/Kernel/Feeds/Fetcher/DirectoryFetcherTest.php
@@ -20,7 +20,7 @@ class DirectoryFetcherTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
diff --git a/tests/src/Kernel/Feeds/Parser/CsvParserTest.php b/tests/src/Kernel/Feeds/Parser/CsvParserTest.php
index 0502f155..1a7f6da0 100644
--- a/tests/src/Kernel/Feeds/Parser/CsvParserTest.php
+++ b/tests/src/Kernel/Feeds/Parser/CsvParserTest.php
@@ -26,7 +26,7 @@ class CsvParserTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->setUpBodyField();
   }
diff --git a/tests/src/Kernel/Feeds/Processor/EntityProcessorBaseTest.php b/tests/src/Kernel/Feeds/Processor/EntityProcessorBaseTest.php
index 26688c8d..edf59489 100644
--- a/tests/src/Kernel/Feeds/Processor/EntityProcessorBaseTest.php
+++ b/tests/src/Kernel/Feeds/Processor/EntityProcessorBaseTest.php
@@ -55,7 +55,7 @@ class EntityProcessorBaseTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createMock(FeedTypeInterface::class);
diff --git a/tests/src/Kernel/Feeds/Processor/GenericContentEntityProcessorTest.php b/tests/src/Kernel/Feeds/Processor/GenericContentEntityProcessorTest.php
index 0b3fcd23..41867702 100644
--- a/tests/src/Kernel/Feeds/Processor/GenericContentEntityProcessorTest.php
+++ b/tests/src/Kernel/Feeds/Processor/GenericContentEntityProcessorTest.php
@@ -26,7 +26,7 @@ class GenericContentEntityProcessorTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig(['field', 'filter', 'node']);
   }
diff --git a/tests/src/Kernel/Feeds/Target/BookTest.php b/tests/src/Kernel/Feeds/Target/BookTest.php
index 6b3f8818..489b78fb 100644
--- a/tests/src/Kernel/Feeds/Target/BookTest.php
+++ b/tests/src/Kernel/Feeds/Target/BookTest.php
@@ -34,7 +34,7 @@ class BookTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->installSchema('book', 'book');
diff --git a/tests/src/Kernel/Feeds/Target/ConfigEntityReferenceTest.php b/tests/src/Kernel/Feeds/Target/ConfigEntityReferenceTest.php
index fbb3e1f8..f15685b6 100644
--- a/tests/src/Kernel/Feeds/Target/ConfigEntityReferenceTest.php
+++ b/tests/src/Kernel/Feeds/Target/ConfigEntityReferenceTest.php
@@ -33,7 +33,7 @@ class ConfigEntityReferenceTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create two config entities.
diff --git a/tests/src/Kernel/Feeds/Target/FieldTest.php b/tests/src/Kernel/Feeds/Target/FieldTest.php
index 0133422a..dec728a8 100644
--- a/tests/src/Kernel/Feeds/Target/FieldTest.php
+++ b/tests/src/Kernel/Feeds/Target/FieldTest.php
@@ -23,7 +23,7 @@ class FieldTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Add fields.
diff --git a/tests/src/Kernel/Feeds/Target/FileTestBase.php b/tests/src/Kernel/Feeds/Target/FileTestBase.php
index 926d4f8b..ccec2d31 100644
--- a/tests/src/Kernel/Feeds/Target/FileTestBase.php
+++ b/tests/src/Kernel/Feeds/Target/FileTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Kernel\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Entity\EntityStorageException;
 use Drupal\Core\Entity\EntityTypeInterface;
@@ -25,6 +26,7 @@ use Prophecy\Argument;
  */
 abstract class FileTestBase extends FeedsKernelTestBase {
 
+  use ProphecyTrait;
   use FeedsMockingTrait;
 
   /**
@@ -65,7 +67,7 @@ abstract class FileTestBase extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->setUpFileFields();
 
@@ -274,7 +276,7 @@ abstract class FileTestBase extends FeedsKernelTestBase {
   protected function writeData($data, $destination = NULL, $replace = FileSystemInterface::EXISTS_RENAME) {
     // @todo Remove file_save_data() when Drupal 9.2 is no longer supported.
     if (!\Drupal::hasService('file.repository')) {
-      return file_save_data($data, $destination, $replace);
+      return \Drupal::service('file.repository')->writeData($data, $destination, $replace);
     }
 
     if (empty($destination)) {
diff --git a/tests/src/Kernel/Feeds/Target/LanguageTest.php b/tests/src/Kernel/Feeds/Target/LanguageTest.php
index ea1c1d43..97be23b1 100644
--- a/tests/src/Kernel/Feeds/Target/LanguageTest.php
+++ b/tests/src/Kernel/Feeds/Target/LanguageTest.php
@@ -35,7 +35,7 @@ class LanguageTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $language = $this->container->get('entity_type.manager')->getStorage('configurable_language')->create([
diff --git a/tests/src/Kernel/Feeds/Target/LinkTest.php b/tests/src/Kernel/Feeds/Target/LinkTest.php
index ce7481c7..59ca1143 100644
--- a/tests/src/Kernel/Feeds/Target/LinkTest.php
+++ b/tests/src/Kernel/Feeds/Target/LinkTest.php
@@ -35,7 +35,7 @@ class LinkTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->createFieldWithStorage('field_link', [
diff --git a/tests/src/Kernel/Feeds/Target/PathTest.php b/tests/src/Kernel/Feeds/Target/PathTest.php
index b13e651c..bd349a7c 100644
--- a/tests/src/Kernel/Feeds/Target/PathTest.php
+++ b/tests/src/Kernel/Feeds/Target/PathTest.php
@@ -37,7 +37,7 @@ class PathTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Install config for path module.
diff --git a/tests/src/Kernel/Feeds/Target/TemporaryTest.php b/tests/src/Kernel/Feeds/Target/TemporaryTest.php
index 81c048be..fd708e84 100644
--- a/tests/src/Kernel/Feeds/Target/TemporaryTest.php
+++ b/tests/src/Kernel/Feeds/Target/TemporaryTest.php
@@ -20,7 +20,7 @@ class TemporaryTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create and configure feed type. Map once to the temporary target.
diff --git a/tests/src/Kernel/Feeds/Target/TimestampTest.php b/tests/src/Kernel/Feeds/Target/TimestampTest.php
index c50e4831..234ed379 100644
--- a/tests/src/Kernel/Feeds/Target/TimestampTest.php
+++ b/tests/src/Kernel/Feeds/Target/TimestampTest.php
@@ -21,7 +21,7 @@ class TimestampTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create feed type.
diff --git a/tests/src/Kernel/Feeds/Target/TranslationTest.php b/tests/src/Kernel/Feeds/Target/TranslationTest.php
index d586b719..b7c8077e 100644
--- a/tests/src/Kernel/Feeds/Target/TranslationTest.php
+++ b/tests/src/Kernel/Feeds/Target/TranslationTest.php
@@ -59,7 +59,7 @@ class TranslationTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Add languages.
diff --git a/tests/src/Kernel/Feeds/Target/UserRoleTest.php b/tests/src/Kernel/Feeds/Target/UserRoleTest.php
index d95020d5..5d822c2a 100644
--- a/tests/src/Kernel/Feeds/Target/UserRoleTest.php
+++ b/tests/src/Kernel/Feeds/Target/UserRoleTest.php
@@ -46,7 +46,7 @@ class UserRoleTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installEntitySchema('user');
diff --git a/tests/src/Kernel/FeedsItemTest.php b/tests/src/Kernel/FeedsItemTest.php
index 049fcef6..af1f6c6d 100644
--- a/tests/src/Kernel/FeedsItemTest.php
+++ b/tests/src/Kernel/FeedsItemTest.php
@@ -15,7 +15,7 @@ class FeedsItemTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->setUpBodyField();
   }
diff --git a/tests/src/Kernel/FeedsKernelTestBase.php b/tests/src/Kernel/FeedsKernelTestBase.php
index 5023bba5..32841c2e 100644
--- a/tests/src/Kernel/FeedsKernelTestBase.php
+++ b/tests/src/Kernel/FeedsKernelTestBase.php
@@ -33,7 +33,7 @@ abstract class FeedsKernelTestBase extends EntityKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Install database schemes.
diff --git a/tests/src/Kernel/MultiFeedTest.php b/tests/src/Kernel/MultiFeedTest.php
index 0cbb153a..f098b478 100644
--- a/tests/src/Kernel/MultiFeedTest.php
+++ b/tests/src/Kernel/MultiFeedTest.php
@@ -25,7 +25,7 @@ class MultiFeedTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set up an event dispatcher to check the number of created and/or updated
diff --git a/tests/src/Kernel/MultiMappingTest.php b/tests/src/Kernel/MultiMappingTest.php
index ec2c9ca2..6f124e9c 100644
--- a/tests/src/Kernel/MultiMappingTest.php
+++ b/tests/src/Kernel/MultiMappingTest.php
@@ -27,7 +27,7 @@ class MultiMappingTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig(['field', 'filter', 'node', 'datetime']);
diff --git a/tests/src/Kernel/SkipNewTest.php b/tests/src/Kernel/SkipNewTest.php
index 930a9614..18dad744 100644
--- a/tests/src/Kernel/SkipNewTest.php
+++ b/tests/src/Kernel/SkipNewTest.php
@@ -25,7 +25,7 @@ class SkipNewTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Setup an event dispatcher. We use this to check the number of created and
diff --git a/tests/src/Kernel/SourcePluginsTest.php b/tests/src/Kernel/SourcePluginsTest.php
index 082bbd8e..718ee1cf 100644
--- a/tests/src/Kernel/SourcePluginsTest.php
+++ b/tests/src/Kernel/SourcePluginsTest.php
@@ -34,7 +34,7 @@ class SourcePluginsTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->setUpBodyField();
 
diff --git a/tests/src/Kernel/UpdateNonExistentTest.php b/tests/src/Kernel/UpdateNonExistentTest.php
index d873efc0..dcb1b54f 100644
--- a/tests/src/Kernel/UpdateNonExistentTest.php
+++ b/tests/src/Kernel/UpdateNonExistentTest.php
@@ -26,7 +26,7 @@ class UpdateNonExistentTest extends FeedsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a feed type.
diff --git a/tests/src/Traits/FeedsCommonTrait.php b/tests/src/Traits/FeedsCommonTrait.php
index 6017eb6a..9885a9a0 100644
--- a/tests/src/Traits/FeedsCommonTrait.php
+++ b/tests/src/Traits/FeedsCommonTrait.php
@@ -214,7 +214,7 @@ trait FeedsCommonTrait {
   protected function getModulePath(string $module_name): string {
     // @todo Remove drupal_get_path() when Drupal 9.2 is no longer supported.
     if (!\Drupal::hasService('extension.list.module')) {
-      return drupal_get_path('module', $module_name);
+      return \Drupal::service('extension.list.module')->getPath($module_name);
     }
 
     return \Drupal::service('extension.list.module')->getPath($module_name);
diff --git a/tests/src/Unit/Controller/SubscriptionControllerTest.php b/tests/src/Unit/Controller/SubscriptionControllerTest.php
index e17cf73b..9ea8fea9 100644
--- a/tests/src/Unit/Controller/SubscriptionControllerTest.php
+++ b/tests/src/Unit/Controller/SubscriptionControllerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Controller;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\feeds\Controller\SubscriptionController;
 use Drupal\Tests\UnitTestCase;
@@ -15,6 +16,7 @@ use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
  */
 class SubscriptionControllerTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The controller under test.
    *
@@ -60,7 +62,7 @@ class SubscriptionControllerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $this->request = new Request();
     $this->request->query->set('hub_mode', 'subscribe');
     $this->request->query->set('hub_challenge', '1234');
diff --git a/tests/src/Unit/Element/UriTest.php b/tests/src/Unit/Element/UriTest.php
index d40b21c5..05fbf7c1 100644
--- a/tests/src/Unit/Element/UriTest.php
+++ b/tests/src/Unit/Element/UriTest.php
@@ -17,7 +17,7 @@ namespace Drupal\Tests\feeds\Unit\Element {
     /**
      * {@inheritdoc}
      */
-    public function setUp() {
+    public function setUp(): void {
       parent::setUp();
 
       // Set a stub for the string translation service.
diff --git a/tests/src/Unit/Entity/FeedTypeTest.php b/tests/src/Unit/Entity/FeedTypeTest.php
index 662f88ed..d04d5382 100644
--- a/tests/src/Unit/Entity/FeedTypeTest.php
+++ b/tests/src/Unit/Entity/FeedTypeTest.php
@@ -33,9 +33,7 @@ class FeedTypeTest extends FeedsUnitTestCase {
    */
   protected function getFeedTypeMock($feed_type_id, array $stubs = []) {
     // Plugin manager.
-    $pluginManager = $this->getMockBuilder(FeedsPluginManager::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $pluginManager = $this->createMock(FeedsPluginManager::class);
     $pluginManager->expects($this->any())
       ->method('getDefinitions')
       ->will($this->returnValue([]));
@@ -66,8 +64,7 @@ class FeedTypeTest extends FeedsUnitTestCase {
       ->getMock();
 
     // Parser.
-    $parser = $this->getMockBuilder(ParserInterface::class)
-      ->getMock();
+    $parser = $this->createMock(ParserInterface::class);
     $parser->expects($this->any())
       ->method('getMappingSources')
       ->will($this->returnValue([]));
@@ -86,7 +83,7 @@ class FeedTypeTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->getFeedTypeMock($this->randomMachineName());
diff --git a/tests/src/Unit/EntityFinderTest.php b/tests/src/Unit/EntityFinderTest.php
index c378306f..6bd0c424 100644
--- a/tests/src/Unit/EntityFinderTest.php
+++ b/tests/src/Unit/EntityFinderTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Entity\EntityRepositoryInterface;
 use Drupal\Core\Entity\EntityStorageInterface;
@@ -16,6 +17,7 @@ use Drupal\feeds\EntityFinder;
  */
 class EntityFinderTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The entity type manager prophecy used in the test.
    *
@@ -40,7 +42,7 @@ class EntityFinderTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Entity type manager.
diff --git a/tests/src/Unit/Event/EventDispatcherTraitTest.php b/tests/src/Unit/Event/EventDispatcherTraitTest.php
index 28128085..133288cd 100644
--- a/tests/src/Unit/Event/EventDispatcherTraitTest.php
+++ b/tests/src/Unit/Event/EventDispatcherTraitTest.php
@@ -2,9 +2,9 @@
 
 namespace Drupal\Tests\feeds\Unit\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Tests\feeds\Unit\FeedsUnitTestCase;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * @coversDefaultClass \Drupal\feeds\Event\EventDispatcherTrait
diff --git a/tests/src/Unit/EventSubscriber/AfterParseBaseTest.php b/tests/src/Unit/EventSubscriber/AfterParseBaseTest.php
index ee56921c..8de2305d 100644
--- a/tests/src/Unit/EventSubscriber/AfterParseBaseTest.php
+++ b/tests/src/Unit/EventSubscriber/AfterParseBaseTest.php
@@ -42,22 +42,17 @@ class AfterParseBaseTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create the event subscriber.
-    $this->subscriber = $this->getMockBuilder(AfterParseBase::class)
-      ->setMethods(['alterItem'])
-      ->getMock();
+    $this->subscriber = $this->createMock(AfterParseBase::class);
 
     // Create a parser result.
     $this->parserResult = new ParserResult();
 
     // Create the event that returns the parser result.
-    $this->event = $this->getMockBuilder(ParseEvent::class)
-      ->disableOriginalConstructor()
-      ->setMethods(['getParserResult'])
-      ->getMock();
+    $this->event = $this->createMock(ParseEvent::class);
     $this->event->expects($this->any())
       ->method('getParserResult')
       ->willReturn($this->parserResult);
@@ -135,9 +130,7 @@ class AfterParseBaseTest extends FeedsUnitTestCase {
    * @covers ::afterParse
    */
   public function testApplies() {
-    $subscriber = $this->getMockBuilder(AfterParseBase::class)
-      ->setMethods(['applies', 'alterItem'])
-      ->getMock();
+    $subscriber = $this->createMock(AfterParseBase::class);
 
     // Create a few items.
     for ($i = 1; $i <= 3; $i++) {
@@ -177,7 +170,7 @@ class AfterParseBaseTest extends FeedsUnitTestCase {
     $dispatcher->addSubscriber($this->subscriber);
 
     // Dispatch the event.
-    $dispatcher->dispatch(FeedsEvents::PARSE, $this->event);
+    $dispatcher->dispatch($this->event, FeedsEvents::PARSE);
   }
 
 }
diff --git a/tests/src/Unit/EventSubscriber/LazySubscriberTest.php b/tests/src/Unit/EventSubscriber/LazySubscriberTest.php
index 8c99f57d..43bac1b0 100644
--- a/tests/src/Unit/EventSubscriber/LazySubscriberTest.php
+++ b/tests/src/Unit/EventSubscriber/LazySubscriberTest.php
@@ -80,7 +80,7 @@ class LazySubscriberTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->dispatcher = new EventDispatcher();
@@ -152,18 +152,18 @@ class LazySubscriberTest extends FeedsUnitTestCase {
 
     // Fetch.
     $subscriber->onInitImport(new InitEvent($this->feed, 'fetch'), FeedsEvents::INIT_IMPORT, $this->dispatcher);
-    $fetch_event = $this->dispatcher->dispatch(FeedsEvents::FETCH, new FetchEvent($this->feed));
+    $fetch_event = $this->dispatcher->dispatch(new FetchEvent($this->feed), FeedsEvents::FETCH);
     $this->assertSame($fetcher_result, $fetch_event->getFetcherResult());
 
     // Parse.
     $subscriber->onInitImport(new InitEvent($this->feed, 'parse'), FeedsEvents::INIT_IMPORT, $this->dispatcher);
-    $parse_event = $this->dispatcher->dispatch(FeedsEvents::PARSE, new ParseEvent($this->feed, $fetcher_result));
+    $parse_event = $this->dispatcher->dispatch(new ParseEvent($this->feed, $fetcher_result), FeedsEvents::PARSE);
     $this->assertSame($parser_result, $parse_event->getParserResult());
 
     // Process.
     $subscriber->onInitImport(new InitEvent($this->feed, 'process'), FeedsEvents::INIT_IMPORT, $this->dispatcher);
     foreach ($parse_event->getParserResult() as $item) {
-      $this->dispatcher->dispatch(FeedsEvents::PROCESS, new ProcessEvent($this->feed, $item));
+      $this->dispatcher->dispatch(new ProcessEvent($this->feed, $item), FeedsEvents::PROCESS);
     }
 
     // Call again.
@@ -186,7 +186,7 @@ class LazySubscriberTest extends FeedsUnitTestCase {
     $subscriber = new LazySubscriber();
 
     $subscriber->onInitClear(new InitEvent($this->feed), FeedsEvents::INIT_CLEAR, $this->dispatcher);
-    $this->dispatcher->dispatch(FeedsEvents::CLEAR, new ClearEvent($this->feed));
+    $this->dispatcher->dispatch(new ClearEvent($this->feed), FeedsEvents::CLEAR);
 
     // Call again.
     $subscriber->onInitClear(new InitEvent($this->feed), FeedsEvents::INIT_CLEAR, $this->explodingDispatcher);
@@ -205,7 +205,7 @@ class LazySubscriberTest extends FeedsUnitTestCase {
 
     $subscriber = new LazySubscriber();
     $subscriber->onInitExpire(new InitEvent($this->feed), FeedsEvents::INIT_IMPORT, $this->dispatcher);
-    $this->dispatcher->dispatch(FeedsEvents::EXPIRE, new ExpireEvent($this->feed, 1234));
+    $this->dispatcher->dispatch(new ExpireEvent($this->feed, 1234), FeedsEvents::EXPIRE);
 
     // Call again.
     $subscriber->onInitExpire(new InitEvent($this->feed), FeedsEvents::INIT_IMPORT, $this->explodingDispatcher);
diff --git a/tests/src/Unit/FeedAccessControlHandlerTest.php b/tests/src/Unit/FeedAccessControlHandlerTest.php
index c7fc8b74..5c3a9198 100644
--- a/tests/src/Unit/FeedAccessControlHandlerTest.php
+++ b/tests/src/Unit/FeedAccessControlHandlerTest.php
@@ -35,7 +35,7 @@ class FeedAccessControlHandlerTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->entityType = $this->createMock('\Drupal\Core\Entity\EntityTypeInterface');
     $this->entityType->expects($this->once())
@@ -53,9 +53,7 @@ class FeedAccessControlHandlerTest extends FeedsUnitTestCase {
    * @covers ::access
    */
   public function testAccess() {
-    $feed = $this->getMockBuilder('\Drupal\feeds\FeedInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $feed = $this->createMock('\Drupal\feeds\FeedInterface');
     $feed->expects($this->any())
       ->method('bundle')
       ->will($this->returnValue('feed_bundle'));
diff --git a/tests/src/Unit/FeedClearHandlerTest.php b/tests/src/Unit/FeedClearHandlerTest.php
index 6256c50d..ff4884b9 100644
--- a/tests/src/Unit/FeedClearHandlerTest.php
+++ b/tests/src/Unit/FeedClearHandlerTest.php
@@ -38,7 +38,7 @@ class FeedClearHandlerTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->dispatcher = new EventDispatcher();
diff --git a/tests/src/Unit/FeedExpireHandlerTest.php b/tests/src/Unit/FeedExpireHandlerTest.php
index bc594602..108e369b 100644
--- a/tests/src/Unit/FeedExpireHandlerTest.php
+++ b/tests/src/Unit/FeedExpireHandlerTest.php
@@ -40,7 +40,7 @@ class FeedExpireHandlerTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->dispatcher = new EventDispatcher();
diff --git a/tests/src/Unit/FeedImportHandlerTest.php b/tests/src/Unit/FeedImportHandlerTest.php
index f298d2de..26bb9b86 100644
--- a/tests/src/Unit/FeedImportHandlerTest.php
+++ b/tests/src/Unit/FeedImportHandlerTest.php
@@ -38,7 +38,7 @@ class FeedImportHandlerTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->dispatcher = new EventDispatcher();
diff --git a/tests/src/Unit/FeedTypeAccessControlHandlerTest.php b/tests/src/Unit/FeedTypeAccessControlHandlerTest.php
index 53debea6..44bdb406 100644
--- a/tests/src/Unit/FeedTypeAccessControlHandlerTest.php
+++ b/tests/src/Unit/FeedTypeAccessControlHandlerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\Context\CacheContextsManager;
 use Drupal\Core\DependencyInjection\Container;
 use Drupal\Core\Entity\EntityTypeInterface;
@@ -15,10 +16,11 @@ use Drupal\feeds\FeedTypeInterface;
  */
 class FeedTypeAccessControlHandlerTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $cache_contexts_manager = $this->prophesize(CacheContextsManager::class);
diff --git a/tests/src/Unit/Feeds/Fetcher/DirectoryFetcherTest.php b/tests/src/Unit/Feeds/Fetcher/DirectoryFetcherTest.php
index 51e99b9b..a17c88ff 100644
--- a/tests/src/Unit/Feeds/Fetcher/DirectoryFetcherTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/DirectoryFetcherTest.php
@@ -39,7 +39,7 @@ class DirectoryFetcherTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $feed_type = $this->createMock('Drupal\feeds\FeedTypeInterface');
diff --git a/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFeedFormTest.php b/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFeedFormTest.php
index 5462d0cf..a8fec999 100644
--- a/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFeedFormTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFeedFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Fetcher\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Form\FormState;
 use Drupal\Tests\feeds\Unit\FeedsUnitTestCase;
 use Drupal\feeds\FeedInterface;
@@ -14,6 +15,7 @@ use Drupal\feeds\Plugin\Type\Fetcher\FetcherInterface;
  */
 class DirectoryFetcherFeedFormTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Tests the feed form.
    *
diff --git a/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFormTest.php b/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFormTest.php
index a42507bf..0a2b5335 100644
--- a/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFormTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/Form/DirectoryFetcherFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Fetcher\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Form\FormState;
 use Drupal\Tests\feeds\Unit\FeedsUnitTestCase;
@@ -14,6 +15,7 @@ use Drupal\feeds\Plugin\Type\FeedsPluginInterface;
  */
 class DirectoryFetcherFormTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Tests the configuration form.
    *
diff --git a/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFeedFormTest.php b/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFeedFormTest.php
index 521368a2..ffe20a8e 100644
--- a/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFeedFormTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFeedFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Fetcher\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Component\Uuid\UuidInterface;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -20,6 +21,7 @@ use Drupal\file\FileUsage\FileUsageInterface;
  */
 class UploadFetcherFeedFormTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Tests the feed form.
    *
diff --git a/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFormTest.php b/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFormTest.php
index fbdd45b0..586c3806 100644
--- a/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFormTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/Form/UploadFetcherFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Fetcher\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\File\FileSystemInterface;
 use Drupal\Core\Form\FormState;
@@ -17,6 +18,7 @@ use Drupal\feeds\Plugin\Type\FeedsPluginInterface;
  */
 class UploadFetcherFormTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Tests the configuration form.
    *
diff --git a/tests/src/Unit/Feeds/Fetcher/HttpFetcherTest.php b/tests/src/Unit/Feeds/Fetcher/HttpFetcherTest.php
index 3358b9ef..aa6027b2 100644
--- a/tests/src/Unit/Feeds/Fetcher/HttpFetcherTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/HttpFetcherTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Fetcher;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\CacheBackendInterface;
 use Drupal\Core\File\FileSystemInterface;
 use Drupal\Tests\feeds\Unit\FeedsUnitTestCase;
@@ -25,6 +26,7 @@ use RuntimeException;
  */
 class HttpFetcherTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The feed entity.
    *
@@ -49,7 +51,7 @@ class HttpFetcherTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $feed_type = $this->createMock(FeedTypeInterface::class);
diff --git a/tests/src/Unit/Feeds/Fetcher/UploadFetcherTest.php b/tests/src/Unit/Feeds/Fetcher/UploadFetcherTest.php
index 741e4490..a3e8eebe 100644
--- a/tests/src/Unit/Feeds/Fetcher/UploadFetcherTest.php
+++ b/tests/src/Unit/Feeds/Fetcher/UploadFetcherTest.php
@@ -42,7 +42,7 @@ class UploadFetcherTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->fileStorage = $this->createMock(EntityStorageInterface::class);
diff --git a/tests/src/Unit/Feeds/Item/BaseItemTest.php b/tests/src/Unit/Feeds/Item/BaseItemTest.php
index 6fec13fa..21ec5d39 100644
--- a/tests/src/Unit/Feeds/Item/BaseItemTest.php
+++ b/tests/src/Unit/Feeds/Item/BaseItemTest.php
@@ -13,7 +13,7 @@ class BaseItemTest extends ItemTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->item = $this->getMockForAbstractClass(BaseItem::class);
diff --git a/tests/src/Unit/Feeds/Item/DynamicItemTest.php b/tests/src/Unit/Feeds/Item/DynamicItemTest.php
index f89c1d04..7ac74e1c 100644
--- a/tests/src/Unit/Feeds/Item/DynamicItemTest.php
+++ b/tests/src/Unit/Feeds/Item/DynamicItemTest.php
@@ -13,7 +13,7 @@ class DynamicItemTest extends ItemTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->item = new DynamicItem();
diff --git a/tests/src/Unit/Feeds/Parser/CsvParserTest.php b/tests/src/Unit/Feeds/Parser/CsvParserTest.php
index 41331746..8e4499f9 100644
--- a/tests/src/Unit/Feeds/Parser/CsvParserTest.php
+++ b/tests/src/Unit/Feeds/Parser/CsvParserTest.php
@@ -48,7 +48,7 @@ class CsvParserTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createMock(FeedTypeInterface::class);
diff --git a/tests/src/Unit/Feeds/Parser/Form/CsvParserFeedFormTest.php b/tests/src/Unit/Feeds/Parser/Form/CsvParserFeedFormTest.php
index eae62342..30c128ba 100644
--- a/tests/src/Unit/Feeds/Parser/Form/CsvParserFeedFormTest.php
+++ b/tests/src/Unit/Feeds/Parser/Form/CsvParserFeedFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Parser\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Form\FormState;
 use Drupal\Tests\feeds\Unit\FeedsUnitTestCase;
 use Drupal\feeds\FeedInterface;
@@ -14,6 +15,7 @@ use Drupal\feeds\Plugin\Type\FeedsPluginInterface;
  */
 class CsvParserFeedFormTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Tests the feed form.
    *
diff --git a/tests/src/Unit/Feeds/Parser/Form/CsvParserFormTest.php b/tests/src/Unit/Feeds/Parser/Form/CsvParserFormTest.php
index 6070d464..99238191 100644
--- a/tests/src/Unit/Feeds/Parser/Form/CsvParserFormTest.php
+++ b/tests/src/Unit/Feeds/Parser/Form/CsvParserFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Parser\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Form\FormState;
 use Drupal\Tests\feeds\Unit\FeedsUnitTestCase;
 use Drupal\feeds\Feeds\Parser\Form\CsvParserForm;
@@ -13,6 +14,7 @@ use Drupal\feeds\Plugin\Type\FeedsPluginInterface;
  */
 class CsvParserFormTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * @covers ::buildConfigurationForm
    */
diff --git a/tests/src/Unit/Feeds/Parser/OpmlParserTest.php b/tests/src/Unit/Feeds/Parser/OpmlParserTest.php
index 06fd54e8..58fedb75 100644
--- a/tests/src/Unit/Feeds/Parser/OpmlParserTest.php
+++ b/tests/src/Unit/Feeds/Parser/OpmlParserTest.php
@@ -44,7 +44,7 @@ class OpmlParserTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createMock('Drupal\feeds\FeedTypeInterface');
diff --git a/tests/src/Unit/Feeds/Parser/SitemapParserTest.php b/tests/src/Unit/Feeds/Parser/SitemapParserTest.php
index 5fab213f..beb34044 100644
--- a/tests/src/Unit/Feeds/Parser/SitemapParserTest.php
+++ b/tests/src/Unit/Feeds/Parser/SitemapParserTest.php
@@ -45,7 +45,7 @@ class SitemapParserTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createMock('Drupal\feeds\FeedTypeInterface');
diff --git a/tests/src/Unit/Feeds/Parser/SyndicationParserTest.php b/tests/src/Unit/Feeds/Parser/SyndicationParserTest.php
index 80cc2c29..e09944fa 100644
--- a/tests/src/Unit/Feeds/Parser/SyndicationParserTest.php
+++ b/tests/src/Unit/Feeds/Parser/SyndicationParserTest.php
@@ -68,7 +68,7 @@ class SyndicationParserTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $container = new ContainerBuilder();
diff --git a/tests/src/Unit/Feeds/Target/BookTest.php b/tests/src/Unit/Feeds/Target/BookTest.php
index 2991bb6f..fe9617f9 100644
--- a/tests/src/Unit/Feeds/Target/BookTest.php
+++ b/tests/src/Unit/Feeds/Target/BookTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target {
 
+  use Prophecy\PhpUnit\ProphecyTrait;
   use Drupal\book\BookManagerInterface;
   use Drupal\Core\Database\Connection;
   use Drupal\Core\DependencyInjection\ContainerBuilder;
@@ -23,6 +24,7 @@ namespace Drupal\Tests\feeds\Unit\Feeds\Target {
    */
   class BookTest extends FeedsUnitTestCase {
 
+    use ProphecyTrait;
     /**
      * Database Service Object.
      *
diff --git a/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTest.php b/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTest.php
index 10183cdd..fddfcc9c 100644
--- a/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTest.php
+++ b/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Config\Entity\ConfigEntityInterface;
 use Drupal\Core\Config\Entity\ConfigEntityTypeInterface;
 use Drupal\feeds\Exception\ReferenceNotFoundException;
@@ -14,10 +15,11 @@ use Drupal\feeds\FeedTypeInterface;
  */
 class ConfigEntityReferenceTest extends ConfigEntityReferenceTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->buildContainer();
diff --git a/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTestBase.php b/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTestBase.php
index b8776233..eb108d66 100644
--- a/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTestBase.php
+++ b/tests/src/Unit/Feeds/Target/ConfigEntityReferenceTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Component\Transliteration\TransliterationInterface;
 use Drupal\Core\Config\TypedConfigManagerInterface;
 
@@ -11,6 +12,7 @@ use Drupal\Core\Config\TypedConfigManagerInterface;
  */
 abstract class ConfigEntityReferenceTestBase extends EntityReferenceTestBase {
 
+  use ProphecyTrait;
   /**
    * The transliteration manager.
    *
@@ -28,7 +30,7 @@ abstract class ConfigEntityReferenceTestBase extends EntityReferenceTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->transliteration = $this->prophesize(TransliterationInterface::class);
diff --git a/tests/src/Unit/Feeds/Target/DateRangeTest.php b/tests/src/Unit/Feeds/Target/DateRangeTest.php
index e69c99cc..32ebf0e8 100644
--- a/tests/src/Unit/Feeds/Target/DateRangeTest.php
+++ b/tests/src/Unit/Feeds/Target/DateRangeTest.php
@@ -28,7 +28,7 @@ class DateRangeTest extends FieldTargetWithContainerTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createMock('Drupal\feeds\FeedTypeInterface');
diff --git a/tests/src/Unit/Feeds/Target/DateTimeTest.php b/tests/src/Unit/Feeds/Target/DateTimeTest.php
index 67dc76f1..d1ea7e4a 100644
--- a/tests/src/Unit/Feeds/Target/DateTimeTest.php
+++ b/tests/src/Unit/Feeds/Target/DateTimeTest.php
@@ -29,7 +29,7 @@ class DateTimeTest extends FieldTargetWithContainerTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->feedType = $this->createMock('Drupal\feeds\FeedTypeInterface');
diff --git a/tests/src/Unit/Feeds/Target/EntityReferenceTest.php b/tests/src/Unit/Feeds/Target/EntityReferenceTest.php
index a5353e94..6afb45d0 100644
--- a/tests/src/Unit/Feeds/Target/EntityReferenceTest.php
+++ b/tests/src/Unit/Feeds/Target/EntityReferenceTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Entity\EntityTypeInterface;
@@ -17,6 +18,7 @@ use Drupal\feeds\FieldTargetDefinition;
  */
 class EntityReferenceTest extends EntityReferenceTestBase {
 
+  use ProphecyTrait;
   /**
    * Field manager used in the test.
    *
@@ -27,7 +29,7 @@ class EntityReferenceTest extends EntityReferenceTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->entityFieldManager = $this->prophesize(EntityFieldManagerInterface::class);
diff --git a/tests/src/Unit/Feeds/Target/EntityReferenceTestBase.php b/tests/src/Unit/Feeds/Target/EntityReferenceTestBase.php
index 24599458..3f3c717e 100644
--- a/tests/src/Unit/Feeds/Target/EntityReferenceTestBase.php
+++ b/tests/src/Unit/Feeds/Target/EntityReferenceTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Entity\EntityStorageInterface;
@@ -14,6 +15,7 @@ use Drupal\feeds\FieldTargetDefinition;
  */
 abstract class EntityReferenceTestBase extends FieldTargetTestBase {
 
+  use ProphecyTrait;
   /**
    * The entity type manager prophecy used in the test.
    *
@@ -38,7 +40,7 @@ abstract class EntityReferenceTestBase extends FieldTargetTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $referencable_entity_type_id = $this->getReferencableEntityTypeId();
diff --git a/tests/src/Unit/Feeds/Target/FieldTargetWithContainerTestBase.php b/tests/src/Unit/Feeds/Target/FieldTargetWithContainerTestBase.php
index 34c5e5a1..f13985f5 100644
--- a/tests/src/Unit/Feeds/Target/FieldTargetWithContainerTestBase.php
+++ b/tests/src/Unit/Feeds/Target/FieldTargetWithContainerTestBase.php
@@ -14,7 +14,7 @@ abstract class FieldTargetWithContainerTestBase extends FieldTargetTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $container = new ContainerBuilder();
diff --git a/tests/src/Unit/Feeds/Target/FileTest.php b/tests/src/Unit/Feeds/Target/FileTest.php
index 176112cd..f93eba91 100644
--- a/tests/src/Unit/Feeds/Target/FileTest.php
+++ b/tests/src/Unit/Feeds/Target/FileTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -18,6 +19,7 @@ use GuzzleHttp\ClientInterface;
  */
 class FileTest extends FieldTargetTestBase {
 
+  use ProphecyTrait;
   /**
    * The entity type manager prophecy used in the test.
    *
@@ -63,7 +65,7 @@ class FileTest extends FieldTargetTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->entityTypeManager = $this->prophesize(EntityTypeManagerInterface::class);
diff --git a/tests/src/Unit/Feeds/Target/PasswordTest.php b/tests/src/Unit/Feeds/Target/PasswordTest.php
index cfd7feec..dd2ca7dd 100644
--- a/tests/src/Unit/Feeds/Target/PasswordTest.php
+++ b/tests/src/Unit/Feeds/Target/PasswordTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Password\PasswordInterface;
 use Drupal\Core\Password\PhpassHashedPassword;
@@ -15,6 +16,7 @@ use Drupal\feeds\Feeds\Target\Password;
  */
 class PasswordTest extends FieldTargetTestBase {
 
+  use ProphecyTrait;
   /**
    * The password hash service.
    *
@@ -25,7 +27,7 @@ class PasswordTest extends FieldTargetTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $this->passwordHasher = $this->prophesize(PasswordInterface::class);
 
     $container = new ContainerBuilder();
diff --git a/tests/src/Unit/Feeds/Target/TextTest.php b/tests/src/Unit/Feeds/Target/TextTest.php
index 0492f62c..fd9b9bd7 100644
--- a/tests/src/Unit/Feeds/Target/TextTest.php
+++ b/tests/src/Unit/Feeds/Target/TextTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -17,6 +18,7 @@ use Drupal\filter\FilterFormatInterface;
  */
 class TextTest extends FieldTargetTestBase {
 
+  use ProphecyTrait;
   /**
    * The FeedsTarget plugin being tested.
    *
@@ -34,7 +36,7 @@ class TextTest extends FieldTargetTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->filter = $this->prophesize(FilterFormatInterface::class);
diff --git a/tests/src/Unit/Feeds/Target/UserRoleTest.php b/tests/src/Unit/Feeds/Target/UserRoleTest.php
index 9781f354..b7e1b92d 100644
--- a/tests/src/Unit/Feeds/Target/UserRoleTest.php
+++ b/tests/src/Unit/Feeds/Target/UserRoleTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Feeds\Target;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Config\Entity\ConfigEntityInterface;
 use Drupal\Core\Config\Entity\ConfigEntityTypeInterface;
 use Drupal\Core\Language\LanguageInterface;
@@ -19,10 +20,11 @@ use Drupal\user\RoleInterface;
  */
 class UserRoleTest extends ConfigEntityReferenceTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->transliteration->transliterate('Bar', LanguageInterface::LANGCODE_DEFAULT, '_')
diff --git a/tests/src/Unit/FeedsExecutableTest.php b/tests/src/Unit/FeedsExecutableTest.php
index 3bed95d8..726315d7 100644
--- a/tests/src/Unit/FeedsExecutableTest.php
+++ b/tests/src/Unit/FeedsExecutableTest.php
@@ -39,7 +39,7 @@ class FeedsExecutableTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $entity_type_manager = $this->createMock(EntityTypeManagerInterface::class);
diff --git a/tests/src/Unit/FeedsUnitTestCase.php b/tests/src/Unit/FeedsUnitTestCase.php
index 0ef44875..b2d683e9 100644
--- a/tests/src/Unit/FeedsUnitTestCase.php
+++ b/tests/src/Unit/FeedsUnitTestCase.php
@@ -19,7 +19,7 @@ abstract class FeedsUnitTestCase extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->defineConstants();
diff --git a/tests/src/Unit/FieldTargetDefinitionTest.php b/tests/src/Unit/FieldTargetDefinitionTest.php
index 4e484f8f..eccad4cc 100644
--- a/tests/src/Unit/FieldTargetDefinitionTest.php
+++ b/tests/src/Unit/FieldTargetDefinitionTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\feeds\FieldTargetDefinition;
 use Drupal\Core\Field\FieldDefinitionInterface;
 use Drupal\Core\TypedData\ComplexDataDefinitionInterface;
@@ -13,6 +14,7 @@ use Drupal\Core\TypedData\DataDefinitionInterface;
  */
 class FieldTargetDefinitionTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * A prophesized data definition for the field item.
    *
@@ -30,7 +32,7 @@ class FieldTargetDefinitionTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->itemDefinition = $this->prophesize(ComplexDataDefinitionInterface::class);
diff --git a/tests/src/Unit/Plugin/QueueWorker/FeedRefreshTest.php b/tests/src/Unit/Plugin/QueueWorker/FeedRefreshTest.php
index 9574c7c8..b23c6e96 100644
--- a/tests/src/Unit/Plugin/QueueWorker/FeedRefreshTest.php
+++ b/tests/src/Unit/Plugin/QueueWorker/FeedRefreshTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\feeds\Unit\Plugin\QueueWorker;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Database\Connection;
 use Drupal\Core\Database\StatementInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -29,6 +30,7 @@ use Symfony\Component\EventDispatcher\EventDispatcher;
  */
 class FeedRefreshTest extends FeedsUnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The event dispatcher.
    *
@@ -53,7 +55,7 @@ class FeedRefreshTest extends FeedsUnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->dispatcher = new EventDispatcher();
     $queue_factory = $this->createMock(QueueFactory::class, [], [], '', FALSE);
