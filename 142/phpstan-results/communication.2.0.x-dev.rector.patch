diff --git a/communication.api.php b/communication.api.php
index cb082e7..c0135cb 100644
--- a/communication.api.php
+++ b/communication.api.php
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\communication\Entity\CommunicationInterface;
 /**
  * Act before an operation.
  *
@@ -9,7 +10,7 @@
  * @param array $options
  * @param $operation
  */
-function hook_pre_communication_operation(\Drupal\communication\Entity\CommunicationInterface $communication, array $options, $operation) {
+function hook_pre_communication_operation(CommunicationInterface $communication, array $options, $operation) {
 
 }
 
@@ -19,6 +20,6 @@ function hook_pre_communication_operation(\Drupal\communication\Entity\Communica
  * @param \Drupal\communication\Entity\CommunicationInterface $communication
  * @param array $options
  */
-function hook_pre_communication_OPERATION_ID(\Drupal\communication\Entity\CommunicationInterface $communication, array $options) {
+function hook_pre_communication_OPERATION_ID(CommunicationInterface $communication, array $options) {
 
 }
diff --git a/contrib/postal/src/EventSubscriber/PostalCommunicationPreSendSubscriber.php b/contrib/postal/src/EventSubscriber/PostalCommunicationPreSendSubscriber.php
index 1a23664..5aa0709 100644
--- a/contrib/postal/src/EventSubscriber/PostalCommunicationPreSendSubscriber.php
+++ b/contrib/postal/src/EventSubscriber/PostalCommunicationPreSendSubscriber.php
@@ -2,13 +2,13 @@
 
 namespace Drupal\communication_postal\EventSubscriber;
 
+use Symfony\Component\Mime\MimeTypesInterface;
 use Drupal\communication\Event\CommunicationEvents;
 use Drupal\communication\Event\CommunicationOperationEvent;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\File\FileSystemInterface;
 use Drupal\pdf_tools\PDFGeneratorInterface;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface;
 
 class PostalCommunicationPreSendSubscriber implements EventSubscriberInterface {
 
@@ -23,7 +23,7 @@ class PostalCommunicationPreSendSubscriber implements EventSubscriberInterface {
   protected $entityTypeManager;
 
   /**
-   * @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface
+   * @var \Symfony\Component\Mime\MimeTypesInterface
    */
   protected $mimeTypeGuesser;
 
@@ -45,7 +45,7 @@ class PostalCommunicationPreSendSubscriber implements EventSubscriberInterface {
   public function __construct(
     PDFGeneratorInterface $pdf_generator,
     EntityTypeManagerInterface $entity_type_manager,
-    MimeTypeGuesserInterface $mime_type_guesser,
+    MimeTypesInterface $mime_type_guesser,
     FileSystemInterface $file_system
   ) {
     $this->pdfGenerator = $pdf_generator;
diff --git a/contrib/user/src/Plugin/ContactInfoSource/ProfileFieldSource.php b/contrib/user/src/Plugin/ContactInfoSource/ProfileFieldSource.php
index ab19dc6..e3ee0fd 100644
--- a/contrib/user/src/Plugin/ContactInfoSource/ProfileFieldSource.php
+++ b/contrib/user/src/Plugin/ContactInfoSource/ProfileFieldSource.php
@@ -175,7 +175,7 @@ class ProfileFieldSource extends ContactInfoSourceBase {
       $build = $profile->get($field_name)->view([
         'label' => 'hidden',
       ]);
-      return drupal_render($build);
+      return \Drupal::service('renderer')->render($build);
     }
 
     return '';
diff --git a/src/Event/CommunicationOperationEvent.php b/src/Event/CommunicationOperationEvent.php
index 071e1a4..d708a3c 100644
--- a/src/Event/CommunicationOperationEvent.php
+++ b/src/Event/CommunicationOperationEvent.php
@@ -2,8 +2,8 @@
 
 namespace Drupal\communication\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\communication\Entity\CommunicationInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * Class CommunicationOperationEvent
diff --git a/src/Plugin/Communication/Operation/OperationBase.php b/src/Plugin/Communication/Operation/OperationBase.php
index 5ded308..8c78822 100644
--- a/src/Plugin/Communication/Operation/OperationBase.php
+++ b/src/Plugin/Communication/Operation/OperationBase.php
@@ -97,7 +97,7 @@ abstract class OperationBase extends PluginBase implements OperationInterface, C
     $this->moduleHandler->invokeAll('pre_communication_'.$this->getPluginId(), [$communication, $options]);
 
     $event = new CommunicationOperationEvent($communication, $this->getPluginId(), $options);
-    $this->eventDispatcher->dispatch(CommunicationEvents::PRE_OPERATION, $event);
+    $this->eventDispatcher->dispatch($event, CommunicationEvents::PRE_OPERATION);
 
     $options = $event->getOptions();
   }
diff --git a/tests/src/Kernel/CommunicationAccessTest.php b/tests/src/Kernel/CommunicationAccessTest.php
index 0224d6b..6ba8bbf 100644
--- a/tests/src/Kernel/CommunicationAccessTest.php
+++ b/tests/src/Kernel/CommunicationAccessTest.php
@@ -25,7 +25,7 @@ class CommunicationAccessTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installSchema('system', ['sequences']);
