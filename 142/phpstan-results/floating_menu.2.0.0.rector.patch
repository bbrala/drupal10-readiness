diff --git a/floating_menu.info.yml b/floating_menu.info.yml
index e604950..28876af 100644
--- a/floating_menu.info.yml
+++ b/floating_menu.info.yml
@@ -2,8 +2,7 @@ name: 'Floating Menu'
 description: 'Show a floating menu on your site.'
 package: 'Site Navigation'
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:block
 
diff --git a/floating_menu.module b/floating_menu.module
index 73673a1..3e448da 100644
--- a/floating_menu.module
+++ b/floating_menu.module
@@ -26,7 +26,7 @@ function floating_menu_theme($existing, $type, $theme, $path) {
 function floating_menu_help($route_name, $route_match) {
   switch ($route_name) {
     case 'help.page.floating_menu':
-      $path = drupal_get_path('module', 'floating_menu');
+      $path = \Drupal::service('extension.list.module')->getPath('floating_menu');
       $output = file_get_contents($path . '/README.txt');
       $output = str_replace("\n", '<br>', $output);
       return $output;
diff --git a/src/Plugin/Block/FloatingMenuBlock.php b/src/Plugin/Block/FloatingMenuBlock.php
index 3cf2026..4faea8d 100644
--- a/src/Plugin/Block/FloatingMenuBlock.php
+++ b/src/Plugin/Block/FloatingMenuBlock.php
@@ -35,8 +35,8 @@ class FloatingMenuBlock extends BlockBase implements BlockPluginInterface {
       $untranslated_url = $config['menu_item'][$i]['menu_item_target_url'];
       if (!empty($untranslated_url) && substr($untranslated_url, 0, 1) == '/') {
         $langManager = \Drupal::service('language_manager');
-        $path = \Drupal::service('path.alias_manager')->getPathByAlias($untranslated_url, 'fi');
-        $translated_url = \Drupal::service('path.alias_manager')->getAliasByPath($path, $langManager->getCurrentLanguage()->getId());
+        $path = \Drupal::service('path_alias.manager')->getPathByAlias($untranslated_url, 'fi');
+        $translated_url = \Drupal::service('path_alias.manager')->getAliasByPath($path, $langManager->getCurrentLanguage()->getId());
         if ($langManager->getCurrentLanguage()->getId() != $langManager->getDefaultLanguage()->getId()) {
           $translated_url = '/' . $langManager->getCurrentLanguage()->getId() . $translated_url;
         }
@@ -134,7 +134,7 @@ class FloatingMenuBlock extends BlockBase implements BlockPluginInterface {
       if (!empty($file)) {
         $file->setPermanent();
         $file->save();
-        $image_url = file_create_url($file->getFileUri());
+        $image_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       }
       else {
         $image_url = NULL;
