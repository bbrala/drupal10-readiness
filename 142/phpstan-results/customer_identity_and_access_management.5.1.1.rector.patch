diff --git a/lr_ciam/customhttpclient.php b/lr_ciam/customhttpclient.php
index c7b693b..c903e90 100755
--- a/lr_ciam/customhttpclient.php
+++ b/lr_ciam/customhttpclient.php
@@ -94,7 +94,7 @@ class CustomHttpClient implements IHttpClientInterface {
       $logData['data'] = !empty($requestedData) ? json_encode($requestedData) : '';
       $logData['response'] = json_encode($response);
       $logData['response_type'] = ucfirst($response_type);
-      $logData['created_date'] = REQUEST_TIME;
+      $logData['created_date'] = \Drupal::time()->getRequestTime();
 
       if ($response_type != 'success') {
         \Drupal::logger('ciam')->error(serialize($logData));
diff --git a/lr_ciam/lr_ciam.module b/lr_ciam/lr_ciam.module
index 99acae7..a17963f 100755
--- a/lr_ciam/lr_ciam.module
+++ b/lr_ciam/lr_ciam.module
@@ -77,7 +77,7 @@ define('API_CONFIG_DOMAIN', 'https://config.lrcontent.com');
  * Implements hook_theme().
  */
 function lr_ciam_theme() {
-  $path = drupal_get_path('module', 'lr_ciam') . '/theme';
+  $path = \Drupal::service('extension.list.module')->getPath('lr_ciam') . '/theme';
   $theme = [
     'user_login_form' => [
       'template' => 'user_login_form',
@@ -209,7 +209,7 @@ function lr_ciam_theme() {
  */
 function template_preprocess_lr_ciam_linked(&$vars) {
   global $base_url;
-  $vars['image_url'] = $base_url . '/' . drupal_get_path('module', 'lr_ciam') . '/images';
+  $vars['image_url'] = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('lr_ciam') . '/images';
   $vars['callback'] = lr_ciam_get_callback_url();
 }
 
diff --git a/lr_ciam/src/CiamUserManager.php b/lr_ciam/src/CiamUserManager.php
index 7497a47..052164a 100755
--- a/lr_ciam/src/CiamUserManager.php
+++ b/lr_ciam/src/CiamUserManager.php
@@ -528,7 +528,7 @@ class CiamUserManager {
       $request = @file_get_contents($picture_url);
       if ($request) {
      //   $picture_file_data = file_save_data($request, $destination, FILE_EXISTS_REPLACE);
-        $picture_file_data = file_save_data($request, $destination, FileSystemInterface::EXISTS_REPLACE);
+        $picture_file_data = \Drupal::service('file.repository')->writeData($request, $destination, FileSystemInterface::EXISTS_REPLACE);
         $maxResolution = $picture_config->get('settings.max_resolution');
         $minResolution = $picture_config->get('settings.min_resolution');
         file_validate_image_resolution($picture_file_data, $maxResolution, $minResolution);
@@ -563,7 +563,7 @@ class CiamUserManager {
         }
         $data = $this->checkUserName($userprofile);
         // Set up the user fields.
-        $password = user_password(32);
+        $password = \Drupal::service('password_generator')->generate(32);
 
         $fields = [
           'name' => ($this->moduleconfig->get('ciam_save_name_in_db') == 'false') ? $userprofile->ID : $data['username'],
