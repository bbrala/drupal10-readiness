diff --git a/download_all_files.info.yml b/download_all_files.info.yml
index 2148689..69a1fb4 100644
--- a/download_all_files.info.yml
+++ b/download_all_files.info.yml
@@ -1,6 +1,5 @@
 name: Download All Files
 type: module
 description: This module will provide field formatter and block plugin for downloading all files associated with an entity.
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Files
diff --git a/src/Plugin/Field/FieldFormatter/DownloadAllFormatter.php b/src/Plugin/Field/FieldFormatter/DownloadAllFormatter.php
index 32778bc..7867da8 100644
--- a/src/Plugin/Field/FieldFormatter/DownloadAllFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/DownloadAllFormatter.php
@@ -174,7 +174,7 @@ class DownloadAllFormatter extends EntityReferenceFormatterBase {
     if ($files = $this->getEntitiesToView($items, $langcode)) {
       $rows = [];
       $module_name = $this->getPluginDefinition()['provider'];
-      $path = drupal_get_path('module', $module_name);
+      $path = \Drupal::service('extension.list.module')->getPath($module_name);
       $link = [
         '#type' => 'link',
         '#attributes' => ['class' => ['download-file-icon']],
@@ -189,7 +189,7 @@ class DownloadAllFormatter extends EntityReferenceFormatterBase {
         if (!empty($settings['simple_theme'])) {
           $file_name = $file->getFilename();
           $table_link = $link;
-          $table_link['#url'] = Url::fromUri(file_create_url($file->getFileUri()));
+          $table_link['#url'] = \Drupal::service('file_url_generator')->generate($file->getFileUri());
           $table_link['#attributes']['download'] = $file_name;
           $rows[] = [
             [
