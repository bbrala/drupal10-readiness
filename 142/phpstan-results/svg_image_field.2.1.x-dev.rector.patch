diff --git a/src/Plugin/Field/FieldFormatter/SvgImageFieldFormatter.php b/src/Plugin/Field/FieldFormatter/SvgImageFieldFormatter.php
index da0aebe..962590f 100644
--- a/src/Plugin/Field/FieldFormatter/SvgImageFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/SvgImageFieldFormatter.php
@@ -279,7 +279,7 @@ class SvgImageFieldFormatter extends FormatterBase implements ContainerFactoryPl
         // context to ensure different file URLs are generated for different
         // sites in a multisite setup, including HTTP and HTTPS versions of the
         // same site. Fix in https://www.drupal.org/node/2646744.
-        $url = Url::fromUri(file_create_url($uri));
+        $url = \Drupal::service('file_url_generator')->generate($uri);
         $cache_contexts[] = 'url.site';
       }
 
diff --git a/tests/src/Unit/FileValidationTest.php b/tests/src/Unit/FileValidationTest.php
index 9e3cb9c..95ef27f 100644
--- a/tests/src/Unit/FileValidationTest.php
+++ b/tests/src/Unit/FileValidationTest.php
@@ -36,7 +36,7 @@ class FileValidationTest extends FieldKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $this->testDataDirPath = dirname(__FILE__) . '/test_data';
     parent::setUp();
     $this->installEntitySchema('file');
