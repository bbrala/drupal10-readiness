modules/contrib/sir_trevor/sir_trevor.module
modules/contrib/sir_trevor/src/EventDispatchingDataProcessor.php
modules/contrib/sir_trevor/tests/src/Unit/IconsControllerTest.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/SirTrevorBlockMock.php
modules/contrib/sir_trevor/src/ComplexDataValueProcessingEvent.php
modules/contrib/sir_trevor/src/Controller/IconsController.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/SirTrevorMixinMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/SirTrevorPluginManagerMock.php
modules/contrib/sir_trevor/tests/src/Unit/LibraryInfoBuilderTest.php
modules/contrib/sir_trevor/src/Form/GlobalConfigForm.php
modules/contrib/sir_trevor/src/Controller/ImageStorage.php
modules/contrib/sir_trevor/src/IconSvgMerger.php
modules/contrib/sir_trevor/tests/src/Unit/Plugin/SirTrevorBlockPluginTest.php
modules/contrib/sir_trevor/tests/src/Unit/Plugin/SirTrevorPluginManagerTest.php
modules/contrib/sir_trevor/src/IconSvgMergerInterface.php
modules/contrib/sir_trevor/src/LibraryInfoBuilder.php
modules/contrib/sir_trevor/src/Plugin/Field/FieldFormatter/SirTrevor.php
modules/contrib/sir_trevor/src/Plugin/Field/FieldType/SirTrevor.php
modules/contrib/sir_trevor/src/Plugin/Field/FieldWidget/SirTrevor.php
modules/contrib/sir_trevor/tests/src/Unit/Plugin/TestDoubles/ModuleHandlerMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/ComplexDataValueProcessingEventSubscriberMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/ConfigFactoryDummy.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/ConfigFactoryMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/ConfigFactorySpy.php
modules/contrib/sir_trevor/src/Plugin/SirTrevorBlock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/ContainerSpy.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/EventDispatcherDummy.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/EventDispatcherMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/EventDispatcherSpy.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/FieldItemListDummy.php
modules/contrib/sir_trevor/src/Plugin/SirTrevorBlockPlugin.php
modules/contrib/sir_trevor/src/Plugin/SirTrevorMixin.php
modules/contrib/sir_trevor/src/Plugin/SirTrevorPlugin.php
modules/contrib/sir_trevor/src/Plugin/SirTrevorPluginManager.php
modules/contrib/sir_trevor/src/Plugin/SirTrevorPluginManagerInterface.php
modules/contrib/sir_trevor/tests/src/Unit/AnnotationAsserter.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/FieldItemListMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/IconSvgMergerMock.php
modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/ImmutableConfigMock.php
modules/contrib/sir_trevor/tests/src/Unit/FieldFormatter/EventDispatchingDataProcessorTest.php
modules/contrib/sir_trevor/tests/src/Unit/FieldFormatter/SirTrevorTest.php
modules/contrib/sir_trevor/tests/src/Unit/FieldType/SirTrevorTest.php
modules/contrib/sir_trevor/tests/src/Unit/FieldWidget/SirTrevorTest.php
modules/contrib/sir_trevor/tests/src/Unit/IconSvgMergerTest.php

17 files with changes
=====================

1) modules/contrib/sir_trevor/src/Controller/ImageStorage.php:26

    ---------- begin diff ----------
@@ @@
       $extension = $extensionGuesser->guess($mime);
       $filename = "public://contentbuilder/{$baseFileName}-{$id}.{$extension}";

-      $file = file_save_data($image, $filename);
+      $file = \Drupal::service('file.repository')->writeData($image, $filename);
       $images[$id] = $file;
     }
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/sir_trevor/src/ComplexDataValueProcessingEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\sir_trevor;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * Class ComplexDataValueProcessingEvent
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/sir_trevor/sir_trevor.module:18

    ---------- begin diff ----------
@@ @@
           'data' => [],
           'entity' => NULL,
         ],
-        'path' => drupal_get_path('module', $plugin->getDefiningModule()),
+        'path' => \Drupal::service('extension.list.module')->getPath($plugin->getDefiningModule()),
         'template' => $plugin->getTemplate(),
       ];
     }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


4) modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/EventDispatcherSpy.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\sir_trevor\Unit\TestDoubles;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * Class EventDispatcherSpy
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/EventDispatcherMock.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\sir_trevor\Unit\TestDoubles;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * Class EventDispatcherMock
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/sir_trevor/tests/src/Unit/TestDoubles/EventDispatcherDummy.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\sir_trevor\Unit\TestDoubles;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Symfony\Component\EventDispatcher\EventDispatcherInterface;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


7) modules/contrib/sir_trevor/tests/src/Unit/Plugin/SirTrevorPluginManagerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\sir_trevor\Tests\Unit\Plugin;

+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
+use Drupal\Component\Plugin\Exception\PluginException;
 use Drupal\Component\FileCache\FileCacheFactory;
 use Drupal\sir_trevor\Plugin\SirTrevorBlock;
 use Drupal\sir_trevor\Plugin\SirTrevorBlockPlugin;
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     FileCacheFactory::setPrefix('prefix');
     $this->moduleHandler = new ModuleHandlerMock();
     $directories = [
@@ @@

   /**
    * @test
-   * @expectedException \Drupal\Component\Plugin\Exception\PluginNotFoundException
-   * @expectedExceptionMessage The "unknown" plugin does not exist.
    */
   public function getUnknownDefinition() {
+    $this->expectException(PluginNotFoundException::class);
+    $this->expectExceptionMessage('The "unknown" plugin does not exist.');
     $this->getSut()->getDefinition('unknown');
   }

@@ @@

   /**
    * @test
-   * @expectedException \Drupal\Component\Plugin\Exception\PluginException
-   * @expectedExceptionMessage The "unknown" plugin does not exist.
    */
   public function createInstanceWithInvalidPlugin() {
+    $this->expectException(PluginException::class);
+    $this->expectExceptionMessage('The "unknown" plugin does not exist.');
     $this->getSut()->createInstance('unknown');
   }
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector (https://thephp.cc/news/2016/02/questioning-phpunit-best-practices)
 * ExplicitPhpErrorApiRector (https://github.com/sebastianbergmann/phpunit/blob/master/ChangeLog-9.0.md)
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/sir_trevor/tests/src/Unit/Plugin/SirTrevorBlockPluginTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\sir_trevor\Tests\Unit\Plugin;

+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
 use Drupal\sir_trevor\Plugin\SirTrevorBlock;
 use Drupal\Tests\UnitTestCase;

@@ @@

   /**
    * @test
-   * @expectedException \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @expectedExceptionMessage "some_id" must define "template".
    */
   public function definitionWithoutTemplate() {
+    $this->expectException(InvalidPluginDefinitionException::class);
+    $this->expectExceptionMessage('"some_id" must define "template".');
     new SirTrevorBlock($this->getDefinitionBase());
   }
 }
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector (https://thephp.cc/news/2016/02/questioning-phpunit-best-practices)
 * ExplicitPhpErrorApiRector (https://github.com/sebastianbergmann/phpunit/blob/master/ChangeLog-9.0.md)
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


9) modules/contrib/sir_trevor/tests/src/Unit/LibraryInfoBuilderTest.php:10

    ---------- begin diff ----------
@@ @@
 /**
  * @group SirTrevor
  */
-class LibraryInfoBuilderTest extends \PHPUnit_Framework_TestCase {
+class LibraryInfoBuilderTest extends \PHPUnit\Framework\TestCase {
   /** @var SirTrevorPluginManagerMock */
   private $blockPluginManager;
   /** @var LibraryInfoBuilder */
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


10) modules/contrib/sir_trevor/tests/src/Unit/IconsControllerTest.php:14

    ---------- begin diff ----------
@@ @@
  * @package Drupal\sir_trevor\Tests
  * @group SirTrevor
  */
-class IconsControllerTest extends \PHPUnit_Framework_TestCase {
+class IconsControllerTest extends \PHPUnit\Framework\TestCase {
   /** @var SirTrevorPluginManagerMock */
   private $blockPluginManager;
   /** @var IconSvgMergerMock */
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


11) modules/contrib/sir_trevor/tests/src/Unit/IconSvgMergerTest.php:9

    ---------- begin diff ----------
@@ @@
  * @package Drupal\sir_trevor\Tests
  * @group SirTrevor
  */
-class IconSvgMergerTest extends \PHPUnit_Framework_TestCase {
+class IconSvgMergerTest extends \PHPUnit\Framework\TestCase {
   /** @var Logger */
   protected $logger;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


12) modules/contrib/sir_trevor/tests/src/Unit/FieldWidget/SirTrevorTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->pluginManagerMock = new SirTrevorPluginManagerMock();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/sir_trevor/tests/src/Unit/FieldType/SirTrevorTest.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     \Drupal::setContainer(new Container());
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/sir_trevor/tests/src/Unit/FieldFormatter/SirTrevorTest.php:24

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     \Drupal::setContainer(new Container());
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/sir_trevor/tests/src/Unit/FieldFormatter/EventDispatchingDataProcessorTest.php:11

    ---------- begin diff ----------
@@ @@
  *
  * @package Drupal\sir_trevor\Tests\Unit\FieldFormatter
  */
-class EventDispatchingDataProcessorTest extends \PHPUnit_Framework_TestCase {
+class EventDispatchingDataProcessorTest extends \PHPUnit\Framework\TestCase {
   /** @var EventDispatcherSpy */
   private $dispatcher;
   /** @var EventDispatchingDataProcessor */
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


16) modules/contrib/sir_trevor/tests/src/Unit/AnnotationAsserter.php:18

    ---------- begin diff ----------
@@ @@
    */
   protected function assertClassAnnotationsMatch(array $expectedAnnotations, $classToTest) {
     $annotations = $this->getClassAnnotations($classToTest);
-    \PHPUnit_Framework_Assert::assertEquals($expectedAnnotations, $annotations);
+    \PHPUnit\Framework\Assert::assertEquals($expectedAnnotations, $annotations);
   }

   /**
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


17) modules/contrib/sir_trevor/src/EventDispatchingDataProcessor.php:72

    ---------- begin diff ----------
@@ @@
     $eventName = ComplexDataValueProcessingEvent::class;

     /** @var ComplexDataValueProcessingEvent $event */
-    $event = $this->eventDispatcher->dispatch($eventName, $event);
+    $event = $this->eventDispatcher->dispatch($event, $eventName);
     return $event;
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector


 [OK] 17 files have been changed by Rector                                      

