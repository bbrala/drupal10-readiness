modules/contrib/flysystem/flysystem.install
modules/contrib/flysystem/src/Flysystem/Adapter/DrupalCacheAdapter.php
modules/contrib/flysystem/tests/src/Kernel/CollectionOptimizerTest.php
modules/contrib/flysystem/tests/src/Unit/Plugin/FlysystemPluginManagerTest.php
modules/contrib/flysystem/flysystem.module
modules/contrib/flysystem/src/Annotation/Adapter.php
modules/contrib/flysystem/src/Asset/AssetDumper.php
modules/contrib/flysystem/tests/src/Unit/Plugin/FlysystemUrlTraitTest.php
modules/contrib/flysystem/tests/src/Unit/Plugin/ImageStyleGenerationTraitTest.php
modules/contrib/flysystem/src/Asset/CssCollectionOptimizer.php
modules/contrib/flysystem/src/Flysystem/Adapter/MissingAdapter.php
modules/contrib/flysystem/src/Flysystem/Ftp.php
modules/contrib/flysystem/src/Asset/CssOptimizer.php
modules/contrib/flysystem/src/Flysystem/Local.php
modules/contrib/flysystem/src/Asset/JsCollectionOptimizer.php
modules/contrib/flysystem/src/Asset/SchemeExtensionTrait.php
modules/contrib/flysystem/src/Event/EnsureEvent.php
modules/contrib/flysystem/tests/src/Unit/Routing/FlysystemRoutesTest.php
modules/contrib/flysystem/src/Event/FlysystemEvents.php
modules/contrib/flysystem/src/EventSubscriber/EnsureSubscriber.php
modules/contrib/flysystem/src/Flysystem/Adapter/CacheItem.php
modules/contrib/flysystem/src/Flysystem/Adapter/CacheItemBackend.php
modules/contrib/flysystem/src/Flysystem/Missing.php
modules/contrib/flysystem/src/FlysystemBridge.php
modules/contrib/flysystem/tests/src/Unit/SerializationStopperTraitTest.php
modules/contrib/flysystem/src/FlysystemFactory.php
modules/contrib/flysystem/tests/src/Unit/Asset/SchemeExtensionTraitTest.php
modules/contrib/flysystem/src/FlysystemServiceProvider.php
modules/contrib/flysystem/tests/src/Unit/Event/EnsureEventTest.php
modules/contrib/flysystem/tests/src/Unit/EventSubscriber/EnsureSubscriberTest.php
modules/contrib/flysystem/src/Form/ConfigForm.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/Adapter/CacheItemBackendTest.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/Adapter/CacheItemTest.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/Adapter/DrupalCacheAdapterTest.php
modules/contrib/flysystem/src/Logger/Convert.php
modules/contrib/flysystem/src/PathProcessor/FlysystemPathProcessor.php
modules/contrib/flysystem/src/PathProcessor/LocalPathProcessor.php
modules/contrib/flysystem/src/Plugin/FlysystemPluginInterface.php
modules/contrib/flysystem/src/Plugin/FlysystemPluginManager.php
modules/contrib/flysystem/src/Plugin/FlysystemUrlTrait.php
modules/contrib/flysystem/src/Plugin/ImageStyleGenerationTrait.php
modules/contrib/flysystem/src/Routing/FlysystemRoutes.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/Adapter/MissingAdapterTest.php
modules/contrib/flysystem/src/SerializationStopperTrait.php
modules/contrib/flysystem/tests/bootstrap.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/FtpTest.php
modules/contrib/flysystem/tests/src/Functional/ModuleInstallUninstallWebTest.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/LocalTest.php
modules/contrib/flysystem/tests/src/Unit/Flysystem/MissingTest.php
modules/contrib/flysystem/tests/src/Unit/FlysystemBridgeTest.php
modules/contrib/flysystem/tests/src/Unit/FlysystemFactoryTest.php
modules/contrib/flysystem/tests/src/Unit/FlysystemServiceProviderTest.php
modules/contrib/flysystem/tests/src/Unit/Form/ConfigFormTest.php
modules/contrib/flysystem/tests/src/Unit/InstallFunctionsTest.php
modules/contrib/flysystem/tests/src/Unit/Logger/ConvertTest.php
modules/contrib/flysystem/tests/src/Unit/ModuleFunctionsTest.php
modules/contrib/flysystem/tests/src/Unit/PathProcessor/FlysystemPathProcessorTest.php
modules/contrib/flysystem/tests/src/Unit/PathProcessor/LocalPathProcessorTest.php

20 files with changes
=====================

1) modules/contrib/flysystem/src/Event/EnsureEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\flysystem\Event;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * The event fired for every result from an ensure() call.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/flysystem/src/Asset/CssOptimizer.php:23

    ---------- begin diff ----------
@@ @@
     }

     // file_url_transform_relative() was removed here.
-    return 'url(' . file_create_url($path) . ')';
+    return 'url(' . \Drupal::service('file_url_generator')->generateAbsoluteString($path) . ')';
   }

 }
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/flysystem/tests/src/Unit/Routing/FlysystemRoutesTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\Routing;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Extension\ModuleHandlerInterface;
 use Drupal\Core\Site\Settings;
@@ @@
  */
 class FlysystemRoutesTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @var \Drupal\flysystem\FlysystemFactory
    */
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $container = new ContainerBuilder();

     $stream_wrapper = $this->prophesize(LocalStream::class);
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/flysystem/tests/src/Unit/Plugin/ImageStyleGenerationTraitTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\Plugin;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ @@
  */
 class ImageStyleGenerationTraitTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @covers ::generateImageStyle
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/flysystem/tests/src/Unit/Plugin/FlysystemUrlTraitTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\Plugin;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Routing\UrlGenerator;
 use Drupal\Tests\UnitTestCase;
@@ @@
  */
 class FlysystemUrlTraitTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @covers ::getExternalUrl
    * @covers ::getScheme
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/flysystem/src/FlysystemFactory.php:188

    ---------- begin diff ----------
@@ @@
           $error['context']
         );

-        $this->eventDispatcher->dispatch(FlysystemEvents::ENSURE, $event);
+        $this->eventDispatcher->dispatch($event, FlysystemEvents::ENSURE);

         $errors[$scheme][] = $error;
       }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector


7) modules/contrib/flysystem/tests/src/Unit/PathProcessor/LocalPathProcessorTest.php:20

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     new Settings(
       [
         'flysystem' => [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/flysystem/tests/src/Unit/ModuleFunctionsTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
+use Symfony\Component\Mime\MimeTypesInterface;
 use Drupal\Core\StreamWrapper\StreamWrapperManagerInterface;
 use Drupal\Tests\UnitTestCase;
 use Drupal\flysystem\FlysystemFactory;
 use Prophecy\Argument;
 use Symfony\Component\DependencyInjection\ContainerBuilder;
-use Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface;
 use org\bovigo\vfs\vfsStream;

 /**
@@ @@
  */
 class ModuleFunctionsTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The Flysystem factory prophecy object.
    *
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     vfsStream::setup('module_file');

@@ @@
       return $scheme;
     });

-    $guesser = $this->prophesize(MimeTypeGuesserInterface::class);
+    $guesser = $this->prophesize(MimeTypesInterface::class);
     $guesser->guess(Argument::type('string'))->willReturn('txt/flysystem');

     $container = new ContainerBuilder();
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/flysystem/tests/src/Unit/Logger/ConvertTest.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $consts = [
       'REQUIREMENT_INFO' => -1,
       'REQUIREMENT_OK' => 0,
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/flysystem/tests/src/Unit/InstallFunctionsTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Logger\RfcLogLevel;
 use Drupal\Core\Site\Settings;
 use Drupal\Tests\UnitTestCase;
@@ @@
  */
 class InstallFunctionsTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The Flysystem factory prophecy object.
    *
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     if (!defined('REQUIREMENT_ERROR')) {
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/flysystem/tests/src/Unit/Form/ConfigFormTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\Form {

+  use Prophecy\PhpUnit\ProphecyTrait;
+  use Drupal\Core\Messenger\MessengerInterface;
   use function Drupal\flysystem\Form\batch_set;
   use Drupal\Core\Form\FormState;
   use Drupal\Core\Logger\LoggerChannelFactoryInterface;
@@ @@
    */
   class ConfigFormTest extends UnitTestCase {

+    use ProphecyTrait;
     /**
      * The Flysystem factory prophecy.
      *
@@ @@
     /**
      * {@inheritdoc}
      */
-    public function setUp() {
+    public function setUp(): void {
       parent::setUp();

       $this->factory = $this->prophesize(FlysystemFactory::class);
@@ @@

       $this->form = new ConfigForm($this->factory->reveal());
       $this->form->setStringTranslation($this->getStringTranslationStub());
-      $messenger = $this->prophesize(\Drupal\Core\Messenger\MessengerInterface::class);
+      $messenger = $this->prophesize(MessengerInterface::class);

       $container = new ContainerBuilder();
       $container->set('string_translation', $this->getStringTranslationStub());
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/flysystem/tests/src/Unit/FlysystemServiceProviderTest.php:32

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     $this->container = new ContainerBuilder();
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/flysystem/tests/src/Unit/FlysystemFactoryTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Component\Plugin\PluginManagerInterface;
 use Drupal\Core\Cache\NullBackend;
 use Drupal\Core\File\FileSystemInterface as CoreFileSystemInterface;
@@ @@
  */
 class FlysystemFactoryTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @var \Drupal\Core\Cache\CacheBackendInterface
    */
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     $this->cache = new NullBackend('bin');
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/flysystem/tests/src/Unit/FlysystemBridgeTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\StreamWrapper\StreamWrapperInterface;
 use Drupal\Tests\UnitTestCase;
 use Drupal\flysystem\FlysystemBridge;
@@ @@
  */
 class FlysystemBridgeTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * @var \Drupal\flysystem\FlysystemBridge
    */
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->bridge = new FlysystemBridge();
     $this->bridge->setStringTranslation($this->getStringTranslationStub());
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/flysystem/tests/src/Unit/Flysystem/LocalTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\Flysystem;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Logger\RfcLogLevel;
 use Drupal\Core\Routing\UrlGeneratorInterface;
@@ @@
  */
 class LocalTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $GLOBALS['base_url'] = 'http://example.com';

@@ @@
   /**
    * {@inheritdoc}
    */
-  public function tearDown() {
+  public function tearDown(): void {
     (new LocalAdapter('foo'))->deleteDir('');
     @rmdir('foo');
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/flysystem/tests/src/Unit/Flysystem/FtpTest.php:16

    ---------- begin diff ----------
@@ @@
     /**
      * {@inheritdoc}
      */
-    public function setUp() {
+    public function setUp(): void {
       parent::setUp();
       if (!defined('FTP_BINARY')) {
         $this->markTestSkipped('The FTP_BINARY constant is not defined.');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/flysystem/tests/src/Unit/Flysystem/Adapter/DrupalCacheAdapterTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\Flysystem\Adapter;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\MemoryBackend;
 use Drupal\Tests\UnitTestCase;
 use Drupal\flysystem\Flysystem\Adapter\CacheItemBackend;
@@ @@
    * @var string
    */
   const FILE = 'test.txt';
+  use ProphecyTrait;

   /**
    * The wrapped Flysytem adaper.
    *
-   * @var \League\Flysystem\AdapterInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var \League\Flysystem\AdapterInterface|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $adapter;

@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setup() {
+  public function setup(): void {
     $this->cacheItemBackend = new CacheItemBackend(static::SCHEME, new MemoryBackend('foo'));
     $this->adapter = $this->prophesize(AdapterInterface::class);
     $this->cacheAdapter = new DrupalCacheAdapter(static::SCHEME, $this->adapter->reveal(), $this->cacheItemBackend);
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


18) modules/contrib/flysystem/tests/src/Unit/Flysystem/Adapter/CacheItemBackendTest.php:31

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setup() {
+  public function setup(): void {
     $this->cacheBackend = new MemoryBackend('foo');
     $this->cacheItemBackend = new CacheItemBackend('test-scheme', $this->cacheBackend);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


19) modules/contrib/flysystem/tests/src/Unit/EventSubscriber/EnsureSubscriberTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Unit\EventSubscriber;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 use Drupal\flysystem\EventSubscriber\EnsureSubscriber;
 use Drupal\flysystem\Event\EnsureEvent;
@@ @@
  */
 class EnsureSubscriberTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * Tests that the event subscriber logs ensure() calls.
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


20) modules/contrib/flysystem/tests/src/Kernel/CollectionOptimizerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flysystem\Kernel;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Asset\AssetCollectionGrouperInterface;
 use Drupal\Core\Asset\CssOptimizer;
 use Drupal\Core\Asset\JsOptimizer;
@@ @@
  */
 class CollectionOptimizerTest extends KernelTestBase {

+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->cleanUp();
   }
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function tearDown() {
+  public function tearDown(): void {
     $this->cleanUp();
     parent::tearDown();
   }
@@ @@

     foreach ($this->jsFilesUnderTest() as $js_file => $expired) {
       if ($expired === TRUE) {
-        $this->assertFileNotExists($js_file);
+        $this->assertFileDoesNotExist($js_file);
         continue;
       }
       $this->assertFileExists($js_file);
@@ @@

     foreach ($this->cssFilesUnderTest() as $css_file => $expired) {
       if ($expired === TRUE) {
-        $this->assertFileNotExists($css_file);
+        $this->assertFileDoesNotExist($css_file);
         continue;
       }
       $this->assertFileExists($css_file);
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * RenameMethodRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 20 files have been changed by Rector                                      

