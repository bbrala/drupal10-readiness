diff --git a/particles_orange.theme b/particles_orange.theme
index eb13090..36cb254 100644
--- a/particles_orange.theme
+++ b/particles_orange.theme
@@ -31,12 +31,12 @@ function particles_orange_preprocess_page(&$variables) {
   //image
   $fid = theme_get_setting("banner_image", "particles_orange");
   if (!empty($fid)) {
-    $file = \Drupal\file\Entity\File::load($fid[0]);
+    $file = File::load($fid[0]);
     $uri = $file->getFileUri();
-    $image_path = file_create_url($uri);
+    $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
   else {
-    $image_path = drupal_get_path('theme', 'particles_orange') . '/assets/images/background.jpg';
+    $image_path = \Drupal::service('extension.list.theme')->getPath('particles_orange') . '/assets/images/background.jpg';
   }
   $variables['banner_image'] = $image_path;
 
diff --git a/theme-settings.php b/theme-settings.php
index cee5626..585f9d1 100644
--- a/theme-settings.php
+++ b/theme-settings.php
@@ -12,7 +12,7 @@ use Drupal\Core\Form\FormStateInterface;
  * Implements hook_form_system_theme_settings_alter().
  */
 
-function particles_orange_form_system_theme_settings_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
+function particles_orange_form_system_theme_settings_alter(&$form, FormStateInterface $form_state) {
   $form['particles_orange_settings'] = [
     '#type' => 'fieldset',
     '#title' => t('Particles Responsive Settings'),
@@ -72,7 +72,7 @@ function particles_orange_form_system_theme_settings_alter(&$form, \Drupal\Core\
   ];
   $form['#submit'][] = 'particles_orange_settings_form_submit';
   $theme = \Drupal::theme()->getActiveTheme()->getName();
-  $theme_file = drupal_get_path('theme', $theme) . '/theme-settings.php';
+  $theme_file = \Drupal::service('extension.list.theme')->getPath($theme) . '/theme-settings.php';
   $build_info = $form_state->getBuildInfo();
   if (!in_array($theme_file, $build_info['files'])) {
     $build_info['files'][] = $theme_file;
@@ -156,13 +156,13 @@ function particles_orange_form_system_theme_settings_alter(&$form, \Drupal\Core\
   ];
 }
 
-function particles_orange_settings_form_submit(&$form, \Drupal\Core\Form\FormStateInterface $form_state) {
+function particles_orange_settings_form_submit(&$form, FormStateInterface $form_state) {
   $account = \Drupal::currentUser();
   $values = $form_state->getValues();
   for ($i = 1; $i <= 3; $i++) {
     if (isset($values["banner{$i}_image"]) && !empty($values["banner{$i}_image"])) {
       // Load the file via file.fid.
-      if ($file = \Drupal\file\Entity\File::load($values["banner{$i}_image"][0])) {
+      if ($file = File::load($values["banner{$i}_image"][0])) {
         // Change status to permanent.
         $file->setPermanent();
         $file->save();
