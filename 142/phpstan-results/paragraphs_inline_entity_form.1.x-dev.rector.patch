diff --git a/modules/paragraphs_inline_entity_form_example/paragraphs_inline_entity_form_example.install b/modules/paragraphs_inline_entity_form_example/paragraphs_inline_entity_form_example.install
index 7865755..860caaa 100644
--- a/modules/paragraphs_inline_entity_form_example/paragraphs_inline_entity_form_example.install
+++ b/modules/paragraphs_inline_entity_form_example/paragraphs_inline_entity_form_example.install
@@ -26,9 +26,9 @@ function paragraphs_inline_entity_form_example_install() {
   // Create and set icons.
   foreach ($embed_types as $type) {
     $filename = $type . '_thumb.jpg';
-    $icon = drupal_get_path('module', 'paragraphs_inline_entity_form_example') . '/images/' . $filename;
+    $icon = \Drupal::service('extension.list.module')->getPath('paragraphs_inline_entity_form_example') . '/images/' . $filename;
     $data = file_get_contents($icon);
-    if ($file = file_save_data($data, 'public://' . $filename, FileSystemInterface::EXISTS_REPLACE)) {
+    if ($file = \Drupal::service('file.repository')->writeData($data, 'public://' . $filename, FileSystemInterface::EXISTS_REPLACE)) {
       $paragraphs_type = 'paragraphs_ief_' . $type;
       if ($paragraphs_type_entity = ParagraphsType::load($paragraphs_type)) {
         $paragraphs_type_entity->set('icon_uuid', $file->uuid());
diff --git a/paragraphs_inline_entity_form.install b/paragraphs_inline_entity_form.install
index 38465c4..245f4a4 100644
--- a/paragraphs_inline_entity_form.install
+++ b/paragraphs_inline_entity_form.install
@@ -11,9 +11,9 @@ use Drupal\Core\File\FileSystemInterface;
  */
 function paragraphs_inline_entity_form_install() {
   // Set the default icon.
-  $icon = drupal_get_path('module', 'paragraphs_inline_entity_form') . '/images/paragraph_icon.png';
+  $icon = \Drupal::service('extension.list.module')->getPath('paragraphs_inline_entity_form') . '/images/paragraph_icon.png';
   $data = file_get_contents($icon);
-  if ($file = file_save_data($data, 'public://paragraph_icon.png', FileSystemInterface::EXISTS_REPLACE)) {
+  if ($file = \Drupal::service('file.repository')->writeData($data, 'public://paragraph_icon.png', FileSystemInterface::EXISTS_REPLACE)) {
     if ($embed_button = EmbedButton::load('paragraphs_inline_entity_form')) {
       $embed_button->set('icon_uuid', $file->uuid());
       $embed_button->save();
diff --git a/src/Plugin/EntityBrowser/Widget/ParagraphEntityForm.php b/src/Plugin/EntityBrowser/Widget/ParagraphEntityForm.php
index b17ae0a..ea761b7 100644
--- a/src/Plugin/EntityBrowser/Widget/ParagraphEntityForm.php
+++ b/src/Plugin/EntityBrowser/Widget/ParagraphEntityForm.php
@@ -119,7 +119,7 @@ class ParagraphEntityForm extends EntityForm {
     $allowed_bundles = $embed_button->getTypeSetting('bundles');
     $bundles = $this->getAllowedBundles($allowed_bundles);
     $paragraphs_type_storage = $this->entityTypeManager->getStorage('paragraphs_type');
-    $default_icon = drupal_get_path('module', 'paragraphs_inline_entity_form') . '/images/paragraph_thumb.png';
+    $default_icon = \Drupal::service('extension.list.module')->getPath('paragraphs_inline_entity_form') . '/images/paragraph_thumb.png';
     foreach ($bundles as $bundle => $label) {
       $icon_url = $default_icon;
       if ($paragraphs_type_storage->load($bundle)->getIconFile()) {
diff --git a/tests/src/Functional/ParagraphsIEFTests.php b/tests/src/Functional/ParagraphsIEFTests.php
index 4a8367f..103b911 100644
--- a/tests/src/Functional/ParagraphsIEFTests.php
+++ b/tests/src/Functional/ParagraphsIEFTests.php
@@ -44,7 +44,7 @@ class ParagraphsIEFTests extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create admin user.
