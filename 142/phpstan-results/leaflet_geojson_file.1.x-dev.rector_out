modules/contrib/leaflet_geojson_file/leaflet_geojson_file.module
modules/contrib/leaflet_geojson_file/src/LeafletGeoJsonService.php
modules/contrib/leaflet_geojson_file/src/Plugin/Field/FieldFormatter/LeafletGeoJsonFormatter.php
modules/contrib/leaflet_geojson_file/src/Plugin/Field/FieldWidget/LeafletGeoJsonWidget.php
modules/contrib/leaflet_geojson_file/src/Plugin/search_api/data_type/RptJTSDataType.php
modules/contrib/leaflet_geojson_file/src/Plugin/search_api/data_type/RptJsonDataType.php
modules/contrib/leaflet_geojson_file/src/Plugin/search_api/processor/GeoJson.php

3 files with changes
====================

1) modules/contrib/leaflet_geojson_file/src/Plugin/Field/FieldWidget/LeafletGeoJsonWidget.php:225

    ---------- begin diff ----------
@@ @@
         $fid = $value['fids']['0'];
         /** @var \Drupal\file\Entity\File $file */
         $file = File::load($fid);
-        file_save_data($data, $file->getFileUri(), FileSystemInterface::EXISTS_REPLACE);
+        \Drupal::service('file.repository')->writeData($data, $file->getFileUri(), FileSystemInterface::EXISTS_REPLACE);
       }
       else {
         if ($form_state->getFormObject() instanceof EntityFormInterface) {
@@ @@
           $destination = $stream_wrapper->getUri() . $directory . '/' . $entity->uuid() . '-' . $field_name . '.json';
           $dirname = $file_system->dirname($destination);
           $file_system->prepareDirectory($dirname, FileSystemInterface::CREATE_DIRECTORY);
-          $file = file_save_data($value['geojson_input'], $destination, FileSystemInterface::EXISTS_REPLACE);
+          $file = \Drupal::service('file.repository')->writeData($value['geojson_input'], $destination, FileSystemInterface::EXISTS_REPLACE);
           if ($file) {
             $values['fids'][] = $file->id();
             NestedArray::setValue($form_state->getValues(), $element['#parents'], $values);
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/leaflet_geojson_file/src/LeafletGeoJsonService.php:67

    ---------- begin diff ----------
@@ @@
       /** @var \Drupal\Core\Url $file_uri */
       $file_uri = Url::fromUri($file->url());
       $file_uri->setOption('query', ['v' => $entity->getRevisionId()]);
-      return file_url_transform_relative($file_uri->toUriString());
+      return \Drupal::service('file_url_generator')->transformRelative($file_uri->toUriString());

     }
   }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/leaflet_geojson_file/leaflet_geojson_file.module:57

    ---------- begin diff ----------
@@ @@
           $file_system = \Drupal::service('file_system');

           $destination = str_replace($entity->uuid(), $entity->id(), $file->getFileUri());
-          $file_new = file_move($file, $destination, FileSystemInterface::EXISTS_REPLACE);
+          $file_new = \Drupal::service('file.repository')->move($file, $destination, FileSystemInterface::EXISTS_REPLACE);
           $name = $file_system->basename($destination);
           $file_new->setFilename($name);
           $file_new->save();
    ----------- end diff -----------

Applied rules:
 * FileMoveRector
 * ArgumentRemoverRector


 [OK] 3 files have been changed by Rector                                       

