diff --git a/media_thumbnail_url_formatter.info.yml b/media_thumbnail_url_formatter.info.yml
index 252b19b..c7cc751 100644
--- a/media_thumbnail_url_formatter.info.yml
+++ b/media_thumbnail_url_formatter.info.yml
@@ -1,8 +1,7 @@
 name: Media thumbnail URL formatter
 description: Provides a field formatter for media reference field
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 dependencies:
   - media
diff --git a/src/Plugin/Field/FieldFormatter/MediaThumbnailURLFormatter.php b/src/Plugin/Field/FieldFormatter/MediaThumbnailURLFormatter.php
index 6ec382f..28d0607 100644
--- a/src/Plugin/Field/FieldFormatter/MediaThumbnailURLFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/MediaThumbnailURLFormatter.php
@@ -54,8 +54,8 @@ class MediaThumbnailURLFormatter extends MediaThumbnailFormatter {
     /** @var \Drupal\media\MediaInterface[] $media_items */
     foreach ($media_items as $delta => $media) {
       $thumbnailUri = $media->get('thumbnail')->entity->getFileUri();
-      $url = $image_style ? $image_style->buildUrl($thumbnailUri) : file_create_url($thumbnailUri);
-      $url = file_url_transform_relative($url);
+      $url = $image_style ? $image_style->buildUrl($thumbnailUri) : \Drupal::service('file_url_generator')->generateAbsoluteString($thumbnailUri);
+      $url = \Drupal::service('file_url_generator')->transformRelative($url);
       $elements[$delta] = [
         '#markup' => $url,
       ];
