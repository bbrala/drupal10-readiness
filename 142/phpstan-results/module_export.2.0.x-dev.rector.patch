diff --git a/module_export.info.yml b/module_export.info.yml
index 086e541..e2cd112 100644
--- a/module_export.info.yml
+++ b/module_export.info.yml
@@ -1,11 +1,10 @@
 name: Module Export
 description: Export and Enable the same modules you have enabled or installed on this Drupal installation to another Drupal installation.
 type: module
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Development
 
 # Information added by Drupal.org packaging script on 2017-06-13
 version: '8.x-1.0'
-core: '8.x'
 project: 'module_export'
 datestamp: 1497365356
diff --git a/src/Form/SettingsForm.php b/src/Form/SettingsForm.php
index f12f52e..b8e0be7 100644
--- a/src/Form/SettingsForm.php
+++ b/src/Form/SettingsForm.php
@@ -195,7 +195,7 @@ class SettingsForm extends ConfigFormBase {
       foreach ($modules_info as $module) {
         $parent_module = [];
         // Parse module info yml file.
-        $module_path = drupal_get_path('module', $module['filename']) . "/" . $module['filename'] . ".info.yml";
+        $module_path = \Drupal::service('extension.list.module')->getPath($module['filename']) . "/" . $module['filename'] . ".info.yml";
         $info_file = Yaml::decode(file_get_contents($module_path));
         if ($module['package'] == 'Core') {
           $parent_module = $get_available_updates['drupal'];
@@ -275,7 +275,7 @@ class SettingsForm extends ConfigFormBase {
       }
     }
 
-    return file_save_data($output, $dir . '/' . $filename, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->writeData($output, $dir . '/' . $filename, FileSystemInterface::EXISTS_REPLACE);
   }
 
   /**
@@ -361,7 +361,7 @@ class SettingsForm extends ConfigFormBase {
       $file_content .= $this->moduleExportGetModuleCode($machine_name, $module_type);
     }
 
-    return file_save_data($file_content, $dir . '/' . $filename, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->writeData($file_content, $dir . '/' . $filename, FileSystemInterface::EXISTS_REPLACE);
   }
 
   /**
@@ -421,7 +421,7 @@ class SettingsForm extends ConfigFormBase {
       }
     }
     $info_file .= "\n";
-    return file_save_data($info_file, $dir . '/' . $filename, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->writeData($info_file, $dir . '/' . $filename, FileSystemInterface::EXISTS_REPLACE);
   }
 
 }
