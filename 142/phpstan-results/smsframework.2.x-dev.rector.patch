diff --git a/modules/sms_blast/tests/src/Functional/SmsBlastBrowserTest.php b/modules/sms_blast/tests/src/Functional/SmsBlastBrowserTest.php
index 8b59d31..3769651 100644
--- a/modules/sms_blast/tests/src/Functional/SmsBlastBrowserTest.php
+++ b/modules/sms_blast/tests/src/Functional/SmsBlastBrowserTest.php
@@ -36,7 +36,7 @@ class SmsBlastBrowserTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalLogin($this->drupalCreateUser(['Send SMS Blast']));
 
@@ -94,12 +94,13 @@ class SmsBlastBrowserTest extends SmsFrameworkBrowserTestBase {
     $this->resetTestMessages();
 
     $edit['message'] = $this->randomString();
-    $this->drupalPostForm('sms_blast', $edit, t('Send'));
-    $this->assertResponse(200);
-    $this->assertText('Message sent to 3 users.');
+    $this->drupalGet('sms_blast');
+    $this->submitForm($edit, t('Send'));
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->pageTextContains('Message sent to 3 users.');
 
     // Get the resulting message that was sent and confirm.
-    $this->assertEqual(3, count($this->getTestMessages($this->gateway)), 'Sent three messages.');
+    $this->assertEquals(3, count($this->getTestMessages($this->gateway)), 'Sent three messages.');
   }
 
 }
diff --git a/modules/sms_devel/tests/src/Functional/SmsDevelMessageTest.php b/modules/sms_devel/tests/src/Functional/SmsDevelMessageTest.php
index 899d7d9..8469f6e 100644
--- a/modules/sms_devel/tests/src/Functional/SmsDevelMessageTest.php
+++ b/modules/sms_devel/tests/src/Functional/SmsDevelMessageTest.php
@@ -37,7 +37,7 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $user = $this->drupalCreateUser(['sms_devel form']);
@@ -54,8 +54,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['number'] = $this->randomPhoneNumbers(1)[0];
     $edit['message'] = $this->randomString();
     $edit['skip_queue'] = TRUE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Send'));
+    $this->submitForm($edit, t('Send'));
     $this->assertSession()->responseContains('Message was processed, 1 delivery reports were generated.');
 
     $messages = $this->getTestMessages($this->gateway);
@@ -70,8 +71,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['number'] = $this->randomPhoneNumbers(1)[0];
     $edit['message'] = $this->randomString();
     $edit['skip_queue'] = FALSE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Send'));
+    $this->submitForm($edit, t('Send'));
     $this->assertSession()->responseContains('Message added to the outgoing queue.');
 
     $messages = SmsMessage::loadMultiple();
@@ -88,8 +90,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['message'] = $this->randomString();
     $edit['gateway'] = $this->gateway->id();
     $edit['skip_queue'] = TRUE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Receive'));
+    $this->submitForm($edit, t('Receive'));
     $this->assertSession()->responseContains('Message was processed, 1 delivery reports were generated.');
 
     $this->assertEquals($edit['message'], sms_test_gateway_get_incoming()['message']);
@@ -103,8 +106,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['message'] = $this->randomString();
     $edit['gateway'] = $this->gateway->id();
     $edit['skip_queue'] = FALSE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Receive'));
+    $this->submitForm($edit, t('Receive'));
     $this->assertSession()->responseContains('Message added to the incoming queue.');
 
     $messages = SmsMessage::loadMultiple();
@@ -118,8 +122,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
    */
   public function testReceiveGatewayInvalid() {
     $edit['gateway'] = '';
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Receive'));
+    $this->submitForm($edit, t('Receive'));
     $this->assertSession()->responseContains('Gateway must be selected if receiving a message.');
   }
 
@@ -131,8 +136,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['message'] = $this->randomString();
     $edit['skip_queue'] = FALSE;
     $edit['automated'] = FALSE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Send'));
+    $this->submitForm($edit, t('Send'));
 
     $messages = SmsMessage::loadMultiple();
     $message = reset($messages);
@@ -155,7 +161,8 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $date_user->setTimezone(new \DateTimeZone(date_default_timezone_get()));
     $edit['send_on[date]'] = $date_user->format('Y-m-d');
     $edit['send_on[time]'] = $date_user->format('H:i:s');
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Send'));
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
+    $this->submitForm($edit, t('Send'));
 
     $messages = SmsMessage::loadMultiple();
     $message = reset($messages);
@@ -171,8 +178,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['number'] = $this->randomPhoneNumbers(1)[0];
     $edit['message'] = $this->randomString();
     $edit['skip_queue'] = TRUE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Send'));
+    $this->submitForm($edit, t('Send'));
     $this->assertSession()->responseContains('Message could not be sent');
 
     $messages = $this->getTestMessages($this->gateway);
@@ -188,8 +196,9 @@ class SmsDevelMessageTest extends SmsFrameworkBrowserTestBase {
     $edit['message'] = $this->randomString();
     $edit['skip_queue'] = TRUE;
     $edit['verbose'] = TRUE;
+    $this->drupalGet(Url::fromRoute('sms_devel.message'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_devel.message'), $edit, t('Send'));
+    $this->submitForm($edit, t('Send'));
     $this->assertSession()->responseContains('Message was processed, 1 delivery reports were generated.');
 
     $first_row = '#edit-results > tbody > tr:nth-child(1)';
diff --git a/modules/sms_sendtophone/src/Plugin/Filter/FilterInlineSms.php b/modules/sms_sendtophone/src/Plugin/Filter/FilterInlineSms.php
index 4a2c76a..36b1755 100644
--- a/modules/sms_sendtophone/src/Plugin/Filter/FilterInlineSms.php
+++ b/modules/sms_sendtophone/src/Plugin/Filter/FilterInlineSms.php
@@ -105,7 +105,7 @@ class FilterInlineSms extends FilterBase {
       case 'icon':
       default:
         if (!isset($this->settings["default_icon"]) || $this->settings["default_icon"] == 1) {
-          $icon_path = drupal_get_path('module', 'sms_sendtophone') . '/sms-send.gif';
+          $icon_path = \Drupal::service('extension.list.module')->getPath('sms_sendtophone') . '/sms-send.gif';
         }
         else {
           $icon_path = $this->settings["custom_icon_path"];
diff --git a/modules/sms_sendtophone/tests/src/Functional/SmsSendToPhoneBrowserTest.php b/modules/sms_sendtophone/tests/src/Functional/SmsSendToPhoneBrowserTest.php
index 2497076..3d0240e 100644
--- a/modules/sms_sendtophone/tests/src/Functional/SmsSendToPhoneBrowserTest.php
+++ b/modules/sms_sendtophone/tests/src/Functional/SmsSendToPhoneBrowserTest.php
@@ -52,7 +52,7 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create Basic page and Article node types.
@@ -104,16 +104,17 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
     $edit = [];
     $expected = [];
     foreach (NodeType::loadMultiple() as $type) {
-      $this->assertText($type->get('name'));
+      $this->assertSession()->pageTextContains($type->get('name'));
       if (rand(0, 1) > 0.5) {
         $edit["content_types[" . $type->get('type') . "]"] = $expected[$type->get('type')] = $type->get('type');
       }
     }
     // Ensure at least one type is enabled.
     $edit["content_types[page]"] = $expected['page'] = 'page';
-    $this->drupalPostForm('admin/config/smsframework/sendtophone', $edit, 'Save configuration');
+    $this->drupalGet('admin/config/smsframework/sendtophone');
+    $this->submitForm($edit, 'Save configuration');
     $saved = $this->config('sms_sendtophone.settings')->get('content_types', []);
-    $this->assertEqual($expected, $saved);
+    $this->assertEquals($expected, $saved);
 
     // Create a new node with sendtophone enabled and verify that the button is
     // added.
@@ -121,7 +122,7 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
     $node = $this->drupalCreateNode(['type' => $types[0]]);
     $this->drupalGet($node->toUrl());
     // Confirm message for user without confirmed number.
-    $this->assertText(t('Set up and confirm your mobile number to send to phone.'));
+    $this->assertSession()->pageTextContains(t('Set up and confirm your mobile number to send to phone.'));
 
     // Confirm phone number.
     $phone_number = $this->randomPhoneNumbers(1)[0];
@@ -131,22 +132,22 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
 
     $this->drupalGet($node->toUrl());
     // Confirm message for user without confirmed number.
-    $this->assertText('Send to phone');
+    $this->assertSession()->pageTextContains('Send to phone');
     $this->assertFieldByXPath('//a[@title="Send a link via SMS." and @class="sms-sendtophone"]', NULL);
 
     // Navigate to the "Send to phone" link.
     $this->clickLink('Send to phone');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
-    $this->assertFieldByName('number', $phone_number);
-    $this->assertFieldByName('message_display', $node->toUrl()->setAbsolute()->toString());
+    $this->assertSession()->fieldValueEquals('number', $phone_number);
+    $this->assertSession()->fieldValueEquals('message_display', $node->toUrl()->setAbsolute()->toString());
 
     // Click the send button there.
-    $this->drupalPostForm(NULL, ['number' => $phone_number], t('Send'));
+    $this->submitForm(['number' => $phone_number], t('Send'));
 
     $sms_message = $this->getLastTestMessage($this->gateway);
     $this->assertTrue(in_array($phone_number, $sms_message->getRecipients()));
-    $this->assertEqual($sms_message->getMessage(), $node->toUrl()->setAbsolute()->toString());
+    $this->assertEquals($sms_message->getMessage(), $node->toUrl()->setAbsolute()->toString());
   }
 
   /**
@@ -160,7 +161,8 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
       'filters[filter_inline_sms][status]' => TRUE,
       'filters[filter_inline_sms][settings][display]' => 'text',
     ];
-    $this->drupalPostForm('admin/config/content/formats/manage/plain_text', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/content/formats/manage/plain_text');
+    $this->submitForm($edit, t('Save configuration'));
     // Create a new node sms markup and verify that a link is created.
     $type_names = array_keys(NodeType::loadMultiple());
     $node_body = $this->randomMachineName(30);
@@ -176,7 +178,7 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
 
     // Unconfirmed users.
     $this->drupalGet('sms/sendtophone/inline');
-    $this->assertText('You need to set up and confirm your mobile phone to send messages');
+    $this->assertSession()->pageTextContains('You need to set up and confirm your mobile phone to send messages');
 
     // Confirm phone number.
     $phone_number = $this->randomPhoneNumbers(1)[0];
@@ -186,19 +188,17 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
 
     $this->drupalGet($node->toUrl());
     // Confirm link was created for Send to phone.
-    $this->assertText("$node_body (Send to phone)");
+    $this->assertSession()->pageTextContains("$node_body (Send to phone)");
 
     $this->clickLink('(Send to phone)');
-    $this->assertResponse(200);
-    $this->assertText($node_body);
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->pageTextContains($node_body);
 
     // Submit phone number and confirm message received.
-    $this->drupalPostForm(NULL, [], t('Send'), [
-      'query' => ['text' => $node_body],
-    ]);
+    $this->submitForm([], t('Send'));
 
     $sms_message = $this->getLastTestMessage($this->gateway);
-    $this->assertEqual($sms_message->getMessage(), $node_body, 'Message body "' . $node_body . '" successfully sent.');
+    $this->assertEquals($sms_message->getMessage(), $node_body, 'Message body "' . $node_body . '" successfully sent.');
   }
 
   /**
@@ -251,7 +251,8 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
 
     // This is a quick-fix. Need to find out how to add display filters in code.
     $this->drupalLogin($this->rootUser);
-    $this->drupalPostForm('admin/structure/types/manage/article/display', ['fields[' . $field_name . '][type]' => 'sms_link'], 'Save');
+    $this->drupalGet('admin/structure/types/manage/article/display');
+    $this->submitForm(['fields[' . $field_name . '][type]' => 'sms_link'], 'Save');
 
     // Confirm phone number.
     $user = $this->drupalCreateUser();
@@ -263,16 +264,16 @@ class SmsSendToPhoneBrowserTest extends SmsFrameworkBrowserTestBase {
 
     // Click send button.
     $this->drupalGet('node/' . $test_node->id());
-    $this->assertText($random_text, 'Field format works');
-    $this->assertText($random_text . ' (Send to phone)');
+    $this->assertSession()->pageTextContains($random_text);
+    $this->assertSession()->pageTextContains($random_text . ' (Send to phone)');
     $this->clickLink('Send to phone');
 
     // Click the send button there.
-    $this->drupalPostForm(NULL, [], 'Send', ['query' => ['text' => $random_text]]);
+    $this->submitForm([], 'Send');
 
     $sms_message = $this->getLastTestMessage($this->gateway);
     $this->assertTrue(in_array($phone_number, $sms_message->getRecipients()), 'Message sent to correct number');
-    $this->assertEqual($sms_message->getMessage(), $random_text, 'Field content sent to user');
+    $this->assertEquals($sms_message->getMessage(), $random_text, 'Field content sent to user');
   }
 
 }
diff --git a/modules/sms_user/src/AccountRegistration.php b/modules/sms_user/src/AccountRegistration.php
index 880f5d4..9ea99b8 100644
--- a/modules/sms_user/src/AccountRegistration.php
+++ b/modules/sms_user/src/AccountRegistration.php
@@ -121,7 +121,7 @@ class AccountRegistration implements AccountRegistrationInterface {
     $user->{$phone_field_name}[] = $sender_number;
 
     // Password.
-    $password = user_password();
+    $password = \Drupal::service('password_generator')->generate();
     $user->setPassword($password);
 
     $validate = $this->removeAcceptableViolations($user->validate());
@@ -183,7 +183,7 @@ class AccountRegistration implements AccountRegistrationInterface {
           $user->setEmail($matches['email'][0]);
         }
 
-        $password = (!empty($matches['password'][0]) && $contains_password) ? $matches['password'][0] : user_password();
+        $password = (!empty($matches['password'][0]) && $contains_password) ? $matches['password'][0] : \Drupal::service('password_generator')->generate();
         $user->setPassword($password);
 
         $validate = $this->removeAcceptableViolations($user->validate(), $incoming_form);
diff --git a/modules/sms_user/tests/src/Functional/SmsFrameworkUserMenuLinksTest.php b/modules/sms_user/tests/src/Functional/SmsFrameworkUserMenuLinksTest.php
index b489a7f..92ca1cf 100644
--- a/modules/sms_user/tests/src/Functional/SmsFrameworkUserMenuLinksTest.php
+++ b/modules/sms_user/tests/src/Functional/SmsFrameworkUserMenuLinksTest.php
@@ -28,7 +28,7 @@ class SmsFrameworkUserMenuLinksTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $user = $this->drupalCreateUser([
       'access administration pages',
@@ -46,7 +46,7 @@ class SmsFrameworkUserMenuLinksTest extends SmsFrameworkBrowserTestBase {
     $entityDisplayRepo->getFormDisplay('user', 'user', 'default')->save();
     $this->createPhoneNumberSettings('user', 'user');
     $this->drupalGet(Url::fromRoute('user.admin_index'));
-    $this->assertLink('User phone number');
+    $this->assertSession()->linkExists('User phone number');
   }
 
   /**
@@ -54,7 +54,7 @@ class SmsFrameworkUserMenuLinksTest extends SmsFrameworkBrowserTestBase {
    */
   public function testNoDynamicMenuLinks() {
     $this->drupalGet(Url::fromRoute('user.admin_index'));
-    $this->assertNoLink('User phone number');
+    $this->assertSession()->linkNotExists('User phone number');
   }
 
 }
diff --git a/modules/sms_user/tests/src/Functional/SmsFrameworkUserSettingsTest.php b/modules/sms_user/tests/src/Functional/SmsFrameworkUserSettingsTest.php
index adc176e..d74373a 100644
--- a/modules/sms_user/tests/src/Functional/SmsFrameworkUserSettingsTest.php
+++ b/modules/sms_user/tests/src/Functional/SmsFrameworkUserSettingsTest.php
@@ -34,7 +34,7 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $account = $this->drupalCreateUser([
       'administer smsframework',
@@ -54,17 +54,17 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
    */
   public function testSettingsForm() {
     $this->drupalGet(Url::fromRoute('sms_user.options'));
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
-    $this->assertFieldByName('active_hours[status]');
-    $this->assertNoFieldChecked('edit-active-hours-status');
+    $this->assertSession()->fieldExists('active_hours[status]');
+    $this->assertSession()->checkboxNotChecked('edit-active-hours-status');
 
     // Ensure default select field values.
     foreach ($this->days as $day) {
-      $this->assertOptionSelected('edit-active-hours-days-' . $day . '-start', -1);
+      $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-' . $day . '-start', -1)->hasAttribute('selected'));
     }
     foreach ($this->days as $day) {
-      $this->assertOptionSelected('edit-active-hours-days-' . $day . '-end', 24);
+      $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-' . $day . '-end', 24)->hasAttribute('selected'));
     }
 
     $edit = [
@@ -77,17 +77,18 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'active_hours[days][thursday][start]' => -1,
       'active_hours[days][thursday][end]' => 18,
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('The configuration options have been saved.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('The configuration options have been saved.');
 
     // Check values are saved and form reflects this.
-    $this->assertFieldChecked('edit-active-hours-status');
-    $this->assertOptionSelected('edit-active-hours-days-sunday-start', 2);
-    $this->assertOptionSelected('edit-active-hours-days-sunday-end', 22);
-    $this->assertOptionSelected('edit-active-hours-days-tuesday-start', 0);
-    $this->assertOptionSelected('edit-active-hours-days-tuesday-end', 24);
-    $this->assertOptionSelected('edit-active-hours-days-thursday-start', -1);
-    $this->assertOptionSelected('edit-active-hours-days-thursday-end', 24);
+    $this->assertSession()->checkboxChecked('edit-active-hours-status');
+    $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-sunday-start', 2)->hasAttribute('selected'));
+    $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-sunday-end', 22)->hasAttribute('selected'));
+    $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-tuesday-start', 0)->hasAttribute('selected'));
+    $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-tuesday-end', 24)->hasAttribute('selected'));
+    $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-thursday-start', -1)->hasAttribute('selected'));
+    $this->assertTrue($this->assertSession()->optionExists('edit-active-hours-days-thursday-end', 24)->hasAttribute('selected'));
 
     $ranges_expected = [
       ['start' => 'sunday 2:00', 'end' => 'sunday 22:00'],
@@ -107,9 +108,10 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'active_hours[days][wednesday][start]' => 10,
       'active_hours[days][wednesday][end]' => 9,
     ];
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
 
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('End time must be greater than start time.');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('End time must be greater than start time.');
 
     // Active hours enabled but no days.
     $edit = [
@@ -117,8 +119,9 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'active_hours[days][wednesday][start]' => -1,
       'active_hours[days][wednesday][end]' => 24,
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('If active hours hours are enabled there must be at least one enabled day.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('If active hours hours are enabled there must be at least one enabled day.');
   }
 
   /**
@@ -128,8 +131,9 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
     $edit = [
       'account_registration[behaviour]' => 'none',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('The configuration options have been saved.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('The configuration options have been saved.');
 
     $settings = $this->config('sms_user.settings')->get('account_registration');
     $this->assertFalse($settings['unrecognized_sender']['status']);
@@ -141,8 +145,8 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
    */
   public function testAccountRegistrationReplyTokens() {
     $this->drupalGet(Url::fromRoute('sms_user.options'));
-    $this->assertResponse(200);
-    $this->assertRaw('Available tokens include: [sms-message:*] [user:*]');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->responseContains('Available tokens include: [sms-message:*] [user:*]');
   }
 
   /**
@@ -157,8 +161,9 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'account_registration[all_options][reply_status]' => TRUE,
       'account_registration[all_options][reply][message]' => $reply_message,
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('The configuration options have been saved.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('The configuration options have been saved.');
 
     $settings = $this->config('sms_user.settings')->get('account_registration');
 
@@ -188,8 +193,9 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'account_registration[incoming_pattern_options][reply][message_success]' => $reply_message_success,
       'account_registration[incoming_pattern_options][reply][message_failure]' => $reply_message_failure,
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('The configuration options have been saved.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('The configuration options have been saved.');
 
     $settings = $this->config('sms_user.settings')->get('account_registration');
 
@@ -216,24 +222,27 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'account_registration[all_options][reply_status]' => TRUE,
       'account_registration[all_options][reply][message]' => '',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('Reply message must have a value if reply is enabled.', 'Validation failed for message on all unrecognised numbers when reply status is enabled.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('Reply message must have a value if reply is enabled.');
 
     $edit = [
       'account_registration[behaviour]' => 'incoming_pattern',
       'account_registration[incoming_pattern_options][reply_status]' => TRUE,
       'account_registration[incoming_pattern_options][reply][message_success]' => '',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('Reply message must have a value if reply is enabled.', 'Validation failed for message_success on incoming_pattern when reply status is enabled.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('Reply message must have a value if reply is enabled.');
 
     $edit = [
       'account_registration[behaviour]' => 'incoming_pattern',
       'account_registration[incoming_pattern_options][reply_status]' => TRUE,
       'account_registration[incoming_pattern_options][reply][message_failure]' => '',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('Reply message must have a value if reply is enabled.', 'Validation failed for message_failure on incoming_pattern when reply status is enabled.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('Reply message must have a value if reply is enabled.');
   }
 
   /**
@@ -246,24 +255,27 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'account_registration[behaviour]' => 'incoming_pattern',
       'account_registration[incoming_pattern_options][incoming_message]' => '',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('Incoming message must be filled if using pre-incoming_pattern option');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('Incoming message must be filled if using pre-incoming_pattern option');
 
     $edit = [
       'account_registration[behaviour]' => 'incoming_pattern',
       'account_registration[incoming_pattern_options][send_activation_email]' => TRUE,
       'account_registration[incoming_pattern_options][incoming_message]' => $this->randomString(),
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('Activation email cannot be sent if [email] placeholder is missing.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('Activation email cannot be sent if [email] placeholder is missing.');
 
     $edit = [
       'account_registration[behaviour]' => 'incoming_pattern',
       'account_registration[incoming_pattern_options][send_activation_email]' => TRUE,
       'account_registration[incoming_pattern_options][incoming_message]' => 'E [email] P [password]',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('Activation email cannot be sent if [password] placeholder is present.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('Activation email cannot be sent if [password] placeholder is present.');
 
     // Placeholder seperation.
     // Tests separator so regex doesn't have problems.
@@ -271,8 +283,9 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
       'account_registration[behaviour]' => 'incoming_pattern',
       'account_registration[incoming_pattern_options][incoming_message]' => 'Email [email][password]',
     ];
-    $this->drupalPostForm(Url::fromRoute('sms_user.options'), $edit, 'Save configuration');
-    $this->assertRaw('There must be a separator between placeholders.');
+    $this->drupalGet(Url::fromRoute('sms_user.options'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains('There must be a separator between placeholders.');
   }
 
   /**
@@ -282,7 +295,7 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
    */
   public function testFormNoUserPhoneNumberSettings() {
     $this->drupalGet(Url::fromRoute('sms_user.options'));
-    $this->assertRaw('There are no phone number settings configured for the user entity type. Some features cannot operate without these settings. <a href="' . Url::fromRoute('entity.phone_number_settings.add')->toString() . '">Add phone number settings</a>.', 'Warning message displayed for no phone number settings.');
+    $this->assertSession()->responseContains('There are no phone number settings configured for the user entity type. Some features cannot operate without these settings. <a href="' . Url::fromRoute('entity.phone_number_settings.add')->toString() . '">Add phone number settings</a>.');
 
     $input = $this->xpath('//input[@name="account_registration[behaviour]" and @disabled="disabled" and @value="all"]');
     $this->assertTrue(count($input) === 1, "The 'All unrecognised phone numbers' radio is disabled.");
@@ -299,7 +312,7 @@ class SmsFrameworkUserSettingsTest extends SmsFrameworkBrowserTestBase {
   public function testFormUserPhoneNumberSettings() {
     $this->createPhoneNumberSettings('user', 'user');
     $this->drupalGet(Url::fromRoute('sms_user.options'));
-    $this->assertNoRaw('There are no phone number settings configured for the user entity type. Some features cannot operate without these settings.', 'Warning message displayed for no phone number settings.');
+    $this->assertSession()->responseNotContains('There are no phone number settings configured for the user entity type. Some features cannot operate without these settings.');
 
     $input = $this->xpath('//input[@name="account_registration[behaviour]" and @disabled="disabled" and @value="all"]');
     $this->assertTrue(count($input) === 0, "The 'All unrecognised phone numbers' radio is not disabled.");
diff --git a/modules/sms_user/tests/src/Kernel/SmsFrameworkUserAccountRegistrationServiceTest.php b/modules/sms_user/tests/src/Kernel/SmsFrameworkUserAccountRegistrationServiceTest.php
index f33baff..da55c45 100644
--- a/modules/sms_user/tests/src/Kernel/SmsFrameworkUserAccountRegistrationServiceTest.php
+++ b/modules/sms_user/tests/src/Kernel/SmsFrameworkUserAccountRegistrationServiceTest.php
@@ -77,7 +77,7 @@ class SmsFrameworkUserAccountRegistrationServiceTest extends SmsFrameworkKernelB
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installSchema('system', ['sequences']);
     $this->installConfig('sms_user');
diff --git a/modules/sms_user/tests/src/Kernel/SmsFrameworkUserActiveHoursServiceTest.php b/modules/sms_user/tests/src/Kernel/SmsFrameworkUserActiveHoursServiceTest.php
index 6dc7c39..d87bddf 100644
--- a/modules/sms_user/tests/src/Kernel/SmsFrameworkUserActiveHoursServiceTest.php
+++ b/modules/sms_user/tests/src/Kernel/SmsFrameworkUserActiveHoursServiceTest.php
@@ -48,7 +48,7 @@ class SmsFrameworkUserActiveHoursServiceTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->activeHoursService = $this->container->get('sms_user.active_hours');
     $this->smsProvider = $this->container->get('sms.provider');
diff --git a/modules/sms_user/tests/src/Kernel/SmsFrameworkUserTest.php b/modules/sms_user/tests/src/Kernel/SmsFrameworkUserTest.php
index 7a94cad..5c5760c 100644
--- a/modules/sms_user/tests/src/Kernel/SmsFrameworkUserTest.php
+++ b/modules/sms_user/tests/src/Kernel/SmsFrameworkUserTest.php
@@ -47,7 +47,7 @@ class SmsFrameworkUserTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installSchema('system', ['sequences']);
     $this->installConfig('sms_user');
diff --git a/sms.api.php b/sms.api.php
index 546368d..1854494 100644
--- a/sms.api.php
+++ b/sms.api.php
@@ -2,6 +2,14 @@
 
 declare(strict_types = 1);
 
+use Drupal\Core\StringTranslation\TranslatableMarkup;
+use Symfony\Component\EventDispatcher\EventSubscriberInterface;
+use Drupal\sms\Event\SmsEntityPhoneNumber;
+use Drupal\sms\Event\SmsMessageEvent;
+use Drupal\sms\Event\RecipientGatewayEvent;
+use Drupal\sms\Event\SmsDeliveryReportEvent;
+use Drupal\sms\Event\SmsEvents;
+
 // @codingStandardsIgnoreFile
 
 /**
@@ -19,7 +27,7 @@ declare(strict_types = 1);
  *   An array of gateway definitions keyed by plugin ID.
  */
 function hook_sms_gateway_info_alter(array &$gateways) {
-  $gateways['log']['label'] = new \Drupal\Core\StringTranslation\TranslatableMarkup('The Logger');
+  $gateways['log']['label'] = new TranslatableMarkup('The Logger');
 }
 
 /**
@@ -43,14 +51,14 @@ function hook_sms_gateway_info_alter(array &$gateways) {
  *
  * @see \Drupal\sms_test\EventSubscriber\SmsTestEventSubscriber
  */
-class MySmsEventSubscriber implements \Symfony\Component\EventDispatcher\EventSubscriberInterface {
+class MySmsEventSubscriber implements EventSubscriberInterface {
 
   /**
    * An example event subscriber.
    *
    * @see \Drupal\sms\Event\SmsEvents::ENTITY_PHONE_NUMBERS
    */
-  public function myEntityPhoneNumbers(\Drupal\sms\Event\SmsEntityPhoneNumber $event) {
+  public function myEntityPhoneNumbers(SmsEntityPhoneNumber $event) {
     // Entity to get phone numbers for.
     $entity = $event->getEntity();
     // Add a phone number for above entity.
@@ -62,7 +70,7 @@ class MySmsEventSubscriber implements \Symfony\Component\EventDispatcher\EventSu
    *
    * @see \Drupal\sms\Event\SmsEvents::MESSAGE_PRE_PROCESS
    */
-  public function mySmsMessagePreprocess(\Drupal\sms\Event\SmsMessageEvent $event) {
+  public function mySmsMessagePreprocess(SmsMessageEvent $event) {
     $result = [];
     foreach ($event->getMessages() as $message) {
       // Modify or chunk messages.
@@ -76,7 +84,7 @@ class MySmsEventSubscriber implements \Symfony\Component\EventDispatcher\EventSu
    *
    * @see \Drupal\sms\Event\SmsEvents::MESSAGE_POST_PROCESS
    */
-  public function mySmsMessagePostProcess(\Drupal\sms\Event\SmsMessageEvent $event) {
+  public function mySmsMessagePostProcess(SmsMessageEvent $event) {
     $result = [];
     foreach ($event->getMessages() as $message) {
       // Modify or chunk messages.
@@ -90,7 +98,7 @@ class MySmsEventSubscriber implements \Symfony\Component\EventDispatcher\EventSu
    *
    * @see \Drupal\sms\Event\SmsEvents::MESSAGE_GATEWAY
    */
-  public function mySmsMessageGateway(\Drupal\sms\Event\RecipientGatewayEvent $event) {
+  public function mySmsMessageGateway(RecipientGatewayEvent $event) {
     // The recipient phone number.
     $event->getRecipient();
     // Add a gateway for a phone number.
@@ -105,7 +113,7 @@ class MySmsEventSubscriber implements \Symfony\Component\EventDispatcher\EventSu
    *
    * @see \Drupal\sms\Event\SmsEvents::DELIVERY_REPORT_POST_PROCESS
    */
-  public function myDeliveryReportPostProcessor(\Drupal\sms\Event\SmsDeliveryReportEvent $event) {
+  public function myDeliveryReportPostProcessor(SmsDeliveryReportEvent $event) {
     $event->getReports();
   }
 
@@ -113,11 +121,11 @@ class MySmsEventSubscriber implements \Symfony\Component\EventDispatcher\EventSu
    * {@inheritdoc}
    */
   public static function getSubscribedEvents() {
-    $events[\Drupal\sms\Event\SmsEvents::ENTITY_PHONE_NUMBERS][] = ['myEntityPhoneNumbers'];
-    $events[\Drupal\sms\Event\SmsEvents::MESSAGE_PRE_PROCESS][] = ['mySmsMessagePreprocess'];
-    $events[\Drupal\sms\Event\SmsEvents::MESSAGE_POST_PROCESS][] = ['mySmsMessagePostprocess'];
-    $events[\Drupal\sms\Event\SmsEvents::MESSAGE_GATEWAY][] = ['mySmsMessageGateway'];
-    $events[\Drupal\sms\Event\SmsEvents::DELIVERY_REPORT_POST_PROCESS][] = ['myDeliveryReportPostProcessor'];
+    $events[SmsEvents::ENTITY_PHONE_NUMBERS][] = ['myEntityPhoneNumbers'];
+    $events[SmsEvents::MESSAGE_PRE_PROCESS][] = ['mySmsMessagePreprocess'];
+    $events[SmsEvents::MESSAGE_POST_PROCESS][] = ['mySmsMessagePostprocess'];
+    $events[SmsEvents::MESSAGE_GATEWAY][] = ['mySmsMessageGateway'];
+    $events[SmsEvents::DELIVERY_REPORT_POST_PROCESS][] = ['myDeliveryReportPostProcessor'];
     return $events;
   }
 
diff --git a/src/Event/RecipientGatewayEvent.php b/src/Event/RecipientGatewayEvent.php
index 0245c4e..1e86443 100644
--- a/src/Event/RecipientGatewayEvent.php
+++ b/src/Event/RecipientGatewayEvent.php
@@ -4,7 +4,7 @@ declare(strict_types = 1);
 
 namespace Drupal\sms\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\sms\Entity\SmsGatewayInterface;
 
 /**
diff --git a/src/Event/SmsDeliveryReportEvent.php b/src/Event/SmsDeliveryReportEvent.php
index 8c56657..c1a9986 100644
--- a/src/Event/SmsDeliveryReportEvent.php
+++ b/src/Event/SmsDeliveryReportEvent.php
@@ -4,7 +4,7 @@ declare(strict_types = 1);
 
 namespace Drupal\sms\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Symfony\Component\HttpFoundation\Response;
 
 /**
diff --git a/src/Event/SmsEntityPhoneNumber.php b/src/Event/SmsEntityPhoneNumber.php
index c0b543c..6d38d54 100644
--- a/src/Event/SmsEntityPhoneNumber.php
+++ b/src/Event/SmsEntityPhoneNumber.php
@@ -4,8 +4,8 @@ declare(strict_types = 1);
 
 namespace Drupal\sms\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\Core\Entity\EntityInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * Event fired when resolving phone numbers for an entity.
diff --git a/src/Event/SmsMessageEvent.php b/src/Event/SmsMessageEvent.php
index 5a62019..276f60e 100644
--- a/src/Event/SmsMessageEvent.php
+++ b/src/Event/SmsMessageEvent.php
@@ -4,7 +4,7 @@ declare(strict_types = 1);
 
 namespace Drupal\sms\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Event fired when SMS messages are processed.
diff --git a/src/EventSubscriber/SmsMessageProcessor.php b/src/EventSubscriber/SmsMessageProcessor.php
index 666af8f..453a581 100644
--- a/src/EventSubscriber/SmsMessageProcessor.php
+++ b/src/EventSubscriber/SmsMessageProcessor.php
@@ -224,7 +224,7 @@ class SmsMessageProcessor implements EventSubscriberInterface {
     $event = new RecipientGatewayEvent($recipient);
     /** @var \Drupal\sms\Event\RecipientGatewayEvent $event */
     $event = $this->eventDispatcher
-      ->dispatch(SmsEvents::MESSAGE_GATEWAY, $event);
+      ->dispatch($event, SmsEvents::MESSAGE_GATEWAY);
 
     $gateways = $event->getGatewaysSorted();
     // Use the gateway with the greatest weight.
diff --git a/src/Provider/DefaultSmsProvider.php b/src/Provider/DefaultSmsProvider.php
index 06d8ec4..335b58b 100644
--- a/src/Provider/DefaultSmsProvider.php
+++ b/src/Provider/DefaultSmsProvider.php
@@ -155,7 +155,7 @@ class DefaultSmsProvider implements SmsProviderInterface {
       ->setResponse($response)
       ->setReports($reports);
     $this->eventDispatcher
-      ->dispatch(SmsEvents::DELIVERY_REPORT_POST_PROCESS, $event);
+      ->dispatch($event, SmsEvents::DELIVERY_REPORT_POST_PROCESS);
 
     return $event->getResponse();
   }
@@ -174,7 +174,7 @@ class DefaultSmsProvider implements SmsProviderInterface {
   protected function dispatchEvent($event_name, array $sms_messages) {
     $event = new SmsMessageEvent($sms_messages);
     return $this->eventDispatcher
-      ->dispatch($event_name, $event);
+      ->dispatch($event, $event_name);
   }
 
 }
diff --git a/src/Provider/PhoneNumberProvider.php b/src/Provider/PhoneNumberProvider.php
index 1c71b32..d021cba 100644
--- a/src/Provider/PhoneNumberProvider.php
+++ b/src/Provider/PhoneNumberProvider.php
@@ -52,7 +52,7 @@ class PhoneNumberProvider implements PhoneNumberProviderInterface {
     $event = new SmsEntityPhoneNumber($entity, $verified);
     /** @var \Drupal\sms\Event\SmsEntityPhoneNumber $event */
     $event = $this->eventDispatcher
-      ->dispatch(SmsEvents::ENTITY_PHONE_NUMBERS, $event);
+      ->dispatch($event, SmsEvents::ENTITY_PHONE_NUMBERS);
     return $event->getPhoneNumbers();
   }
 
diff --git a/tests/modules/sms_test/src/EventSubscriber/SmsTestEventSubscriber.php b/tests/modules/sms_test/src/EventSubscriber/SmsTestEventSubscriber.php
index 10ba5a3..6e91f30 100644
--- a/tests/modules/sms_test/src/EventSubscriber/SmsTestEventSubscriber.php
+++ b/tests/modules/sms_test/src/EventSubscriber/SmsTestEventSubscriber.php
@@ -4,7 +4,7 @@ declare(strict_types = 1);
 
 namespace Drupal\sms_test\EventSubscriber;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 use Drupal\sms\Entity\SmsGateway;
 use Drupal\sms\Event\SmsEvents;
@@ -44,7 +44,7 @@ class SmsTestEventSubscriber implements EventSubscriberInterface {
   /**
    * Adds event name to execution order when a message is processed.
    *
-   * @param \Symfony\Component\EventDispatcher\Event $event
+   * @param \Symfony\Contracts\EventDispatcher\Event $event
    *   The event.
    * @param string $eventName
    *   The event name.
diff --git a/tests/src/Functional/SmsFrameworkBrowserTest.php b/tests/src/Functional/SmsFrameworkBrowserTest.php
index 7c4d952..7fbe5fd 100644
--- a/tests/src/Functional/SmsFrameworkBrowserTest.php
+++ b/tests/src/Functional/SmsFrameworkBrowserTest.php
@@ -46,8 +46,8 @@ class SmsFrameworkBrowserTest extends SmsFrameworkBrowserTestBase {
     $this->drupalLogin($this->rootUser);
     $this->drupalGet(Url::fromRoute('system.status'));
 
-    $this->assertRaw('There are 2 messages in the incoming queue.');
-    $this->assertRaw('There are 4 messages in the outgoing queue.');
+    $this->assertSession()->responseContains('There are 2 messages in the incoming queue.');
+    $this->assertSession()->responseContains('There are 4 messages in the outgoing queue.');
   }
 
 }
diff --git a/tests/src/Functional/SmsFrameworkBrowserTestBase.php b/tests/src/Functional/SmsFrameworkBrowserTestBase.php
index 2bdf19f..5381792 100644
--- a/tests/src/Functional/SmsFrameworkBrowserTestBase.php
+++ b/tests/src/Functional/SmsFrameworkBrowserTestBase.php
@@ -48,7 +48,7 @@ abstract class SmsFrameworkBrowserTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->gatewayManager = $this->container->get('plugin.manager.sms_gateway');
     $this->defaultSmsProvider = $this->container->get('sms.provider');
diff --git a/tests/src/Functional/SmsFrameworkDeliveryReportTest.php b/tests/src/Functional/SmsFrameworkDeliveryReportTest.php
index c4953ba..fb24dc7 100644
--- a/tests/src/Functional/SmsFrameworkDeliveryReportTest.php
+++ b/tests/src/Functional/SmsFrameworkDeliveryReportTest.php
@@ -31,14 +31,14 @@ class SmsFrameworkDeliveryReportTest extends SmsFrameworkBrowserTestBase {
 
     $result = $sms_messages[0]->getResult();
     $this->assertTrue($result instanceof SmsMessageResultInterface);
-    $this->assertEqual(count($sms_message->getRecipients()), count($result->getReports()));
+    $this->assertEquals(count($sms_message->getRecipients()), count($result->getReports()));
     $reports = $result->getReports();
 
     /** @var \Drupal\sms\Message\SmsDeliveryReportInterface $first_report */
     $first_report = reset($reports);
     $message_id = $first_report->getMessageId();
     $this->assertTrue($first_report instanceof SmsDeliveryReportInterface);
-    $this->assertEqual($first_report->getStatus(), SmsMessageReportStatus::QUEUED);
+    $this->assertEquals($first_report->getStatus(), SmsMessageReportStatus::QUEUED);
 
     // Get the delivery reports url and simulate push delivery report.
     $url = $test_gateway->getPushReportUrl()->setAbsolute()->toString();
@@ -56,18 +56,18 @@ class SmsFrameworkDeliveryReportTest extends SmsFrameworkBrowserTestBase {
    ]
 }
 EOF;
-    /** @var \Symfony\Component\BrowserKit\Client $client */
+    /** @var \Symfony\Component\BrowserKit\AbstractBrowser $client */
     $client = $this->getSession()->getDriver()->getClient();
     $client->request('post', $url, ['delivery_report' => $delivery_report]);
-    $this->assertText('custom response content');
+    $this->assertSession()->pageTextContains('custom response content');
     \Drupal::state()->resetCache();
 
     // Get the stored report and verify that it was properly parsed.
     $second_report = $this->getTestMessageReport($message_id, $test_gateway);
     $this->assertTrue($second_report instanceof SmsDeliveryReportInterface);
-    $this->assertEqual("status message", $second_report->getStatusMessage());
-    $this->assertEqual($delivered_time, $second_report->getTimeDelivered());
-    $this->assertEqual($message_id, $second_report->getMessageId());
+    $this->assertEquals("status message", $second_report->getStatusMessage());
+    $this->assertEquals($delivered_time, $second_report->getTimeDelivered());
+    $this->assertEquals($message_id, $second_report->getMessageId());
   }
 
 }
diff --git a/tests/src/Functional/SmsFrameworkGatewayAdminTest.php b/tests/src/Functional/SmsFrameworkGatewayAdminTest.php
index b43a556..9373f3a 100644
--- a/tests/src/Functional/SmsFrameworkGatewayAdminTest.php
+++ b/tests/src/Functional/SmsFrameworkGatewayAdminTest.php
@@ -30,7 +30,7 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->smsGatewayStorage = \Drupal::entityTypeManager()
       ->getStorage('sms_gateway');
@@ -45,20 +45,20 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
 
     // Test no access for anonymous.
     $this->drupalGet(Url::fromRoute('sms.gateway.list'));
-    $this->assertResponse(403);
+    $this->assertSession()->statusCodeEquals(403);
 
     $account = $this->drupalCreateUser(['administer smsframework']);
     $this->drupalLogin($account);
 
     $this->drupalGet(Url::fromRoute('sms.gateway.list'));
-    $this->assertResponse(200);
-    $this->assertRaw('<td>Drupal log</td>');
-    $this->assertRaw('<td>Memory</td>');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->responseContains('<td>Drupal log</td>');
+    $this->assertSession()->responseContains('<td>Memory</td>');
 
     // Delete all gateways.
     $this->smsGatewayStorage->delete($this->smsGatewayStorage->loadMultiple());
     $this->drupalGet(Url::fromRoute('sms.gateway.list'));
-    $this->assertRaw(t('No gateways found.'));
+    $this->assertSession()->responseContains(t('No gateways found.'));
   }
 
   /**
@@ -70,18 +70,19 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
     // Test initial fallback gateway.
     $sms_gateway_fallback = SmsGateway::load($this->config('sms.settings')->get('fallback_gateway'));
 
-    $this->assertEqual($sms_gateway_fallback->id(), 'log', 'Initial fallback gateway is "log".');
+    $this->assertEquals($sms_gateway_fallback->id(), 'log', 'Initial fallback gateway is "log".');
 
     $this->drupalLogin($this->drupalCreateUser(['administer smsframework']));
+    $this->drupalGet(Url::fromRoute('sms.settings'));
 
     // Change fallback gateway.
-    $this->drupalPostForm(Url::fromRoute('sms.settings'), [
+    $this->submitForm([
       'fallback_gateway' => $test_gateway->id(),
     ], 'Save configuration');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
     $sms_gateway_fallback = SmsGateway::load($this->config('sms.settings')->get('fallback_gateway'));
-    $this->assertEqual($sms_gateway_fallback->id(), $test_gateway->id(), 'Fallback gateway changed.');
+    $this->assertEquals($sms_gateway_fallback->id(), $test_gateway->id(), 'Fallback gateway changed.');
   }
 
   /**
@@ -92,7 +93,7 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
     $this->drupalLogin($account);
 
     $this->drupalGet(Url::fromRoute('entity.sms_gateway.add'));
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
     $edit = [
       'label' => $this->randomString(),
@@ -100,16 +101,17 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
       'status' => TRUE,
       'plugin_id' => 'memory',
     ];
-    $this->drupalPostForm(Url::fromRoute('entity.sms_gateway.add'), $edit, t('Save'));
-    $this->assertResponse(200);
+    $this->drupalGet(Url::fromRoute('entity.sms_gateway.add'));
+    $this->submitForm($edit, t('Save'));
+    $this->assertSession()->statusCodeEquals(200);
 
-    $this->assertUrl(Url::fromRoute('entity.sms_gateway.edit_form', [
+    $this->assertSession()->addressEquals(Url::fromRoute('entity.sms_gateway.edit_form', [
       'sms_gateway' => $edit['id'],
     ]));
-    $this->assertRaw(t('Gateway created.'));
+    $this->assertSession()->responseContains(t('Gateway created.'));
 
     $this->drupalGet(Url::fromRoute('sms.gateway.list'));
-    $this->assertRaw('<td>' . t('@label', ['@label' => $edit['label']]) . '</td>', 'New gateway appears on list.');
+    $this->assertSession()->responseContains('<td>' . t('@label', ['@label' => $edit['label']]) . '</td>');
   }
 
   /**
@@ -125,14 +127,14 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
     $this->drupalGet(Url::fromRoute('entity.sms_gateway.edit_form', [
       'sms_gateway' => $test_gateway->id(),
     ]));
-    $this->assertResponse(200);
-    $this->assertFieldByName('widget');
-    $this->assertNoFieldChecked('edit-skip-queue');
-    $this->assertFieldByName('retention_duration_incoming', '0');
-    $this->assertFieldByName('retention_duration_outgoing', '0');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->fieldExists('widget');
+    $this->assertSession()->checkboxNotChecked('edit-skip-queue');
+    $this->assertSession()->fieldValueEquals('retention_duration_incoming', '0');
+    $this->assertSession()->fieldValueEquals('retention_duration_outgoing', '0');
 
     // Memory gateway supports pushed reports, so the URL should display.
-    $this->assertFieldByName('delivery_reports[push_path]', $test_gateway->getPushReportPath());
+    $this->assertSession()->fieldValueEquals('delivery_reports[push_path]', $test_gateway->getPushReportPath());
 
     // Memory gateway has a decoy configuration form.
     $edit = [
@@ -141,10 +143,10 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
       'retention_duration_incoming' => '3600',
       'retention_duration_outgoing' => '-1',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
-    $this->assertUrl(Url::fromRoute('sms.gateway.list'));
-    $this->assertResponse(200);
-    $this->assertRaw('Gateway saved.');
+    $this->submitForm($edit, 'Save');
+    $this->assertSession()->addressEquals(Url::fromRoute('sms.gateway.list'));
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->responseContains('Gateway saved.');
 
     // Reload the gateway, check configuration saved to config entity.
     /** @var \Drupal\sms\Entity\SmsGatewayInterface $test_gateway */
@@ -152,14 +154,14 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
       ->load($test_gateway->id());
 
     // Gateway settings.
-    $this->assertEqual(TRUE, $test_gateway->getSkipQueue());
-    $this->assertEqual($edit['retention_duration_incoming'], $test_gateway->getRetentionDuration(Direction::INCOMING));
-    $this->assertEqual($edit['retention_duration_outgoing'], $test_gateway->getRetentionDuration(Direction::OUTGOING));
+    $this->assertEquals(TRUE, $test_gateway->getSkipQueue());
+    $this->assertEquals($edit['retention_duration_incoming'], $test_gateway->getRetentionDuration(Direction::INCOMING));
+    $this->assertEquals($edit['retention_duration_outgoing'], $test_gateway->getRetentionDuration(Direction::OUTGOING));
 
     // Plugin form.
     $config = $test_gateway->getPlugin()
       ->getConfiguration();
-    $this->assertEqual($edit['widget'], $config['widget'], 'Plugin configuration changed.');
+    $this->assertEquals($edit['widget'], $config['widget'], 'Plugin configuration changed.');
   }
 
   /**
@@ -172,10 +174,10 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
     $this->drupalGet(Url::fromRoute('entity.sms_gateway.edit_form', [
       'sms_gateway' => $test_gateway->id(),
     ]));
-    $this->assertResponse(200);
-    $this->assertRaw('Edit gateway');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->responseContains('Edit gateway');
 
-    $this->assertNoFieldByName('delivery_reports[push_path]');
+    $this->assertSession()->fieldValueNotEquals('delivery_reports[push_path]', '');
   }
 
   /**
@@ -192,18 +194,19 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
     $delete_url = Url::fromRoute('entity.sms_gateway.delete_form', [
       'sms_gateway' => $test_gateway->id(),
     ]);
-    $this->assertUrl($delete_url);
-    $this->assertRaw(t('Are you sure you want to delete SMS gateway %label?', [
+    $this->assertSession()->addressEquals($delete_url);
+    $this->assertSession()->responseContains(t('Are you sure you want to delete SMS gateway %label?', [
       '%label' => $test_gateway->label(),
     ]));
-    $this->drupalPostForm($delete_url, [], t('Delete'));
+    $this->drupalGet($delete_url);
+    $this->submitForm([], t('Delete'));
 
-    $this->assertUrl(Url::fromRoute('sms.gateway.list'));
-    $this->assertResponse(200);
-    $this->assertRaw(t('Gateway %label was deleted.', [
+    $this->assertSession()->addressEquals(Url::fromRoute('sms.gateway.list'));
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->responseContains(t('Gateway %label was deleted.', [
       '%label' => $test_gateway->label(),
     ]));
-    $this->assertNoRaw('<td>' . t('@label', ['@label' => $test_gateway->label()]) . '</td>');
+    $this->assertSession()->responseNotContains('<td>' . t('@label', ['@label' => $test_gateway->label()]) . '</td>');
   }
 
   /**
@@ -225,7 +228,7 @@ class SmsFrameworkGatewayAdminTest extends SmsFrameworkBrowserTestBase {
     $edit = [
       'incoming_messages[push_path]' => $incoming_route,
     ];
-    $this->drupalPostForm(NULL, $edit, t('Save'));
+    $this->submitForm($edit, t('Save'));
 
     // Reload the gateway, check properties modified.
     $gateway = SmsGateway::load($gateway->id());
diff --git a/tests/src/Functional/SmsFrameworkIncomingBrowserTest.php b/tests/src/Functional/SmsFrameworkIncomingBrowserTest.php
index 047fc2d..c2c1039 100644
--- a/tests/src/Functional/SmsFrameworkIncomingBrowserTest.php
+++ b/tests/src/Functional/SmsFrameworkIncomingBrowserTest.php
@@ -30,7 +30,7 @@ class SmsFrameworkIncomingBrowserTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->httpClient = $this->container->get('http_client');
 
diff --git a/tests/src/Functional/SmsFrameworkPhoneNumberAdminTest.php b/tests/src/Functional/SmsFrameworkPhoneNumberAdminTest.php
index ab9cba5..40dfee5 100644
--- a/tests/src/Functional/SmsFrameworkPhoneNumberAdminTest.php
+++ b/tests/src/Functional/SmsFrameworkPhoneNumberAdminTest.php
@@ -30,7 +30,7 @@ class SmsFrameworkPhoneNumberAdminTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->entityTypeManager = $this->container->get('entity_type.manager');
 
@@ -50,8 +50,8 @@ class SmsFrameworkPhoneNumberAdminTest extends SmsFrameworkBrowserTestBase {
    */
   public function testPhoneNumberList() {
     $this->drupalGet('admin/config/smsframework/phone_number');
-    $this->assertRaw(t('No phone number settings found.'));
-    $this->assertLinkByHref('admin/config/smsframework/phone_number/add');
+    $this->assertSession()->responseContains(t('No phone number settings found.'));
+    $this->assertSession()->linkByHrefExists('admin/config/smsframework/phone_number/add');
 
     // Ensure statistics are appearing on list.
     $this->createPhoneNumberSettings('entity_test', 'entity_test');
@@ -86,7 +86,7 @@ class SmsFrameworkPhoneNumberAdminTest extends SmsFrameworkBrowserTestBase {
     }
 
     $this->drupalGet('admin/config/smsframework/phone_number');
-    $this->assertRaw('<td>entity_test</td>
+    $this->assertSession()->responseContains('<td>entity_test</td>
                       <td>' . $quantity[0] . '</td>
                       <td>' . $quantity[1] . '</td>
                       <td>' . ($quantity[0] + $quantity[2]) . '</td>
@@ -99,50 +99,53 @@ class SmsFrameworkPhoneNumberAdminTest extends SmsFrameworkBrowserTestBase {
   public function testPhoneNumberCrud() {
     // Add a new phone number config.
     $this->drupalGet('admin/config/smsframework/phone_number/add');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
     $edit = [
       'entity_bundle' => 'entity_test|entity_test',
       'field_mapping[phone_number]' => '!create',
     ];
-    $this->drupalPostForm('admin/config/smsframework/phone_number/add', $edit, t('Save'));
+    $this->drupalGet('admin/config/smsframework/phone_number/add');
+    $this->submitForm($edit, t('Save'));
 
-    $this->assertUrl('admin/config/smsframework/phone_number');
+    $this->assertSession()->addressEquals('admin/config/smsframework/phone_number');
     $t_args = ['%id' => 'entity_test.entity_test'];
-    $this->assertRaw(t('Phone number settings %id created.', $t_args));
-    $this->assertRaw('<td>entity_test</td>
-                      <td>entity_test</td>', 'Phone number settings displayed as row.');
-    $this->assertLinkByHref('admin/config/smsframework/phone_number/entity_test.entity_test');
-    $this->assertLinkByHref('admin/config/smsframework/phone_number/entity_test.entity_test/delete');
+    $this->assertSession()->responseContains(t('Phone number settings %id created.', $t_args));
+    $this->assertSession()->responseContains('<td>entity_test</td>
+                      <td>entity_test</td>');
+    $this->assertSession()->linkByHrefExists('admin/config/smsframework/phone_number/entity_test.entity_test');
+    $this->assertSession()->linkByHrefExists('admin/config/smsframework/phone_number/entity_test.entity_test/delete');
 
     // Ensure a phone number config cannot have the same bundle as pre-existing.
     $this->drupalGet('admin/config/smsframework/phone_number/add');
-    $this->assertNoOption('edit-entity-bundle', 'entity_test|entity_test');
+    $this->assertSession()->optionNotExists('edit-entity-bundle', 'entity_test|entity_test');
 
     // Edit phone number settings.
     $this->drupalGet('admin/config/smsframework/phone_number/entity_test.entity_test');
-    $this->assertField('field_mapping[phone_number]', 'Phone number field exists.');
-    $this->assertNoField('entity_bundle', 'Bundle field does not exist.');
-    $this->assertOptionSelected('edit-field-mapping-phone-number', 'phone_number');
+    $this->assertSession()->fieldExists('field_mapping[phone_number]', 'Phone number field exists.');
+    $this->assertSession()->fieldNotExists('entity_bundle', 'Bundle field does not exist.');
+    $this->assertTrue($this->assertSession()->optionExists('edit-field-mapping-phone-number', 'phone_number')->hasAttribute('selected'));
 
     // Ensure edit form is saving correctly.
     $edit = [
       'code_lifetime' => '7777',
     ];
-    $this->drupalPostForm('admin/config/smsframework/phone_number/entity_test.entity_test', $edit, t('Save'));
-    $this->assertEqual(7777, $this->config('sms.phone.entity_test.entity_test')->get('verification_code_lifetime'));
+    $this->drupalGet('admin/config/smsframework/phone_number/entity_test.entity_test');
+    $this->submitForm($edit, t('Save'));
+    $this->assertEquals(7777, $this->config('sms.phone.entity_test.entity_test')->get('verification_code_lifetime'));
 
     // Delete new phone number settings.
     $this->drupalGet('admin/config/smsframework/phone_number/entity_test.entity_test/delete');
-    $this->assertRaw(t('Are you sure you want to delete SMS phone number settings %label?', [
+    $this->assertSession()->responseContains(t('Are you sure you want to delete SMS phone number settings %label?', [
       '%label' => 'entity_test.entity_test',
     ]));
-    $this->drupalPostForm('admin/config/smsframework/phone_number/entity_test.entity_test/delete', [], t('Delete'));
-    $this->assertUrl('admin/config/smsframework/phone_number');
-    $this->assertRaw(t('Phone number settings %label was deleted.', [
+    $this->drupalGet('admin/config/smsframework/phone_number/entity_test.entity_test/delete');
+    $this->submitForm([], t('Delete'));
+    $this->assertSession()->addressEquals('admin/config/smsframework/phone_number');
+    $this->assertSession()->responseContains(t('Phone number settings %label was deleted.', [
       '%label' => 'entity_test.entity_test',
     ]));
-    $this->assertRaw('No phone number settings found.');
+    $this->assertSession()->responseContains('No phone number settings found.');
   }
 
   /**
@@ -163,7 +166,8 @@ class SmsFrameworkPhoneNumberAdminTest extends SmsFrameworkBrowserTestBase {
       'entity_bundle' => 'entity_test|entity_test',
       'field_mapping[phone_number]' => '!create',
     ];
-    $this->drupalPostForm('admin/config/smsframework/phone_number/add', $edit, t('Save'));
+    $this->drupalGet('admin/config/smsframework/phone_number/add');
+    $this->submitForm($edit, t('Save'));
 
     $field_name_telephone .= '_2';
     $field_config = $field_storage->load('entity_test.' . $field_name_telephone);
@@ -171,8 +175,8 @@ class SmsFrameworkPhoneNumberAdminTest extends SmsFrameworkBrowserTestBase {
 
     // Ensure field name is associated with config.
     $this->drupalGet('admin/config/smsframework/phone_number/entity_test.entity_test');
-    $this->assertResponse(200);
-    $this->assertOptionSelected('edit-field-mapping-phone-number', $field_name_telephone);
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertTrue($this->assertSession()->optionExists('edit-field-mapping-phone-number', $field_name_telephone)->hasAttribute('selected'));
   }
 
 }
diff --git a/tests/src/Functional/SmsFrameworkPhoneNumberTest.php b/tests/src/Functional/SmsFrameworkPhoneNumberTest.php
index cc4a1f9..a3fbcba 100644
--- a/tests/src/Functional/SmsFrameworkPhoneNumberTest.php
+++ b/tests/src/Functional/SmsFrameworkPhoneNumberTest.php
@@ -22,7 +22,7 @@ class SmsFrameworkPhoneNumberTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $test_gateway = $this->createMemoryGateway(['skip_queue' => TRUE]);
     $this->setFallbackGateway($test_gateway);
@@ -40,12 +40,12 @@ class SmsFrameworkPhoneNumberTest extends SmsFrameworkBrowserTestBase {
     for ($quantity = 1; $quantity < 3; $quantity++) {
       $test_entity = $this->createEntityWithPhoneNumber($phone_number_settings, array_slice($phone_numbers, 0, $quantity));
 
-      $this->assertEqual($quantity, $this->countVerificationCodes($test_entity), 'There is ' . $quantity . ' verification code.');
+      $this->assertEquals($quantity, $this->countVerificationCodes($test_entity), 'There is ' . $quantity . ' verification code.');
 
       // Ensure post-save did not create verification codes if one already
       // exists.
       $test_entity->save();
-      $this->assertEqual($quantity, $this->countVerificationCodes($test_entity), 'Additional verification codes were not created.');
+      $this->assertEquals($quantity, $this->countVerificationCodes($test_entity), 'Additional verification codes were not created.');
     }
   }
 
@@ -64,7 +64,7 @@ class SmsFrameworkPhoneNumberTest extends SmsFrameworkBrowserTestBase {
 
     $sms_message = $this->getLastTestMessage($test_gateway);
     $this->assertTrue($sms_message instanceof SmsMessageInterface, 'SMS verification message sent.');
-    $this->assertEqual($sms_message->getRecipients(), $phone_numbers, 'Sent to correct phone number.');
+    $this->assertEquals($sms_message->getRecipients(), $phone_numbers, 'Sent to correct phone number.');
 
     $phone_verification = $this->getLastVerification();
     $data['sms_verification_code'] = $phone_verification->getCode();
@@ -72,7 +72,7 @@ class SmsFrameworkPhoneNumberTest extends SmsFrameworkBrowserTestBase {
       $phone_number_settings->getVerificationMessage(),
       $data
     );
-    $this->assertEqual($sms_message->getMessage(), $message, 'Sent correct message.');
+    $this->assertEquals($sms_message->getMessage(), $message, 'Sent correct message.');
   }
 
   /**
@@ -89,9 +89,9 @@ class SmsFrameworkPhoneNumberTest extends SmsFrameworkBrowserTestBase {
       $entities[] = $this->createEntityWithPhoneNumber($phone_number_settings, $phone_numbers);
     }
 
-    $this->assertEqual(6, $this->countVerificationCodes());
+    $this->assertEquals(6, $this->countVerificationCodes());
     $entities[1]->delete();
-    $this->assertEqual(4, $this->countVerificationCodes(), 'Verification codes deleted.');
+    $this->assertEquals(4, $this->countVerificationCodes(), 'Verification codes deleted.');
   }
 
   /**
diff --git a/tests/src/Functional/SmsFrameworkPhoneNumberVerifyForm.php b/tests/src/Functional/SmsFrameworkPhoneNumberVerifyForm.php
index b913b13..90c0f63 100644
--- a/tests/src/Functional/SmsFrameworkPhoneNumberVerifyForm.php
+++ b/tests/src/Functional/SmsFrameworkPhoneNumberVerifyForm.php
@@ -24,7 +24,7 @@ class SmsFrameworkPhoneNumberVerifyForm extends SmsFrameworkBrowserTestBase {
   public function testVerifyFormAccess() {
     // Anonymous.
     $this->drupalGet(Url::fromRoute('sms.phone.verify'));
-    $this->assertResponse(403);
+    $this->assertSession()->statusCodeEquals(403);
 
     // User with permission.
     $account = $this->drupalCreateUser([
@@ -32,9 +32,9 @@ class SmsFrameworkPhoneNumberVerifyForm extends SmsFrameworkBrowserTestBase {
     ]);
     $this->drupalLogin($account);
     $this->drupalGet(Url::fromRoute('sms.phone.verify'));
-    $this->assertResponse(200);
-    $this->assertText(t('Verify a phone number'));
-    $this->assertText(t('Enter the code you received from a SMS message.'));
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->pageTextContains(t('Verify a phone number'));
+    $this->assertSession()->pageTextContains(t('Enter the code you received from a SMS message.'));
   }
 
   /**
@@ -59,13 +59,15 @@ class SmsFrameworkPhoneNumberVerifyForm extends SmsFrameworkBrowserTestBase {
 
     // Invalid code.
     $edit['code'] = $this->randomMachineName();
-    $this->drupalPostForm(Url::fromRoute('sms.phone.verify'), $edit, t('Verify code'));
-    $this->assertText(t('Invalid verification code.'));
+    $this->drupalGet(Url::fromRoute('sms.phone.verify'));
+    $this->submitForm($edit, t('Verify code'));
+    $this->assertSession()->pageTextContains(t('Invalid verification code.'));
 
     // Valid code.
     $edit['code'] = $code;
-    $this->drupalPostForm(Url::fromRoute('sms.phone.verify'), $edit, t('Verify code'));
-    $this->assertText(t('Phone number is now verified.'));
+    $this->drupalGet(Url::fromRoute('sms.phone.verify'));
+    $this->submitForm($edit, t('Verify code'));
+    $this->assertSession()->pageTextContains(t('Phone number is now verified.'));
 
     // Reset verification code static cache.
     $this->resetAll();
@@ -88,10 +90,12 @@ class SmsFrameworkPhoneNumberVerifyForm extends SmsFrameworkBrowserTestBase {
     $this->drupalLogin($account);
 
     $edit['code'] = $this->randomMachineName();
-    $this->drupalPostForm(Url::fromRoute('sms.phone.verify'), $edit, t('Verify code'));
-    $this->assertNoText(t('There has been too many failed verification attempts. Try again later.'));
-    $this->drupalPostForm(Url::fromRoute('sms.phone.verify'), $edit, t('Verify code'));
-    $this->assertText(t('There has been too many failed verification attempts. Try again later.'));
+    $this->drupalGet(Url::fromRoute('sms.phone.verify'));
+    $this->submitForm($edit, t('Verify code'));
+    $this->assertSession()->pageTextNotContains(t('There has been too many failed verification attempts. Try again later.'));
+    $this->drupalGet(Url::fromRoute('sms.phone.verify'));
+    $this->submitForm($edit, t('Verify code'));
+    $this->assertSession()->pageTextContains(t('There has been too many failed verification attempts. Try again later.'));
   }
 
   /**
@@ -106,19 +110,20 @@ class SmsFrameworkPhoneNumberVerifyForm extends SmsFrameworkBrowserTestBase {
 
     // Hard code path, don't use Url::fromRoute.
     $this->drupalGet('/verify');
-    $this->assertResponse(200, 'Default phone number verification route exists at /verify');
+    $this->assertSession()->statusCodeEquals(200, 'Default phone number verification route exists at /verify');
 
     $path_verify = '/' . $this->randomMachineName() . '/' . $this->randomMachineName();
     $edit = [
       'pages[verify]' => $path_verify,
     ];
-    $this->drupalPostForm(Url::fromRoute('sms.settings'), $edit, 'Save configuration');
+    $this->drupalGet(Url::fromRoute('sms.settings'));
+    $this->submitForm($edit, 'Save configuration');
 
     // Ensure the route cache is rebuilt by getting the verify route.
     $this->drupalGet($path_verify);
-    $this->assertResponse(200, 'Phone number verification route changed to ' . $path_verify);
+    $this->assertSession()->statusCodeEquals(200, 'Phone number verification route changed to ' . $path_verify);
     $this->drupalGet('/verify');
-    $this->assertResponse(404, 'Previous route path was invalidated.');
+    $this->assertSession()->statusCodeEquals(404, 'Previous route path was invalidated.');
   }
 
 }
diff --git a/tests/src/Functional/SmsFrameworkPhoneNumberWidgetTest.php b/tests/src/Functional/SmsFrameworkPhoneNumberWidgetTest.php
index e0f43c3..9548650 100644
--- a/tests/src/Functional/SmsFrameworkPhoneNumberWidgetTest.php
+++ b/tests/src/Functional/SmsFrameworkPhoneNumberWidgetTest.php
@@ -24,7 +24,7 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $account = $this->drupalCreateUser([
@@ -51,15 +51,16 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
       '@url' => Url::fromRoute('sms.phone.verify')->toString(),
       '@time' => '1 hour',
     ];
-    $this->assertRaw(t('Enter a phone number. A verification code will be sent as an SMS message, you must enter the code into the <a href="@url">verification form</a> within @time.', $t_args));
+    $this->assertSession()->responseContains(t('Enter a phone number. A verification code will be sent as an SMS message, you must enter the code into the <a href="@url">verification form</a> within @time.', $t_args));
 
     // Create verification code, wait for confirmation.
     $edit = [
       $form_field_phone_number => '+123123123',
     ];
-    $this->drupalPostForm($test_entity->toUrl('edit-form'), $edit, t('Save'));
+    $this->drupalGet($test_entity->toUrl('edit-form'));
+    $this->submitForm($edit, t('Save'));
 
-    $this->assertRaw(t('A verification code has been sent to this phone number. Go to the <a href="@url">verification form</a> and enter the code. The code will expire if it is not verified in', $t_args));
+    $this->assertSession()->responseContains(t('A verification code has been sent to this phone number. Go to the <a href="@url">verification form</a> and enter the code. The code will expire if it is not verified in', $t_args));
 
     $input = $this->xpath('//input[@name="' . $form_field_phone_number . '" and @disabled="disabled"]');
     $this->assertTrue(count($input) === 1, 'The phone number text field is disabled.');
@@ -72,7 +73,7 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
 
     // Check phone number is verified.
     $this->drupalGet($test_entity->toUrl('edit-form'));
-    $this->assertRaw(t('This phone number is verified. <strong>Warning:</strong> Modifying this phone number will remove verification.'));
+    $this->assertSession()->responseContains(t('This phone number is verified. <strong>Warning:</strong> Modifying this phone number will remove verification.'));
 
     $input = $this->xpath('//input[@name="' . $form_field_phone_number . '" and @disabled="disabled"]');
     $this->assertTrue(count($input) === 0, 'The phone number text field is enabled.');
@@ -92,7 +93,7 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
       ->save();
 
     $this->drupalGet($test_entity->toUrl('edit-form'));
-    $this->assertRaw(t('Verification code expired. Try again later.'));
+    $this->assertSession()->responseContains(t('Verification code expired. Try again later.'));
 
     $this->cronRun();
     $this->drupalGet($test_entity->toUrl('edit-form'));
@@ -104,8 +105,8 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
 
     // Ensure phone number was purged.
     $field_phone_number = $phone_number_settings->getFieldName('phone_number');
-    $this->assertFieldByName($field_phone_number . '[0][value]', '');
-    $this->assertRaw(t('Enter a phone number. A verification code will be sent as an SMS message, you must enter the code into the <a href="@url">verification form</a> within @time.', $t_args));
+    $this->assertSession()->fieldValueEquals($field_phone_number . '[0][value]', '');
+    $this->assertSession()->responseContains(t('Enter a phone number. A verification code will be sent as an SMS message, you must enter the code into the <a href="@url">verification form</a> within @time.', $t_args));
   }
 
   /**
@@ -127,7 +128,7 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
     // Ensure phone number value was removed from the field.
     $this->drupalGet($test_entity->toUrl('edit-form'));
     $field_phone_number = $phone_number_settings->getFieldName('phone_number');
-    $this->assertFieldByName($field_phone_number . '[0][value]', '');
+    $this->assertSession()->fieldValueEquals($field_phone_number . '[0][value]', '');
   }
 
   /**
@@ -152,9 +153,9 @@ class SmsFrameworkPhoneNumberWidgetTest extends SmsFrameworkBrowserTestBase {
       '@url' => Url::fromRoute('sms.phone.verify')->toString(),
       '@time' => '1 hour',
     ];
-    $this->assertRaw(t('Save this form to send a new verification code as an SMS message, you must enter the code into the <a href="@url">verification form</a> within @time.', $t_args));
+    $this->assertSession()->responseContains(t('Save this form to send a new verification code as an SMS message, you must enter the code into the <a href="@url">verification form</a> within @time.', $t_args));
     $field_phone_number = $phone_number_settings->getFieldName('phone_number');
-    $this->assertFieldByName($field_phone_number . '[0][value]', '+123123123');
+    $this->assertSession()->fieldValueEquals($field_phone_number . '[0][value]', '+123123123');
   }
 
   // @todo test multi cardinality phone field.
diff --git a/tests/src/Functional/SmsFrameworkSettingsTest.php b/tests/src/Functional/SmsFrameworkSettingsTest.php
index 450d2ec..4405a6e 100644
--- a/tests/src/Functional/SmsFrameworkSettingsTest.php
+++ b/tests/src/Functional/SmsFrameworkSettingsTest.php
@@ -16,7 +16,7 @@ class SmsFrameworkSettingsTest extends SmsFrameworkBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $account = $this->drupalCreateUser([
       'administer smsframework',
@@ -30,8 +30,9 @@ class SmsFrameworkSettingsTest extends SmsFrameworkBrowserTestBase {
   public function testSettingsForm() {
     $edit['fallback_gateway'] = '';
     $edit['pages[verify]'] = '/' . $this->randomMachineName();
-    $this->drupalPostForm(Url::fromRoute('sms.settings'), $edit, 'Save configuration');
-    $this->assertRaw(t('SMS settings saved.'));
+    $this->drupalGet(Url::fromRoute('sms.settings'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains(t('SMS settings saved.'));
   }
 
   /**
@@ -41,8 +42,9 @@ class SmsFrameworkSettingsTest extends SmsFrameworkBrowserTestBase {
     $gateway = $this->createMemoryGateway();
     $edit['fallback_gateway'] = $gateway->id();
     $edit['pages[verify]'] = '/' . $this->randomMachineName();
-    $this->drupalPostForm(Url::fromRoute('sms.settings'), $edit, 'Save configuration');
-    $this->assertRaw(t('SMS settings saved.'));
+    $this->drupalGet(Url::fromRoute('sms.settings'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains(t('SMS settings saved.'));
   }
 
   /**
@@ -51,8 +53,9 @@ class SmsFrameworkSettingsTest extends SmsFrameworkBrowserTestBase {
   public function testVerificationPathInvalid() {
     // Test invalid path.
     $edit['pages[verify]'] = $this->randomMachineName() . '/' . $this->randomMachineName();
-    $this->drupalPostForm(Url::fromRoute('sms.settings'), $edit, 'Save configuration');
-    $this->assertRaw(t("Path must begin with a '/' character."));
+    $this->drupalGet(Url::fromRoute('sms.settings'));
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->responseContains(t("Path must begin with a '/' character."));
   }
 
 }
diff --git a/tests/src/Functional/SmsFrameworkUpdateTest.php b/tests/src/Functional/SmsFrameworkUpdateTest.php
index 72c688c..87b1258 100644
--- a/tests/src/Functional/SmsFrameworkUpdateTest.php
+++ b/tests/src/Functional/SmsFrameworkUpdateTest.php
@@ -67,8 +67,8 @@ class SmsFrameworkUpdateTest extends UpdatePathTestBase {
     // Confirm that the existing SMS message was not clobbered.
     /** @var \Drupal\sms\Entity\SmsMessageInterface[] $sms_messages */
     $sms_messages = SmsMessage::loadMultiple();
-    $this->assertEqual(1, count($sms_messages));
-    $this->assertEqual(2, count($sms_messages[1]->getRecipients()));
+    $this->assertEquals(1, count($sms_messages));
+    $this->assertEquals(2, count($sms_messages[1]->getRecipients()));
     $this->assertNull($sms_messages[1]->getResult());
 
     // Create new SMS with delivery report and save it.
@@ -92,9 +92,9 @@ class SmsFrameworkUpdateTest extends UpdatePathTestBase {
     \Drupal::entityTypeManager()->getStorage('sms')->resetCache();
 
     $sms_messages = SmsMessage::loadMultiple();
-    $this->assertEqual(2, count($sms_messages));
+    $this->assertEquals(2, count($sms_messages));
     $this->assertTrue($sms_messages[2]->getResult() instanceof SmsMessageResultInterface);
-    $this->assertEqual(count($sms_message->getRecipients()), count($sms_messages[2]->getResult()->getReports()));
+    $this->assertEquals(count($sms_message->getRecipients()), count($sms_messages[2]->getResult()->getReports()));
   }
 
 }
diff --git a/tests/src/FunctionalJavascript/SmsFrameworkPhoneNumberAdminTest.php b/tests/src/FunctionalJavascript/SmsFrameworkPhoneNumberAdminTest.php
index 8c6fae2..6b320e1 100644
--- a/tests/src/FunctionalJavascript/SmsFrameworkPhoneNumberAdminTest.php
+++ b/tests/src/FunctionalJavascript/SmsFrameworkPhoneNumberAdminTest.php
@@ -36,7 +36,7 @@ class SmsFrameworkPhoneNumberAdminTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->entityTypeManager = $this->container->get('entity_type.manager');
 
diff --git a/tests/src/Kernel/Migrate/MigrateD6SmsPhoneNumberTest.php b/tests/src/Kernel/Migrate/MigrateD6SmsPhoneNumberTest.php
index d99c783..2e86352 100644
--- a/tests/src/Kernel/Migrate/MigrateD6SmsPhoneNumberTest.php
+++ b/tests/src/Kernel/Migrate/MigrateD6SmsPhoneNumberTest.php
@@ -23,7 +23,7 @@ class MigrateD6SmsPhoneNumberTest extends MigrateDrupal6TestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->loadFixture(__DIR__ . '/../../../fixtures/migrate/drupal6.php');
   }
diff --git a/tests/src/Kernel/SmsFrameworkDeliveryReportEntityTest.php b/tests/src/Kernel/SmsFrameworkDeliveryReportEntityTest.php
index fb47dbe..37b7b52 100644
--- a/tests/src/Kernel/SmsFrameworkDeliveryReportEntityTest.php
+++ b/tests/src/Kernel/SmsFrameworkDeliveryReportEntityTest.php
@@ -43,7 +43,7 @@ class SmsFrameworkDeliveryReportEntityTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('entity_test');
     $this->installEntitySchema('user');
diff --git a/tests/src/Kernel/SmsFrameworkDeliveryReportUpdateTest.php b/tests/src/Kernel/SmsFrameworkDeliveryReportUpdateTest.php
index cf8d775..5d1e821 100644
--- a/tests/src/Kernel/SmsFrameworkDeliveryReportUpdateTest.php
+++ b/tests/src/Kernel/SmsFrameworkDeliveryReportUpdateTest.php
@@ -44,7 +44,7 @@ class SmsFrameworkDeliveryReportUpdateTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->httpClient = $this->container->get('http_client');
     $this->defaultSmsProvider = $this->container->get('sms.provider');
diff --git a/tests/src/Kernel/SmsFrameworkGatewayPluginTest.php b/tests/src/Kernel/SmsFrameworkGatewayPluginTest.php
index 0e0c432..9f771ee 100644
--- a/tests/src/Kernel/SmsFrameworkGatewayPluginTest.php
+++ b/tests/src/Kernel/SmsFrameworkGatewayPluginTest.php
@@ -25,7 +25,7 @@ class SmsFrameworkGatewayPluginTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('sms');
     $this->installEntitySchema('sms_result');
diff --git a/tests/src/Kernel/SmsFrameworkIncomingRouteTest.php b/tests/src/Kernel/SmsFrameworkIncomingRouteTest.php
index c9bc3ce..03edfae 100644
--- a/tests/src/Kernel/SmsFrameworkIncomingRouteTest.php
+++ b/tests/src/Kernel/SmsFrameworkIncomingRouteTest.php
@@ -38,7 +38,7 @@ class SmsFrameworkIncomingRouteTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->routeProvider = $this->container->get('router.route_provider');
   }
diff --git a/tests/src/Kernel/SmsFrameworkKernelBase.php b/tests/src/Kernel/SmsFrameworkKernelBase.php
index 709d161..e9917e5 100644
--- a/tests/src/Kernel/SmsFrameworkKernelBase.php
+++ b/tests/src/Kernel/SmsFrameworkKernelBase.php
@@ -17,7 +17,7 @@ abstract class SmsFrameworkKernelBase extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig('sms');
   }
diff --git a/tests/src/Kernel/SmsFrameworkMessageEntityTest.php b/tests/src/Kernel/SmsFrameworkMessageEntityTest.php
index 7de3999..08a15c2 100644
--- a/tests/src/Kernel/SmsFrameworkMessageEntityTest.php
+++ b/tests/src/Kernel/SmsFrameworkMessageEntityTest.php
@@ -44,7 +44,7 @@ class SmsFrameworkMessageEntityTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('sms');
     $this->installEntitySchema('sms_result');
diff --git a/tests/src/Kernel/SmsFrameworkMessageResultEntityTest.php b/tests/src/Kernel/SmsFrameworkMessageResultEntityTest.php
index 4dcbbe7..03187ee 100644
--- a/tests/src/Kernel/SmsFrameworkMessageResultEntityTest.php
+++ b/tests/src/Kernel/SmsFrameworkMessageResultEntityTest.php
@@ -37,7 +37,7 @@ class SmsFrameworkMessageResultEntityTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('entity_test');
     $this->installEntitySchema('user');
diff --git a/tests/src/Kernel/SmsFrameworkPhoneNumberProviderTest.php b/tests/src/Kernel/SmsFrameworkPhoneNumberProviderTest.php
index 11d63a9..a7b283d 100644
--- a/tests/src/Kernel/SmsFrameworkPhoneNumberProviderTest.php
+++ b/tests/src/Kernel/SmsFrameworkPhoneNumberProviderTest.php
@@ -65,7 +65,7 @@ class SmsFrameworkPhoneNumberProviderTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('entity_test');
     $this->installEntitySchema('sms_phone_number_verification');
diff --git a/tests/src/Kernel/SmsFrameworkPhoneNumberVerificationTest.php b/tests/src/Kernel/SmsFrameworkPhoneNumberVerificationTest.php
index b57178b..0fed560 100644
--- a/tests/src/Kernel/SmsFrameworkPhoneNumberVerificationTest.php
+++ b/tests/src/Kernel/SmsFrameworkPhoneNumberVerificationTest.php
@@ -66,7 +66,7 @@ class SmsFrameworkPhoneNumberVerificationTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('entity_test');
     $this->installEntitySchema('sms_phone_number_verification');
diff --git a/tests/src/Kernel/SmsFrameworkProcessorTest.php b/tests/src/Kernel/SmsFrameworkProcessorTest.php
index a510d74..b2a5027 100644
--- a/tests/src/Kernel/SmsFrameworkProcessorTest.php
+++ b/tests/src/Kernel/SmsFrameworkProcessorTest.php
@@ -57,7 +57,7 @@ class SmsFrameworkProcessorTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installEntitySchema('sms');
diff --git a/tests/src/Kernel/SmsFrameworkProviderTest.php b/tests/src/Kernel/SmsFrameworkProviderTest.php
index feeb248..53f3fa4 100644
--- a/tests/src/Kernel/SmsFrameworkProviderTest.php
+++ b/tests/src/Kernel/SmsFrameworkProviderTest.php
@@ -63,7 +63,7 @@ class SmsFrameworkProviderTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installEntitySchema('sms');
diff --git a/tests/src/Kernel/SmsFrameworkPushedDeliveryReportTest.php b/tests/src/Kernel/SmsFrameworkPushedDeliveryReportTest.php
index e2106ce..452d98a 100644
--- a/tests/src/Kernel/SmsFrameworkPushedDeliveryReportTest.php
+++ b/tests/src/Kernel/SmsFrameworkPushedDeliveryReportTest.php
@@ -31,7 +31,7 @@ class SmsFrameworkPushedDeliveryReportTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->routeProvider = $this->container->get('router.route_provider');
   }
diff --git a/tests/src/Kernel/SmsFrameworkQueueTest.php b/tests/src/Kernel/SmsFrameworkQueueTest.php
index 6c3416b..aecdbec 100644
--- a/tests/src/Kernel/SmsFrameworkQueueTest.php
+++ b/tests/src/Kernel/SmsFrameworkQueueTest.php
@@ -52,7 +52,7 @@ class SmsFrameworkQueueTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installEntitySchema('sms');
diff --git a/tests/src/Kernel/SmsFrameworkRecipientGatewayEventTest.php b/tests/src/Kernel/SmsFrameworkRecipientGatewayEventTest.php
index 98991c0..41f1eab 100644
--- a/tests/src/Kernel/SmsFrameworkRecipientGatewayEventTest.php
+++ b/tests/src/Kernel/SmsFrameworkRecipientGatewayEventTest.php
@@ -32,7 +32,7 @@ class SmsFrameworkRecipientGatewayEventTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('sms');
     $this->smsProvider = $this->container->get('sms.provider');
diff --git a/tests/src/Kernel/SmsFrameworkSmsSendTest.php b/tests/src/Kernel/SmsFrameworkSmsSendTest.php
index c53ead2..d28f00f 100644
--- a/tests/src/Kernel/SmsFrameworkSmsSendTest.php
+++ b/tests/src/Kernel/SmsFrameworkSmsSendTest.php
@@ -33,7 +33,7 @@ class SmsFrameworkSmsSendTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->defaultSmsProvider = $this->container->get('sms.provider');
   }
diff --git a/tests/src/Kernel/SmsFrameworkTokenTest.php b/tests/src/Kernel/SmsFrameworkTokenTest.php
index e9f3dc6..fc629c2 100644
--- a/tests/src/Kernel/SmsFrameworkTokenTest.php
+++ b/tests/src/Kernel/SmsFrameworkTokenTest.php
@@ -33,7 +33,7 @@ class SmsFrameworkTokenTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->tokenService = $this->container->get('token');
     $this->installConfig(['system']);
diff --git a/tests/src/Kernel/SmsFrameworkVerificationMaintenanceTest.php b/tests/src/Kernel/SmsFrameworkVerificationMaintenanceTest.php
index 13a8445..bea361d 100644
--- a/tests/src/Kernel/SmsFrameworkVerificationMaintenanceTest.php
+++ b/tests/src/Kernel/SmsFrameworkVerificationMaintenanceTest.php
@@ -42,7 +42,7 @@ class SmsFrameworkVerificationMaintenanceTest extends SmsFrameworkKernelBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('entity_test');
     $this->installEntitySchema('sms_phone_number_verification');
diff --git a/tests/src/Kernel/SmsFrameworkViewsTest.php b/tests/src/Kernel/SmsFrameworkViewsTest.php
index 739b638..be157be 100644
--- a/tests/src/Kernel/SmsFrameworkViewsTest.php
+++ b/tests/src/Kernel/SmsFrameworkViewsTest.php
@@ -55,7 +55,7 @@ class SmsFrameworkViewsTest extends ViewsKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp($import_test_views = TRUE) {
+  protected function setUp($import_test_views = TRUE): void {
     parent::setUp($import_test_views);
 
     $this->installEntitySchema('user');
