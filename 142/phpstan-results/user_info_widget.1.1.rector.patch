diff --git a/src/Plugin/Block/UserInfoWidgetBlock.php b/src/Plugin/Block/UserInfoWidgetBlock.php
index 6cf58f4..c8aea5f 100644
--- a/src/Plugin/Block/UserInfoWidgetBlock.php
+++ b/src/Plugin/Block/UserInfoWidgetBlock.php
@@ -15,6 +15,7 @@
 
 namespace Drupal\user_info_widget\Plugin\Block;
 
+use Drupal\Core\Url;
 use Drupal;
 use Drupal\Core\Block\BlockBase;
 use Drupal\file\Entity\File;
@@ -55,7 +56,7 @@ class UserInfoWidgetBlock extends BlockBase
 
         if ($profile_field = $config->get('userinfowidget_profile_picture')) {
             if ($file = $this->getFileOptions($user, $profile_field)) {
-                $picture = file_create_url($file['uri']);
+                $picture = \Drupal::service('file_url_generator')->generateAbsoluteString($file['uri']);
 
                 if ($file['alt']) {
                     $alt = $file['alt'];
@@ -76,7 +77,7 @@ class UserInfoWidgetBlock extends BlockBase
         return [
         '#theme' => 'user_info_widget',
         '#user_picture' => !empty($picture) && getimagesize($picture) ? $picture : '',
-        '#config_path' => Drupal\Core\Url::fromRoute('user_info_widget.admin_settings')
+        '#config_path' => Url::fromRoute('user_info_widget.admin_settings')
         ->toString(),
         '#menu' => $config->get('userinfowidget_widget_menu'),
         '#alt' => $alt,
