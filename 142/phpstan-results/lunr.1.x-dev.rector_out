modules/contrib/lunr/lunr.api.php
modules/contrib/lunr/src/Entity/LunrSearch.php
modules/contrib/lunr/lunr.module
modules/contrib/lunr/modules/lunr_facet_example/lunr_facet_example.module
modules/contrib/lunr/scripts/request.php
modules/contrib/lunr/scripts/search_settings.php
modules/contrib/lunr/src/Controller/LunrSearchController.php
modules/contrib/lunr/src/EventSubscriber/RouteSubscriber.php
modules/contrib/lunr/src/EventSubscriber/TomePathSubscriber.php
modules/contrib/lunr/src/Controller/LunrSearchIndexController.php
modules/contrib/lunr/src/Form/LunrSearchEditForm.php
modules/contrib/lunr/src/LunrSearchInterface.php
modules/contrib/lunr/src/LunrSearchListBuilder.php
modules/contrib/lunr/src/LunrServiceProvider.php
modules/contrib/lunr/src/Plugin/Block/LunrSearchBlock.php
modules/contrib/lunr/src/Plugin/views/display/LunrSearchIndex.php
modules/contrib/lunr/src/Plugin/views/row/LunrSearchIndexRow.php
modules/contrib/lunr/src/Plugin/views/style/LunrSearchIndexJson.php
modules/contrib/lunr/tests/scripts/create_articles.php
modules/contrib/lunr/tests/src/FunctionalJavascript/LunrSearchTest.php

3 files with changes
====================

1) modules/contrib/lunr/src/Controller/LunrSearchController.php:76

    ---------- begin diff ----------
@@ @@

     $build['#attached']['library'][] = 'lunr/search';
     $build['#attached']['drupalSettings']['lunr']['searchSettings'][$lunr_search->id()] = [
-      'indexPath' => file_url_transform_relative(file_create_url($lunr_search->getIndexPath()) . '?v=' . $lunr_search->getLastIndexTime()),
-      'documentPathPattern' => file_url_transform_relative(file_create_url($lunr_search->getDocumentPathPattern()) . '?v=' . $lunr_search->getLastIndexTime()),
+      'indexPath' => \Drupal::service('file_url_generator')->transformRelative(\Drupal::service('file_url_generator')->generateAbsoluteString($lunr_search->getIndexPath()) . '?v=' . $lunr_search->getLastIndexTime()),
+      'documentPathPattern' => \Drupal::service('file_url_generator')->transformRelative(\Drupal::service('file_url_generator')->generateAbsoluteString($lunr_search->getDocumentPathPattern()) . '?v=' . $lunr_search->getLastIndexTime()),
       'displayField' => $lunr_search->getDisplayField(),
       'resultsPerPage' => $lunr_search->getResultsPerPage(),
       'id' => $lunr_search->id(),
     ];
     $suffix = '?' . \Drupal::state()->get('system.css_js_query_string', '0');
-    $build['#attached']['drupalSettings']['lunr']['workerPath'] = base_path() . drupal_get_path('module', 'lunr') . '/js/search.worker.js' . $suffix;
-    $build['#attached']['drupalSettings']['lunr']['lunrPath'] = base_path() . drupal_get_path('module', 'lunr') . '/js/vendor/lunr/lunr.min.js' . $suffix;
+    $build['#attached']['drupalSettings']['lunr']['workerPath'] = base_path() . \Drupal::service('extension.list.module')->getPath('lunr') . '/js/search.worker.js' . $suffix;
+    $build['#attached']['drupalSettings']['lunr']['lunrPath'] = base_path() . \Drupal::service('extension.list.module')->getPath('lunr') . '/js/vendor/lunr/lunr.min.js' . $suffix;

     CacheableMetadata::createFromObject($lunr_search)->applyTo($build);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileCreateUrlRector
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/lunr/tests/src/FunctionalJavascript/LunrSearchTest.php:32

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $user = $this->drupalCreateUser(['administer lunr search']);
     $this->drupalLogin($user);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/lunr/src/EventSubscriber/TomePathSubscriber.php:56

    ---------- begin diff ----------
@@ @@
         $event->addPath(file_create_url($filename), ['language_processed' => 'language_processed']);
       }
     }
-    $event->addPath(drupal_get_path('module', 'lunr') . '/js/search.worker.js', ['language_processed' => 'language_processed']);
-    $event->addPath(drupal_get_path('module', 'lunr') . '/js/vendor/lunr/lunr.min.js', ['language_processed' => 'language_processed']);
+    $event->addPath(\Drupal::service('extension.list.module')->getPath('lunr') . '/js/search.worker.js', ['language_processed' => 'language_processed']);
+    $event->addPath(\Drupal::service('extension.list.module')->getPath('lunr') . '/js/vendor/lunr/lunr.min.js', ['language_processed' => 'language_processed']);
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector


 [OK] 3 files have been changed by Rector                                       

