modules/contrib/entity_comparison/entity_comparison.api.php
modules/contrib/entity_comparison/entity_comparison.module
modules/contrib/entity_comparison/src/Plugin/Derivative/EntityComparisonLinkBlock.php
modules/contrib/entity_comparison/src/Plugin/Field/FieldFormatter/EntityComparisonLinkFieldFormatter.php
modules/contrib/entity_comparison/entity_comparison.theme.inc
modules/contrib/entity_comparison/src/Plugin/Field/FieldType/EntityComparisonLinkFieldType.php
modules/contrib/entity_comparison/src/Controller/EntityComparisonController.php
modules/contrib/entity_comparison/src/Plugin/views/field/EntityComparisonLink.php
modules/contrib/entity_comparison/src/Routing/EntityComparisonRoutes.php
modules/contrib/entity_comparison/src/Tests/EntityComparisonTest.php
modules/contrib/entity_comparison/src/Entity/EntityComparison.php
modules/contrib/entity_comparison/src/Entity/EntityComparisonInterface.php
modules/contrib/entity_comparison/src/EntityComparisonHtmlRouteProvider.php
modules/contrib/entity_comparison/src/EntityComparisonListBuilder.php
modules/contrib/entity_comparison/src/EntityComparisonPermissions.php
modules/contrib/entity_comparison/src/Form/EntityComparisonDeleteForm.php
modules/contrib/entity_comparison/src/Form/EntityComparisonForm.php
modules/contrib/entity_comparison/src/Plugin/Block/EntityComparisonBlock.php
modules/contrib/entity_comparison/src/Plugin/Block/EntityComparisonLinkBlock.php
modules/contrib/entity_comparison/src/Plugin/Derivative/EntityComparisonBlock.php

1 file with changes
===================

1) modules/contrib/entity_comparison/src/Tests/EntityComparisonTest.php:76

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Collect admin permissions.
@@ @@
     \Drupal::service('router.builder')->rebuildIfNeeded();

     $edit = ['display_modes_custom[' . $display_id . ']' => TRUE];
-    $this->drupalPostForm('admin/structure/types/manage/product/display', $edit, t('Save'));
+    $this->drupalGet('admin/structure/types/manage/product/display');
+    $this->submitForm($edit, t('Save'));
   }

   /**
@@ @@
       'fields[sku][region]' => 'content',
       'fields[link_for_entity_comparison_product_comparison][region]' => 'hidden',
     ];
-    $this->drupalPostForm($manage_display, $edit, t('Save'));
+    $this->drupalGet($manage_display);
+    $this->submitForm($edit, t('Save'));
   }

   /**
@@ @@
   public function testEntityComparisonListPage() {
     $this->drupalLogin($this->adminUser);
     $this->drupalGet('/admin/structure/entity_comparison');
-    $this->assertText('Product comparison');
+    $this->assertSession()->pageTextContains('Product comparison');
   }

   /**
@@ @@
   public function testViewmodeIsEnabled() {
     $this->drupalLogin($this->adminUser);
     $this->drupalGet('/admin/structure/types/manage/product/display/product_product_comparison');
-    $this->assertText('product_comparison');
-    $this->assertText('Link for entity comparison');
+    $this->assertSession()->pageTextContains('product_comparison');
+    $this->assertSession()->pageTextContains('Link for entity comparison');
   }

   /**
@@ @@
     $allowed_user = $this->drupalCreateUser(['use product_comparison entity comparison', 'access content']);
     $this->drupalLogin($allowed_user);
     $this->drupalGet('node/' . $this->products[0]->id());
-    $this->assertText('Add product to comparison list');
+    $this->assertSession()->pageTextContains('Add product to comparison list');
     $this->drupalLogout();

     // Denied user.
@@ @@
     $denied_user = $this->drupalCreateUser(['access content']);
     $this->drupalLogin($denied_user);
     $this->drupalGet('node/' . $this->products[0]->id());
-    $this->assertNoText('Add product to comparison list');
+    $this->assertSession()->pageTextNotContains('Add product to comparison list');
     $this->drupalLogout();
   }

@@ @@
     // Add first product.
     $this->drupalGet('node/' . $this->products[0]->id());
     $this->clickLink('Add product to comparison list');
-    $this->assertText('You have successfully added Product 1 to Product comparison list.', 'User can use the add link');
+    $this->assertSession()->pageTextContains('You have successfully added Product 1 to Product comparison list.');

     $this->clickLink('Remove product from the comparison');
-    $this->assertText('You have successfully removed Product 1 from Product comparison.', 'User can use the remove link');
+    $this->assertSession()->pageTextContains('You have successfully removed Product 1 from Product comparison.');
     $this->clickLink('Add product to comparison list');

     // Add second product.
@@ @@
     // Add first product.
     $this->drupalGet('node/' . $this->products[2]->id());
     $this->clickLink('Add product to comparison list');
-    $this->assertText('You can only add 2 items to the Product comparison list.', 'Limit function works great.');
+    $this->assertSession()->pageTextContains('You can only add 2 items to the Product comparison list.');
   }

   /**
@@ @@

     // Got to the compare page.
     $this->drupalGet('compare/product-comparison');
-    $this->assertText('Product 1', 'Product 1 is in the list.');
-    $this->assertText('Product 2', 'Product 2 is in the list.');
+    $this->assertSession()->pageTextContains('Product 1');
+    $this->assertSession()->pageTextContains('Product 2');

-    $this->assertText('Remove product from the comparison', 'Remove links are visible');
+    $this->assertSession()->pageTextContains('Remove product from the comparison');

     $this->clickLink('Remove product from the comparison', 0);

-    $this->assertText('You have successfully removed Product 1 from Product comparison.', 'The product 1 is removed successfully.');
+    $this->assertSession()->pageTextContains('You have successfully removed Product 1 from Product comparison.');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertNoTextRector
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

