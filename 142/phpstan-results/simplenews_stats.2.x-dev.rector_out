modules/contrib/simplenews_stats/simplenews_stats.install
modules/contrib/simplenews_stats/src/Plugin/views/filter/SimplenewsStatsAction.php
modules/contrib/simplenews_stats/src/Plugin/views/filter/SimplenewsStatsEntityAssociated.php
modules/contrib/simplenews_stats/src/Plugin/views/filter/SimplenewsStatsUser.php
modules/contrib/simplenews_stats/src/SimplenewsStatsAccessControlHandler.php
modules/contrib/simplenews_stats/simplenews_stats.module
modules/contrib/simplenews_stats/simplenews_stats.views.inc
modules/contrib/simplenews_stats/src/Controller/SimplenewsStatsAdminController.php
modules/contrib/simplenews_stats/src/SimplenewsStatsAllowedLinks.php
modules/contrib/simplenews_stats/src/Controller/SimplenewsStatsAutocompleteController.php
modules/contrib/simplenews_stats/src/SimplenewsStatsEngine.php
modules/contrib/simplenews_stats/src/Controller/SimplenewsStatsController.php
modules/contrib/simplenews_stats/src/SimplenewsStatsEntityStorage.php
modules/contrib/simplenews_stats/src/Entity/SimplenewsStats.php
modules/contrib/simplenews_stats/src/SimplenewsStatsEntityStorageInterface.php
modules/contrib/simplenews_stats/src/SimplenewsStatsInterface.php
modules/contrib/simplenews_stats/src/SimplenewsStatsItemInterface.php
modules/contrib/simplenews_stats/src/SimplenewsStatsItemListBuilder.php
modules/contrib/simplenews_stats/src/SimplenewsStatsItemViewBuilder.php
modules/contrib/simplenews_stats/src/SimplenewsStatsListBuilder.php
modules/contrib/simplenews_stats/src/Entity/SimplenewsStatsItem.php
modules/contrib/simplenews_stats/src/SimplenewsStatsMail.php
modules/contrib/simplenews_stats/src/EventSubscriber/SimplenewsStatsEventSubscriber.php
modules/contrib/simplenews_stats/src/Plugin/views/field/SimplenewsStatsEntityAssociated.php
modules/contrib/simplenews_stats/src/SimplenewsStatsPage.php
modules/contrib/simplenews_stats/src/SimplenewsStatsTools.php
modules/contrib/simplenews_stats/src/SimplenewsStatsViewBuilder.php

5 files with changes
====================

1) modules/contrib/simplenews_stats/src/EventSubscriber/SimplenewsStatsEventSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\simplenews_stats\EventSubscriber;

+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;

 /**
@@ @@
   /**
    * Catch and log new newsletter hit.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    */
-  public function simplenewsLog(GetResponseEvent $event) {
+  public function simplenewsLog(RequestEvent $event) {
     $value = $event->getRequest()->query->get('sstc');
     if (!$value) {
       return;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


2) modules/contrib/simplenews_stats/src/Controller/SimplenewsStatsController.php:71

    ---------- begin diff ----------
@@ @@
    */
   public function hitView() {
     $response = new Response();
-    $image = file_get_contents(drupal_get_path('module', 'simplenews_stats') . '/assets/image/simple.png');
+    $image = file_get_contents(\Drupal::service('extension.list.module')->getPath('simplenews_stats') . '/assets/image/simple.png');
     $response->setContent($image);
     $response->headers->set('Content-Type', 'image/png');
     $response->headers->set('Content-Transfer-Encoding', 'binary');
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/simplenews_stats/simplenews_stats.install:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\Core\Database\Database;
+use Drupal\views\Entity\View;
 /**
  * @file
  * Install file of simplenews stats module.
@@ @@
   $key_value->set($key_name, $storage_schema);

   // Updates the base database field.
-  $db_schema = \Drupal\Core\Database\Database::getConnection()->schema();
+  $db_schema = Database::getConnection()->schema();
   $db_schema->changeField($entity_type_id, $field_name, $field_name, [
     'type'     => 'varchar',
     'length'   => $length,
@@ @@
     ];

     foreach ($views as $view_name => $conf_name) {
-      if (!\Drupal\views\Entity\View::load($view_name)) {
-        $config_path = drupal_get_path('module', 'simplenews_stats') . "/config/optional/{$conf_name}.yml";
+      if (!View::load($view_name)) {
+        $config_path = \Drupal::service('extension.list.module')->getPath('simplenews_stats') . "/config/optional/{$conf_name}.yml";
         $data = ['uuid' => (new Uuid())->generate()] + Yaml::decode(file_get_contents($config_path));
         \Drupal::configFactory()
           ->getEditable($conf_name)
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


4) modules/contrib/simplenews_stats/src/SimplenewsStatsMail.php:165

    ---------- begin diff ----------
@@ @@
       ],
     ];

-    $this->setBody($this->getBody() . render($image));
+    $this->setBody($this->getBody() . \Drupal::service('renderer')->render($image));
     return $this;
   }
    ----------- end diff -----------

Applied rules:
 * RenderRector
 * ArgumentRemoverRector
 * WrapReturnRector


5) modules/contrib/simplenews_stats/src/SimplenewsStatsListBuilder.php:80

    ---------- begin diff ----------
@@ @@
   public function buildRow(EntityInterface $entity) {
     /* @var $entity \Drupal\simplenews_stats\Entity\SimplenewsStats */

-    $row['title']       = $entity->link();
+    $row['title']       = $entity->toLink()->toString();
     $row['views']       = $entity->views->first()->getValue()['value'];
     $row['clicks']      = $entity->clicks->first()->getValue()['value'];
     $row['total_mails'] = $entity->total_emails->first()->getValue()['value'];
    ----------- end diff -----------

Applied rules:
 * EntityInterfaceLinkRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 5 files have been changed by Rector                                       

