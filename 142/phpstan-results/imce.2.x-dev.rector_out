modules/contrib/imce/imce.install
modules/contrib/imce/src/Form/ImceProfileDeleteForm.php
modules/contrib/imce/src/Plugin/ImcePlugin/Upload.php
modules/contrib/imce/imce.module
modules/contrib/imce/src/Annotation/ImcePlugin.php
modules/contrib/imce/src/Controller/ImceController.php
modules/contrib/imce/src/Form/ImceProfileForm.php
modules/contrib/imce/src/Controller/ImceFrameController.php
modules/contrib/imce/src/Controller/ImceHelpController.php
modules/contrib/imce/src/Routing/ImceRouteSubscriber.php
modules/contrib/imce/src/Entity/ImceProfile.php
modules/contrib/imce/tests/src/Kernel/Form/ImceProfileDeleteFormTest.php
modules/contrib/imce/tests/src/Kernel/Form/ImceSettingsFormTest.php
modules/contrib/imce/tests/src/Kernel/ImceFolderTest.php
modules/contrib/imce/tests/src/Kernel/Plugin/CKEditorPlugin/ImceTest.php
modules/contrib/imce/src/Form/ImceSettingsForm.php
modules/contrib/imce/tests/src/Kernel/Plugin/ImcePlugin/CoreTest.php
modules/contrib/imce/tests/src/Kernel/Plugin/ImcePlugin/DeleteTest.php
modules/contrib/imce/src/Imce.php
modules/contrib/imce/tests/src/Kernel/Plugin/ImcePlugin/NewFolderTest.php
modules/contrib/imce/tests/src/Kernel/Plugin/ImcePlugin/ResizeTest.php
modules/contrib/imce/tests/src/Kernel/Plugin/ImcePlugin/UploadTest.php
modules/contrib/imce/tests/src/Kernel/Plugin/KernelTestBasePlugin.php
modules/contrib/imce/tests/src/Unit/ImceFileTest.php
modules/contrib/imce/tests/src/Unit/ImceFolderTest.php
modules/contrib/imce/src/ImceFM.php
modules/contrib/imce/src/ImceFile.php
modules/contrib/imce/src/ImceFileField.php
modules/contrib/imce/src/ImceFolder.php
modules/contrib/imce/src/ImceItem.php
modules/contrib/imce/src/ImcePluginBase.php
modules/contrib/imce/src/ImcePluginInterface.php
modules/contrib/imce/src/ImcePluginManager.php
modules/contrib/imce/src/ImceProfileListBuilder.php
modules/contrib/imce/src/ImceSettersTrait.php
modules/contrib/imce/src/Plugin/BUEditorPlugin/Imce.php
modules/contrib/imce/src/Plugin/CKEditorPlugin/Imce.php
modules/contrib/imce/src/Plugin/ImcePlugin/Core.php
modules/contrib/imce/src/Plugin/ImcePlugin/Delete.php
modules/contrib/imce/src/Plugin/ImcePlugin/Newfolder.php
modules/contrib/imce/src/Plugin/ImcePlugin/Resize.php

3 files with changes
====================

1) modules/contrib/imce/tests/src/Kernel/Plugin/KernelTestBasePlugin.php:131

    ---------- begin diff ----------
@@ @@
    *   uri.
    */
   protected function getTestFileUri() {
-    \Drupal::service('file_system')->copy(drupal_get_path('module', 'imce') . '/tests/files/ciandt.jpg', PublicStream::basePath());
+    \Drupal::service('file_system')->copy(\Drupal::service('extension.list.module')->getPath('imce') . '/tests/files/ciandt.jpg', PublicStream::basePath());
     return 'public://ciandt.jpg';
   }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/imce/src/Plugin/CKEditorPlugin/Imce.php:26

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function getFile() {
-    return drupal_get_path('module', 'imce') . '/js/plugins/ckeditor/imce.ckeditor.js';
+    return \Drupal::service('extension.list.module')->getPath('imce') . '/js/plugins/ckeditor/imce.ckeditor.js';
   }

   /**
@@ @@
    */
   public function getConfig(Editor $editor) {
     return [
-      'ImceImageIcon' => file_create_url($this->imageIcon()),
-      'ImceLinkIcon' => file_create_url($this->linkIcon()),
+      'ImceImageIcon' => \Drupal::service('file_url_generator')->generateAbsoluteString($this->imageIcon()),
+      'ImceLinkIcon' => \Drupal::service('file_url_generator')->generateAbsoluteString($this->linkIcon()),
     ];
   }

@@ @@
    * Uses the icon from drupalimage plugin.
    */
   public function imageIcon() {
-    return drupal_get_path('module', 'imce') . '/js/plugins/ckeditor/icons/imceimage.png';
+    return \Drupal::service('extension.list.module')->getPath('imce') . '/js/plugins/ckeditor/icons/imceimage.png';
   }

   /**
@@ @@
    * Uses the icon from drupallink plugin.
    */
   public function linkIcon() {
-    return drupal_get_path('module', 'imce') . '/js/plugins/ckeditor/icons/imcelink.png';
+    return \Drupal::service('extension.list.module')->getPath('imce') . '/js/plugins/ckeditor/icons/imcelink.png';
   }

 }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/imce/src/Imce.php:104

    ---------- begin diff ----------
@@ @@
     $conf['root_url'] = preg_replace('@/(?:%2E|\.)$@i', '', file_create_url($conf['root_uri'] . '.'));
     // Convert to relative.
     if (!\Drupal::config('imce.settings')->get('abs_urls')) {
-      $conf['root_url'] = file_url_transform_relative($conf['root_url']);
+      $conf['root_url'] = \Drupal::service('file_url_generator')->transformRelative($conf['root_url']);
     }
     $conf['token'] = $user->isAnonymous() ? 'anon' : \Drupal::csrfToken()->get('imce');
     // Process folders.
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * WrapReturnRector


 [OK] 3 files have been changed by Rector                                       

