diff --git a/tests/src/Functional/ConfigurationTest.php b/tests/src/Functional/ConfigurationTest.php
index 27e1e14..c8c3507 100644
--- a/tests/src/Functional/ConfigurationTest.php
+++ b/tests/src/Functional/ConfigurationTest.php
@@ -48,7 +48,7 @@ class ConfigurationTest extends WebformBrowserTestBase {
     }
     else {
       $config_name = 'webform.webform.' . $id;
-      $config_directory = drupal_get_path('module', 'webform_pardot_handler') . '/tests/modules/test/config/install';
+      $config_directory = \Drupal::service('extension.list.module')->getPath('webform_pardot_handler') . '/tests/modules/test/config/install';
       if (!file_exists("$config_directory/$config_name.yml")) {
         throw new \Exception("Webform $id does not exist in $config_directory");
       }
@@ -70,19 +70,21 @@ class ConfigurationTest extends WebformBrowserTestBase {
     $webformId = 'multi_step_pardot_test_form';
     $handlerId = 'submit_data_to_pardot';
     $handlerEditPath = "/admin/structure/webform/manage/{$webformId}/handlers/{$handlerId}/edit";
+    $this->drupalGet($handlerEditPath);
 
     // Invalid URLs should not be allowed.
-    $this->drupalPostForm($handlerEditPath, [
+    $this->submitForm([
       'settings[pardot_url]' => 'foo',
     ], 'Save');
-    $this->assertText('Pardot post url must be a valid URL.');
+    $this->assertSession()->pageTextContains('Pardot post url must be a valid URL.');
+    $this->drupalGet($handlerEditPath);
 
     // Valid URLs with extra whitespace should be accepted, but the whitespace
     // should be trimmed.
-    $this->drupalPostForm($handlerEditPath, [
+    $this->submitForm([
       'settings[pardot_url]' => ' https://example.com/ ',
     ], 'Save');
-    $this->assertText('The webform handler was successfully updated.');
+    $this->assertSession()->pageTextContains('The webform handler was successfully updated.');
 
     /** @var \Drupal\webform\Entity\Webform $webform */
     $webform = Webform::load($webformId);
@@ -90,11 +92,12 @@ class ConfigurationTest extends WebformBrowserTestBase {
     $configuration = $handler->getConfiguration();
     $settings = !empty($configuration['settings']) ? $configuration['settings'] : [];
     self::assertTrue(isset($settings['pardot_url']) && $settings['pardot_url'] === 'https://example.com/', 'Whitespace is trimmed from the Pardot URL.');
+    $this->drupalGet($handlerEditPath);
 
-    $this->drupalPostForm($handlerEditPath, [
+    $this->submitForm([
       'settings[pardot_url]' => 'https://example.com/pardot',
     ], 'Save');
-    $this->assertText('The webform handler was successfully updated.');
+    $this->assertSession()->pageTextContains('The webform handler was successfully updated.');
   }
 
 }
diff --git a/tests/src/Functional/MultistepFormTest.php b/tests/src/Functional/MultistepFormTest.php
index 1483d24..5db1b91 100644
--- a/tests/src/Functional/MultistepFormTest.php
+++ b/tests/src/Functional/MultistepFormTest.php
@@ -39,7 +39,8 @@ class MultistepFormTest extends BrowserTestBase {
     $numInitialSubmissions = count($webform_submissions);
 
     $webform = Webform::load('multi_step_pardot_test_form');
-    $this->drupalPostForm($webform->toUrl(), [
+    $this->drupalGet($webform->toUrl());
+    $this->submitForm([
       'first_page_textbox' => 'anything',
     ], 'Next >');
     $this->submitForm([
diff --git a/tests/src/Unit/PardotHandlerTest.php b/tests/src/Unit/PardotHandlerTest.php
index e733e75..d39dcb1 100644
--- a/tests/src/Unit/PardotHandlerTest.php
+++ b/tests/src/Unit/PardotHandlerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\webform_pardot_handler\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 
 use Drupal\webform_pardot_handler\Entity\PardotSubmissionInterface;
@@ -24,10 +25,11 @@ use GuzzleHttp\Psr7\FnStream;
  */
 class PardotHandlerTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->pardot_handler = new PardotHandler(
diff --git a/webform_pardot_handler.info.yml b/webform_pardot_handler.info.yml
index b6f7c72..a7c0380 100644
--- a/webform_pardot_handler.info.yml
+++ b/webform_pardot_handler.info.yml
@@ -1,7 +1,7 @@
 name: Webform Pardot Handler
 description: Provides a webform handler for posting submissions to Pardot.
 package: Marketing Automation
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:webform
 
