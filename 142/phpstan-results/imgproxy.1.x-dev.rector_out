modules/contrib/imgproxy/imgproxy.module
modules/contrib/imgproxy/src/Form/ImgProxySettingsForm.php
modules/contrib/imgproxy/src/ImgProxy.php
modules/contrib/imgproxy/src/Imgproxy/Gravity.php
modules/contrib/imgproxy/src/Imgproxy/ImgProxyUrl.php
modules/contrib/imgproxy/src/Imgproxy/ResizeType.php
modules/contrib/imgproxy/src/Imgproxy/Watermark.php
modules/contrib/imgproxy/src/Imgproxy/WatermarkPosition.php
modules/contrib/imgproxy/src/Twig/TwigExtension.php
modules/contrib/imgproxy/src/ValidString.php
modules/contrib/imgproxy/tests/src/Unit/UrlTests.php

3 files with changes
====================

1) modules/contrib/imgproxy/tests/src/Unit/UrlTests.php:86

    ---------- begin diff ----------
@@ @@
       ->setKey($key)
       ->setSalt($salt)
       ->setImageUrl($imgUrl);
-    self::assertContains('/' . $signature . '/', $url->toString());
+    self::assertStringContainsString('/' . $signature . '/', $url->toString());
   }

   /**
@@ @@

     self::assertStringStartsWith($endpoint, $result);
     self::assertStringEndsWith($encodedUrl, $result);
-    self::assertContains('/w:100/', $result);
-    self::assertContains('/h:200/', $result);
-    self::assertContains('/el:1/', $result);
-    self::assertContains('/ex:1/', $result);
-    self::assertContains('/bg:aabbcc/', $result);
-    self::assertContains('/bl:0.5/', $result);
-    self::assertContains('/sh:0.4/', $result);
-    self::assertContains('/rt:crop/', $result);
-    self::assertContains('/g:ce/', $result);
-    self::assertContains('/dpr:2/', $result);
-    self::assertContains('/f:jpg/', $result);
-    self::assertContains('/q:25/', $result);
-    self::assertContains('/wm:0.5:nowe:12:13:0.1/', $result);
-    self::assertContains('/cb:hbz/', $result);
+    self::assertStringContainsString('/w:100/', $result);
+    self::assertStringContainsString('/h:200/', $result);
+    self::assertStringContainsString('/el:1/', $result);
+    self::assertStringContainsString('/ex:1/', $result);
+    self::assertStringContainsString('/bg:aabbcc/', $result);
+    self::assertStringContainsString('/bl:0.5/', $result);
+    self::assertStringContainsString('/sh:0.4/', $result);
+    self::assertStringContainsString('/rt:crop/', $result);
+    self::assertStringContainsString('/g:ce/', $result);
+    self::assertStringContainsString('/dpr:2/', $result);
+    self::assertStringContainsString('/f:jpg/', $result);
+    self::assertStringContainsString('/q:25/', $result);
+    self::assertStringContainsString('/wm:0.5:nowe:12:13:0.1/', $result);
+    self::assertStringContainsString('/cb:hbz/', $result);

   }
    ----------- end diff -----------

Applied rules:
 * SpecificAssertContainsRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/imgproxy/src/ImgProxy.php:80

    ---------- begin diff ----------
@@ @@
     }
     $url = $this->config->get('local')
       ? str_replace(['public:', 'private:'], 'local:/', $url)
-      : file_create_url($url);
+      : \Drupal::service('file_url_generator')->generateAbsoluteString($url);
     $instance = (new ImgProxyUrl())
       ->setImageUrl($url)
       ->setEndpoint($this->config->get('endpoint'))
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector


3) modules/contrib/imgproxy/imgproxy.module:43

    ---------- begin diff ----------
@@ @@
     $variables['image']['#title'] = $variables['title'];
   }
   if (!empty($variables['uri'])) {
-    $variables['attributes']['src'] = file_url_transform_relative(
-      file_create_url($variables['uri'])
-    );
+    $variables['attributes']['src'] = \Drupal::service('file_url_generator')->generateString($variables['uri']);
   }
 }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector


 [OK] 3 files have been changed by Rector                                       

