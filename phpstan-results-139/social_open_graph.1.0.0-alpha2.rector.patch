diff --git a/social_open_graph.info.yml b/social_open_graph.info.yml
index a304b89..9db92f9 100644
--- a/social_open_graph.info.yml
+++ b/social_open_graph.info.yml
@@ -1,7 +1,7 @@
 name: Social Open Graph
 type: module
 description: Retrieve and store Open Graph data from websites.
-core_version_requirement: ^9
+core_version_requirement: ^9.3 || ^10
 package: Custom
 dependencies:
   - embed:embed
diff --git a/social_open_graph.module b/social_open_graph.module
index 321eab4..689a101 100644
--- a/social_open_graph.module
+++ b/social_open_graph.module
@@ -32,7 +32,7 @@ function social_open_graph_theme($existing, $type, $theme, $path) {
  */
 function _social_open_graph_create_media_button(): void {
   // Create a File entity for the icon.
-  $path = drupal_get_path('module', 'social_open_graph');
+  $path = \Drupal::service('extension.list.module')->getPath('social_open_graph');
   $image_path = $path . DIRECTORY_SEPARATOR . 'assets' . DIRECTORY_SEPARATOR . 'icons' . DIRECTORY_SEPARATOR . 'ogembed.png';
   $uri = \Drupal::service('file_system')->copy($image_path, 'public://ogembed.png', FileSystemInterface::EXISTS_REPLACE);
 
diff --git a/src/Plugin/Filter/SocialOpenGraphUrlEmbedFilter.php b/src/Plugin/Filter/SocialOpenGraphUrlEmbedFilter.php
index f8f9dd5..b9d5ded 100644
--- a/src/Plugin/Filter/SocialOpenGraphUrlEmbedFilter.php
+++ b/src/Plugin/Filter/SocialOpenGraphUrlEmbedFilter.php
@@ -171,7 +171,7 @@ class SocialOpenGraphUrlEmbedFilter extends UrlEmbedFilter {
           $path = explode("%", $filename);
           $filename = $path[0];
 
-          $file = file_save_data($data, $filename);
+          $file = \Drupal::service('file.repository')->writeData($data, $filename);
 
           $title = $info['title'];
           $providerName = $info['providerName'];
