modules/contrib/legal/legal.install
modules/contrib/legal/src/Entity/Accepted.php
modules/contrib/legal/legal.module
modules/contrib/legal/src/Entity/Conditions.php
modules/contrib/legal/src/Form/LegalAdminSettingsForm.php
modules/contrib/legal/src/Form/LegalAdminTermsForm.php
modules/contrib/legal/src/Form/LegalLanguageSettings.php
modules/contrib/legal/legal.views.inc
modules/contrib/legal/src/AcceptedInterface.php
modules/contrib/legal/src/ConditionsInterface.php
modules/contrib/legal/src/Controller/LegalController.php
modules/contrib/legal/src/Form/LegalLogin.php
modules/contrib/legal/src/Plugin/migrate/source/d7/LegalAccepted.php
modules/contrib/legal/src/Plugin/migrate/source/d7/LegalConditions.php
modules/contrib/legal/src/Plugin/views/field/ExplodedListField.php
modules/contrib/legal/src/Plugin/views/field/UnserializedListField.php
modules/contrib/legal/tests/src/Functional/LegalTestBase.php
modules/contrib/legal/tests/src/Functional/LoginTest.php
modules/contrib/legal/tests/src/Functional/PasswordResetTest.php
modules/contrib/legal/tests/src/Functional/RegistrationTest.php

4 files with changes
====================

1) modules/contrib/legal/tests/src/Functional/RegistrationTest.php:13

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // Don't require email verification.
@@ @@
       'pass[pass2]' => 'xyz',
       'legal_accept' => TRUE,
     ];
+    $this->drupalGet('user/register');

     // Register user.
-    $this->drupalPostForm('user/register', $edit, 'Create new account');
+    $this->submitForm($edit, 'Create new account');

     // Check for success message.
-    $this->assertText('Registration successful. You are now logged in.');
+    $this->assertSession()->pageTextContains('Registration successful. You are now logged in.');
   }

   /**
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/legal/tests/src/Functional/PasswordResetTest.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // Set the last login time that is used to generate the one-time link so
@@ @@
     // Reset the password by username via the password reset page.
     $this->drupalGet('user/password');
     $edit['name'] = $this->loginDetails['name'];
-    $this->drupalPostForm(NULL, $edit, 'Submit');
+    $this->submitForm($edit, 'Submit');

     // Get one time login URL from email (assume the most recent email).
     $_emails = $this->drupalGetMails();
@@ @@
     ];
     $expected_url = Url::fromRoute('legal.legal_login', [], ['query' => $expected_query])->setAbsolute()->toString();
     $this->assertStringStartsWith($expected_url, $this->getUrl());
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Accept T&Cs and submit form.
     $edit = ['edit-legal-accept' => TRUE];
    ----------- end diff -----------

Applied rules:
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/legal/tests/src/Functional/LoginTest.php:17

    ---------- begin diff ----------
@@ @@
    */
   public function testLogin() {

+    $this->drupalGet('user/login');
     // Test with default Legal settings.
     // Log user in.
-    $this->drupalPostForm('user/login', $this->loginDetails, 'Log in');
+    $this->submitForm($this->loginDetails, 'Log in');

     // Check user is redirected to T&C acceptance page.
     $current_url = $this->getUrl();
     $expected_url = substr($current_url, strlen($this->baseUrl), 20);
     $this->assertEquals($expected_url, '/legal_accept?token=');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Accept T&Cs and submit form.
     $edit = ['edit-legal-accept' => TRUE];
@@ @@
       ->set('login_terms_style', 0)
       ->set('login_container', 0)
       ->save();
+    $this->drupalGet('user/login');

     // Log user in.
-    $this->drupalPostForm('user/login', $this->loginDetails, 'Log in');
+    $this->submitForm($this->loginDetails, 'Log in');

     // Check T&Cs displayed as textarea.
     $readonly = $this->assertSession()
@@ @@
       ->set('login_terms_style', 1)
       ->set('login_container', 0)
       ->save();
+    $this->drupalGet('user/login');

     // Log user in.
-    $this->drupalPostForm('user/login', $this->loginDetails, 'Log in');
+    $this->submitForm($this->loginDetails, 'Log in');

     // Check T&Cs displayed as a div with class JS will target as a scroll box.
     $this->assertSession()
@@ @@
       ->set('login_terms_style', 2)
       ->set('login_container', 0)
       ->save();
+    $this->drupalGet('user/login');

-    $this->drupalPostForm('user/login', $this->loginDetails, 'Log in');
+    $this->submitForm($this->loginDetails, 'Log in');

     // Check T&Cs displayed as HTML.
     $this->assertSession()
@@ @@
       ->set('login_terms_style', 3)
       ->set('login_container', 0)
       ->save();
+    $this->drupalGet('user/login');

-    $this->drupalPostForm('user/login', $this->loginDetails, $this->t('Log in'));
+    $this->submitForm($this->loginDetails, $this->t('Log in'));

     // Check link display.
     $this->assertSession()
    ----------- end diff -----------

Applied rules:
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/legal/tests/src/Functional/LegalTestBase.php:57

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 4 files have been changed by Rector                                       

