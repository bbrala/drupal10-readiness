diff --git a/cms_content_sync.install b/cms_content_sync.install
index c80e044..638ce39 100644
--- a/cms_content_sync.install
+++ b/cms_content_sync.install
@@ -50,7 +50,7 @@ function _cms_content_sync_set_module_weight()
  */
 function _cms_content_sync_update_config($configsNames)
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
 
@@ -68,7 +68,7 @@ function _cms_content_sync_update_config($configsNames)
  */
 function cms_content_sync_install()
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
 
@@ -85,7 +85,7 @@ function cms_content_sync_install()
     Drupal::moduleHandler()->alter('cms_content_sync_username', $username);
     $data = [
         'userName' => $username,
-        'userPass' => user_password(64),
+        'userPass' => \Drupal::service('password_generator')->generate(64),
     ];
 
     $user = User::create();
diff --git a/cms_content_sync.module b/cms_content_sync.module
index 555e743..f1e43e0 100644
--- a/cms_content_sync.module
+++ b/cms_content_sync.module
@@ -1,5 +1,7 @@
 <?php
 
+use Drupal\group\Entity\GroupContent;
+use Drupal\group\Entity\Group;
 /**
  * @file
  * Module file for cms_content_sync.
@@ -361,7 +363,7 @@ function _cms_content_sync_get_group_wizard_entity(FormStateInterface $form_stat
         // so we have to load it manually.
         if ('group_entity' === $wizard_id) {
             $unknown_entity = $form_state->getformObject()->getEntity();
-            if ($unknown_entity instanceof \Drupal\group\Entity\GroupContent) {
+            if ($unknown_entity instanceof GroupContent) {
                 return $unknown_entity->getEntity();
             }
 
@@ -369,10 +371,10 @@ function _cms_content_sync_get_group_wizard_entity(FormStateInterface $form_stat
         }
         if ('group_creator' === $wizard_id) {
             $unknown_entity = $form_state->getformObject()->getEntity();
-            if ($unknown_entity instanceof \Drupal\group\Entity\Group) {
+            if ($unknown_entity instanceof Group) {
                 return $unknown_entity;
             }
-            if ($unknown_entity instanceof \Drupal\group\Entity\GroupContent) {
+            if ($unknown_entity instanceof GroupContent) {
                 return $unknown_entity->getGroup();
             }
         }
diff --git a/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php b/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php
index b085e0e..6f616c5 100644
--- a/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php
+++ b/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\cms_content_sync_developer\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Drupal\cms_content_sync\Entity\Flow;
 use Drupal\Component\Render\FormattableMarkup;
 use Drupal\Core\Config\ConfigFactory;
@@ -11,7 +12,6 @@ use Drupal\Core\Session\AccountProxyInterface;
 use Drupal\Core\StringTranslation\TranslatableMarkup;
 use Drupal\Core\Url;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 
 /**
@@ -60,10 +60,10 @@ class VersionWarning implements EventSubscriberInterface
     /**
      * Show version warning.
      *
-     * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+     * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
      *   The Event to process
      */
-    public function showVersionWarning(GetResponseEvent $event)
+    public function showVersionWarning(RequestEvent $event)
     {
         $current_user = $this->current_user;
         if ($current_user->hasPermission('administer cms content sync')) {
diff --git a/modules/cms_content_sync_health/cms_content_sync_health.install b/modules/cms_content_sync_health/cms_content_sync_health.install
index 7edd085..96e3098 100644
--- a/modules/cms_content_sync_health/cms_content_sync_health.install
+++ b/modules/cms_content_sync_health/cms_content_sync_health.install
@@ -45,7 +45,7 @@ function cms_content_sync_health_uninstall()
  */
 function _cms_content_sync_health_update_config($configsNames)
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync_health').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync_health').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
     $config_factory = Drupal::configFactory();
diff --git a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php
index 6c97296..dfc1ba4 100644
--- a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php
+++ b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php
@@ -81,7 +81,7 @@ class MigratePull extends MigrationBase
         $link = Link::fromTextAndUrl(t('here'), $url);
         $link = $link->toRenderable();
         $link['#attributes'] = ['class' => ['external']];
-        $link = render($link);
+        $link = \Drupal::service('renderer')->render($link);
 
         $form['pull_updates_behavior'] = [
             '#title' => $this->t('Pull updates behavior'),
diff --git a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php
index 13ef6e4..8c6713f 100644
--- a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php
+++ b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php
@@ -46,7 +46,7 @@ class MigratePush extends MigrationBase
         $link = Link::fromTextAndUrl(t('here'), $url);
         $link = $link->toRenderable();
         $link['#attributes'] = ['class' => ['external']];
-        $link = render($link);
+        $link = \Drupal::service('renderer')->render($link);
 
         $form['node_push_behavior'] = [
             '#title' => $this->t('Node push behavior'),
diff --git a/modules/cms_content_sync_views/cms_content_sync_views.install b/modules/cms_content_sync_views/cms_content_sync_views.install
index a5d7dee..fb8270f 100644
--- a/modules/cms_content_sync_views/cms_content_sync_views.install
+++ b/modules/cms_content_sync_views/cms_content_sync_views.install
@@ -15,7 +15,7 @@ use Drupal\Core\Config\FileStorage;
  */
 function _cms_content_sync_views_update_config($configsNames)
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync_views').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync_views').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
     $config_factory = Drupal::configFactory();
diff --git a/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php b/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php
index 5c8255d..f80df5a 100644
--- a/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php
+++ b/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php
@@ -76,7 +76,7 @@ class SyncState extends FieldPluginBase
                     $link = Link::fromTextAndUrl(t('here'), $url);
                     $link = $link->toRenderable();
                     $link['#attributes'] = ['target' => '_blank'];
-                    $link_render = render($link);
+                    $link_render = \Drupal::service('renderer')->render($link);
 
                     $messages['pulled_from'] = $this->t('Pulled from @link (@pool) at @date.', [
                         '@pool' => $pool ? $pool->label() : $status->get('pool')->value,
@@ -118,7 +118,7 @@ class SyncState extends FieldPluginBase
                 $messages['pushed_on'] = $this->t('Pushed on @date to @pool - @show_usage.', [
                     '@date' => date('d.m.Y - H:i', $status->getLastPush()),
                     '@pool' => $pool ? $pool->label() : $status->get('pool')->value,
-                    '@show_usage' => render($show_usage),
+                    '@show_usage' => \Drupal::service('renderer')->render($show_usage),
                 ]);
             }
 
@@ -146,7 +146,7 @@ class SyncState extends FieldPluginBase
                 $push_changes = $push_changes->toRenderable();
 
                 $messages['update_waiting'] = $this->t('Update waiting to be pushed - @push_changes.', [
-                    '@push_changes' => render($push_changes),
+                    '@push_changes' => \Drupal::service('renderer')->render($push_changes),
                 ]);
             }
 
diff --git a/src/Controller/Embed.php b/src/Controller/Embed.php
index ed7d8e5..b09661e 100644
--- a/src/Controller/Embed.php
+++ b/src/Controller/Embed.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\cms_content_sync\Controller;
 
+use Drupal\Core\Link;
 use Drupal\cms_content_sync\Entity\Flow;
 use Drupal\cms_content_sync\Entity\Pool;
 use Drupal\cms_content_sync\Form\JsonForm;
@@ -114,7 +115,7 @@ class Embed extends ControllerBase
         if ($uuid && empty($this->params)) {
             $step = Migration::getActiveStep();
             if (Migration::STEP_DONE !== $step) {
-                $link = \Drupal::l(t('migrate now'), \Drupal\Core\Url::fromRoute('cms_content_sync_flow.migration'));
+                $link = Link::fromTextAndUrl(t('migrate now'), Url::fromRoute('cms_content_sync_flow.migration'));
                 \Drupal::messenger()->addMessage(t('You have Sync Cores from our old v1 release. Support for this Sync Core will end on December 31st, 2021. Please @link.', ['@link' => $link]), 'warning');
             }
         }
diff --git a/src/Event/AfterEntityPull.php b/src/Event/AfterEntityPull.php
index 1e37df3..e7d1129 100644
--- a/src/Event/AfterEntityPull.php
+++ b/src/Event/AfterEntityPull.php
@@ -2,9 +2,9 @@
 
 namespace Drupal\cms_content_sync\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\cms_content_sync\PullIntent;
 use Drupal\Core\Entity\EntityInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * The entity has been pulled successfully.
diff --git a/src/Event/AfterEntityPush.php b/src/Event/AfterEntityPush.php
index 52dd2f0..0a8ac10 100644
--- a/src/Event/AfterEntityPush.php
+++ b/src/Event/AfterEntityPush.php
@@ -2,9 +2,9 @@
 
 namespace Drupal\cms_content_sync\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\cms_content_sync\Entity\FlowInterface;
 use Drupal\Core\Entity\EntityInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * The entity has been pushed successfully.
diff --git a/src/Event/BeforeEntityPull.php b/src/Event/BeforeEntityPull.php
index 6946c08..861e167 100644
--- a/src/Event/BeforeEntityPull.php
+++ b/src/Event/BeforeEntityPull.php
@@ -2,9 +2,9 @@
 
 namespace Drupal\cms_content_sync\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\cms_content_sync\PullIntent;
 use Drupal\Core\Entity\EntityInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * An entity is being pulled.
diff --git a/src/Event/BeforeEntityPush.php b/src/Event/BeforeEntityPush.php
index c09accb..8dc90f4 100644
--- a/src/Event/BeforeEntityPush.php
+++ b/src/Event/BeforeEntityPush.php
@@ -2,9 +2,9 @@
 
 namespace Drupal\cms_content_sync\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\cms_content_sync\PushIntent;
 use Drupal\Core\Entity\EntityInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * An entity is about to be pushed.
diff --git a/src/Event/BeforeEntityTypeExport.php b/src/Event/BeforeEntityTypeExport.php
index d9fffa2..cd4de1b 100644
--- a/src/Event/BeforeEntityTypeExport.php
+++ b/src/Event/BeforeEntityTypeExport.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\cms_content_sync\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * An entity type is about to be exported.
diff --git a/src/Plugin/cms_content_sync/entity_handler/DefaultCropHandler.php b/src/Plugin/cms_content_sync/entity_handler/DefaultCropHandler.php
index 20c04af..ff11a92 100644
--- a/src/Plugin/cms_content_sync/entity_handler/DefaultCropHandler.php
+++ b/src/Plugin/cms_content_sync/entity_handler/DefaultCropHandler.php
@@ -129,7 +129,7 @@ class DefaultCropHandler extends EntityHandlerBase
 
         $uri = $file->getFileUri();
 
-        return \Drupal\Core\Url::fromUri(file_create_url($uri))->toString();
+        return \Drupal::service('file_url_generator')->generate($uri)->toString();
     }
 
     /**
diff --git a/src/Plugin/cms_content_sync/entity_handler/DefaultFileHandler.php b/src/Plugin/cms_content_sync/entity_handler/DefaultFileHandler.php
index f38df64..29b57d5 100644
--- a/src/Plugin/cms_content_sync/entity_handler/DefaultFileHandler.php
+++ b/src/Plugin/cms_content_sync/entity_handler/DefaultFileHandler.php
@@ -224,7 +224,7 @@ class DefaultFileHandler extends EntityHandlerBase
                     ->getStorage('file')
                     ->loadByProperties(['uri' => $uri]);
 
-                $entity = file_save_data($content, $uri, FileSystemInterface::EXISTS_REPLACE);
+                $entity = \Drupal::service('file.repository')->writeData($content, $uri, FileSystemInterface::EXISTS_REPLACE);
 
                 // Drupal has a pending issue: https://www.drupal.org/node/2241865
                 // so it creates a new file entity even when overwriting an existing entity. This will throw an exception if we
@@ -326,7 +326,7 @@ class DefaultFileHandler extends EntityHandlerBase
     {
         $uri = $entity->getFileUri();
 
-        return \Drupal\Core\Url::fromUri(file_create_url($uri))->toString();
+        return \Drupal::service('file_url_generator')->generate($uri)->toString();
     }
 
     protected function getEntityName(EntityInterface $file, PushIntent $intent)
diff --git a/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php b/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php
index bac68cf..f72c463 100644
--- a/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php
+++ b/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php
@@ -206,7 +206,7 @@ class DefaultFormattedTextHandler extends FieldHandlerBase
                 return $matches[1].'"/404"';
             }
 
-            $url = file_url_transform_relative(file_create_url($uri));
+            $url = \Drupal::service('file_url_generator')->generateString($uri);
 
             if ($anchor) {
                 $url .= '#'.$anchor;
diff --git a/src/PushIntent.php b/src/PushIntent.php
index 03696f8..ea4bd34 100644
--- a/src/PushIntent.php
+++ b/src/PushIntent.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\cms_content_sync;
 
+use Drupal\Core\Link;
+use EdgeBox\SyncCore\V2\SyncCore;
 use Drupal\cms_content_sync\Controller\ContentSyncSettings;
 use Drupal\cms_content_sync\Controller\Embed;
 use Drupal\cms_content_sync\Controller\Migration;
@@ -815,7 +817,7 @@ class PushIntent extends SyncIntent
 
             if ($status) {
                 $link = 'node' === $entity->getEntityTypeId() && SyncIntent::ACTION_DELETE != $action && Migration::useV2()
-          ? \Drupal\Core\Link::createFromRoute('View progress', 'cms_content_sync.content_sync_status', ['node' => $entity->id()])->toString()
+          ? Link::createFromRoute('View progress', 'cms_content_sync.content_sync_status', ['node' => $entity->id()])->toString()
           : '';
                 if (SyncIntent::ACTION_DELETE == $action) {
                     $message = t('%label has been pushed to your @repository.', ['@repository' => _cms_content_sync_get_repository_name(), '%label' => $entity->getEntityTypeId()]);
@@ -933,7 +935,7 @@ class PushIntent extends SyncIntent
      */
     public function addDependency($entity, $details = null, $push_to_same_pool = true)
     {
-        $embed = reset($this->pools)->getClient() instanceof \EdgeBox\SyncCore\V2\SyncCore || in_array($entity->getEntityTypeId(), ContentSyncSettings::getInstance()->getEmbedEntities());
+        $embed = reset($this->pools)->getClient() instanceof SyncCore || in_array($entity->getEntityTypeId(), ContentSyncSettings::getInstance()->getEmbedEntities());
         if ($embed) {
             $result = $this->pushReference($entity, $details, true, $push_to_same_pool, true);
             if ($result) {
