diff --git a/src/BreadcrumbBuilder.php b/src/BreadcrumbBuilder.php
index 64e5393..4c68f0d 100644
--- a/src/BreadcrumbBuilder.php
+++ b/src/BreadcrumbBuilder.php
@@ -285,7 +285,7 @@ class BreadcrumbBuilder implements BreadcrumbBuilderInterface {
 
     foreach ($paths as $key => $path) {
       if (isset($titles[$key])) {
-        $href = file_url_transform_relative($this->token->replace($path, $token_vars, ['clear' => TRUE]));
+        $href = \Drupal::service('file_url_generator')->transformRelative($this->token->replace($path, $token_vars, ['clear' => TRUE]));
         $link_title = $this->token->replace($titles[$key], $token_vars, ['clear' => TRUE]);
         $link_title = Html::decodeEntities($link_title);
 
