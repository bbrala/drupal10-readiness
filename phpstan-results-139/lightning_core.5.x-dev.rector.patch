diff --git a/lightning_core.module b/lightning_core.module
index 459dd65..c72663f 100644
--- a/lightning_core.module
+++ b/lightning_core.module
@@ -63,9 +63,9 @@ function lightning_core_library_info_alter(array &$libraries, $extension) {
     else {
       // @todo Drop this code when Drupal 9.3 is the minimum supported version of core.
       /** @phpstan-ignore-next-line */
-      $url = file_create_url($url);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($url);
       /** @phpstan-ignore-next-line */
-      $url = file_url_transform_relative($url);
+      $url = \Drupal::service('file_url_generator')->transformRelative($url);
     }
 
     $libraries['global-styling']['css']['component'][$url] = [];
diff --git a/modules/lightning_contact_form/tests/src/Functional/PathAliasTest.php b/modules/lightning_contact_form/tests/src/Functional/PathAliasTest.php
index a2242df..3028fae 100644
--- a/modules/lightning_contact_form/tests/src/Functional/PathAliasTest.php
+++ b/modules/lightning_contact_form/tests/src/Functional/PathAliasTest.php
@@ -24,7 +24,7 @@ class PathAliasTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalCreateContentType([
       'type' => 'page',
diff --git a/modules/lightning_roles/tests/src/Kernel/ContentRoleManagerTest.php b/modules/lightning_roles/tests/src/Kernel/ContentRoleManagerTest.php
index 91d1224..0011ee5 100644
--- a/modules/lightning_roles/tests/src/Kernel/ContentRoleManagerTest.php
+++ b/modules/lightning_roles/tests/src/Kernel/ContentRoleManagerTest.php
@@ -26,7 +26,7 @@ class ContentRoleManagerTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig('lightning_roles');
     $this->installEntitySchema('user');
diff --git a/modules/lightning_search/tests/src/Functional/SearchTest.php b/modules/lightning_search/tests/src/Functional/SearchTest.php
index 531ff20..7062646 100644
--- a/modules/lightning_search/tests/src/Functional/SearchTest.php
+++ b/modules/lightning_search/tests/src/Functional/SearchTest.php
@@ -27,7 +27,7 @@ class SearchTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     /** @var \Drupal\views\ViewEntityInterface $view */
diff --git a/tests/src/Functional/ConfigEntityDescriptionTest.php b/tests/src/Functional/ConfigEntityDescriptionTest.php
index 0b01585..d834712 100644
--- a/tests/src/Functional/ConfigEntityDescriptionTest.php
+++ b/tests/src/Functional/ConfigEntityDescriptionTest.php
@@ -27,7 +27,7 @@ class ConfigEntityDescriptionTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalPlaceBlock('local_tasks_block');
     $this->drupalPlaceBlock('local_actions_block');
diff --git a/tests/src/Kernel/CompactUserRenderTest.php b/tests/src/Kernel/CompactUserRenderTest.php
index 58255c9..b40acee 100644
--- a/tests/src/Kernel/CompactUserRenderTest.php
+++ b/tests/src/Kernel/CompactUserRenderTest.php
@@ -26,7 +26,7 @@ class CompactUserRenderTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installSchema('system', 'sequences');
diff --git a/tests/src/Kernel/ComponentDiscoveryTest.php b/tests/src/Kernel/ComponentDiscoveryTest.php
index 94f8755..1644fb9 100644
--- a/tests/src/Kernel/ComponentDiscoveryTest.php
+++ b/tests/src/Kernel/ComponentDiscoveryTest.php
@@ -24,7 +24,7 @@ class ComponentDiscoveryTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->discovery = new ComponentDiscovery(
diff --git a/tests/src/Kernel/DefaultUserImageTest.php b/tests/src/Kernel/DefaultUserImageTest.php
index 8b942e5..f2fb15e 100644
--- a/tests/src/Kernel/DefaultUserImageTest.php
+++ b/tests/src/Kernel/DefaultUserImageTest.php
@@ -19,7 +19,7 @@ class DefaultUserImageTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('user');
   }
diff --git a/tests/src/Kernel/HooksTest.php b/tests/src/Kernel/HooksTest.php
index 2ee5bb5..86f0133 100644
--- a/tests/src/Kernel/HooksTest.php
+++ b/tests/src/Kernel/HooksTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_core\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\lightning_core\UpdateManager;
 use Prophecy\Argument;
@@ -11,6 +12,7 @@ use Prophecy\Argument;
  */
 class HooksTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Kernel/ModuleInstallTest.php b/tests/src/Kernel/ModuleInstallTest.php
index da40468..944eff5 100644
--- a/tests/src/Kernel/ModuleInstallTest.php
+++ b/tests/src/Kernel/ModuleInstallTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_core\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\lightning_core\UpdateManager;
 
@@ -11,6 +12,7 @@ use Drupal\lightning_core\UpdateManager;
  */
 class ModuleInstallTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Kernel/UpdateManagerTest.php b/tests/src/Kernel/UpdateManagerTest.php
index df331d2..8590ecb 100644
--- a/tests/src/Kernel/UpdateManagerTest.php
+++ b/tests/src/Kernel/UpdateManagerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_core\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\lightning_core\UpdateManager;
 
@@ -13,6 +14,7 @@ use Drupal\lightning_core\UpdateManager;
  */
 class UpdateManagerTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
@@ -28,7 +30,7 @@ class UpdateManagerTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->updateManager = new class (
diff --git a/tests/src/Unit/DisplayHelperTest.php b/tests/src/Unit/DisplayHelperTest.php
index 4ace43b..e6a6339 100644
--- a/tests/src/Unit/DisplayHelperTest.php
+++ b/tests/src/Unit/DisplayHelperTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_core\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\Display\EntityDisplayInterface;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -15,6 +16,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class DisplayHelperTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * @covers ::getNewComponents
    */
diff --git a/tests/src/Unit/UpdateManagerTest.php b/tests/src/Unit/UpdateManagerTest.php
index e547049..dbe6a4d 100644
--- a/tests/src/Unit/UpdateManagerTest.php
+++ b/tests/src/Unit/UpdateManagerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_core\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\lightning_core\UpdateManager;
 use Drupal\Tests\UnitTestCase;
 use Symfony\Component\Console\Style\StyleInterface;
@@ -14,6 +15,7 @@ use Symfony\Component\Console\Style\StyleInterface;
  */
 class UpdateManagerTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * @covers ::toSemanticVersion
    *
