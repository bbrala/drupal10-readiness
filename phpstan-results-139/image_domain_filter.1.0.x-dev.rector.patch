diff --git a/image_domain_filter.info.yml b/image_domain_filter.info.yml
index 9a22c6e..f4c5248 100644
--- a/image_domain_filter.info.yml
+++ b/image_domain_filter.info.yml
@@ -2,5 +2,5 @@ name: Image Domain Filter
 type: module
 description: "Provides a text filter allowing images to be restricted to trusted hosts."
 package: Filters
-core_version_requirement: '^8 || ^9'
+core_version_requirement: ^9.3 || ^10
 configure: image_domain_filter.admin_settings
diff --git a/src/Plugin/Filter/ImageDomainFilter.php b/src/Plugin/Filter/ImageDomainFilter.php
index 921f201..15816c2 100644
--- a/src/Plugin/Filter/ImageDomainFilter.php
+++ b/src/Plugin/Filter/ImageDomainFilter.php
@@ -216,7 +216,7 @@ class ImageDomainFilter extends FilterBase implements ContainerFactoryPluginInte
     $base_path_length = mb_strlen($base_path);
     $local_dir = \Drupal::root() . '/';
 
-    $src = file_url_transform_relative($src);
+    $src = \Drupal::service('file_url_generator')->transformRelative($src);
     if (mb_substr($src, 0, $base_path_length) != $base_path) {
       return FALSE;
     }
