diff --git a/src/Controller/PreviewController.php b/src/Controller/PreviewController.php
index 09f7fd0..7f6be91 100644
--- a/src/Controller/PreviewController.php
+++ b/src/Controller/PreviewController.php
@@ -93,7 +93,7 @@ class PreviewController extends ControllerBase {
       $markup = $this->previewFactory->buildMarkup($entity, $view_mode);
       $renderArray[] = [
         '#prefix' => '<div class="view-mode-list-item view-mode-list-item-' . $view_mode . '"><div class="view-mode-list-item-label">' . $view_modes[$view_mode]['label'] . '</div><div class="view-mode-list-item-content">',
-        '#markup' => render($markup),
+        '#markup' => \Drupal::service('renderer')->render($markup),
         '#suffix' => '</div></div>',
       ];
     }
diff --git a/src/Service/PreviewFactory.php b/src/Service/PreviewFactory.php
index 0ce121b..cf99cac 100644
--- a/src/Service/PreviewFactory.php
+++ b/src/Service/PreviewFactory.php
@@ -81,7 +81,7 @@ class PreviewFactory {
       $markup = $this->buildMarkup($entity, $viewMode);
       $renderArray[] = [
         '#prefix' => '<div class="view-mode-list-item view-mode-list-item-' . $viewMode . '"><div class="view-mode-list-item-label">' . $viewModeData['label'] . '</div><div class="view-mode-list-item-content">',
-        '#markup' => render($markup),
+        '#markup' => \Drupal::service('renderer')->render($markup),
         '#suffix' => '</div></div>',
       ];
     }
diff --git a/view_modes_display.info.yml b/view_modes_display.info.yml
index 38a56fd..d23750e 100644
--- a/view_modes_display.info.yml
+++ b/view_modes_display.info.yml
@@ -1,6 +1,5 @@
 name: View Modes Display
 type: module
 description: Preview view modes for every entity type
-core: 8.x
 package: Other
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
diff --git a/view_modes_display.module b/view_modes_display.module
index bef87c0..e7d726f 100644
--- a/view_modes_display.module
+++ b/view_modes_display.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Entity\EntityInterface;
 /**
  * @file
  * Contains view_modes_display.module..
@@ -45,7 +46,7 @@ function view_modes_display_entity_type_alter(array &$entity_types) {
 /**
  * Implements hook_entity_operation().
  */
-function view_modes_display_entity_operation(\Drupal\Core\Entity\EntityInterface $entity) {
+function view_modes_display_entity_operation(EntityInterface $entity) {
   return \Drupal::service('class_resolver')
     ->getInstanceFromDefinition(EntityTypeInfo::class)
     ->entityOperation($entity);
