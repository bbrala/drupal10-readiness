diff --git a/modules/lightning_media_audio/tests/src/Kernel/LibraryInclusionTranslationTest.php b/modules/lightning_media_audio/tests/src/Kernel/LibraryInclusionTranslationTest.php
index e305123..ffa1f86 100644
--- a/modules/lightning_media_audio/tests/src/Kernel/LibraryInclusionTranslationTest.php
+++ b/modules/lightning_media_audio/tests/src/Kernel/LibraryInclusionTranslationTest.php
@@ -23,7 +23,7 @@ class LibraryInclusionTranslationTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('user');
 
diff --git a/modules/lightning_media_audio/tests/src/Kernel/Update/Update350Test.php b/modules/lightning_media_audio/tests/src/Kernel/Update/Update350Test.php
index 3581593..86e1146 100644
--- a/modules/lightning_media_audio/tests/src/Kernel/Update/Update350Test.php
+++ b/modules/lightning_media_audio/tests/src/Kernel/Update/Update350Test.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_media_audio\Kernel\Update;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
 use Drupal\KernelTests\KernelTestBase;
@@ -20,6 +21,7 @@ use Symfony\Component\Console\Style\StyleInterface;
  */
 class Update350Test extends KernelTestBase {
 
+  use ProphecyTrait;
   use MediaTypeCreationTrait;
 
   /**
diff --git a/modules/lightning_media_bulk_upload/tests/src/FunctionalJavascript/BulkUploadTest.php b/modules/lightning_media_bulk_upload/tests/src/FunctionalJavascript/BulkUploadTest.php
index d13e16d..2707126 100644
--- a/modules/lightning_media_bulk_upload/tests/src/FunctionalJavascript/BulkUploadTest.php
+++ b/modules/lightning_media_bulk_upload/tests/src/FunctionalJavascript/BulkUploadTest.php
@@ -32,7 +32,7 @@ class BulkUploadTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalPlaceBlock('local_actions_block');
   }
diff --git a/modules/lightning_media_document/tests/src/Kernel/Update400Test.php b/modules/lightning_media_document/tests/src/Kernel/Update400Test.php
index 6efe8a8..6833518 100644
--- a/modules/lightning_media_document/tests/src/Kernel/Update400Test.php
+++ b/modules/lightning_media_document/tests/src/Kernel/Update400Test.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_media_document\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
 use Drupal\KernelTests\KernelTestBase;
@@ -19,6 +20,7 @@ use Symfony\Component\Console\Style\StyleInterface;
  */
 class Update400Test extends KernelTestBase {
 
+  use ProphecyTrait;
   use MediaTypeCreationTrait;
 
   /**
diff --git a/modules/lightning_media_image/tests/src/FunctionalJavascript/ImageBrowserCardinalityTest.php b/modules/lightning_media_image/tests/src/FunctionalJavascript/ImageBrowserCardinalityTest.php
index a611d17..89b0234 100644
--- a/modules/lightning_media_image/tests/src/FunctionalJavascript/ImageBrowserCardinalityTest.php
+++ b/modules/lightning_media_image/tests/src/FunctionalJavascript/ImageBrowserCardinalityTest.php
@@ -40,7 +40,7 @@ class ImageBrowserCardinalityTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->createContentType(['type' => 'page']);
diff --git a/modules/lightning_media_image/tests/src/Kernel/LibraryInclusionTranslationTest.php b/modules/lightning_media_image/tests/src/Kernel/LibraryInclusionTranslationTest.php
index 6dd8022..1ef3125 100644
--- a/modules/lightning_media_image/tests/src/Kernel/LibraryInclusionTranslationTest.php
+++ b/modules/lightning_media_image/tests/src/Kernel/LibraryInclusionTranslationTest.php
@@ -23,7 +23,7 @@ class LibraryInclusionTranslationTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('user');
 
diff --git a/modules/lightning_media_slideshow/src/ProxyClass/UninstallValidator.php b/modules/lightning_media_slideshow/src/ProxyClass/UninstallValidator.php
index 3db404e..5dba4ae 100644
--- a/modules/lightning_media_slideshow/src/ProxyClass/UninstallValidator.php
+++ b/modules/lightning_media_slideshow/src/ProxyClass/UninstallValidator.php
@@ -7,15 +7,19 @@
 
 namespace Drupal\lightning_media_slideshow\ProxyClass {
 
+    use Drupal\Core\Extension\ModuleUninstallValidatorInterface;
+    use Drupal\Core\DependencyInjection\DependencySerializationTrait;
+    use Symfony\Component\DependencyInjection\ContainerInterface;
+    use Drupal\Core\StringTranslation\TranslationInterface;
     /**
      * Provides a proxy class for \Drupal\lightning_media_slideshow\UninstallValidator.
      *
      * @see \Drupal\Component\ProxyBuilder
      */
-    class UninstallValidator implements \Drupal\Core\Extension\ModuleUninstallValidatorInterface
+    class UninstallValidator implements ModuleUninstallValidatorInterface
     {
 
-        use \Drupal\Core\DependencyInjection\DependencySerializationTrait;
+        use DependencySerializationTrait;
 
         /**
          * The id of the original proxied service.
@@ -46,7 +50,7 @@ namespace Drupal\lightning_media_slideshow\ProxyClass {
          * @param string $drupal_proxy_original_service_id
          *   The service ID of the original service.
          */
-        public function __construct(\Symfony\Component\DependencyInjection\ContainerInterface $container, $drupal_proxy_original_service_id)
+        public function __construct(ContainerInterface $container, $drupal_proxy_original_service_id)
         {
             $this->container = $container;
             $this->drupalProxyOriginalServiceId = $drupal_proxy_original_service_id;
@@ -78,7 +82,7 @@ namespace Drupal\lightning_media_slideshow\ProxyClass {
         /**
          * {@inheritdoc}
          */
-        public function setStringTranslation(\Drupal\Core\StringTranslation\TranslationInterface $translation)
+        public function setStringTranslation(TranslationInterface $translation)
         {
             return $this->lazyLoadItself()->setStringTranslation($translation);
         }
diff --git a/modules/lightning_media_slideshow/tests/src/FunctionalJavascript/SlideshowTest.php b/modules/lightning_media_slideshow/tests/src/FunctionalJavascript/SlideshowTest.php
index ce16afe..f578c58 100644
--- a/modules/lightning_media_slideshow/tests/src/FunctionalJavascript/SlideshowTest.php
+++ b/modules/lightning_media_slideshow/tests/src/FunctionalJavascript/SlideshowTest.php
@@ -34,7 +34,7 @@ class SlideshowTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->createMediaType('test', [
diff --git a/modules/lightning_media_twitter/tests/src/Kernel/LibraryInclusionTranslationTest.php b/modules/lightning_media_twitter/tests/src/Kernel/LibraryInclusionTranslationTest.php
index 95c277f..a2da5cf 100644
--- a/modules/lightning_media_twitter/tests/src/Kernel/LibraryInclusionTranslationTest.php
+++ b/modules/lightning_media_twitter/tests/src/Kernel/LibraryInclusionTranslationTest.php
@@ -20,7 +20,7 @@ class LibraryInclusionTranslationTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('user');
 
diff --git a/modules/lightning_media_video/tests/src/Kernel/LibraryInclusionTranslationTest.php b/modules/lightning_media_video/tests/src/Kernel/LibraryInclusionTranslationTest.php
index a07e33d..ccdb310 100644
--- a/modules/lightning_media_video/tests/src/Kernel/LibraryInclusionTranslationTest.php
+++ b/modules/lightning_media_video/tests/src/Kernel/LibraryInclusionTranslationTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_media_video\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\file\Entity\File;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\language\Entity\ConfigurableLanguage;
@@ -18,6 +19,7 @@ use Drupal\media\OEmbed\UrlResolverInterface;
  */
 class LibraryInclusionTranslationTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
@@ -26,7 +28,7 @@ class LibraryInclusionTranslationTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('user');
 
diff --git a/modules/lightning_media_video/tests/src/Kernel/Update350Test.php b/modules/lightning_media_video/tests/src/Kernel/Update350Test.php
index 16eebba..08e0fa7 100644
--- a/modules/lightning_media_video/tests/src/Kernel/Update350Test.php
+++ b/modules/lightning_media_video/tests/src/Kernel/Update350Test.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_media_video\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
 use Drupal\KernelTests\KernelTestBase;
@@ -20,6 +21,7 @@ use Symfony\Component\Console\Style\StyleInterface;
  */
 class Update350Test extends KernelTestBase {
 
+  use ProphecyTrait;
   use MediaTypeCreationTrait;
 
   /**
diff --git a/src/MediaHelper.php b/src/MediaHelper.php
index 8631261..f472730 100644
--- a/src/MediaHelper.php
+++ b/src/MediaHelper.php
@@ -197,7 +197,7 @@ class MediaHelper {
       }
       else {
         // @phpstan-ignore-next-line
-        $file = file_move($file, $destination, $replace);
+        $file = \Drupal::service('file.repository')->move($file, $destination, $replace);
       }
 
       if ($file) {
diff --git a/tests/src/Functional/MediaListTest.php b/tests/src/Functional/MediaListTest.php
index 39e9e91..53a518a 100644
--- a/tests/src/Functional/MediaListTest.php
+++ b/tests/src/Functional/MediaListTest.php
@@ -29,7 +29,7 @@ class MediaListTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalPlaceBlock('local_tasks_block');
   }
diff --git a/tests/src/Functional/PathautoPatternTest.php b/tests/src/Functional/PathautoPatternTest.php
index 6d22c48..e615232 100644
--- a/tests/src/Functional/PathautoPatternTest.php
+++ b/tests/src/Functional/PathautoPatternTest.php
@@ -36,7 +36,7 @@ class PathautoPatternTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->config('media.settings')->set('standalone_url', TRUE)->save();
     drupal_flush_all_caches();
diff --git a/tests/src/Functional/RolesTest.php b/tests/src/Functional/RolesTest.php
index ca1ee01..24df561 100644
--- a/tests/src/Functional/RolesTest.php
+++ b/tests/src/Functional/RolesTest.php
@@ -42,7 +42,7 @@ class RolesTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->mediaType = $this->createMediaType('test')->id();
 
diff --git a/tests/src/Functional/Update360Test.php b/tests/src/Functional/Update360Test.php
index bd8ddd6..8c84230 100644
--- a/tests/src/Functional/Update360Test.php
+++ b/tests/src/Functional/Update360Test.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_media\Functional;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\embed\Entity\EmbedButton;
 use Drupal\entity_browser\Entity\EntityBrowser;
 use Drupal\FunctionalTests\Update\UpdatePathTestBase;
@@ -19,6 +20,7 @@ use Symfony\Component\Console\Style\StyleInterface;
  */
 class Update360Test extends UpdatePathTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
@@ -36,7 +38,7 @@ class Update360Test extends UpdatePathTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a content type so we can test that content roles are correctly
diff --git a/tests/src/Functional/Update400Test.php b/tests/src/Functional/Update400Test.php
index d3de3e3..6ea22cb 100644
--- a/tests/src/Functional/Update400Test.php
+++ b/tests/src/Functional/Update400Test.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\lightning_media\Functional;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\editor\Entity\Editor;
 use Drupal\entity_browser\Element\EntityBrowserElement;
 use Drupal\field\Entity\FieldConfig;
@@ -19,6 +20,7 @@ use Symfony\Component\Console\Style\StyleInterface;
  */
 class Update400Test extends BrowserTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/FunctionalJavascript/ImageBrowserTest.php b/tests/src/FunctionalJavascript/ImageBrowserTest.php
index e25e8fb..42d758c 100644
--- a/tests/src/FunctionalJavascript/ImageBrowserTest.php
+++ b/tests/src/FunctionalJavascript/ImageBrowserTest.php
@@ -34,7 +34,7 @@ class ImageBrowserTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->drupalCreateContentType(['type' => 'page']);
diff --git a/tests/src/FunctionalJavascript/MediaImageFieldTest.php b/tests/src/FunctionalJavascript/MediaImageFieldTest.php
index cc1dac7..04c60ae 100644
--- a/tests/src/FunctionalJavascript/MediaImageFieldTest.php
+++ b/tests/src/FunctionalJavascript/MediaImageFieldTest.php
@@ -30,7 +30,7 @@ class MediaImageFieldTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // The media.settings:standalone_url setting was added in Drupal 8.7. To
diff --git a/tests/src/Kernel/MediaHelperTest.php b/tests/src/Kernel/MediaHelperTest.php
index 5011daf..241c1f2 100644
--- a/tests/src/Kernel/MediaHelperTest.php
+++ b/tests/src/Kernel/MediaHelperTest.php
@@ -35,7 +35,7 @@ class MediaHelperTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installEntitySchema('file');
 
diff --git a/tests/src/Kernel/MediaTypeTest.php b/tests/src/Kernel/MediaTypeTest.php
index b836341..e46a9cf 100644
--- a/tests/src/Kernel/MediaTypeTest.php
+++ b/tests/src/Kernel/MediaTypeTest.php
@@ -31,7 +31,7 @@ class MediaTypeTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     Config::forModule('lightning_media')
