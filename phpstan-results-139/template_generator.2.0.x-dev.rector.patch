diff --git a/src/TemplateGeneratorManager.php b/src/TemplateGeneratorManager.php
index 616b597..7ad8649 100644
--- a/src/TemplateGeneratorManager.php
+++ b/src/TemplateGeneratorManager.php
@@ -158,7 +158,7 @@ class TemplateGeneratorManager {
       if ((!isset($ignore['bundle'][$bundle_id]) or $ignore['bundle'][$bundle_id] === 0)
         && (!isset($ignore['viewmode'][$view_mode]) or $ignore['viewmode'][$view_mode] === 0) ) {
 
-        $parent_path = $this->root . '/' . drupal_get_path('theme', $this->themeConfig->get('default'));
+        $parent_path = $this->root . '/' . \Drupal::service('extension.list.theme')->getPath($this->themeConfig->get('default'));
 
         $html = NULL;
         $view_mode_tpl = str_replace('_', '-', $view_mode);
@@ -307,7 +307,7 @@ class TemplateGeneratorManager {
         // Set information for this entity.
         if (isset($data[$definition->id()]['bundles'])) {
           $label = $definition->getLabel();
-          $data[$definition->id()]['name'] = render($label);
+          $data[$definition->id()]['name'] = \Drupal::service('renderer')->render($label);
           $data[$definition->id()]['id'] = $definition->id();
 
           // Set all avalaible bundle for this entity.
diff --git a/template_generator.info.yml b/template_generator.info.yml
index b37c7c9..ab3f415 100644
--- a/template_generator.info.yml
+++ b/template_generator.info.yml
@@ -3,4 +3,4 @@ type: module
 description: Automatic templates generation.
 package: Template Generator
 configure: template_generator.settings
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
