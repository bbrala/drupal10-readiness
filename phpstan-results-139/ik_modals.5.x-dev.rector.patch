diff --git a/ik_modals.api.php b/ik_modals.api.php
index e9b8f15..56c34b5 100644
--- a/ik_modals.api.php
+++ b/ik_modals.api.php
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\ik_modals\Entity\Modal;
 /**
  * hook_ik_modals_alter_module_settings
  * Alters the modal module sitewide settings
@@ -21,7 +22,7 @@ function hook_ik_modals_alter_module_settings(array &$settings) {
  * @param [array] $geolocationData - see ModalService::getGeoloationData and hook_ik_modals_alter_user_geolocation
  * @return [array] $settings
  */
-function hook_ik_modals_alter_modal_settings(\Drupal\ik_modals\Entity\Modal $entity, array &$settings, array $geolocationData) {
+function hook_ik_modals_alter_modal_settings(Modal $entity, array &$settings, array $geolocationData) {
   // Make all modals of a specific bundle inactive.
   if ($entity->bundle() === 'general') {
     $settings['active'] = false;
@@ -52,4 +53,4 @@ function hook_ik_modals_alter_user_geolocation(array &$returnData) {
   // Add it to $returnData.
   $returnData['country_code'] = 'US';
   $returnData['region_code'] = 'NC';
-}
\ No newline at end of file
+}
diff --git a/src/ModalService.php b/src/ModalService.php
index 79b76ba..59d446c 100644
--- a/src/ModalService.php
+++ b/src/ModalService.php
@@ -217,7 +217,7 @@ class ModalService {
       // GeoIP2
       elseif ($geoip2 === true) {
         $record = NULL;
-        $reader = new Reader(drupal_get_path('module', 'ik_modals') . '/includes/db/GeoLite2-City.mmdb');
+        $reader = new Reader(\Drupal::service('extension.list.module')->getPath('ik_modals') . '/includes/db/GeoLite2-City.mmdb');
 
         $ip = $this->requestStack->getCurrentRequest()->getClientIp();
 
