diff --git a/modules/wingsuit_lb/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php b/modules/wingsuit_lb/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php
index 7aa9c41..22f1930 100644
--- a/modules/wingsuit_lb/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php
+++ b/modules/wingsuit_lb/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\wingsuit_lb\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\ViewEvent;
 use Drupal\Core\Ajax\AjaxHelperTrait;
 use Drupal\Core\Render\Element;
 use Drupal\Core\Render\Markup;
@@ -11,7 +12,6 @@ use Drupal\file\Entity\File;
 use Drupal\layout_builder\SectionStorageInterface;
 use Drupal\section_library\Entity\SectionLibraryTemplate;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 
 /**
@@ -27,7 +27,7 @@ class LayoutBuilderBrowserEventSubscriber implements EventSubscriberInterface {
   /**
    * Add layout-builder-browser class layout_builder.choose_block build block.
    */
-  public function onView(GetResponseForControllerResultEvent $event) {
+  public function onView(ViewEvent $event) {
     $request = $event->getRequest();
     $route = $request->attributes->get('_route');
     if ($route == 'layout_builder.choose_section') {
@@ -141,16 +141,13 @@ class LayoutBuilderBrowserEventSubscriber implements EventSubscriberInterface {
       $attributes['class'][] = 'js-layout-builder-section-library-link';
       $attributes['class'][] = 'ws-lb-link';
       // Default library image.
-      $img_path = drupal_get_path(
-          'module',
-          'wingsuit_lb'
-        ) . '/images/section-empty-icon.svg';
+      $img_path = \Drupal::service('extension.list.module')->getPath('wingsuit_lb') . '/images/section-empty-icon.svg';
       if ($fid = $section->get('image')->target_id) {
         $file = File::load($fid);
         $img_path = $file->getFileUri();
       }
 
-      $icon_url = file_url_transform_relative(file_create_url($img_path));
+      $icon_url = \Drupal::service('file_url_generator')->generateString($img_path);
       $link = [
         '#type' => 'link',
         '#title' => Markup::create(
diff --git a/modules/wingsuit_lb/wingsuit_lb.module b/modules/wingsuit_lb/wingsuit_lb.module
index 8c4ecf2..90af015 100644
--- a/modules/wingsuit_lb/wingsuit_lb.module
+++ b/modules/wingsuit_lb/wingsuit_lb.module
@@ -94,11 +94,8 @@ function wingsuit_lb_preprocess_wingsuit_lb_icon(&$variables) {
   $type = $variables['icon_type'];
   if ($uri === NULL) {
     $filename = $type === 'block' ? 'block-empty-icon.svg' : 'section-empty-icon.svg';
-    $img_path = drupal_get_path(
-        'module',
-        'wingsuit_lb'
-      ) . '/images/' . $filename;
-    $variables['uri'] = file_url_transform_relative(file_create_url($img_path));
+    $img_path = \Drupal::service('extension.list.module')->getPath('wingsuit_lb') . '/images/' . $filename;
+    $variables['uri'] = \Drupal::service('file_url_generator')->generateString($img_path);
   }
 }
 
