diff --git a/sourcepoint.module b/sourcepoint.module
index 6d245cf..c564d4a 100644
--- a/sourcepoint.module
+++ b/sourcepoint.module
@@ -93,7 +93,7 @@ function sourcepoint_page_attachments(array &$page) {
 
     // URL to msg JS.
     if ($msg_path = $endpoint_service->getEndpoint('msg')->getPath()) {
-      $bootstrap['#msg_url'] = file_create_url($msg_path);
+      $bootstrap['#msg_url'] = \Drupal::service('file_url_generator')->generateAbsoluteString($msg_path);
     }
 
     // Pass config to the template.
diff --git a/src/Api/AbstractEndpoint.php b/src/Api/AbstractEndpoint.php
index 41d1446..b756a2c 100644
--- a/src/Api/AbstractEndpoint.php
+++ b/src/Api/AbstractEndpoint.php
@@ -80,7 +80,7 @@ abstract class AbstractEndpoint implements EndpointInterface {
    * {@inheritdoc}
    */
   public function fetch() {
-    FileSystemInterface::saveData($this->request(), $this->getPath(), FILE_EXISTS_REPLACE);
+    FileSystemInterface::saveData($this->request(), $this->getPath(), FileSystemInterface::EXISTS_REPLACE);
     return $this;
   }
 
