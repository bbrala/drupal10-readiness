diff --git a/composer.json b/composer.json
index b55b7ed..56575d7 100644
--- a/composer.json
+++ b/composer.json
@@ -5,7 +5,7 @@
   "description": "Allows your site to be tracked by Hotjar by adding a Javascript tracking code to every page",
   "require": {
     "ext-json": "*",
-    "drupal/core": "^8.8 || ^9"
+    "drupal/core": "^9.3 || ^10"
   },
   "minimum-stability": "stable"
 }
diff --git a/hotjar.info.yml b/hotjar.info.yml
index a317713..2a1306b 100644
--- a/hotjar.info.yml
+++ b/hotjar.info.yml
@@ -1,7 +1,7 @@
 type: module
 name: 'Hotjar'
 description: 'Allows your site to be tracked by Hotjar by adding a Javascript tracking code to every page.'
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'Statistics'
 configure: hotjar.admin_settings_form
 dependencies:
diff --git a/src/SnippetBuilder.php b/src/SnippetBuilder.php
index 44b6808..a50caa3 100644
--- a/src/SnippetBuilder.php
+++ b/src/SnippetBuilder.php
@@ -142,7 +142,7 @@ class SnippetBuilder implements SnippetBuilderInterface, ContainerInjectionInter
     $query_string = $this->state->get('system.css_js_query_string') ?: '0';
     $query_string_separator = (strpos($uri, '?') !== FALSE) ? '&' : '?';
 
-    $url = file_url_transform_relative(file_create_url($uri));
+    $url = \Drupal::service('file_url_generator')->generateString($uri);
     $attachments['#attached']['html_head'][] = [
       [
         '#type' => 'html_tag',
