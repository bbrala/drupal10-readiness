diff --git a/src/Controller/ChooseComponentController.php b/src/Controller/ChooseComponentController.php
index 69fddba..df88592 100644
--- a/src/Controller/ChooseComponentController.php
+++ b/src/Controller/ChooseComponentController.php
@@ -180,7 +180,7 @@ class ChooseComponentController extends ControllerBase {
     // @todo Document and add tests for what is happening here.
     $component_types = $this->getComponentTypes($layout);
     $event = new LayoutParagraphsAllowedTypesEvent($component_types, $layout, $parent_uuid, $region);
-    $this->eventDispatcher->dispatch(LayoutParagraphsAllowedTypesEvent::EVENT_NAME, $event);
+    $this->eventDispatcher->dispatch($event, LayoutParagraphsAllowedTypesEvent::EVENT_NAME);
     return $event->getTypes();
   }
 
diff --git a/src/Event/LayoutParagraphsAllowedTypesEvent.php b/src/Event/LayoutParagraphsAllowedTypesEvent.php
index ca5b62d..7fc0f68 100644
--- a/src/Event/LayoutParagraphsAllowedTypesEvent.php
+++ b/src/Event/LayoutParagraphsAllowedTypesEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\layout_paragraphs\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\layout_paragraphs\LayoutParagraphsLayout;
 
 /**
diff --git a/src/Event/LayoutParagraphsUpdateLayoutEvent.php b/src/Event/LayoutParagraphsUpdateLayoutEvent.php
index 99a30cd..a823474 100644
--- a/src/Event/LayoutParagraphsUpdateLayoutEvent.php
+++ b/src/Event/LayoutParagraphsUpdateLayoutEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\layout_paragraphs\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\layout_paragraphs\LayoutParagraphsLayout;
 
 /**
diff --git a/tests/modules/layout_paragraphs_altered_template_test/layout_paragraphs_altered_template_test.module b/tests/modules/layout_paragraphs_altered_template_test/layout_paragraphs_altered_template_test.module
index 96d083c..e04f133 100644
--- a/tests/modules/layout_paragraphs_altered_template_test/layout_paragraphs_altered_template_test.module
+++ b/tests/modules/layout_paragraphs_altered_template_test/layout_paragraphs_altered_template_test.module
@@ -11,5 +11,5 @@
  * Replaces the paragraphs template directory with test templates.
  */
 function layout_paragraphs_altered_template_test_theme_registry_alter(&$theme_registry) {
-  $theme_registry['paragraph']['path'] = drupal_get_path('module', 'layout_paragraphs_altered_template_test') . '/templates';
+  $theme_registry['paragraph']['path'] = \Drupal::service('extension.list.module')->getPath('layout_paragraphs_altered_template_test') . '/templates';
 }
