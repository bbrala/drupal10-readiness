diff --git a/src/Plugin/Field/FieldFormatter/TinySliderFieldFormatter.php b/src/Plugin/Field/FieldFormatter/TinySliderFieldFormatter.php
index a69bc3a..74f13b0 100755
--- a/src/Plugin/Field/FieldFormatter/TinySliderFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/TinySliderFieldFormatter.php
@@ -283,7 +283,7 @@ class TinySliderFieldFormatter extends EntityReferenceFormatterBase implements C
     foreach ($files as $delta => $file) {
       if (isset($link_file)) {
         $image_uri = $file->getFileUri();
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
       }
       $cache_tags = Cache::mergeTags($cache_tags, $file->getCacheTags());
 
diff --git a/tiny_slider.module b/tiny_slider.module
index 1ceea88..b9ef353 100755
--- a/tiny_slider.module
+++ b/tiny_slider.module
@@ -55,7 +55,7 @@ function template_preprocess_tiny_slider(&$variables) {
   if (!empty($items)) {
     $i = 0;
     foreach ($items as $item) {
-      $html .= '<div class="tiny-slider-item-inner tiny-slider-item-inner' . $i . '">' . render($item) . '</div>';
+      $html .= '<div class="tiny-slider-item-inner tiny-slider-item-inner' . $i . '">' . \Drupal::service('renderer')->render($item) . '</div>';
       $i++;
     }
   }
@@ -63,7 +63,7 @@ function template_preprocess_tiny_slider(&$variables) {
     '#type' => 'markup',
     '#markup' => $html,
   ];
-  $variables['output'] = render($output);
+  $variables['output'] = \Drupal::service('renderer')->render($output);
 
 }
 
@@ -91,7 +91,7 @@ function template_preprocess_tiny_slider_views(array &$variables) {
   $attached = [
     '#attached' => ['library' => ['tiny_slider/tiny_slider']],
   ];
-  render($attached);
+  \Drupal::service('renderer')->render($attached);
   template_preprocess_views_view_unformatted($variables);
 }
 
