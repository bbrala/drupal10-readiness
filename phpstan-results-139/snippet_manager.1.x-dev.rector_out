modules/contrib/snippet_manager/snippet_manager.api.php
modules/contrib/snippet_manager/src/EventSubscriber/RouteSubscriber.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Condition.php
modules/contrib/snippet_manager/src/SnippetAwareInterface.php
modules/contrib/snippet_manager/snippet_manager.module
modules/contrib/snippet_manager/tests/snippet_manager_test/snippet_manager_test.module
modules/contrib/snippet_manager/src/Annotation/SnippetVariable.php
modules/contrib/snippet_manager/src/SnippetAwareTrait.php
modules/contrib/snippet_manager/tests/src/Functional/OverviewPageTest.php
modules/contrib/snippet_manager/src/SnippetInterface.php
modules/contrib/snippet_manager/src/Controller/PathAutocomplete.php
modules/contrib/snippet_manager/src/SnippetLibraryBuilder.php
modules/contrib/snippet_manager/src/Controller/SnippetController.php
modules/contrib/snippet_manager/tests/snippet_manager_test/src/Controller/SnippetManagerTestController.php
modules/contrib/snippet_manager/src/DelegatedCacheabilityTrait.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/ConditionDeriver.php
modules/contrib/snippet_manager/src/Entity/Snippet.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/DisplayVariantMainContent.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/DisplayVariantTitle.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Entity.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetBlockTest.php
modules/contrib/snippet_manager/tests/snippet_manager_test/src/EventSubscriber/DisplayVariantSubscriber.php
modules/contrib/snippet_manager/src/SnippetListBuilder.php
modules/contrib/snippet_manager/src/Form/CssForm.php
modules/contrib/snippet_manager/tests/src/Functional/AdminPagesAccessTest.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetCanonicalPagesTest.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetCssTest.php
modules/contrib/snippet_manager/src/Form/DuplicateForm.php
modules/contrib/snippet_manager/tests/src/Functional/BlockVariableTest.php
modules/contrib/snippet_manager/src/SnippetManagerTwigExtension.php
modules/contrib/snippet_manager/tests/src/Functional/ConditionVariableTest.php
modules/contrib/snippet_manager/src/Form/GeneralForm.php
modules/contrib/snippet_manager/src/SnippetTemplateLoader.php
modules/contrib/snippet_manager/src/EventSubscriber/DisplayVariantSubscriber.php
modules/contrib/snippet_manager/src/SnippetVariableBase.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/EntityDeriver.php
modules/contrib/snippet_manager/src/SnippetVariableCollection.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/EntityForm.php
modules/contrib/snippet_manager/tests/src/Functional/DefaultContextTest.php
modules/contrib/snippet_manager/src/SnippetVariableInterface.php
modules/contrib/snippet_manager/src/SnippetVariablePluginManager.php
modules/contrib/snippet_manager/src/SnippetViewBuilder.php
modules/contrib/snippet_manager/tests/src/Functional/DisplayVariantTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/EntityFormDeriver.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/File.php
modules/contrib/snippet_manager/tests/src/Functional/EnableDisableTest.php
modules/contrib/snippet_manager/tests/src/Functional/EntityFormVariableTest.php
modules/contrib/snippet_manager/tests/src/Functional/EntityVariableTest.php
modules/contrib/snippet_manager/src/Theme/Negotiator.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetFormTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Form.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/FormDeriver.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/LayoutRegion.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Menu.php
modules/contrib/snippet_manager/src/Form/JsForm.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetJsTest.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetPageTest.php
modules/contrib/snippet_manager/tests/src/Functional/FormVariableTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/MenuDeriver.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/MiniSnippet.php
modules/contrib/snippet_manager/tests/src/Functional/LayoutTest.php
modules/contrib/snippet_manager/src/Form/TemplateForm.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Text.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Url.php
modules/contrib/snippet_manager/tests/src/Functional/MenuVariableTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/View.php
modules/contrib/snippet_manager/tests/src/Functional/MiniSnippetVariableTest.php
modules/contrib/snippet_manager/tests/src/Functional/MissingVariablePluginTest.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetTemplateTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/ViewDeriver.php
modules/contrib/snippet_manager/src/Form/VariableAddForm.php
modules/contrib/snippet_manager/tests/src/Functional/SnippetUiTest.php
modules/contrib/snippet_manager/src/Form/VariableDeleteForm.php
modules/contrib/snippet_manager/src/Form/VariableEditForm.php
modules/contrib/snippet_manager/src/SnippetAccessControlHandler.php
modules/contrib/snippet_manager/tests/src/Functional/TemplateLoaderTest.php
modules/contrib/snippet_manager/src/Form/VariableFormBase.php
modules/contrib/snippet_manager/tests/src/Functional/TestBase.php
modules/contrib/snippet_manager/src/Plugin/Block/SnippetBlock.php
modules/contrib/snippet_manager/src/Plugin/Block/SnippetBlockDeriver.php
modules/contrib/snippet_manager/src/Plugin/CKEditorPlugin/Snippet.php
modules/contrib/snippet_manager/tests/src/Functional/TextVariableTest.php
modules/contrib/snippet_manager/src/Plugin/DisplayVariant/SnippetDisplayVariant.php
modules/contrib/snippet_manager/tests/src/Functional/UrlVariableTest.php
modules/contrib/snippet_manager/src/Plugin/DisplayVariant/SnippetDisplayVariantDeriver.php
modules/contrib/snippet_manager/src/Plugin/Filter/Snippet.php
modules/contrib/snippet_manager/tests/src/Functional/ViewVariableTest.php
modules/contrib/snippet_manager/src/Plugin/Layout/SnippetLayout.php
modules/contrib/snippet_manager/src/Plugin/Layout/SnippetLayoutDeriver.php
modules/contrib/snippet_manager/tests/src/FunctionalJavascript/EditorTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/Block.php
modules/contrib/snippet_manager/tests/src/FunctionalJavascript/OverviewFilterTest.php
modules/contrib/snippet_manager/src/Plugin/SnippetVariable/BlockDeriver.php
modules/contrib/snippet_manager/tests/src/Kernel/SnippetAccessTest.php
modules/contrib/snippet_manager/tests/src/Kernel/SnippetFilterTest.php
modules/contrib/snippet_manager/tests/src/Kernel/TwigExtensionTest.php
modules/contrib/snippet_manager/tests/src/Unit/LocalTasksTest.php

27 files with changes
=====================

1) modules/contrib/snippet_manager/src/SnippetViewBuilder.php:102

    ---------- begin diff ----------
@@ @@

     $value = $this->view($snippet);
     // Render the snippet immediately to calculate render time.
-    $build['content']['#value'] = (string) render($value);
+    $build['content']['#value'] = (string) \Drupal::service('renderer')->render($value);

     $render_time = Timer::read('snippet');
    ----------- end diff -----------

Applied rules:
 * RenderRector
 * ArgumentRemoverRector
 * WrapReturnRector


2) modules/contrib/snippet_manager/tests/src/Functional/MissingVariablePluginTest.php:30

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'view:' . $view_name,
       'name' => 'who_s_online',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');
+    $this->submitForm($edit, 'Save and continue');

     $this->drupalGet("admin/structure/snippet/alpha/edit");

@@ @@
     $this->drupalGet('admin/structure/snippet/alpha/edit/template');
     $this->assertWarningMessage($warning_message);
     $this->assertXpath(sprintf('//table//td[text() = "view:%s - missing"]', $view_name));
+    $this->drupalGet("admin/structure/snippet/alpha/edit/variable/$view_name/delete");

     // Make sure the variable still can be deleted.
-    $this->drupalPostForm("admin/structure/snippet/alpha/edit/variable/$view_name/delete", [], 'Delete');
+    $this->submitForm([], 'Delete');
     $this->assertStatusMessage('The variable has been removed.');
   }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/snippet_manager/tests/src/Functional/MiniSnippetVariableTest.php:16

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'mini_snippet',
       'name' => 'ms',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

     $edit = [
       'configuration[template]' => '{{ 7 * 7 }}',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     $edit = [
       'template[value]' => '<div class="mini_snippet">-= {{ ms }} =-</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet($this->snippetUrl);

     $this->assertXpath('//div[@class="mini_snippet" and text() = "-= 49 =-"]');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/snippet_manager/tests/src/Functional/MenuVariableTest.php:17

    ---------- begin diff ----------
@@ @@
     $edit = [
       'template[value]' => '<div class="snippet-content">{{ test_menu }}</div>',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/template', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/template');
+    $this->submitForm($edit, 'Save');

     // Create menu variable.
     $edit = [
@@ @@
       'plugin_id' => 'menu:snippet_manager_test',
       'name' => 'test_menu',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');
     $this->assertPageTitle(new FM('Edit variable %name', ['%name' => 'test_menu']));

     $this->assertXpath('//form/div/label[. = "Initial visibility level"]/../select[@name = "configuration[level]"]/option[@value = "1" and @selected = "selected"]');
     $this->assertXpath('//form/div/label[. = "Number of levels to display"]/../select[@name = "configuration[depth]"]/option[@value = "0" and @selected = "selected" and . = "Unlimited"]');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/test_menu/edit');

     // Test default menu configuration.
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/test_menu/edit', [], 'Save');
+    $this->submitForm([], 'Save');

     $this->assertXpath('//td/a[@data-drupal-selector = "snippet-variable" and . = "test_menu"]');

@@ @@
     $edit = [
       'configuration[level]' => 2,
     ];
-    $this->drupalPostForm('/admin/structure/snippet/alpha/edit/variable/test_menu/edit', $edit, 'Save');
+    $this->drupalGet('/admin/structure/snippet/alpha/edit/variable/test_menu/edit');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('/admin/structure/snippet/alpha');
     $this->assertXpath('//div[@class = "snippet-content"]/ul[@class = "menu"]/li/a[. = "Link 2"]/../ul[@class = "menu"]/li/a[. = "Link 3"]');

@@ @@
       'configuration[level]' => 1,
       'configuration[depth]' => 1,
     ];
-    $this->drupalPostForm('/admin/structure/snippet/alpha/edit/variable/test_menu/edit', $edit, 'Save');
+    $this->drupalGet('/admin/structure/snippet/alpha/edit/variable/test_menu/edit');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('/admin/structure/snippet/alpha');
     $this->assertXpath('//div[@class = "snippet-content"]/ul[@class = "menu"]/li[not(ul)]/a[. = "Link 1"]');
   }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/snippet_manager/tests/src/Functional/LayoutTest.php:28

    ---------- begin diff ----------
@@ @@
     $edit = [
       'layout[status]' => TRUE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertXpath($prefix . '//input[@name="layout[status]" and @checked]');

     $edit = [
       'template[value]' => '{{ sidebar }}{{ main }}',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/template', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/template');
+    $this->submitForm($edit, 'Save');

     // -- Create sidebar variable.
     $edit = [
@@ @@
       'plugin_id' => 'layout_region',
       'name' => 'sidebar',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertXpath('//label[text()="Label"]/next::input[@name="configuration[label]" and @value="Sidebar"]');
     $this->assertXpath('//label[text()="Weight"]/next::input[@name="configuration[weight]" and @value="0"]');
-    $this->drupalPostForm(NULL, [], 'Save');
+    $this->submitForm([], 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     // -- Create main variable.
@@ @@
       'plugin_id' => 'layout_region',
       'name' => 'main',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertXpath('//label[text()="Label"]/next::input[@name="configuration[label]" and @value="Main"]');
     $this->assertXpath('//label[text()="Weight"]/next::input[@name="configuration[weight]" and @value="0"]');
     $edit = [
@@ @@
       'configuration[label]' => 'Main content',
       'configuration[weight]' => 10,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     // -- Set default region.
@@ @@
     $edit = [
       'layout[default_region]' => 'main',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertXpath('//input[@name="layout[default_region]" and @value="main" and @checked]');

     // -- Check layout definition.
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/snippet_manager/tests/src/Functional/FormVariableTest.php:16

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'form:user_login',
       'name' => 'user_login_form',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

-    $this->drupalPostForm(NULL, [], 'Save');
+    $this->submitForm([], 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     $edit = [
       'template[value]' => '<div class="snippet-form">{{ user_login_form }}</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet($this->snippetUrl);

     $this->assertXpath('//div[@class="snippet-form"]/form//input[@type="submit" and @value="Log in"]');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


7) modules/contrib/snippet_manager/tests/src/Functional/EntityVariableTest.php:23

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->createContentType(['type' => 'page']);
     $this->drupalCreateNode(['title' => 'Foo', 'body' => 'foo_content']);
@@ @@
       'plugin_id' => 'entity:node',
       'name' => 'node',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

     $edit = [
       'configuration[entity_id]' => 'Bar',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage('The variable has been updated.');
     $this->assertXpath('//main//table/tbody/tr/td[position() = 1]/a[@href="#snippet-edit-form" and text() = "node"]');

@@ @@
     $edit = [
       'template[value]' => '<div class="snippet-node">{{ node }}</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     // -- Check specified node in the snippet.
     $this->drupalGet('node/1');
@@ @@
     // We need to publish the node temporarily because entity reference widget
     // would not allow to submit the form.
     $node->setPublished()->save();
-    $this->drupalPostForm($edit_variable_url, $edit, 'Save');
+    $this->drupalGet($edit_variable_url);
+    $this->submitForm($edit, 'Save');
     $node->setUnpublished()->save();

     // Check whether the node returns back to the snippet.
@@ @@
     $edit = [
       'configuration[entity_id]' => '',
     ];
-    $this->drupalPostForm($edit_variable_url, $edit, 'Save');
+    $this->drupalGet($edit_variable_url);
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('node/1');
     $this->assertSnippetNode('Foo');
@@ @@
     $edit = [
       'configuration[entity_id]' => 'Bar',
     ];
-    $this->drupalPostForm($edit_variable_url, $edit, 'Save');
+    $this->drupalGet($edit_variable_url);
+    $this->submitForm($edit, 'Save');
     $edit = [
       'configuration[entity_id]' => 'Bar',
       'configuration[view_mode]' => 'teaser',
     ];
-    $this->drupalPostForm($edit_variable_url, $edit, 'Save');
+    $this->drupalGet($edit_variable_url);
+    $this->submitForm($edit, 'Save');
     $this->assertXpath('//a[text()="Read more"]');

     // -- Remove the node and make sure it does not cause any exceptions.
@@ @@
     $edit = [
       'configuration[entity_id]' => 'Foo',
     ];
-    $this->drupalPostForm($edit_variable_url, $edit, 'Save');
+    $this->drupalGet($edit_variable_url);
+    $this->submitForm($edit, 'Save');
     $this->click('//a[text()="Edit content item"]');
     $this->assertPageTitle('<em>Edit page</em> Foo');

@@ @@
       'configuration[entity_id]' => 'Foo',
       'configuration[render_mode]' => 'fields',
     ];
-    $this->drupalPostForm($edit_variable_url, $edit, 'Save');
+    $this->drupalGet($edit_variable_url);
+    $this->submitForm($edit, 'Save');
     $edit = [
       'template[value]' => '<div class="snippet-node">{{ node.body }}</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     // Only node body should appear now.
     $this->assertNoXpath('//*[text()="Foo"]');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/snippet_manager/tests/src/Functional/EntityFormVariableTest.php:24

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->createContentType(['name' => 'Page', 'type' => 'page']);

@@ @@
       'plugin_id' => 'entity_form:node',
       'name' => 'node_form',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save and continue');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

     $edit = [
@@ @@
       'configuration[bundle]' => 'page',
       'configuration[form_mode]' => 'default',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     $edit = [
       'template[value]' => '<div class="snippet-node-form">{{ node_form }}</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('<front>');
     $this->assertXpath('//div[@class="snippet-node-form"]/form[@id = "node-page-form"]');
@@ @@
       'title[0][value]' => 'Foo',
       'body[0][value]' => 'Foo',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage(new FM('Page %title has been created.', ['%title' => 'Foo']));
   }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/snippet_manager/tests/src/Functional/DisplayVariantTest.php:24

    ---------- begin diff ----------
@@ @@
       'display_variant[status]' => TRUE,
       'display_variant[admin_label]' => 'Foo',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertXpath($prefix . '//input[@name="display_variant[status]" and @checked]');

     $template = implode([
@@ @@
     $edit = [
       'template[value]' => $template,
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/template', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/template');
+    $this->submitForm($edit, 'Save');

     // -- Display variant title variable.
     $edit = [
@@ @@
       'plugin_id' => 'display_variant:title',
       'name' => 'title',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertXpath('//form[contains(text(),"This plugin has no configurable options.")]');
-    $this->drupalPostForm(NULL, [], 'Save');
+    $this->submitForm([], 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     // -- Display variant main variable.
@@ @@
       'plugin_id' => 'display_variant:main_content',
       'name' => 'main',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertXpath('//form[contains(text(),"This plugin has no configurable options.")]');
-    $this->drupalPostForm(NULL, [], 'Save');
+    $this->submitForm([], 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     // -- Check display variant definition.
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


10) modules/contrib/snippet_manager/tests/src/Functional/ConditionVariableTest.php:29

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'condition:request_path',
       'name' => 'node_page',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

     $edit = [
       'configuration[condition][pages]' => '/node',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/node_page/edit', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/node_page/edit');
+    $this->submitForm($edit, 'Save');

     $edit = [
       'template[value]' => "{% if node_page %}Foo{% else %}Bar{% endif %}",
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     // @todo make it work with cache contexts.
     drupal_flush_all_caches();
@@ @@
     $edit = [
       'configuration[condition][negate]' => TRUE,
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/node_page/edit', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/node_page/edit');
+    $this->submitForm($edit, 'Save');

     drupal_flush_all_caches();
     $this->drupalGet('node');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


11) modules/contrib/snippet_manager/tests/src/Functional/BlockVariableTest.php:26

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'block:system_branding_block',
       'name' => 'branding',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

     // Check default form appearance.
@@ @@
       'configuration[label_display]' => TRUE,
       'configuration[block_branding][use_site_name]' => FALSE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage('The variable has been updated.');

     $this->assertXpath('//main//table/tbody/tr/td[position() = 1]/a[@href = "#snippet-edit-form" and text() = "branding"]');
@@ @@
     $edit = [
       'template[value]' => '<div class="snippet-block">{{ branding }}</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->click('//table//td[position() = 4]//a[text() = "Edit"]');

@@ @@
       'configuration[label_display]' => FALSE,
       'configuration[block_branding][use_site_name]' => TRUE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/branding/edit', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/variable/branding/edit');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet($this->snippetUrl);
     $this->assertNoXpath('//h2[text() = "Foo"]');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


12) modules/contrib/snippet_manager/src/Plugin/SnippetVariable/File.php:117

    ---------- begin diff ----------
@@ @@
         }
         else {
           $build['file'] = [
-            '#markup' => file_create_url($file->getFileUri()),
+            '#markup' => \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()),
           ];
         }
         $build['file']['#cache']['tags'] = $file->getCacheTags();
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


13) modules/contrib/snippet_manager/src/Plugin/CKEditorPlugin/Snippet.php:22

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function getFile() {
-    return drupal_get_path('module', 'snippet_manager') . '/js/plugins/snippet/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('snippet_manager') . '/js/plugins/snippet/plugin.js';
   }

   /**
@@ @@
    * {@inheritdoc}
    */
   public function getButtons() {
-    $module_path = drupal_get_path('module', 'snippet_manager');
+    $module_path = \Drupal::service('extension.list.module')->getPath('snippet_manager');
     return [
       'snippet' => [
         'label' => $this->t('Snippet'),
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


14) modules/contrib/snippet_manager/tests/src/Unit/LocalTasksTest.php:13

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // drupal_get_path() is not allowed here.
     $module_path = substr(__DIR__, strlen($this->root) + 1) . '/../../..';
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/snippet_manager/tests/src/Kernel/SnippetFilterTest.php:22

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->installConfig(['filter']);
     $values = [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/snippet_manager/tests/src/Functional/ViewVariableTest.php:32

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'view:who_s_online',
       'name' => 'who_s_online',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $this->assertStatusMessage('The variable has been created.');

     $edit = [
       'configuration[display]' => 'default',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $edit = [
       'template[value]' => '<div class="snippet-content">{{ who_s_online }}</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/snippet/alpha');

@@ @@
     $edit = [
       'configuration[display]' => 'who_s_online_block',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/who_s_online/edit', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/who_s_online/edit');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('admin/structure/snippet/alpha');

     $this->assertXpath(sprintf($xpath, 'view-display-id-who_s_online_block'));
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


17) modules/contrib/snippet_manager/tests/src/Functional/UrlVariableTest.php:19

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'url',
       'name' => 'url',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');
+    $this->submitForm($edit, 'Save and continue');

     $this->assertStatusMessage('The variable has been created.');

@@ @@
     $edit = [
       'configuration[path]' => '/' . $path,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->assertStatusMessage('The variable has been updated.');

@@ @@
     $edit = [
       'template[value]' => '<div class="snippet-url">{{ url }}</div>',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/template', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/template');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/snippet/alpha');
     $this->assertXpath(sprintf('//div[@class="snippet-url" and text() = "%s"]', base_path() . $path));
@@ @@
       'plugin_id' => 'url',
       'name' => 'wrong_url',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');
+    $this->submitForm($edit, 'Save and continue');

     $edit = [
       'configuration[path]' => $path,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertErrorMessage('The path should begin with "/".');

     // Make sure that empty path does not produce PHP exception.
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


18) modules/contrib/snippet_manager/tests/src/Functional/TextVariableTest.php:16

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'text',
       'name' => 'beer',
     ];
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/add');

-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/add', $edit, 'Save and continue');
+    $this->submitForm($edit, 'Save and continue');

     $this->assertXpath('//select[@name="configuration[content][format]"]/option[@value="snippet_manager_test_basic_format" and @selected="selected"]');
     $this->assertXpath('//select[@name="configuration[content][format]"]/option[@value="snippet_manager_test_restricted_format"]');
@@ @@
       'configuration[content][value]' => '<p>Dark</p><span>Light</span>',
       'configuration[content][format]' => 'snippet_manager_test_basic_format',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $edit = [
       'template[value]' => '<div class="snippet-content">-={{ beer }}=-</div>',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/snippet/alpha');

@@ @@
     $edit = [
       'configuration[content][format]' => 'snippet_manager_test_restricted_format',
     ];
-    $this->drupalPostForm('admin/structure/snippet/alpha/edit/variable/beer/edit', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/alpha/edit/variable/beer/edit');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/snippet/alpha');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


19) modules/contrib/snippet_manager/tests/src/Functional/TestBase.php:61

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Collect permissions.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


20) modules/contrib/snippet_manager/tests/src/Functional/TemplateLoaderTest.php:18

    ---------- begin diff ----------
@@ @@
       'page[status]' => TRUE,
       'page[path]' => '/foo',
     ];
-    $this->drupalPostForm('admin/structure/snippet/add', $edit, 'Save');
+    $this->drupalGet('admin/structure/snippet/add');
+    $this->submitForm($edit, 'Save');

     $edit = [
       'template[value]' => sprintf('<div class="snippet-base">{%% include "@snippet/%s" %%}</div>', $this->snippetId),
       'template[format]' => 'snippet_manager_test_basic_format',
     ];
+    $this->drupalGet('admin/structure/snippet/base/edit/template');

-    $this->drupalPostForm('admin/structure/snippet/base/edit/template', $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/snippet/base');
     $this->assertXpath('//div[@class="snippet-base"]/div[@class="snippet-test" and .="9"]');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


21) modules/contrib/snippet_manager/tests/src/Functional/SnippetUiTest.php:49

    ---------- begin diff ----------
@@ @@
       'plugin_id' => 'text',
       'name' => 'bar',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save and continue');
+    $this->submitForm($edit, 'Save and continue');

     $this->assertPageTitle(new FM('Edit variable %variable', ['%variable' => $edit['name']]));
     $this->assertSession()->addressEquals('/admin/structure/snippet/alpha/edit/variable/bar/edit');
@@ @@
     $this->assertPageTitle(new FM('Are you sure you want to delete the variable %variable?', ['%variable' => 'foo']));
     $this->assertSession()->pageTextContains('This action cannot be undone.');
     $this->assertXpath('//a[text() = "Cancel" and contains(@href, "/admin/structure/snippet/alpha/edit")]');
-    $this->drupalPostForm(NULL, [], 'Delete');
+    $this->submitForm([], 'Delete');
     $this->assertStatusMessage('The variable has been removed.');
     $this->assertSession()->addressEquals('/admin/structure/snippet/alpha/edit/template');
     $this->assertXpath('//table//td[text() = "Variables are not configured yet."]');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


22) modules/contrib/snippet_manager/tests/src/Functional/SnippetTemplateTest.php:29

    ---------- begin diff ----------
@@ @@
       'template[value]' => '<div class="snippet-test">{{ 3 + 4 }}</div>',
       'template[format]' => 'snippet_manager_test_basic_format',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/template', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/template');
+    $this->submitForm($edit, 'Save');

     $this->assertStatusMessage(new FormattableMarkup('Snippet %label has been updated.', ['%label' => $this->snippetLabel]));
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


23) modules/contrib/snippet_manager/tests/src/Functional/SnippetPageTest.php:21

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->createContentType(['type' => 'page']);
     $this->drupalCreateNode(['title' => 'Foo', 'body' => 'foo_content']);
@@ @@
       'page[status]' => TRUE,
       'page[path]' => 'zoo',
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');

     // -- Test page link on overview page.
     $this->drupalGet($this->snippetEditUrl);
@@ @@
     $edit = [
       'page[title]' => 'Bar',
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('zoo');
     $this->assertPageTitle('Bar');

@@ @@
     $edit = [
       'page[display_variant]' => 'snippet_display_variant:qux',
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('zoo');
     $this->assertXpath('//div[@class="qux-wrapper"]/div[@class="snippet-test" and text()="9"]');

@@ @@
     $edit = [
       'page[theme]' => 'bartik',
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('zoo');
     $this->assertSession()->responseContains('core/themes/bartik/css/print.css');

@@ @@
       'page[title]' => '',
       'page[display_variant]' => NULL,
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('node/1');
     // The page title comes from the node.
     $this->assertPageTitle('Foo');
@@ @@
     $edit = [
       'template[value]' => '<div class="node-body">{{ node.body[0] }}</div>',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/template', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/template');
+    $this->submitForm($edit, 'Save');
     $edit = [
       'plugin_id' => 'entity:node',
       'name' => 'node',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save and continue');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save and continue');
     $edit = [
       'configuration[render_mode]' => 'fields',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('node/1');
     $this->assertXpath('//div[@class="node-body"]/p[text()="foo_content"]');

@@ @@
       'page[access][type]' => 'permission',
       'page[access][permission]' => 'access site reports',
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('zoo');
     $this->assertSession()->statusCodeEquals(403);
@@ @@
       'page[access][type]' => 'role',
       'page[access][role][anonymous]' => TRUE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('zoo');
     $this->assertSession()->statusCodeEquals(403);

@@ @@
       'page[access][type]' => 'role',
       'page[access][role][authenticated]' => TRUE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('zoo');
     $this->assertSession()->statusCodeEquals(200);
   }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


24) modules/contrib/snippet_manager/tests/src/Functional/SnippetJsTest.php:31

    ---------- begin diff ----------
@@ @@
       'js[preprocess]' => FALSE,
       'js[value]' => 'alert(123);',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage(new FM('Snippet %label has been updated.', ['%label' => $this->snippetLabel]));

     // Make sure the form values have been updated.
@@ @@
     // Check if the JS file has been created.
     $this->click('//form//a[.="Open file" and @class="button" and @target="_blank"]');
     $file_url = $this->getUrl();
-    $this->assertRegExp(sprintf('#^http://.*/files/snippet/%s.js\?.{6}$#', $snippet_id_hash), $file_url);
+    $this->assertMatchesRegularExpression(sprintf('#^http://.*/files/snippet/%s.js\?.{6}$#', $snippet_id_hash), $file_url);
     $this->assertSession()->responseContains('alert(123);');

     // Check that the JS file is attached to the snippet.
@@ @@
     $edit = [
       'js[status]' => FALSE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/js', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/js');
+    $this->submitForm($edit, 'Save');
     $this->assertSession()->linkNotExists('Open file');
     $this->drupalGet($file_url);
     $this->assertSession()->statusCodeEquals(404);
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * RenameMethodRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


25) modules/contrib/snippet_manager/tests/src/Functional/SnippetFormTest.php:50

    ---------- begin diff ----------
@@ @@
       'page[access][type]' => 'permission',
       'page[access][permission]' => 'administer modules',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');

     $this->assertSession()->addressEquals("admin/structure/snippet/$snippet_id/edit");
     $this->assertPageTitle(new FM('Edit %label', ['%label' => $snippet_label]));
@@ @@
     $this->assertXpath('//form[contains(., "This action cannot be undone.")]');
     $this->assertXpath('//form//a[.="Cancel"]');
     $this->assertXpath('//form//a[contains(@href, "/admin/structure/snippet") and .="Cancel"]');
-    $this->drupalPostForm(NULL, [], 'Delete');
+    $this->submitForm([], 'Delete');
     $this->assertStatusMessage(new FM('The snippet %label has been deleted.', ['%label' => $this->snippetLabel]));
     $this->assertSession()->elementNotExists('xpath', sprintf('//a[contains(., "%s")]', $this->snippetLabel));
     $this->assertSession()->addressEquals('admin/structure/snippet');
@@ @@
       'plugin_id' => 'text',
       'name' => 'foo',
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/variable/add', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/variable/add');
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/snippet');
     $this->click(sprintf('//td[.="%s"]/../td//ul[@class="dropbutton"]/li/a[.="Duplicate"]', $this->snippetLabel));
     $this->assertPageTitle('Duplicate snippet');
     $this->assertXpath(sprintf('//input[@name = "label" and @value = "Duplicate of %s"]', $this->snippetLabel));
-    $this->drupalPostForm(NULL, ['id' => $this->snippetId], 'Duplicate');
+    $this->submitForm(['id' => $this->snippetId], 'Duplicate');
     $this->assertErrorMessage('The machine-readable name is already in use. It must be unique.');
-    $this->drupalPostForm(NULL, ['id' => sprintf('duplicate_of_%s', $this->snippetId)], 'Duplicate');
+    $this->submitForm(['id' => sprintf('duplicate_of_%s', $this->snippetId)], 'Duplicate');

     // Check configuration form.
     $this->assertPageTitle(new FM('Edit %label', ['%label' => 'Duplicate of ' . $this->snippetLabel]));
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


26) modules/contrib/snippet_manager/tests/src/Functional/SnippetCssTest.php:29

    ---------- begin diff ----------
@@ @@
       'css[status]' => TRUE,
       'css[value]' => '.test {color: pink}',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertStatusMessage(new FM('Snippet %label has been updated.', ['%label' => $this->snippetLabel]));

     // Make sure the form values have been updated.
@@ @@
     $this->click('//form//a[.="Open file" and @class="button" and @target="_blank"]');
     $file_url = $this->getUrl();
     $snippet_id_hash = Crypt::hashBase64($this->snippetId);
-    $this->assertRegExp(sprintf('#^http://.*/files/snippet/%s.css\?.{6}$#', $snippet_id_hash), $file_url);
+    $this->assertMatchesRegularExpression(sprintf('#^http://.*/files/snippet/%s.css\?.{6}$#', $snippet_id_hash), $file_url);
     $this->assertSession()->responseContains('.test {color: pink}');

     // Check that the CSS file is attached to the snippet.
@@ @@
     $edit = [
       'css[status]' => FALSE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl . '/css', $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl . '/css');
+    $this->submitForm($edit, 'Save');
     $this->assertSession()->linkNotExists('Open file');
     $this->drupalGet($file_url);
     $this->assertSession()->statusCodeEquals(404);
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * RenameMethodRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


27) modules/contrib/snippet_manager/tests/src/Functional/SnippetBlockTest.php:37

    ---------- begin diff ----------
@@ @@
     $edit = [
       'block[status]' => TRUE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertXpath($prefix . '//input[@name = "block[status]" and @checked]');

     // Check if the block appears on block administration page.
@@ @@
     $edit = [
       'block[name]' => 'Example',
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');
     $this->assertXpath($prefix . '//input[@name = "block[name]" and @value = "Example"]');

     // Check if block admin name has been changed.
@@ @@
       'settings[label]' => 'Beer',
       'region' => 'sidebar_first',
     ];
-    $this->drupalPostForm(sprintf('admin/structure/block/add/snippet:%s/classy', $this->snippetId), $edit, 'Save block');
+    $this->drupalGet(sprintf('admin/structure/block/add/snippet:%s/classy', $this->snippetId));
+    $this->submitForm($edit, 'Save block');

     $active_block_xpath = implode([
       '//div[contains(@class, "region-sidebar-first")]',
@@ @@
     $edit = [
       'block[status]' => FALSE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');

     $this->drupalGet('admin/structure/block/library/classy');
     $this->assertSession()->elementNotExists('xpath', '//td[. = "Example"]');
@@ @@
     $edit = [
       'block[status]' => TRUE,
     ];
-    $this->drupalPostForm($this->snippetEditUrl, $edit, 'Save');
+    $this->drupalGet($this->snippetEditUrl);
+    $this->submitForm($edit, 'Save');

     // Broken block can be cached.
     \Drupal::service('cache_tags.invalidator')->invalidateTags(['block_view']);
@@ @@
     \Drupal::service('cache_tags.invalidator')->invalidateTags(['block_view']);
     $this->drupalGet(NULL);
     $this->assertXpath($active_block_xpath);
-    $this->drupalPostForm(sprintf('admin/structure/snippet/%s/delete', $this->snippetId), [], 'Delete');
+    $this->drupalGet(sprintf('admin/structure/snippet/%s/delete', $this->snippetId));
+    $this->submitForm([], 'Delete');
     $this->drupalGet('admin/structure/block/library/classy');
     $this->assertSession()->elementNotExists('xpath', '//td[. = "Example"]');
     $this->assertXpath($missing_block_xpath);
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 27 files have been changed by Rector                                      

