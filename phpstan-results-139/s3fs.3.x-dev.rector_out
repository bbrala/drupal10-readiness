modules/contrib/s3fs/s3fs.api.php
modules/contrib/s3fs/src/Asset/S3fsCssOptimizer.php
modules/contrib/s3fs/src/StreamWrapper/S3fsStream.php
modules/contrib/s3fs/s3fs.install
modules/contrib/s3fs/src/Batch/S3fsFileMigrationBatch.php
modules/contrib/s3fs/s3fs.module
modules/contrib/s3fs/s3fs.post_update.php
modules/contrib/s3fs/src/Batch/S3fsFileMigrationBatchInterface.php
modules/contrib/s3fs/src/Batch/S3fsRefreshCacheBatch.php
modules/contrib/s3fs/src/Batch/S3fsRefreshCacheBatchInterface.php
modules/contrib/s3fs/src/Commands/S3fsCommands.php
modules/contrib/s3fs/src/Compiler/S3fsMimeTypePass.php
modules/contrib/s3fs/src/Controller/S3fsImageStyleDownloadController.php
modules/contrib/s3fs/src/EventSubscriber/S3fsAdvAggSubscriber.php
modules/contrib/s3fs/tests/fixtures/S3fsCssOptimizerMock.php
modules/contrib/s3fs/tests/src/Functional/S3fsConfigFormTest.php
modules/contrib/s3fs/src/Form/ActionsForm.php
modules/contrib/s3fs/tests/src/Functional/S3fsConfigValidationTest.php
modules/contrib/s3fs/tests/src/Functional/S3fsDrushTest.php
modules/contrib/s3fs/tests/src/Functional/S3fsFileServiceTest.php
modules/contrib/s3fs/src/Form/SettingsForm.php
modules/contrib/s3fs/tests/src/Functional/S3fsTest.php
modules/contrib/s3fs/src/PathProcessor/S3fsPathProcessorImageStyles.php
modules/contrib/s3fs/src/Routing/S3fsImageStyleRoutes.php
modules/contrib/s3fs/src/S3fsException.php
modules/contrib/s3fs/src/S3fsFileService.php
modules/contrib/s3fs/tests/src/Functional/S3fsTestBase.php
modules/contrib/s3fs/tests/src/Functional/S3fsUrlGenerationTest.php
modules/contrib/s3fs/src/S3fsService.php
modules/contrib/s3fs/tests/src/Kernel/S3fsMimeTypeTest.php
modules/contrib/s3fs/tests/src/Unit/S3fsCssOptimizerTest.php
modules/contrib/s3fs/src/S3fsServiceInterface.php
modules/contrib/s3fs/src/S3fsServiceProvider.php
modules/contrib/s3fs/src/StreamWrapper/PrivateS3fsStream.php
modules/contrib/s3fs/src/StreamWrapper/PublicS3fsStream.php

6 files with changes
====================

1) modules/contrib/s3fs/tests/src/Unit/S3fsCssOptimizerTest.php:23

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // D9.3 we need to mock the FileUrlGenerator service.
     if (interface_exists('\Drupal\Core\File\FileUrlGeneratorInterface')) {
-      $this->fileUrlGeneratorServiceMock = $this->getMockBuilder('\Drupal\Core\File\FileUrlGeneratorInterface')
-        ->disableOriginalConstructor()
-        ->getMock();
+      $this->fileUrlGeneratorServiceMock = $this->createMock('\Drupal\Core\File\FileUrlGeneratorInterface');
       $this->fileUrlGeneratorServiceMock->expects($this->any())
         ->method('generateAbsoluteString')
         ->will(
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/s3fs/tests/src/Functional/S3fsUrlGenerationTest.php:322

    ---------- begin diff ----------
@@ @@
     else {
       // @todo remove when D9.3 is minimal supported version.
       // @phpstan-ignore-next-line
-      return file_create_url($uri);
+      return \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
     }
   }
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/s3fs/tests/src/Functional/S3fsTestBase.php:269

    ---------- begin diff ----------
@@ @@
     else {
       // @todo remove when D9.3 is minimal supported version.
       // @phpstan-ignore-next-line
-      return file_save_data($data, $destination, $replace);
+      return \Drupal::service('file.repository')->writeData($data, $destination, $replace);
     }
   }

@@ @@
     else {
       // @todo remove when D9.3 is minimal supported version.
       // @phpstan-ignore-next-line
-      return file_copy($source, $destination, $replace);
+      return \Drupal::service('file.repository')->copy($source, $destination, $replace);
     }
   }

@@ @@
     else {
       // @todo remove when D9.3 is minimal supported version.
       // @phpstan-ignore-next-line
-      return file_create_url($uri);
+      return \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
     }
   }
    ----------- end diff -----------

Applied rules:
 * FileCopyRector
 * FileSaveDataRector
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/s3fs/tests/src/Functional/S3fsTest.php:422

    ---------- begin diff ----------
@@ @@
     else {
       // @todo remove when D9.3 is minimal supported version.
       // @phpstan-ignore-next-line
-      $base_path = drupal_get_path('module', 's3fs');
+      $base_path = \Drupal::service('extension.list.module')->getPath('s3fs');
     }
     $batch['file'] = $base_path . 'src/Batch/S3fsRefreshCacheBatch.php';
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/s3fs/src/S3fsFileService.php:75

    ---------- begin diff ----------
@@ @@
   /**
    * Mime Type Guessing Service.
    *
-   * @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface
+   * @var \Symfony\Component\Mime\MimeTypesInterface
    */
   protected $mimeGuesser;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


6) modules/contrib/s3fs/src/Asset/S3fsCssOptimizer.php:62

    ---------- begin diff ----------
@@ @@
       $url = $this->fileUrlGenerator->generateAbsoluteString($path);
     }
     else {
-      $url = file_create_url($path);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($path);
     }

     if ($useCssjsHost && !empty($cssjsHost)) {
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

