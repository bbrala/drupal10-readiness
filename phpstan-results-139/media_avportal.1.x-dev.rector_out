modules/contrib/media_avportal/media_avportal.install
modules/contrib/media_avportal/src/Plugin/Field/FieldFormatter/AvPortalVideoFormatter.php
modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/AvPortalClientMiddleware.php
modules/contrib/media_avportal/tests/src/FunctionalJavascript/MediaAvPortalCreateContentTest.php
modules/contrib/media_avportal/media_avportal.module
modules/contrib/media_avportal/media_avportal.post_update.php
modules/contrib/media_avportal/src/AvPortalClient.php
modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/AvPortalMockEvent.php
modules/contrib/media_avportal/src/AvPortalClientFactory.php
modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/EventSubscriber/AvPortalMockEventSubscriber.php
modules/contrib/media_avportal/src/AvPortalClientFactoryInterface.php
modules/contrib/media_avportal/src/AvPortalClientInterface.php
modules/contrib/media_avportal/src/AvPortalMediaUpdater.php
modules/contrib/media_avportal/src/Plugin/Field/FieldWidget/AvPortalWidget.php
modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/HistoryMiddleware.php
modules/contrib/media_avportal/src/Plugin/Validation/Constraint/AvPortalResourceConstraint.php
modules/contrib/media_avportal/src/Plugin/Validation/Constraint/AvPortalResourceConstraintValidator.php
modules/contrib/media_avportal/src/Plugin/media/Source/MediaAvPortalPhotoSource.php
modules/contrib/media_avportal/src/AvPortalResource.php
modules/contrib/media_avportal/tests/src/Kernel/AvPortalClientTest.php
modules/contrib/media_avportal/src/Plugin/media/Source/MediaAvPortalSourceBase.php
modules/contrib/media_avportal/src/Commands/AvPortalCommands.php
modules/contrib/media_avportal/tests/src/Kernel/AvPortalPullMediaTest.php
modules/contrib/media_avportal/src/Plugin/Field/FieldFormatter/AvPortalPhotoFormatter.php
modules/contrib/media_avportal/src/Plugin/media/Source/MediaAvPortalSourceInterface.php
modules/contrib/media_avportal/src/Plugin/media/Source/MediaAvPortalVideoSource.php
modules/contrib/media_avportal/src/StreamWrapper/AvPortalPhotoStreamWrapper.php
modules/contrib/media_avportal/tests/src/Kernel/AvPortalStreamWrapperTest.php
modules/contrib/media_avportal/src/Plugin/Field/FieldFormatter/AvPortalPhotoResponsiveFormatter.php
modules/contrib/media_avportal/tests/src/Unit/AvPortalClientTest.php
modules/contrib/media_avportal/tests/src/Unit/AvPortalResourceTest.php

6 files with changes
====================

1) modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/EventSubscriber/AvPortalMockEventSubscriber.php:32

    ---------- begin diff ----------
@@ @@
    */
   public function setMockResources(AvPortalMockEvent $event) {
     $resources = $event->getResources();
-    foreach (glob(drupal_get_path('module', 'media_avportal_mock') . '/responses/resources/*.json') as $file) {
+    foreach (glob(\Drupal::service('extension.list.module')->getPath('media_avportal_mock') . '/responses/resources/*.json') as $file) {
       $ref = str_replace('.json', '', basename($file));
       $resources[$ref] = file_get_contents($file);
     }
@@ @@
     $event->setResources($resources);

     $searches = $event->getSearches();
-    foreach (glob(drupal_get_path('module', 'media_avportal_mock') . '/responses/searches/*.json') as $file) {
+    foreach (glob(\Drupal::service('extension.list.module')->getPath('media_avportal_mock') . '/responses/searches/*.json') as $file) {
       $ref = str_replace('.json', '', basename($file));
       if (!isset($searches[$ref])) {
         // We only add the default search if another subscriber did not yet
@@ @@
     }
     $event->setSearches($searches);
     if (!$event->getDefault('video')) {
-      $event->setDefault(file_get_contents(drupal_get_path('module', 'media_avportal_mock') . '/responses/video-default.json'), 'video');
+      $event->setDefault(file_get_contents(\Drupal::service('extension.list.module')->getPath('media_avportal_mock') . '/responses/video-default.json'), 'video');
     }
     if (!$event->getDefault('all')) {
-      $event->setDefault(file_get_contents(drupal_get_path('module', 'media_avportal_mock') . '/responses/all-default.json'), 'all');
+      $event->setDefault(file_get_contents(\Drupal::service('extension.list.module')->getPath('media_avportal_mock') . '/responses/all-default.json'), 'all');
     }
     if (!$event->getDefault('photo')) {
-      $event->setDefault(file_get_contents(drupal_get_path('module', 'media_avportal_mock') . '/responses/photo-default.json'), 'photo');
+      $event->setDefault(file_get_contents(\Drupal::service('extension.list.module')->getPath('media_avportal_mock') . '/responses/photo-default.json'), 'photo');
     }
   }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector


2) modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/AvPortalMockEvent.php:3

    ---------- begin diff ----------
@@ @@

 namespace Drupal\media_avportal_mock;

+use Symfony\Contracts\EventDispatcher\Event;
 use Psr\Http\Message\RequestInterface;
-use Symfony\Component\EventDispatcher\Event;

 /**
  * Event used to collect the mocking JSON data.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/media_avportal/tests/modules/media_avportal_mock/src/AvPortalClientMiddleware.php:66

    ---------- begin diff ----------
@@ @@

         // AV Portal thumbnails.
         if ($uri->getHost() === 'defiris.ec.streamcloud.be' || strpos($uri->getPath(), 'avservices/avs/files/video6/repository/prod/photo/store/')) {
-          $thumbnail = file_get_contents(drupal_get_path('module', 'media') . '/images/icons/no-thumbnail.png');
+          $thumbnail = file_get_contents(\Drupal::service('extension.list.module')->getPath('media') . '/images/icons/no-thumbnail.png');
           $response = new Response(200, [], $thumbnail);
           return new FulfilledPromise($response);
         }
@@ @@
   protected function createServicePromise(RequestInterface $request): PromiseInterface {
     // Dispatch event to gather the JSON data for responses.
     $event = new AvPortalMockEvent($request);
-    $event = $this->eventDispatcher->dispatch(AvPortalMockEvent::AV_PORTAL_MOCK_EVENT, $event);
+    $event = $this->eventDispatcher->dispatch($event, AvPortalMockEvent::AV_PORTAL_MOCK_EVENT);

     $uri = $request->getUri();
     $query = $uri->getQuery();
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector


4) modules/contrib/media_avportal/tests/src/Unit/AvPortalClientTest.php:41

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->configFactory = $this->getConfigFactoryStub([
@@ @@
       ],
     ]);

-    $this->cacheBackend = $this->getMockBuilder(CacheBackendInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->cacheBackend = $this->createMock(CacheBackendInterface::class);

-    $this->time = $this->getMockBuilder(TimeInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->time = $this->createMock(TimeInterface::class);
   }

   /**
@@ @@
    * @dataProvider queryOptionsDataProvider
    */
   public function testQueryOptions(array $input, array $expected): void {
-    $http_client = $this->getMockBuilder(Client::class)
-      ->setMethods(['request'])
-      ->getMock();
+    $http_client = $this->createMock(Client::class);
     $http_client
       ->expects($this->once())
       ->method('request')
@@ @@
    * @dataProvider invalidQueryOptionsDataProvider
    */
   public function testInvalidQueryOptions(array $input, string $message) {
-    $http_client = $this->getMockBuilder(Client::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $http_client = $this->createMock(Client::class);

     $client = new AvPortalClient($http_client, $this->configFactory, $this->cacheBackend, $this->time, FALSE);
     $this->expectException(\InvalidArgumentException::class);
    ----------- end diff -----------

Applied rules:
 * ExplicitPhpErrorApiRector (https://github.com/sebastianbergmann/phpunit/blob/master/ChangeLog-9.0.md)
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/media_avportal/tests/src/Kernel/AvPortalStreamWrapperTest.php:24

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig(['media_avportal']);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/media_avportal/tests/src/Kernel/AvPortalClientTest.php:23

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(['media_avportal']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

