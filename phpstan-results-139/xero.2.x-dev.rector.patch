diff --git a/src/Plugin/Field/FieldFormatter/XeroReferenceFormatter.php b/src/Plugin/Field/FieldFormatter/XeroReferenceFormatter.php
index 288581c..a714662 100644
--- a/src/Plugin/Field/FieldFormatter/XeroReferenceFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/XeroReferenceFormatter.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\xero\Plugin\Field\FieldFormatter;
 
+use Symfony\Component\DependencyInjection\ContainerInterface;
 use Drupal\Component\Plugin\Exception\PluginNotFoundException;
 use Drupal\Core\Field\FormatterBase;
 use Drupal\Core\Field\FieldItemListInterface;
@@ -45,7 +46,7 @@ class XeroReferenceFormatter extends FormatterBase implements ContainerFactoryPl
   /**
    * {@inheritdoc}
    */
-  public static function create(\Symfony\Component\DependencyInjection\ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
     return new static(
       $plugin_id,
       $plugin_definition,
diff --git a/tests/src/Kernel/XeroItemManagerTest.php b/tests/src/Kernel/XeroItemManagerTest.php
index 33c7aec..82734ed 100644
--- a/tests/src/Kernel/XeroItemManagerTest.php
+++ b/tests/src/Kernel/XeroItemManagerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\xero\Plugin\DataType\XeroItemList;
 use Drupal\xero\TypedData\XeroComplexItemInterface;
@@ -18,6 +19,7 @@ use Prophecy\Argument;
  */
 class XeroItemManagerTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
@@ -51,7 +53,7 @@ class XeroItemManagerTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->xeroQueryFactory = $this->createMock(XeroQueryFactory::class);
@@ -516,7 +518,7 @@ class XeroItemManagerTest extends KernelTestBase {
    * @param \Drupal\xero\TypedData\XeroComplexItemInterface|null $item
    *   The item to expect to be set as the query's data.
    *
-   * @return \PHPUnit_Framework_MockObject_MockObject
+   * @return \PHPUnit\Framework\MockObject\MockObject
    *   A mock Xero query.
    */
   protected function buildMockQuery($type, $result, $method = NULL, $item = NULL) {
diff --git a/tests/src/Kernel/XeroQueryExecuteTest.php b/tests/src/Kernel/XeroQueryExecuteTest.php
index bcf55bc..7a04ecc 100644
--- a/tests/src/Kernel/XeroQueryExecuteTest.php
+++ b/tests/src/Kernel/XeroQueryExecuteTest.php
@@ -36,12 +36,10 @@ class XeroQueryExecuteTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
-    $this->client = $this->getMockBuilder('\Radcliffe\Xero\XeroClient')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->client = $this->createMock('\Radcliffe\Xero\XeroClient');
 
     $this->query = new XeroQuery($this->client, \Drupal::service('serializer'), \Drupal::service('typed_data_manager'), \Drupal::service('logger.factory'), \Drupal::service('cache.xero_query'));
 
diff --git a/tests/src/Unit/Controller/XeroAuthorizeControllerTest.php b/tests/src/Unit/Controller/XeroAuthorizeControllerTest.php
index 613f2f6..f4e4947 100644
--- a/tests/src/Unit/Controller/XeroAuthorizeControllerTest.php
+++ b/tests/src/Unit/Controller/XeroAuthorizeControllerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Tests\Core\Form\FormTestBase;
 use Drupal\Tests\xero\Traits\XeroTokenTrait;
@@ -22,6 +23,7 @@ use Symfony\Component\HttpFoundation\Request;
  */
 class XeroAuthorizeControllerTest extends FormTestBase {
 
+  use ProphecyTrait;
   use XeroTokenTrait;
 
   /**
@@ -48,7 +50,7 @@ class XeroAuthorizeControllerTest extends FormTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->consumerId = $this->createToken();
@@ -56,9 +58,7 @@ class XeroAuthorizeControllerTest extends FormTestBase {
     $this->crsfToken = $this->createToken();
 
     // Mock config objects with mock objects because prophecy is opinionated.
-    $immutableConfig = $this->getMockBuilder('\Drupal\Core\Config\ImmutableConfig')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $immutableConfig = $this->createMock('\Drupal\Core\Config\ImmutableConfig');
     $immutableConfig->expects($this->any())
       ->method('get')
       ->will($this->returnValueMap([
@@ -66,9 +66,7 @@ class XeroAuthorizeControllerTest extends FormTestBase {
         'oauth.consumer_secret' => $this->consumerSecret,
       ]));
 
-    $mutableConfig = $this->getMockBuilder('\Drupal\Core\Config\Config')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $mutableConfig = $this->createMock('\Drupal\Core\Config\Config');
     $mutableConfig->expects($this->any())
       ->method('set')
       ->will($this->returnSelf());
diff --git a/tests/src/Unit/Controller/XeroAutocompleteControllerTest.php b/tests/src/Unit/Controller/XeroAutocompleteControllerTest.php
index ab7bb57..55048ea 100644
--- a/tests/src/Unit/Controller/XeroAutocompleteControllerTest.php
+++ b/tests/src/Unit/Controller/XeroAutocompleteControllerTest.php
@@ -191,19 +191,15 @@ class XeroAutocompleteControllerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Setup TypedDataManager mock.
     // Typed Data Manager setup.
-    $this->typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
 
     // Setup Xero Query mock.
-    $this->xeroQuery = $this->getMockBuilder('\Drupal\xero\XeroQuery')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->xeroQuery = $this->createMock('\Drupal\xero\XeroQuery');
 
     // Mock the container.
     $this->container = new ContainerBuilder();
diff --git a/tests/src/Unit/Form/SettingsFormTest.php b/tests/src/Unit/Form/SettingsFormTest.php
index 4fdb7e5..02ba545 100644
--- a/tests/src/Unit/Form/SettingsFormTest.php
+++ b/tests/src/Unit/Form/SettingsFormTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit\Form;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Form\FormState;
 use Drupal\Tests\Core\Form\FormTestBase;
@@ -17,6 +18,7 @@ use Prophecy\Argument;
  */
 class SettingsFormTest extends FormTestBase {
 
+  use ProphecyTrait;
   use XeroTokenTrait;
 
   /**
@@ -43,16 +45,14 @@ class SettingsFormTest extends FormTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->consumerId = $this->createToken();
     $this->consumerSecret = $this->createToken();
 
     // Mock config objects with mock objects because prophecy is opinionated.
-    $immutableConfig = $this->getMockBuilder('\Drupal\Core\Config\ImmutableConfig')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $immutableConfig = $this->createMock('\Drupal\Core\Config\ImmutableConfig');
     $immutableConfig->expects($this->any())
       ->method('get')
       ->will($this->returnValueMap([
@@ -60,9 +60,7 @@ class SettingsFormTest extends FormTestBase {
         'oauth.consumer_secret' => $this->consumerSecret,
       ]));
 
-    $mutableConfig = $this->getMockBuilder('\Drupal\Core\Config\Config')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $mutableConfig = $this->createMock('\Drupal\Core\Config\Config');
     $mutableConfig->expects($this->any())
       ->method('set')
       ->will($this->returnSelf());
diff --git a/tests/src/Unit/Form/XeroFormBuilderTest.php b/tests/src/Unit/Form/XeroFormBuilderTest.php
index 319096d..935ece4 100644
--- a/tests/src/Unit/Form/XeroFormBuilderTest.php
+++ b/tests/src/Unit/Form/XeroFormBuilderTest.php
@@ -32,7 +32,7 @@ class XeroFormBuilderTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create some data definitions.
@@ -43,9 +43,7 @@ class XeroFormBuilderTest extends UnitTestCase {
     $phoneListDefinition = new ListDataDefinition([], $phoneDefinition);
 
     // Mock Typed Data Manager.
-    $typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
     $typedDataManager->expects($this->any())
       ->method('getDefaultConstraints')
       ->willReturn([]);
diff --git a/tests/src/Unit/Normalizer/XeroNormalizerTest.php b/tests/src/Unit/Normalizer/XeroNormalizerTest.php
index f8c0aff..1682c90 100644
--- a/tests/src/Unit/Normalizer/XeroNormalizerTest.php
+++ b/tests/src/Unit/Normalizer/XeroNormalizerTest.php
@@ -38,7 +38,7 @@ class XeroNormalizerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     // Account data definition setup.
     $accountDefinition = AccountDefinition::create('xero_account');
     $listDefinition = ListDataDefinition::createFromDataType('xero_account');
diff --git a/tests/src/Unit/Plugin/DataType/AccountTest.php b/tests/src/Unit/Plugin/DataType/AccountTest.php
index 612ef8a..9232c42 100644
--- a/tests/src/Unit/Plugin/DataType/AccountTest.php
+++ b/tests/src/Unit/Plugin/DataType/AccountTest.php
@@ -24,7 +24,7 @@ class AccountTest extends TestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create data type.
diff --git a/tests/src/Unit/Plugin/DataType/ContactTest.php b/tests/src/Unit/Plugin/DataType/ContactTest.php
index 9bb989e..6d493de 100644
--- a/tests/src/Unit/Plugin/DataType/ContactTest.php
+++ b/tests/src/Unit/Plugin/DataType/ContactTest.php
@@ -27,7 +27,7 @@ class ContactTest extends TestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create data type.
diff --git a/tests/src/Unit/Plugin/DataType/EmployeeTest.php b/tests/src/Unit/Plugin/DataType/EmployeeTest.php
index 09a0489..0db86b0 100644
--- a/tests/src/Unit/Plugin/DataType/EmployeeTest.php
+++ b/tests/src/Unit/Plugin/DataType/EmployeeTest.php
@@ -24,7 +24,7 @@ class EmployeeTest extends TestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create data type.
diff --git a/tests/src/Unit/Plugin/DataType/PhoneTest.php b/tests/src/Unit/Plugin/DataType/PhoneTest.php
index 6606b60..a4f5312 100644
--- a/tests/src/Unit/Plugin/DataType/PhoneTest.php
+++ b/tests/src/Unit/Plugin/DataType/PhoneTest.php
@@ -24,7 +24,7 @@ class PhoneTest extends TestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create data type.
diff --git a/tests/src/Unit/Plugin/DataType/TestBase.php b/tests/src/Unit/Plugin/DataType/TestBase.php
index f9399aa..4ee1c5a 100644
--- a/tests/src/Unit/Plugin/DataType/TestBase.php
+++ b/tests/src/Unit/Plugin/DataType/TestBase.php
@@ -32,11 +32,9 @@ abstract class TestBase extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     // Typed Data Manager setup.
-    $this->typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
 
     $this->typedDataManager->expects($this->any())
       ->method('getDefinition')
@@ -47,9 +45,7 @@ abstract class TestBase extends UnitTestCase {
       ->willReturn([]);
 
     // Validation constraint manager setup.
-    $validation_constraint_manager = $this->getMockBuilder('\Drupal\Core\Validation\ConstraintManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $validation_constraint_manager = $this->createMock('\Drupal\Core\Validation\ConstraintManager');
     $validation_constraint_manager->expects($this->any())
       ->method('create')
       ->willReturn([]);
diff --git a/tests/src/Unit/Plugin/DataType/UserTest.php b/tests/src/Unit/Plugin/DataType/UserTest.php
index 1ca0361..6b8ff35 100644
--- a/tests/src/Unit/Plugin/DataType/UserTest.php
+++ b/tests/src/Unit/Plugin/DataType/UserTest.php
@@ -24,7 +24,7 @@ class UserTest extends TestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create data type.
diff --git a/tests/src/Unit/Plugin/Field/FieldFormatter/XeroReferenceFormatterTest.php b/tests/src/Unit/Plugin/Field/FieldFormatter/XeroReferenceFormatterTest.php
index 275f9f0..5596a36 100644
--- a/tests/src/Unit/Plugin/Field/FieldFormatter/XeroReferenceFormatterTest.php
+++ b/tests/src/Unit/Plugin/Field/FieldFormatter/XeroReferenceFormatterTest.php
@@ -28,7 +28,7 @@ class XeroReferenceFormatterTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // DrupalWTF. t().
@@ -37,9 +37,7 @@ class XeroReferenceFormatterTest extends UnitTestCase {
     $container = new ContainerBuilder();
 
     // Mock Typed Data Manager
-    $this->typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
     $this->typedDataManager->expects($this->any())
       ->method('getDefaultConstraints')
       ->willReturn([]);
@@ -52,9 +50,7 @@ class XeroReferenceFormatterTest extends UnitTestCase {
       ));
 
     // Mock Field Type Plugin Manager
-    $this->pluginManager = $this->getMockBuilder('\Drupal\Core\Field\FieldTypePluginManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->pluginManager = $this->createMock('\Drupal\Core\Field\FieldTypePluginManager');
     $this->pluginManager->expects($this->any())
       ->method('getDefaultStorageSettings')
       ->with('xero_reference')
@@ -65,9 +61,7 @@ class XeroReferenceFormatterTest extends UnitTestCase {
       ->willReturn([]);
 
     // Validation constraint manager setup.
-    $validation_constraint_manager = $this->getMockBuilder('\Drupal\Core\Validation\ConstraintManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $validation_constraint_manager = $this->createMock('\Drupal\Core\Validation\ConstraintManager');
     $validation_constraint_manager->expects($this->any())
       ->method('create')
       ->willReturn([]);
diff --git a/tests/src/Unit/Plugin/Field/FieldType/XeroReferenceTest.php b/tests/src/Unit/Plugin/Field/FieldType/XeroReferenceTest.php
index 8b5c7f9..2be523d 100644
--- a/tests/src/Unit/Plugin/Field/FieldType/XeroReferenceTest.php
+++ b/tests/src/Unit/Plugin/Field/FieldType/XeroReferenceTest.php
@@ -34,22 +34,18 @@ class XeroReferenceTest extends BaseFieldDefinitionTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     require_once realpath($this->root) . '/core/includes/bootstrap.inc';
 
     // Set the typed data manager service after mocking (again).
-    $this->typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
     $this->typedDataManager->expects($this->any())
       ->method('getDefaultConstraints')
       ->willReturn([]);
     // Validation constraint manager setup.
-    $this->validation_constraint_manager = $this->getMockBuilder('\Drupal\Core\Validation\ConstraintManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->validation_constraint_manager = $this->createMock('\Drupal\Core\Validation\ConstraintManager');
     $this->validation_constraint_manager->expects($this->any())
       ->method('create')
       ->willReturn([]);
diff --git a/tests/src/Unit/Plugin/Field/FieldWidget/WidgetTestBase.php b/tests/src/Unit/Plugin/Field/FieldWidget/WidgetTestBase.php
index 94cf4fc..a8cdb05 100644
--- a/tests/src/Unit/Plugin/Field/FieldWidget/WidgetTestBase.php
+++ b/tests/src/Unit/Plugin/Field/FieldWidget/WidgetTestBase.php
@@ -33,7 +33,7 @@ abstract class WidgetTestBase extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // DrupalWTF: t()
@@ -42,9 +42,7 @@ abstract class WidgetTestBase extends UnitTestCase {
     $container = new ContainerBuilder();
 
     // Mock Typed Data Manager
-    $this->typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
     $this->typedDataManager->expects($this->any())
       ->method('getDefaultConstraints')
       ->willReturn([]);
@@ -54,9 +52,7 @@ abstract class WidgetTestBase extends UnitTestCase {
       ->will($this->returnValueMap($this->getDefinitionMap()));
 
     // Mock Field Type Plugin Manager
-    $this->pluginManager = $this->getMockBuilder('\Drupal\Core\Field\FieldTypePluginManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->pluginManager = $this->createMock('\Drupal\Core\Field\FieldTypePluginManager');
     $this->pluginManager->expects($this->any())
       ->method('getDefaultStorageSettings')
       ->with('xero_reference')
@@ -67,9 +63,7 @@ abstract class WidgetTestBase extends UnitTestCase {
       ->willReturn([]);
 
     // Validation constraint manager setup.
-    $validation_constraint_manager = $this->getMockBuilder('\Drupal\Core\Validation\ConstraintManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $validation_constraint_manager = $this->createMock('\Drupal\Core\Validation\ConstraintManager');
     $validation_constraint_manager->expects($this->any())
       ->method('create')
       ->willReturn([]);
diff --git a/tests/src/Unit/Plugin/Validation/Constraint/XeroGuidConstraintValidatorTest.php b/tests/src/Unit/Plugin/Validation/Constraint/XeroGuidConstraintValidatorTest.php
index f251c1b..2ebdd11 100644
--- a/tests/src/Unit/Plugin/Validation/Constraint/XeroGuidConstraintValidatorTest.php
+++ b/tests/src/Unit/Plugin/Validation/Constraint/XeroGuidConstraintValidatorTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit\Plugin\Validation\Constraint;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 use Drupal\Tests\xero\Traits\XeroGuidTrait;
 use Drupal\xero\Plugin\Validation\Constraint\XeroGuidConstraint;
@@ -17,6 +18,7 @@ use Symfony\Component\Validator\Context\ExecutionContext;
  */
 class XeroGuidConstraintValidatorTest extends UnitTestCase {
 
+  use ProphecyTrait;
   use XeroGuidTrait;
 
   protected $validator;
@@ -25,7 +27,7 @@ class XeroGuidConstraintValidatorTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $translatorProphet = $this->prophesize('\Symfony\Component\Translation\TranslatorInterface');
diff --git a/tests/src/Unit/TypedData/XeroDefinitionTest.php b/tests/src/Unit/TypedData/XeroDefinitionTest.php
index 85955d5..33804bd 100644
--- a/tests/src/Unit/TypedData/XeroDefinitionTest.php
+++ b/tests/src/Unit/TypedData/XeroDefinitionTest.php
@@ -20,18 +20,14 @@ class XeroDefinitionTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Typed Data Manager setup.
-    $this->typedDataManager = $this->getMockBuilder('\Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('\Drupal\Core\TypedData\TypedDataManager');
 
     // Validation constraint manager setup.
-    $validation_constraint_manager = $this->getMockBuilder('\Drupal\Core\Validation\ConstraintManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $validation_constraint_manager = $this->createMock('\Drupal\Core\Validation\ConstraintManager');
     $validation_constraint_manager->expects($this->any())
       ->method('create')
       ->willReturn([]);
diff --git a/tests/src/Unit/XeroClientFactoryTest.php b/tests/src/Unit/XeroClientFactoryTest.php
index bb1e5f7..5e0c094 100644
--- a/tests/src/Unit/XeroClientFactoryTest.php
+++ b/tests/src/Unit/XeroClientFactoryTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\xero\Traits\XeroGuidTrait;
 use Drupal\Tests\xero\Traits\XeroTokenTrait;
 use Drupal\xero\XeroClientFactory;
@@ -22,6 +23,7 @@ use Prophecy\Argument;
  */
 class XeroClientFactoryTest extends UnitTestCase {
 
+  use ProphecyTrait;
   use XeroTokenTrait;
   use XeroGuidTrait;
 
@@ -35,7 +37,7 @@ class XeroClientFactoryTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->factory = new XeroClientFactory();
   }
 
diff --git a/tests/src/Unit/XeroQueryClientTest.php b/tests/src/Unit/XeroQueryClientTest.php
index ede6097..cc6bb8c 100644
--- a/tests/src/Unit/XeroQueryClientTest.php
+++ b/tests/src/Unit/XeroQueryClientTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\NullBackend;
 use Drupal\xero\XeroQuery;
 
@@ -10,6 +11,7 @@ use Drupal\xero\XeroQuery;
  */
 class XeroQueryClientTest extends XeroQueryTestBase {
 
+  use ProphecyTrait;
   /**
    * Provider for client FALSE or with mocked client.
    *
diff --git a/tests/src/Unit/XeroQueryFactoryTest.php b/tests/src/Unit/XeroQueryFactoryTest.php
index 6426024..0bdb538 100644
--- a/tests/src/Unit/XeroQueryFactoryTest.php
+++ b/tests/src/Unit/XeroQueryFactoryTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\NullBackend;
 use Drupal\Tests\UnitTestCase;
 use Drupal\xero\XeroQueryFactory;
@@ -13,6 +14,7 @@ use Drupal\xero\XeroQueryFactory;
  */
 class XeroQueryFactoryTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Xero client mock.
    *
@@ -51,7 +53,7 @@ class XeroQueryFactoryTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $clientProphet = $this->prophesize('\Radcliffe\Xero\XeroClient');
     $this->xeroClient = $clientProphet->reveal();
 
diff --git a/tests/src/Unit/XeroQueryTestBase.php b/tests/src/Unit/XeroQueryTestBase.php
index 232b188..ab2cc69 100644
--- a/tests/src/Unit/XeroQueryTestBase.php
+++ b/tests/src/Unit/XeroQueryTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Logger\LoggerChannelFactory;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\serialization\Normalizer\ComplexDataNormalizer;
@@ -17,6 +18,7 @@ use Symfony\Component\Serializer\Serializer;
  */
 abstract class XeroQueryTestBase extends UnitTestCase {
 
+  use ProphecyTrait;
   use XeroGuidTrait;
 
   /**
@@ -49,13 +51,11 @@ abstract class XeroQueryTestBase extends UnitTestCase {
    */
   protected $query;
 
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Setup a Null cache backend.
-    $this->cache = $this->getMockBuilder('Drupal\Core\Cache\NullBackend')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->cache = $this->createMock('Drupal\Core\Cache\NullBackend');
 
     // Setup LoggerChannelFactory.
     $loggerProphet = $this->prophesize('\Psr\Log\LoggerInterface');
@@ -63,14 +63,10 @@ abstract class XeroQueryTestBase extends UnitTestCase {
     $this->loggerFactory->addLogger($loggerProphet->reveal());
 
     // Mock the Typed Data Manager.
-    $this->typedDataManager = $this->getMockBuilder('Drupal\Core\TypedData\TypedDataManager')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->typedDataManager = $this->createMock('Drupal\Core\TypedData\TypedDataManager');
 
     // Mock XeroClient.
-    $this->client = $this->getMockBuilder('\Radcliffe\Xero\XeroClient')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->client = $this->createMock('\Radcliffe\Xero\XeroClient');
 
     // Setup the container.
     $container = new ContainerBuilder();
diff --git a/tests/src/Unit/XeroTokenManagerTest.php b/tests/src/Unit/XeroTokenManagerTest.php
index 361279e..c26d843 100644
--- a/tests/src/Unit/XeroTokenManagerTest.php
+++ b/tests/src/Unit/XeroTokenManagerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\xero\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Session\AccountProxyInterface;
 use Drupal\Tests\UnitTestCase;
 use Drupal\xero\XeroTokenManager;
@@ -16,6 +17,7 @@ use Prophecy\Prediction\CallPrediction;
  */
 class XeroTokenManagerTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Configuration factory mock.
    *
@@ -26,12 +28,10 @@ class XeroTokenManagerTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
-    $config = $this->getMockBuilder('\Drupal\Core\Config\Config')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $config = $this->createMock('\Drupal\Core\Config\Config');
     $config->expects($this->any())
       ->method('set')
       ->will($this->returnSelf());
@@ -54,9 +54,7 @@ class XeroTokenManagerTest extends UnitTestCase {
     $userDataProphet = $this->prophesize('\Drupal\user\UserDataInterface');
     $keyValueProphet = $this->prophesize('\Drupal\Core\KeyValueStore\KeyValueStoreInterface');
 
-    $config = $this->getMockBuilder('\Drupal\Core\Config\Config')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $config = $this->createMock('\Drupal\Core\Config\Config');
 
     if ($account !== NULL) {
       $userDataProphet
diff --git a/xero.install b/xero.install
index 157168a..1be6059 100644
--- a/xero.install
+++ b/xero.install
@@ -1,5 +1,7 @@
 <?php
 
+use Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException;
+use Drupal\Core\Utility\UpdateException;
 /**
  * @file
  * Xero installation routines.
@@ -16,7 +18,7 @@ function xero_requirements($phase) {
       $client = \Drupal::service('xero.client');
     }
     catch
-      (\Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException $e) {
+      (ServiceNotFoundException $e) {
       $client = FALSE;
     }
 
@@ -49,7 +51,7 @@ function xero_update_8200() {
   }
   catch (\Exception $e) {
     watchdog_exception('xero', $e);
-    throw new \Drupal\Core\Utility\UpdateException('Failed to remove OAuth1 configuration.');
+    throw new UpdateException('Failed to remove OAuth1 configuration.');
   }
 
   return t('Removed Xero OAuth1 configuration. You must visit the Xero configuration page to configure OAuth2 credentials for your application.');
