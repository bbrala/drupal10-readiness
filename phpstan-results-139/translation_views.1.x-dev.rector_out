modules/contrib/translation_views/src/Plugin/views/field/TranslationCountField.php
modules/contrib/translation_views/tests/src/Functional/CommentFullViewFiltersFieldsTest.php
modules/contrib/translation_views/src/Plugin/views/field/TranslationModerationState.php
modules/contrib/translation_views/src/Plugin/views/field/TranslationOperationsField.php
modules/contrib/translation_views/tests/src/Functional/ContentFullViewFiltersFieldsTest.php
modules/contrib/translation_views/src/Plugin/views/field/TranslationSourceLangcodeEqualsRowLangcodeField.php
modules/contrib/translation_views/src/Plugin/views/field/TranslationStatus.php
modules/contrib/translation_views/src/Plugin/views/field/TranslationTargetLanguageField.php
modules/contrib/translation_views/src/Plugin/views/filter/TranslationCountFilter.php
modules/contrib/translation_views/src/Plugin/views/filter/TranslationSourceLangcodeEqualsRowLangcodeFilter.php
modules/contrib/translation_views/src/Plugin/views/filter/TranslationStatusFilter.php
modules/contrib/translation_views/src/Plugin/views/filter/TranslationTargetLanguageFilter.php
modules/contrib/translation_views/src/Plugin/views/join/TranslationLanguageJoin.php
modules/contrib/translation_views/src/TranslationCountTrait.php
modules/contrib/translation_views/tests/src/Functional/ContentModerationIntegration.php
modules/contrib/translation_views/src/TranslationViewsFieldDefinitions.php
modules/contrib/translation_views/src/TranslationViewsTargetLanguage.php
modules/contrib/translation_views/tests/src/Functional/ContentTranslationJobsViewTest.php
modules/contrib/translation_views/tests/src/Functional/TranslationOperationTargetLanguageTest.php
modules/contrib/translation_views/tests/src/Functional/TranslationOperationsFieldPermissionsTest.php
modules/contrib/translation_views/tests/src/Functional/TranslatorsContentIntegrationTest.php
modules/contrib/translation_views/translation_views.module
modules/contrib/translation_views/translation_views.views.inc
modules/contrib/translation_views/translation_views.views_execution.inc

7 files with changes
====================

1) modules/contrib/translation_views/tests/src/Functional/TranslatorsContentIntegrationTest.php:54

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->drupalLogin($this->rootUser);
     $this->translatorSkills = $this->container->get('translators.skills');
@@ @@

     // Check that all languages are available as target language.
     $this->drupalGet('/test-translators-content-filter');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $this->assertOptionCount('translation_target_language', 4);
     $this->assertOptionAvailable('translation_target_language', 'en');
@@ @@
     $this->assertSession()->checkboxNotChecked('options[column][source]');
     $this->assertSession()->checkboxChecked('options[column][target]');
     // Update options.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'options[limit]'        => 1,
       'options[column][source]' => 1,
       'options[column][target]'   => 1,
@@ @@

     // Check that all languages are available as target language.
     $this->drupalGet('/test-translators-content-filter');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $this->assertOptionCount('translation_target_language', 2);
     $this->assertOptionAvailable('translation_target_language', 'en');
@@ @@
     // Check results without any registered translation skills.
     $this->removeSkills();
     $this->drupalGet('/test-translators-content-filter');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()
       ->elementNotExists('css', 'table > tbody > tr:nth-child(1)');
     $this->assertOptionCount('translation_target_language', 1);
@@ @@
         'translation_target_language' => 'fr',
       ],
     ]);
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()
       ->elementTextContains(
         'css',
@@ @@
         'translation_target_language' => 'de',
       ],
     ]);
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()
       ->elementTextNotContains(
         'css',
@@ @@
         'translation_target_language' => 'fr',
       ],
     ]);
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()
       ->elementTextContains(
         'css',
@@ @@
       );
     $this->click('table > tbody > tr:nth-child(1) .views-field-translation-operations ul .edit a');
     // @todo: Fix when translators permission handeling is fixed.
-    $this->assertUrl('fr/node/1/edit');
+    $this->assertSession()->addressEquals('fr/node/1/edit');

     // Check Delete translation for registered language.
     $this->drupalGet('/test-translators-content-filter', [
@@ @@
         'translation_target_language' => 'fr',
       ],
     ]);
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()
       ->elementTextContains(
         'css',
@@ @@
       );
     $this->click('table > tbody > tr:nth-child(1) .views-field-translation-operations ul .delete a');
     // @todo: Fix when translators permission handeling is fixed.
-    $this->assertUrl('fr/node/1/delete');
+    $this->assertSession()->addressEquals('fr/node/1/delete');

     // Check translation operations for not registered languages.
     $this->drupalGet('/test-translators-content-filter', [
@@ @@
         'translation_target_language' => 'de',
       ],
     ]);
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()
       ->elementTextNotContains(
         'css',
    ----------- end diff -----------

Applied rules:
 * AssertResponseRector
 * AssertUrlRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/translation_views/tests/src/Functional/TranslationOperationsFieldPermissionsTest.php:46

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp($import_test_views = TRUE) {
+  protected function setUp($import_test_views = TRUE): void {
     parent::setUp($import_test_views);

     $this->drupalLogin($this->rootUser);
@@ @@
     }
     // Enable translation for Article nodes.
     $this->enableTranslation('node', 'article');
+    $this->drupalGet('node/add/article');

     // Create testing node.
-    $this->drupalPostForm('node/add/article', [
+    $this->submitForm([
       'title[0][value]' => $this->randomString(),
     ], 'Save');

@@ @@
    *   Entity subcategory (e.g. article).
    */
   private function enableTranslation($category, $subcategory) {
-    $this->drupalPostForm('admin/config/regional/content-language', [
+    $this->drupalGet('admin/config/regional/content-language');
+    $this->submitForm([
       "entity_types[$category]"                                                   => 1,
       "settings[$category][$subcategory][translatable]"                           => 1,
       "settings[$category][$subcategory][settings][language][language_alterable]" => 1,
@@ @@
         'Edit'
       );
     $this->click('.view-content > div:nth-child(1) .views-field-translation-operations ul .edit a');
-    $this->assertUrl('/fr/node/1/translations/edit/fr');
+    $this->assertSession()->addressEquals('/fr/node/1/translations/edit/fr');
     // Check with edit permission.
     $this->addPermissionsForAuthUser(['edit any article content']);
     $this->assertTrue($userUpdate->hasPermission('edit any article content'));
@@ @@
         'Edit'
       );
     $this->click('.view-content > div:nth-child(1) .views-field-translation-operations ul .edit a');
-    $this->assertUrl('/fr/node/1/edit');
+    $this->assertSession()->addressEquals('/fr/node/1/edit');
   }

   /**
@@ @@
         'Delete'
       );
     $this->click('.view-content > div:nth-child(1) .views-field-translation-operations ul .delete a');
-    $this->assertUrl('/fr/node/1/translations/delete/fr');
+    $this->assertSession()->addressEquals('/fr/node/1/translations/delete/fr');
     // Check with edit permission.
     $this->addPermissionsForAuthUser(['delete any article content']);
     $this->assertTrue($userDelete->hasPermission('delete any article content'));
@@ @@
         'Delete'
       );
     $this->click('.view-content > div:nth-child(1) .views-field-translation-operations ul .delete a');
-    $this->assertUrl('/fr/node/1/delete');
+    $this->assertSession()->addressEquals('/fr/node/1/delete');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertUrlRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/translation_views/tests/src/Functional/TranslationOperationTargetLanguageTest.php:57

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp($import_test_views = TRUE) {
+  protected function setUp($import_test_views = TRUE): void {
     parent::setUp($import_test_views);

     $this->adminUser = $this->createUser([], 'test_admin', TRUE);
@@ @@
     }
     // Enable translation for Article nodes.
     $this->enableTranslation('node', 'article');
+    $this->drupalGet('node/add/article');

     // Create testing node.
-    $this->drupalPostForm('node/add/article', [
+    $this->submitForm([
       'title[0][value]' => $this->randomString(),
     ], 'Save');

@@ @@
    *   Entity subcategory (e.g. article).
    */
   private function enableTranslation($category, $subcategory) {
-    $this->drupalPostForm('admin/config/regional/content-language', [
+    $this->drupalGet('admin/config/regional/content-language');
+    $this->submitForm([
       "entity_types[$category]"                                                   => 1,
       "settings[$category][$subcategory][translatable]"                           => 1,
       "settings[$category][$subcategory][settings][language][language_alterable]" => 1,
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/translation_views/tests/src/Functional/ContentTranslationJobsViewTest.php:28

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $langcodes = ['de', 'fr'];
     foreach ($langcodes as $langcode) {
@@ @@
       'settings[node][article][translatable]'                           => 1,
       'settings[node][article][settings][language][language_alterable]' => 1,
     ];
-    $this->drupalPostForm('admin/config/regional/content-language', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/regional/content-language');
+    $this->submitForm($edit, t('Save configuration'));
     \Drupal::entityTypeManager()->clearCachedDefinitions();

     // Create node1 in german.
@@ @@
       'title[0][value]'    => 'node1 de',
       'langcode[0][value]' => 'de',
     ];
-    $this->drupalPostForm('node/add/article', $edit, t('Save'));
+    $this->drupalGet('node/add/article');
+    $this->submitForm($edit, t('Save'));

     // Create node1 translation in french.
     $edit = [
       'title[0][value]'    => 'node1 fr',
     ];
-    $this->drupalPostForm('node/1/translations/add/de/fr', $edit, t('Save (this translation)'));
+    $this->drupalGet('node/1/translations/add/de/fr');
+    $this->submitForm($edit, t('Save (this translation)'));

     // Create node2 in english.
     $edit = [
@@ @@
       'title[0][value]'    => 'node2 en',
       'langcode[0][value]' => 'en',
     ];
-    $this->drupalPostForm('node/add/article', $edit, t('Save'));
+    $this->drupalGet('node/add/article');
+    $this->submitForm($edit, t('Save'));

     // Create node3 in french.
     $edit = [
@@ @@
       'title[0][value]'    => 'node3 fr',
       'langcode[0][value]' => 'fr',
     ];
-    $this->drupalPostForm('node/add/article', $edit, t('Save'));
+    $this->drupalGet('node/add/article');
+    $this->submitForm($edit, t('Save'));
   }

   /**
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/translation_views/tests/src/Functional/ContentModerationIntegration.php:39

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp($import_test_views = TRUE) {
+  public function setUp($import_test_views = TRUE): void {
     // Inherit set up from the parent class.
     parent::setUp($import_test_views);
     // Login as a root user.
@@ @@
     foreach (self::$langcodes as $langcode) {
       ConfigurableLanguage::createFromLangcode($langcode)->save();
     }
+    $this->drupalGet('admin/config/regional/content-language');

     // Enable translation for article nodes.
-    $this->drupalPostForm('admin/config/regional/content-language', [
+    $this->submitForm([
       "entity_types[node]"                                              => 1,
       "settings[node][article][translatable]"                           => 1,
       "settings[node][article][settings][language][language_alterable]" => 1,
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/translation_views/tests/src/Functional/ContentFullViewFiltersFieldsTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp($import_test_views = TRUE) {
+  protected function setUp($import_test_views = TRUE): void {
     parent::setUp($import_test_views);

     $user = $this->drupalCreateUser([
@@ @@
       'settings[node][article][translatable]'                           => 1,
       'settings[node][article][settings][language][language_alterable]' => 1,
     ];
-    $this->drupalPostForm('admin/config/regional/content-language', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/regional/content-language');
+    $this->submitForm($edit, t('Save configuration'));
     \Drupal::entityTypeManager()->clearCachedDefinitions();

     // Create a node in en (node1).
@@ @@
       'title[0][value]'    => '001_en_title_node1',
       'langcode[0][value]' => 'en',
     ];
-    $this->drupalPostForm('node/add/article', $edit, t('Save'));
+    $this->drupalGet('node/add/article');
+    $this->submitForm($edit, t('Save'));
     // Create a translation in fr (node1).
     $edit = [
       'title[0][value]' => '002_fr_title_node1',
     ];
-    $this->drupalPostForm('node/1/translations/add/en/fr', $edit, t('Save (this translation)'));
+    $this->drupalGet('node/1/translations/add/en/fr');
+    $this->submitForm($edit, t('Save (this translation)'));
     // Create a translation in de (node1).
     $edit = [
       'title[0][value]' => '003_de_title_node1',
     ];
-    $this->drupalPostForm('node/1/translations/add/en/de', $edit, t('Save (this translation)'));
+    $this->drupalGet('node/1/translations/add/en/de');
+    $this->submitForm($edit, t('Save (this translation)'));

     // Create a node in de (node2).
     $edit = [
@@ @@
       'title[0][value]'    => '004_de_title_node2',
       'langcode[0][value]' => 'de',
     ];
-    $this->drupalPostForm('node/add/article', $edit, t('Save'));
+    $this->drupalGet('node/add/article');
+    $this->submitForm($edit, t('Save'));
     // Create a translation in fr (node2).
     $edit = [
       'title[0][value]' => '005_fr_title_node2',
     ];
-    $this->drupalPostForm('node/2/translations/add/de/fr', $edit, t('Save (this translation)'));
+    $this->drupalGet('node/2/translations/add/de/fr');
+    $this->submitForm($edit, t('Save (this translation)'));

   }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/translation_views/tests/src/Functional/CommentFullViewFiltersFieldsTest.php:89

    ---------- begin diff ----------
@@ @@
    *   Entity subcategory (e.g. Article).
    */
   private function enableTranslation($category, $subcategory) {
-    $this->drupalPostForm('admin/config/regional/content-language', [
+    $this->drupalGet('admin/config/regional/content-language');
+    $this->submitForm([
       "entity_types[$category]"                                                   => 1,
       "settings[$category][$subcategory][translatable]"                           => 1,
       "settings[$category][$subcategory][settings][language][language_alterable]" => 1,
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp($import_test_views = TRUE) {
+  protected function setUp($import_test_views = TRUE): void {
     parent::setUp($import_test_views);

     $user = $this->drupalCreateUser([
@@ @@

     // Enable translation for Comment entity type.
     $this->enableTranslation('comment', 'comment');
+    $this->drupalGet('node/add/article');

     // Add 3 nodes.
-    $this->drupalPostForm('node/add/article', [
+    $this->submitForm([
       'title[0][value]'         => 'node 1',
       'created[0][value][date]' => '2018-04-01',
     ], t('Save'));
-    $this->drupalPostForm('node/add/article', [
+    $this->drupalGet('node/add/article');
+    $this->submitForm([
       'title[0][value]'         => 'node 2',
       'created[0][value][date]' => '2018-04-02',
     ], t('Save'));
-    $this->drupalPostForm('node/add/article', [
+    $this->drupalGet('node/add/article');
+    $this->submitForm([
       'title[0][value]'         => 'node 3',
       'created[0][value][date]' => '2018-04-03',
     ], t('Save'));
@@ @@
       'comment_body[0][value]' => $this->loremIpsum,
       'subject[0][value]'      => 'node 1 en comment',
     ];
-    $this->drupalPostForm('node/1', $edit, 'Save');
+    $this->drupalGet('node/1');
+    $this->submitForm($edit, 'Save');
     // Comment 2.
     $edit = [
       'langcode[0][value]'     => 'de',
@@ @@
       'comment_body[0][value]' => $this->loremIpsum,
       'subject[0][value]'      => 'node 1 de comment',
     ];
-    $this->drupalPostForm('node/1', $edit, 'Save');
+    $this->drupalGet('node/1');
+    $this->submitForm($edit, 'Save');
     // Comment 3.
     $edit = [
       'langcode[0][value]'     => 'de',
@@ @@
       'comment_body[0][value]' => $this->loremIpsum,
       'subject[0][value]'      => 'node 2 de comment',
     ];
-    $this->drupalPostForm('node/2', $edit, 'Save');
+    $this->drupalGet('node/2');
+    $this->submitForm($edit, 'Save');
     // Comment 4.
     $edit = [
       'langcode[0][value]'     => 'fr',
@@ @@
       'comment_body[0][value]' => $this->loremIpsum,
       'subject[0][value]'      => 'node 2 fr comment',
     ];
-    $this->drupalPostForm('node/2', $edit, 'Save');
+    $this->drupalGet('node/2');
+    $this->submitForm($edit, 'Save');
     // Comment 5.
     $edit = [
       'langcode[0][value]'     => 'fr',
@@ @@
       'comment_body[0][value]' => $this->loremIpsum,
       'subject[0][value]'      => 'node 3 fr comment',
     ];
-    $this->drupalPostForm('node/3', $edit, 'Save');
+    $this->drupalGet('node/3');
+    $this->submitForm($edit, 'Save');
     // Comment 6.
     $edit = [
       'content_translation[retranslate]' => 1,
@@ @@
       'comment_body[0][value]'           => $this->loremIpsum,
       'subject[0][value]'                => 'node 3 en from fr comment',
     ];
-    $this->drupalPostForm('comment/5/translations/add/fr/en', $edit, 'Save');
+    $this->drupalGet('comment/5/translations/add/fr/en');
+    $this->submitForm($edit, 'Save');
   }

   /**
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 7 files have been changed by Rector                                       

