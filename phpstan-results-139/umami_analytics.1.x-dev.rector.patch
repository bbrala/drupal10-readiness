diff --git a/src/JavascriptLocalCache.php b/src/JavascriptLocalCache.php
index 0c091da..cf7f417 100644
--- a/src/JavascriptLocalCache.php
+++ b/src/JavascriptLocalCache.php
@@ -128,7 +128,7 @@ class JavascriptLocalCache {
     }
     // Return the local JS file path.
     $query_string = '?' . ($this->state->get('system.css_js_query_string') ?: '0');
-    return file_url_transform_relative(file_create_url($file_destination)) . $query_string;
+    return \Drupal::service('file_url_generator')->generateString($file_destination) . $query_string;
   }
 
   /**
diff --git a/umami_analytics.info.yml b/umami_analytics.info.yml
index a252bd7..f239478 100644
--- a/umami_analytics.info.yml
+++ b/umami_analytics.info.yml
@@ -2,5 +2,5 @@ name: 'Ummai Analytics'
 type: module
 description: 'Allows your site to be tracked by Umami by adding a Javascript tracking code to every page.'
 package: Statistics
-core_version_requirement: ^8.9 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: umami_analytics.admin_settings_form
