diff --git a/src/Helpers/GeneratedContentAssetGenerator.php b/src/Helpers/GeneratedContentAssetGenerator.php
index 66a05d6..7b82ac3 100644
--- a/src/Helpers/GeneratedContentAssetGenerator.php
+++ b/src/Helpers/GeneratedContentAssetGenerator.php
@@ -139,7 +139,7 @@ class GeneratedContentAssetGenerator {
     $save_function = 'image' . ($extension == 'jpg' ? 'jpeg' : $extension);
     $save_function($im, $this->fileSystem->realpath($destination));
 
-    $file = file_save_data(file_get_contents($destination), $uri);
+    $file = \Drupal::service('file.repository')->writeData(file_get_contents($destination), $uri);
 
     return $file;
   }
@@ -187,7 +187,7 @@ class GeneratedContentAssetGenerator {
     $uri = $dir . $filename;
     // Make sure that there is an extension.
     $uri = empty(pathinfo($uri, PATHINFO_EXTENSION)) ? $uri . $options['extension'] : $uri;
-    $file = file_save_data($options['content'], $uri);
+    $file = \Drupal::service('file.repository')->writeData($options['content'], $uri);
 
     return $file;
   }
@@ -239,7 +239,7 @@ class GeneratedContentAssetGenerator {
     $uri = $dir . $filename;
     // Make sure that there is an extension.
     $uri = empty(pathinfo($uri, PATHINFO_EXTENSION)) ? $uri . '.' . $options['extension'] : $uri;
-    $file = file_save_data(file_get_contents($asset_path), $uri);
+    $file = \Drupal::service('file.repository')->writeData(file_get_contents($asset_path), $uri);
 
     return $file;
   }
@@ -292,7 +292,7 @@ class GeneratedContentAssetGenerator {
       'svg',
     ];
 
-    $module_path = drupal_get_path('module', 'generated_content');
+    $module_path = \Drupal::service('extension.list.module')->getPath('generated_content');
     foreach ($extensions as $extension) {
       $dummy_file = $module_path . DIRECTORY_SEPARATOR . rtrim(static::ASSETS_DIRECTORY, DIRECTORY_SEPARATOR) . DIRECTORY_SEPARATOR . 'dummy.' . $extension;
       if (file_exists($dummy_file)) {
