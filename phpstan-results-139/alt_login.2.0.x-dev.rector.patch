diff --git a/alt_login.module b/alt_login.module
index 79cb538..32cbabb 100644
--- a/alt_login.module
+++ b/alt_login.module
@@ -80,7 +80,7 @@ function alt_login_form_alter(&$form, $form_state, $form_id) {
     if (empty($aliases['username'])) {
       if ($user->isNew()) {
         $namefield['#access'] = FALSE;
-        $namefield['#value'] = user_password(8);
+        $namefield['#value'] = \Drupal::service('password_generator')->generate(8);
       }
       elseif (count($aliases) == 1) {
         $namefield = [
