modules/contrib/block_library/block_library.module
modules/contrib/block_library/src/Controller/ChooseBlockController.php
modules/contrib/block_library/src/Routing/RouteSubscriber.php

1 file with changes
===================

1) modules/contrib/block_library/src/Controller/ChooseBlockController.php:30

    ---------- begin diff ----------
@@ @@
       // Check if block type has icon.
       if ($block_entity && $block_entity->getThirdPartySetting('block_library', 'icon_path')) {
         $icon_path = $block_entity->getThirdPartySetting('block_library', 'icon_path');
-        $icon_url = file_url_transform_relative(file_create_url($icon_path));
+        $icon_url = \Drupal::service('file_url_generator')->generateString($icon_path);

         // Add the image to the link title.
         $build['links']['#links'][$key]['title'] = Markup::create('<img src="' . $icon_url . '" class="bl-block-icon" /> ' . '<span class="bl-block-title">' . $link['title'] . '</span>');
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

