modules/contrib/flag/flag.api.php
modules/contrib/flag/modules/flag_bookmark/flag_bookmark.module
modules/contrib/flag/modules/flag_bookmark/tests/src/FunctionalJavascript/FlagBookmarkUITest.php
modules/contrib/flag/src/ActionLink/ActionLinkTypeBase.php
modules/contrib/flag/src/FlagInterface.php
modules/contrib/flag/src/Form/UnflagConfirmForm.php
modules/contrib/flag/src/Plugin/views/relationship/FlagViewsRelationship.php
modules/contrib/flag/flag.install
modules/contrib/flag/tests/src/Functional/LinkTypeConfirmFormTest.php
modules/contrib/flag/src/FlagLinkBuilder.php
modules/contrib/flag/flag.module
modules/contrib/flag/tests/src/Traits/FlagPermissionsTrait.php
modules/contrib/flag/src/Form/UnflaggingForm.php
modules/contrib/flag/src/FlagLinkBuilderInterface.php
modules/contrib/flag/src/FlagService.php
modules/contrib/flag/src/Permissions/FlagPermissions.php
modules/contrib/flag/src/Plugin/Action/DeleteFlaggingAction.php
modules/contrib/flag/src/ActionLink/ActionLinkTypePluginInterface.php
modules/contrib/flag/src/Ajax/ActionLinkFlashCommand.php
modules/contrib/flag/src/Annotation/ActionLinkType.php
modules/contrib/flag/src/Annotation/FlagType.php
modules/contrib/flag/src/Controller/ActionLinkController.php
modules/contrib/flag/src/Plugin/Action/FlagAction.php
modules/contrib/flag/src/Plugin/views/sort/FlagViewsSortFlagged.php
modules/contrib/flag/src/Plugin/ActionLink/AJAXactionLink.php
modules/contrib/flag/modules/flag_bookmark/tests/src/Kernel/FlagBookmarkInstallUninstallTest.php
modules/contrib/flag/src/Controller/ActionLinkNoJsController.php
modules/contrib/flag/src/TwigExtension/FlagCount.php
modules/contrib/flag/src/Plugin/ActionLink/ConfirmForm.php
modules/contrib/flag/tests/modules/flag_event_test/src/EventSubscriber/FlagEvents.php
modules/contrib/flag/src/Plugin/ActionLink/FieldEntry.php
modules/contrib/flag/src/Controller/FieldEntryFormController.php
modules/contrib/flag/tests/src/Unit/Ajax/ActionLinkFlashCommandTest.php
modules/contrib/flag/modules/flag_count/flag_count.module
modules/contrib/flag/modules/flag_count/src/Plugin/ActionLink/CountLink.php
modules/contrib/flag/src/Plugin/ActionLink/FormEntryInterface.php
modules/contrib/flag/tests/modules/flag_test_plugins/src/Plugin/Flag/AccessDenied.php
modules/contrib/flag/src/Plugin/ActionLink/FormEntryTypeBase.php
modules/contrib/flag/modules/flag_follower/flag_follower.module
modules/contrib/flag/modules/flag_follower/tests/src/Functional/FlagFollowerUITest.php
modules/contrib/flag/tests/src/Functional/LinkTypeFieldEntryTest.php
modules/contrib/flag/tests/modules/flag_test_plugins/src/Plugin/Flag/AccessGranted.php
modules/contrib/flag/tests/src/Functional/AdminUITest.php
modules/contrib/flag/tests/src/Unit/Plugin/Action/FlagActionTest.php
modules/contrib/flag/src/Controller/FlagListBuilder.php
modules/contrib/flag/src/FlagServiceInterface.php
modules/contrib/flag/src/Plugin/ActionLink/Reload.php
modules/contrib/flag/src/Plugin/Derivative/EntityFlagActionDeriver.php
modules/contrib/flag/src/FlagServiceProvider.php
modules/contrib/flag/src/Plugin/Derivative/EntityFlagTypeDeriver.php
modules/contrib/flag/src/Entity/Flag.php
modules/contrib/flag/src/Plugin/Field/FlaggedEntityFieldItemList.php
modules/contrib/flag/src/FlagType/FlagTypeBase.php
modules/contrib/flag/src/Plugin/Flag/CommentFlagType.php
modules/contrib/flag/src/Plugin/Flag/EntityFlagType.php
modules/contrib/flag/src/FlagType/FlagTypePluginInterface.php
modules/contrib/flag/src/FlagType/FlagTypePluginManager.php
modules/contrib/flag/modules/flag_follower/tests/src/Kernel/FlagFollowerInstallUninstallTest.php
modules/contrib/flag/flag.post_update.php
modules/contrib/flag/src/FlaggingInterface.php
modules/contrib/flag/src/FlaggingViewsData.php
modules/contrib/flag/tests/src/Functional/LinkTypeReloadTest.php
modules/contrib/flag/src/Access/CsrfAccessCheck.php
modules/contrib/flag/src/Form/FlagAddForm.php
modules/contrib/flag/flag.tokens.inc
modules/contrib/flag/src/Access/FlagAccessCheck.php
modules/contrib/flag/src/Entity/Flagging.php
modules/contrib/flag/src/Access/UnFlagAccessCheck.php
modules/contrib/flag/flag.views.inc
modules/contrib/flag/src/Form/FlagAddPageForm.php
modules/contrib/flag/src/ActionLink/ActionLinkPluginManager.php
modules/contrib/flag/flag.views_execution.inc
modules/contrib/flag/tests/src/Functional/OutputLocationEntityFormAccessTest.php
modules/contrib/flag/src/Plugin/Flag/UserFlagType.php
modules/contrib/flag/src/Form/FlagConfirmForm.php
modules/contrib/flag/src/Form/FlagConfirmFormBase.php
modules/contrib/flag/src/Form/FlagDisableConfirmForm.php
modules/contrib/flag/src/Form/FlagEditForm.php
modules/contrib/flag/tests/src/Functional/AjaxLinkNoJsTest.php
modules/contrib/flag/src/Plugin/views/field/FlagViewsFlaggedField.php
modules/contrib/flag/src/Form/FlagFormBase.php
modules/contrib/flag/tests/src/Functional/ShowOnEntityFormTest.php
modules/contrib/flag/src/Plugin/views/field/FlagViewsLinkField.php
modules/contrib/flag/src/Entity/Storage/FlaggingStorage.php
modules/contrib/flag/tests/src/Functional/AnonymousFlagTest.php
modules/contrib/flag/tests/src/Functional/UserFlagTypeTest.php
modules/contrib/flag/src/Form/FlagResetForm.php
modules/contrib/flag/src/Plugin/views/filter/FlagViewsFilter.php
modules/contrib/flag/src/Form/FlaggingForm.php
modules/contrib/flag/tests/src/FunctionalJavascript/AjaxLinkTest.php
modules/contrib/flag/tests/src/Functional/FlagPermissionsTest.php
modules/contrib/flag/src/Entity/Storage/FlaggingStorageInterface.php
modules/contrib/flag/src/Entity/Storage/FlaggingStorageSchema.php
modules/contrib/flag/tests/src/FunctionalJavascript/FlagContextualLinksTest.php
modules/contrib/flag/src/Event/FlagEventBase.php
modules/contrib/flag/src/Event/FlagEvents.php
modules/contrib/flag/src/Event/FlaggingEvent.php
modules/contrib/flag/src/Event/UnflaggingEvent.php
modules/contrib/flag/src/FlagCountManager.php
modules/contrib/flag/tests/src/Functional/FlagTestBase.php
modules/contrib/flag/tests/src/Functional/LinkHtmlTest.php
modules/contrib/flag/tests/src/FunctionalJavascript/FlagCountExtensionTest.php
modules/contrib/flag/src/FlagCountManagerInterface.php
modules/contrib/flag/tests/src/FunctionalJavascript/FlagJsTestBase.php
modules/contrib/flag/tests/src/Functional/LinkOutputLocationTest.php
modules/contrib/flag/tests/src/FunctionalJavascript/LinkTypeAjaxTest.php
modules/contrib/flag/tests/src/FunctionalJavascript/LinkTypeConfirmFormTest.php
modules/contrib/flag/tests/src/Functional/LinkOwnershipAccessTest.php
modules/contrib/flag/tests/src/FunctionalJavascript/ModalFormTest.php
modules/contrib/flag/tests/src/Functional/LinkTypeAjaxTest.php
modules/contrib/flag/tests/src/Kernel/AccessTest.php
modules/contrib/flag/tests/src/Kernel/FlagActionTest.php
modules/contrib/flag/tests/src/Kernel/FlagCountsTest.php
modules/contrib/flag/tests/src/Kernel/FlagKernelTestBase.php
modules/contrib/flag/tests/src/Kernel/FlagServiceTest.php
modules/contrib/flag/tests/src/Kernel/FlaggingStorageTest.php
modules/contrib/flag/tests/src/Traits/FlagCreateTrait.php

37 files with changes
=====================

1) modules/contrib/flag/tests/src/Unit/Plugin/Action/FlagActionTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\flag\Unit\Plugin\Action;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Access\AccessResultForbidden;
 use Drupal\Core\Entity\EntityInterface;
@@ @@
  */
 class FlagActionTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * Mock flag.
    *
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $flag = $this->prophesize(FlagInterface::class);
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/flag/tests/src/Unit/Ajax/ActionLinkFlashCommandTest.php:20

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->random = $this->getRandomGenerator();
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/flag/flag.post_update.php:43

    ---------- begin diff ----------
@@ @@
     $action_names[] = 'flag_action.' . $flag->id() . '.flag';
     $action_names[] = 'flag_action.' . $flag->id() . '.unflag';
   }
-  $actions = Drupal\system\Entity\Action::loadMultiple($action_names);
+  $actions = Action::loadMultiple($action_names);
   foreach ($actions as $old_id => $action) {
     if (preg_match('/\.(un)?flag$/', $old_id)) {
       // Update the plugin ID and the action ID.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


4) modules/contrib/flag/flag.module:543

    ---------- begin diff ----------
@@ @@
 /**
  * Implements hook_entity_operation().
  */
-function flag_entity_operation(\Drupal\Core\Entity\EntityInterface $entity) {
+function flag_entity_operation(EntityInterface $entity) {
   $operations = [];

-  if ($entity instanceof \Drupal\flag\FlagInterface) {
+  if ($entity instanceof FlagInterface) {
     if (!$entity->status()) {
       $operations['enable'] = [
         'title' => t('Enable'),
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


5) modules/contrib/flag/flag.install:103

    ---------- begin diff ----------
@@ @@
   $bundle_schema = [
     'description' => 'The Flag ID.',
     'type' => 'varchar_ascii',
-    'length' => \Drupal\Core\Entity\EntityTypeInterface::BUNDLE_MAX_LENGTH,
+    'length' => EntityTypeInterface::BUNDLE_MAX_LENGTH,
     // 'binary' => FALSE,
     'not null' => TRUE,
   ];
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


6) modules/contrib/flag/modules/flag_follower/tests/src/Functional/FlagFollowerUITest.php:79

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     $this->drupalCreateContentType(['type' => 'article', 'name' => 'Article']);
@@ @@
   public function doFollowerView() {
     $this->drupalLogin($this->userA);
     $this->drupalGet('flag-followers');
-    $this->assertNoText($this->userB->getAccountName());
-    $this->assertText($this->userC->getAccountName());
-    $this->assertText('2', 'A sees C has two followers.');
+    $this->assertSession()->pageTextNotContains($this->userB->getAccountName());
+    $this->assertSession()->pageTextContains($this->userC->getAccountName());
+    $this->assertSession()->pageTextContains('2');

     $this->drupalLogin($this->userB);
     $this->drupalGet('flag-followers');
-    $this->assertText($this->userA->getAccountName());
-    $this->assertText($this->userC->getAccountName());
-    $this->assertText('2', 'B sees C has two followers.');
-    $this->assertText('1', 'B sees A has one follower.');
+    $this->assertSession()->pageTextContains($this->userA->getAccountName());
+    $this->assertSession()->pageTextContains($this->userC->getAccountName());
+    $this->assertSession()->pageTextContains('2');
+    $this->assertSession()->pageTextContains('1');

     $this->drupalLogin($this->userC);
     $this->drupalGet('flag-followers');
-    $this->assertNoText($this->userA->getAccountName());
-    $this->assertNoText($this->userB->getAccountName());
+    $this->assertSession()->pageTextNotContains($this->userA->getAccountName());
+    $this->assertSession()->pageTextNotContains($this->userB->getAccountName());
   }

   /**
@@ @@
   public function doContentView() {
     $this->drupalLogin($this->userA);
     $this->drupalGet('flag-followers/content');
-    $this->assertText($this->nodeC->label());
-    $this->assertNoText($this->nodeB->label());
+    $this->assertSession()->pageTextContains($this->nodeC->label());
+    $this->assertSession()->pageTextNotContains($this->nodeB->label());

     $this->drupalLogin($this->userB);
     $this->drupalGet('flag-followers/content');
-    $this->assertText($this->nodeA->label());
-    $this->assertText($this->nodeC->label());
+    $this->assertSession()->pageTextContains($this->nodeA->label());
+    $this->assertSession()->pageTextContains($this->nodeC->label());

     $this->drupalLogin($this->userC);
     $this->drupalGet('flag-followers/content');
-    $this->assertNoText($this->nodeA->label());
-    $this->assertNoText($this->nodeB->label());
+    $this->assertSession()->pageTextNotContains($this->nodeA->label());
+    $this->assertSession()->pageTextNotContains($this->nodeB->label());
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertNoTextRector
 * AssertTextRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/flag/modules/flag_bookmark/tests/src/FunctionalJavascript/FlagBookmarkUITest.php:29

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->drupalCreateContentType(['type' => 'article', 'name' => 'Article']);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/flag/src/Event/UnflaggingEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\flag\Event;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * Event for when a flagging is deleted.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


9) modules/contrib/flag/src/Event/FlaggingEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\flag\Event;

+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\flag\FlaggingInterface;
-use Symfony\Component\EventDispatcher\Event;

 /**
  * Event for when a flagging is created.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


10) modules/contrib/flag/src/Event/FlagEventBase.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\flag\Event;

+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\flag\FlagInterface;
-use Symfony\Component\EventDispatcher\Event;

 /**
  * Base Event from which other flag event are defined.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


11) modules/contrib/flag/tests/src/Functional/LinkTypeAjaxTest.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create a node to flag.
@@ @@
     $this->drupalGet($node_url);

     // Confirm the flag link exists.
-    $this->assertLink($this->flag->getShortText('flag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('flag'));

     // Click the flag link. This ensures that the non-JS fallback works we are
     // redirected to back to the page and the node is flagged.
     $this->clickLink($this->flag->getShortText('flag'));
-    $this->assertUrl($node_url);
-    $this->assertLink($this->flag->getShortText('unflag'));
+    $this->assertSession()->addressEquals($node_url);
+    $this->assertSession()->linkExists($this->flag->getShortText('unflag'));

     // Click the unflag link, repeat the check.
     $this->clickLink($this->flag->getShortText('unflag'));
-    $this->assertUrl($node_url);
-    $this->assertLink($this->flag->getShortText('flag'));
+    $this->assertSession()->addressEquals($node_url);
+    $this->assertSession()->linkExists($this->flag->getShortText('flag'));
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertLinkRector
 * AssertUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/flag/tests/src/Functional/LinkOwnershipAccessTest.php:18

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->entityTypeManager = $this->container->get('entity_type.manager');
@@ @@
     // Flag the node with user 1.
     $this->drupalGet($this->node->toUrl());
     $this->clickLink($flag->getShortText('flag'));
-    $this->assertResponse(200);
-    $this->assertLink($flag->getShortText('unflag'));
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->linkExists($flag->getShortText('unflag'));

     // Switch to user 2. They should see the link to flag.
     $user_2 = $this->drupalCreateUser();
     $this->drupalLogin($user_2);
     $this->drupalGet($this->node->toUrl());
-    $this->assertLink($flag->getShortText('flag'), 0, "A flag link is found on the page for user 2.");
+    $this->assertSession()->linkExists($flag->getShortText('flag'), 0, "A flag link is found on the page for user 2.");

   }

@@ @@
     // Flag the node with user 1.
     $this->drupalGet($this->node->toUrl());
     $this->clickLink($flag->getShortText('flag'));
-    $this->assertResponse(200);
-    $this->assertLink($flag->getShortText('unflag'));
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->linkExists($flag->getShortText('unflag'));

     // Switch to user 2. They should see the unflag link too.
     $user_2 = $this->drupalCreateUser();
     $this->drupalLogin($user_2);
     $this->drupalGet($this->node->toUrl());
-    $this->assertLink($flag->getShortText('unflag'), 0, "The unflag link is found on the page for user 2.");
+    $this->assertSession()->linkExists($flag->getShortText('unflag'), 0, "The unflag link is found on the page for user 2.");
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertLinkRector
 * AssertResponseRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/flag/tests/src/Functional/LinkOutputLocationTest.php:43

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create a flag.
@@ @@
     $this->drupalGet('admin/structure/types/manage/article/display/teaser');
     $this->submitForm($edit, 'Save');
     // Check the form was saved successfully.
-    $this->assertText('Your settings have been saved.');
+    $this->assertSession()->pageTextContains('Your settings have been saved.');

     // Check the full node still shows the flag link as a field.
     $this->drupalGet('node/' . $this->node->id());
@@ @@
     // TODO: check no entity field link.

     $this->drupalGet('node/' . $this->node->id() . '/edit');
-    $this->assertNoField('flag[' . $this->flag->id() . ']');
+    $this->assertSession()->fieldNotExists('flag[' . $this->flag->id() . ']');
     $this->assertNoContextualLinkPlaceholder($contextual_links_id);
   }

@@ @@
     $xpath = $this->xpath("//*[contains(@class, 'node__content')]//div[contains(@class, :id)]", [
       ':id' => 'flag-' . $flag->id() . '-' . $entity->id(),
     ]);
-    $this->assert(count($xpath) == ($exists ? 1 : 0), $message);
+    $this->assertTrue(count($xpath) == ($exists ? 1 : 0), $message);
   }

   /**
    ----------- end diff -----------

Applied rules:
 * AssertNoFieldRector
 * AssertRector
 * AssertTextRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/flag/tests/src/Functional/LinkHtmlTest.php:66

    ---------- begin diff ----------
@@ @@
     // Click the flag link.
     $this->drupalGet('node/' . $node_id);
     // Find the marked-up flag short text in the raw HTML.
-    $this->assertRaw(Xss::filterAdmin($this->flag->getShortText('flag')));
+    $this->assertSession()->responseContains(Xss::filterAdmin($this->flag->getShortText('flag')));
     // Xss::filter() is used to strip all HTML tags from the short text
     // because clickLink() looks for text as it appears in the brower, and that
     // does not include the unescaped HTML tags. Note that the stripped tags
@@ @@

     // Check that the node is flagged.
     $this->drupalGet('node/' . $node_id);
-    $this->assertRaw(Xss::filterAdmin($this->flag->getShortText('unflag')));
+    $this->assertSession()->responseContains(Xss::filterAdmin($this->flag->getShortText('unflag')));

     // Unflag the node.
     $this->drupalGet('node/' . $node_id);
@@ @@

     // Check that the node is no longer flagged.
     $this->drupalGet('node/' . $node_id);
-    $this->assertRaw(Xss::filterAdmin($this->flag->getShortText('flag')));
+    $this->assertSession()->responseContains(Xss::filterAdmin($this->flag->getShortText('flag')));
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertRawRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


15) modules/contrib/flag/tests/src/Functional/FlagTestBase.php:45

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Get the Flag Service.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/flag/tests/src/Functional/FlagPermissionsTest.php:65

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // Create content type.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/flag/tests/src/Functional/AnonymousFlagTest.php:38

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     NodeType::create(['type' => 'page', 'name' => 'page'])->save();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


18) modules/contrib/flag/tests/src/Functional/AjaxLinkNoJsTest.php:66

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // A article to test with.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


19) modules/contrib/flag/tests/src/Functional/AdminUITest.php:68

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->entityTypeManager = $this->container->get('entity_type.manager');
@@ @@
     $this->drupalGet('admin/structure/flags/add');
     $this->submitForm([], 'Continue');
     // Check for fieldset titles.
-    $this->assertText(t('Messages'));
-    $this->assertText(t('Flag access'));
-    $this->assertText(t('Display options'));
+    $this->assertSession()->pageTextContains(t('Messages'));
+    $this->assertSession()->pageTextContains(t('Flag access'));
+    $this->assertSession()->pageTextContains(t('Display options'));

     $edit = [
       'label' => $this->label,
@@ @@
     ];
     $this->submitForm($edit, 'Create Flag');

-    $this->assertText(t('Flag @this_label has been added.', ['@this_label' => $this->label]));
+    $this->assertSession()->pageTextContains(t('Flag @this_label has been added.', ['@this_label' => $this->label]));

     $this->flag = $this->flagService->getFlagById($this->flagId);

@@ @@
    */
   public function doFlagDisable() {
     $this->drupalGet('admin/structure/flags');
-    $this->assertText(t('Enabled'));
+    $this->assertSession()->pageTextContains(t('Enabled'));

     $this->drupalGet('admin/structure/flags/manage/' . $this->flagId . '/disable');
     $this->submitForm([], 'Disable');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $this->drupalGet('admin/structure/flags');
-    $this->assertText(t('Disabled'));
+    $this->assertSession()->pageTextContains(t('Disabled'));

     $this->drupalGet('node/' . $this->nodeId);
-    $this->assertNoText($this->flagShortText);
+    $this->assertSession()->pageTextNotContains($this->flagShortText);
   }

   /**
@@ @@
    */
   public function doFlagEnable() {
     $this->drupalGet('admin/structure/flags');
-    $this->assertText(t('Disabled'));
+    $this->assertSession()->pageTextContains(t('Disabled'));

     $this->drupalGet('admin/structure/flags/manage/' . $this->flagId . '/enable');
     $this->submitForm([], 'Enable');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $this->drupalGet('admin/structure/flags');
-    $this->assertText(t('Enabled'));
+    $this->assertSession()->pageTextContains(t('Enabled'));

     $this->drupalGet('node/' . $this->nodeId);
-    $this->assertText($this->flagShortText);
+    $this->assertSession()->pageTextContains($this->flagShortText);
   }

   /**
@@ @@
       ->condition('entity_id', $this->node->id());
     $ids_before = $query_before->execute();

-    $this->assertEqual(count($ids_before), 1, "The flag has one flagging.");
+    $this->assertEquals(count($ids_before), 1, "The flag has one flagging.");

     // Go to the reset form for the flag.
     $this->drupalGet('admin/structure/flags/manage/' . $this->flag->id() . '/reset');

-    $this->assertText($this->t('Are you sure you want to reset the Flag'));
+    $this->assertSession()->pageTextContains($this->t('Are you sure you want to reset the Flag'));

     $this->submitForm([], 'Reset');

@@ @@
       ->condition('entity_id', $this->node->id());
     $ids_after = $query_after->execute();

-    $this->assertEqual(count($ids_after), 0, "The flag has no flaggings after being reset.");
+    $this->assertEquals(count($ids_after), 0, "The flag has no flaggings after being reset.");
   }

   /**
@@ @@

     // Check that the weights for each flag are saved in the database correctly.
     foreach ($all_flags as $id => $flag) {
-      $this->assertEqual($all_flags[$id]->get('weight'), $flag_weights_to_set[$id], 'The flag weight was changed.');
+      $this->assertEquals($all_flags[$id]->get('weight'), $flag_weights_to_set[$id], 'The flag weight was changed.');
     }
   }

@@ @@
   public function doFlagDelete() {
     // Flag node.
     $this->drupalGet('node/' . $this->nodeId);
-    $this->assertLink($this->flagShortText);
+    $this->assertSession()->linkExists($this->flagShortText);
     // Go to the delete form for the flag.
     $this->drupalGet('admin/structure/flags/manage/' . $this->flag->id() . '/delete');

-    $this->assertText($this->t('Are you sure you want to delete the flag @this_label?', ['@this_label' => $this->label]));
+    $this->assertSession()->pageTextContains($this->t('Are you sure you want to delete the flag @this_label?', ['@this_label' => $this->label]));

     $this->submitForm([], 'Delete');

@@ @@

     $this->assertNull($result, 'The flag was deleted.');
     $this->drupalGet('node/' . $this->nodeId);
-    $this->assertText($this->node->label());
-    $this->assertNoLink($this->flagShortText);
+    $this->assertSession()->pageTextContains($this->node->label());
+    $this->assertSession()->linkNotExists($this->flagShortText);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * AssertLinkRector
 * AssertNoLinkRector
 * AssertNoTextRector
 * AssertResponseRector
 * AssertTextRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


20) modules/contrib/flag/tests/src/Kernel/FlaggingStorageTest.php:38

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->account = $this->createUser();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


21) modules/contrib/flag/tests/src/Kernel/FlagServiceTest.php:32

    ---------- begin diff ----------
@@ @@
     // Search for flag.
     $user_with_access = $this->createUser(['flag ' . $flag->id()]);
     $result = $this->flagService->getAllFlags('node', 'article');
-    $this->assertIdentical(count($result), 1, 'Found flag type');
+    $this->assertSame(count($result), 1, 'Found flag type');
     $this->assertEquals([$flag->id()], array_keys($result));
   }

@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The flag() method throws an exception when the flag does not apply to the entity type of the flaggable entity.");
     }

     // Try flagging a node of the wrong bundle.
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The flag() method throws an exception when the flag does not apply to the bundle of the flaggable entity.");
     }

     // Flag the node, then try to flag it again.
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The flag() method throws an exception when the flaggable entity is already flagged by the user with the flag.");
     }

     try {
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The flag() method throws an exception when a non-global flag is associated with a poorly specified anonymous user.");
     }

     // Test unflagging.
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The unflag() method throws an exception when the flag does not apply to the entity type of the flaggable entity.");
     }

     // Try unflagging a node of the wrong bundle.
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The unflag() method throws an exception when the flag does not apply to the bundle of the flaggable entity.");
     }

     // Create a new node that's not flagged, and try to unflag it.
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The unflag() method throws an exception when the flaggable entity is not flagged by the user with the flag.");
     }

     try {
@@ @@
       $this->fail("The exception was not thrown.");
     }
     catch (\LogicException $e) {
-      $this->pass("The unflag() method throws an exception when a non-global flag is associated with a poorly specified anonymous user.");
     }

     // Demonstrate a valid combination can be unflagged without throwing an
@@ @@
     // exception.
     try {
       $this->flagService->unflag($flag, $flaggable_node, $account, $session_id);
-      $this->pass('The unflag() method throws no exception when the flaggable entity and user is correct');
     }
     catch (\LogicException $e) {
       $this->fail('The unfag() method threw an exception where processing a valid unflag request.');
    ----------- end diff -----------

Applied rules:
 * AssertIdenticalRector
 * PassRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


22) modules/contrib/flag/tests/src/Kernel/FlagKernelTestBase.php:39

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installEntitySchema('user');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


23) modules/contrib/flag/tests/src/Kernel/FlagCountsTest.php:73

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installSchema('user', 'users_data');
@@ @@
     // Get the count of flaggings for the flag. The other flag also has
     // flaggings, which should not be included in the count.
     $flag_get_entity_flag_counts = $this->flagCountService->getFlagFlaggingCount($this->flag);
-    $this->assertEqual($flag_get_entity_flag_counts, 3, "getFlagFlaggingCount() returns the expected count.");
+    $this->assertEquals($flag_get_entity_flag_counts, 3, "getFlagFlaggingCount() returns the expected count.");

     // Get the counts of all flaggings on the entity. The other node is also
     // flagged, but should not be included in the count.
     $flag_get_counts = $this->flagCountService->getEntityFlagCounts($this->node);
-    $this->assertEqual($flag_get_counts[$this->flag->id()], 2, "getEntityFlagCounts() returns the expected count.");
-    $this->assertEqual($flag_get_counts[$this->otherFlag->id()], 1, "getEntityFlagCounts() returns the expected count.");
+    $this->assertEquals($flag_get_counts[$this->flag->id()], 2, "getEntityFlagCounts() returns the expected count.");
+    $this->assertEquals($flag_get_counts[$this->otherFlag->id()], 1, "getEntityFlagCounts() returns the expected count.");

     // Get the number of entities for the flag. Two users have flagged one node
     // with the flag, but that should count only once.
     $flag_get_flag_counts = $this->flagCountService->getFlagEntityCount($this->flag);
-    $this->assertEqual($flag_get_flag_counts, 2, "getFlagEntityCount() returns the expected count.");
+    $this->assertEquals($flag_get_flag_counts, 2, "getFlagEntityCount() returns the expected count.");

     // Unflag everything with the main flag.
     $this->flagService->unflagAllByFlag($this->flag);
     $flag_get_flag_counts = $this->flagCountService->getFlagEntityCount($this->flag);
-    $this->assertEqual($flag_get_flag_counts, 0, "getFlagEntityCount() on reset flag returns the expected count.");
+    $this->assertEquals($flag_get_flag_counts, 0, "getFlagEntityCount() on reset flag returns the expected count.");
   }

   /**
@@ @@
     // For non-global flags anonymous users can uniquely identified by
     // session_id.
     $anon1_count = $this->flagCountService->getUserFlagFlaggingCount($this->flag, $this->anonymousUser, $anon1_session_id);
-    $this->assertEqual($anon1_count, 1, "getUserFlagFlaggingCount() counts only the first user.");
+    $this->assertEquals($anon1_count, 1, "getUserFlagFlaggingCount() counts only the first user.");
     $anon2_count = $this->flagCountService->getUserFlagFlaggingCount($this->flag, $this->anonymousUser, $anon2_session_id);
-    $this->assertEqual($anon2_count, 1, "getUserFlagFlaggingCount() counts only the second user.");
+    $this->assertEquals($anon2_count, 1, "getUserFlagFlaggingCount() counts only the second user.");

     // Switch to a global flag, the accounting rules.
     $this->flag->setGlobal(TRUE);
@@ @@
     // Despite being a global flag, queries about specific anonymous users can
     // still be made.
     $rejected_count = $this->flagCountService->getUserFlagFlaggingCount($this->flag, $this->anonymousUser, $anon1_session_id);
-    $this->assertEqual($rejected_count, 1, "getUserFlagFlaggingCount() ignores the session id.");
+    $this->assertEquals($rejected_count, 1, "getUserFlagFlaggingCount() ignores the session id.");
   }

   /**
@@ @@

     // Confirm the counts have been incremented.
     $article1_count_before = $this->flagCountService->getEntityFlagCounts($article1);
-    $this->assertEqual($article1_count_before[$this->flag->id()], 1, 'The article1 has been flagged.');
+    $this->assertEquals($article1_count_before[$this->flag->id()], 1, 'The article1 has been flagged.');
     $article2_count_before = $this->flagCountService->getEntityFlagCounts($article2);
-    $this->assertEqual($article2_count_before[$this->flag->id()], 1, 'The article2 has been flagged.');
+    $this->assertEquals($article2_count_before[$this->flag->id()], 1, 'The article2 has been flagged.');

     // Confirm the flagging have been created.
     $flaggings_before = $this->getFlagFlaggings($this->flag);
-    $this->assertEqual(count($flaggings_before), 2, 'There are two flaggings associated with the flag');
+    $this->assertEquals(count($flaggings_before), 2, 'There are two flaggings associated with the flag');

     // Delete the flag.
     $this->flag->delete();
@@ @@

     // Confirm the counts have been incremented.
     $article1_count_before = $this->flagCountService->getEntityFlagCounts($article1);
-    $this->assertEqual($article1_count_before[$this->flag->id()], 1, 'The article1 has been flagged.');
+    $this->assertEquals($article1_count_before[$this->flag->id()], 1, 'The article1 has been flagged.');
     $article2_count_before = $this->flagCountService->getEntityFlagCounts($article2);
-    $this->assertEqual($article2_count_before[$this->flag->id()], 1, 'The article2 has been flagged.');
+    $this->assertEquals($article2_count_before[$this->flag->id()], 1, 'The article2 has been flagged.');

     // Confirm the flagging have been created.
     $flaggings_before = $this->getFlagFlaggings($this->flag);
-    $this->assertEqual(count($flaggings_before), 2, 'There are two flaggings associated with the flag');
+    $this->assertEquals(count($flaggings_before), 2, 'There are two flaggings associated with the flag');

     // Delete the entities.
     $article1->delete();
@@ @@

     // The list of all flaggings MUST now be empty.
     $flaggings_after = $this->getFlagFlaggings($this->flag);
-    $this->assert(empty($flaggings_after), 'The flaggings were removed, when the flag was deleted');
+    $this->assertTrue(empty($flaggings_after), 'The flaggings were removed, when the flag was deleted');

     // Confirm the counts have been removed.
     $article1_count_after = $this->flagCountService->getEntityFlagCounts($article1);
@@ @@
     $this->flagService->flag($this->flag, $article, $auth_user);

     $user_before_count = $this->flagCountService->getEntityFlagCounts($auth_user);
-    $this->assertEqual($user_before_count[$user_flag->id()], 1, 'The user has been flagged.');
+    $this->assertEquals($user_before_count[$user_flag->id()], 1, 'The user has been flagged.');

     $article_count_before = $this->flagCountService->getEntityFlagCounts($article);
-    $this->assertEqual($article_count_before[$this->flag->id()], 1, 'The article has been flagged by the user.');
+    $this->assertEquals($article_count_before[$this->flag->id()], 1, 'The article has been flagged by the user.');

     $auth_user->delete();

@@ @@
     $this->assertEmpty($flaggings_after, 'The user flaggings were removed when the user was deleted.');

     $flaggings_after = $this->getFlagFlaggings($this->flag);
-    $this->assert(empty($flaggings_after), 'The node flaggings were removed when the user was deleted');
+    $this->assertTrue(empty($flaggings_after), 'The node flaggings were removed when the user was deleted');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * AssertRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


24) modules/contrib/flag/tests/src/Kernel/FlagActionTest.php:41

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installEntitySchema('entity_test');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


25) modules/contrib/flag/tests/src/Kernel/AccessTest.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installSchema('user', 'users_data', 'flag');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


26) modules/contrib/flag/tests/src/FunctionalJavascript/ModalFormTest.php:62

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // A test flag.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


27) modules/contrib/flag/tests/src/FunctionalJavascript/LinkTypeAjaxTest.php:61

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Get the Flag Service.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


28) modules/contrib/flag/tests/src/FunctionalJavascript/FlagJsTestBase.php:44

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Get the Flag Service.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


29) modules/contrib/flag/tests/src/FunctionalJavascript/FlagCountExtensionTest.php:32

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->drupalCreateContentType(['type' => 'article', 'name' => 'Article']);
     // Set the linkTypePlugin of the flag to count_link for running the tests.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


30) modules/contrib/flag/tests/src/FunctionalJavascript/FlagContextualLinksTest.php:87

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     // Get the Flag Service.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


31) modules/contrib/flag/tests/src/FunctionalJavascript/AjaxLinkTest.php:73

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // A article to test with.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


32) modules/contrib/flag/tests/src/Functional/UserFlagTypeTest.php:27

    ---------- begin diff ----------
@@ @@
       'flag_entity_type' => 'entity:user',
     ], $this->t('Continue'));

-    $this->assertText($this->t('Permissions for users to flag themselves.'));
+    $this->assertSession()->pageTextContains($this->t('Permissions for users to flag themselves.'));

-    $this->assertText($this->t('Display link on user profile page'));
+    $this->assertSession()->pageTextContains($this->t('Display link on user profile page'));
   }

   /**
@@ @@

     // Check the state of the extra permssions checkbox.
     $this->drupalGet('admin/structure/flags/manage/' . $flag->id());
-    $this->assertFieldChecked('edit-extra-permissions-owner');
+    $this->assertSession()->checkboxChecked('edit-extra-permissions-owner');

     // Assert flag appears on the profile page.
     $this->drupalGet('user/' . $user->id());
-    $this->assertLink($flag->getShortText('flag'));
+    $this->assertSession()->linkExists($flag->getShortText('flag'));

     // Uncheck extra permssions.
     $edit = [
@@ @@

     // Confirm extra permissions is unchecked.
     $this->drupalGet('admin/structure/flags/manage/' . $flag->id());
-    $this->assertNoFieldChecked('edit-extra-permissions-owner');
+    $this->assertSession()->checkboxNotChecked('edit-extra-permissions-owner');

     // Assert the flag disapears from the profile page.
     $this->drupalGet('user/' . $user->id());
-    $this->assertNoLink($flag->getShortText('flag'));
+    $this->assertSession()->linkNotExists($flag->getShortText('flag'));
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertFieldCheckedRector
 * AssertLinkRector
 * AssertNoFieldCheckedRector
 * AssertNoLinkRector
 * AssertTextRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


33) modules/contrib/flag/tests/src/Functional/ShowOnEntityFormTest.php:54

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create content type.
@@ @@

     // Go back to the node edit page and check if the flag checkbox is updated.
     $this->drupalGet($node_edit_path);
-    $this->assertNoFieldChecked($flag_checkbox_id, 'The flag checkbox is unchecked on the entity form.');
+    $this->assertSession()->checkboxNotChecked($flag_checkbox_id, 'The flag checkbox is unchecked on the entity form.');

     // Verify link is on the add form.
     $this->drupalGet('node/add/' . $this->nodeType);
@@ @@

     // Form element should not appear on the delete form.
     $this->drupalGet($node->toUrl('delete-form'));
-    $this->assertNoField($flag_checkbox_id);
+    $this->assertSession()->fieldNotExists($flag_checkbox_id);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertNoFieldCheckedRector
 * AssertNoFieldRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


34) modules/contrib/flag/tests/src/Functional/OutputLocationEntityFormAccessTest.php:53

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     NodeType::create(['type' => 'page', 'name' => 'page'])->save();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


35) modules/contrib/flag/tests/src/Functional/LinkTypeReloadTest.php:65

    ---------- begin diff ----------
@@ @@
     // We (probably) can't obtain the URL from the route rather than hardcoding
     // it, as that would probably give us the token too.
     $this->drupalGet("flag/flag/$flag_id/$node_id");
-    $this->assertResponse(403, "Access to the flag reload link is denied when no token is supplied.");
+    $this->assertSession()->statusCodeEquals(403, "Access to the flag reload link is denied when no token is supplied.");

     // Click the flag link.
     $this->drupalGet('node/' . $node_id);
@@ @@

     // Check that the node is flagged.
     $this->drupalGet('node/' . $node_id);
-    $this->assertLink($this->flag->getShortText('unflag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('unflag'));

     // Check the flag count was incremented.
     $flag_count_flagged = \Drupal::database()->query('SELECT count FROM {flag_counts}
@@ @@
       ':entity_type' => 'node',
       ':entity_id' => $node_id,
     ])->fetchField();
-    $this->assertEqual($flag_count_flagged, $flag_count_pre + 1, "The flag count was incremented.");
+    $this->assertEquals($flag_count_flagged, $flag_count_pre + 1, "The flag count was incremented.");

     // Attempt to load the reload link URL without the token.
     $this->drupalGet("flag/unflag/$flag_id/$node_id");
-    $this->assertResponse(403, "Access to the unflag reload link is denied when no token is supplied.");
+    $this->assertSession()->statusCodeEquals(403, "Access to the unflag reload link is denied when no token is supplied.");

     // Unflag the node.
     $this->drupalGet('node/' . $node_id);
@@ @@

     // Check that the node is no longer flagged.
     $this->drupalGet('node/' . $node_id);
-    $this->assertLink($this->flag->getShortText('flag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('flag'));

     // Check the flag count was decremented.
     $flag_count_unflagged = \Drupal::database()->query('SELECT count FROM {flag_counts}
@@ @@
       ':entity_type' => 'node',
       ':entity_id' => $node_id,
     ])->fetchField();
-    $this->assertEqual($flag_count_unflagged, $flag_count_flagged - 1, "The flag count was decremented.");
+    $this->assertEquals($flag_count_unflagged, $flag_count_flagged - 1, "The flag count was decremented.");
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * AssertLinkRector
 * AssertResponseRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


36) modules/contrib/flag/tests/src/Functional/LinkTypeFieldEntryTest.php:36

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // The breadcrumb block is needed for FieldUiTestTrait's tests.
@@ @@
     $this->drupalPostAjaxForm(NULL, $edit, 'link_type');

     // Check confirm form field entry.
-    $this->assertText(t('Flag confirmation message'));
-    $this->assertText(t('Enter flagging details message'));
-    $this->assertText(t('Unflag confirmation message'));
+    $this->assertSession()->pageTextContains(t('Flag confirmation message'));
+    $this->assertSession()->pageTextContains(t('Enter flagging details message'));
+    $this->assertSession()->pageTextContains(t('Unflag confirmation message'));
   }

   /**
@@ @@

     // Check the Field UI tabs appear on the flag edit page.
     $this->drupalGet('admin/structure/flags/manage/' . $flag_id);
-    $this->assertText(t("Manage fields"), "The Field UI tabs appear on the flag edit form page.");
+    $this->assertSession()->pageTextContains(t("Manage fields"));

     $this->fieldUIAddNewField('admin/structure/flags/manage/' . $flag_id, $this->flagFieldId, $this->flagFieldLabel, 'text');
   }
@@ @@
     $this->clickLink($this->flag->getShortText('flag'));

     // Check if we have the confirm form message displayed.
-    $this->assertText($this->flagConfirmMessage);
+    $this->assertSession()->pageTextContains($this->flagConfirmMessage);

     // Enter the field value and submit it.
     $this->flagFieldValue = $this->randomString();
@@ @@
     $this->submitForm($edit, $this->createButtonText);

     // Check that the node is flagged.
-    $this->assertLink($this->flag->getShortText('unflag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('unflag'));
   }

   /**
@@ @@
     $this->clickLink($this->flag->getShortText('unflag'));

     $node_url = Url::fromRoute('entity.node.canonical', ['node' => $this->nodeId]);
-    $this->assertUrl('flag/details/edit/' . $flag_id . '/' . $this->nodeId, [
+    $this->assertSession()->addressEquals('flag/details/edit/' . $flag_id . '/' . $this->nodeId, [
       'query' => [
         'destination' => $node_url->toString(),
       ],
@@ @@
     ]);

     // See if the details message is displayed.
-    $this->assertText($this->flagDetailsMessage);
+    $this->assertSession()->pageTextContains($this->flagDetailsMessage);

     // See if the field value was preserved.
-    $this->assertFieldByName('field_' . $this->flagFieldId . '[0][value]', $this->flagFieldValue);
+    $this->assertSession()->fieldValueEquals('field_' . $this->flagFieldId . '[0][value]', $this->flagFieldValue);

     // Update the field value.
     $this->flagFieldValue = $this->randomString();
@@ @@
     $this->drupalGet('flag/details/edit/' . $flag_id . '/' . $this->nodeId);

     // See if the field value was preserved.
-    $this->assertFieldByName('field_' . $this->flagFieldId . '[0][value]', $this->flagFieldValue);
+    $this->assertSession()->fieldValueEquals('field_' . $this->flagFieldId . '[0][value]', $this->flagFieldValue);
   }

   /**
@@ @@

     // Test a good flag ID param, but a bad flaggable ID param.
     $this->drupalGet('flag/details/edit/' . $flag_id . '/-9999');
-    $this->assertResponse('404', 'Editing an invalid flagging path: good flag, bad entity.');
+    $this->assertSession()->statusCodeEquals('404', 'Editing an invalid flagging path: good flag, bad entity.');

     // Test a bad flag ID param, but a good flaggable ID param.
     $this->drupalGet('flag/details/edit/jibberish/' . $this->nodeId);
-    $this->assertResponse('404', 'Editing an invalid flagging path: bad flag, good entity');
+    $this->assertSession()->statusCodeEquals('404', 'Editing an invalid flagging path: bad flag, good entity');

     // Test editing a unflagged entity.
     $unlinked_node = $this->drupalCreateNode(['type' => $this->nodeType]);
     $this->drupalGet('flag/details/edit/' . $flag_id . '/' . $unlinked_node->id());
-    $this->assertResponse('404', 'Editing an invalid flagging path: good flag, good entity, but not flagged');
+    $this->assertSession()->statusCodeEquals('404', 'Editing an invalid flagging path: good flag, good entity, but not flagged');
   }

   /**
@@ @@
     $this->clickLink($this->deleteButtonText);

     // Check if we have the confirm form message displayed.
-    $this->assertText($this->unflagConfirmMessage);
+    $this->assertSession()->pageTextContains($this->unflagConfirmMessage);

     // Submit the confirm form.
     $this->submitForm([], $this->deleteButtonText);
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     // Check that the node is no longer flagged.
     $this->drupalGet('node/' . $this->nodeId);
-    $this->assertLink($this->flag->getShortText('flag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('flag'));
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertLinkRector
 * AssertResponseRector
 * AssertTextRector
 * AssertUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


37) modules/contrib/flag/tests/src/Functional/LinkTypeConfirmFormTest.php:83

    ---------- begin diff ----------
@@ @@

     // Check that the node is flagged.
     $this->drupalGet('node/' . $node_id);
-    $this->assertLink($this->flag->getShortText('unflag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('unflag'));

     // Check the flag count was incremented.
     $flag_count_flagged = \Drupal::database()->query('SELECT count FROM {flag_counts}
@@ @@
       ':entity_type' => 'node',
       ':entity_id' => $node_id,
     ])->fetchField();
-    $this->assertEqual($flag_count_flagged, $flag_count_pre + 1, "The flag count was incremented.");
+    $this->assertEquals($flag_count_flagged, $flag_count_pre + 1, "The flag count was incremented.");

     // Unflag the node.
     $this->clickLink($this->flag->getShortText('unflag'));
@@ @@

     // Check that the node is no longer flagged.
     $this->drupalGet('node/' . $node_id);
-    $this->assertLink($this->flag->getShortText('flag'));
+    $this->assertSession()->linkExists($this->flag->getShortText('flag'));

     // Check the flag count was decremented.
     $flag_count_unflagged = \Drupal::database()->query('SELECT count FROM {flag_counts}
@@ @@
       ':entity_type' => 'node',
       ':entity_id' => $node_id,
     ])->fetchField();
-    $this->assertEqual($flag_count_unflagged, $flag_count_flagged - 1, "The flag count was decremented.");
+    $this->assertEquals($flag_count_unflagged, $flag_count_flagged - 1, "The flag count was decremented.");
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * AssertLinkRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 37 files have been changed by Rector                                      

