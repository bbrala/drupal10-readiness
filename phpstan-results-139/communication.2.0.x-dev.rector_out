modules/contrib/communication/communication.api.php
modules/contrib/communication/communication.install
modules/contrib/communication/contrib/mailgun/communication_mailgun.install
modules/contrib/communication/contrib/postal_c2m/src/Form/Click2MailSettingsForm.php
modules/contrib/communication/contrib/subscription/src/Entity/Subscription.php
modules/contrib/communication/src/Ajax/SetFormValueCommand.php
modules/contrib/communication/src/Contact/ContactInfoEntitySyncableInterface.php
modules/contrib/communication/src/Entity/CommunicationStorage.php
modules/contrib/communication/src/Plugin/Communication/Mode/ModeInterface.php
modules/contrib/communication/src/Contact/ContactInfoInterface.php
modules/contrib/communication/src/Contact/ContactInterface.php
modules/contrib/communication/src/Ajax/SetReadOnlyCommand.php
modules/contrib/communication/src/Contact/ContactMiddlewareBase.php
modules/contrib/communication/src/Plugin/DataType/ContactInfoData.php
modules/contrib/communication/src/Annotation/CommunicationMode.php
modules/contrib/communication/src/Annotation/CommunicationOperation.php
modules/contrib/communication/src/Plugin/Communication/Mode/SMS.php
modules/contrib/communication/src/Annotation/CommunicationOperationVariant.php
modules/contrib/communication/src/Annotation/CommunicationParticipantRole.php
modules/contrib/communication/src/Annotation/CommunicationParticipantType.php
modules/contrib/communication/src/Annotation/ContactInfoSource.php
modules/contrib/communication/src/Annotation/ContactInfoUsageValidator.php
modules/contrib/communication/src/BuildTemplateAndSendCommunicationTrait.php
modules/contrib/communication/src/Entity/Routing/CommunicationHtmlRouteProvider.php
modules/contrib/communication/contrib/mailgun/communication_mailgun.module
modules/contrib/communication/contrib/mailgun/src/Plugin/Communication/OperationVariant/SendEmailMailgunOperationVariant.php
modules/contrib/communication/src/Plugin/DataType/ContactInfoLabel.php
modules/contrib/communication/contrib/postal_c2m/src/Plugin/Communication/OperationVariant/SendPostClick2MailVariant.php
modules/contrib/communication/src/Plugin/Communication/Mode/Telephone.php
modules/contrib/communication/contrib/subscription/src/Entity/SubscriptionAccessControlHandler.php
modules/contrib/communication/src/CommunicationBuilder.php
modules/contrib/communication/src/Plugin/DataType/ContactInfoSummary.php
modules/contrib/communication/src/Event/CommunicationEvents.php
modules/contrib/communication/src/Event/CommunicationOperationEvent.php
modules/contrib/communication/src/Plugin/Derivative/CommunicationModeNewActions.php
modules/contrib/communication/contrib/subscription/src/NotificationMethodManager.php
modules/contrib/communication/src/Plugin/Communication/Mode/TextContentModeBase.php
modules/contrib/communication/src/Plugin/Derivative/CommunicationParticipantRoleDeriver.php
modules/contrib/communication/src/Exception/UnsupportedCommunicationModeException.php
modules/contrib/communication/src/Plugin/Communication/Operation/OperationBase.php
modules/contrib/communication/src/Form/CommunicationAddForm.php
modules/contrib/communication/contrib/subscription/src/Notifier.php
modules/contrib/communication/src/Form/CommunicationForm.php
modules/contrib/communication/src/Plugin/EntityTemplate/Component/ParticipantInlineTemplate.php
modules/contrib/communication/src/Plugin/Field/CommunicationEventDateComputedFieldItemList.php
modules/contrib/communication/communication.module
modules/contrib/communication/src/Form/CommunicationOperationsForm.php
modules/contrib/communication/contrib/subscription/src/NotifierInterface.php
modules/contrib/communication/contrib/subscription/src/Plugin/Communication/NotificationMethod/NotificationMethodBase.php
modules/contrib/communication/contrib/subscription/src/Plugin/Communication/NotificationMethod/NotificationMethodInterface.php
modules/contrib/communication/contrib/user/communication_user.install
modules/contrib/communication/contrib/user/communication_user.module
modules/contrib/communication/src/CommunicationBuilderInterface.php
modules/contrib/communication/src/CommunicationModePluginManager.php
modules/contrib/communication/src/Plugin/Communication/Operation/OperationInterface.php
modules/contrib/communication/src/CommunicationOperationAccess.php
modules/contrib/communication/src/Plugin/Communication/Operation/OperationWithVariantsBase.php
modules/contrib/communication/src/Contact/ContactMiddlewareInterface.php
modules/contrib/communication/contrib/user/communication_user.views.inc
modules/contrib/communication/src/ContactInfoSourceManager.php
modules/contrib/communication/src/ContactInfoUsageValidatorManager.php
modules/contrib/communication/src/Controller/CommunicationController.php
modules/contrib/communication/contrib/user/src/Plugin/ContactInfoSource/ProfileFieldSource.php
modules/contrib/communication/src/Form/CommunicationOperationsFormTrait.php
modules/contrib/communication/src/CommunicationParticipantTypePluginManager.php
modules/contrib/communication/src/CommunicationServiceProvider.php
modules/contrib/communication/src/Contact/Contact.php
modules/contrib/communication/src/Contact/ContactInfo.php
modules/contrib/communication/src/Contact/ContactInfoDefinition.php
modules/contrib/communication/src/Plugin/Field/ComputedParticipantsReferenceFieldItemList.php
modules/contrib/communication/src/Contact/ContactInfoDefinitionInterface.php
modules/contrib/communication/src/Plugin/Field/ContactInfoFieldItemList.php
modules/contrib/communication/contrib/postal/communication_postal.install
modules/contrib/communication/contrib/postal/src/CommunicationPostalServiceProvider.php
modules/contrib/communication/contrib/postal/src/EventSubscriber/PostalCommunicationPreSendSubscriber.php
modules/contrib/communication/src/Plugin/Field/FieldFormatter/ContactInfoSummary.php
modules/contrib/communication/contrib/user/src/Plugin/ContactInfoSource/UserMailSource.php
modules/contrib/communication/contrib/user/src/Plugin/EntityTemplate/Component/UserParticipant.php
modules/contrib/communication/src/Plugin/Communication/Operation/SendOperation.php
modules/contrib/communication/src/Plugin/Communication/OperationVariant/OperationVariantBase.php
modules/contrib/communication/src/Plugin/Field/FieldType/ContactInfoItem.php
modules/contrib/communication/src/Plugin/Communication/OperationVariant/OperationVariantInterface.php
modules/contrib/communication/src/Plugin/Communication/OperationVariant/SendEmailDrupalMailsystemOperationVariant.php
modules/contrib/communication/contrib/user/src/Plugin/TypedDataFilter/CancelUrl.php
modules/contrib/communication/communication.views.inc
modules/contrib/communication/src/Controller/ConfigurationController.php
modules/contrib/communication/contrib/user/src/Plugin/TypedDataFilter/OneTimeLoginUrl.php
modules/contrib/communication/contrib/user/src/Plugin/TypedDataFilter/UserRegistrationPasswordConfirmationUrl.php
modules/contrib/communication/src/Form/CommunicationParticipantForm.php
modules/contrib/communication/src/Form/CommunicationRecordForm.php
modules/contrib/communication/src/Form/CreateCommunicationFromTemplateForm.php
modules/contrib/communication/contrib/user/src/PluginForm/UserParticipantConfigureForm.php
modules/contrib/communication/contrib/postal/src/Plugin/Communication/Mode/Postal.php
modules/contrib/communication/contrib/service/communication_service.module
modules/contrib/communication/contrib/service/src/Controller/OperationHandler.php
modules/contrib/communication/contrib/postal/src/Plugin/Communication/ParticipantType/PostalMailParticipantType.php
modules/contrib/communication/src/Plugin/Field/FieldType/ContactReferenceItem.php
modules/contrib/communication/contrib/postal_c2m/communication_postal_c2m.install
modules/contrib/communication/contrib/user/src/UserContactMiddleware.php
modules/contrib/communication/contrib/postal_c2m/communication_postal_c2m.module
modules/contrib/communication/src/Controller/NewContactFormController.php
modules/contrib/communication/src/Plugin/Communication/ParticipantType/EmailParticipantType.php
modules/contrib/communication/src/Form/ModeConfigForm.php
modules/contrib/communication/contrib/service/src/Normalizer/OperationRequestNormalizer.php
modules/contrib/communication/src/EmailSendOperationHelperTrait.php
modules/contrib/communication/src/Plugin/Field/FieldType/ParticipantItem.php
modules/contrib/communication/src/Plugin/Field/FieldWidget/ContactReferenceAutocompleteWidget.php
modules/contrib/communication/src/Plugin/Communication/ParticipantType/ParticipantTypeBase.php
modules/contrib/communication/src/Plugin/Communication/ParticipantType/ParticipantTypeInterface.php
modules/contrib/communication/src/Entity/Communication.php
modules/contrib/communication/src/Plugin/Communication/ParticipantType/PhoneNumberParticipantType.php
modules/contrib/communication/src/Form/ParticipantTypeConfigForm.php
modules/contrib/communication/contrib/service/src/Normalizer/ParticipantFieldItemNormalizer.php
modules/contrib/communication/src/OperationPluginManager.php
modules/contrib/communication/src/Plugin/ContactInfoSource/ContactInfoSourceBase.php
modules/contrib/communication/src/OperationVariantPluginManager.php
modules/contrib/communication/src/ParticipantRole.php
modules/contrib/communication/src/Plugin/ContactInfoSource/ContactInfoSourceInterface.php
modules/contrib/communication/contrib/service/src/OperationRequest.php
modules/contrib/communication/src/Plugin/ContactInfoSource/ContactInfoSourceMetadataInterface.php
modules/contrib/communication/src/Plugin/ContactInfoUsageValidator/ContactInfoUsageValidatorBase.php
modules/contrib/communication/src/Plugin/ContactInfoUsageValidator/ContactInfoUsageValidatorInterface.php
modules/contrib/communication/contrib/service/src/Plugin/Communication/NotificationMethod/Webhook.php
modules/contrib/communication/src/Plugin/Block/CommunicationOperationsFormBlock.php
modules/contrib/communication/src/Plugin/Communication/Mode/Email.php
modules/contrib/communication/contrib/service/src/Plugin/rest/resource/CommunicationResource.php
modules/contrib/communication/contrib/service/src/Routing/OperationRoutes.php
modules/contrib/communication/contrib/subscription/communication_subscription.module
modules/contrib/communication/contrib/subscription/src/Annotation/NotificationMethod.php
modules/contrib/communication/src/Plugin/Communication/Mode/ModeBase.php
modules/contrib/communication/src/Entity/CommunicationAccessControlHandler.php
modules/contrib/communication/src/Entity/CommunicationEvent.php
modules/contrib/communication/src/Entity/CommunicationEventAccessControlHandler.php
modules/contrib/communication/src/Entity/CommunicationEventStorage.php
modules/contrib/communication/src/Entity/CommunicationInterface.php
modules/contrib/communication/src/Entity/CommunicationParticipant.php
modules/contrib/communication/src/Plugin/views/relationship/CommunicationLatestEventRelationship.php
modules/contrib/communication/src/Entity/CommunicationParticipantAccessControlHandler.php
modules/contrib/communication/src/Entity/CommunicationParticipantStorage.php
modules/contrib/communication/src/PluginForm/ModeConfigureForm.php
modules/contrib/communication/tests/src/Kernel/CommunicationAccessTest.php

6 files with changes
====================

1) modules/contrib/communication/communication.api.php:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\communication\Entity\CommunicationInterface;
 /**
  * Act before an operation.
  *
@@ @@
  * @param array $options
  * @param $operation
  */
-function hook_pre_communication_operation(\Drupal\communication\Entity\CommunicationInterface $communication, array $options, $operation) {
+function hook_pre_communication_operation(CommunicationInterface $communication, array $options, $operation) {

 }

@@ @@
  * @param \Drupal\communication\Entity\CommunicationInterface $communication
  * @param array $options
  */
-function hook_pre_communication_OPERATION_ID(\Drupal\communication\Entity\CommunicationInterface $communication, array $options) {
+function hook_pre_communication_OPERATION_ID(CommunicationInterface $communication, array $options) {

 }
    ----------- end diff -----------

2) modules/contrib/communication/contrib/user/src/Plugin/ContactInfoSource/ProfileFieldSource.php:174

    ---------- begin diff ----------
@@ @@
       $build = $profile->get($field_name)->view([
         'label' => 'hidden',
       ]);
-      return drupal_render($build);
+      return \Drupal::service('renderer')->render($build);
     }

     return '';
    ----------- end diff -----------

Applied rules:
 * DrupalRenderRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/communication/contrib/postal/src/EventSubscriber/PostalCommunicationPreSendSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\communication_postal\EventSubscriber;

+use Symfony\Component\Mime\MimeTypesInterface;
 use Drupal\communication\Event\CommunicationEvents;
 use Drupal\communication\Event\CommunicationOperationEvent;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ @@
 use Drupal\Core\File\FileSystemInterface;
 use Drupal\pdf_tools\PDFGeneratorInterface;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface;

 class PostalCommunicationPreSendSubscriber implements EventSubscriberInterface {

@@ @@
   protected $entityTypeManager;

   /**
-   * @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface
+   * @var \Symfony\Component\Mime\MimeTypesInterface
    */
   protected $mimeTypeGuesser;

@@ @@
   public function __construct(
     PDFGeneratorInterface $pdf_generator,
     EntityTypeManagerInterface $entity_type_manager,
-    MimeTypeGuesserInterface $mime_type_guesser,
+    MimeTypesInterface $mime_type_guesser,
     FileSystemInterface $file_system
   ) {
     $this->pdfGenerator = $pdf_generator;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


4) modules/contrib/communication/src/Plugin/Communication/Operation/OperationBase.php:96

    ---------- begin diff ----------
@@ @@
     $this->moduleHandler->invokeAll('pre_communication_'.$this->getPluginId(), [$communication, $options]);

     $event = new CommunicationOperationEvent($communication, $this->getPluginId(), $options);
-    $this->eventDispatcher->dispatch(CommunicationEvents::PRE_OPERATION, $event);
+    $this->eventDispatcher->dispatch($event, CommunicationEvents::PRE_OPERATION);

     $options = $event->getOptions();
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/communication/src/Event/CommunicationOperationEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\communication\Event;

+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\communication\Entity\CommunicationInterface;
-use Symfony\Component\EventDispatcher\Event;

 /**
  * Class CommunicationOperationEvent
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/communication/tests/src/Kernel/CommunicationAccessTest.php:24

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installSchema('system', ['sequences']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

