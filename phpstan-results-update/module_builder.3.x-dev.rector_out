modules/contrib/module_builder/module_builder.api.php
modules/contrib/module_builder/module_builder_devel/src/Environment/ModuleBuilderDevel.php
modules/contrib/module_builder/src/LibraryWrapper.php
modules/contrib/module_builder/tests/sample_hook_definitions/7/hooks_processed.php
modules/contrib/module_builder/tests/src/Functional/ComponentFormTest.php
modules/contrib/module_builder/module_builder.install
modules/contrib/module_builder/module_builder_devel/src/Form/ProcessDevelForm.php
modules/contrib/module_builder/module_builder.module
modules/contrib/module_builder/src/ModuleBuilderComponentListBuilder.php
modules/contrib/module_builder/module_builder_devel/src/DrupalCodeBuilderDevel.php
modules/contrib/module_builder/module_builder_devel/src/DrupalCodeBuilderTestSamples.php
modules/contrib/module_builder/src/ModuleFileWriter.php
modules/contrib/module_builder/src/Plugin/Derivative/ComponentSectionFormsLocalTasks.php
modules/contrib/module_builder/module_builder_devel/src/Form/ProcessFormExtra.php
modules/contrib/module_builder/module_builder_devel/src/Form/ProcessTestSamplesForm.php
modules/contrib/module_builder/src/Routing/ComponentRouteProvider.php
modules/contrib/module_builder/module_builder_devel/src/Routing/RouteSubscriber.php
modules/contrib/module_builder/src/Controller/AutocompleteController.php
modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/Entity/TestComponent.php
modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/Form/TestComponentMiscForm.php
modules/contrib/module_builder/src/DrupalCodeBuilder.php
modules/contrib/module_builder/src/Element/GeneratedFiles.php
modules/contrib/module_builder/tests/src/Functional/GenerateFormTest.php
modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/TestDrupalCodeBuilder.php
modules/contrib/module_builder/src/Entity/ComponentInterface.php
modules/contrib/module_builder/src/Entity/ModuleBuilderModule.php
modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/TestEnvironment.php
modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/TestGenerateTask.php
modules/contrib/module_builder/src/EntityHandler/ComponentSectionFormHandler.php
modules/contrib/module_builder/src/ExceptionHandler.php
modules/contrib/module_builder/src/Form/ComponentFormBase.php
modules/contrib/module_builder/tests/modules/test_dummy_module_write_location/src/DrupalCodeBuilderTestSampleData.php
modules/contrib/module_builder/tests/modules/test_dummy_module_write_location/src/ModuleFileWriterDummyLocation.php
modules/contrib/module_builder/tests/modules/test_dummy_module_write_location/src/TestSampleDataEnvironment.php
modules/contrib/module_builder/src/Form/ComponentGenerateForm.php
modules/contrib/module_builder/tests/src/Unit/ComponentSectionFormHandlerTest.php
modules/contrib/module_builder/src/Form/ComponentSectionForm.php
modules/contrib/module_builder/src/Form/ModuleHooksForm.php
modules/contrib/module_builder/src/Form/ModuleMiscForm.php
modules/contrib/module_builder/src/Form/ModuleNameForm.php
modules/contrib/module_builder/src/Form/ProcessForm.php
modules/contrib/module_builder/src/Form/SettingsForm.php

14 files with changes
=====================

1) modules/contrib/module_builder/module_builder_devel/src/DrupalCodeBuilderTestSamples.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder_devel;

+use DrupalCodeBuilder\Factory;
 use Drupal\module_builder\DrupalCodeBuilder;

 /**
@@ @@
    * {@inheritdoc}
    */
   protected function doLoadLibrary() {
-    \DrupalCodeBuilder\Factory::setEnvironmentLocalClass('WriteTestsSampleLocation')
+    Factory::setEnvironmentLocalClass('WriteTestsSampleLocation')
       ->setCoreVersionNumber(\Drupal::VERSION);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/module_builder/module_builder_devel/src/DrupalCodeBuilderDevel.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder_devel;

+use DrupalCodeBuilder\Factory;
 use Drupal\module_builder\DrupalCodeBuilder;
 use Drupal\module_builder_devel\Environment\ModuleBuilderDevel;

@@ @@
   protected function doLoadLibrary() {
     $environment = new ModuleBuilderDevel;

-    \DrupalCodeBuilder\Factory::setEnvironment($environment)
+    Factory::setEnvironment($environment)
       ->setCoreVersionNumber(\Drupal::VERSION);
   }

 }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/module_builder/module_builder.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\module_builder\Form\ModuleMiscForm;
+use Drupal\module_builder\Form\ComponentSectionForm;
 /**
  * @file
  * Builds scaffolding for custom modules.
@@ @@
 /**
  * Implements hook_help().
  */
-function module_builder_help($route_name, \Drupal\Core\Routing\RouteMatchInterface $route_match) {
+function module_builder_help($route_name, RouteMatchInterface $route_match) {
   switch ($route_name) {
     case 'help.page.module_builder':
       return t("Module builder allows you to generate code files for new custom modules.");
@@ @@

     // Set a generic form class for the 'misc' section if not specified.
     if (empty($entity_type->getFormClass('misc'))) {
-      $entity_type->setFormClass('misc', \Drupal\module_builder\Form\ModuleMiscForm::class);
+      $entity_type->setFormClass('misc', ModuleMiscForm::class);
     }

     $canonical_template = $entity_type->getLinkTemplate('canonical');
@@ @@
     foreach ($form_operations as $form_op) {
       // Allow the entity type to specify a form class.
       if (empty($entity_type->getFormClass($form_op))) {
-        $entity_type->setFormClass($form_op, \Drupal\module_builder\Form\ComponentSectionForm::class);
+        $entity_type->setFormClass($form_op, ComponentSectionForm::class);
       }

       // TODO: this is clobbering link templates in the entity if they are set
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


4) modules/contrib/module_builder/tests/modules/test_dummy_module_write_location/src/DrupalCodeBuilderTestSampleData.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\test_dummy_module_write_location;

+use DrupalCodeBuilder\Factory;
 use Drupal\module_builder\DrupalCodeBuilder;

 /**
@@ @@
   protected function doLoadLibrary() {
     $environment = new TestSampleDataEnvironment();

-    \DrupalCodeBuilder\Factory::setEnvironment($environment)
+    Factory::setEnvironment($environment)
       ->setCoreVersionNumber(\Drupal::VERSION);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/TestDrupalCodeBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder_test_component_type;

+use DrupalCodeBuilder\Factory;
 use Drupal\module_builder\DrupalCodeBuilder;

 /**
@@ @@
   protected function doLoadLibrary() {
     $environment = new TestEnvironment();

-    \DrupalCodeBuilder\Factory::setEnvironment($environment)
+    Factory::setEnvironment($environment)
       ->setCoreVersionNumber(\Drupal::VERSION);
   }

 }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/module_builder/tests/modules/module_builder_test_component_type/src/Form/TestComponentMiscForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder_test_component_type\Form;

+use DrupalCodeBuilder\Factory;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\module_builder\Form\ModuleMiscForm;
 use Drupal\module_builder_test_component_type\TestGenerateTask;
@@ @@
    * {@inheritdoc}
    */
   public function setGenerateTask(Generate $generate_task) {
-    $dcb_container =  \DrupalCodeBuilder\Factory::getContainer();
+    $dcb_container =  Factory::getContainer();

     // Can't use the container directly, as it won't know about the class we
     // want to use instead.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


7) modules/contrib/module_builder/src/LibraryWrapper.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder;

+use DrupalCodeBuilder\Factory;
 /**
  * Quick and dirty wrapper class to load our library.
  *
@@ @@
    *  Throws an exception if the library can't be found.
    */
   public static function loadLibrary() {
-    if (!class_exists(\DrupalCodeBuilder\Factory::class)) {
+    if (!class_exists(Factory::class)) {
       throw new \Exception("Mising library.");
     }

     // TODO: add an environment class with a more appropriate name.
-    \DrupalCodeBuilder\Factory::setEnvironmentLocalClass('DrupalLibrary')
+    Factory::setEnvironmentLocalClass('DrupalLibrary')
       ->setCoreVersionNumber(\Drupal::VERSION);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector


8) modules/contrib/module_builder/tests/src/Unit/ComponentSectionFormHandlerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\module_builder\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
+use Drupal\Core\Entity\EntityTypeInterface;
+use Drupal\module_builder\EntityHandler\ComponentSectionFormHandler;
 use Drupal\Tests\UnitTestCase;

 /**
@@ @@
  */
 class ComponentSectionFormHandlerTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The modules to enable.
    *
@@ @@
       ],
     ];

-    $entity_type = $this->prophesize(\Drupal\Core\Entity\EntityTypeInterface::class);
+    $entity_type = $this->prophesize(EntityTypeInterface::class);
     $entity_type->id()->willReturn('test');
     $entity_type->get('code_builder')->willReturn($entity_code_builder_annotation_data);

     // Create the handler, with mock passed in.
-    $component_sections_handler = new \Drupal\module_builder\EntityHandler\ComponentSectionFormHandler(
+    $component_sections_handler = new ComponentSectionFormHandler(
       $entity_type->reveal()
     );
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


9) modules/contrib/module_builder/tests/src/Functional/GenerateFormTest.php:41

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->container->get('module_installer')->install(['test_dummy_module_write_location']);
@@ @@
     $page->pressButton('Write selected files');

     $this->assertFileExists($site_path . '/my_module/my_module.module');
-    $this->assertFileNotExists($site_path . '/my_module/my_module.install');
+    $this->assertFileDoesNotExist($site_path . '/my_module/my_module.install');
     $this->assertSession()->pageTextMatches('@Written 1 files to folder sites/simpletest/\d+/my_module@');

     // Put some junk in the existing files, so we can check that 'Write new files'
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameMethodRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/module_builder/tests/src/Functional/ComponentFormTest.php:49

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Enable error output to the browser.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/module_builder/src/Form/ProcessForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder\Form;

+use DrupalCodeBuilder\Factory;
+use DrupalCodeBuilder\Exception\StorageException;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Messenger\MessengerInterface;
@@ @@
     // The task handler returns sane values for these even if there's no hook
     // data.
     $last_update = $task_handler_report->lastUpdatedDate();
-    $directory = \DrupalCodeBuilder\Factory::getEnvironment()->getHooksDirectory();
+    $directory = Factory::getEnvironment()->getHooksDirectory();

     $form['intro'] = array(
       '#markup' => '<p>' . t("Module Builder analyses your site's code to find data about Drupal components such as hooks, plugins, tagged services, and more." . ' '
@@ @@
       try {
         $analysis_data = $task_report_summary->listStoredData();
       }
-      catch (\DrupalCodeBuilder\Exception\StorageException $e) {
+      catch (StorageException $e) {
         // Bail if the storage has a problem.
         $this->messenger()->addError($e->getMessage());
         return $form;
@@ @@
     $batch = array(
       'title' => t('Analysing site code'),
       'operations' => array(),
-      'file' => drupal_get_path('module', 'module_builder') . '/includes/module_builder.admin.inc',
+      'file' => \Drupal::service('extension.list.module')->getPath('module_builder') . '/includes/module_builder.admin.inc',
       'finished' => [get_class($this), 'batchFinished'],
     );
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


12) modules/contrib/module_builder/src/DrupalCodeBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder;

+use DrupalCodeBuilder\Factory;
 /**
  * Service class that wraps around the DCB library, to make it injectable.
  */
@@ @@
       $this->loadLibrary();
     }

-    return \DrupalCodeBuilder\Factory::getTask($task_name, $task_options);
+    return Factory::getTask($task_name, $task_options);
   }

   /**
@@ @@
    *  Throws an exception if the library can't be found.
    */
   public function loadLibrary() {
-    if (!class_exists(\DrupalCodeBuilder\Factory::class)) {
+    if (!class_exists(Factory::class)) {
       throw new \Exception("Mising library.");
     }

@@ @@
    */
   protected function doLoadLibrary() {
     // TODO: add an environment class with a more appropriate name.
-    \DrupalCodeBuilder\Factory::setEnvironmentLocalClass('DrupalLibrary')
+    Factory::setEnvironmentLocalClass('DrupalLibrary')
       ->setCoreVersionNumber(\Drupal::VERSION);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector


13) modules/contrib/module_builder/module_builder_devel/src/Routing/RouteSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder_devel\Routing;

+use Drupal\module_builder_devel\Form\ProcessFormExtra;
 use Drupal\Core\Routing\RouteSubscriberBase;
 use Symfony\Component\Routing\RouteCollection;

@@ @@
   protected function alterRoutes(RouteCollection $collection) {
     // Change form class for the process form.
     if ($route = $collection->get('module_builder.analyse')) {
-      $route->setDefault('_form', \Drupal\module_builder_devel\Form\ProcessFormExtra::class);
+      $route->setDefault('_form', ProcessFormExtra::class);
     }
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


14) modules/contrib/module_builder/module_builder_devel/src/Form/ProcessDevelForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\module_builder_devel\Form;

+use DrupalCodeBuilder\Factory;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;

@@ @@

     foreach ($jobs_to_run as $job) {
       // Get the helper from the DCB container.
-      $collector_helper = \DrupalCodeBuilder\Factory::getContainer()->get($job['collector']);
+      $collector_helper = Factory::getContainer()->get($job['collector']);
       $job_data = $collector_helper->collect([$job]);

       dpm($job_data);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 14 files have been changed by Rector                                      

