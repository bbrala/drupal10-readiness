diff --git a/field_zip_file.module b/field_zip_file.module
index eecc5ac..c6585db 100644
--- a/field_zip_file.module
+++ b/field_zip_file.module
@@ -1,10 +1,12 @@
 <?php
 
-function _field_zip_file(\Drupal\file\Entity\File $file) {
+use Drupal\file\Entity\File;
+use Drupal\Core\Archiver\Zip;
+function _field_zip_file(File $file) {
   $uri = $file->getFileUri();
   if (file_exists($uri)) {
     $realPath = \Drupal::service('file_system')->realpath($uri);
-    $zipFile = new \Drupal\Core\Archiver\Zip($realPath);
+    $zipFile = new Zip($realPath);
     $pathinfo = pathinfo($uri);
     $folderUri = $pathinfo['dirname'];
 
diff --git a/src/Plugin/Field/FieldFormatter/ZipFileBase.php b/src/Plugin/Field/FieldFormatter/ZipFileBase.php
index 2045e35..de8c34f 100644
--- a/src/Plugin/Field/FieldFormatter/ZipFileBase.php
+++ b/src/Plugin/Field/FieldFormatter/ZipFileBase.php
@@ -64,7 +64,7 @@ class ZipFileBase extends FormatterBase {
     $url = NULL;
     if ($file = $zip_file->get('entity')->getValue()) {
       if ($file_info = _field_zip_file($file)) {
-        $url = file_create_url($file_info['folder_uri']);
+        $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file_info['folder_uri']);
       }
     }
     if ($this->getSetting('default_index')) {
