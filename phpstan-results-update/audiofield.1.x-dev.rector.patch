diff --git a/audiofield.module b/audiofield.module
index 8d6d150..402bcf8 100644
--- a/audiofield.module
+++ b/audiofield.module
@@ -98,7 +98,7 @@ function audiofield_theme_registry_alter(&$theme_registry) {
    * By default, Drupal 8 does not include theme suggestions from inside the
    * module in which they were created, so we must add them manually here.
    */
-  $path = drupal_get_path('module', 'audiofield');
+  $path = \Drupal::service('extension.list.module')->getPath('audiofield');
   $audioplayer_templates = drupal_find_theme_templates($theme_registry, '.html.twig', $path);
   foreach ($audioplayer_templates as &$audioplayer_template) {
     $audioplayer_template['type'] = 'module';
diff --git a/src/AudioFieldPluginBase.php b/src/AudioFieldPluginBase.php
index 6afa847..315f8fb 100755
--- a/src/AudioFieldPluginBase.php
+++ b/src/AudioFieldPluginBase.php
@@ -460,7 +460,7 @@ abstract class AudioFieldPluginBase extends PluginBase implements ContainerFacto
       // Load the associated file.
       $file = $this->loadFileFromItem($item);
       // Get the file URL.
-      return Url::fromUri(file_create_url($file->getFileUri()));
+      return \Drupal::service('file_url_generator')->generate($file->getFileUri());
     }
     // Handle Link entity.
     elseif ($this->getClassType($item) == 'LinkItem') {
diff --git a/src/Plugin/AudioPlayer/WavesurferAudioPlayer.php b/src/Plugin/AudioPlayer/WavesurferAudioPlayer.php
index 8e2f37e..1be512f 100644
--- a/src/Plugin/AudioPlayer/WavesurferAudioPlayer.php
+++ b/src/Plugin/AudioPlayer/WavesurferAudioPlayer.php
@@ -155,7 +155,7 @@ class WavesurferAudioPlayer extends AudioFieldPluginBase {
 
         // If the file exists, add it to the jQuery and template settings.
         if (file_exists($peakData['url'])) {
-          $renderInfo->peakpath = $fileSettings['peakpath'] = file_create_url($peakData['url']);
+          $renderInfo->peakpath = $fileSettings['peakpath'] = \Drupal::service('file_url_generator')->generateAbsoluteString($peakData['url']);
         }
       }
 
