diff --git a/oauth2_rs.info.yml b/oauth2_rs.info.yml
index 3e3c08b..9c680ab 100644
--- a/oauth2_rs.info.yml
+++ b/oauth2_rs.info.yml
@@ -1,8 +1,7 @@
 name: 'OAuth2 Resource server'
 type: module
 description: 'Drupal OAuth2 Resource server implementation for identity provider.'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.1 || ^10
 package: Authentication
 configure: oauth2_rs.token.settings
 dependepcies:
diff --git a/src/Authentication/TokenAuthUser.php b/src/Authentication/TokenAuthUser.php
index e50d716..3820fc2 100644
--- a/src/Authentication/TokenAuthUser.php
+++ b/src/Authentication/TokenAuthUser.php
@@ -320,7 +320,7 @@ class TokenAuthUser implements TokenAuthUserInterface {
    * {@inheritdoc}
    */
   public function urlInfo($rel = 'canonical', array $options = []) {
-    return $this->user->urlInfo($rel, $options);
+    return $this->user->toUrl($rel, $options);
   }
 
   /**
@@ -334,7 +334,7 @@ class TokenAuthUser implements TokenAuthUserInterface {
    * {@inheritdoc}
    */
   public function link($text = NULL, $rel = 'canonical', array $options = []) {
-    return $this->user->link($text, $rel, $options);
+    return $this->user->toLink($text, $rel, $options)->toString();
   }
 
   /**
diff --git a/src/Service/UserAuthManager.php b/src/Service/UserAuthManager.php
index c1a95cf..1238df6 100644
--- a/src/Service/UserAuthManager.php
+++ b/src/Service/UserAuthManager.php
@@ -53,7 +53,7 @@ class UserAuthManager implements UserAuthManagerInterface {
   public function createAccount($email, $username, $role, $language = 'en') {
     $user = $this->entityTypeManager->getStorage('user')->create([]);
     // Using password generator.
-    $user->setPassword(user_password(10));
+    $user->setPassword(\Drupal::service('password_generator')->generate(10));
     $user->enforceIsNew();
     $user->setEmail($email);
     $user->setUsername($username);
diff --git a/tests/src/Unit/Authentication/Provider/JWTAuthenticationProviderTest.php b/tests/src/Unit/Authentication/Provider/JWTAuthenticationProviderTest.php
index ece4bb3..a2bb330 100644
--- a/tests/src/Unit/Authentication/Provider/JWTAuthenticationProviderTest.php
+++ b/tests/src/Unit/Authentication/Provider/JWTAuthenticationProviderTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\oauth2_rs\Unit\Authentication\Provider;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Language\LanguageManagerInterface;
@@ -19,6 +20,7 @@ use Symfony\Component\HttpFoundation\RequestStack;
  */
 class JWTAuthenticationProviderTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The authentication provider.
    *
