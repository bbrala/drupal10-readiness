diff --git a/src/ConfigImporterService.php b/src/ConfigImporterService.php
index 21ed5cc..57666bf 100644
--- a/src/ConfigImporterService.php
+++ b/src/ConfigImporterService.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\config_import;
 
+use Drupal\Core\Site\Settings;
 use Drupal\Core\File\FileSystemInterface;
 use Drupal\Core\Config\CachedStorage;
 use Drupal\Core\Config\ConfigImporterException;
@@ -170,7 +171,7 @@ class ConfigImporterService implements ConfigImporterServiceInterface {
     // @see https://www.drupal.org/node/2758325
     FileCacheFactory::setConfiguration([FileCacheFactory::DISABLE_CACHE => TRUE]);
     // Sync directory must be configured.
-    $this->setDirectory(\Drupal\Core\Site\Settings::get('config_sync_directory') );
+    $this->setDirectory(Settings::get('config_sync_directory') );
   }
 
   /**
diff --git a/tests/src/Unit/ConfigImporterServiceTest.php b/tests/src/Unit/ConfigImporterServiceTest.php
index 5a6b714..c66730d 100644
--- a/tests/src/Unit/ConfigImporterServiceTest.php
+++ b/tests/src/Unit/ConfigImporterServiceTest.php
@@ -87,7 +87,7 @@ class ConfigImporterServiceTest extends ConfigImporterServiceTestBase {
     // Remember the value before import which potentially can overwrite it.
     $original_value = $config_storage->read(static::TEST_CONFIG);
     // Set the directory to import configurations from.
-    $this->configImporter->setDirectory(drupal_get_path('module', 'config_import') . '/tests/config/import');
+    $this->configImporter->setDirectory(\Drupal::service('extension.list.module')->getPath('config_import') . '/tests/config/import');
     // Doing the import.
     $this->configImporter->importConfigs([static::TEST_CONFIG]);
 
diff --git a/tests/src/Unit/ConfigImporterServiceTestBase.php b/tests/src/Unit/ConfigImporterServiceTestBase.php
index a0dc309..65e9485 100644
--- a/tests/src/Unit/ConfigImporterServiceTestBase.php
+++ b/tests/src/Unit/ConfigImporterServiceTestBase.php
@@ -31,7 +31,7 @@ abstract class ConfigImporterServiceTestBase extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->configImporter = $this->container->get('config_import.importer');
@@ -53,8 +53,8 @@ abstract class ConfigImporterServiceTestBase extends KernelTestBase {
     foreach ($arguments as $i => $argument) {
       $arguments[$i] = preg_quote($argument, '/');
     }
-
-    $this->setExpectedExceptionRegExp($class, sprintf('/^%s$/', vsprintf($regex, $arguments)));
+    $this->expectExceptionMessageMatches(sprintf('/^%s$/', vsprintf($regex, $arguments)));
+    $this->expectException($class);
   }
 
   /**
