modules/contrib/block_list_override/block_list_override.install
modules/contrib/block_list_override/block_list_override.module
modules/contrib/block_list_override/src/BlockListOverride.php
modules/contrib/block_list_override/src/Controller/DefaultController.php
modules/contrib/block_list_override/src/Controller/LayoutController.php
modules/contrib/block_list_override/src/Form/SettingsForm.php
modules/contrib/block_list_override/src/LayoutPluginAlter.php
modules/contrib/block_list_override/src/PluginAlter.php
modules/contrib/block_list_override/tests/src/Functional/BlockListOverrideTest.php

1 file with changes
===================

1) modules/contrib/block_list_override/tests/src/Functional/BlockListOverrideTest.php:73

    ---------- begin diff ----------
@@ @@
   /**
    * Perform initial setup tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->user = $this->DrupalCreateUser([
       'administer site configuration',
@@ @@
     ];
     foreach ($pages as $page) {
       $this->drupalGet($page);
-      $this->assertResponse(200);
+      $this->assertSession()->statusCodeEquals(200);
     }
     $this->drupalLogout();
   }
@@ @@

     // Access config page.
     $this->drupalGet('admin/config/block_list_override/settings');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     // Test the form elements exist and have default values.
     $config = $this->config('block_list_override.settings');

     foreach (self::$replace as $field => $opt) {
-      $this->assertFieldByName(
-        $field,
-        $config->get('block_list_override.settings.' . $field),
-        $field . ' field has the default value'
-      );
+      $this->assertSession()->fieldValueEquals($field, $config->get('block_list_override.settings.' . $field));
     }
     // Test form submission.
     $edit = [];
@@ @@
     }
     $edit['system_negate'] = 0;
     $edit['layout_negate'] = 0;
-    $this->drupalPostForm(NULL, $edit, t('Save configuration'));
-    $this->assertText(
-      'The configuration options have been saved.',
-      'The form was saved correctly.'
-    );
+    $this->submitForm($edit, t('Save configuration'));
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');
     // Test the new values are there.
     $this->drupalGet('admin/config/block_list_override/settings');
     $this->assertSession()->statusCodeEquals(200);
@@ @@
           case $type . '_match':
           case $type . '_prefix':
           case $type . '_regex':
-            $this->assertNoText($opt['hides'], $opt['label'] . ' block was not displayed .');
+            $this->assertSession()->pageTextNotContains($opt['hides']);
             break;

         }
@@ @@

     // Access config page.
     $this->drupalGet('admin/config/block_list_override/settings');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     // Test the form elements exist and have default values.
     $config = $this->config('block_list_override.settings');

     foreach (self::$replace as $field => $opt) {
-      $this->assertFieldByName(
-        $field,
-        $config->get('block_list_override.settings.' . $field),
-        $field . ' field has the default value'
-      );
+      $this->assertSession()->fieldValueEquals($field, $config->get('block_list_override.settings.' . $field));
     }
     // Test form submission.
     $edit = [];
@@ @@
       }
     }
     $edit['system_negate'] = 1;
-    $this->drupalPostForm(NULL, $edit, t('Save configuration'));
-    $this->assertText(
-      'The configuration options have been saved.',
-      'The form was saved correctly.'
-    );
+    $this->submitForm($edit, t('Save configuration'));
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');

     // Test block list results.
     $page = 'admin/config/block_list_override/' . $type . '-list';
@@ @@
         case $type . '_match':
         case $type . '_prefix':
         case $type . '_regex':
-          $this->assertText($opt['hides'], $opt['label'] . ' block was displayed .');
+          $this->assertSession()->pageTextContains($opt['hides']);
           break;

       }
@@ @@

     // Access config page.
     $this->drupalGet('admin/config/block_list_override/settings');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
     // Test the form elements exist and have default values.
     $config = $this->config('block_list_override.settings');

     foreach (self::$replace as $field => $opt) {
-      $this->assertFieldByName(
-        $field,
-        $config->get('block_list_override.settings.' . $field),
-        $field . ' field has the default value'
-      );
+      $this->assertSession()->fieldValueEquals($field, $config->get('block_list_override.settings.' . $field));
     }
     // Test form submission.
     $edit = [];
@@ @@
       }
     }
     $edit['system_negate'] = 1;
-    $this->drupalPostForm(NULL, $edit, t('Save configuration'));
-    $this->assertText(
-      'The configuration options have been saved.',
-      'The form was saved correctly.'
-    );
+    $this->submitForm($edit, t('Save configuration'));
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');

     // Test block list results.
     $page = 'admin/config/block_list_override/' . $type . '-list';
@@ @@
         case $type . '_match':
         case $type . '_prefix':
         case $type . '_regex':
-          $this->assertText($opt['hides'], $opt['label'] . ' block was displayed .');
+          $this->assertSession()->pageTextContains($opt['hides']);
           break;

       }
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertNoTextRector
 * AssertResponseRector
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

