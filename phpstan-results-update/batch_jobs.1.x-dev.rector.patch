diff --git a/src/Form/BatchJobsJobs.php b/src/Form/BatchJobsJobs.php
index 97d243b..3eab0c5 100644
--- a/src/Form/BatchJobsJobs.php
+++ b/src/Form/BatchJobsJobs.php
@@ -91,7 +91,7 @@ class BatchJobsJobs extends FormBase {
       $job = new Job($batch_job->bid);
       $token = $job->getToken($job->bid);
       $form['jobs'][$job->bid]['title'] = [
-        '#markup' => $this->link($job->title, '/batch-jobs/' . $job->bid),
+        '#markup' => $this->toLink($job->title, '/batch-jobs/' . $job->bid)->toString(),
       ];
       $form['jobs'][$job->bid]['user'] = [
         '#markup' => $job->getUser(),
diff --git a/tests/src/Functional/BatchJobsTest.php b/tests/src/Functional/BatchJobsTest.php
index be7e827..a6b993e 100644
--- a/tests/src/Functional/BatchJobsTest.php
+++ b/tests/src/Functional/BatchJobsTest.php
@@ -36,19 +36,19 @@ class BatchJobsTest extends BrowserTestBase {
     // Create batch job.
     $batch = batch_jobs_example_create_job(10);
     $this->drupalGet('admin/reports/batch-jobs');
-    $this->assertText('Create nodes');
-    $this->assertRaw('value="Run"');
+    $this->assertSession()->pageTextContains('Create nodes');
+    $this->assertSession()->responseContains('value="Run"');
 
     // Run batch job.
     $this->runBatchJobs($batch->bid);
     $this->drupalGet('admin/reports/batch-jobs');
-    $this->assertRaw('value="Run finish tasks"');
+    $this->assertSession()->responseContains('value="Run finish tasks"');
 
     // Run finish task.
     $job = new Job($batch->bid);
     $job->finish();
     $this->drupalGet('admin/reports/batch-jobs');
-    $this->assertText('Completed');
+    $this->assertSession()->pageTextContains('Completed');
   }
 
   /**
