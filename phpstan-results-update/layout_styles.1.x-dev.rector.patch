diff --git a/layout_styles.info.yml b/layout_styles.info.yml
index cfb728b..eaedd6b 100644
--- a/layout_styles.info.yml
+++ b/layout_styles.info.yml
@@ -1,7 +1,6 @@
 name: Layout Styles
 description: Add image as a background image for a section or add css classes for sections.
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
 dependencies:
   - drupal:layout_builder
diff --git a/src/Plugin/Layout/LayoutBase.php b/src/Plugin/Layout/LayoutBase.php
index 33066b5..6d5dd9b 100644
--- a/src/Plugin/Layout/LayoutBase.php
+++ b/src/Plugin/Layout/LayoutBase.php
@@ -72,7 +72,7 @@ class LayoutBase extends LayoutDefault implements PluginFormInterface {
       $fid = $this->configuration['background_image'][0];
       $file = File::load($fid);
       $file_uri = $file->getFileUri();
-      $url = file_create_url($file_uri);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file_uri);
       $build['#attributes']['style'] = 'background-image: url(' . $url . ')';
     }
     if (!empty($this->configuration['layout_class'])) {
diff --git a/src/Plugin/Layout/MultipleWidthLayoutBase.php b/src/Plugin/Layout/MultipleWidthLayoutBase.php
index 22b567d..8621313 100644
--- a/src/Plugin/Layout/MultipleWidthLayoutBase.php
+++ b/src/Plugin/Layout/MultipleWidthLayoutBase.php
@@ -81,7 +81,7 @@ abstract class MultipleWidthLayoutBase extends LayoutDefault implements PluginFo
       $fid = $this->configuration['background_image'][0];
       $file = File::load($fid);
       $file_uri = $file->getFileUri();
-      $url = file_create_url($file_uri);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file_uri);
       $build['#attributes']['style'] = 'background-image: url(' . $url . ')';
     }
     $build['#attributes']['class'] = [
