diff --git a/modules/openy_paragraph_activity_finder_search/openy_paragraph_activity_finder_search.install b/modules/openy_paragraph_activity_finder_search/openy_paragraph_activity_finder_search.install
index 0cd1db4..b6d1669 100644
--- a/modules/openy_paragraph_activity_finder_search/openy_paragraph_activity_finder_search.install
+++ b/modules/openy_paragraph_activity_finder_search/openy_paragraph_activity_finder_search.install
@@ -10,7 +10,7 @@
  */
 function openy_paragraph_activity_finder_search_update_8002() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_paragraph_activity_finder_search') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_paragraph_activity_finder_search') . '/config/install');
   $cim->importConfigs([
     'field.field.paragraph.activity_finder_search.field_prgf_af_page_ref',
     'core.entity_view_display.paragraph.activity_finder_search.default',
@@ -23,7 +23,7 @@ function openy_paragraph_activity_finder_search_update_8002() {
  */
 function openy_paragraph_activity_finder_search_update_8003() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_paragraph_activity_finder_search') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_paragraph_activity_finder_search') . '/config/install');
   $cim->importConfigs([
     'field.field.paragraph.activity_finder_search.field_prgf_af_show_weeks_filter',
     'field.storage.paragraph.field_prgf_af_show_weeks_filter',
@@ -36,7 +36,7 @@ function openy_paragraph_activity_finder_search_update_8003() {
  * Update configs with deprecation notices.
  */
 function openy_paragraph_activity_finder_search_update_8004() {
-  $config_dir = drupal_get_path('module', 'openy_paragraph_activity_finder_search') . '/config/install/';
+  $config_dir = \Drupal::service('extension.list.module')->getPath('openy_paragraph_activity_finder_search') . '/config/install/';
   $configs = [
     'paragraphs.paragraphs_type.activity_finder_search' => [
       'label',
diff --git a/modules/openy_prgf_activity_finder/openy_prgf_activity_finder.install b/modules/openy_prgf_activity_finder/openy_prgf_activity_finder.install
index d837ece..18aa0e1 100644
--- a/modules/openy_prgf_activity_finder/openy_prgf_activity_finder.install
+++ b/modules/openy_prgf_activity_finder/openy_prgf_activity_finder.install
@@ -10,7 +10,7 @@
  */
 function openy_prgf_activity_finder_update_8001() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_prgf_activity_finder') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_prgf_activity_finder') . '/config/install');
   $cim->importConfigs([
     'field.storage.paragraph.field_prgf_af_categ_excl',
     'field.storage.paragraph.field_prgf_af_categ',
@@ -27,7 +27,7 @@ function openy_prgf_activity_finder_update_8001() {
  */
 function openy_prgf_activity_finder_update_8002() {
   $cim = \Drupal::service('openy_upgrade_tool.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_prgf_activity_finder') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_prgf_activity_finder') . '/config/install');
   $cim->importConfigs([
     'field.storage.paragraph.field_prgf_hide_program_block',
     'field.field.paragraph.activity_finder.field_prgf_hide_program_block',
@@ -41,7 +41,7 @@ function openy_prgf_activity_finder_update_8002() {
  */
 function openy_prgf_activity_finder_update_8003() {
   $cim = \Drupal::service('openy_upgrade_tool.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_prgf_activity_finder') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_prgf_activity_finder') . '/config/install');
   $cim->importConfigs([
     'core.entity_form_display.paragraph.activity_finder.default',
     'core.entity_view_display.paragraph.activity_finder.default',
@@ -54,7 +54,7 @@ function openy_prgf_activity_finder_update_8003() {
  * Update configs with deprecation notices.
  */
 function openy_prgf_activity_finder_update_8004() {
-  $config_dir = drupal_get_path('module', 'openy_prgf_activity_finder') . '/config/install/';
+  $config_dir = \Drupal::service('extension.list.module')->getPath('openy_prgf_activity_finder') . '/config/install/';
   $configs = [
     'paragraphs.paragraphs_type.activity_finder' => [
       'label',
diff --git a/modules/openy_prgf_activity_finder_4/openy_prgf_activity_finder_4.install b/modules/openy_prgf_activity_finder_4/openy_prgf_activity_finder_4.install
index 78c6dcf..7d8112d 100644
--- a/modules/openy_prgf_activity_finder_4/openy_prgf_activity_finder_4.install
+++ b/modules/openy_prgf_activity_finder_4/openy_prgf_activity_finder_4.install
@@ -9,7 +9,7 @@
  * Update configs with new labels/descriptions.
  */
 function openy_prgf_activity_finder_4_update_8400() {
-  $config_dir = drupal_get_path('module', 'openy_prgf_activity_finder_4') . '/config/install/';
+  $config_dir = \Drupal::service('extension.list.module')->getPath('openy_prgf_activity_finder_4') . '/config/install/';
   $configs = [
     'paragraphs.paragraphs_type.activity_finder_4' => [
       'label',
diff --git a/openy_activity_finder.install b/openy_activity_finder.install
index b3aa824..9b0fd11 100644
--- a/openy_activity_finder.install
+++ b/openy_activity_finder.install
@@ -45,7 +45,7 @@ function openy_activity_finder_update_dependencies() {
 * Update configs.
 */
 function openy_activity_finder_update_8001() {
-  $openy_activity_finder_dir = drupal_get_path('module', 'openy_activity_finder');
+  $openy_activity_finder_dir = \Drupal::service('extension.list.module')->getPath('openy_activity_finder');
   $cim = \Drupal::service('config_import.importer');
   $cim->setDirectory($openy_activity_finder_dir . '/config/install');
   $cim->importConfigs(['openy_activity_finder.settings']);
@@ -63,7 +63,7 @@ function openy_activity_finder_update_8001() {
  */
 function openy_activity_finder_update_8002() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/optional');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/optional');
   $config = \Drupal::config('search_api.index.default');
   if (!$config->isNew()) {
     // Import config only in case it already exist.
@@ -77,7 +77,7 @@ function openy_activity_finder_update_8002() {
 function openy_activity_finder_update_8003() {
   \Drupal::service('module_installer')->install(['openy']);
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/install');
   $cim->importConfigs(['openy_activity_finder.settings']);
 }
 
@@ -96,7 +96,7 @@ function openy_activity_finder_update_8004(&$sandbox) {
  */
 function openy_activity_finder_update_8005() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/optional');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/optional');
   $config = \Drupal::config('search_api.index.default');
   if (!$config->isNew()) {
     // Import config only in case it already exist.
@@ -152,7 +152,7 @@ function openy_activity_finder_update_8007(&$sandbox) {
  */
 function openy_activity_finder_update_8008() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/optional');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/optional');
   $config = \Drupal::config('search_api.index.default');
   if (!$config->isNew()) {
     // Import config only in case it already exist.
@@ -165,7 +165,7 @@ function openy_activity_finder_update_8008() {
  */
 function openy_activity_finder_update_8009() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/optional');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/optional');
   $config = \Drupal::config('search_api.index.default');
   if (!$config->isNew()) {
     // Import config only in case it already exist.
@@ -179,7 +179,7 @@ function openy_activity_finder_update_8009() {
 function openy_activity_finder_update_8400() {
   // Import config for rest endpoint.
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/install');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/install');
   $cim->importConfigs(['rest.resource.openy_activity_finder_session_data']);
   // Add permissions to anonymous and authenticated roles.
   $permissions = [
@@ -202,7 +202,7 @@ function openy_activity_finder_update_8400() {
  */
 function openy_activity_finder_update_8401() {
   $cim = \Drupal::service('config_import.importer');
-  $cim->setDirectory(drupal_get_path('module', 'openy_activity_finder') . '/config/optional');
+  $cim->setDirectory(\Drupal::service('extension.list.module')->getPath('openy_activity_finder') . '/config/optional');
   $config = \Drupal::config('search_api.index.default');
   if (!$config->isNew()) {
     // Import config only in case it already exists.
diff --git a/src/OpenyActivityFinderSolrBackend.php b/src/OpenyActivityFinderSolrBackend.php
index 31865a7..39f59e6 100644
--- a/src/OpenyActivityFinderSolrBackend.php
+++ b/src/OpenyActivityFinderSolrBackend.php
@@ -367,7 +367,7 @@ class OpenyActivityFinderSolrBackend extends OpenyActivityFinderBackend {
         $link = $sub_category->field_learn_more->getValue();
         if (!empty($link[0]['uri'])) {
           $learn_more_view = $sub_category->field_learn_more->view();
-          $learn_more = render($learn_more_view)->__toString();
+          $learn_more = \Drupal::service('renderer')->render($learn_more_view)->__toString();
         }
       }
 
