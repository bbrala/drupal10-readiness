diff --git a/organigrams.module b/organigrams.module
index 500c723..e403c18 100644
--- a/organigrams.module
+++ b/organigrams.module
@@ -81,7 +81,7 @@ function organigrams_form_alter(&$form, FormStateInterface $form_state, $form_id
  */
 function organigrams_vocabulary_settings_form(array &$form, array $organigram_settings) {
   // Set the config path of the vocabulary fields.
-  $config_path = drupal_get_path('module', 'organigrams') . '/config/vocabulary_fields';
+  $config_path = \Drupal::service('extension.list.module')->getPath('organigrams') . '/config/vocabulary_fields';
   // Get the field config files.
   $files = \Drupal::service('file_system')->scanDirectory($config_path, '/^.*\\.yml$/i', ['key' => 'filename']);
 
@@ -173,7 +173,7 @@ function organigrams_vocabulary_form_submit(array $form, FormStateInterface $for
  */
 function organigrams_create_term_fields($vid) {
   // Set the config path to the taxonomy fields.
-  $config_path = drupal_get_path('module', 'organigrams') . '/config/taxonomy_fields';
+  $config_path = \Drupal::service('extension.list.module')->getPath('organigrams') . '/config/taxonomy_fields';
   // Get the field config files.
   $files = \Drupal::service('file_system')->scanDirectory($config_path, '/^.*\\.yml$/i', ['key' => 'filename']);
 
@@ -282,7 +282,7 @@ function organigrams_tokens($type, $tokens, array $data, array $options, Bubblea
       $organigram = $organigramsController->viewOrganigram($vocabulary);
 
       // Put the organigram as value in this token.
-      $replacements[$original] = render($organigram);
+      $replacements[$original] = \Drupal::service('renderer')->render($organigram);
     }
   }
   return $replacements;
