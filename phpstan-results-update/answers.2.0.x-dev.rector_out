modules/contrib/answers/modules/core/tests/src/Functional/AnswersTestBase.php
modules/contrib/answers/answers.module
modules/contrib/answers/modules/core/src/Plugin/Field/FieldFormatter/AnswersFormatter.php
modules/contrib/answers/modules/core/answers_core.module
modules/contrib/answers/modules/core/tests/src/Functional/QuestionCreationTest.php

2 files with changes
====================

1) modules/contrib/answers/modules/core/answers_core.module:54

    ---------- begin diff ----------
@@ @@
       $moduleHandler = \Drupal::service('module_handler');

       $date = $node->created[0]->value;
-      if ( (REQUEST_TIME - $date) < 86400) {
+      if ( (\Drupal::time()->getRequestTime() - $date) < 86400) {
         $variables['date'] = 'today';
       } else {
-        $variables['date'] = \Drupal::service('date.formatter')->formatInterval(REQUEST_TIME - $date) . 'ago';
+        $variables['date'] = \Drupal::service('date.formatter')->formatInterval(\Drupal::time()->getRequestTime() - $date) . 'ago';
       }

       $answer_count = 0;
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector


2) modules/contrib/answers/modules/core/tests/src/Functional/QuestionCreationTest.php:56

    ---------- begin diff ----------
@@ @@
    */
   public function testQuestionCreation() {
     $this->drupalGet('node/add/answers_question');
-    $this->assertNoFieldById('edit-revision', NULL, 'The revision checkbox is not present.');
+    $this->assertSession()->fieldNotExists('edit-revision');
     // Create a question node.
     $edit = [];
     $edit['title[0][value]'] = 'Woodchucks';
     $edit['body[0][value]'] = '<p>How much wood can a woodchuck chuck, if a woodchuck could chuck word.</p>';
     $edit['answers_tags[target_id]'] = 'drupal,phpunit';
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'));
+    $this->submitForm($edit, $this->t('Save'));
     // Check that the Basic page has been created.
-    $this->assertText($this->t('@post @title has been created.', [
+    $this->assertSession()->pageTextContains($this->t('@post @title has been created.', [
       '@post' => 'Question',
       '@title' => $edit['title[0][value]'],
-    ]), 'Question created.');
+    ]));
     // Verify that the creation message contains a link to a node.
     $view_link = $this->xpath('//div[@class="messages"]//a[contains(@href, :href)]', [':href' => 'node/']);
-    $this->assert(isset($view_link), 'The message area contains a link to a node');
+    $this->assertTrue(isset($view_link), 'The message area contains a link to a node');

     // Verify taxonomy tag links.
-    $this->assertLinkByHref('taxonomy/term/1');
-    $this->assertLinkByHref('taxonomy/term/2');
+    $this->assertSession()->linkByHrefExists('taxonomy/term/1');
+    $this->assertSession()->linkByHrefExists('taxonomy/term/2');

     // Check that the node exists in the database.
     $node = $this->drupalGetNodeByTitle($edit['title[0][value]']);
@@ @@
     $this->assertNotEmpty($node, 'Node found in database.');
     // Verify that pages do not show submitted information by default.
     // $this->drupalGet('node/' . $node->id());
-    $this->assertNoText($node->getOwner()->getAccountName());
-    $this->assertNoText($this->container->get('date.formatter')->format($node->getCreatedTime()));
+    $this->assertSession()->pageTextNotContains($node->getOwner()->getAccountName());
+    $this->assertSession()->pageTextNotContains($this->container->get('date.formatter')->format($node->getCreatedTime()));

     // Answer the question.
     $edit = [];
     $edit['comment_body[0][value]'] = '<p>Exactly 42 cords of wood.</p>';
     $form_id = 'comment-form--2';
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'), [], $form_id);
+    $this->submitForm($edit, $this->t('Save'), $form_id);

-    $this->assertText('1 Answer');
+    $this->assertSession()->pageTextContains('1 Answer');
     $edit = [];
     $edit['comment_body[0][value]'] = '<p>This comment is for the questions</p>';
     $form_id = 'comment-form';
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'), [], $form_id);
+    $this->submitForm($edit, $this->t('Save'), $form_id);
     $edit['comment_body[0][value]'] = '<p>This comment is for the an answer</p>';
     $form_id = 'comment-form--2';
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'), [], $form_id);
+    $this->submitForm($edit, $this->t('Save'), $form_id);

     $edit = [];
     $edit['comment_body[0][value]'] = '<p>The cords of wood are preportional to the density of the wood.</p>';
     $form_id = 'comment-form--3';
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'), [], $form_id);
-    $this->assertText('2 Answers');
+    $this->submitForm($edit, $this->t('Save'), $form_id);
+    $this->assertSession()->pageTextContains('2 Answers');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertLinkByHrefRector
 * AssertNoFieldByIdRector
 * AssertNoTextRector
 * AssertRector
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 2 files have been changed by Rector                                       

