modules/contrib/simple_megamenu/modules/simple_megamenu_example/simple_megamenu_example.module
modules/contrib/simple_megamenu/src/EventSubscriber/SimpleMegaMenuAccessCanonicalPageSubscriber.php
modules/contrib/simple_megamenu/src/TwigExtension/SimpleMegaMenuTwigExtension.php
modules/contrib/simple_megamenu/simple_mega_menu.page.inc
modules/contrib/simple_megamenu/simple_megamenu.module
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuDeleteForm.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuForm.php
modules/contrib/simple_megamenu/src/Controller/SimpleMegaMenuController.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuRevisionDeleteForm.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuRevisionRevertForm.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuRevisionRevertTranslationForm.php
modules/contrib/simple_megamenu/src/Entity/SimpleMegaMenu.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuSettingsForm.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuTypeDeleteForm.php
modules/contrib/simple_megamenu/src/Form/SimpleMegaMenuTypeForm.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuAccessControlHandler.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuHelper.php
modules/contrib/simple_megamenu/src/Entity/SimpleMegaMenuInterface.php
modules/contrib/simple_megamenu/src/Entity/SimpleMegaMenuType.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuHelperInterface.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuHtmlRouteProvider.php
modules/contrib/simple_megamenu/src/Entity/SimpleMegaMenuTypeInterface.php
modules/contrib/simple_megamenu/src/Entity/SimpleMegaMenuViewsData.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuListBuilder.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuStorage.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuStorageInterface.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuTranslationHandler.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuTypeHtmlRouteProvider.php
modules/contrib/simple_megamenu/src/SimpleMegaMenuTypeListBuilder.php
modules/contrib/simple_megamenu/src/Tests/SimpleMegaMenuTest.php

2 files with changes
====================

1) modules/contrib/simple_megamenu/src/Tests/SimpleMegaMenuTest.php:64

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->normalUser = $this->drupalCreateUser([
@@ @@
     $edit = [
       'settings[depth]' => '0',
     ];
-    $this->drupalPostForm($block_main_menu_path, $edit, 'Save block');
+    $this->drupalGet($block_main_menu_path);
+    $this->submitForm($edit, 'Save block');
   }

   /**
@@ @@
     $content_path = '/admin/content/simple_mega_menu/add/megamenu';
     // Check that the field appears in the form.
     $this->drupalGet($content_path);
-    $this->assertFieldByName('name[0][value]');
-    $this->assertFieldByName('field_image_title[0][value]');
-    $this->assertFieldByName('field_image_link[0][uri]');
-    $this->assertFieldByName('field_text[0][value]');
-    $this->assertFieldByName('field_links[0][uri]');
-    $this->assertFieldByName('field_links[0][title]');
-    $this->assertText('The name of the Simple mega menu entity.');
-    $this->assertResponse(200);
+    $this->assertSession()->fieldExists('name[0][value]');
+    $this->assertSession()->fieldExists('field_image_title[0][value]');
+    $this->assertSession()->fieldExists('field_image_link[0][uri]');
+    $this->assertSession()->fieldExists('field_text[0][value]');
+    $this->assertSession()->fieldExists('field_links[0][uri]');
+    $this->assertSession()->fieldExists('field_links[0][title]');
+    $this->assertSession()->pageTextContains('The name of the Simple mega menu entity.');
+    $this->assertSession()->statusCodeEquals(200);

     // Create a mage menu entity with some fields filled.
     $fields = [
@@ @@
     $menu_path = '/admin/structure/menu/item/';

     $this->drupalGet($menu_path . $menu_service->id() . '/edit');
-    $this->assertResponse(200);
-    $this->assertFieldByName('simple_mega_menu');
+    $this->assertSession()->statusCodeEquals(200);
+    $this->assertSession()->fieldExists('simple_mega_menu');

     $edit = [
       'simple_mega_menu' => $mega_menu->label() . ' (' . $mega_menu->id() . ')',
     ];
-    $this->drupalPostForm($menu_path . $menu_service->id() . '/edit', $edit, 'Save');
-    $this->assertText('The menu link has been saved.');
+    $this->drupalGet($menu_path . $menu_service->id() . '/edit');
+    $this->submitForm($edit, 'Save');
+    $this->assertSession()->pageTextContains('The menu link has been saved.');

     $this->drupalGet(Url::fromRoute('<front>'));
-    $this->assertText('Services main');
+    $this->assertSession()->pageTextContains('Services main');
     // Check the Mega menu is present.
-    $this->assertText('CTA text for mega menu');
-    $this->assertText('See Flocon de toile');
-    $this->assertText('Contact us');
+    $this->assertSession()->pageTextContains('CTA text for mega menu');
+    $this->assertSession()->pageTextContains('See Flocon de toile');
+    $this->assertSession()->pageTextContains('Contact us');

     // Access to the canonical page.
     $this->drupalGet('/admin/content/simple_mega_menu/' . $mega_menu->id());
-    $this->assertResponse('200');
+    $this->assertSession()->statusCodeEquals('200');

     $this->drupalLogout();
     $this->drupalLogin($this->normalUser);

     $this->drupalGet('/admin/content/simple_mega_menu/' . $mega_menu->id());
-    $this->assertResponse('404');
+    $this->assertSession()->statusCodeEquals('404');

     /* @var \Drupal\simple_megamenu\Entity\SimpleMegaMenu $mega_menu */
     $mega_menu2 = $this->createMegaMenu('megamenu', 'Services2', 'en', $this->user->id(), $fields);
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertResponseRector
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/simple_megamenu/src/EventSubscriber/SimpleMegaMenuAccessCanonicalPageSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\simple_megamenu\EventSubscriber;

+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Drupal\Core\Session\AccountInterface;
 use Drupal\simple_megamenu\Entity\SimpleMegaMenuInterface;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 use Drupal\Core\Routing\UrlGeneratorInterface;
 use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
@@ @@
   /**
    * This method is called whenever the kernel.request event is dispatched.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   The event object.
    */
-  public function onRequestCheckAccess(GetResponseEvent $event) {
+  public function onRequestCheckAccess(RequestEvent $event) {
     $request = $event->getRequest();

     // If we've got an exception, nothing to do here.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


 [OK] 2 files have been changed by Rector                                       

