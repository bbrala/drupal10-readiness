diff --git a/media_gallery.info.yml b/media_gallery.info.yml
index 3b8502a..eefd425 100644
--- a/media_gallery.info.yml
+++ b/media_gallery.info.yml
@@ -2,7 +2,7 @@ name: Media Gallery
 type: module
 description: 'A simple gallery of media.'
 package: media
-core_version_requirement: ^8 || ^9 || ^10
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:text
   - drupal:media_library (>= 8.7)
diff --git a/media_gallery.install b/media_gallery.install
index d0d7bba..197f2dc 100644
--- a/media_gallery.install
+++ b/media_gallery.install
@@ -24,7 +24,7 @@ function media_gallery_uninstall() {
  *   Config name.
  */
 function _media_gallery_update_config($config_name) {
-  $config_path = drupal_get_path('module', 'media_gallery') . '/config/install';
+  $config_path = \Drupal::service('extension.list.module')->getPath('media_gallery') . '/config/install';
   $source = new FileStorage($config_path);
   $config_storage = \Drupal::service('config.storage');
   $config_storage->write($config_name, $source->read($config_name));
diff --git a/src/Form/MediaGalleryForm.php b/src/Form/MediaGalleryForm.php
index 65f6ed5..2ee7a08 100644
--- a/src/Form/MediaGalleryForm.php
+++ b/src/Form/MediaGalleryForm.php
@@ -20,7 +20,7 @@ class MediaGalleryForm extends ContentEntityForm {
     $link = $entity->toLink($this->t('View'))->toRenderable();
 
     $message_arguments = ['%label' => $this->entity->label()];
-    $logger_arguments = $message_arguments + ['link' => render($link)];
+    $logger_arguments = $message_arguments + ['link' => \Drupal::service('renderer')->render($link)];
 
     if ($result == SAVED_NEW) {
       $this->messenger()->addStatus($this->t('New media gallery %label has been created.', $message_arguments));
