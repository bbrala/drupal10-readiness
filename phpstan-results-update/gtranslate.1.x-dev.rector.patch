diff --git a/gtranslate.info.yml b/gtranslate.info.yml
index dc538bf..4168003 100644
--- a/gtranslate.info.yml
+++ b/gtranslate.info.yml
@@ -1,7 +1,6 @@
 name: GTranslate
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 description: Uses Google power to translate your website.
 package: Multilingual
 configure: gtranslate.settings
diff --git a/src/Plugin/Block/GTranslateBlock.php b/src/Plugin/Block/GTranslateBlock.php
index c514b74..208011f 100644
--- a/src/Plugin/Block/GTranslateBlock.php
+++ b/src/Plugin/Block/GTranslateBlock.php
@@ -82,15 +82,15 @@ EOT;
             switch($gtranslate_look) {
                 case 'flags_dropdown': {
                     $block_content .= '<style>'."\n";
-                    $block_content .= "a.gtflag {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
-                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
+                    $block_content .= "a.gtflag {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
+                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
                     $block_content .= '</style>';
 
                     $i = $j = 0;
                     foreach($languages as $lang => $lang_name) {
                         if($settings->get('gtranslate_'.$lang) == 2) {
                             list($flag_x, $flag_y) = $flag_map[$lang];
-                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
+                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
                         }
 
                         if($i == 7) {
@@ -108,7 +108,7 @@ EOT;
                     foreach($languages as $lang => $lang_name) {
                         if($settings->get('gtranslate_'.$lang)) {
                             $flag_y = $flag_map_vertical[$lang];
-                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
+                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
                         }
 
                         $i++;
@@ -119,8 +119,8 @@ EOT;
 
                 case 'flags': {
                     $block_content .= '<style>'."\n";
-                    $block_content .= "a.gtflag {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
-                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
+                    $block_content .= "a.gtflag {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
+                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
                     $block_content .= '</style>';
 
                     $i = $j = 0;
@@ -128,7 +128,7 @@ EOT;
                         if($settings->get('gtranslate_'.$lang)) {
                             list($flag_x, $flag_y) = $flag_map[$lang];
 
-                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
+                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
                         }
 
                         if($i == 7) {
@@ -149,7 +149,7 @@ EOT;
                         $flag_y = $flag_map_vertical[$lang];
 
                         if($settings->get('gtranslate_'.$lang)) {
-                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
+                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
                         }
 
                         $i++;
@@ -165,14 +165,14 @@ EOT;
 
                     $block_content .= '<div class="switcher notranslate">';
                     $block_content .= '<div class="selected">';
-                    $block_content .= '<a href="#" onclick="return false;"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$languages[$current_language].'" /></span>'.$languages[$current_language].'</a>';
+                    $block_content .= '<a href="#" onclick="return false;"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$languages[$current_language].'" /></span>'.$languages[$current_language].'</a>';
                     $block_content .= '</div>';
                     $block_content .= '<div class="option">';
 
                     foreach($languages as $lang => $lang_name) {
                         list($flag_x, $flag_y) = $flag_map[$lang];
                         if($settings->get('gtranslate_'.$lang) == '2')
-                            $block_content .= '<a href="#" onclick="doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\');jQuery(this).parent().parent().find(\'div.selected a\').html(jQuery(this).html());return false;" title="'.$lang_name.'" class="nturl '.($current_language == $lang ? ' selected' : '').'"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$lang_name.'" /></span>'.$lang_name.'</a>';
+                            $block_content .= '<a href="#" onclick="doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\');jQuery(this).parent().parent().find(\'div.selected a\').html(jQuery(this).html());return false;" title="'.$lang_name.'" class="nturl '.($current_language == $lang ? ' selected' : '').'"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$lang_name.'" /></span>'.$lang_name.'</a>';
                     }
 
                     $block_content .= '</div></div>';
@@ -181,7 +181,7 @@ EOT;
                     $jquery_slider = true;
 
                     // Adding slider css
-                    $module_url = base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files';
+                    $module_url = base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files';
                     $block_content .= "<style>
                         span.gflag {font-size:16px;padding:1px 0;background-repeat:no-repeat;background-image:url($module_url/16.png);}
                         span.gflag img {border:0;margin-top:2px;}
@@ -254,8 +254,8 @@ EOT;
             switch($gtranslate_look) {
                 case 'flags_dropdown': {
                     $block_content .= '<style>'."\n";
-                    $block_content .= "a.gtflag {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
-                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
+                    $block_content .= "a.gtflag {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
+                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
                     $block_content .= '</style>';
 
                     $i = $j = 0;
@@ -263,7 +263,7 @@ EOT;
                         if($settings->get('gtranslate_'.$lang) == 2) {
                             list($flag_x, $flag_y) = $flag_map[$lang];
 
-                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
+                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
                         }
 
                         if($i == 7) {
@@ -282,7 +282,7 @@ EOT;
                         if($settings->get('gtranslate_'.$lang)) {
                             $flag_y = $flag_map_vertical[$lang];
 
-                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
+                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
                         }
 
                         $i++;
@@ -293,8 +293,8 @@ EOT;
 
                 case 'flags': {
                     $block_content .= '<style>'."\n";
-                    $block_content .= "a.gtflag {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
-                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().drupal_get_path('module', 'gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
+                    $block_content .= "a.gtflag {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size."a.png');}\n";
+                    $block_content .= "a.gtflag:hover {background-image:url('".base_path().\Drupal::service('extension.list.module')->getPath('gtranslate')."/gtranslate-files/".$gtranslate_flag_size.".png');}\n";
                     $block_content .= '</style>';
 
                     $i = $j = 0;
@@ -302,7 +302,7 @@ EOT;
                         if($settings->get('gtranslate_'.$lang)) {
                             list($flag_x, $flag_y) = $flag_map[$lang];
 
-                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
+                            $block_content .= '<a href="javascript:doGTranslate(\''.$gtranslate_main_lang.'|'.$lang.'\')" title="'.$lang_name.'" class="gtflag" style="font-size:'.$gtranslate_flag_size.'px;padding:1px 0;background-repeat:no-repeat;background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="'.$gtranslate_flag_size.'" width="'.$gtranslate_flag_size.'" style="border:0;vertical-align:top;" alt="'.$lang_name.'" /></a> ';
                         }
 
                         if($i == 7) {
@@ -323,7 +323,7 @@ EOT;
                         $flag_y = $flag_map_vertical[$lang];
 
                         if($settings->get('gtranslate_'.$lang)) {
-                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
+                            $block_content .= '<option value="'.$gtranslate_main_lang.'|'.$lang.'" style="'.($lang == $gtranslate_main_lang ? 'font-weight:bold;' : '').'background:url(\''.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/16l.png\') no-repeat scroll 0 -'.$flag_y.'px;padding-left:18px;">'.$lang_name.'</option>';
                         }
 
                         $i++;
@@ -339,7 +339,7 @@ EOT;
 
                     $block_content .= '<div class="switcher notranslate">';
                     $block_content .= '<div class="selected">';
-                    $block_content .= '<a href="#" onclick="return false;"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$languages[$current_language].'" /></span>'.$languages[$current_language].'</a>';
+                    $block_content .= '<a href="#" onclick="return false;"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$languages[$current_language].'" /></span>'.$languages[$current_language].'</a>';
                     $block_content .= '</div>';
                     $block_content .= '<div class="option">';
 
@@ -352,7 +352,7 @@ EOT;
                             $href = ($gtranslate_main_lang == $lang) ? \Drupal::request()->getRequestUri() : \Drupal::request()->getScheme() . '://' . $lang . '.' . str_replace('www.', '', \Drupal::request()->getHost() . \Drupal::request()->getRequestUri());
 
                         if($settings->get('gtranslate_'.$lang) == '2')
-                            $block_content .= '<a href="'.$href.'" title="'.$lang_name.'" class="nturl '.($current_language == $lang ? ' selected' : '').'"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$lang_name.'" /></span>'.$lang_name.'</a>';
+                            $block_content .= '<a href="'.$href.'" title="'.$lang_name.'" class="nturl '.($current_language == $lang ? ' selected' : '').'"><span class="gflag" style="background-position:-'.$flag_x.'px -'.$flag_y.'px;"><img src="'.base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files/blank.png" height="16" width="16" alt="'.$lang_name.'" /></span>'.$lang_name.'</a>';
                     }
 
                     $block_content .= '</div></div>';
@@ -361,7 +361,7 @@ EOT;
                     $jquery_slider = true;
 
                     // Adding slider css
-                    $module_url = base_path().drupal_get_path('module', 'gtranslate').'/gtranslate-files';
+                    $module_url = base_path().\Drupal::service('extension.list.module')->getPath('gtranslate').'/gtranslate-files';
                     $block_content .= "<style>
                         span.gflag {font-size:16px;padding:1px 0;background-repeat:no-repeat;background-image:url($module_url/16.png);}
                         span.gflag img {border:0;margin-top:2px;}
