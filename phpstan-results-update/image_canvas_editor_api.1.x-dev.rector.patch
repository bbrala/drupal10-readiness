diff --git a/image_canvas_editor_api.info.yml b/image_canvas_editor_api.info.yml
index 86d306b..c76d95c 100644
--- a/image_canvas_editor_api.info.yml
+++ b/image_canvas_editor_api.info.yml
@@ -1,7 +1,6 @@
 name: Image canvas editor API
 description: Exposes an API for having canvas editors for images.
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
 dependencies:
   - image
diff --git a/src/Controller/EditorController.php b/src/Controller/EditorController.php
index 0bfad95..55f203e 100644
--- a/src/Controller/EditorController.php
+++ b/src/Controller/EditorController.php
@@ -70,7 +70,7 @@ class EditorController extends ControllerBase {
       throw new NotFoundHttpException();
     }
     /** @var \Drupal\file\Entity\File $file */
-    $image_url = file_create_url($file->getFileUri());
+    $image_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
     // Append some cache bust parameter. Could be a user is editing files over
     // and over again.
     $image_url .= '?cache_buster=' . time();
@@ -136,7 +136,7 @@ class EditorController extends ControllerBase {
     image_path_flush($file->getFileUri());
     return new JsonResponse([
       'fid' => $fid,
-      'url' => file_create_url($file->getFileUri()),
+      'url' => \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()),
     ]);
   }
 
diff --git a/tests/src/FunctionalJavascript/WidgetAdminTest.php b/tests/src/FunctionalJavascript/WidgetAdminTest.php
index ccfd59f..ed19cee 100644
--- a/tests/src/FunctionalJavascript/WidgetAdminTest.php
+++ b/tests/src/FunctionalJavascript/WidgetAdminTest.php
@@ -29,7 +29,7 @@ class WidgetAdminTest extends ImageFieldTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $web_user = $this->drupalCreateUser(['bypass node access',
