modules/contrib/shorthand/shorthand.install
modules/contrib/shorthand/src/Form/ShorthandStoryRevisionRevertTranslationForm.php
modules/contrib/shorthand/src/Form/ShorthandStorySettingsForm.php
modules/contrib/shorthand/shorthand.module
modules/contrib/shorthand/src/Plugin/Field/FieldType/StoryIdFieldType.php
modules/contrib/shorthand/shorthand.page.inc
modules/contrib/shorthand/src/Controller/ShorthandStoryController.php
modules/contrib/shorthand/src/Plugin/Field/FieldWidget/PublishConfigurationSelectFieldWidget.php
modules/contrib/shorthand/src/Plugin/Field/FieldWidget/StorySelectFieldWidget.php
modules/contrib/shorthand/src/ShorthandApiInterface.php
modules/contrib/shorthand/src/ShorthandApiV2.php
modules/contrib/shorthand/src/Entity/ShorthandStory.php
modules/contrib/shorthand/src/ShorthandStoryAccessControlHandler.php
modules/contrib/shorthand/src/ShorthandStoryHtmlRouteProvider.php
modules/contrib/shorthand/src/ShorthandStoryListBuilder.php
modules/contrib/shorthand/src/ShorthandStoryStorage.php
modules/contrib/shorthand/src/ShorthandStoryStorageInterface.php
modules/contrib/shorthand/src/ShorthandStoryTranslationHandler.php
modules/contrib/shorthand/src/Entity/ShorthandStoryInterface.php
modules/contrib/shorthand/src/Entity/ShorthandStoryViewsData.php
modules/contrib/shorthand/src/Form/ShorthandStoryDeleteForm.php
modules/contrib/shorthand/src/Form/ShorthandStoryForm.php
modules/contrib/shorthand/src/Form/ShorthandStoryRevisionDeleteForm.php
modules/contrib/shorthand/src/Form/ShorthandStoryRevisionRevertForm.php

2 files with changes
====================

1) modules/contrib/shorthand/src/Entity/ShorthandStory.php:170

    ---------- begin diff ----------
@@ @@
     // tag with the new local path
     $thumb = $this->thumbnail->value;
     if(empty($thumb) || strpos($thumb, '{Shorthand Local}/') !== false){
-      $assets_path = file_create_url($this->getShorthandStoryFilesStorageUri());
+      $assets_path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getShorthandStoryFilesStorageUri());
       $thumb = str_replace('{Shorthand Local}/', $assets_path.'/assets/', $thumb);
       $this->thumbnail->value = $thumb;
     }
@@ @@
    *   storage path.
    */
   protected function fixStoryContentPaths($content, $external_assets) {
-    $absolute_assets_path = file_create_url($this->getShorthandStoryFilesStorageUri());
-    $assets_path = file_url_transform_relative($absolute_assets_path);
+    $absolute_assets_path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getShorthandStoryFilesStorageUri());
+    $assets_path = \Drupal::service('file_url_generator')->transformRelative($absolute_assets_path);
     if (!$external_assets) {
       $content = str_replace('./assets/', $assets_path . '/assets/', $content);
     }
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/shorthand/shorthand.module:32

    ---------- begin diff ----------
@@ @@
     ($story = \Drupal::routeMatch()->getParameter('shorthand_story')) &&
     ($story instanceof ShorthandStoryInterface)
   ) {
-    $files_url = file_create_url($story->getShorthandStoryFilesStorageUri());
+    $files_url = \Drupal::service('file_url_generator')->generateAbsoluteString($story->getShorthandStoryFilesStorageUri());
     $node_url = $story->toUrl()->setAbsolute()->toString();
     $html_head = $story->get('head')->value;
     if (strpos($html_head, 'amphtml') !== FALSE) {
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector


 [OK] 2 files have been changed by Rector                                       

