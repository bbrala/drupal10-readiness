diff --git a/libraries_delay_load.module b/libraries_delay_load.module
index 6f4c7a9..c891f9e 100644
--- a/libraries_delay_load.module
+++ b/libraries_delay_load.module
@@ -54,7 +54,7 @@ function libraries_delay_load_page_attachments(array &$page) {
 function libraries_delay_load_js_alter(&$javascript, AttachedAssetsInterface $assets) {
   // Only run if we have the delayer library added.
   // The library is currently only attached to pages.
-  $delayerJsFile = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+  $delayerJsFile = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
   if (isset($javascript[$delayerJsFile])) {
     \Drupal::service('libraries_delay_load.delayer.js')->processAssetArray($javascript);
   }
diff --git a/src/Asset/JsDelayer.php b/src/Asset/JsDelayer.php
index 03ef727..7cfde6b 100644
--- a/src/Asset/JsDelayer.php
+++ b/src/Asset/JsDelayer.php
@@ -110,7 +110,7 @@ class JsDelayer {
 
     if (!$strategy) {
       // Remove ourselves, as not useful on this page.
-      $delayerJsFile = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+      $delayerJsFile = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
       unset($javascript[$delayerJsFile]);
       return;
     }
@@ -148,7 +148,7 @@ class JsDelayer {
     $uri = $this->writeFile($fileContent, $cid);
 
     // Copy the js settings from libraries_delay_load.
-    $delayerJsFile = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+    $delayerJsFile = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
     $settingsFile = $javascript[$delayerJsFile];
     $settingsFile['data'] = $uri;
     $javascript['delayerSettings'] = $settingsFile;
@@ -231,7 +231,7 @@ class JsDelayer {
     $event = new StrategiesOrderAlter($strategies);
 
     // Get the event_dispatcher service and dispatch the event.
-    $this->eventDispatcher->dispatch(StrategiesOrderAlter::EVENT_NAME, $event);
+    $this->eventDispatcher->dispatch($event, StrategiesOrderAlter::EVENT_NAME);
 
     // Get updated strategies list.
     $strategies = $event->getStrategies();
@@ -306,7 +306,7 @@ class JsDelayer {
       $uri = $this->writeFile($data, $cid);
 
       // Only workaround to get the URL from an URI with public://.
-      $url = file_create_url($uri);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
 
       // Sets the group at the right position.
       $group[$position] = ['type' => 'external', 'data' => $url];
diff --git a/src/Event/StrategiesOrderAlter.php b/src/Event/StrategiesOrderAlter.php
index a5f49a6..a96c63c 100644
--- a/src/Event/StrategiesOrderAlter.php
+++ b/src/Event/StrategiesOrderAlter.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\libraries_delay_load\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Event that is fired after we retrieve the collection of available strategies.
diff --git a/tests/src/Kernel/JsDelayerStrategiesAlterTest.php b/tests/src/Kernel/JsDelayerStrategiesAlterTest.php
index f7da2d1..3a668cd 100644
--- a/tests/src/Kernel/JsDelayerStrategiesAlterTest.php
+++ b/tests/src/Kernel/JsDelayerStrategiesAlterTest.php
@@ -44,7 +44,7 @@ class JsDelayerStrategiesAlterTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig(['libraries_delay_load']);
diff --git a/tests/src/Kernel/JsDelayerTest.php b/tests/src/Kernel/JsDelayerTest.php
index e2f0444..5c49261 100644
--- a/tests/src/Kernel/JsDelayerTest.php
+++ b/tests/src/Kernel/JsDelayerTest.php
@@ -52,7 +52,7 @@ class JsDelayerTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig(['libraries_delay_load']);
@@ -62,7 +62,7 @@ class JsDelayerTest extends KernelTestBase {
     $this->jsDelayLoadStorage = $this->container->get('entity_type.manager')->getStorage('js_delay_strategy');
     $this->fileSystem = $this->container->get('file_system');
 
-    $this->jsPath = drupal_get_path('module', 'libraries_delay_load_javascript_test') . '/js/';
+    $this->jsPath = \Drupal::service('extension.list.module')->getPath('libraries_delay_load_javascript_test') . '/js/';
   }
 
   /**
@@ -100,7 +100,7 @@ class JsDelayerTest extends KernelTestBase {
     $randomJs = $this->jsPath . 'js_random.js';
     $this->assertArrayHasKey($randomJs, $resultJavascript);
     $this->assertArrayHasKey($this->jsPath . 'js6.js', $resultJavascript);
-    $selfJs = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+    $selfJs = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
     $this->assertArrayHasKey($selfJs, $resultJavascript);
 
     // Check that a file containing the delayerSettings has been added.
@@ -178,7 +178,7 @@ class JsDelayerTest extends KernelTestBase {
     $randomJs = $this->jsPath . 'js_random.js';
     $this->assertArrayHasKey($randomJs, $resultJavascript);
     $this->assertArrayHasKey($this->jsPath . 'js6.js', $resultJavascript);
-    $selfJs = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+    $selfJs = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
     $this->assertArrayHasKey($selfJs, $resultJavascript);
 
     // Check that a file containing the delayerSettings has been added.
@@ -259,7 +259,7 @@ class JsDelayerTest extends KernelTestBase {
     $this->jsDelayer->processAssetArray($resultJavascript);
 
     // Remove delayer.js, as should have been removed by the function.
-    $delayerJsFile = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+    $delayerJsFile = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
     unset($inputJavascript[$delayerJsFile]);
 
     $this->assertEquals($resultJavascript, $inputJavascript);
@@ -308,7 +308,7 @@ class JsDelayerTest extends KernelTestBase {
     $inputJavascript[$externalJs2] = ['type' => 'external', 'data' => $externalJs2];
 
     // We need to add our javascript.
-    $selfJs = drupal_get_path('module', 'libraries_delay_load') . '/js/delayer.js';
+    $selfJs = \Drupal::service('extension.list.module')->getPath('libraries_delay_load') . '/js/delayer.js';
     $inputJavascript[$selfJs] = ['type' => 'file', 'data' => $selfJs];
 
     return $inputJavascript;
