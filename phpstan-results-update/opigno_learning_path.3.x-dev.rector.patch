diff --git a/modules/opigno_user_selection/src/Controller/OpignoUserSelectionController.php b/modules/opigno_user_selection/src/Controller/OpignoUserSelectionController.php
index c739637..f2b9402 100644
--- a/modules/opigno_user_selection/src/Controller/OpignoUserSelectionController.php
+++ b/modules/opigno_user_selection/src/Controller/OpignoUserSelectionController.php
@@ -83,7 +83,7 @@ class OpignoUserSelectionController extends ControllerBase {
    * @opigno_deprecated
    */
   public function getUserAvatar($user) {
-    $default_image = file_create_url(drupal_get_path('module', 'opigno_user_selection') . '/assets/profile.svg');
+    $default_image = \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::service('extension.list.module')->getPath('opigno_user_selection') . '/assets/profile.svg');
     $image_style = ImageStyle::load('thumbnail');
     if (!($image_style instanceof ImageStyle)) {
       return $default_image;
@@ -101,7 +101,7 @@ class OpignoUserSelectionController extends ControllerBase {
    * @opigno_deprecated
    */
   public function getGroupImage($type, $group) {
-    $default_image = file_create_url(drupal_get_path('module', 'opigno_user_selection') . '/assets/' . $type . '.svg');
+    $default_image = \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::service('extension.list.module')->getPath('opigno_user_selection') . '/assets/' . $type . '.svg');
 
     $image_style = ImageStyle::load('thumbnail');
     if (!($image_style instanceof ImageStyle)) {
diff --git a/opigno_learning_path.install b/opigno_learning_path.install
index 01bb0b1..d0adddc 100644
--- a/opigno_learning_path.install
+++ b/opigno_learning_path.install
@@ -344,7 +344,7 @@ function opigno_learning_path_update_9001() {
  * Create a step lp block for aristotle theme.
  */
 function opigno_learning_path_update_9002() {
-  $config_path = drupal_get_path('module', 'opigno_learning_path') . '/config/optional';
+  $config_path = \Drupal::service('extension.list.module')->getPath('opigno_learning_path') . '/config/optional';
   /* @var Drupal\Core\Config\CachedStorage $config_storage */
   $storage = new FileStorage($config_path);
   $config_storage = \Drupal::service('config.storage');
@@ -373,7 +373,7 @@ function opigno_learning_path_update_9003() {
   }
 
   // Add taxonomy duration field.
-  $config_path = drupal_get_path('module', 'opigno_learning_path') . '/config/optional';
+  $config_path = \Drupal::service('extension.list.module')->getPath('opigno_learning_path') . '/config/optional';
   $storage = new FileStorage($config_path);
 
   $data = $storage->read('field.storage.group.field_learning_path_duration');
@@ -474,7 +474,7 @@ function _opigno_learning_path_duration_terms_create(): array {
  * Import optional configs.
  */
 function opigno_learning_path_update_9004() {
-  $config_path = drupal_get_path('module', 'opigno_learning_path') . '/config/optional';
+  $config_path = \Drupal::service('extension.list.module')->getPath('opigno_learning_path') . '/config/optional';
   $files = \Drupal::service('file_system')
     ->scanDirectory($config_path, '/\.yml$/');
 
diff --git a/opigno_learning_path.module b/opigno_learning_path.module
index 9d94efe..23c538c 100644
--- a/opigno_learning_path.module
+++ b/opigno_learning_path.module
@@ -475,7 +475,7 @@ function opigno_learning_path_preprocess_region(&$variables) {
           ],
         ],
       ])->toRenderable();
-      $variables['add_member_link'] = render($link);
+      $variables['add_member_link'] = \Drupal::service('renderer')->render($link);
     }
     else {
       $variables['add_member_link'] = [
diff --git a/src/Controller/LearningPathContentController.php b/src/Controller/LearningPathContentController.php
index 2696694..b178b65 100644
--- a/src/Controller/LearningPathContentController.php
+++ b/src/Controller/LearningPathContentController.php
@@ -80,7 +80,7 @@ class LearningPathContentController extends ControllerBase {
       '#learning_path_id' => $gid,
       '#group_type' => $group_type,
       '#view_type' => $view_type,
-      '#next_link' => isset($next_link) ? render($next_link) : NULL,
+      '#next_link' => isset($next_link) ? \Drupal::service('renderer')->render($next_link) : NULL,
       '#user_has_info_card' => $tempstore->get('hide_info_card') ? FALSE : TRUE,
       '#parent_learning_path' => $group_type == 'learning_path' ? '?learning_path=' . $gid : '',
     ];
@@ -106,7 +106,7 @@ class LearningPathContentController extends ControllerBase {
       '#base_href' => $request->getPathInfo(),
       '#learning_path_id' => $group->id(),
       '#module_context' => 'false',
-      '#next_link' => isset($next_link) ? render($next_link) : NULL,
+      '#next_link' => isset($next_link) ? \Drupal::service('renderer')->render($next_link) : NULL,
       '#user_has_info_card' => $tempstore->get('hide_info_card') ? FALSE : TRUE,
     ];
   }
diff --git a/src/Controller/LearningPathManagerController.php b/src/Controller/LearningPathManagerController.php
index 3f03cac..fbf0bad 100644
--- a/src/Controller/LearningPathManagerController.php
+++ b/src/Controller/LearningPathManagerController.php
@@ -104,7 +104,7 @@ class LearningPathManagerController extends ControllerBase {
     $item['entityId'] = $entity->id();
     $item['entityBundle'] = \Drupal::routeMatch()->getParameter('type');
     $item['title'] = $entity->get('label')->getString();
-    $item['imageUrl'] = ($file) ? file_create_url($file->getFileUri()) : '';
+    $item['imageUrl'] = ($file) ? \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()) : '';
 
     $response->addCommand(
       new SettingsCommand([
diff --git a/src/EventSubscriber/LearningPathEventSubscriber.php b/src/EventSubscriber/LearningPathEventSubscriber.php
index ef870ae..233e68c 100644
--- a/src/EventSubscriber/LearningPathEventSubscriber.php
+++ b/src/EventSubscriber/LearningPathEventSubscriber.php
@@ -2,12 +2,12 @@
 
 namespace Drupal\opigno_learning_path\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\RequestEvent;
+use Symfony\Component\HttpKernel\Event\ResponseEvent;
 use Drupal\Core\Url;
 use Drupal\opigno_learning_path\LearningPathContentTypesManager;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 use Symfony\Component\HttpFoundation\RedirectResponse;
-use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 
 /**
@@ -54,16 +54,16 @@ class LearningPathEventSubscriber implements EventSubscriberInterface {
   /**
    * Event called when a request is sent.
    */
-  public function onKernelRequest(GetResponseEvent $event) {
+  public function onKernelRequest(RequestEvent $event) {
   }
 
   /**
    * Redirect from canonical module path to module edit.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The route building event.
    */
-  public function moduleRedirect(FilterResponseEvent $event) {
+  public function moduleRedirect(ResponseEvent $event) {
     $route = \Drupal::routeMatch();
     $route_name = $route->getRouteName();
     if ($route_name == 'entity.opigno_module.canonical') {
diff --git a/src/Form/LearningPathCreateUserForm.php b/src/Form/LearningPathCreateUserForm.php
index aab5f68..771b9ca 100644
--- a/src/Form/LearningPathCreateUserForm.php
+++ b/src/Form/LearningPathCreateUserForm.php
@@ -140,7 +140,7 @@ class LearningPathCreateUserForm extends FormBase {
     $user = User::create();
     $user->enforceIsNew();
     $user->setUsername($name);
-    $user->setPassword(user_password());
+    $user->setPassword(\Drupal::service('password_generator')->generate());
     $user->setEmail($email);
     $user->set('init', $email);
     $user->set('langcode', $lang);
diff --git a/src/Form/LearningPathMembersForm.php b/src/Form/LearningPathMembersForm.php
index f33abdb..56eacea 100644
--- a/src/Form/LearningPathMembersForm.php
+++ b/src/Form/LearningPathMembersForm.php
@@ -221,7 +221,7 @@ class LearningPathMembersForm extends FormBase {
         'members_table' => !empty($members_view_renderable) ? [
           '#type' => 'html_tag',
           '#tag' => 'div',
-          '#value' => render($members_view_renderable),
+          '#value' => \Drupal::service('renderer')->render($members_view_renderable),
           '#attributes' => [
             'id' => 'class-' . $class_entity->id(),
             'class' => ['class_members', 'class_members_row'],
diff --git a/src/Progress.php b/src/Progress.php
index 881435c..63f5eca 100644
--- a/src/Progress.php
+++ b/src/Progress.php
@@ -454,7 +454,7 @@ class Progress {
    */
   public function getProgressBuildModulePage(int $group_id, int $account_id): array {
     $home_link = Link::createFromRoute(Markup::create($this->t('home') . '<i class="icon-home-2"></i>'), 'entity.group.canonical', ['group' => $group_id], ['attributes' => ['class' => ['w-100']]])->toRenderable();
-    $home_link = render($home_link);
+    $home_link = \Drupal::service('renderer')->render($home_link);
 
     $progress = $this->getProgressRound($group_id, $account_id);
 
diff --git a/src/TwigExtension/DefaultTwigExtension.php b/src/TwigExtension/DefaultTwigExtension.php
index a53c7f9..fd7668e 100644
--- a/src/TwigExtension/DefaultTwigExtension.php
+++ b/src/TwigExtension/DefaultTwigExtension.php
@@ -187,7 +187,7 @@ class DefaultTwigExtension extends AbstractExtension {
           $link = [
             'title' => $joinLabel,
             'route' => 'user.login',
-            'args' => ['destination' => render($url)->toString()],
+            'args' => ['destination' => \Drupal::service('renderer')->render($url)->toString()],
           ];
         }
       }
@@ -204,7 +204,7 @@ class DefaultTwigExtension extends AbstractExtension {
       $link = [
         'title' => t('Create an account and subscribe'),
         'route' => 'user.login',
-        'args' => ['prev_path' => render($url)->toString()],
+        'args' => ['prev_path' => \Drupal::service('renderer')->render($url)->toString()],
       ];
     }
 
@@ -212,7 +212,7 @@ class DefaultTwigExtension extends AbstractExtension {
         $url = Url::fromRoute($link['route'], $link['args'], ['attributes' => $attributes]);
         $l = Link::fromTextAndUrl($link['title'], $url)->toRenderable();
 
-        return render($l);
+        return \Drupal::service('renderer')->render($l);
       }
     }
 
@@ -344,7 +344,7 @@ class DefaultTwigExtension extends AbstractExtension {
             '#type' => 'inline_template',
             '#template' => '<div class="top-text complete"><i class="fi fi-rr-lock"></i><div>{{"Complete"|t}}<br>{{top_text}}<br>{{"before"|t}}</div></div>',
             '#context' => [
-              'top_text' => render($top_text) ?? '',
+              'top_text' => \Drupal::service('renderer')->render($top_text) ?? '',
             ],
           ];
         }
diff --git a/tests/src/Functional/LearningPathBrowserTestBase.php b/tests/src/Functional/LearningPathBrowserTestBase.php
index 92212fc..18feb04 100644
--- a/tests/src/Functional/LearningPathBrowserTestBase.php
+++ b/tests/src/Functional/LearningPathBrowserTestBase.php
@@ -49,7 +49,7 @@ abstract class LearningPathBrowserTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->entityTypeManager = $this->container->get('entity_type.manager');
     $this->accountSwitcher = $this->container->get('account_switcher');
diff --git a/tests/src/Functional/OpignoLinkConditionTest.php b/tests/src/Functional/OpignoLinkConditionTest.php
index c63823d..44517cb 100644
--- a/tests/src/Functional/OpignoLinkConditionTest.php
+++ b/tests/src/Functional/OpignoLinkConditionTest.php
@@ -17,7 +17,7 @@ class OpignoLinkConditionTest extends LearningPathBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Install dependencies.
     \Drupal::service('module_installer')->install([
diff --git a/tests/src/Functional/OpignoModuleScoreTest.php b/tests/src/Functional/OpignoModuleScoreTest.php
index 3cab634..ef3c573 100644
--- a/tests/src/Functional/OpignoModuleScoreTest.php
+++ b/tests/src/Functional/OpignoModuleScoreTest.php
@@ -14,7 +14,7 @@ class OpignoModuleScoreTest extends LearningPathBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     \Drupal::service('module_installer')->install([
       'opigno_statistics',
diff --git a/tests/src/FunctionalJavascript/LearningPathWebDriverTestBase.php b/tests/src/FunctionalJavascript/LearningPathWebDriverTestBase.php
index 0915159..9f8e705 100644
--- a/tests/src/FunctionalJavascript/LearningPathWebDriverTestBase.php
+++ b/tests/src/FunctionalJavascript/LearningPathWebDriverTestBase.php
@@ -49,7 +49,7 @@ abstract class LearningPathWebDriverTestBase extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->entityTypeManager = $this->container->get('entity_type.manager');
     $this->accountSwitcher = $this->container->get('account_switcher');
