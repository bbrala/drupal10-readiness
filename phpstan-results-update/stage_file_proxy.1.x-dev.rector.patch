diff --git a/src/EventDispatcher/AlterExcludedPathsEvent.php b/src/EventDispatcher/AlterExcludedPathsEvent.php
index 8e356f1..3c07204 100644
--- a/src/EventDispatcher/AlterExcludedPathsEvent.php
+++ b/src/EventDispatcher/AlterExcludedPathsEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\stage_file_proxy\EventDispatcher;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Class AlterExcludedPathsEvent.
diff --git a/src/EventSubscriber/ProxySubscriber.php b/src/EventSubscriber/ProxySubscriber.php
index 8be00c6..9350d73 100644
--- a/src/EventSubscriber/ProxySubscriber.php
+++ b/src/EventSubscriber/ProxySubscriber.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\stage_file_proxy\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Drupal\Component\Utility\UrlHelper;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\StreamWrapper\StreamWrapperManager;
@@ -12,7 +13,6 @@ use Psr\Log\LoggerInterface;
 use Symfony\Component\EventDispatcher\EventDispatcherInterface;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 use Symfony\Component\HttpFoundation\RequestStack;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 
 /**
@@ -80,10 +80,10 @@ class ProxySubscriber implements EventSubscriberInterface {
   /**
    * Fetch the file from it's origin.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   The event to process.
    */
-  public function checkFileOrigin(GetResponseEvent $event) {
+  public function checkFileOrigin(RequestEvent $event) {
     $config = $this->configFactory->get('stage_file_proxy.settings');
 
     // Get the origin server.
@@ -119,7 +119,7 @@ class ProxySubscriber implements EventSubscriberInterface {
     }
 
     $alter_excluded_paths_event = new AlterExcludedPathsEvent([]);
-    $this->eventDispatcher->dispatch('stage_file_proxy.alter_excluded_paths', $alter_excluded_paths_event);
+    $this->eventDispatcher->dispatch($alter_excluded_paths_event, 'stage_file_proxy.alter_excluded_paths');
     $excluded_paths = $alter_excluded_paths_event->getExcludedPaths();
     foreach ($excluded_paths as $excluded_path) {
       if (strpos($request_path, $excluded_path) !== FALSE) {
diff --git a/stage_file_proxy.info.yml b/stage_file_proxy.info.yml
index 36d5ae8..892b573 100644
--- a/stage_file_proxy.info.yml
+++ b/stage_file_proxy.info.yml
@@ -3,6 +3,6 @@ type: module
 description: 'Proxies files from production server so you do not have to transfer them manually'
 package: Development
 configure: stage_file_proxy.admin_form
-core_version_requirement: ^8.7.7 || ^9
+core_version_requirement: ^9.1 || ^10
 dependencies:
   - drupal:system (>=8.7.7)
diff --git a/tests/src/Functional/SettingsFormTest.php b/tests/src/Functional/SettingsFormTest.php
index 505aa1a..f66b0eb 100644
--- a/tests/src/Functional/SettingsFormTest.php
+++ b/tests/src/Functional/SettingsFormTest.php
@@ -29,7 +29,7 @@ class SettingsFormTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->adminUser = $this->drupalCreateUser(['administer stage_file_proxy settings']);
@@ -48,14 +48,15 @@ class SettingsFormTest extends BrowserTestBase {
       // Test with adding a slash.
       'origin' => $testOrigin . '/',
     ];
-    $this->drupalPostForm($settings_path, $edit, 'Save configuration');
+    $this->drupalGet($settings_path);
+    $this->submitForm($edit, 'Save configuration');
 
     // Test if the form was saved without error.
-    $this->assertText('Your settings have been saved.');
+    $this->assertSession()->pageTextContains('Your settings have been saved.');
 
     // Test if the stored value has the trailing slash removed.
     $newOrigin = $this->config('stage_file_proxy.settings')->get('origin');
-    $this->assertIdentical($newOrigin, $testOrigin);
+    $this->assertSame($newOrigin, $testOrigin);
   }
 
 }
diff --git a/tests/src/Kernel/FetchManagerTest.php b/tests/src/Kernel/FetchManagerTest.php
index c935015..1fdfa0d 100644
--- a/tests/src/Kernel/FetchManagerTest.php
+++ b/tests/src/Kernel/FetchManagerTest.php
@@ -62,7 +62,7 @@ class FetchManagerTest extends KernelTestBase {
    *
    * Create new fetchManager object.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->fileSystem = $this->container->get('file_system');
@@ -88,7 +88,7 @@ class FetchManagerTest extends KernelTestBase {
    * Once test method has finished running, whether it succeeded or failed,
    * tearDown() will be invoked. Unset the $fetchManager object.
    */
-  public function tearDown() {
+  public function tearDown(): void {
     unset($this->fetchManager);
   }
 
