diff --git a/cms_content_sync.install b/cms_content_sync.install
index c80e044..638ce39 100644
--- a/cms_content_sync.install
+++ b/cms_content_sync.install
@@ -50,7 +50,7 @@ function _cms_content_sync_set_module_weight()
  */
 function _cms_content_sync_update_config($configsNames)
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
 
@@ -68,7 +68,7 @@ function _cms_content_sync_update_config($configsNames)
  */
 function cms_content_sync_install()
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
 
@@ -85,7 +85,7 @@ function cms_content_sync_install()
     Drupal::moduleHandler()->alter('cms_content_sync_username', $username);
     $data = [
         'userName' => $username,
-        'userPass' => user_password(64),
+        'userPass' => \Drupal::service('password_generator')->generate(64),
     ];
 
     $user = User::create();
diff --git a/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php b/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php
index b085e0e..6f616c5 100644
--- a/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php
+++ b/modules/cms_content_sync_developer/src/EventSubscriber/VersionWarning.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\cms_content_sync_developer\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Drupal\cms_content_sync\Entity\Flow;
 use Drupal\Component\Render\FormattableMarkup;
 use Drupal\Core\Config\ConfigFactory;
@@ -11,7 +12,6 @@ use Drupal\Core\Session\AccountProxyInterface;
 use Drupal\Core\StringTranslation\TranslatableMarkup;
 use Drupal\Core\Url;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 
 /**
@@ -60,10 +60,10 @@ class VersionWarning implements EventSubscriberInterface
     /**
      * Show version warning.
      *
-     * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+     * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
      *   The Event to process
      */
-    public function showVersionWarning(GetResponseEvent $event)
+    public function showVersionWarning(RequestEvent $event)
     {
         $current_user = $this->current_user;
         if ($current_user->hasPermission('administer cms content sync')) {
diff --git a/modules/cms_content_sync_health/cms_content_sync_health.install b/modules/cms_content_sync_health/cms_content_sync_health.install
index 7edd085..96e3098 100644
--- a/modules/cms_content_sync_health/cms_content_sync_health.install
+++ b/modules/cms_content_sync_health/cms_content_sync_health.install
@@ -45,7 +45,7 @@ function cms_content_sync_health_uninstall()
  */
 function _cms_content_sync_health_update_config($configsNames)
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync_health').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync_health').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
     $config_factory = Drupal::configFactory();
diff --git a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php
index 6c97296..dfc1ba4 100644
--- a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php
+++ b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePull.php
@@ -81,7 +81,7 @@ class MigratePull extends MigrationBase
         $link = Link::fromTextAndUrl(t('here'), $url);
         $link = $link->toRenderable();
         $link['#attributes'] = ['class' => ['external']];
-        $link = render($link);
+        $link = \Drupal::service('renderer')->render($link);
 
         $form['pull_updates_behavior'] = [
             '#title' => $this->t('Pull updates behavior'),
diff --git a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php
index 13ef6e4..8c6713f 100644
--- a/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php
+++ b/modules/cms_content_sync_migrate_acquia_content_hub/src/Form/MigratePush.php
@@ -46,7 +46,7 @@ class MigratePush extends MigrationBase
         $link = Link::fromTextAndUrl(t('here'), $url);
         $link = $link->toRenderable();
         $link['#attributes'] = ['class' => ['external']];
-        $link = render($link);
+        $link = \Drupal::service('renderer')->render($link);
 
         $form['node_push_behavior'] = [
             '#title' => $this->t('Node push behavior'),
diff --git a/modules/cms_content_sync_views/cms_content_sync_views.install b/modules/cms_content_sync_views/cms_content_sync_views.install
index a5d7dee..fb8270f 100644
--- a/modules/cms_content_sync_views/cms_content_sync_views.install
+++ b/modules/cms_content_sync_views/cms_content_sync_views.install
@@ -15,7 +15,7 @@ use Drupal\Core\Config\FileStorage;
  */
 function _cms_content_sync_views_update_config($configsNames)
 {
-    $config_path = drupal_get_path('module', 'cms_content_sync_views').'/config/install';
+    $config_path = \Drupal::service('extension.list.module')->getPath('cms_content_sync_views').'/config/install';
     $source = new FileStorage($config_path);
     $config_storage = Drupal::service('config.storage');
     $config_factory = Drupal::configFactory();
diff --git a/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php b/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php
index 5c8255d..f80df5a 100644
--- a/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php
+++ b/modules/cms_content_sync_views/src/Plugin/views/field/SyncState.php
@@ -76,7 +76,7 @@ class SyncState extends FieldPluginBase
                     $link = Link::fromTextAndUrl(t('here'), $url);
                     $link = $link->toRenderable();
                     $link['#attributes'] = ['target' => '_blank'];
-                    $link_render = render($link);
+                    $link_render = \Drupal::service('renderer')->render($link);
 
                     $messages['pulled_from'] = $this->t('Pulled from @link (@pool) at @date.', [
                         '@pool' => $pool ? $pool->label() : $status->get('pool')->value,
@@ -118,7 +118,7 @@ class SyncState extends FieldPluginBase
                 $messages['pushed_on'] = $this->t('Pushed on @date to @pool - @show_usage.', [
                     '@date' => date('d.m.Y - H:i', $status->getLastPush()),
                     '@pool' => $pool ? $pool->label() : $status->get('pool')->value,
-                    '@show_usage' => render($show_usage),
+                    '@show_usage' => \Drupal::service('renderer')->render($show_usage),
                 ]);
             }
 
@@ -146,7 +146,7 @@ class SyncState extends FieldPluginBase
                 $push_changes = $push_changes->toRenderable();
 
                 $messages['update_waiting'] = $this->t('Update waiting to be pushed - @push_changes.', [
-                    '@push_changes' => render($push_changes),
+                    '@push_changes' => \Drupal::service('renderer')->render($push_changes),
                 ]);
             }
 
diff --git a/src/Controller/Embed.php b/src/Controller/Embed.php
index ed7d8e5..b09661e 100644
--- a/src/Controller/Embed.php
+++ b/src/Controller/Embed.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\cms_content_sync\Controller;
 
+use Drupal\Core\Link;
 use Drupal\cms_content_sync\Entity\Flow;
 use Drupal\cms_content_sync\Entity\Pool;
 use Drupal\cms_content_sync\Form\JsonForm;
@@ -114,7 +115,7 @@ class Embed extends ControllerBase
         if ($uuid && empty($this->params)) {
             $step = Migration::getActiveStep();
             if (Migration::STEP_DONE !== $step) {
-                $link = \Drupal::l(t('migrate now'), \Drupal\Core\Url::fromRoute('cms_content_sync_flow.migration'));
+                $link = Link::fromTextAndUrl(t('migrate now'), Url::fromRoute('cms_content_sync_flow.migration'));
                 \Drupal::messenger()->addMessage(t('You have Sync Cores from our old v1 release. Support for this Sync Core will end on December 31st, 2021. Please @link.', ['@link' => $link]), 'warning');
             }
         }
diff --git a/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php b/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php
index bac68cf..f72c463 100644
--- a/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php
+++ b/src/Plugin/cms_content_sync/field_handler/DefaultFormattedTextHandler.php
@@ -206,7 +206,7 @@ class DefaultFormattedTextHandler extends FieldHandlerBase
                 return $matches[1].'"/404"';
             }
 
-            $url = file_url_transform_relative(file_create_url($uri));
+            $url = \Drupal::service('file_url_generator')->generateString($uri);
 
             if ($anchor) {
                 $url .= '#'.$anchor;
