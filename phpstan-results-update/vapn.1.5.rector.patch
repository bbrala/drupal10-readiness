diff --git a/tests/src/Functional/VapnFunctionalTest.php b/tests/src/Functional/VapnFunctionalTest.php
index 3da0b77..86ecff1 100644
--- a/tests/src/Functional/VapnFunctionalTest.php
+++ b/tests/src/Functional/VapnFunctionalTest.php
@@ -30,7 +30,7 @@ class VapnFunctionalTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $permissions = [
       'administer site configuration',
@@ -51,7 +51,8 @@ class VapnFunctionalTest extends BrowserTestBase {
     $form = [
       'vapn_node_list[page]' => 1
     ];
-    $this->drupalPostForm($this->editForm,$form,t('Save configuration'));
+    $this->drupalGet($this->editForm);
+    $this->submitForm($form, t('Save configuration'));
     $this->drupalGet('node/add/page');
     $this->assertSession()->elementExists('css', '#edit-vapn');
   }
diff --git a/vapn.info.yml b/vapn.info.yml
index efd04e2..d25aaf0 100644
--- a/vapn.info.yml
+++ b/vapn.info.yml
@@ -1,8 +1,7 @@
 name: 'VAPN'
 type: module
 description: 'View Permissions Per Node'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.1 || ^10
 package: 'Custom'
 configure: vapn.vapn_config_form
 
diff --git a/vapn.module b/vapn.module
index 80a359f..228ccd5 100644
--- a/vapn.module
+++ b/vapn.module
@@ -1,5 +1,8 @@
 <?php
 
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\node\NodeInterface;
+use Drupal\Core\Session\AccountInterface;
 /**
  * @file
  * Contains vapn.module.
@@ -27,7 +30,7 @@ function vapn_help($route_name, RouteMatchInterface $route_match) {
 /**
  * Implements hook_form_FORM_ID_alter().
  */
-function vapn_form_node_form_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state, $form_id) {
+function vapn_form_node_form_alter(&$form, FormStateInterface $form_state, $form_id) {
   // Make sure it's a valid type.
   if (!\Drupal::service('vapn.handler')->checkIfContentTypeEnabled()) {
     // Not a VAPN form.
@@ -72,7 +75,7 @@ function vapn_form_node_form_alter(&$form, \Drupal\Core\Form\FormStateInterface
   $form['actions']['submit']['#submit'][] = 'vapn_node_form_submit';
 }
 
-function vapn_node_form_submit($form, \Drupal\Core\Form\FormStateInterface $form_state){
+function vapn_node_form_submit($form, FormStateInterface $form_state){
   $vals = $form_state->getValues();
   if(isset($vals['vapn_roles'])){
     $roles = $vals['vapn_roles'];
@@ -91,7 +94,7 @@ function vapn_node_form_submit($form, \Drupal\Core\Form\FormStateInterface $form
 /**
  * Implements hook_node_access().
  */
-function vapn_node_access(\Drupal\node\NodeInterface $node, $op, \Drupal\Core\Session\AccountInterface $account) {
+function vapn_node_access(NodeInterface $node, $op, AccountInterface $account) {
   // Only concerned with viewing.
   if ($op != 'view') {
 
