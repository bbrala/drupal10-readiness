diff --git a/src/Services/GenerateCSS.php b/src/Services/GenerateCSS.php
index 7267006..fbac888 100644
--- a/src/Services/GenerateCSS.php
+++ b/src/Services/GenerateCSS.php
@@ -109,7 +109,7 @@ class GenerateCSS {
         }
         else {
           // Add support for Drupal 9.2 and below.
-          $media_url = file_url_transform_relative(file_create_url($uri));
+          $media_url = \Drupal::service('file_url_generator')->generateString($uri);
         }
 
         if (!empty($media_url)) {
diff --git a/src/Services/GenerateJS.php b/src/Services/GenerateJS.php
index e1e58e7..c199c8e 100644
--- a/src/Services/GenerateJS.php
+++ b/src/Services/GenerateJS.php
@@ -69,7 +69,7 @@ class GenerateJS {
         }
         else {
           // Add support for Drupal 9.2 and below.
-          $media_url = file_url_transform_relative(file_create_url($uri));
+          $media_url = \Drupal::service('file_url_generator')->generateString($uri);
         }
         if (!empty($media_url) && !empty($settings['other_settings']['background_image_style']) &&
           $settings['other_settings']['background_image_style'] == 'parallax') {
