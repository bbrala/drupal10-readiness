diff --git a/menu_item_limit.info.yml b/menu_item_limit.info.yml
index cfc54ef..76f34de 100644
--- a/menu_item_limit.info.yml
+++ b/menu_item_limit.info.yml
@@ -1,7 +1,6 @@
 name: 'Menu Item Limit'
 description: 'Allows to control the amount of items per menu.'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.1 || ^10
 dependencies:
   - drupal:menu_ui
 type: module
diff --git a/menu_item_limit.module b/menu_item_limit.module
index a52bbd1..a8ed69a 100644
--- a/menu_item_limit.module
+++ b/menu_item_limit.module
@@ -1,5 +1,7 @@
 <?php
 
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\menu_ui\MenuForm;
 use Drupal\Core\Menu\MenuLinkTreeInterface;
 
 
@@ -11,7 +13,7 @@ use Drupal\Core\Menu\MenuLinkTreeInterface;
 /**
  * Implements hook_form_alter().
  */
-function menu_item_limit_form_alter(&$form, \Drupal\Core\Form\FormStateInterface &$form_state, $form_id) {
+function menu_item_limit_form_alter(&$form, FormStateInterface &$form_state, $form_id) {
   switch ($form_id) {
     case 'menu_edit_form':
       // Extend menu_edit_menu with the limit form.
@@ -36,7 +38,7 @@ function menu_item_limit_form_alter(&$form, \Drupal\Core\Form\FormStateInterface
  * @return array
  *   The prefilled form element.
  */
-function menu_item_limit_config_menu($form, \Drupal\menu_ui\MenuForm $menu_form) {
+function menu_item_limit_config_menu($form, MenuForm $menu_form) {
   $menu_name = empty($menu_form->getEntity()->id()) ? 'new' : $menu_form->getEntity()->id();
   // Try to get the current limit of the menu.
   $config = \Drupal::service('config.factory')->getEditable('menu_item_limit.settings');
@@ -58,7 +60,7 @@ function menu_item_limit_config_menu($form, \Drupal\menu_ui\MenuForm $menu_form)
  * @param array $form_state
  *   The current state of the menu edit form.
  */
-function menu_item_limit_config_menu_validate($form, \Drupal\Core\Form\FormStateInterface &$form_state) {
+function menu_item_limit_config_menu_validate($form, FormStateInterface &$form_state) {
   // Check if the entered limit is set to a value of 0 or higher.
   $limit = $form_state->getValue('menu_item_limit');
   if ((!is_numeric($limit)) || ($limit < 0)) {
@@ -74,7 +76,7 @@ function menu_item_limit_config_menu_validate($form, \Drupal\Core\Form\FormState
  * @param array $form_state
  *   The current state of the menu edit form.
  */
-function menu_item_limit_config_menu_submit($form, \Drupal\Core\Form\FormStateInterface &$form_state) {
+function menu_item_limit_config_menu_submit($form, FormStateInterface &$form_state) {
   // Set the limit for the menu.
   \Drupal::logger('menu_item_limit')->notice('mymodule submit ') ;
   $limit = $form_state->getValue('menu_item_limit');
diff --git a/tests/src/Functional/MenuItemLimitTest.php b/tests/src/Functional/MenuItemLimitTest.php
index 926b154..32dbba1 100644
--- a/tests/src/Functional/MenuItemLimitTest.php
+++ b/tests/src/Functional/MenuItemLimitTest.php
@@ -78,7 +78,7 @@ class MenuItemLimitTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create users.
@@ -124,7 +124,8 @@ class MenuItemLimitTest extends BrowserTestBase {
       'description' => '',
       'label' => $label,
     ];
-    $this->drupalPostForm('admin/structure/menu/add', $edit, $this->t('Save'));
+    $this->drupalGet('admin/structure/menu/add');
+    $this->submitForm($edit, $this->t('Save'));
     return Menu::load($menu_name);
   }
 
@@ -144,7 +145,8 @@ class MenuItemLimitTest extends BrowserTestBase {
       'menu_item_limit' => '2',
     ];
     $this->assertSession()->pageTextContains($this->t('Item Limitation'));
-    $this->drupalPostForm('admin/structure/menu/manage/' . $menu->id(), $edit, $this->t('Save'));
+    $this->drupalGet('admin/structure/menu/manage/' . $menu->id());
+    $this->submitForm($edit, $this->t('Save'));
     return Menu::load($menu->id());
 
   }
@@ -185,9 +187,9 @@ class MenuItemLimitTest extends BrowserTestBase {
     ];
 
     // Add menu link.
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'));
+    $this->submitForm($edit, $this->t('Save'));
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText('The menu link has been saved.');
+    $this->assertSession()->pageTextContains('The menu link has been saved.');
 
     $menu_links = \Drupal::entityTypeManager()->getStorage('menu_link_content')->loadByProperties(['title' => $title]);
 
@@ -237,9 +239,9 @@ class MenuItemLimitTest extends BrowserTestBase {
     ];
 
     // Add menu link.
-    $this->drupalPostForm(NULL, $edit, $this->t('Save'));
+    $this->submitForm($edit, $this->t('Save'));
     $this->assertSession()->statusCodeEquals(200);
-    $this->assertText($this->t('New link cannot be added because the menu item limit has been reached.'));
+    $this->assertSession()->pageTextContains($this->t('New link cannot be added because the menu item limit has been reached.'));
   }
 
 }
