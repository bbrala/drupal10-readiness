diff --git a/src/Controller/DataPrint.php b/src/Controller/DataPrint.php
index 2fdb46f..993a7d1 100644
--- a/src/Controller/DataPrint.php
+++ b/src/Controller/DataPrint.php
@@ -7,7 +7,7 @@
 
 namespace Drupal\yunke_help\Controller;
 
-
+use Drupal\Core\Language\LanguageManager;
 /**
  * Class DataPrint
  *
@@ -254,7 +254,7 @@ class DataPrint
    */
   public function languageList()
   {
-    $languageList = \Drupal\Core\Language\LanguageManager::getStandardLanguageList();
+    $languageList = LanguageManager::getStandardLanguageList();
     $this->showData('标准语言代码列表', $languageList, true);
   }
 
diff --git a/src/Controller/Op.php b/src/Controller/Op.php
index b2b70fe..e7440d5 100644
--- a/src/Controller/Op.php
+++ b/src/Controller/Op.php
@@ -7,7 +7,7 @@
 
 namespace Drupal\yunke_help\Controller;
 
-
+use Drupal\Component\Utility\Crypt;
 /**
  * Class Op
  *
@@ -137,7 +137,7 @@ class Op
   public function cron_key()
   {
     $key = \Drupal::state()->get('system.cron_key');
-    $cron_key = \Drupal\Component\Utility\Crypt::randomBytesBase64(55);
+    $cron_key = Crypt::randomBytesBase64(55);
     \Drupal::state()->set('system.cron_key', $cron_key);
     echo "<pre>";
     echo "Drupal版本号：" . \Drupal::VERSION . " 操作者:yunke_help模块\n";
diff --git a/src/Controller/Plugin.php b/src/Controller/Plugin.php
index ad5f63a..c805750 100644
--- a/src/Controller/Plugin.php
+++ b/src/Controller/Plugin.php
@@ -7,6 +7,8 @@
 
 namespace Drupal\yunke_help\Controller;
 
+use Drupal\Component\Plugin\Discovery\CachedDiscoveryInterface;
+use Drupal\Component\Plugin\Discovery\DiscoveryInterface;
 use Drupal\Core\Controller\ControllerBase;
 use Symfony\Component\HttpFoundation\Request;
 
@@ -67,7 +69,7 @@ class Plugin extends ControllerBase
             echo "错误:不存在该插件管理器";
             return;
         }
-        if ($pluginManager instanceof \Drupal\Component\Plugin\Discovery\CachedDiscoveryInterface) {
+        if ($pluginManager instanceof CachedDiscoveryInterface) {
             $pluginManager->clearCachedDefinitions();
             echo "插件管理器：" . $pluginManagerId . "的插件定义缓存已被清理";
         } else {
@@ -90,7 +92,7 @@ class Plugin extends ControllerBase
             echo "错误:不存在该插件管理器";
             return;
         }
-        if (!($pluginManager instanceof \Drupal\Component\Plugin\Discovery\DiscoveryInterface)) {
+        if (!($pluginManager instanceof DiscoveryInterface)) {
             echo "错误:该服务不是插件管理器";
             return;
         }
diff --git a/src/Controller/Test.php b/src/Controller/Test.php
index 273fe96..74f9b74 100644
--- a/src/Controller/Test.php
+++ b/src/Controller/Test.php
@@ -8,6 +8,7 @@
 
 namespace Drupal\yunke_help\Controller;
 
+use Drupal\Core\Url;
 use Drupal\Core\Controller\ControllerBase;
 use Drupal\Core\EventSubscriber\RenderArrayNonHtmlSubscriber;
 use Symfony\Component\HttpFoundation\Request;
@@ -117,7 +118,7 @@ class Test extends ControllerBase {
     $route_name = '<current>';
     $route_parameters = [];
     $options = [];
-    $url = \Drupal\Core\Url::fromRoute($route_name, $route_parameters, $options);
+    $url = Url::fromRoute($route_name, $route_parameters, $options);
     $variables['#test_3'] = $url;
 
     return $variables;
diff --git a/src/EventSubscriber/toolFunRegistryRequestSubscriber.php b/src/EventSubscriber/toolFunRegistryRequestSubscriber.php
index 97e584a..44c5fd4 100644
--- a/src/EventSubscriber/toolFunRegistryRequestSubscriber.php
+++ b/src/EventSubscriber/toolFunRegistryRequestSubscriber.php
@@ -2,11 +2,11 @@
 
 namespace Drupal\yunke_help\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Drupal\Core\Extension\ModuleHandlerInterface;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 use Symfony\Component\HttpKernel\KernelEvents;
 use Symfony\Component\HttpKernel\HttpKernelInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 
 /**
  * 加载云客帮助模块的工具函数库
@@ -32,10 +32,10 @@ class toolFunRegistryRequestSubscriber implements EventSubscriberInterface {
   /**
    * 加载工具函数库.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   The request event.
    */
-  public function onRequest(GetResponseEvent $event) {
+  public function onRequest(RequestEvent $event) {
     if ($event->getRequestType() === HttpKernelInterface::MASTER_REQUEST) {
         $this->moduleHandler->loadInclude('yunke_help', 'php', 'toolFunLib');
     }
diff --git a/src/Form/EntityDedicatedTableSchema.php b/src/Form/EntityDedicatedTableSchema.php
index c6363bb..4a4b4f1 100644
--- a/src/Form/EntityDedicatedTableSchema.php
+++ b/src/Form/EntityDedicatedTableSchema.php
@@ -6,6 +6,7 @@
 
 namespace Drupal\yunke_help\Form;
 
+use Drupal\Core\Entity\Sql\SqlEntityStorageInterface;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Entity\FieldableEntityInterface;
@@ -30,7 +31,7 @@ class EntityDedicatedTableSchema extends FormBase
         }
         foreach (array_keys($entityTypeOptions) as $id){
             $storage=\Drupal::entityTypeManager()->getStorage($id);
-            if(!($storage instanceof \Drupal\Core\Entity\Sql\SqlEntityStorageInterface)){
+            if(!($storage instanceof SqlEntityStorageInterface)){
                 unset($entityTypeOptions[$id]);
             }
         }
diff --git a/src/Form/EntitySchema.php b/src/Form/EntitySchema.php
index f89f6f0..5c87b77 100644
--- a/src/Form/EntitySchema.php
+++ b/src/Form/EntitySchema.php
@@ -6,6 +6,7 @@
 
 namespace Drupal\yunke_help\Form;
 
+use Drupal\Core\Entity\Sql\SqlEntityStorageInterface;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Entity\FieldableEntityInterface;
@@ -30,7 +31,7 @@ class EntitySchema extends FormBase
         }
         foreach (array_keys($entityTypeOptions) as $id){
             $storage=\Drupal::entityTypeManager()->getStorage($id);
-            if(!($storage instanceof \Drupal\Core\Entity\Sql\SqlEntityStorageInterface)){
+            if(!($storage instanceof SqlEntityStorageInterface)){
                 unset($entityTypeOptions[$id]);
             }
         }
diff --git a/src/Form/MenuTree.php b/src/Form/MenuTree.php
index 4670882..d99a166 100644
--- a/src/Form/MenuTree.php
+++ b/src/Form/MenuTree.php
@@ -6,6 +6,9 @@
 
 namespace Drupal\yunke_help\Form;
 
+use Drupal\Core\Menu\MenuTreeParameters;
+use Drupal\menu_link_content\Plugin\Menu\MenuLinkContent;
+use Drupal\Core\Menu\MenuLinkDefault;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 
@@ -71,7 +74,7 @@ class MenuTree extends FormBase
     {
         $menuName = $form_state->getValue('menuName');
         $menu_tree = \Drupal::service("menu.link_tree");
-        $parameters = new \Drupal\Core\Menu\MenuTreeParameters();
+        $parameters = new MenuTreeParameters();
         $parameters->setMinDepth(1)->setMaxDepth(9);
         $tree = $menu_tree->load($menuName, $parameters);
         $tree = $this->printMenuTree($tree);
@@ -99,9 +102,9 @@ class MenuTree extends FormBase
             $menuTree[$key]['title'] = (string)$link->getTitle();
             $menuTree[$key]['provider'] = $link->getProvider();
             $menuTree[$key]['routeName'] = $link->getRouteName();
-            if ($link instanceof \Drupal\menu_link_content\Plugin\Menu\MenuLinkContent) {
+            if ($link instanceof MenuLinkContent) {
                 $menuTree[$key]['type'] = '通过后台菜单管理界面动态定义的菜单';
-            } elseif ($link instanceof \Drupal\Core\Menu\MenuLinkDefault) {
+            } elseif ($link instanceof MenuLinkDefault) {
                 $menuTree[$key]['type'] = "通过yml文件静态定义的菜单";
             } else {
             }
diff --git a/src/Form/MultiStepForm.php b/src/Form/MultiStepForm.php
index 610570a..527daa6 100644
--- a/src/Form/MultiStepForm.php
+++ b/src/Form/MultiStepForm.php
@@ -7,6 +7,10 @@
 
 namespace Drupal\yunke_help\Form;
 
+use Drupal\Component\Utility\NestedArray;
+use Symfony\Component\HttpKernel\HttpKernelInterface;
+use Symfony\Component\HttpKernel\Event\ViewEvent;
+use Symfony\Component\HttpKernel\KernelEvents;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 
@@ -72,7 +76,7 @@ class MultiStepForm extends FormBase
       $form_state->setRebuild(); //这是多步表单的关键
       $this->data[] = $form_state->getValue($form['num']['#parents']);
       //当再次呈现表单时会默认填入上一步的输入，如果需要改变用户的输入，可使用以下语句：
-      \Drupal\Component\Utility\NestedArray::setValue($form_state->getUserInput(), $form['num']['#parents'], null);
+      NestedArray::setValue($form_state->getUserInput(), $form['num']['#parents'], null);
       //试图通过以下方式是无效的，因为后续流程会重置他们
       //$form_state->setValue($form['text']['#parents'], $input);
       //$form['text']['#value'] = $input;
@@ -90,9 +94,9 @@ class MultiStepForm extends FormBase
     //由于提交处理器不能直接返回渲染数组，下面将其转化为响应对象
     $kernel = \Drupal::service('http_kernel.basic');
     $request = \Drupal::request();
-    $type = \Symfony\Component\HttpKernel\HttpKernelInterface::MASTER_REQUEST;
-    $event = new \Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent($kernel, $request, $type, $return);
-    \Drupal::service('event_dispatcher')->dispatch(\Symfony\Component\HttpKernel\KernelEvents::VIEW, $event);
+    $type = HttpKernelInterface::MASTER_REQUEST;
+    $event = new ViewEvent($kernel, $request, $type, $return);
+    \Drupal::service('event_dispatcher')->dispatch(KernelEvents::VIEW, $event);
     $response = $event->getResponse();
     $form_state->setResponse($response);
   }
diff --git a/src/Form/PluginManager.php b/src/Form/PluginManager.php
index 97f1028..61c0350 100644
--- a/src/Form/PluginManager.php
+++ b/src/Form/PluginManager.php
@@ -6,6 +6,7 @@
 
 namespace Drupal\yunke_help\Form;
 
+use Drupal\Component\Plugin\Discovery\CachedDiscoveryInterface;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Url;
@@ -92,7 +93,7 @@ class PluginManager extends FormBase
             echo "错误";
             return;
         }
-        if ($pluginManager instanceof \Drupal\Component\Plugin\Discovery\CachedDiscoveryInterface) {
+        if ($pluginManager instanceof CachedDiscoveryInterface) {
             $pluginManager->clearCachedDefinitions();
             echo "插件管理器：" . $pluginManagerId . "的插件定义缓存已被清理";
         } else {
diff --git a/src/Form/TestForm.php b/src/Form/TestForm.php
index e4a5dd4..d092983 100644
--- a/src/Form/TestForm.php
+++ b/src/Form/TestForm.php
@@ -85,6 +85,6 @@ class TestForm extends FormBase
         $this->plugin->submitForm($form['subform'], $subformState);
 
         //提交父表单
-        drupal_set_message($this->t('父表单：电话为： @number', array('@number' => $form_state->getValue('phone_number'))));
+        $this->messenger()->addStatus($this->t('父表单：电话为： @number', array('@number' => $form_state->getValue('phone_number'))));
     }
 }
diff --git a/src/PluginForm.php b/src/PluginForm.php
index 89dc4f3..492d9b7 100644
--- a/src/PluginForm.php
+++ b/src/PluginForm.php
@@ -57,7 +57,7 @@ class PluginForm
     public function submitForm(array & $form, FormStateInterface $form_state)
     {
         $value = "子表单值：" . $form_state->getValue(['a', 'b', 'c1']);
-        drupal_set_message($value);
+        \Drupal::messenger()->addStatus($value);
     }
 
 }
diff --git a/yunke_help.info.yml b/yunke_help.info.yml
index df3757c..e16cf5e 100644
--- a/yunke_help.info.yml
+++ b/yunke_help.info.yml
@@ -6,7 +6,7 @@ configure: yunke_help.index
 dependencies:
   - toolbar
 # version: '2.3.0'
-core_version_requirement: '~8.8 || ^9'
+core_version_requirement: ~8.8 || ^9 || ^10
 # datestamp: 1591272046
 
 # Information added by Drupal.org packaging script on 2021-07-22
diff --git a/yunke_help.module b/yunke_help.module
index 2db1008..4a43347 100644
--- a/yunke_help.module
+++ b/yunke_help.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Url;
 /**
  * Implements hook_help().
  */
@@ -65,7 +66,7 @@ function yunke_help_toolbar()
         'tab'       => [
             '#type'       => 'link',
             '#title'      => "yunke help",
-            '#url'        => \Drupal\Core\Url::fromRoute('yunke_help.index'),
+            '#url'        => Url::fromRoute('yunke_help.index'),
             '#attributes' => [
                 'title'  => "云客辅助模块",
                 'class'  => ['toolbar-icon', 'toolbar-icon-yunke-help'],
@@ -87,15 +88,15 @@ function yunke_help_toolbar()
     $links = [
         'index'     => [
             'title' => "模块首页",//因为以下将采用links主题钩子，所以不是以属性方式传递
-            'url'   => \Drupal\Core\Url::fromRoute('yunke_help.index'),
+            'url'   => Url::fromRoute('yunke_help.index'),
         ],
         'info'      => [
             'title' => "基本信息",
-            'url'   => \Drupal\Core\Url::fromRoute('<front>'),
+            'url'   => Url::fromRoute('<front>'),
         ],
         'resources' => [
             'title' => "资源链接",
-            'url'   => \Drupal\Core\Url::fromRoute('<front>'),
+            'url'   => Url::fromRoute('<front>'),
         ],
     ];
     $items['yunke_help']['tray']['group1'] = [
@@ -108,7 +109,7 @@ function yunke_help_toolbar()
     $items['yunke_help']['tray']['group2'] = [ //可以根据需要给菜单分组
         '#type'  => 'link',
         '#title' => '编辑',
-        '#url'   => \Drupal\Core\Url::fromRoute('<front>'),
+        '#url'   => Url::fromRoute('<front>'),
     ];
     return $items;
 }
