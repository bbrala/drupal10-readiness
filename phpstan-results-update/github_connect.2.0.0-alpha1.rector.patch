diff --git a/github_connect.info.yml b/github_connect.info.yml
index f94bc67..d902425 100644
--- a/github_connect.info.yml
+++ b/github_connect.info.yml
@@ -1,7 +1,7 @@
 name: Github Connect
 type: module
 description: "Enables connecting Drupal accounts with Github."
-core_version_requirement: ^9.1
+core_version_requirement: ^9.3 || ^10
 php: 7.4
 configure: github_connect.settings
 
diff --git a/src/GithubConnectService.php b/src/GithubConnectService.php
index 137b012..0ac7125 100644
--- a/src/GithubConnectService.php
+++ b/src/GithubConnectService.php
@@ -177,7 +177,7 @@ class GithubConnectService {
     if (empty(user_load_by_mail($github_user['email'])) && !empty($github_user['avatar_url'])) {
       // Download profile image from Github.
       $avatar_url = file_get_contents($github_user['avatar_url']);
-      $file = file_save_data($avatar_url, 'public://' . time() . '_avatars.png', NULL);
+      $file = \Drupal::service('file.repository')->writeData($avatar_url, 'public://' . time() . '_avatars.png', NULL);
       $userinfo['user_picture'] = $file->id();
     }
 
