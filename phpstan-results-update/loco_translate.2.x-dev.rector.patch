diff --git a/inc/cron_pull.inc b/inc/cron_pull.inc
index 095c0ad..a6d1069 100644
--- a/inc/cron_pull.inc
+++ b/inc/cron_pull.inc
@@ -35,7 +35,7 @@ function loco_translate_cron_pull($langcode, array $settings) {
   }
 
   /** @var \Drupal\file\FileInterface $file */
-  $file = file_save_data($response->__toString(), $destination_directory);
+  $file = \Drupal::service('file.repository')->writeData($response->__toString(), $destination_directory);
   $path = $file_system->realPath($file->getFileUri());
   $report = $translations_import->fromFile($path, $langcode);
 
diff --git a/src/Commands/PullCommand.php b/src/Commands/PullCommand.php
index 98cc9a0..d5cdb39 100644
--- a/src/Commands/PullCommand.php
+++ b/src/Commands/PullCommand.php
@@ -95,7 +95,7 @@ class PullCommand extends DrushCommands {
     }
 
     /** @var \Drupal\file\FileInterface $file */
-    $file = file_save_data($response->__toString(), $destination_directory);
+    $file = \Drupal::service('file.repository')->writeData($response->__toString(), $destination_directory);
 
     // Be sure the file is temporary, so will be garbage collected.
     $file->setTemporary();
diff --git a/src/Form/PullForm.php b/src/Form/PullForm.php
index 365aa84..19052f0 100644
--- a/src/Form/PullForm.php
+++ b/src/Form/PullForm.php
@@ -164,7 +164,7 @@ class PullForm extends FormBase {
         }
 
         /** @var \Drupal\file\FileInterface $file */
-        $file = file_save_data($response->__toString(), $destination_directory);
+        $file = \Drupal::service('file.repository')->writeData($response->__toString(), $destination_directory);
         $form_state->setValue('files[' . $langcode . ']', $this->fileSystem->realPath($file->getFileUri()));
       }
       catch (\Exception $e) {
diff --git a/tests/src/Kernel/Cron/CronPullTest.php b/tests/src/Kernel/Cron/CronPullTest.php
index e87cf17..889ff86 100644
--- a/tests/src/Kernel/Cron/CronPullTest.php
+++ b/tests/src/Kernel/Cron/CronPullTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\loco_translate\Kernel\Cron;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\loco_translate\Loco\Pull as LocoPull;
 use Drupal\loco_translate\TranslationsImport;
@@ -21,6 +22,7 @@ use org\bovigo\vfs\vfsStream;
  */
 class CronPullTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * An editable config object for access to 'loco_translate.settings'.
    *
@@ -90,7 +92,7 @@ class CronPullTest extends KernelTestBase {
    * @dataProvider goodIntervalProvider
    */
   public function testCronPullGoodInterval($langcode, $last_run, $interval) {
-    $data = file_get_contents(drupal_get_path('module', 'loco_translate_test') . '/responses/export-200.po');
+    $data = file_get_contents(\Drupal::service('extension.list.module')->getPath('loco_translate_test') . '/responses/export-200.po');
     $response = new Response(200, [], $data);
     $response = RawResult::fromResponse($response);
 
@@ -205,7 +207,7 @@ class CronPullTest extends KernelTestBase {
       ->set('translation.path', '')
       ->save();
 
-    $data = file_get_contents(drupal_get_path('module', 'loco_translate_test') . '/responses/export-200.po');
+    $data = file_get_contents(\Drupal::service('extension.list.module')->getPath('loco_translate_test') . '/responses/export-200.po');
     $response = new Response(200, [], $data);
     $response = RawResult::fromResponse($response);
 
@@ -238,7 +240,7 @@ class CronPullTest extends KernelTestBase {
       ->set('translation.path', '')
       ->save();
 
-    $data = file_get_contents(drupal_get_path('module', 'loco_translate_test') . '/responses/export-200.po');
+    $data = file_get_contents(\Drupal::service('extension.list.module')->getPath('loco_translate_test') . '/responses/export-200.po');
     $response = new Response(200, [], $data);
     $response = RawResult::fromResponse($response);
 
diff --git a/tests/src/Kernel/Cron/CronPushTest.php b/tests/src/Kernel/Cron/CronPushTest.php
index 445acba..4ef3607 100644
--- a/tests/src/Kernel/Cron/CronPushTest.php
+++ b/tests/src/Kernel/Cron/CronPushTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\loco_translate\Kernel\Cron;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\loco_translate\Loco\Push as LocoPush;
 use Prophecy\Argument;
@@ -17,6 +18,7 @@ use Prophecy\Argument;
  */
 class CronPushTest extends KernelTestBase {
 
+  use ProphecyTrait;
   /**
    * The directory of tests .po files.
    *
@@ -61,7 +63,7 @@ class CronPushTest extends KernelTestBase {
     $this->cronConfig = \Drupal::configFactory()->getEditable('loco_translate.settings');
 
     /** @var string $translationsPath */
-    $this->translationsPath = drupal_get_path('module', 'loco_translate_test') . DIRECTORY_SEPARATOR . 'assets';
+    $this->translationsPath = \Drupal::service('extension.list.module')->getPath('loco_translate_test') . DIRECTORY_SEPARATOR . 'assets';
 
     // Save the default push configurations.
     $this->cronConfig->set('automation.push.interval', 3600)->save();
diff --git a/tests/src/Kernel/PullCommandTest.php b/tests/src/Kernel/PullCommandTest.php
index 6655990..fcca99a 100644
--- a/tests/src/Kernel/PullCommandTest.php
+++ b/tests/src/Kernel/PullCommandTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\loco_translate\Kernel;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 /**
  * @coversDefaultClass \Drupal\loco_translate\Commands\PullCommand
  *
@@ -12,6 +13,7 @@ namespace Drupal\Tests\loco_translate\Kernel;
  */
 final class PullCommandTest extends TranslationsTestsBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
@@ -83,7 +85,7 @@ final class PullCommandTest extends TranslationsTestsBase {
    */
   public function testPull(): void {
     // Mock the Loco Response export response.
-    $data = file_get_contents(drupal_get_path('module', 'loco_translate_test') . '/responses/export-200.po');
+    $data = file_get_contents(\Drupal::service('extension.list.module')->getPath('loco_translate_test') . '/responses/export-200.po');
     $response = new Response(200, [], $data);
     $response = RawResult::fromResponse($response);
     $this->locoPull->fromLocoToDrupal('en', NULL, NULL)
diff --git a/tests/src/Kernel/TranslationsImportTest.php b/tests/src/Kernel/TranslationsImportTest.php
index 6359b7e..2ab6c66 100644
--- a/tests/src/Kernel/TranslationsImportTest.php
+++ b/tests/src/Kernel/TranslationsImportTest.php
@@ -47,7 +47,7 @@ class TranslationsImportTest extends TranslationsTestsBase {
     $this->translationsImport = $this->container->get('loco_translate.translations.import');
 
     /** @var string $translationsPath */
-    $this->translationsPath = drupal_get_path('module', 'loco_translate_test') . DIRECTORY_SEPARATOR . 'assets';
+    $this->translationsPath = \Drupal::service('extension.list.module')->getPath('loco_translate_test') . DIRECTORY_SEPARATOR . 'assets';
   }
 
   /**
diff --git a/tests/src/Unit/LocoPullTest.php b/tests/src/Unit/LocoPullTest.php
index 53969a0..0a454de 100644
--- a/tests/src/Unit/LocoPullTest.php
+++ b/tests/src/Unit/LocoPullTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\loco_translate\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 use Drupal\loco_translate\Loco\Pull as locoPull;
 use Loco\Http\ApiClient;
@@ -20,6 +21,7 @@ use Prophecy\Argument;
  */
 class LocoPullTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The Loco translations pull manager.
    *
diff --git a/tests/src/Unit/LocoPushTest.php b/tests/src/Unit/LocoPushTest.php
index 7ed51c6..702a416 100644
--- a/tests/src/Unit/LocoPushTest.php
+++ b/tests/src/Unit/LocoPushTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\loco_translate\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 use Drupal\loco_translate\Loco\Push as LocoPush;
 use Loco\Http\ApiClient;
@@ -17,6 +18,7 @@ use Drupal\loco_translate\Exception\LocoApiException;
  */
 class LocoPushTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Uploader to Loco.
    *
diff --git a/tests/src/Unit/UtilityTestBase.php b/tests/src/Unit/UtilityTestBase.php
index 155c331..6a4b77a 100644
--- a/tests/src/Unit/UtilityTestBase.php
+++ b/tests/src/Unit/UtilityTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\loco_translate\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 use Drupal\loco_translate\Utility;
 use Drupal\Core\Language\LanguageManagerInterface;
@@ -13,6 +14,7 @@ use Drupal\Core\Language\Language;
  */
 abstract class UtilityTestBase extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The Utility service of Loco Translate.
    *
