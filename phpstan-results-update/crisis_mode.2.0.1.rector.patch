diff --git a/crisis_mode.info.yml b/crisis_mode.info.yml
index cad79eb..0659666 100644
--- a/crisis_mode.info.yml
+++ b/crisis_mode.info.yml
@@ -1,6 +1,6 @@
 name : 'Crisis Mode'
 description : 'Module adds a configurable sitewide block in case of a crisis or emergency.'
-core_version_requirement: ^8.8.0 || ^9.0
+core_version_requirement: ^9.3 || ^10
 type: module
 package: Other
 configure: crisis_mode.settings
diff --git a/src/Plugin/Block/CrisisModeBlock.php b/src/Plugin/Block/CrisisModeBlock.php
index 7c1fa2c..41c73f0 100644
--- a/src/Plugin/Block/CrisisModeBlock.php
+++ b/src/Plugin/Block/CrisisModeBlock.php
@@ -123,7 +123,7 @@ class CrisisModeBlock extends BlockBase implements ContainerFactoryPluginInterfa
         $fid = $content['crisis_mode_background_image'][0];
         $file = $this->entityTypeManager->getStorage('file')->load($fid);
         $path = $file->getFileUri();
-        $url = file_create_url($path);
+        $url = \Drupal::service('file_url_generator')->generateAbsoluteString($path);
         $markup = 'background-image: url(' . $url . ');';
         $content['crisis_mode_background_image'] = $markup;
       }
