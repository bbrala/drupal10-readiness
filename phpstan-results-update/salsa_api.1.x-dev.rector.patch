diff --git a/tests/src/Functional/SalsaAPISettingsFormSimpleTest.php b/tests/src/Functional/SalsaAPISettingsFormSimpleTest.php
index 6cfb2d6..6be25b7 100644
--- a/tests/src/Functional/SalsaAPISettingsFormSimpleTest.php
+++ b/tests/src/Functional/SalsaAPISettingsFormSimpleTest.php
@@ -83,8 +83,9 @@ class SalsaAPISettingsFormSimpleTest extends BrowserTestBase {
       'password' => $this->correctPassword,
       'query_timeout' => $this->queryTimeout,
     );
-    $this->drupalPostForm('admin/config/services/salsa', $edit, 'Save configuration');
-    $this->assertText('The configuration options have been saved.');
+    $this->drupalGet('admin/config/services/salsa');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->pageTextContains('The configuration options have been saved.');
   }
 
   /**
@@ -97,8 +98,9 @@ class SalsaAPISettingsFormSimpleTest extends BrowserTestBase {
       'password' => $this->wrongPassword,
       'query_timeout' => $this->queryTimeout,
     );
-    $this->drupalPostForm('admin/config/services/salsa', $edit, 'Save configuration');
-    $this->assertText('Username and/or password incorrect.');
+    $this->drupalGet('admin/config/services/salsa');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->pageTextContains('Username and/or password incorrect.');
   }
 
   /**
@@ -111,8 +113,9 @@ class SalsaAPISettingsFormSimpleTest extends BrowserTestBase {
       'password' => $this->correctPassword,
       'query_timeout' => $this->queryTimeout,
     );
-    $this->drupalPostForm('admin/config/services/salsa', $edit, 'Save configuration');
-    $this->assertText('This page is not available, please type in a correct URL or try again later.');
+    $this->drupalGet('admin/config/services/salsa');
+    $this->submitForm($edit, 'Save configuration');
+    $this->assertSession()->pageTextContains('This page is not available, please type in a correct URL or try again later.');
   }
 
 }
diff --git a/tests/src/Unit/SalsaApiTest.php b/tests/src/Unit/SalsaApiTest.php
index ea10cf5..9dde0b4 100644
--- a/tests/src/Unit/SalsaApiTest.php
+++ b/tests/src/Unit/SalsaApiTest.php
@@ -6,6 +6,8 @@
 
 namespace Drupal\Tests\salsa_api\Unit;
 
+use Drupal\salsa_api\SalsaQueryException;
+use Drupal\salsa_api\SalsaConnectionException;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\Core\Http\ClientFactory;
 use Drupal\Core\Language\Language;
@@ -65,35 +67,35 @@ class SalsaApiTest extends UnitTestCase {
   /**
    * The HTTP client.
    *
-   * @var \GuzzleHttp\Client|\PHPUnit_Framework_MockObject_MockObject
+   * @var \GuzzleHttp\Client|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $client;
 
   /**
    * The URL Generator.
    *
-   * @var \Drupal\Core\Routing\UrlGeneratorInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $urlGenerator;
 
   /**
    * The logger channel factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $loggerChannelFactory;
 
   /**
    * The language manager.
    *
-   * @var \Drupal\Core\Language\LanguageManagerInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\Core\Language\LanguageManagerInterface|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $languageManager;
 
   /**
    * The time service.
    *
-   * @var \Drupal\Component\Datetime\TimeInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var \Drupal\Component\Datetime\TimeInterface|\PHPUnit\Framework\MockObject\MockObject
    */
   protected $time;
 
@@ -144,11 +146,10 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::getCounts
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
-   *   Error message
    */
   public function testGetCountsError() {
+    $this->expectException('Drupal\salsa_api\SalsaQueryException
+  Error message');
     $salsa = $this->getSalsaAPI();
 
     $object = 'OBJECT';
@@ -318,11 +319,10 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::getObject
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
-   *   There was a problem with your submission, invalid object/key pair.
    */
   public function testGetObjectError() {
+    $this->expectException('Drupal\salsa_api\SalsaQueryException
+  There was a problem with your submission, invalid object/key pair.');
     $salsa = $this->getSalsaAPI();
 
     $body_query_error = '<?xml version="1.0"?>
@@ -445,11 +445,10 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::getReport
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
-   *   Unable to retrieve report #KEY. Does it exist?
    */
   public function testGetReportError() {
+    $this->expectException('Drupal\salsa_api\SalsaQueryException
+  Unable to retrieve report #KEY. Does it exist?');
     $salsa = $this->getSalsaAPI();
 
     $key = 'KEY';
@@ -481,11 +480,10 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::describe
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
-   *   Unable to retrieve schema for table KEY. Does it exist?
    */
   public function testDescribeError() {
+    $this->expectException('Drupal\salsa_api\SalsaQueryException
+  Unable to retrieve schema for table KEY. Does it exist?');
     $salsa = $this->getSalsaAPI();
 
     $table = 'KEY';
@@ -521,11 +519,10 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::describe2
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
-   *   Unable to retrieve schema for table KEY. Does it exist?
    */
   public function testDescribe2Error() {
+    $this->expectException('Drupal\salsa_api\SalsaQueryException
+  Unable to retrieve schema for table KEY. Does it exist?');
     $salsa = $this->getSalsaAPI();
 
     $table = 'KEY';
@@ -559,10 +556,9 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::save
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
    */
   public function testSaveError() {
+    $this->expectException(SalsaQueryException::class);
     $salsa = $this->getSalsaAPI();
 
     $object = 'OBJECT';
@@ -680,10 +676,9 @@ class SalsaApiTest extends UnitTestCase {
   /**
    * @covers ::parseXml
    * @covers ::convertObjectToArray
-   *
-   * @expectedException \Drupal\salsa_api\SalsaQueryException
    */
   public function testParseResultError() {
+    $this->expectException(SalsaQueryException::class);
     $salsa = $this->getSalsaAPI();
 
     $table = 'KEY';
@@ -696,10 +691,9 @@ class SalsaApiTest extends UnitTestCase {
 
   /**
    * @covers ::connect
-   *
-   * @expectedException \Drupal\salsa_api\SalsaConnectionException
    */
   public function testConnectError() {
+    $this->expectException(SalsaConnectionException::class);
     $salsa = $this->getSalsaAPI();
     $logger_channel = $this->createMock('\Drupal\Core\Logger\LoggerChannelInterface');
 
@@ -913,7 +907,7 @@ class SalsaApiTest extends UnitTestCase {
   /**
    * Helper function.
    *
-   * @return \PHPUnit_Framework_MockObject_MockBuilder
+   * @return \PHPUnit\Framework\MockObject\MockBuilder
    *   The config factory.
    */
   protected function getSalsaApiConfigFactory() {
