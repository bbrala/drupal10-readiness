modules/contrib/like_and_dislike/like_and_dislike.module
modules/contrib/like_and_dislike/tests/src/FunctionalJavascript/LikeAndDislikeTest.php
modules/contrib/like_and_dislike/like_and_dislike.views.inc
modules/contrib/like_and_dislike/src/Controller/VoteController.php
modules/contrib/like_and_dislike/src/Form/SettingsForm.php
modules/contrib/like_and_dislike/src/LikeDislikePermissions.php
modules/contrib/like_and_dislike/src/LikeDislikeVoteBuilder.php
modules/contrib/like_and_dislike/src/LikeDislikeVoteBuilderInterface.php
modules/contrib/like_and_dislike/src/Plugin/views/field/LikeAndDislike.php

1 file with changes
===================

1) modules/contrib/like_and_dislike/tests/src/FunctionalJavascript/LikeAndDislikeTest.php:49

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create a node type.
@@ @@
     $edit = [
       'display_modes_custom[teaser]' => TRUE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
     $this->assertSession()->pageTextContains('Your settings have been saved.');

     // Enable like an dislike for our article node type, disable for our
@@ @@
       'allow_cancel_vote' => TRUE,
       'hide_vote_widget' => FALSE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');
-    $this->assertFieldChecked('edit-enabled-types-node-enabled');
-    $this->assertFieldChecked('edit-enabled-types-comment-enabled');
-    $this->assertFieldChecked('edit-enabled-types-node-bundle-info-bundles-article');
-    $this->assertNoFieldChecked('edit-enabled-types-comment-bundle-info-bundles-comment');
-    $this->assertFieldChecked('edit-enabled-types-comment-bundle-info-bundles-test-comment-type');
-    $this->assertFieldChecked('edit-allow-cancel-vote');
-    $this->assertNoFieldChecked('edit-hide-vote-widget');
+    $this->assertSession()->checkboxChecked('edit-enabled-types-node-enabled');
+    $this->assertSession()->checkboxChecked('edit-enabled-types-comment-enabled');
+    $this->assertSession()->checkboxChecked('edit-enabled-types-node-bundle-info-bundles-article');
+    $this->assertSession()->checkboxNotChecked('edit-enabled-types-comment-bundle-info-bundles-comment');
+    $this->assertSession()->checkboxChecked('edit-enabled-types-comment-bundle-info-bundles-test-comment-type');
+    $this->assertSession()->checkboxChecked('edit-allow-cancel-vote');
+    $this->assertSession()->checkboxNotChecked('edit-hide-vote-widget');

     // Verify there are new like and dislike permissions.
     $this->drupalGet('admin/people/permissions');
@@ @@
       $user_role . '[add or remove like votes on test_comment_type of comment]' => TRUE,
       $user_role . '[add or remove dislike votes on test_comment_type of comment]' => TRUE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save permissions');
+    $this->submitForm($edit, 'Save permissions');

     // Verify that like and dislike field is showing up as a field for default
     // view mode and that it is disabled by default.
     $this->drupalGet('admin/structure/types/manage/article/display');
     $this->assertSession()->pageTextContains('Like and dislike');
-    $this->assertOptionSelected('edit-fields-like-and-dislike-region', 'hidden');
+    $this->assertTrue($this->assertSession()->optionExists('edit-fields-like-and-dislike-region', 'hidden')->hasAttribute('selected'));
     // Same for teaser view mode.
     $this->drupalGet('admin/structure/types/manage/article/display/teaser');
     $this->assertSession()->pageTextContains('Like and dislike');
-    $this->assertOptionSelected('edit-fields-like-and-dislike-region', 'hidden');
+    $this->assertTrue($this->assertSession()->optionExists('edit-fields-like-and-dislike-region', 'hidden')->hasAttribute('selected'));

     // Toggle on visibility of the extra field for default view mode.
     $this->drupalGet('admin/structure/types/manage/article/display');
@@ @@
     $this->assertTrue($this->assertSession()->optionExists('fields[like_and_dislike][region]', 'hidden')->isSelected());
     $this->submitForm([], 'Save');
     $this->assertSession()->pageTextContains('Your settings have been saved.');
-    $this->assertOptionSelected('edit-fields-like-and-dislike-region', 'hidden');
-    $this->drupalPostForm('admin/structure/types/manage/article/display/teaser', ['fields[like_and_dislike][region]' => 'content'], 'Save');
+    $this->assertTrue($this->assertSession()->optionExists('edit-fields-like-and-dislike-region', 'hidden')->hasAttribute('selected'));
+    $this->drupalGet('admin/structure/types/manage/article/display/teaser');
+    $this->submitForm(['fields[like_and_dislike][region]' => 'content'], 'Save');
     $this->assertSession()->pageTextContains('Your settings have been saved.');
     $this->assertFalse($this->assertSession()->optionExists('edit-fields-like-and-dislike-region', 'hidden')->isSelected());

@@ @@
       'enabled_types[comment][bundle_info][bundles][test_comment_type]' => TRUE,
       'allow_cancel_vote' => TRUE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');

     // Verify that like and dislike are no longer showing up for nodes.
@@ @@
       'enabled_types[node][bundle_info][bundles][article]' => TRUE,
       'allow_cancel_vote' => TRUE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');
     $this->drupalGet('admin/structure/types/manage/article/display');
     $this->getSession()->getPage()->selectFieldOption('fields[like_and_dislike][region]', 'content');
@@ @@
     $edit = [
       'hide_vote_widget' => TRUE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');
-    $this->assertFieldChecked('edit-hide-vote-widget');
+    $this->assertSession()->checkboxChecked('edit-hide-vote-widget');

     // Turn off dislike permission for node and comment.
     $this->drupalGet('admin/people/permissions');
@@ @@
       $user_role . '[add or remove dislike votes on article of node]' => FALSE,
       $user_role . '[add or remove dislike votes on test_comment_type of comment]' => FALSE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save permissions');
+    $this->submitForm($edit, 'Save permissions');

     // Verify that dislike icon is not showed in default view mode.
     $this->drupalGet('node/' . $node_id);
@@ @@
       $user_role . '[add or remove like votes on article of node]' => FALSE,
       $user_role . '[add or remove like votes on test_comment_type of comment]' => FALSE,
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save permissions');
+    $this->submitForm($edit, 'Save permissions');

     // Verify that both like and dislike icons are not showed in default view
     // mode.
@@ @@
       'enabled_types[user][enabled]' => TRUE,
       'allow_cancel_vote' => TRUE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');
-    $this->assertFieldChecked('edit-enabled-types-user-enabled');
+    $this->assertSession()->checkboxChecked('edit-enabled-types-user-enabled');

     // Make "like and dislike" component visible.
     $this->drupalGet('admin/config/people/accounts/display');
@@ @@
     $edit = [
       $user_role . '[add or remove like votes on user]' => TRUE,
     ];
-    $this->drupalPostForm('admin/people/permissions', $edit, 'Save permissions');
+    $this->drupalGet('admin/people/permissions');
+    $this->submitForm($edit, 'Save permissions');
     $this->drupalGet('user/' . $user_id);

     // Assert user is able to like, but not to dislike.
@@ @@
       'enabled_types[comment][bundle_info][bundles][test_comment_type]' => TRUE,
       'allow_cancel_vote' => TRUE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');

     // Update user with voting permissions.
@@ @@
       $user_role . '[add or remove like votes on test_comment_type of comment]' => TRUE,
       $user_role . '[add or remove dislike votes on test_comment_type of comment]' => TRUE,
     ];
-    $this->drupalPostForm('admin/people/permissions', $edit, 'Save permissions');
+    $this->drupalGet('admin/people/permissions');
+    $this->submitForm($edit, 'Save permissions');

     // Toggle on visibility of the extra fields.
     $this->drupalGet('admin/structure/types/manage/article/display');
@@ @@
       'enabled_types[comment][bundle_info][bundles][test_comment_type]' => TRUE,
       'allow_cancel_vote' => FALSE,
     ];
-    $this->drupalPostForm('admin/config/search/votingapi/like_and_dislike', $edit, t('Save configuration'));
+    $this->drupalGet('admin/config/search/votingapi/like_and_dislike');
+    $this->submitForm($edit, t('Save configuration'));
     $this->assertSession()->pageTextContains('The configuration options have been saved.');
     $this->drupalLogin($user2);
    ----------- end diff -----------

Applied rules:
 * AssertFieldCheckedRector
 * AssertNoFieldCheckedRector
 * AssertOptionSelectedRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

