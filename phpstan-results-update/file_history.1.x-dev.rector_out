modules/contrib/file_history/file_history.module
modules/contrib/file_history/src/Controller/FileHistoryController.php
modules/contrib/file_history/src/Element/FileHistory.php
modules/contrib/file_history/src/Form/ExempleForm.php

1 file with changes
===================

1) modules/contrib/file_history/src/Element/FileHistory.php:445

    ---------- begin diff ----------
@@ @@
     $scheme = \Drupal::service('stream_wrapper_manager')->getScheme($path);

     if ($scheme == 'public') {
-      $filepath = file_create_url($path);
+      $filepath = \Drupal::service('file_url_generator')->generateAbsoluteString($path);
       return Url::fromUri($filepath);
     }
     else {
@@ @@
         $file_data_for_validation = [
           'file_original_name' => $uploaded_file->getClientOriginalName(),
           'file_original_extension' => $uploaded_file->getClientOriginalExtension(),
-          'file_size' => $uploaded_file->getClientSize(),
+          'file_size' => $uploaded_file->getSize(),
           'file_path' => $uploaded_file->getRealPath(),
         ];

@@ @@
       // If validation pass, we save file.
       $destination = isset($element['#upload_location']) ? $element['#upload_location'] : NULL;

-      \Drupal::service('file_system')->prepareDirectory($destination, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY);
+      \Drupal::service('file_system')->prepareDirectory($destination, FileSystemInterface::CREATE_DIRECTORY);

       if (!$files = file_save_upload($upload_name, $element['#upload_validators'], $destination)) {
         \Drupal::logger('file')->notice('The file upload failed. %upload', ['%upload' => $upload_name]);
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * RenameMethodRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

