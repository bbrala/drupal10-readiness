modules/contrib/entity/src/Form/RevisionableContentEntityForm.php
modules/contrib/entity/entity.module
modules/contrib/entity/src/BundlePlugin/BundlePluginUninstallValidator.php
modules/contrib/entity/src/QueryAccess/ViewsQueryAlter.php
modules/contrib/entity/tests/modules/entity_module_test/entity_module_test.module
modules/contrib/entity/tests/src/Functional/RevisionRouteAccessTest.php
modules/contrib/entity/tests/modules/entity_module_test/src/Entity/EnhancedEntity.php
modules/contrib/entity/tests/modules/entity_module_test/src/Entity/EnhancedEntityWithOwner.php
modules/contrib/entity/src/Controller/EntityDuplicateController.php
modules/contrib/entity/tests/modules/entity_module_test/src/EventSubscriber/QueryAccessSubscriber.php
modules/contrib/entity/src/Controller/RevisionControllerTrait.php
modules/contrib/entity/tests/modules/entity_module_test/src/Form/EnhancedEntityForm.php
modules/contrib/entity/tests/src/Functional/BulkFormEntityListBuilderTest.php
modules/contrib/entity/entity.views.inc
modules/contrib/entity/src/Menu/DefaultEntityLocalTaskProvider.php
modules/contrib/entity/tests/src/Kernel/BundleEntityDuplicatorTest.php
modules/contrib/entity/src/Access/EntityRevisionRouteAccessChecker.php
modules/contrib/entity/src/Menu/EntityCollectionLocalActionProvider.php
modules/contrib/entity/src/Menu/EntityLocalActionProviderInterface.php
modules/contrib/entity/src/Menu/EntityLocalTaskProviderInterface.php
modules/contrib/entity/src/Plugin/Action/DeleteAction.php
modules/contrib/entity/src/Controller/RevisionOverviewController.php
modules/contrib/entity/src/Plugin/Action/Derivative/DeleteActionDeriver.php
modules/contrib/entity/src/Revision/RevisionableContentEntityBase.php
modules/contrib/entity/src/Plugin/Derivative/EntityActionsDeriver.php
modules/contrib/entity/src/Plugin/Derivative/EntityTasksDeriver.php
modules/contrib/entity/src/Routing/AdminHtmlRouteProvider.php
modules/contrib/entity/src/Plugin/views/field/EntityLinkRevision.php
modules/contrib/entity/src/BulkFormEntityListBuilder.php
modules/contrib/entity/src/Plugin/views/field/EntityLinkRevisionRevert.php
modules/contrib/entity/src/Entity/RevisionableEntityBundleInterface.php
modules/contrib/entity/src/EntityAccessControlHandler.php
modules/contrib/entity/src/QueryAccess/Condition.php
modules/contrib/entity/src/Routing/DefaultHtmlRouteProvider.php
modules/contrib/entity/tests/src/Functional/CollectionRouteAccessTest.php
modules/contrib/entity/src/QueryAccess/ConditionGroup.php
modules/contrib/entity/src/Routing/DeleteMultipleRouteProvider.php
modules/contrib/entity/src/EntityAccessControlHandlerBase.php
modules/contrib/entity/tests/src/Functional/EntityDuplicateTest.php
modules/contrib/entity/src/Routing/RevisionRouteProvider.php
modules/contrib/entity/tests/src/Kernel/BundlePluginTest.php
modules/contrib/entity/tests/src/Functional/Menu/EntityLocalActionTest.php
modules/contrib/entity/src/BundleEntityAccessControlHandler.php
modules/contrib/entity/src/EntityPermissionProvider.php
modules/contrib/entity/tests/src/Functional/Menu/EntityLocalTaskTest.php
modules/contrib/entity/src/QueryAccess/EntityQueryAlter.php
modules/contrib/entity/src/UncacheableEntityAccessControlHandler.php
modules/contrib/entity/src/BundleEntityDuplicator.php
modules/contrib/entity/src/EntityPermissionProviderBase.php
modules/contrib/entity/src/UncacheableEntityPermissionProvider.php
modules/contrib/entity/tests/modules/entity_module_bundle_plugin_examples_test/src/Plugin/BundlePluginTest/Second.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/ConditionGroupTest.php
modules/contrib/entity/src/BundleEntityDuplicatorInterface.php
modules/contrib/entity/src/BundleFieldDefinition.php
modules/contrib/entity/tests/modules/entity_module_bundle_plugin_test/src/Annotation/BundlePluginTest.php
modules/contrib/entity/tests/modules/entity_module_bundle_plugin_test/src/BundlePluginTestManager.php
modules/contrib/entity/src/BundlePlugin/BundlePluginHandler.php
modules/contrib/entity/src/EntityPermissionProviderInterface.php
modules/contrib/entity/src/EntityPermissions.php
modules/contrib/entity/tests/modules/entity_module_bundle_plugin_test/src/Entity/EntityTestBundlePlugin.php
modules/contrib/entity/tests/modules/entity_module_bundle_plugin_test/src/Plugin/BundlePluginTest/BundlePluginTestInterface.php
modules/contrib/entity/tests/modules/entity_module_bundle_plugin_test/src/Plugin/BundlePluginTest/First.php
modules/contrib/entity/src/EntityViewBuilder.php
modules/contrib/entity/src/QueryAccess/EventOnlyQueryAccessHandler.php
modules/contrib/entity/src/EntityViewsData.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/EventOnlyQueryAccessHandlerTest.php
modules/contrib/entity/src/BundlePlugin/BundlePluginHandlerInterface.php
modules/contrib/entity/src/QueryAccess/QueryAccessEvent.php
modules/contrib/entity/src/BundlePlugin/BundlePluginInstaller.php
modules/contrib/entity/src/QueryAccess/QueryAccessHandler.php
modules/contrib/entity/src/QueryAccess/QueryAccessHandlerBase.php
modules/contrib/entity/src/BundlePlugin/BundlePluginInstallerInterface.php
modules/contrib/entity/src/BundlePlugin/BundlePluginInterface.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/QueryAccessEventTest.php
modules/contrib/entity/src/QueryAccess/QueryAccessHandlerInterface.php
modules/contrib/entity/src/QueryAccess/UncacheableQueryAccessHandler.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/QueryAccessHandlerTest.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/QueryAccessTest.php
modules/contrib/entity/src/Event/EntityDuplicateEvent.php
modules/contrib/entity/src/Event/EntityEvents.php
modules/contrib/entity/src/EventSubscriber/EntityDuplicateSubscriber.php
modules/contrib/entity/src/Form/DeleteMultipleForm.php
modules/contrib/entity/src/Form/EntityDuplicateFormInterface.php
modules/contrib/entity/src/Form/EntityDuplicateFormTrait.php
modules/contrib/entity/src/Form/RevisionRevertForm.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/UncacheableQueryAccessHandlerTest.php
modules/contrib/entity/tests/src/Kernel/QueryAccess/UncacheableQueryAccessTest.php
modules/contrib/entity/tests/src/Kernel/RevisionBasicUITest.php
modules/contrib/entity/tests/src/Unit/BundleEntityAccessControlHandlerTest.php
modules/contrib/entity/tests/src/Unit/EntityAccessControlHandlerTest.php
modules/contrib/entity/tests/src/Unit/EntityPermissionProviderTest.php
modules/contrib/entity/tests/src/Unit/QueryAccess/ConditionTest.php
modules/contrib/entity/tests/src/Unit/UncacheableEntityAccessControlHandlerTest.php
modules/contrib/entity/tests/src/Unit/UncacheableEntityPermissionProviderTest.php

6 files with changes
====================

1) modules/contrib/entity/src/Form/RevisionableContentEntityForm.php:135

    ---------- begin diff ----------
@@ @@

     if ($insert) {
       $logger->notice('@type: added %info.', $context);
-      drupal_set_message($this->t('@type %info has been created.', $t_args));
+      $this->messenger()->addStatus($this->t('@type %info has been created.', $t_args));
     }
     else {
       $logger->notice('@type: updated %info.', $context);
-      drupal_set_message($this->t('@type %info has been updated.', $t_args));
+      $this->messenger()->addStatus($this->t('@type %info has been updated.', $t_args));
     }

     if ($this->entity->id()) {
@@ @@
     else {
       // In the unlikely case something went wrong on save, the entity will be
       // rebuilt and entity form redisplayed.
-      drupal_set_message($this->t('The entity could not be saved.'), 'error');
+      $this->messenger()->addError($this->t('The entity could not be saved.'));
       $form_state->setRebuild();
     }
   }
    ----------- end diff -----------

Applied rules:
 * DrupalSetMessageRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/entity/tests/src/Unit/UncacheableEntityPermissionProviderTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\ContentEntityTypeInterface;
 use Drupal\Core\Entity\EntityPublishedInterface;
 use Drupal\Core\Entity\EntityTypeBundleInfoInterface;
@@ @@
  */
 class UncacheableEntityPermissionProviderTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The entity permission provider.
    *
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/entity/tests/src/Unit/UncacheableEntityAccessControlHandlerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\Cache;
 use Drupal\Core\Cache\Context\CacheContextsManager;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
@@ @@
  */
 class UncacheableEntityAccessControlHandlerTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/entity/tests/src/Unit/EntityPermissionProviderTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\ContentEntityTypeInterface;
 use Drupal\Core\Entity\EntityPublishedInterface;
 use Drupal\Core\Entity\EntityTypeBundleInfoInterface;
@@ @@
  */
 class EntityPermissionProviderTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The entity permission provider.
    *
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/entity/tests/src/Unit/EntityAccessControlHandlerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\Cache;
 use Drupal\Core\Cache\Context\CacheContextsManager;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
@@ @@
  */
 class EntityAccessControlHandlerTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/entity/tests/src/Unit/BundleEntityAccessControlHandlerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\Context\CacheContextsManager;
 use Drupal\Core\Config\Entity\ConfigEntityInterface;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
@@ @@
  */
 class BundleEntityAccessControlHandlerTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

