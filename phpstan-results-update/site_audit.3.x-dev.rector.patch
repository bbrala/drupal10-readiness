diff --git a/src/Plugin/SiteAuditCheck/ContentFieldInstances.php b/src/Plugin/SiteAuditCheck/ContentFieldInstances.php
index bc2e3d0..e6c2ba8 100644
--- a/src/Plugin/SiteAuditCheck/ContentFieldInstances.php
+++ b/src/Plugin/SiteAuditCheck/ContentFieldInstances.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\site_audit\Plugin\SiteAuditCheck;
 
+use Drupal\Core\Entity\Query\QueryException;
 use Drupal\site_audit\Plugin\SiteAuditCheckBase;
 
 /**
@@ -114,7 +115,7 @@ class ContentFieldInstances extends SiteAuditCheckBase {
                 $field_count = $query->execute();
             }
           }
-          catch (\Drupal\Core\Entity\Query\QueryException $e) {
+          catch (QueryException $e) {
             $field_count = get_class($e) . ': ' . $e->getMessage();
           }
           $this->registry->field_instance_counts[$bundle][$entity][$field] = $field_count;
diff --git a/src/Renderer/Html.php b/src/Renderer/Html.php
index 1996019..be4a415 100644
--- a/src/Renderer/Html.php
+++ b/src/Renderer/Html.php
@@ -354,7 +354,7 @@ class Html extends Renderer {
    * Render the results as a table.
    */
   public function table($element) {
-    return render($element);
+    return \Drupal::service('renderer')->render($element);
   }
 
   /**
@@ -368,7 +368,7 @@ class Html extends Renderer {
    * Provide the bootstrap derived styles.
    */
   private function getStyles() {
-    $file = drupal_get_path('module', 'site_audit') . '/css/bootstrap-overrides.css';
+    $file = \Drupal::service('extension.list.module')->getPath('site_audit') . '/css/bootstrap-overrides.css';
     $styles = "/* $file */\n" . file_get_contents($file);
     return $styles;
   }
