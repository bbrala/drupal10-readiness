diff --git a/modules/media_directories_editor/media_directories_editor.module b/modules/media_directories_editor/media_directories_editor.module
index 123c87d..a167418 100644
--- a/modules/media_directories_editor/media_directories_editor.module
+++ b/modules/media_directories_editor/media_directories_editor.module
@@ -48,7 +48,7 @@ function media_directories_editor_form_entity_embed_dialog_alter(&$form, FormSta
     $image_style = ImageStyle::load('thumbnail');
     if ($image_style !== NULL) {
       $image_style_url = $image_style->buildUri($file->getFileUri());
-      $url = file_create_url($image_style_url);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($image_style_url);
       $image_style->createDerivative($file->getFileUri(), $image_style_url);
       // TODO it should be converted to render array.
       $form['entity']['#markup'] = '<a href="' . $entity->toUrl()->toString() . '" title="' . $entity->label() . '"><img src="' . $url . '" alt="' . $entity->label() . '" /></a>';
diff --git a/modules/media_directories_editor/src/Plugin/Field/FieldFormatter/MediaDirectoriesImageDimensionsFormatter.php b/modules/media_directories_editor/src/Plugin/Field/FieldFormatter/MediaDirectoriesImageDimensionsFormatter.php
index d8f2fcf..08bdda8 100644
--- a/modules/media_directories_editor/src/Plugin/Field/FieldFormatter/MediaDirectoriesImageDimensionsFormatter.php
+++ b/modules/media_directories_editor/src/Plugin/Field/FieldFormatter/MediaDirectoriesImageDimensionsFormatter.php
@@ -200,7 +200,7 @@ class MediaDirectoriesImageDimensionsFormatter extends ImageFormatter {
           'height' => $this->getSetting('dimensions')['image_height'],
           'class' => [],
         ],
-        '#uri' => file_create_url($file->getFileUri()),
+        '#uri' => \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()),
       ];
 
       // Add cacheability of each item in the field.
diff --git a/modules/media_directories_ui/media_directories_ui.module b/modules/media_directories_ui/media_directories_ui.module
index 9da4a72..706a25a 100644
--- a/modules/media_directories_ui/media_directories_ui.module
+++ b/modules/media_directories_ui/media_directories_ui.module
@@ -50,7 +50,7 @@ function media_directories_ui_css_alter(&$css, AttachedAssetsInterface $assets)
   $route = 'entity_browser.media_directories_overview';
 
   if (Drupal::routeMatch()->getRouteName() === $route) {
-    unset($css[drupal_get_path('module', 'entity_browser') . '/css/entity_browser.entity_browser.css']);
+    unset($css[\Drupal::service('extension.list.module')->getPath('entity_browser') . '/css/entity_browser.entity_browser.css']);
   }
 }
 
diff --git a/modules/media_directories_ui/src/Form/MediaCombinedUploadForm.php b/modules/media_directories_ui/src/Form/MediaCombinedUploadForm.php
index bbf9b9f..ef35581 100644
--- a/modules/media_directories_ui/src/Form/MediaCombinedUploadForm.php
+++ b/modules/media_directories_ui/src/Form/MediaCombinedUploadForm.php
@@ -136,7 +136,7 @@ class MediaCombinedUploadForm extends FileUploadForm {
       $field_config = $this->entityTypeManager->getStorage('field_config')->load('media.' . $media_type->id() . '.' . $source_field_name);
       $destination = $this->getUploadLocation($field_config->getSettings());
       if ($this->fileSystem->prepareDirectory($destination, FileSystemInterface::CREATE_DIRECTORY)) {
-        $source_field_value = file_move($source_field_value, $destination);
+        $source_field_value = \Drupal::service('file.repository')->move($source_field_value, $destination);
       }
 
       $media[] = $this->createMediaFromValue($media_type, $media_storage, $source_field_name, $source_field_value, $form_state);
