diff --git a/galleryslider.module b/galleryslider.module
index b3ea4ce..84696e9 100644
--- a/galleryslider.module
+++ b/galleryslider.module
@@ -59,7 +59,7 @@ function template_preprocess_galleryslider(&$variables) {
     $i = 0;
     $html .= '<ul data-title="Row">';
     foreach ($items as $item) {
-      $html .= '<li  ' . $i . '>' . render($item) . '</li>';
+      $html .= '<li  ' . $i . '>' . \Drupal::service('renderer')->render($item) . '</li>';
       $i++;
     }
   }
@@ -69,7 +69,7 @@ function template_preprocess_galleryslider(&$variables) {
     '#type' => 'markup',
     '#markup' => $html,
   ];
-  $variables['output'] = render($output);
+  $variables['output'] = \Drupal::service('renderer')->render($output);
 }
 
 /**
diff --git a/src/Plugin/Field/FieldFormatter/GallerySliderFieldFormatter.php b/src/Plugin/Field/FieldFormatter/GallerySliderFieldFormatter.php
index af3f460..e9000b1 100644
--- a/src/Plugin/Field/FieldFormatter/GallerySliderFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/GallerySliderFieldFormatter.php
@@ -204,7 +204,7 @@ class GallerySliderFieldFormatter extends EntityReferenceFormatterBase implement
     foreach ($files as $delta => $file) {
       if (isset($link_file)) {
         $image_uri = $file->getFileUri();
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
       }
       $cache_tags = Cache::mergeTags($cache_tags, $file->getCacheTags());
 
