diff --git a/tests/src/Functional/DrushTestBase.php b/tests/src/Functional/DrushTestBase.php
index ab95181..3a91676 100644
--- a/tests/src/Functional/DrushTestBase.php
+++ b/tests/src/Functional/DrushTestBase.php
@@ -50,7 +50,7 @@ abstract class DrushTestBase extends BrowserTestBase {
    * {@inheritdoc}
    */
   protected function getFixtureFilePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures/drupal7_media.php';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/drupal7_media.php';
   }
 
   /**
@@ -160,7 +160,7 @@ abstract class DrushTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function tearDown() {
+  protected function tearDown(): void {
     $this->cleanupSourceMigrateConnection($this->sourceDatabase->getKey());
     parent::tearDown();
   }
diff --git a/tests/src/Functional/DrushWithCoreMigrationsFromFileTest.php b/tests/src/Functional/DrushWithCoreMigrationsFromFileTest.php
index e0f22bd..ed2331b 100644
--- a/tests/src/Functional/DrushWithCoreMigrationsFromFileTest.php
+++ b/tests/src/Functional/DrushWithCoreMigrationsFromFileTest.php
@@ -18,7 +18,7 @@ class DrushWithCoreMigrationsFromFileTest extends DrushTestBase {
    * {@inheritdoc}
    */
   protected function getFixtureFilePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures/drupal7_nomedia.php';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/drupal7_nomedia.php';
   }
 
   /**
@@ -29,7 +29,7 @@ class DrushWithCoreMigrationsFromFileTest extends DrushTestBase {
 
     // Modify source site's file public path settings for being able to migrate
     // files. (This is required for the "d7_file" migration.)
-    $source_dir = DRUPAL_ROOT . DIRECTORY_SEPARATOR . drupal_get_path('module', 'media_migration') . '/tests/fixtures/sites/default/files';
+    $source_dir = DRUPAL_ROOT . DIRECTORY_SEPARATOR . \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/sites/default/files';
     $this->sourceDatabase->upsert('variable')
       ->key('name')
       ->fields([
diff --git a/tests/src/Functional/DrushWithCoreMigrationsFromMediaTest.php b/tests/src/Functional/DrushWithCoreMigrationsFromMediaTest.php
index 2d0119a..29f37e0 100644
--- a/tests/src/Functional/DrushWithCoreMigrationsFromMediaTest.php
+++ b/tests/src/Functional/DrushWithCoreMigrationsFromMediaTest.php
@@ -22,7 +22,7 @@ class DrushWithCoreMigrationsFromMediaTest extends DrushTestBase {
 
     // Modify source site's file public path settings for being able to migrate
     // files. (This is required for the "d7_file" migration.)
-    $source_dir = DRUPAL_ROOT . DIRECTORY_SEPARATOR . drupal_get_path('module', 'media_migration') . '/tests/fixtures/sites/default/files';
+    $source_dir = DRUPAL_ROOT . DIRECTORY_SEPARATOR . \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/sites/default/files';
     $this->sourceDatabase->upsert('variable')
       ->key('name')
       ->fields([
diff --git a/tests/src/Functional/DrushWithMigrateUpgradeFromFileTest.php b/tests/src/Functional/DrushWithMigrateUpgradeFromFileTest.php
index 920ed9b..f3dcff8 100644
--- a/tests/src/Functional/DrushWithMigrateUpgradeFromFileTest.php
+++ b/tests/src/Functional/DrushWithMigrateUpgradeFromFileTest.php
@@ -435,7 +435,7 @@ class DrushWithMigrateUpgradeFromFileTest extends DrushTestBase {
    * {@inheritdoc}
    */
   protected function getFixtureFilePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures/drupal7_nomedia.php';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/drupal7_nomedia.php';
   }
 
   /**
@@ -451,7 +451,7 @@ class DrushWithMigrateUpgradeFromFileTest extends DrushTestBase {
     // @endcode
     $this->drush('migrate:upgrade', ['--configure-only'], [
       'legacy-db-key' => $this->sourceDatabase->getKey(),
-      'legacy-root' => drupal_get_path('module', 'media_migration') . '/tests/fixtures',
+      'legacy-root' => \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures',
     ]);
 
     $migrations = $this->container->get('entity_type.manager')
diff --git a/tests/src/Functional/DrushWithMigrateUpgradeFromMediaTest.php b/tests/src/Functional/DrushWithMigrateUpgradeFromMediaTest.php
index 012a851..8308b3e 100644
--- a/tests/src/Functional/DrushWithMigrateUpgradeFromMediaTest.php
+++ b/tests/src/Functional/DrushWithMigrateUpgradeFromMediaTest.php
@@ -427,7 +427,7 @@ class DrushWithMigrateUpgradeFromMediaTest extends DrushTestBase {
     // @endcode
     $this->drush('migrate:upgrade', ['--configure-only'], [
       'legacy-db-key' => $this->sourceDatabase->getKey(),
-      'legacy-root' => drupal_get_path('module', 'media_migration') . '/tests/fixtures',
+      'legacy-root' => \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures',
     ]);
 
     $migrations = $this->container->get('entity_type.manager')
diff --git a/tests/src/Functional/MigrateEmbedMediaTokenTestBase.php b/tests/src/Functional/MigrateEmbedMediaTokenTestBase.php
index 1a2f0a2..98e00aa 100644
--- a/tests/src/Functional/MigrateEmbedMediaTokenTestBase.php
+++ b/tests/src/Functional/MigrateEmbedMediaTokenTestBase.php
@@ -70,7 +70,7 @@ abstract class MigrateEmbedMediaTokenTestBase extends MigrateMediaTestBase {
     $this->assertEmbedTokenHtmlTags($body_text, $embed_code_html_properties);
 
     // Hitting save button should not cause errors.
-    $this->drupalPostForm(NULL, NULL, 'Save');
+    $this->submitForm(NULL, 'Save');
     $assert_session->statusCodeEquals(200);
 
     // Url is node/1.
diff --git a/tests/src/Functional/MigrateMediaFromNonMediaSourceTest.php b/tests/src/Functional/MigrateMediaFromNonMediaSourceTest.php
index 6adc6b8..5362b8e 100644
--- a/tests/src/Functional/MigrateMediaFromNonMediaSourceTest.php
+++ b/tests/src/Functional/MigrateMediaFromNonMediaSourceTest.php
@@ -26,7 +26,7 @@ class MigrateMediaFromNonMediaSourceTest extends MigrateMediaTestBase {
    * {@inheritdoc}
    */
   protected function getFixtureFilePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures/drupal7_nomedia.php';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/drupal7_nomedia.php';
   }
 
   /**
diff --git a/tests/src/Functional/MigrateMediaTestBase.php b/tests/src/Functional/MigrateMediaTestBase.php
index 856cbf8..d484b13 100644
--- a/tests/src/Functional/MigrateMediaTestBase.php
+++ b/tests/src/Functional/MigrateMediaTestBase.php
@@ -68,7 +68,7 @@ abstract class MigrateMediaTestBase extends MigrateUpgradeTestBase {
    * {@inheritdoc}
    */
   protected function getSourceBasePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures';
   }
 
   /**
@@ -457,7 +457,7 @@ abstract class MigrateMediaTestBase extends MigrateUpgradeTestBase {
     $session = $this->assertSession();
     $session->responseContains("Upgrade a site by importing its files and the data from its database into a clean and empty new install of Drupal $this->destinationSiteVersion.");
 
-    $this->drupalPostForm(NULL, [], $this->t('Continue'));
+    $this->submitForm([], $this->t('Continue'));
     $session->pageTextContains('Provide credentials for the database of the Drupal site you want to upgrade.');
 
     $driver = $connection_options['driver'];
@@ -481,7 +481,7 @@ abstract class MigrateMediaTestBase extends MigrateUpgradeTestBase {
     }
     $edits = $this->translatePostValues($edit);
 
-    $this->drupalPostForm(NULL, $edits, $this->t('Review upgrade'));
+    $this->submitForm($edits, $this->t('Review upgrade'));
   }
 
   /**
@@ -501,7 +501,7 @@ abstract class MigrateMediaTestBase extends MigrateUpgradeTestBase {
     // @see https://www.drupal.org/node/3105503
     if (version_compare(\Drupal::VERSION, '8.9', '>=') && !Settings::get('migrate_node_migrate_type_classic', FALSE)) {
       $session->buttonExists($this->t('I acknowledge I may lose data. Continue anyway.'));
-      $this->drupalPostForm(NULL, [], $this->t('I acknowledge I may lose data. Continue anyway.'));
+      $this->submitForm([], $this->t('I acknowledge I may lose data. Continue anyway.'));
       $session->statusCodeEquals(200);
     }
 
@@ -513,8 +513,8 @@ abstract class MigrateMediaTestBase extends MigrateUpgradeTestBase {
     }
 
     // Perform the upgrade.
-    $this->drupalPostForm(NULL, [], $this->t('Perform upgrade'));
-    $this->assertText($this->t('Congratulations, you upgraded Drupal!'));
+    $this->submitForm([], $this->t('Perform upgrade'));
+    $this->assertSession()->pageTextContains($this->t('Congratulations, you upgraded Drupal!'));
 
     // Have to reset all the statics after migration to ensure entities are
     // loadable.
diff --git a/tests/src/Kernel/Migrate/MediaMigrationPlainTestBase.php b/tests/src/Kernel/Migrate/MediaMigrationPlainTestBase.php
index b3455ed..bfb589b 100644
--- a/tests/src/Kernel/Migrate/MediaMigrationPlainTestBase.php
+++ b/tests/src/Kernel/Migrate/MediaMigrationPlainTestBase.php
@@ -43,7 +43,7 @@ abstract class MediaMigrationPlainTestBase extends MediaMigrationTestBase {
    * {@inheritdoc}
    */
   protected function getFixtureFilePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures/drupal7_nomedia.php';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/drupal7_nomedia.php';
   }
 
   /**
@@ -55,7 +55,7 @@ abstract class MediaMigrationPlainTestBase extends MediaMigrationTestBase {
     // properly migrate the public files.
     $fs_fixture_path = implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
-      drupal_get_path('module', 'media_migration'),
+      \Drupal::service('extension.list.module')->getPath('media_migration'),
       'tests',
       'fixtures',
     ]);
diff --git a/tests/src/Kernel/Migrate/MediaMigrationTestBase.php b/tests/src/Kernel/Migrate/MediaMigrationTestBase.php
index a56f95b..577c7e5 100644
--- a/tests/src/Kernel/Migrate/MediaMigrationTestBase.php
+++ b/tests/src/Kernel/Migrate/MediaMigrationTestBase.php
@@ -136,7 +136,7 @@ abstract class MediaMigrationTestBase extends MigrateDrupalTestBase {
     // properly migrate the public files.
     $fs_fixture_path = implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
-      drupal_get_path('module', 'media_migration'),
+      \Drupal::service('extension.list.module')->getPath('media_migration'),
       'tests',
       'fixtures',
     ]);
diff --git a/tests/src/Kernel/OembedMigrationTest.php b/tests/src/Kernel/OembedMigrationTest.php
index e233836..78982fc 100644
--- a/tests/src/Kernel/OembedMigrationTest.php
+++ b/tests/src/Kernel/OembedMigrationTest.php
@@ -42,7 +42,7 @@ class OembedMigrationTest extends MigrateDrupal7TestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installSchema('media_migration', ['media_migration_media_entity_uuid_prophecy']);
diff --git a/tests/src/Kernel/Plugin/migrate/source/d7/FileEntityItemTest.php b/tests/src/Kernel/Plugin/migrate/source/d7/FileEntityItemTest.php
index dd433a7..d1dc0eb 100644
--- a/tests/src/Kernel/Plugin/migrate/source/d7/FileEntityItemTest.php
+++ b/tests/src/Kernel/Plugin/migrate/source/d7/FileEntityItemTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\media_migration\Kernel\Plugin\migrate\source\d7;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\media_migration\FileEntityDealerManagerInterface;
 use Drupal\Tests\media_migration\Kernel\Plugin\migrate\source\DummyMediaDealerPlugin;
 use Drupal\Tests\migmag\Kernel\MigMagNativeMigrateSqlTestBase;
@@ -15,6 +16,7 @@ use Prophecy\Argument;
  */
 class FileEntityItemTest extends MigMagNativeMigrateSqlTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Kernel/VideoEmbedFieldTest.php b/tests/src/Kernel/VideoEmbedFieldTest.php
index 194e92c..e6a2f96 100644
--- a/tests/src/Kernel/VideoEmbedFieldTest.php
+++ b/tests/src/Kernel/VideoEmbedFieldTest.php
@@ -33,7 +33,7 @@ class VideoEmbedFieldTest extends MigrateDrupal7TestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->createMediaType('oembed:video', ['id' => 'remote_video']);
     $this->installEntitySchema('media');
diff --git a/tests/src/Kernel/YoutubeFieldMigrationTest.php b/tests/src/Kernel/YoutubeFieldMigrationTest.php
index 9e0fd48..d6260ab 100644
--- a/tests/src/Kernel/YoutubeFieldMigrationTest.php
+++ b/tests/src/Kernel/YoutubeFieldMigrationTest.php
@@ -38,7 +38,7 @@ class YoutubeFieldMigrationTest extends MigrateDrupal7TestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->createMediaType('oembed:video', ['id' => 'remote_video']);
     $this->installEntitySchema('media');
diff --git a/tests/src/Traits/MediaMigrationTestTrait.php b/tests/src/Traits/MediaMigrationTestTrait.php
index d75d233..3901d36 100644
--- a/tests/src/Traits/MediaMigrationTestTrait.php
+++ b/tests/src/Traits/MediaMigrationTestTrait.php
@@ -22,7 +22,7 @@ trait MediaMigrationTestTrait {
    *   Path to the database fixture file.
    */
   protected function getFixtureFilePath() {
-    return drupal_get_path('module', 'media_migration') . '/tests/fixtures/drupal7_media.php';
+    return \Drupal::service('extension.list.module')->getPath('media_migration') . '/tests/fixtures/drupal7_media.php';
   }
 
   /**
diff --git a/tests/src/Unit/Plugin/migrate/process/MediaWysiwygFilterTest.php b/tests/src/Unit/Plugin/migrate/process/MediaWysiwygFilterTest.php
index f77cf70..19b5b59 100644
--- a/tests/src/Unit/Plugin/migrate/process/MediaWysiwygFilterTest.php
+++ b/tests/src/Unit/Plugin/migrate/process/MediaWysiwygFilterTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\media_migration\Unit\Plugin\migrate\process;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Site\Settings;
 use Drupal\media_migration\MediaMigration;
 use Drupal\media_migration\Plugin\migrate\process\MediaWysiwygFilter;
@@ -15,6 +16,7 @@ use Drupal\migrate\Plugin\MigrationPluginManagerInterface;
  */
 class MediaWysiwygFilterTest extends ProcessTestBase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Unit/Plugin/migrate/process/ProcessTestBase.php b/tests/src/Unit/Plugin/migrate/process/ProcessTestBase.php
index d66ac7a..db6b2c0 100644
--- a/tests/src/Unit/Plugin/migrate/process/ProcessTestBase.php
+++ b/tests/src/Unit/Plugin/migrate/process/ProcessTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\media_migration\Unit\Plugin\migrate\process;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Logger\LoggerChannelInterface;
@@ -17,6 +18,7 @@ use Drupal\Tests\migrate\Unit\process\MigrateProcessTestCase;
  */
 abstract class ProcessTestBase extends MigrateProcessTestCase {
 
+  use ProphecyTrait;
   /**
    * {@inheritdoc}
    */
