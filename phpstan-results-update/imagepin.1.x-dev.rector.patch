diff --git a/imagepin.info.yml b/imagepin.info.yml
index 9be8531..7ed3d82 100755
--- a/imagepin.info.yml
+++ b/imagepin.info.yml
@@ -1,8 +1,7 @@
 type: module
 name: Imagepin
 description: "Enables users to pin any widget on content images."
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Media
 dependencies:
   - drupal:image
diff --git a/src/ImagepinRender.php b/src/ImagepinRender.php
index 7826cc2..3b418b5 100644
--- a/src/ImagepinRender.php
+++ b/src/ImagepinRender.php
@@ -46,7 +46,7 @@ class ImagepinRender implements TrustedCallbackInterface {
    * @see imagepin_attach()
    */
   public static function postRender($markup, $element) {
-    $widgets_html = render($element['#imagepin_widgets']);
+    $widgets_html = \Drupal::service('renderer')->render($element['#imagepin_widgets']);
     return $markup . $widgets_html;
   }
 
