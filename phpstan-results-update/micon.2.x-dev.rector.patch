diff --git a/src/Entity/Micon.php b/src/Entity/Micon.php
index 7f18a43..d10aa3b 100644
--- a/src/Entity/Micon.php
+++ b/src/Entity/Micon.php
@@ -165,7 +165,7 @@ class Micon extends ConfigEntityBase implements MiconInterface {
 
         $icon['tags'] = implode(",", $icon['icon']['tags']);
         $icon['prefix'] = $this->getPrefix();
-        $icon['directory'] = file_create_url($this->getDirectory());
+        $icon['directory'] = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getDirectory());
         $icon['package_id'] = $this->id();
         $icon['package_label'] = $this->label();
         $micon_icon = new MiconIcon($this->type(), $icon);
diff --git a/src/Plugin/Field/FieldFormatter/FileMiconFormatter.php b/src/Plugin/Field/FieldFormatter/FileMiconFormatter.php
index 1811cf4..5c2e818 100644
--- a/src/Plugin/Field/FieldFormatter/FileMiconFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/FileMiconFormatter.php
@@ -117,7 +117,7 @@ class FileMiconFormatter extends FileFormatterBase {
 
     foreach ($this->getEntitiesToView($items, $langcode) as $delta => $file) {
       $item = $file->_referringItem;
-      $url = file_create_url($file->getFileUri());
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       $options = [];
       if ($this->getSetting('target')) {
         $options['attributes']['target'] = '_blank';
