diff --git a/copysafe_video_protection.info.yml b/copysafe_video_protection.info.yml
index 7625d90..17fada5 100644
--- a/copysafe_video_protection.info.yml
+++ b/copysafe_video_protection.info.yml
@@ -2,8 +2,7 @@ name: Copysafe Video Protection
 type: module
 description: 'CopySafe Video'
 package: CopySafe Video
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: copysafe_video_protection.admin_config_system
 
 # Information added by Drupal.org packaging script on 2020-02-19
diff --git a/src/Form/CopySafeVideoConfig.php b/src/Form/CopySafeVideoConfig.php
index 8c6cd01..dd09ec2 100644
--- a/src/Form/CopySafeVideoConfig.php
+++ b/src/Form/CopySafeVideoConfig.php
@@ -92,7 +92,9 @@ class CopySafeVideoConfig extends ConfigFormBase {
       '#description'       => $this->t("Only .class files can be uploaded here."),
     ];
 
-    $result = db_query("SELECT * FROM {file_managed}")->fetchAll();
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // You will need to use `\Drupal\core\Database\Database::getConnection()` if you do not yet have access to the container here.
+    $result = \Drupal::database()->query("SELECT * FROM {file_managed}")->fetchAll();
 
     $header = [];
     $header[] = ['data' => 'File', 'field' => 'filename'];
diff --git a/src/Plugin/Filter/FilterCopySafeVideo.php b/src/Plugin/Filter/FilterCopySafeVideo.php
index 7539b6f..bdb4db1 100644
--- a/src/Plugin/Filter/FilterCopySafeVideo.php
+++ b/src/Plugin/Filter/FilterCopySafeVideo.php
@@ -95,8 +95,8 @@ class FilterCopySafeVideo extends FilterBase {
           }
         }
 
-        $settings['copysafe_video_protection']['embed_options'][$csp_id]['plugin_url'] = $base_url . '/' . drupal_get_path('module', 'copysafe_video_protection') . '/';
-        $settings['copysafe_video_protection']['embed_options'][$csp_id]['plugin_path'] = $base_url . '/' . drupal_get_path('module', 'copysafe_video_protection') . '/';
+        $settings['copysafe_video_protection']['embed_options'][$csp_id]['plugin_url'] = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('copysafe_video_protection') . '/';
+        $settings['copysafe_video_protection']['embed_options'][$csp_id]['plugin_path'] = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('copysafe_video_protection') . '/';
         $settings['copysafe_video_protection']['embed_options'][$csp_id]['upload_path'] = $base_url . '/' . $upload_folder;
         $settings['copysafe_video_protection']['embed_options'][$csp_id]['upload_url'] = $base_url . '/' . $upload_folder;
 
