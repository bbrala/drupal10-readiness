diff --git a/calendar_links_token.module b/calendar_links_token.module
index e044ae9..20aa760 100644
--- a/calendar_links_token.module
+++ b/calendar_links_token.module
@@ -120,7 +120,7 @@ function _calendar_links_token_generate_links($parameters) {
       $ics_data = base64_decode($ics_data);
 
       // Save file to disk.
-      $ics_uri = file_unmanaged_save_data($ics_data, "public://invite_$nid.ics", FILE_EXISTS_REPLACE);
+      $ics_uri = \Drupal::service('file_system')->saveData($ics_data, "public://invite_$nid.ics", \Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE);
       $ics_link = file_create_url($ics_uri);
       $ics_link .= '?' . time();
 
