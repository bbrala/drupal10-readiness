diff --git a/single_content_sync.install b/single_content_sync.install
index 3aa430c..a6742b0 100644
--- a/single_content_sync.install
+++ b/single_content_sync.install
@@ -12,7 +12,7 @@ use Drupal\Core\Config\FileStorage;
  */
 function single_content_sync_update_9121(&$sandbox) {
   // Get file storage of optional configs in the module.
-  $config_path = drupal_get_path('module', 'single_content_sync') . '/config/install';
+  $config_path = \Drupal::service('extension.list.module')->getPath('single_content_sync') . '/config/install';
   $source = new FileStorage($config_path);
 
   /** @var \Drupal\Core\Config\StorageInterface $config_storage */
diff --git a/src/ContentImporter.php b/src/ContentImporter.php
index 3a4a087..7e9ee77 100644
--- a/src/ContentImporter.php
+++ b/src/ContentImporter.php
@@ -325,7 +325,7 @@ class ContentImporter implements ContentImporterInterface {
             $directory = $this->fileSystem->dirname($file_item['uri']);
             $this->contentSyncHelper->prepareFilesDirectory($directory);
 
-            if ($file = file_save_data($content, $file_item['uri'], FileSystemInterface::EXISTS_REPLACE)) {
+            if ($file = \Drupal::service('file.repository')->writeData($content, $file_item['uri'], FileSystemInterface::EXISTS_REPLACE)) {
               $file->setOwnerId(1);
               $file->setPermanent();
               $file->save();
diff --git a/src/ContentSyncHelper.php b/src/ContentSyncHelper.php
index 4ebd95e..58cf7e9 100644
--- a/src/ContentSyncHelper.php
+++ b/src/ContentSyncHelper.php
@@ -85,7 +85,7 @@ class ContentSyncHelper implements ContentSyncHelperInterface {
    * {@inheritdoc}
    */
   public function saveFileContentTemporary(string $content, string $destination): FileInterface {
-    $file = file_save_data($content, $destination);
+    $file = \Drupal::service('file.repository')->writeData($content, $destination);
     $file->setTemporary();
     $file->save();
 
