diff --git a/src/Form/MigrateRedirectForm.php b/src/Form/MigrateRedirectForm.php
index b72b9db..cc6ff37 100644
--- a/src/Form/MigrateRedirectForm.php
+++ b/src/Form/MigrateRedirectForm.php
@@ -272,7 +272,7 @@ my-source-path,https://example.com,und,302',
   protected function processSpreadsheet(int $fid) {
     /** @var \Drupal\file\Entity\File $file */
     $file = $this->entityTypeManager->getStorage('file')->load($fid);
-    return file_move($file, self::MIGRATE_FILE_PATH, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->move($file, self::MIGRATE_FILE_PATH, FileSystemInterface::EXISTS_REPLACE);
   }
 
   /**
diff --git a/src/RedirectExport.php b/src/RedirectExport.php
index 9c7f689..af05127 100644
--- a/src/RedirectExport.php
+++ b/src/RedirectExport.php
@@ -70,7 +70,7 @@ class RedirectExport {
     $uri = self::MIGRATE_FOLDER . $filename;
     $directory = self::MIGRATE_FOLDER;
     $result = $this->fileSystem->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
-    return file_save_data('', $uri, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->writeData('', $uri, FileSystemInterface::EXISTS_REPLACE);
   }
 
   /**
@@ -232,7 +232,7 @@ class RedirectExport {
     /** @var \Drupal\file\Entity\File $file */
     $file = !empty($results['file']) ? $results['file'] : NULL;
     if ($success && !empty($file)) {
-      $uri = file_create_url($file->getFileUri());
+      $uri = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       $url = Url::fromUri($uri);
       $download = Link::fromTextAndUrl(t('link'), $url);
       $return['link'] = $url;
