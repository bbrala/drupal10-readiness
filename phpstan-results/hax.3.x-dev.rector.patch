diff --git a/src/Controller/HaxController.php b/src/Controller/HaxController.php
index 59bab2a..dddbde8 100644
--- a/src/Controller/HaxController.php
+++ b/src/Controller/HaxController.php
@@ -191,7 +191,7 @@ class HaxController extends NodeViewController {
           $file_wrapper = 'public';
         }
         // See if Drupal can load from this data source.
-        if ($file = file_save_data($data, $file_wrapper . '://' . $upload['name'])) {
+        if ($file = \Drupal::service('file.repository')->writeData($data, $file_wrapper . '://' . $upload['name'])) {
           $uri = str_replace($GLOBALS['base_url'] . '/', $GLOBALS['base_path'],file_create_url($file->getFileUri()));
           $return = array(
             'file' => array(
