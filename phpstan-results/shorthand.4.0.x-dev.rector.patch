diff --git a/src/Entity/ShorthandStory.php b/src/Entity/ShorthandStory.php
index 1b35645..02098bc 100755
--- a/src/Entity/ShorthandStory.php
+++ b/src/Entity/ShorthandStory.php
@@ -158,7 +158,7 @@ class ShorthandStory extends RevisionableContentEntityBase implements ShorthandS
     // tag with the new local path
     $thumb = $this->thumbnail->value;
     if(empty($thumb) || strpos($thumb, '{Shorthand Local}/') !== false){
-      $assets_path = file_create_url($this->getShorthandStoryFilesStorageUri());
+      $assets_path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getShorthandStoryFilesStorageUri());
       $thumb = str_replace('{Shorthand Local}/', $assets_path.'/assets/', $thumb);
       $this->thumbnail->value = $thumb;
     }
@@ -476,8 +476,8 @@ class ShorthandStory extends RevisionableContentEntityBase implements ShorthandS
    *   storage path.
    */
   protected function fixStoryContentPaths($content, $external_assets) {
-    $absolute_assets_path = file_create_url($this->getShorthandStoryFilesStorageUri());
-    $assets_path = file_url_transform_relative($absolute_assets_path);
+    $absolute_assets_path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->getShorthandStoryFilesStorageUri());
+    $assets_path = \Drupal::service('file_url_generator')->transformRelative($absolute_assets_path);
     if (!$external_assets) {
       $content = str_replace('./assets/', $assets_path . '/assets/', $content);
     }
