diff --git a/composer.json b/composer.json
index a2302ad..b280fed 100644
--- a/composer.json
+++ b/composer.json
@@ -11,8 +11,8 @@
       }
   ],
   "require": {
-      "drupal/core": "^8.8 || ^9.0",
-      "drupal/imce": "^2.2"
+      "drupal/imce": "^2.2",
+    "drupal/core": "^9.3 || ^10"
   },
   "support": {
     "issues": "http://drupal.org/project/issues/imce_private",
diff --git a/imce_private.info.yml b/imce_private.info.yml
index c43779d..6287c11 100644
--- a/imce_private.info.yml
+++ b/imce_private.info.yml
@@ -2,7 +2,7 @@ name: IMCE Private Public Buttons
 type: module
 description: "Adds IMCE buttons for private and public files to CKEditor."
 package: Media
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 dependencies:
   - imce:imce
diff --git a/src/Plugin/CKEditorPlugin/ImcePrivate.php b/src/Plugin/CKEditorPlugin/ImcePrivate.php
index ed21959..e15b4de 100644
--- a/src/Plugin/CKEditorPlugin/ImcePrivate.php
+++ b/src/Plugin/CKEditorPlugin/ImcePrivate.php
@@ -20,7 +20,7 @@ class ImcePrivate extends CKEditorPluginBase {
    * {@inheritdoc}
    */
   public function getFile() {
-    return drupal_get_path('module', 'imce_private') . '/js/plugins/ckeditor/imce.ckeditor.js';
+    return \Drupal::service('extension.list.module')->getPath('imce_private') . '/js/plugins/ckeditor/imce.ckeditor.js';
   }
 
   /**
@@ -52,10 +52,10 @@ class ImcePrivate extends CKEditorPluginBase {
    */
   public function getConfig(Editor $editor) {
     return [
-      'ImceImageIconPrivate' => file_create_url($this->imageIconPrivate()),
-      'ImceLinkIconPrivate' => file_create_url($this->linkIconPrivate()),
-      'ImceImageIconPublic' => file_create_url($this->imageIconPublic()),
-      'ImceLinkIconPublic' => file_create_url($this->linkIconPublic()),
+      'ImceImageIconPrivate' => \Drupal::service('file_url_generator')->generateAbsoluteString($this->imageIconPrivate()),
+      'ImceLinkIconPrivate' => \Drupal::service('file_url_generator')->generateAbsoluteString($this->linkIconPrivate()),
+      'ImceImageIconPublic' => \Drupal::service('file_url_generator')->generateAbsoluteString($this->imageIconPublic()),
+      'ImceLinkIconPublic' => \Drupal::service('file_url_generator')->generateAbsoluteString($this->linkIconPublic()),
     ];
   }
 
@@ -63,28 +63,28 @@ class ImcePrivate extends CKEditorPluginBase {
    * Returns private image icon path.
    */
   public function imageIconPrivate() {
-    return drupal_get_path('module', 'imce_private') . '/js/plugins/ckeditor/icons/imceimage_private.png';
+    return \Drupal::service('extension.list.module')->getPath('imce_private') . '/js/plugins/ckeditor/icons/imceimage_private.png';
   }
 
   /**
    * Returns private link icon path.
    */
   public function linkIconPrivate() {
-    return drupal_get_path('module', 'imce_private') . '/js/plugins/ckeditor/icons/imcelink_private.png';
+    return \Drupal::service('extension.list.module')->getPath('imce_private') . '/js/plugins/ckeditor/icons/imcelink_private.png';
   }
 
   /**
    * Returns public image icon path.
    */
   public function imageIconPublic() {
-    return drupal_get_path('module', 'imce_private') . '/js/plugins/ckeditor/icons/imceimage_public.png';
+    return \Drupal::service('extension.list.module')->getPath('imce_private') . '/js/plugins/ckeditor/icons/imceimage_public.png';
   }
 
   /**
    * Returns public link icon path.
    */
   public function linkIconPublic() {
-    return drupal_get_path('module', 'imce_private') . '/js/plugins/ckeditor/icons/imcelink_public.png';
+    return \Drupal::service('extension.list.module')->getPath('imce_private') . '/js/plugins/ckeditor/icons/imcelink_public.png';
   }
 
 }
