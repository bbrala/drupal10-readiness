diff --git a/imagecache_external.info.yml b/imagecache_external.info.yml
index 0965d1d..9d81ac3 100644
--- a/imagecache_external.info.yml
+++ b/imagecache_external.info.yml
@@ -3,7 +3,7 @@ name: Imagecache External
 description: Allows you to fetch external images and use image styles on them.
 dependencies:
   - drupal:image
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: imagecache_external.admin_settings
 
 # Information added by Drupal.org packaging script on 2020-11-19
diff --git a/imagecache_external.module b/imagecache_external.module
index 7032f1e..0b57538 100644
--- a/imagecache_external.module
+++ b/imagecache_external.module
@@ -216,7 +216,7 @@ function imagecache_external_fetch($url, $cachepath) {
         return \Drupal::service('file_system')->saveData($result->getBody(), $cachepath, FileSystemInterface::EXISTS_REPLACE);
       }
       else {
-        $file = file_save_data($result->getBody(), $cachepath, FileSystemInterface::EXISTS_REPLACE);
+        $file = \Drupal::service('file.repository')->writeData($result->getBody(), $cachepath, FileSystemInterface::EXISTS_REPLACE);
         return $file->getFileUri();
       }
     }
diff --git a/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php b/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php
index 54a9e87..b256620 100644
--- a/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php
+++ b/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php
@@ -192,7 +192,7 @@ class ImagecacheExternalImage extends FormatterBase implements ContainerFactoryP
       }
 
       if (isset($link_file)) {
-        $url = Url::fromUri(file_create_url($image_path));
+        $url = \Drupal::service('file_url_generator')->generate($image_path);
       }
 
       $image = $this->imageFactory->get($image_path);
@@ -219,7 +219,7 @@ class ImagecacheExternalImage extends FormatterBase implements ContainerFactoryP
       }
 
       if ($url) {
-        $rendered_image = render($image_build);
+        $rendered_image = \Drupal::service('renderer')->render($image_build);
         $elements[$delta] = Link::fromTextAndUrl($rendered_image, $url)->toRenderable();
       }
       else {
diff --git a/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php b/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php
index 9a012ad..79ed03d 100644
--- a/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php
+++ b/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php
@@ -251,7 +251,7 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
       }
 
       if (isset($link_file)) {
-        $url = Url::fromUri(file_create_url($image_path));
+        $url = \Drupal::service('file_url_generator')->generate($image_path);
       }
 
       $image = $this->imageFactory->get($image_path);
@@ -278,7 +278,7 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
       }
 
       if ($url) {
-        $rendered_image = render($image_build);
+        $rendered_image = \Drupal::service('renderer')->render($image_build);
         $elements[$delta] = Link::fromTextAndUrl($rendered_image, $url)->toRenderable();
       }
       else {
