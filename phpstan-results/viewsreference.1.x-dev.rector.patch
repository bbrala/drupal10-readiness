diff --git a/composer.json b/composer.json
index d0289e7..bcecf8e 100644
--- a/composer.json
+++ b/composer.json
@@ -13,8 +13,8 @@
   },
   "require": {
     "php": "^7.0|^8.0",
-    "drupal/core": "^8.6|^9.0",
-    "squizlabs/php_codesniffer": "*"
+    "squizlabs/php_codesniffer": "*",
+    "drupal/core": "^9.3 || ^10"
   },
   "require-dev": {
     "composer/installers": "^1.2",
diff --git a/src/Plugin/Field/FieldWidget/ViewsReferenceTrait.php b/src/Plugin/Field/FieldWidget/ViewsReferenceTrait.php
index b039f56..0b753d4 100644
--- a/src/Plugin/Field/FieldWidget/ViewsReferenceTrait.php
+++ b/src/Plugin/Field/FieldWidget/ViewsReferenceTrait.php
@@ -158,7 +158,7 @@ trait ViewsReferenceTrait {
 
     // Construct the html.
     $response = new AjaxResponse();
-    $response->addCommand(new ReplaceCommand($element_class_selector, render($display_id_field)));
+    $response->addCommand(new ReplaceCommand($element_class_selector, \Drupal::service('renderer')->render($display_id_field)));
     return $response;
   }
 
diff --git a/viewsreference.info.yml b/viewsreference.info.yml
index 5506dec..359f786 100644
--- a/viewsreference.info.yml
+++ b/viewsreference.info.yml
@@ -1,6 +1,5 @@
 name: 'Views Reference Field'
 description: 'Enables Views to be embedded in an entity reference field'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Views
 type: module
diff --git a/viewsreference.module b/viewsreference.module
index 3163f86..19d4226 100644
--- a/viewsreference.module
+++ b/viewsreference.module
@@ -16,7 +16,7 @@ use Drupal\views\ViewExecutable;
 function viewsreference_help($route_name, RouteMatchInterface $arg) {
   switch ($route_name) {
     case 'help.page.viewsreference':
-      $output = file_get_contents(drupal_get_path('module', 'viewsreference') . '/README.md');
+      $output = file_get_contents(\Drupal::service('extension.list.module')->getPath('viewsreference') . '/README.md');
       $output = \Drupal::moduleHandler()->moduleExists('markdown') ? Xss::filterAdmin(\Drupal::moduleHandler()->invoke(
         'markdown',
         'filter',
