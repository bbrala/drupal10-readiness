diff --git a/composer.json b/composer.json
index 8188f04..a0ae09c 100644
--- a/composer.json
+++ b/composer.json
@@ -5,9 +5,9 @@
     "homepage": "http://drupal.org/project/imago",
     "license": "GPL-2.0-or-later",
     "require": {
-        "drupal/core": "^9",
         "drupal/token": "^1.0",
         "drupal/entity_browser": "^2.0",
-        "drupal/inline_entity_form": "^1.0"
+        "drupal/inline_entity_form": "^1.0",
+        "drupal/core": "^9 || ^10"
     }
 }
diff --git a/imago.info.yml b/imago.info.yml
index 3876abf..f5d7b77 100755
--- a/imago.info.yml
+++ b/imago.info.yml
@@ -1,7 +1,7 @@
 name: 'Imago'
 type: module
 description: 'Image-imago.de connector'
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^8.8 || ^9 || ^10
 package: 'LTN'
 dependencies:
   - inline_entity_form:inline_entity_form
diff --git a/src/Plugin/EntityBrowser/SelectionDisplay/ImagoView.php b/src/Plugin/EntityBrowser/SelectionDisplay/ImagoView.php
index 6ae68a4..fd9ca7f 100755
--- a/src/Plugin/EntityBrowser/SelectionDisplay/ImagoView.php
+++ b/src/Plugin/EntityBrowser/SelectionDisplay/ImagoView.php
@@ -149,11 +149,11 @@ class ImagoView extends SelectionDisplayBase {
   protected function selectionDone(FormStateInterface $form_state) {
     $form_state->set(['entity_browser', 'selection_completed'], TRUE);
     $this->eventDispatcher->dispatch(
-      Events::DONE,
       new SelectionDoneEvent(
         $this->configuration['entity_browser_id'],
         $form_state->get(['entity_browser', 'instance_uuid'])
-      ));
+      ),
+      Events::DONE);
   }
 
 }
diff --git a/src/Plugin/views/query/ImagoQueryPluginBase.php b/src/Plugin/views/query/ImagoQueryPluginBase.php
index de8a1d7..956bb98 100755
--- a/src/Plugin/views/query/ImagoQueryPluginBase.php
+++ b/src/Plugin/views/query/ImagoQueryPluginBase.php
@@ -274,7 +274,7 @@ class ImagoQueryPluginBase extends QueryPluginBase {
     }
     $view->total_rows = $counted_result;
 
-    $this->cache->set($last_search, $searched, REQUEST_TIME + 600, ['last_search']);
+    $this->cache->set($last_search, $searched, \Drupal::time()->getRequestTime() + 600, ['last_search']);
   }
 
   /**
