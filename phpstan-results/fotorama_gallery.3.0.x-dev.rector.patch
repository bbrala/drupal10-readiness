diff --git a/fotorama_gallery.info.yml b/fotorama_gallery.info.yml
index 0463068..553b45c 100644
--- a/fotorama_gallery.info.yml
+++ b/fotorama_gallery.info.yml
@@ -1,8 +1,7 @@
 name: "Fotorama Gallery"
 type: module
 description: "Add new format display to image field using the fotorama library."
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Field formatter
 dependencies:
   - drupal:image
diff --git a/src/Plugin/Field/FieldFormatter/FotoramaGalleryFormatter.php b/src/Plugin/Field/FieldFormatter/FotoramaGalleryFormatter.php
index caf3951..3036c11 100644
--- a/src/Plugin/Field/FieldFormatter/FotoramaGalleryFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/FotoramaGalleryFormatter.php
@@ -579,7 +579,7 @@ class FotoramaGalleryFormatter extends ImageFormatter {
 
       $image_uri = $file->getFileUri();
 
-      $url = $image_style ? $image_style->buildUrl($image_uri) : file_create_url($image_uri);
+      $url = $image_style ? $image_style->buildUrl($image_uri) : \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
 
       $image_url = Url::fromUri($url);
 
diff --git a/tests/src/FunctionalJavascript/FotoramaGalleryTest.php b/tests/src/FunctionalJavascript/FotoramaGalleryTest.php
index 5bc137d..7086b5c 100644
--- a/tests/src/FunctionalJavascript/FotoramaGalleryTest.php
+++ b/tests/src/FunctionalJavascript/FotoramaGalleryTest.php
@@ -32,7 +32,7 @@ class FotoramaGalleryTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a user with permissions to manage.
