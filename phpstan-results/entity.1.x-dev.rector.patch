diff --git a/src/Form/RevisionableContentEntityForm.php b/src/Form/RevisionableContentEntityForm.php
index 6e7d8c7..d3ef6a6 100644
--- a/src/Form/RevisionableContentEntityForm.php
+++ b/src/Form/RevisionableContentEntityForm.php
@@ -136,11 +136,11 @@ class RevisionableContentEntityForm extends ContentEntityForm {
 
     if ($insert) {
       $logger->notice('@type: added %info.', $context);
-      drupal_set_message($this->t('@type %info has been created.', $t_args));
+      $this->messenger()->addStatus($this->t('@type %info has been created.', $t_args));
     }
     else {
       $logger->notice('@type: updated %info.', $context);
-      drupal_set_message($this->t('@type %info has been updated.', $t_args));
+      $this->messenger()->addStatus($this->t('@type %info has been updated.', $t_args));
     }
 
     if ($this->entity->id()) {
@@ -157,7 +157,7 @@ class RevisionableContentEntityForm extends ContentEntityForm {
     else {
       // In the unlikely case something went wrong on save, the entity will be
       // rebuilt and entity form redisplayed.
-      drupal_set_message($this->t('The entity could not be saved.'), 'error');
+      $this->messenger()->addError($this->t('The entity could not be saved.'));
       $form_state->setRebuild();
     }
   }
diff --git a/tests/src/Unit/BundleEntityAccessControlHandlerTest.php b/tests/src/Unit/BundleEntityAccessControlHandlerTest.php
index a6ebffb..cd4f158 100644
--- a/tests/src/Unit/BundleEntityAccessControlHandlerTest.php
+++ b/tests/src/Unit/BundleEntityAccessControlHandlerTest.php
@@ -21,6 +21,7 @@ use Prophecy\Argument;
  */
 class BundleEntityAccessControlHandlerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Unit/EntityAccessControlHandlerTest.php b/tests/src/Unit/EntityAccessControlHandlerTest.php
index f70d0d6..cf21771 100644
--- a/tests/src/Unit/EntityAccessControlHandlerTest.php
+++ b/tests/src/Unit/EntityAccessControlHandlerTest.php
@@ -26,6 +26,7 @@ use Prophecy\Argument;
  */
 class EntityAccessControlHandlerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Unit/EntityPermissionProviderTest.php b/tests/src/Unit/EntityPermissionProviderTest.php
index 994c8d4..8feed53 100644
--- a/tests/src/Unit/EntityPermissionProviderTest.php
+++ b/tests/src/Unit/EntityPermissionProviderTest.php
@@ -16,6 +16,7 @@ use Drupal\user\EntityOwnerInterface;
  */
 class EntityPermissionProviderTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The entity permission provider.
    *
diff --git a/tests/src/Unit/UncacheableEntityAccessControlHandlerTest.php b/tests/src/Unit/UncacheableEntityAccessControlHandlerTest.php
index e6b40a5..71f3bf1 100644
--- a/tests/src/Unit/UncacheableEntityAccessControlHandlerTest.php
+++ b/tests/src/Unit/UncacheableEntityAccessControlHandlerTest.php
@@ -26,6 +26,7 @@ use Prophecy\Argument;
  */
 class UncacheableEntityAccessControlHandlerTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Unit/UncacheableEntityPermissionProviderTest.php b/tests/src/Unit/UncacheableEntityPermissionProviderTest.php
index b81e7f8..53bef34 100644
--- a/tests/src/Unit/UncacheableEntityPermissionProviderTest.php
+++ b/tests/src/Unit/UncacheableEntityPermissionProviderTest.php
@@ -16,6 +16,7 @@ use Drupal\user\EntityOwnerInterface;
  */
 class UncacheableEntityPermissionProviderTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The entity permission provider.
    *
