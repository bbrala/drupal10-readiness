diff --git a/composer.json b/composer.json
index 47b00aa..d7f388d 100644
--- a/composer.json
+++ b/composer.json
@@ -4,6 +4,6 @@
     "type": "drupal-module",
     "license": "GPL-2.0-or-later",
     "require": {
-        "drupal/core": "^8.8 || ^9"
+        "drupal/core": "^9.3 || ^10"
     }
 }
diff --git a/google_tag.info.yml b/google_tag.info.yml
index 933503b..30321fb 100644
--- a/google_tag.info.yml
+++ b/google_tag.info.yml
@@ -2,5 +2,5 @@ name: 'Google Tag Manager'
 type: module
 description: 'Allows your website analytics to be managed using Google Tag Manager.'
 package: 'Statistics'
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: google_tag.settings_form
diff --git a/src/Entity/Container.php b/src/Entity/Container.php
index 5ccc616..722640e 100644
--- a/src/Entity/Container.php
+++ b/src/Entity/Container.php
@@ -561,7 +561,7 @@ EOS;
       $url = $generator->transformRelative($generator->generateAbsoluteString($uri));
     }
     else {
-      $url = file_url_transform_relative(file_create_url($uri));
+      $url = \Drupal::service('file_url_generator')->generateString($uri);
     }
     $query_string = \Drupal::state()->get('system.css_js_query_string') ?: '0';
     $attachment = [
diff --git a/tests/src/Functional/GTMMultipleTest.php b/tests/src/Functional/GTMMultipleTest.php
index 6acd621..99f07e8 100644
--- a/tests/src/Functional/GTMMultipleTest.php
+++ b/tests/src/Functional/GTMMultipleTest.php
@@ -88,7 +88,7 @@ class GTMMultipleTest extends GTMTestBase {
           $url = $generator->transformRelative($generator->generateAbsoluteString($uri));
         }
         else {
-          $url = file_url_transform_relative(file_create_url($uri));
+          $url = \Drupal::service('file_url_generator')->generateString($uri);
         }
         $function = "verify{$type}Tag";
         $this->$function($url, $this->variables[$key]);
diff --git a/tests/src/Functional/GTMTestBase.php b/tests/src/Functional/GTMTestBase.php
index 22e5a13..4160724 100644
--- a/tests/src/Functional/GTMTestBase.php
+++ b/tests/src/Functional/GTMTestBase.php
@@ -62,7 +62,7 @@ abstract class GTMTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->defaultTheme = 'stark';
     parent::setUp();
     $this->basePath = $this->config('google_tag.settings')->get('uri');
