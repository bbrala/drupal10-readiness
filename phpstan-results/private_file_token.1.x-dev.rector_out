[parsing] modules/contrib/private_file_token/private_file_token.module
[refactoring] modules/contrib/private_file_token/private_file_token.module
[post rectors] modules/contrib/private_file_token/private_file_token.module
[print] modules/contrib/private_file_token/private_file_token.module
[refactoring] modules/contrib/private_file_token/private_file_token.module
[post rectors] modules/contrib/private_file_token/private_file_token.module
[print] modules/contrib/private_file_token/private_file_token.module
[parsing] modules/contrib/private_file_token/src/Access/PrivateFileTokenGenerator.php
[refactoring] modules/contrib/private_file_token/src/Access/PrivateFileTokenGenerator.php
[post rectors] modules/contrib/private_file_token/src/Access/PrivateFileTokenGenerator.php
[print] modules/contrib/private_file_token/src/Access/PrivateFileTokenGenerator.php
[parsing] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[refactoring] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[post rectors] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[print] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[refactoring] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[post rectors] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[print] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php
[parsing] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php
[refactoring] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php
[post rectors] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php
[print] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php
[refactoring] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php
[post rectors] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php
[print] modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php

3 files with changes
====================

1) modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTestHelperTrait.php:20

    ---------- begin diff ----------
@@ @@
     // Checks that generated url has expected path and contains expected query
     // string arguments.
     $image_style_url_parts = UrlHelper::parse($image_style_url);
-    $path_part = file_url_transform_relative($image_style_url_parts['path']);
+    $path_part = \Drupal::service('file_url_generator')->transformRelative($image_style_url_parts['path']);

     $this->assertEquals($expected_image_style_uri, $path_part);
     $this->assertTrue(!empty($image_style_url_parts['query']['token']) && !empty($image_style_url_parts['query']['token']));
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


2) modules/contrib/private_file_token/tests/src/Functional/PrivateFileTokenTest.php:65

    ---------- begin diff ----------
@@ @@
   public function testPrivateImageAccess(): void {
     // Copy source test image into private files directory.
     $image_filename = 'private-file-token-test-image.png';
-    $source_image_path = drupal_get_path('module', 'private_file_token') . '/tests/image/test-image.png';
+    $source_image_path = \Drupal::service('extension.list.module')->getPath('private_file_token') . '/tests/image/test-image.png';
     $this->fileSystem->copy($source_image_path, 'private://' . $image_filename, FileSystemInterface::EXISTS_REPLACE);
     // Create a test image file entity.
     $values = [
@@ @@
       ->set('expiration_time', 0)
       ->save();
     $content = $this->drupalGet($image_style_url);
-    $this->assertContains('Access denied', $content);
+    $this->assertStringContainsString('Access denied', $content);
   }

 }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * SpecificAssertContainsRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/private_file_token/private_file_token.module:27

    ---------- begin diff ----------
@@ @@
     $private_wrapper = $stream_wrapper_manager->getViaUri($uri);
     $uri = $private_wrapper->getExternalUrl();

-    $uri_without_scheme = file_url_transform_relative($uri);
+    $uri_without_scheme = \Drupal::service('file_url_generator')->transformRelative($uri);
     $timestamp = \Drupal::time()->getRequestTime();

     /** @var \Drupal\private_file_token\Access\PrivateFileTokenGenerator $private_file_token */
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector


 [OK] 3 files have been changed by Rector                                       

