diff --git a/instagram_feeds.info.yml b/instagram_feeds.info.yml
index c3e0586..60a6315 100644
--- a/instagram_feeds.info.yml
+++ b/instagram_feeds.info.yml
@@ -3,11 +3,10 @@ description: 'Allows to import Instagram posts to your site.'
 package: Media
 
 type: module
-core: 8.x
 configure: instagram_feeds.settings
 
 php: 7.2
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 # Dependencies
 dependencies:
diff --git a/src/CronHandler.php b/src/CronHandler.php
index 0caae2b..33cec25 100644
--- a/src/CronHandler.php
+++ b/src/CronHandler.php
@@ -158,7 +158,7 @@ class CronHandler {
     }
     // Dispatch the event.
     $event = new InstagramPostsObtainedEvent($this->config, $account, $result ?? []);
-    $this->eventDispatcher->dispatch(InstagramPostsObtainedEvent::getEventName(), $event);
+    $this->eventDispatcher->dispatch($event, InstagramPostsObtainedEvent::getEventName());
     return $event->posts;
   }
 
@@ -259,7 +259,7 @@ class CronHandler {
     $media_entity = $this->mediaStorage->create($entity_array);
     // Dispatch an event, so other modules can modify media entity before save.
     $event = new MediaEntityInstantiatedEvent($this->config, $account, $media_entity, $post);
-    $this->eventDispatcher->dispatch(MediaEntityInstantiatedEvent::getEventName(), $event);
+    $this->eventDispatcher->dispatch($event, MediaEntityInstantiatedEvent::getEventName());
 
     $event->mediaEntity->save();
   }
diff --git a/src/Event/InstagramFeedsEventBase.php b/src/Event/InstagramFeedsEventBase.php
index 8740a51..795a480 100644
--- a/src/Event/InstagramFeedsEventBase.php
+++ b/src/Event/InstagramFeedsEventBase.php
@@ -13,7 +13,7 @@ use Symfony\Component\EventDispatcher\Event;
  * has data received from Instagram API, so it is possible to manipulate
  * that data in order to modify media entity before it will be saved.
  */
-abstract class InstagramFeedsEventBase extends Event {
+abstract class InstagramFeedsEventBase extends \Symfony\Contracts\EventDispatcher\Event {
 
   /**
    * Instagram Feeds Config bucket.
diff --git a/src/EventSubscriber/InstagramPostsObtainedSubscriber.php b/src/EventSubscriber/InstagramPostsObtainedSubscriber.php
index c673e27..db4260f 100644
--- a/src/EventSubscriber/InstagramPostsObtainedSubscriber.php
+++ b/src/EventSubscriber/InstagramPostsObtainedSubscriber.php
@@ -42,7 +42,7 @@ class InstagramPostsObtainedSubscriber implements EventSubscriberInterface {
     // Added for compatibility with Drupal < 8.7.0.
     $this->file_exists_replace = defined('\Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE')
       ? FileSystemInterface::EXISTS_REPLACE
-      : FILE_EXISTS_REPLACE;
+      : \Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE;
   }
 
   /**
@@ -106,7 +106,7 @@ class InstagramPostsObtainedSubscriber implements EventSubscriberInterface {
         $full_name = $owner['full_name'] ?? 'Instagram Avatar';
         $avatar_file_extension = pathinfo(parse_url($owner['profile_pic_url'], PHP_URL_PATH), PATHINFO_EXTENSION);
         $file_uri_destination = $avatar_dir . '/' . $account->id() . '.' . $avatar_file_extension;
-        $file = file_save_data($file_data, $file_uri_destination, $this->file_exists_replace);
+        $file = \Drupal::service('file.repository')->writeData($file_data, $file_uri_destination, $this->file_exists_replace);
       }
 
     }
@@ -131,7 +131,7 @@ class InstagramPostsObtainedSubscriber implements EventSubscriberInterface {
       return \Drupal::service('file_system')->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY);
     }
     else {
-      return file_prepare_directory($directory, FILE_CREATE_DIRECTORY);
+      return \Drupal::service('file_system')->prepareDirectory($directory, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY);
     }
   }
 
