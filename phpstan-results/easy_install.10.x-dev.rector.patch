diff --git a/easy_install.module b/easy_install.module
index 1d3ca8f..a8211c3 100755
--- a/easy_install.module
+++ b/easy_install.module
@@ -21,8 +21,8 @@ function easy_install_form_alter(&$form, FormStateInterface $form_state, $form_i
       ->get('modules_uninstall')
       ->get(\Drupal::currentUser()->id());
     foreach ($modules as $module) {
-      $install_dir = drupal_get_path('module', $module) . '/' . InstallStorage::CONFIG_INSTALL_DIRECTORY;
-      $optional_dir = drupal_get_path('module', $module) . '/' . InstallStorage::CONFIG_OPTIONAL_DIRECTORY;
+      $install_dir = \Drupal::service('extension.list.module')->getPath($module) . '/' . InstallStorage::CONFIG_INSTALL_DIRECTORY;
+      $optional_dir = \Drupal::service('extension.list.module')->getPath($module) . '/' . InstallStorage::CONFIG_OPTIONAL_DIRECTORY;
       if(file_exists($install_dir)) {
           $install_details = \Drupal::service('file_system')->scanDirectory($install_dir, "/\.(yml)$/");
       }    
diff --git a/src/Form/PurgeConfigurationsConfirmForm.php b/src/Form/PurgeConfigurationsConfirmForm.php
index a025aa6..928c7b4 100644
--- a/src/Form/PurgeConfigurationsConfirmForm.php
+++ b/src/Form/PurgeConfigurationsConfirmForm.php
@@ -142,8 +142,8 @@ class PurgeConfigurationsConfirmForm extends ConfirmFormBase {
       '#items' => $this->modules['install'],
     ];
     foreach ($this->modules['install'] as $module => $module_name) {
-      $install_dir = drupal_get_path('module', $module) . '/' . InstallStorage::CONFIG_INSTALL_DIRECTORY;
-      $optional_dir = drupal_get_path('module', $module) . '/' . InstallStorage::CONFIG_OPTIONAL_DIRECTORY;
+      $install_dir = \Drupal::service('extension.list.module')->getPath($module) . '/' . InstallStorage::CONFIG_INSTALL_DIRECTORY;
+      $optional_dir = \Drupal::service('extension.list.module')->getPath($module) . '/' . InstallStorage::CONFIG_OPTIONAL_DIRECTORY;
       if(file_exists($install_dir)) { 
           $install_details =  $this->fileSystem->scanDirectory($install_dir, "/\.(yml)$/");
       }
