diff --git a/enhanced_user.info.yml b/enhanced_user.info.yml
index 263cc2f..7c95d97 100644
--- a/enhanced_user.info.yml
+++ b/enhanced_user.info.yml
@@ -1,7 +1,7 @@
 name: 'Enhanced User'
 type: module
 description: 'Provides enhanced user features for core user module.'
-core_version_requirement: '^8.9 || ^9'
+core_version_requirement: ^9.3 || ^10
 package: User
 dependencies:
   - drupal:user
diff --git a/src/Plugin/rest/resource/UploadAvatar.php b/src/Plugin/rest/resource/UploadAvatar.php
index 822053a..4ee283c 100644
--- a/src/Plugin/rest/resource/UploadAvatar.php
+++ b/src/Plugin/rest/resource/UploadAvatar.php
@@ -143,7 +143,7 @@ class UploadAvatar extends ResourceBase {
       $default_scheme = $this->configFactory->get('system.file')->get('default_scheme');
       $directory = $default_scheme . '://pictures/rest';
       $this->fileSystem->prepareDirectory($directory, FileSystemInterface::MODIFY_PERMISSIONS | FileSystemInterface::CREATE_DIRECTORY);
-      $file = file_save_data($file_data, $directory . $name);
+      $file = \Drupal::service('file.repository')->writeData($file_data, $directory . $name);
 
       // If user entity type has the user_picture field, save this file to it.
       if ($user->hasField('user_picture')) {
diff --git a/tests/src/Functional/EnhancedUserFieldsTest.php b/tests/src/Functional/EnhancedUserFieldsTest.php
index 7d2ab31..a761d11 100644
--- a/tests/src/Functional/EnhancedUserFieldsTest.php
+++ b/tests/src/Functional/EnhancedUserFieldsTest.php
@@ -39,7 +39,7 @@ class EnhancedUserFieldsTest extends BrowserTestBase {
    *
    * @throws \Drupal\Core\Entity\EntityStorageException
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(
       [
