diff --git a/spalp_example/src/EventSubscriber/SpalpExampleConfigLocationAlterSubscriber.php b/spalp_example/src/EventSubscriber/SpalpExampleConfigLocationAlterSubscriber.php
index 74689c4..dfbf2f8 100644
--- a/spalp_example/src/EventSubscriber/SpalpExampleConfigLocationAlterSubscriber.php
+++ b/spalp_example/src/EventSubscriber/SpalpExampleConfigLocationAlterSubscriber.php
@@ -32,7 +32,7 @@ class SpalpExampleConfigLocationAlterSubscriber implements EventSubscriberInterf
       // In a real implementation, you would change them.
       // For instance, your JSON might be in the libraries directory.
       // TODO: proper dependency injection example.
-      $module_path = drupal_get_path('module', 'spalp_example');
+      $module_path = \Drupal::service('extension.list.module')->getPath('spalp_example');
       $locations = [
         'config' => $module_path . '/config/spalp/spalp_example.config.json',
         'schema' => $module_path . '/config/spalp/spalp_example.config.schema.json',
diff --git a/spalp_example/tests/src/Functional/LoadTest.php b/spalp_example/tests/src/Functional/LoadTest.php
index ea1f2e1..c7c999b 100644
--- a/spalp_example/tests/src/Functional/LoadTest.php
+++ b/spalp_example/tests/src/Functional/LoadTest.php
@@ -29,7 +29,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
diff --git a/src/Service/Core.php b/src/Service/Core.php
index 86aaed3..36aab6d 100644
--- a/src/Service/Core.php
+++ b/src/Service/Core.php
@@ -175,7 +175,7 @@ class Core {
     $json = [];
 
     // Set up default paths to config files.
-    $module_path = DRUPAL_ROOT . '/' . drupal_get_path('module', $module);
+    $module_path = DRUPAL_ROOT . '/' . \Drupal::service('extension.list.module')->getPath($module);
 
     $base_filename = $module;
     if (!empty($language)) {
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index 7cd82a0..42b4dd5 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -29,7 +29,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
diff --git a/tests/src/Unit/SpalpCoreTest.php b/tests/src/Unit/SpalpCoreTest.php
index e6c0555..1ae6345 100644
--- a/tests/src/Unit/SpalpCoreTest.php
+++ b/tests/src/Unit/SpalpCoreTest.php
@@ -16,13 +16,13 @@ class SpalpCoreTest extends UnitTestCase {
 
   public $coreService;
 
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $loggerFactory = $this->createMock('\Drupal\Core\Logger\LoggerChannelFactoryInterface');
     $moduleHandler = $this->createMock('\Drupal\Core\Extension\ModuleHandlerInterface');
     $event_dispatcher = $this->createMock('\Symfony\Contracts\EventDispatcher\EventDispatcherInterface');
     $entity_type_manager = $this->createMock('\Drupal\Core\Entity\EntityTypeManagerInterface');
-    $language_manager = $this->getMockBuilder('\Drupal\Core\Language\LanguageManagerInterface')->disableOriginalConstructor()->getMock();
+    $language_manager = $this->createMock('\Drupal\Core\Language\LanguageManagerInterface');
 
     $this->coreService = new Core(
       $loggerFactory,
