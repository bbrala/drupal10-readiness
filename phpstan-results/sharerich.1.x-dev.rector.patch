diff --git a/sharerich.module b/sharerich.module
index 7f5ca54..a71cd60 100644
--- a/sharerich.module
+++ b/sharerich.module
@@ -68,7 +68,7 @@ function sharerich_sharerich_buttons_alter(&$buttons) {
  * @return A list of file names.
  */
 function sharerich_get_default_services() {
-  $dir = drupal_get_path('module', 'sharerich') . '/services';
+  $dir = \Drupal::service('extension.list.module')->getPath('sharerich') . '/services';
   $list = \Drupal::service('file_system')->scanDirectory($dir, '/.inc/', array(), 0);
   return array_map(function ($service) {
     return $service->name;
@@ -79,7 +79,7 @@ function sharerich_get_default_services() {
  * Helper to load services from the disk.
  */
 function sharerich_load_default_service($service_name) {
-  $dir = drupal_get_path('module', 'sharerich') . '/services';
+  $dir = \Drupal::service('extension.list.module')->getPath('sharerich') . '/services';
   $service_name = $dir . '/' . $service_name . '.inc';
   if (file_exists($service_name)) {
     return file_get_contents($service_name);
diff --git a/tests/src/Functional/SharerichTests.php b/tests/src/Functional/SharerichTests.php
index e0cd66b..2fddb08 100644
--- a/tests/src/Functional/SharerichTests.php
+++ b/tests/src/Functional/SharerichTests.php
@@ -52,7 +52,7 @@ class SharerichTests extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Services to test.
@@ -148,14 +148,14 @@ class SharerichTests extends BrowserTestBase {
     $this->drupalGet($url->toString());
 
     $text = $this->xpath('//div[@id="block-sharerich-block"]//h2');
-    $this->assertEqual($text[0]->getText(), $this->t('Share this'), t("The title of sharerich block is correct"));
+    $this->assertEquals($text[0]->getText(), $this->t('Share this'), t("The title of sharerich block is correct"));
 
     $elements = $this->xpath('//ul[contains(@class, :class)]/li', [':class' => 'sharerich-buttons']);
     $this->assertTrue(!empty($elements), 'Found a sticky sharerich block');
 
     foreach ($this->services as $item) {
       $text = $this->xpath('//div[@id="block-sharerich-block"]//ul/li[@class="rrssb-' . $item . '"]//span[@class="rrssb-text"]');
-      $this->assertEqual($text[0]->getText(), $item, $this->t('The text of :item button is correct', [':item' => $item]));
+      $this->assertEquals($text[0]->getText(), $item, $this->t('The text of :item button is correct', [':item' => $item]));
     }
 
     // Test that tokens were rendered correctly.
