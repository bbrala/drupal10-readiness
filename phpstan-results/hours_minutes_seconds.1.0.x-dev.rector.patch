diff --git a/hours_minutes_seconds.module b/hours_minutes_seconds.module
index de16608..1c99787 100644
--- a/hours_minutes_seconds.module
+++ b/hours_minutes_seconds.module
@@ -65,16 +65,16 @@ function template_preprocess_hour_minutes_seconds(&$variables) {
     // The next second h needs to update.
     // Be sure to pass running_since as time() (== GMT time)
     if ($variables['running_since'] < 0) {
-      $variables['running_since'] = REQUEST_TIME;
+      $variables['running_since'] = \Drupal::time()->getRequestTime();
     }
     $classes[] = 'hour_minutes_seconds-since-' . $variables['running_since'];
     $classes[] = 'hour_minutes_seconds-offset-' . $offset;
     $classes[] = 'hour_minutes_seconds-leading_zero-' . $variables['leading_zero'];
     if ($offset) {
-      $value = (REQUEST_TIME - $variables['running_since']) + $offset;
+      $value = (\Drupal::time()->getRequestTime() - $variables['running_since']) + $offset;
     }
     $variables['#attached']['library'][] = 'hours_minutes_seconds/hours_minutes_seconds';
-    $variables['#attached']['drupalSettings']['hours_minutes_seconds']['servertime'] = REQUEST_TIME;
+    $variables['#attached']['drupalSettings']['hours_minutes_seconds']['servertime'] = \Drupal::time()->getRequestTime();
     $variables['#attached']['drupalSettings']['hours_minutes_seconds']['factor_map'] = \Drupal::service('hours_minutes_seconds.hour_minutes_seconds')->factor_map();
   }
   $variables['classes'] = implode(' ' , $classes);
