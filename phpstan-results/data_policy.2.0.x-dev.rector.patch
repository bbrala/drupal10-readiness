diff --git a/data_policy.install b/data_policy.install
index 72e1260..641e647 100644
--- a/data_policy.install
+++ b/data_policy.install
@@ -130,7 +130,7 @@ function data_policy_update_8003() {
 function data_policy_update_8004() {
   $name = 'views.view.data_policy_agreements';
 
-  $install_source = drupal_get_path('module', 'data_policy') . '/config/install';
+  $install_source = \Drupal::service('extension.list.module')->getPath('data_policy') . '/config/install';
   $source = new FileStorage($install_source);
   $config_storage = \Drupal::service('config.storage');
   $config_storage->write($name, $source->read($name));
diff --git a/src/RedirectSubscriber.php b/src/RedirectSubscriber.php
index ac424ff..6dc7c61 100644
--- a/src/RedirectSubscriber.php
+++ b/src/RedirectSubscriber.php
@@ -146,10 +146,10 @@ class RedirectSubscriber implements EventSubscriberInterface {
   /**
    * This method is called when the KernelEvents::REQUEST event is dispatched.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   The event.
    */
-  public function checkForRedirection(GetResponseEvent $event): void {
+  public function checkForRedirection(\Symfony\Component\HttpKernel\Event\RequestEvent $event): void {
     // Check if a data policy is set.
     if (!$this->dataPolicyConsentManager->isDataPolicy()) {
       return;
@@ -279,10 +279,10 @@ class RedirectSubscriber implements EventSubscriberInterface {
   /**
    * Do redirect to the agreement page.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   The event.
    */
-  private function doRedirect(GetResponseEvent $event): void {
+  private function doRedirect(\Symfony\Component\HttpKernel\Event\RequestEvent $event): void {
     // Set the destination that redirects the user after accepting the
     // data policy agreements.
     $destination = $this->getDestination();
