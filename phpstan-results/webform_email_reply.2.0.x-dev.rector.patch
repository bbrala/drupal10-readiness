diff --git a/src/Controller/DefaultController.php b/src/Controller/DefaultController.php
index 4c602f8..50065a6 100644
--- a/src/Controller/DefaultController.php
+++ b/src/Controller/DefaultController.php
@@ -112,7 +112,7 @@ class DefaultController extends ControllerBase {
       $file_display = 'none';
       if ($reply->fid) {
         $file = File::load($reply->fid);
-        $uri = file_create_url($file->getFileUri());
+        $uri = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
         // $file_display = [
         //   '#type' => 'link',
         //   '#title' => $this->t('View'),
diff --git a/src/Form/WebformEmailReplyForm.php b/src/Form/WebformEmailReplyForm.php
index ffccf2c..383040b 100644
--- a/src/Form/WebformEmailReplyForm.php
+++ b/src/Form/WebformEmailReplyForm.php
@@ -231,7 +231,7 @@ class WebformEmailReplyForm extends FormBase {
         'filename' => $file->getFilename(),
         'filemime' => $file->getMimeType(),
         'filepath' => \Drupal::service('file_system')->realpath($file->getFileUri()),
-        '_uri' => file_create_url($file->getFileUri()),
+        '_uri' => \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()),
       ];
       $params['headers'] = [
         'MIME-Version' => '1.0',
