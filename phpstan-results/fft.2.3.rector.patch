diff --git a/fft.module b/fft.module
index 4a69feb..db2f751 100644
--- a/fft.module
+++ b/fft.module
@@ -37,7 +37,7 @@ function fft_realpath($file, $template_file = '') {
 
   if (strpos($file, '{theme}') !== FALSE) {
     $theme_default = $GLOBALS['conf']['theme_default'];
-    $theme_path = drupal_get_path('theme', $theme_default);
+    $theme_path = \Drupal::service('extension.list.theme')->getPath($theme_default);
     $file = str_replace('{theme}', $theme_path, $file);
     return $file;
   }
@@ -48,7 +48,9 @@ function fft_realpath($file, $template_file = '') {
   foreach ($types as $type) {
     $pattern = '/\{' . $type . '-(.+)\}/';
     preg_match($pattern, $file, $matches);
-    if (count($matches) > 1 && ($path = drupal_get_path($type, $matches[1])) != '') {
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Unsupported extension type encountered, using extension.path.resolver instead of extension.list
+    if (count($matches) > 1 && ($path = \Drupal::service('extension.path.resolver')->getPath($type, $matches[1])) != '') {
       $file = str_replace($matches[0], $path, $file);
       return $file;
     }
@@ -139,7 +141,7 @@ function fft_field_formatter_render($entity, $field_type, $items, array $setting
       foreach ($items as $delta => $item) {
         $image_uri = $item->entity->getFileUri();
         $image['uri'] = $image_uri;
-        $image['path'] = file_create_url($image_uri);
+        $image['path'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
         foreach (['width', 'height', 'alt'] as $key) {
           $image["$key"] = $item->$key;
         }
@@ -234,7 +236,7 @@ function fft_field_styled_image_url($image, $style) {
   $image_uri = $image->entity->getFileUri();
   $image_filepath = $style->buildUri($image_uri);
   $style->createDerivative($image_uri, $image_filepath);
-  $image_info['path'] = file_create_url($image_filepath);
+  $image_info['path'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_filepath);
   // Determine the dimensions of the styled image.
   $dimensions = [
     'width' => $image->width,
diff --git a/src/Event/PreProcess.php b/src/Event/PreProcess.php
index ef4fad2..c8f8d08 100644
--- a/src/Event/PreProcess.php
+++ b/src/Event/PreProcess.php
@@ -9,7 +9,7 @@ use Symfony\Component\EventDispatcher\Event;
  *
  * @package Drupal\fft\Event
  */
-class PreProcess extends Event {
+class PreProcess extends \Symfony\Contracts\EventDispatcher\Event {
 
   /**
    * Pre process event.
