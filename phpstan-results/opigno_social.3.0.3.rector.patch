diff --git a/opigno_social.install b/opigno_social.install
index ac88f1a..2a4ea71 100644
--- a/opigno_social.install
+++ b/opigno_social.install
@@ -72,7 +72,7 @@ function opigno_social_set_default_layout() {
  */
 function opigno_social_update_9001() {
   // Import configs.
-  $config_path = drupal_get_path('module', 'opigno_social') . '/config/optional/';
+  $config_path = \Drupal::service('extension.list.module')->getPath('opigno_social') . '/config/optional/';
   $config_source = new FileStorage($config_path);
   \Drupal::service('config.installer')->installOptionalConfig($config_source);
 }
diff --git a/src/Services/UserConnectionManager.php b/src/Services/UserConnectionManager.php
index 46db588..37cedb5 100644
--- a/src/Services/UserConnectionManager.php
+++ b/src/Services/UserConnectionManager.php
@@ -597,7 +597,7 @@ class UserConnectionManager {
     }
 
     $uid = $uid ?: $this->currentUid;
-    $img_path = drupal_get_path('theme', 'aristotle') . '/src/images/design/connections.svg';
+    $img_path = \Drupal::service('extension.list.theme')->getPath('aristotle') . '/src/images/design/connections.svg';
     $connections = count($this->getUserNetwork($uid));
 
     return [
@@ -605,7 +605,7 @@ class UserConnectionManager {
       '#count' => $connections,
       '#text' => $this->formatPlural($connections, 'Connection', 'Connections'),
       '#subtitle' => $uid === $this->currentUid ? $this->t('Manage connections') : '',
-      '#img' => file_exists($img_path) ? file_url_transform_relative(base_path() . $img_path) : '',
+      '#img' => file_exists($img_path) ? \Drupal::service('file_url_generator')->transformRelative(base_path() . $img_path) : '',
       '#url' => $uid === $this->currentUid ? Url::fromRoute('opigno_social.manage_connections')->toString() : '',
     ] + $build;
   }
