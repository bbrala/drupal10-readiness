diff --git a/src/CorpBase.php b/src/CorpBase.php
index 024671f..96ab862 100644
--- a/src/CorpBase.php
+++ b/src/CorpBase.php
@@ -904,7 +904,7 @@ class CorpBase {
 					$path = $destination;
 				}
 			}
-			$file = $managed ? file_save_data($data, $path, $replace) : \Drupal\Core\File\FileSystemInterface::saveData($data, $path, $replace);
+			$file = $managed ? \Drupal::service('file.repository')->writeData($data, $path, $replace) : \Drupal\Core\File\FileSystemInterface::saveData($data, $path, $replace);
 		} catch (\Exception $e) {
 			throw new \Exception($e->getMessage(), $e->getCode());
 		} finally {
