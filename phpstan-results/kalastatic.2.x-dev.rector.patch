diff --git a/src/Controller/KalastaticServer.php b/src/Controller/KalastaticServer.php
index 34c5f57..d251c46 100644
--- a/src/Controller/KalastaticServer.php
+++ b/src/Controller/KalastaticServer.php
@@ -75,7 +75,7 @@ class KalastaticServer extends ControllerBase {
     elseif (file_exists($this->getBuildPath() . '/index.html')){
       // Kalastatic seems to exist but the page that was requested doesn't so
       // let's throw a Drupal 404.
-      drupal_set_message(t('The requested page could not be found inside Kalastatic'), 'error');
+      $this->messenger()->addError(t('The requested page could not be found inside Kalastatic'));
       throw new NotFoundHttpException();
     }
     elseif ((isset($args[1]) && $args[1] == 'prototype') || (isset($args[2]) && $args[2] == 'styleguide')) {
