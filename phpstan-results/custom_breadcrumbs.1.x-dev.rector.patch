diff --git a/custom_breadcrumbs.info.yml b/custom_breadcrumbs.info.yml
index 03d0229..a5ad82c 100644
--- a/custom_breadcrumbs.info.yml
+++ b/custom_breadcrumbs.info.yml
@@ -2,7 +2,7 @@ name: Custom breadcrumbs
 type: module
 description: 'Provides a custom breadcrumbs configuration entity.'
 package: Custom
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: custom_breadcrumbs.config
 dependencies:
   - token:token
diff --git a/src/BreadcrumbBuilder.php b/src/BreadcrumbBuilder.php
index 951556d..0920972 100644
--- a/src/BreadcrumbBuilder.php
+++ b/src/BreadcrumbBuilder.php
@@ -281,7 +281,7 @@ class BreadcrumbBuilder implements BreadcrumbBuilderInterface {
 
     foreach ($paths as $key => $path) {
       if (isset($titles[$key])) {
-        $href = file_url_transform_relative($this->token->replace($path, $token_vars, ['clear' => TRUE]));
+        $href = \Drupal::service('file_url_generator')->transformRelative($this->token->replace($path, $token_vars, ['clear' => TRUE]));
         $link_title = $this->token->replace($titles[$key], $token_vars, ['clear' => TRUE]);
         $link_title = Html::decodeEntities($link_title);
 
diff --git a/tests/src/Functional/CustomBreadcrumbsTest.php b/tests/src/Functional/CustomBreadcrumbsTest.php
index 0973096..263b6e1 100644
--- a/tests/src/Functional/CustomBreadcrumbsTest.php
+++ b/tests/src/Functional/CustomBreadcrumbsTest.php
@@ -32,7 +32,7 @@ class CustomBreadcrumbsTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $web_user = $this->drupalCreateUser([
