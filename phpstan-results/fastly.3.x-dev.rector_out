[parsing] modules/contrib/fastly/fastly.api.php
[refactoring] modules/contrib/fastly/fastly.api.php
[post rectors] modules/contrib/fastly/fastly.api.php
[print] modules/contrib/fastly/fastly.api.php
[parsing] modules/contrib/fastly/fastly.drush.inc
[refactoring] modules/contrib/fastly/fastly.drush.inc
[post rectors] modules/contrib/fastly/fastly.drush.inc
[print] modules/contrib/fastly/fastly.drush.inc
[parsing] modules/contrib/fastly/fastly.install
[refactoring] modules/contrib/fastly/fastly.install
[post rectors] modules/contrib/fastly/fastly.install
[print] modules/contrib/fastly/fastly.install
[parsing] modules/contrib/fastly/fastly.module
[refactoring] modules/contrib/fastly/fastly.module
[post rectors] modules/contrib/fastly/fastly.module
[print] modules/contrib/fastly/fastly.module
[parsing] modules/contrib/fastly/modules/fastlypurger/src/FastlypurgerServiceProvider.php
[refactoring] modules/contrib/fastly/modules/fastlypurger/src/FastlypurgerServiceProvider.php
[post rectors] modules/contrib/fastly/modules/fastlypurger/src/FastlypurgerServiceProvider.php
[print] modules/contrib/fastly/modules/fastlypurger/src/FastlypurgerServiceProvider.php
[parsing] modules/contrib/fastly/modules/fastlypurger/src/Plugin/Purge/DiagnosticCheck/CredentialCheck.php
[printing skipped due error] modules/contrib/fastly/modules/fastlypurger/src/Plugin/Purge/DiagnosticCheck/CredentialCheck.php
[parsing] modules/contrib/fastly/modules/fastlypurger/src/Plugin/Purge/Purger/FastlyPurger.php
[printing skipped due error] modules/contrib/fastly/modules/fastlypurger/src/Plugin/Purge/Purger/FastlyPurger.php
[parsing] modules/contrib/fastly/src/Api.php
[refactoring] modules/contrib/fastly/src/Api.php
[post rectors] modules/contrib/fastly/src/Api.php
[print] modules/contrib/fastly/src/Api.php
[parsing] modules/contrib/fastly/src/CacheTagsHash.php
[refactoring] modules/contrib/fastly/src/CacheTagsHash.php
[post rectors] modules/contrib/fastly/src/CacheTagsHash.php
[print] modules/contrib/fastly/src/CacheTagsHash.php
[parsing] modules/contrib/fastly/src/CacheTagsHashInterface.php
[refactoring] modules/contrib/fastly/src/CacheTagsHashInterface.php
[post rectors] modules/contrib/fastly/src/CacheTagsHashInterface.php
[print] modules/contrib/fastly/src/CacheTagsHashInterface.php
[parsing] modules/contrib/fastly/src/CacheTagsInvalidator.php
[refactoring] modules/contrib/fastly/src/CacheTagsInvalidator.php
[post rectors] modules/contrib/fastly/src/CacheTagsInvalidator.php
[print] modules/contrib/fastly/src/CacheTagsInvalidator.php
[parsing] modules/contrib/fastly/src/Commands/FastlyCommands.php
[refactoring] modules/contrib/fastly/src/Commands/FastlyCommands.php
[post rectors] modules/contrib/fastly/src/Commands/FastlyCommands.php
[print] modules/contrib/fastly/src/Commands/FastlyCommands.php
[parsing] modules/contrib/fastly/src/Controller/FastlyEdgeModulesController.php
[refactoring] modules/contrib/fastly/src/Controller/FastlyEdgeModulesController.php
[post rectors] modules/contrib/fastly/src/Controller/FastlyEdgeModulesController.php
[print] modules/contrib/fastly/src/Controller/FastlyEdgeModulesController.php
[parsing] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[refactoring] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[post rectors] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[print] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[refactoring] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[post rectors] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[print] modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php
[parsing] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[refactoring] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[post rectors] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[print] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[refactoring] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[post rectors] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[print] modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php
[parsing] modules/contrib/fastly/src/Form/BlackfireIntegrationForm.php
[refactoring] modules/contrib/fastly/src/Form/BlackfireIntegrationForm.php
[post rectors] modules/contrib/fastly/src/Form/BlackfireIntegrationForm.php
[print] modules/contrib/fastly/src/Form/BlackfireIntegrationForm.php
[parsing] modules/contrib/fastly/src/Form/CorsHeadersForm.php
[refactoring] modules/contrib/fastly/src/Form/CorsHeadersForm.php
[post rectors] modules/contrib/fastly/src/Form/CorsHeadersForm.php
[print] modules/contrib/fastly/src/Form/CorsHeadersForm.php
[parsing] modules/contrib/fastly/src/Form/CountryblockForm.php
[refactoring] modules/contrib/fastly/src/Form/CountryblockForm.php
[post rectors] modules/contrib/fastly/src/Form/CountryblockForm.php
[print] modules/contrib/fastly/src/Form/CountryblockForm.php
[parsing] modules/contrib/fastly/src/Form/DatadomeIntegrationForm.php
[refactoring] modules/contrib/fastly/src/Form/DatadomeIntegrationForm.php
[post rectors] modules/contrib/fastly/src/Form/DatadomeIntegrationForm.php
[print] modules/contrib/fastly/src/Form/DatadomeIntegrationForm.php
[parsing] modules/contrib/fastly/src/Form/DisableCacheForm.php
[refactoring] modules/contrib/fastly/src/Form/DisableCacheForm.php
[post rectors] modules/contrib/fastly/src/Form/DisableCacheForm.php
[print] modules/contrib/fastly/src/Form/DisableCacheForm.php
[parsing] modules/contrib/fastly/src/Form/FastlySettingsForm.php
[refactoring] modules/contrib/fastly/src/Form/FastlySettingsForm.php
[post rectors] modules/contrib/fastly/src/Form/FastlySettingsForm.php
[print] modules/contrib/fastly/src/Form/FastlySettingsForm.php
[parsing] modules/contrib/fastly/src/Form/ForceCacheMissOnHardReloadForAdminsForm.php
[refactoring] modules/contrib/fastly/src/Form/ForceCacheMissOnHardReloadForAdminsForm.php
[post rectors] modules/contrib/fastly/src/Form/ForceCacheMissOnHardReloadForAdminsForm.php
[print] modules/contrib/fastly/src/Form/ForceCacheMissOnHardReloadForAdminsForm.php
[parsing] modules/contrib/fastly/src/Form/ImageOptimizerForm.php
[refactoring] modules/contrib/fastly/src/Form/ImageOptimizerForm.php
[post rectors] modules/contrib/fastly/src/Form/ImageOptimizerForm.php
[print] modules/contrib/fastly/src/Form/ImageOptimizerForm.php
[parsing] modules/contrib/fastly/src/Form/IncreaseTimeoutsLongJobsForm.php
[refactoring] modules/contrib/fastly/src/Form/IncreaseTimeoutsLongJobsForm.php
[post rectors] modules/contrib/fastly/src/Form/IncreaseTimeoutsLongJobsForm.php
[print] modules/contrib/fastly/src/Form/IncreaseTimeoutsLongJobsForm.php
[parsing] modules/contrib/fastly/src/Form/MobileDeviceDetectionForm.php
[refactoring] modules/contrib/fastly/src/Form/MobileDeviceDetectionForm.php
[post rectors] modules/contrib/fastly/src/Form/MobileDeviceDetectionForm.php
[print] modules/contrib/fastly/src/Form/MobileDeviceDetectionForm.php
[parsing] modules/contrib/fastly/src/Form/NetaceaIntegrationForm.php
[refactoring] modules/contrib/fastly/src/Form/NetaceaIntegrationForm.php
[post rectors] modules/contrib/fastly/src/Form/NetaceaIntegrationForm.php
[print] modules/contrib/fastly/src/Form/NetaceaIntegrationForm.php
[parsing] modules/contrib/fastly/src/Form/OtherCmsIntegrationForm.php
[refactoring] modules/contrib/fastly/src/Form/OtherCmsIntegrationForm.php
[post rectors] modules/contrib/fastly/src/Form/OtherCmsIntegrationForm.php
[print] modules/contrib/fastly/src/Form/OtherCmsIntegrationForm.php
[parsing] modules/contrib/fastly/src/Form/PurgeOptionsForm.php
[refactoring] modules/contrib/fastly/src/Form/PurgeOptionsForm.php
[post rectors] modules/contrib/fastly/src/Form/PurgeOptionsForm.php
[print] modules/contrib/fastly/src/Form/PurgeOptionsForm.php
[parsing] modules/contrib/fastly/src/Form/RedirectHostsForm.php
[refactoring] modules/contrib/fastly/src/Form/RedirectHostsForm.php
[post rectors] modules/contrib/fastly/src/Form/RedirectHostsForm.php
[print] modules/contrib/fastly/src/Form/RedirectHostsForm.php
[parsing] modules/contrib/fastly/src/Form/StaleContentOptionsForm.php
[refactoring] modules/contrib/fastly/src/Form/StaleContentOptionsForm.php
[post rectors] modules/contrib/fastly/src/Form/StaleContentOptionsForm.php
[print] modules/contrib/fastly/src/Form/StaleContentOptionsForm.php
[parsing] modules/contrib/fastly/src/Form/UrlRewritesForm.php
[refactoring] modules/contrib/fastly/src/Form/UrlRewritesForm.php
[post rectors] modules/contrib/fastly/src/Form/UrlRewritesForm.php
[print] modules/contrib/fastly/src/Form/UrlRewritesForm.php
[parsing] modules/contrib/fastly/src/Form/WebhookForm.php
[refactoring] modules/contrib/fastly/src/Form/WebhookForm.php
[post rectors] modules/contrib/fastly/src/Form/WebhookForm.php
[print] modules/contrib/fastly/src/Form/WebhookForm.php
[parsing] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[refactoring] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[post rectors] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[print] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[refactoring] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[post rectors] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[print] modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php
[parsing] modules/contrib/fastly/src/Services/Webhook.php
[refactoring] modules/contrib/fastly/src/Services/Webhook.php
[post rectors] modules/contrib/fastly/src/Services/Webhook.php
[print] modules/contrib/fastly/src/Services/Webhook.php
[parsing] modules/contrib/fastly/src/State.php
[refactoring] modules/contrib/fastly/src/State.php
[post rectors] modules/contrib/fastly/src/State.php
[print] modules/contrib/fastly/src/State.php
[parsing] modules/contrib/fastly/src/Utility/FastlyEdgeModulesHelper.php
[refactoring] modules/contrib/fastly/src/Utility/FastlyEdgeModulesHelper.php
[post rectors] modules/contrib/fastly/src/Utility/FastlyEdgeModulesHelper.php
[print] modules/contrib/fastly/src/Utility/FastlyEdgeModulesHelper.php
[parsing] modules/contrib/fastly/src/VclHandler.php
[refactoring] modules/contrib/fastly/src/VclHandler.php
[post rectors] modules/contrib/fastly/src/VclHandler.php
[print] modules/contrib/fastly/src/VclHandler.php
[refactoring] modules/contrib/fastly/src/VclHandler.php
[post rectors] modules/contrib/fastly/src/VclHandler.php
[print] modules/contrib/fastly/src/VclHandler.php

4 files with changes
====================

1) modules/contrib/fastly/src/VclHandler.php:189

    ---------- begin diff ----------
@@ @@
    */
   public function __construct(ConfigFactoryInterface $config_factory, $host, Api $api, LoggerInterface $logger, Webhook $webhook, RequestStack $requestStack, Messenger $messenger, ModuleHandlerInterface $module_handler) {
     $this->moduleHandler = $module_handler;
-    $vcl_dir = drupal_get_path('module', 'fastly') . '/vcl_snippets';
+    $vcl_dir = \Drupal::service('extension.list.module')->getPath('fastly') . '/vcl_snippets';
     $data = [
       'vcl' => [
         [
@@ @@
         return FALSE;
       }

-      $vcl_dir = drupal_get_path('module', 'fastly') . '/vcl_snippets/errors';
+      $vcl_dir = \Drupal::service('extension.list.module')->getPath('fastly') . '/vcl_snippets/errors';
       $singleVclData['vcl_dir'] = $vcl_dir;
       $singleVclData['type'] = 'deliver';
       $requests = [];
@@ @@
     try {
       $this->cloneLastActiveVersion();
       //Check if optimization on fastly is turned on and if vcl exists
-      $data['vcl_dir'] = drupal_get_path('module', 'fastly') . '/vcl_snippets_image_optimizations/' . $params['optimize'];
+      $data['vcl_dir'] = \Drupal::service('extension.list.module')->getPath('fastly') . '/vcl_snippets_image_optimizations/' . $params['optimize'];
       $data['type'] = 'recv';
       // Set vcl for image optimizer.
       if($this->checkIfVclExists(self::IMAGE_OPTIMIZER_BASIC_IMAGE_SETTINGS)) {
@@ @@
           $data['name'] = FastlyEdgeModulesHelper::FASTLY_EDGE_MODULE_PREFIX . $name . '_' . $vcl['type'];

           // load vcl template and render it
-          $path = drupal_get_path('module','fastly') . '/fastly_edge_modules/templates/';
+          $path = \Drupal::service('extension.list.module')->getPath('fastly') . '/fastly_edge_modules/templates/';
           $loader = new \Twig\Loader\ArrayLoader([
             'template' => file_get_contents($path . $vcl['template'] . '.html.twig',TRUE),
           ]);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


2) modules/contrib/fastly/src/Plugin/Field/FieldFormatter/FastlyImageFormatter.php:354

    ---------- begin diff ----------
@@ @@
         // context to ensure different file URLs are generated for different
         // sites in a multisite setup, including HTTP and HTTPS versions of the
         // same site. Fix in https://www.drupal.org/node/2646744.
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
         $cache_contexts[] = 'url.site';
       }
       $cache_tags = Cache::mergeTags($base_cache_tags, $file->getCacheTags());
@@ @@
       }
       if($query){
         $uri = $file->getFileUri();
-        $image_url = Url::fromUri(file_create_url($uri));
+        $image_url = \Drupal::service('file_url_generator')->generate($uri);
         $image_url->setOption('query', $query);
         $file->setFileUri($image_url->toUriString());
       }
    ----------- end diff -----------

Applied rules:
 * FromUriRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/fastly/src/EventSubscriber/SurrogateKeyGenerator.php:45

    ---------- begin diff ----------
@@ @@
   /**
    * Logs an emergency event when the X-Drupal-Cache-Tags header exceeds 16 KB.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    */
-  public function onRespond(FilterResponseEvent $event) {
+  public function onRespond(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
     if (!$event->isMasterRequest()) {
       return;
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


4) modules/contrib/fastly/src/EventSubscriber/AddStaleHeaders.php:44

    ---------- begin diff ----------
@@ @@
   /**
    * Adds Surrogate-Control header.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    */
-  public function onRespond(FilterResponseEvent $event) {
+  public function onRespond(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
     // Get the fastly settings from configuration.
     $config = $this->config->get('fastly.settings');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


 [ERROR] Could not process                                                      
         "modules/contrib/fastly/modules/fastlypurger/src/Plugin/Purge/Purger/Fast
         lyPurger.php" file, due to:                                            
         "Analyze error: "Class Drupal\purge\Plugin\Purge\Purger\PurgerBase not 
         found.". Include your files in "$parameters->set(Option::AUTOLOAD_PATHS,
         [...]);" or "$parameters->set(Option::BOOTSTRAP_FILES, [...]);" in     
         "rector.php" config.                                                   
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/fastly/modules/fastlypurger/src/Plugin/Purge/DiagnosticC
         heck/CredentialCheck.php" file, due to:                                
         "Analyze error: "Class                                                 
         Drupal\purge\Plugin\Purge\DiagnosticCheck\DiagnosticCheckBase not      
         found.". Include your files in "$parameters->set(Option::AUTOLOAD_PATHS,
         [...]);" or "$parameters->set(Option::BOOTSTRAP_FILES, [...]);" in     
         "rector.php" config.                                                   
         See https://github.com/rectorphp/rector#configuration".                

