diff --git a/login_switch.info.yml b/login_switch.info.yml
index 7bc7a70..1e21ab7 100644
--- a/login_switch.info.yml
+++ b/login_switch.info.yml
@@ -2,8 +2,7 @@ name: Login Switch
 description: 'Switches default user login path and adds custom user login routing and template.'
 package: Authentication
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^8 || ^9 || ^10
 configure: login_switch_admin
 
 # Information added by Drupal.org packaging script on 2021-10-17
diff --git a/src/Routing/ExceptionEventSubscriber.php b/src/Routing/ExceptionEventSubscriber.php
index 7b32fe9..c94ad2b 100644
--- a/src/Routing/ExceptionEventSubscriber.php
+++ b/src/Routing/ExceptionEventSubscriber.php
@@ -40,12 +40,12 @@ class ExceptionEventSubscriber implements EventSubscriberInterface  {
     ];
   }
 
-  public function onException(GetResponseForExceptionEvent $event) {
+  public function onException(\Symfony\Component\HttpKernel\Event\ExceptionEvent $event) {
     $route_name = \Drupal::routeMatch()->getRouteName();
     $config = $this->configFactory->get('login_switch.settings');
     if ($config->get('login_disabled')) {
       if ($route_name == 'user.page' && !$this->currentUser->hasPermission('access 403 page')) {
-        $event->setException(new NotFoundHttpException());
+        $event->setThrowable(new NotFoundHttpException());
       }
     }
   }
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index e359f44..5b32432 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -29,7 +29,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
