diff --git a/src/Plugin/Field/FieldFormatter/WrapperClassFormatter.php b/src/Plugin/Field/FieldFormatter/WrapperClassFormatter.php
index 71bc38d..e9a7f6a 100644
--- a/src/Plugin/Field/FieldFormatter/WrapperClassFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/WrapperClassFormatter.php
@@ -164,7 +164,7 @@ class WrapperClassFormatter extends FormatterBase {
           '#plain_text' => !empty($item->summary) ? strip_tags($item->summary) : text_summary(strip_tags($item->value), 'plain_text', $this->getSetting('trim')),
         ];
       }
-      $text = render($text);
+      $text = \Drupal::service('renderer')->render($text);
 
       if ($this->getSetting('link') && $parent instanceof EntityInterface) {
         $link_attributes = new Attribute();
@@ -174,7 +174,7 @@ class WrapperClassFormatter extends FormatterBase {
         }
         $link = Link::fromTextAndUrl($text, $parent->toUrl())->toRenderable();
         $link['#attributes'] = $link_attributes->toArray();
-        $text = render($link);
+        $text = \Drupal::service('renderer')->render($link);
       }
       $elements[$delta] = [
         '#type' => 'html_tag',
diff --git a/tests/src/Functional/ElementClassFormatterTestBase.php b/tests/src/Functional/ElementClassFormatterTestBase.php
index dead042..e84a855 100644
--- a/tests/src/Functional/ElementClassFormatterTestBase.php
+++ b/tests/src/Functional/ElementClassFormatterTestBase.php
@@ -96,7 +96,7 @@ abstract class ElementClassFormatterTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalLogin($this->createUser([
       'view test entity',
