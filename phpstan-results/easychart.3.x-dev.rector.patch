diff --git a/easychart.module b/easychart.module
index 195e868..e63a0ed 100644
--- a/easychart.module
+++ b/easychart.module
@@ -93,7 +93,7 @@ function easychart_library_info_build() {
 function easychart_entity_presave(EntityInterface $entity) {
   // Install the chart file.
   if ($entity->getEntityTypeId() == 'embed_button' && $entity->id() == 'chart' && $entity->isNew()) {
-    $path = drupal_get_path('module', 'easychart') . '/assets/chart.png';
+    $path = \Drupal::service('extension.list.module')->getPath('easychart') . '/assets/chart.png';
 
     /** @var \Drupal\file\FileInterface $file */
     $file = File::create();
@@ -102,7 +102,7 @@ function easychart_entity_presave(EntityInterface $entity) {
     $file->setMimeType('image/' . pathinfo($path, PATHINFO_EXTENSION));
     $file->setFileName(\Drupal::service('file_system')->basename($path));
 
-    $chart_icon = file_copy($file, 'public://embed_buttons');
+    $chart_icon = \Drupal::service('file.repository')->copy($file, 'public://embed_buttons');
     if ($chart_icon) {
       $entity->set('icon_uuid', $chart_icon->uuid());
     }
