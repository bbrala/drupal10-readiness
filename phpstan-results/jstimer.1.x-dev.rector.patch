diff --git a/jstimer.module b/jstimer.module
index 3c9dfe7..93be307 100644
--- a/jstimer.module
+++ b/jstimer.module
@@ -119,7 +119,7 @@ function jstimer_build_js_cache() {
   $path = 'public://jstimer';
   \Drupal::service('file_system')->prepareDirectory($path, FileSystemInterface::CREATE_DIRECTORY);
   $data = jstimer_get_javascript(TRUE);
-  file_save_data($data, $path .'/timer.js', FileSystemInterface::EXISTS_REPLACE);
+  \Drupal::service('file.repository')->writeData($data, $path .'/timer.js', FileSystemInterface::EXISTS_REPLACE);
   \Drupal::messenger()->addStatus(t('Javascript timer javascript file saved to: ') . $path .'/timer.js');
 
   if (!file_exists($path .'/timer.js')) {
diff --git a/widgets/jst_clock.module b/widgets/jst_clock.module
index 99dfa22..7b669d1 100644
--- a/widgets/jst_clock.module
+++ b/widgets/jst_clock.module
@@ -14,7 +14,7 @@ use Drupal\Core\Form\FormStateInterface;
  */
 function jst_clock_jstwidget() {
 
-$mod_path = drupal_get_path('module', 'jst_clock');
+$mod_path = \Drupal::service('extension.list.module')->getPath('jst_clock');
 $config = \Drupal::config('jstimer.settings');
 $svg_file = $config->get('jst_clock_sva_file');
 
