diff --git a/src/Controller/StartController.php b/src/Controller/StartController.php
index dac950e..2731666 100644
--- a/src/Controller/StartController.php
+++ b/src/Controller/StartController.php
@@ -24,7 +24,7 @@ class StartController extends ControllerBase {
     }
     else {
       // @phpstan-ignore-next-line
-      $path = drupal_get_path('module', 'acquia_connector');
+      $path = \Drupal::service('extension.list.module')->getPath('acquia_connector');
     }
 
     $build['#attached']['library'][] = 'acquia_connector/acquia_connector.form';
@@ -43,7 +43,7 @@ class StartController extends ControllerBase {
     }
     else {
       // @phpstan-ignore-next-line
-      $rendered = render($banner);
+      $rendered = \Drupal::service('renderer')->render($banner);
     }
     $banner = '<a href="' . $uri . '">' . $rendered . '</a>';
 
@@ -67,7 +67,7 @@ class StartController extends ControllerBase {
     }
     else {
       // @phpstan-ignore-next-line
-      $rendered = render($image);
+      $rendered = \Drupal::service('renderer')->render($image);
     }
     $output .= '<a href="https://docs.acquia.com" target="_blank">' . $rendered . '</a>';
     $output .= '<p class="cell-p">' . $this->t("Tap the collective knowledge of Acquiaâ€™s technical support team & partners.") . '</p>';
@@ -86,7 +86,7 @@ class StartController extends ControllerBase {
     }
     else {
       // @phpstan-ignore-next-line
-      $rendered = render($image);
+      $rendered = \Drupal::service('renderer')->render($image);
     }
     $output .= '<a href="https://www.acquia.com/customer-success" target="_blank">' . $rendered . '</a>';
     $output .= '<p class="cell-p">' . $this->t('Enhance and extend your site with an array of <a href=":services" target="_blank">services</a> from Acquia & our partners.', [':services' => 'https://www.acquia.com/products-services/acquia-cloud']) . '</p>';
@@ -105,7 +105,7 @@ class StartController extends ControllerBase {
     }
     else {
       // @phpstan-ignore-next-line
-      $rendered = render($image);
+      $rendered = \Drupal::service('renderer')->render($image);
     }
     $output .= '<a href="https://support.acquia.com" target="_blank">' . $rendered . '</a>';
     $output .= '<p class="cell-p">' . $this->t("Experienced Drupalists are available to support you whenever you need it.") . '</p>';
diff --git a/tests/src/Functional/AcquiaConnectorModuleTest.php b/tests/src/Functional/AcquiaConnectorModuleTest.php
index 02b7780..a2de8cc 100644
--- a/tests/src/Functional/AcquiaConnectorModuleTest.php
+++ b/tests/src/Functional/AcquiaConnectorModuleTest.php
@@ -176,7 +176,7 @@ class AcquiaConnectorModuleTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create and log in our privileged user.
diff --git a/tests/src/Functional/AcquiaConnectorSpiTest.php b/tests/src/Functional/AcquiaConnectorSpiTest.php
index 0eec682..ccd29c1 100644
--- a/tests/src/Functional/AcquiaConnectorSpiTest.php
+++ b/tests/src/Functional/AcquiaConnectorSpiTest.php
@@ -208,7 +208,7 @@ class AcquiaConnectorSpiTest extends BrowserTestBase {
    *
    * @throws \Drupal\Core\Entity\EntityStorageException
    */
-  public function setUp() {
+  public function setUp(): void {
     if (empty($_SERVER['SERVER_SOFTWARE'])) {
       $_SERVER['SERVER_SOFTWARE'] = $this->randomString();
     }
diff --git a/tests/src/Kernel/Migrate/d7/MigrateAcquiaConnectorConfigurationTest.php b/tests/src/Kernel/Migrate/d7/MigrateAcquiaConnectorConfigurationTest.php
index f799d5f..2ee0ac2 100644
--- a/tests/src/Kernel/Migrate/d7/MigrateAcquiaConnectorConfigurationTest.php
+++ b/tests/src/Kernel/Migrate/d7/MigrateAcquiaConnectorConfigurationTest.php
@@ -149,7 +149,7 @@ class MigrateAcquiaConnectorConfigurationTest extends MigrateDrupal7TestBase {
     }
     else {
       // @phpstan-ignore-next-line
-      $path = drupal_get_path('module', 'acquia_connector');
+      $path = \Drupal::service('extension.list.module')->getPath('acquia_connector');
     }
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
diff --git a/tests/src/Unit/AutoConnectorTest.php b/tests/src/Unit/AutoConnectorTest.php
index a496b55..eadc52b 100644
--- a/tests/src/Unit/AutoConnectorTest.php
+++ b/tests/src/Unit/AutoConnectorTest.php
@@ -14,6 +14,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class AutoConnectorTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Tests the happy path.
    *
