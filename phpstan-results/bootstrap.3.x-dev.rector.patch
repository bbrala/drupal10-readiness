diff --git a/src/Bootstrap.php b/src/Bootstrap.php
index 7697735..1d96b9d 100644
--- a/src/Bootstrap.php
+++ b/src/Bootstrap.php
@@ -1357,6 +1357,9 @@ class Bootstrap {
       static::$messenger->addMessage($message, $type, $repeat);
     }
     else {
+      // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+      // This needs to be replaced, but Rector was not yet able to replace this because the type of message was set with a variable. If you need to continue to use a variable, you might consider using a switch statement.
+      // @noRector
       drupal_set_message($message, $type, $repeat);
     }
   }
diff --git a/src/Plugin/Provider/ProviderBase.php b/src/Plugin/Provider/ProviderBase.php
index 8c94254..26ab537 100644
--- a/src/Plugin/Provider/ProviderBase.php
+++ b/src/Plugin/Provider/ProviderBase.php
@@ -649,7 +649,7 @@ class ProviderBase extends PluginBase implements ProviderInterface {
         $fileSystem->prepareDirectory($provider_path, $options);
       }
       else {
-        file_prepare_directory($provider_path, $options);
+        \Drupal::service('file_system')->prepareDirectory($provider_path, $options);
       }
 
       // Use manually imported API data, if it exists.
