diff --git a/src/Plugin/ImporterBase.php b/src/Plugin/ImporterBase.php
index 0cc545b..8e2495e 100644
--- a/src/Plugin/ImporterBase.php
+++ b/src/Plugin/ImporterBase.php
@@ -150,7 +150,7 @@ abstract class ImporterBase extends PluginBase implements ImporterInterface {
 
     foreach ($content as $key => $item) {
       if (is_string($item) && file_exists($item)) {
-        $created = file_save_data(file_get_contents($item), $this->config->get('system.file')->get('default_scheme') . '://' . basename($item), FileSystemInterface::EXISTS_REPLACE);
+        $created = \Drupal::service('file.repository')->writeData(file_get_contents($item), $this->config->get('system.file')->get('default_scheme') . '://' . basename($item), FileSystemInterface::EXISTS_REPLACE);
         $content[$key] = $created->id();
       }
     }
diff --git a/tests/src/FunctionalJavascript/ImporterTest.php b/tests/src/FunctionalJavascript/ImporterTest.php
index 903b50a..e05b31a 100644
--- a/tests/src/FunctionalJavascript/ImporterTest.php
+++ b/tests/src/FunctionalJavascript/ImporterTest.php
@@ -27,7 +27,7 @@ class ImporterTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $account = $this->drupalCreateUser([
@@ -121,7 +121,7 @@ class ImporterTest extends WebDriverTestBase {
       $page->selectFieldOption('entity_type_bundle', $entity_type_bundle);
     }
 
-    $page->attachFileToField('files[csv]', drupal_get_path('module', 'csv_importer_test') . "/content/csv_example_{$entity_type}_test.csv");
+    $page->attachFileToField('files[csv]', \Drupal::service('extension.list.module')->getPath('csv_importer_test') . "/content/csv_example_{$entity_type}_test.csv");
     $assert->assertWaitOnAjaxRequest();
 
     $page->pressButton('Import');
