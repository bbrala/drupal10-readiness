diff --git a/psv.info.yml b/psv.info.yml
index 1893bcb..a4f8575 100644
--- a/psv.info.yml
+++ b/psv.info.yml
@@ -3,4 +3,4 @@ type: module
 description: 'Password Strength Visualization for Drupal'
 package: Other
 configure: psv.form
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
diff --git a/psv.module b/psv.module
index 69c0ee4..ace851a 100644
--- a/psv.module
+++ b/psv.module
@@ -65,7 +65,7 @@ function psv_preprocess_psv(&$variables) {
       $fid1 = $value;
     }
     $file = File::load($fid1);
-    $url = Url::fromUri(file_create_url($file->getFileUri()));
+    $url = \Drupal::service('file_url_generator')->generate($file->getFileUri());
     $variables['psv_background'] = $url->getUri();
   }
 
@@ -86,7 +86,7 @@ function psv_preprocess_psv(&$variables) {
 function psv_theme_registry_alter(&$theme_registry) {
   $psv_settings = \Drupal::config('psv.config');
   if ($psv_settings->get('psv_enable') != 0) {
-    $module_path = drupal_get_path('module', 'psv');
+    $module_path = \Drupal::service('extension.list.module')->getPath('psv');
 
     $theme_registry['page__psv'] = [
       'preprocess functions' => [
