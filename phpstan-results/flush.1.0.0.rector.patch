diff --git a/flush.info.yml b/flush.info.yml
index 8c9115e..fa46f98 100644
--- a/flush.info.yml
+++ b/flush.info.yml
@@ -2,7 +2,7 @@ name: Flush
 type: module
 description: Adds a fun flushing (configurable) noise upon cache clear.
 package: Administration
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: system.flush_settings
 
 # Information added by Drupal.org packaging script on 2022-04-18
diff --git a/src/Form/FlushSettingsForm.php b/src/Form/FlushSettingsForm.php
index 62c2a78..30c3d44 100644
--- a/src/Form/FlushSettingsForm.php
+++ b/src/Form/FlushSettingsForm.php
@@ -103,7 +103,7 @@ class FlushSettingsForm extends ConfigFormBase {
       $file = File::load( $file_data[0] );
       $file_name = $file->getFilename();
       $uri = $file->getFileUri();
-      $url = Url::fromUri(file_create_url($uri))->toString();
+      $url = \Drupal::service('file_url_generator')->generate($uri)->toString();
       $file->setPermanent();
       $file->save();
 
