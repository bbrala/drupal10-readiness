diff --git a/brandfolderassets.module b/brandfolderassets.module
index 313fbe1..7f334cb 100644
--- a/brandfolderassets.module
+++ b/brandfolderassets.module
@@ -10,9 +10,9 @@ use Drupal\Core\Link;
 function brandfolderassets_preprocess_page(array &$variables) : void {
 	//Module name: 'brandfolderassets', library name: 'brandfolderassets'. 
 	$variables['#attached']['library'][] = 'brandfolderassets/brandfolderassets';
-	$variables['#attached']['drupalSettings']['brandfolderassets']['base_url'] = drupal_get_path('module', 'brandfolderassets');
+	$variables['#attached']['drupalSettings']['brandfolderassets']['base_url'] = \Drupal::service('extension.list.module')->getPath('brandfolderassets');
 	$variables['#attached']['drupalSettings']['brandfolderassets']['site_url'] =  Url::fromRoute('<front>', [], ['absolute' => TRUE])->toString();
-	$variables['#attached']['drupalSettings']['brandfolderassets']['module_url'] =  Url::fromRoute('<front>', [], ['absolute' => TRUE])->toString().drupal_get_path('module', 'brandfolderassets');
+	$variables['#attached']['drupalSettings']['brandfolderassets']['module_url'] =  Url::fromRoute('<front>', [], ['absolute' => TRUE])->toString().\Drupal::service('extension.list.module')->getPath('brandfolderassets');
 }
 
 /**
diff --git a/src/Plugin/Field/FieldType/BrandfolderassetsItem.php b/src/Plugin/Field/FieldType/BrandfolderassetsItem.php
index c0fbc21..08448ca 100644
--- a/src/Plugin/Field/FieldType/BrandfolderassetsItem.php
+++ b/src/Plugin/Field/FieldType/BrandfolderassetsItem.php
@@ -239,7 +239,7 @@ class BrandfolderassetsItem extends EntityReferenceItem {
     // Generate a file entity.
     $destination = $dirname . '/' . $random->name(10, TRUE) . '.txt';
     $data = $random->paragraphs(3);
-    $file = file_save_data($data, $destination, FileSystemInterface::EXISTS_ERROR);
+    $file = \Drupal::service('file.repository')->writeData($data, $destination, FileSystemInterface::EXISTS_ERROR);
     $values = [
       'target_id' => $file->id(),
       'display' => (int) $settings['display_default'],
diff --git a/src/Plugin/Field/FieldWidget/BrandfolderassetsWidget.php b/src/Plugin/Field/FieldWidget/BrandfolderassetsWidget.php
index be87952..ccb3ba0 100644
--- a/src/Plugin/Field/FieldWidget/BrandfolderassetsWidget.php
+++ b/src/Plugin/Field/FieldWidget/BrandfolderassetsWidget.php
@@ -269,7 +269,7 @@ class BrandfolderassetsWidget extends WidgetBase implements ContainerFactoryPlug
         $assetsfield_name = str_replace('_', '-', $this->fieldDefinition->getName()).'-'.$delta;        
        
        
-        $boxhtml = '<div class="brand-grid-25 text-align-center brand-padding brand-image-item" file-mime="'.$file->getMimeType().'"><img class="brand-image-box" src="'.$file->createFileUrl() .'" ><div class="brand-image-checkbox-inner"><span data-mode="edit" data-fild-name="'.$this->fieldDefinition->getName().'" data-fild-name-delta="'.$delta.'"  data-id="'.$assetsfield_name.'" class="selected-image-remove"><img src="'.Url::fromRoute('<front>', [], ['absolute' => TRUE])->toString().drupal_get_path('module', 'brandfolderassets').'/images/remove.svg"></span></div></div>';
+        $boxhtml = '<div class="brand-grid-25 text-align-center brand-padding brand-image-item" file-mime="'.$file->getMimeType().'"><img class="brand-image-box" src="'.$file->createFileUrl() .'" ><div class="brand-image-checkbox-inner"><span data-mode="edit" data-fild-name="'.$this->fieldDefinition->getName().'" data-fild-name-delta="'.$delta.'"  data-id="'.$assetsfield_name.'" class="selected-image-remove"><img src="'.Url::fromRoute('<front>', [], ['absolute' => TRUE])->toString().\Drupal::service('extension.list.module')->getPath('brandfolderassets').'/images/remove.svg"></span></div></div>';
         $modalBtn = 'hidden'; 
       }
 
