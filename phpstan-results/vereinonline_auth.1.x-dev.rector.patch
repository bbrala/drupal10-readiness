diff --git a/composer.json b/composer.json
index ce10dd8..a08e8f2 100644
--- a/composer.json
+++ b/composer.json
@@ -15,6 +15,6 @@
         "source": "https://cgit.drupalcode.org/vereinonline_auth"
     },
     "require": {
-        "drupal/core" : "^8.8||^9.0"
+        "drupal/core": "^9.1 || ^10"
     }
 }
diff --git a/tests/src/Functional/LoginTest.php b/tests/src/Functional/LoginTest.php
index 7c0c46a..d97351c 100644
--- a/tests/src/Functional/LoginTest.php
+++ b/tests/src/Functional/LoginTest.php
@@ -79,7 +79,7 @@ class LoginTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->admin = $this->drupalCreateUser([], NULL, TRUE);
     $this->drupalLogin($this->admin);
@@ -87,9 +87,10 @@ class LoginTest extends BrowserTestBase {
     // Create role + user.
     $this->role = $this->drupalCreateRole([], NULL);
     $this->normalUser = $this->drupalCreateUser(['view own unpublished content'], NULL, FALSE);
+    $this->drupalGet('/admin/config/people/vereinonline_auth');
 
     // Module settings.
-    $this->drupalPostForm('/admin/config/people/vereinonline_auth', [
+    $this->submitForm([
       'api_url' => self::API_URL,
       'api_user' => self::API_USER,
       'api_password' => self::API_PASSWORD,
@@ -127,34 +128,38 @@ class LoginTest extends BrowserTestBase {
     $this->drupalGet('/user');
     $this->assertSession()->addressEquals('/user/' . $this->normalUser->id());
     $this->drupalLogout();
+    $this->drupalGet('/user/login');
 
     // Fail with unknown user and wrong password.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'userfehlerhaft',
       'pass' => '1234567',
     ], 'Log in');
     $this->assertSession()->pageTextContains('Unrecognized username or password.');
     $this->assertSession()->addressEquals('/user/login');
+    $this->drupalGet('/user/login');
 
     // Fail with user and wrong password.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '1234567',
     ], 'Log in');
     $this->assertSession()->pageTextContains('Unrecognized username or password.');
     $this->assertSession()->addressEquals('/user/login');
+    $this->drupalGet('/user/login');
 
     // Create new user and login.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '7654321',
     ], 'Log in');
     $this->assertSession()->pageTextNotContains('Unrecognized username or password.');
     $this->assertSession()->addressNotEquals('/user/login');
     $this->drupalLogout();
+    $this->drupalGet('/user/login');
 
     // Fail with new user and wrong password.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '1234567',
     ], 'Log in');
@@ -166,8 +171,9 @@ class LoginTest extends BrowserTestBase {
    * Test the no connection situation with fallback.
    */
   public function testNoConnectionFallback() {
+    $this->drupalGet('/user/login');
     // Create new user and login.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '7654321',
     ], 'Log in');
@@ -176,8 +182,9 @@ class LoginTest extends BrowserTestBase {
     $this->drupalLogout();
 
     $this->drupalLogin($this->admin);
+    $this->drupalGet('/admin/config/people/vereinonline_auth');
     // Set no connection URL.
-    $this->drupalPostForm('/admin/config/people/vereinonline_auth', [
+    $this->submitForm([
       'api_url' => self::API_URL_WRONG,
       'api_user' => self::API_USER,
       'api_password' => self::API_PASSWORD,
@@ -185,9 +192,10 @@ class LoginTest extends BrowserTestBase {
       'user_role' => $this->role,
     ], 'Submit');
     $this->drupalLogout();
+    $this->drupalGet('/user/login');
 
     // Login and test connection.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '7654321',
     ], 'Log in');
@@ -207,8 +215,9 @@ class LoginTest extends BrowserTestBase {
    * Test the no connection situation without fallback.
    */
   public function testNoConnectionNoFallback() {
+    $this->drupalGet('/user/login');
     // Create new user and login.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '7654321',
     ], 'Log in');
@@ -217,8 +226,9 @@ class LoginTest extends BrowserTestBase {
     $this->drupalLogout();
 
     $this->drupalLogin($this->admin);
+    $this->drupalGet('/admin/config/people/vereinonline_auth');
     // Set no connection URL.
-    $this->drupalPostForm('/admin/config/people/vereinonline_auth', [
+    $this->submitForm([
       'api_url' => self::API_URL_WRONG,
       'api_user' => self::API_USER,
       'api_password' => self::API_PASSWORD,
@@ -226,9 +236,10 @@ class LoginTest extends BrowserTestBase {
       'user_role' => $this->role,
     ], 'Submit');
     $this->drupalLogout();
+    $this->drupalGet('/user/login');
 
     // Login and test connection.
-    $this->drupalPostForm('/user/login', [
+    $this->submitForm([
       'name' => 'first.last',
       'pass' => '7654321',
     ], 'Log in');
diff --git a/vereinonline_auth.info.yml b/vereinonline_auth.info.yml
index eefa2b0..9af5078 100644
--- a/vereinonline_auth.info.yml
+++ b/vereinonline_auth.info.yml
@@ -1,6 +1,6 @@
 name: "Vereinonline Auth"
 description: "Authenticate with Vereinonline.org"
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.1 || ^10
 package: Authentication
 type: module
 configure: vereinonline_auth.settings_form
