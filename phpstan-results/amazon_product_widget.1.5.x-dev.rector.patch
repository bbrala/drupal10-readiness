diff --git a/amazon_product_widget.post_update.php b/amazon_product_widget.post_update.php
index a82717b..cb95ee0 100644
--- a/amazon_product_widget.post_update.php
+++ b/amazon_product_widget.post_update.php
@@ -13,7 +13,7 @@ use Drupal\menu_link_content\Entity\MenuLinkContent;
  */
 function amazon_product_widget_post_update_install_view(&$sandbox) {
   // Import the product overview view.
-  $configPath = drupal_get_path('module', 'amazon_product_widget') . '/config/install';
+  $configPath = \Drupal::service('extension.list.module')->getPath('amazon_product_widget') . '/config/install';
   $source = new FileStorage($configPath);
   /** @var \Drupal\Core\Config\StorageInterface $configStorage */
   $configStorage = \Drupal::service('config.storage');
@@ -43,7 +43,7 @@ function amazon_product_widget_post_update_install_view(&$sandbox) {
  */
 function amazon_product_widget_post_update_install_unavailable_products_view(&$sandbox) {
   // Import the product overview view.
-  $configPath = drupal_get_path('module', 'amazon_product_widget') . '/config/install';
+  $configPath = \Drupal::service('extension.list.module')->getPath('amazon_product_widget') . '/config/install';
   $source = new FileStorage($configPath);
   /** @var \Drupal\Core\Config\StorageInterface $configStorage */
   $configStorage = \Drupal::service('config.storage');
diff --git a/src/EventSubscriber/AmazonApiSubscriber.php b/src/EventSubscriber/AmazonApiSubscriber.php
index 5f3c0e6..9c5e19c 100644
--- a/src/EventSubscriber/AmazonApiSubscriber.php
+++ b/src/EventSubscriber/AmazonApiSubscriber.php
@@ -57,12 +57,12 @@ class AmazonApiSubscriber implements EventSubscriberInterface {
   /**
    * Unset cookie so the whole request acts as anonymous for everybody.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\RequestEvent $event
    *   The event to process.
    *
    * @see \Drupal\Core\EventSubscriber\FinishResponseSubscriber::onRespond()
    */
-  public function onRequest(GetResponseEvent $event) {
+  public function onRequest(\Symfony\Component\HttpKernel\Event\RequestEvent $event) {
     if (!$event->isMasterRequest()) {
       return;
     }
@@ -83,12 +83,12 @@ class AmazonApiSubscriber implements EventSubscriberInterface {
   /**
    * Sets proper cache control header.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    *
    * @see \Drupal\Core\EventSubscriber\FinishResponseSubscriber::onRespond()
    */
-  public function onRespond(FilterResponseEvent $event) {
+  public function onRespond(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
     if (!$event->isMasterRequest()) {
       return;
     }
