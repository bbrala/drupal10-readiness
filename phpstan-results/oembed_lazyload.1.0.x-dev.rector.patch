diff --git a/modules/oembed_lazyload_youtube/oembed_lazyload_youtube.module b/modules/oembed_lazyload_youtube/oembed_lazyload_youtube.module
index 8dfc191..0ed58ef 100644
--- a/modules/oembed_lazyload_youtube/oembed_lazyload_youtube.module
+++ b/modules/oembed_lazyload_youtube/oembed_lazyload_youtube.module
@@ -142,5 +142,5 @@ function oembed_lazyload_youtube_field_formatter_settings_summary_alter(array &$
  * Implements hook_ckeditor_css_alter().
  */
 function oembed_lazyload_youtube_ckeditor_css_alter(array &$css, EditorInterface $editor) {
-  $css[] = drupal_get_path('module', 'oembed_lazyload_youtube') . '/css/youtube.css';
+  $css[] = \Drupal::service('extension.list.module')->getPath('oembed_lazyload_youtube') . '/css/youtube.css';
 }
diff --git a/modules/oembed_lazyload_youtube/tests/src/Kernel/YoutubeEnhancerTest.php b/modules/oembed_lazyload_youtube/tests/src/Kernel/YoutubeEnhancerTest.php
index a2287de..4799008 100644
--- a/modules/oembed_lazyload_youtube/tests/src/Kernel/YoutubeEnhancerTest.php
+++ b/modules/oembed_lazyload_youtube/tests/src/Kernel/YoutubeEnhancerTest.php
@@ -29,14 +29,10 @@ class YoutubeEnhancerTest extends KernelTestBase {
   protected function setUp() : void {
     parent::setUp();
 
-    $config = $this->getMockBuilder(Config::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $config = $this->createMock(Config::class);
 
     $config->method('get')->willReturn('https://example.com');
-    $config_factory = $this->getMockBuilder(ConfigFactoryInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $config_factory = $this->createMock(ConfigFactoryInterface::class);
 
     $config_factory->method('get')->willReturn($config);
 
@@ -81,13 +77,9 @@ class YoutubeEnhancerTest extends KernelTestBase {
    */
   public function testGetPlaceholder($url) {
 
-    $resource = $this->getMockBuilder(Resource::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $resource = $this->createMock(Resource::class);
 
-    $provider = $this->getMockBuilder(Provider::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $provider = $this->createMock(Provider::class);
 
     $provider->method('getName')
       ->willReturn('YouTube');
diff --git a/oembed_lazyload.module b/oembed_lazyload.module
index 29f6ca4..e4da58e 100644
--- a/oembed_lazyload.module
+++ b/oembed_lazyload.module
@@ -87,5 +87,5 @@ function oembed_lazyload_preprocess_media_oembed_iframe(&$variables) {
  * Implements hook_ckeditor_css_alter().
  */
 function oembed_lazyload_ckeditor_css_alter(array &$css, EditorInterface $editor) {
-  $css[] = drupal_get_path('module', 'oembed_lazyload') . '/css/common.css';
+  $css[] = \Drupal::service('extension.list.module')->getPath('oembed_lazyload') . '/css/common.css';
 }
diff --git a/tests/src/Kernel/IframeUrlHelperTest.php b/tests/src/Kernel/IframeUrlHelperTest.php
index 41bfccb..c47a9b1 100644
--- a/tests/src/Kernel/IframeUrlHelperTest.php
+++ b/tests/src/Kernel/IframeUrlHelperTest.php
@@ -35,9 +35,7 @@ class IframeUrlHelperTest extends KernelTestBase {
   protected function setUp() : void {
     parent::setUp();
 
-    $this->privateKey = $this->getMockBuilder(PrivateKey::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->privateKey = $this->createMock(PrivateKey::class);
 
     $this->instance = new IframeUrlHelper($this->privateKey);
   }
diff --git a/tests/src/Kernel/OEmbedLazyloadIframeAccessCheckTest.php b/tests/src/Kernel/OEmbedLazyloadIframeAccessCheckTest.php
index 79afb5e..d63b97b 100644
--- a/tests/src/Kernel/OEmbedLazyloadIframeAccessCheckTest.php
+++ b/tests/src/Kernel/OEmbedLazyloadIframeAccessCheckTest.php
@@ -44,25 +44,17 @@ class OEmbedLazyloadIframeAccessCheckTest extends KernelTestBase {
   protected function setUp() : void {
     parent::setUp();
 
-    $this->oembedLazyloadIframeUrlHelper = $this->getMockBuilder(IframeUrlHelper::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->oembedLazyloadIframeUrlHelper = $this->createMock(IframeUrlHelper::class);
 
-    $request_stack = $this->getMockBuilder(RequestStack::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $request_stack = $this->createMock(RequestStack::class);
 
     /** @var \Symfony\Component\HttpFoundation\Request|\PHPUnit\Framework\MockObject\MockObject $request */
-    $request = $this->getMockBuilder(Request::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $request = $this->createMock(Request::class);
 
     $request_stack->method('getCurrentRequest')
       ->willReturn($request);
 
-    $this->query = $this->getMockBuilder(ParameterBagInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->query = $this->createMock(ParameterBagInterface::class);
 
     $request->query = $this->query;
 
diff --git a/tests/src/Kernel/ProviderEnhancerTest.php b/tests/src/Kernel/ProviderEnhancerTest.php
index cf5ac55..c7b5fa3 100644
--- a/tests/src/Kernel/ProviderEnhancerTest.php
+++ b/tests/src/Kernel/ProviderEnhancerTest.php
@@ -60,21 +60,13 @@ class ProviderEnhancerTest extends KernelTestBase {
    * Test case for the default placeholder generation with a known provider.
    */
   public function testGetPlaceholder() {
-    $url = $this->getMockBuilder(Url::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $url = $this->createMock(Url::class);
 
-    $thumbnail_url = $this->getMockBuilder(Url::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $thumbnail_url = $this->createMock(Url::class);
 
-    $resource = $this->getMockBuilder(Resource::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $resource = $this->createMock(Resource::class);
 
-    $provider = $this->getMockBuilder(Provider::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $provider = $this->createMock(Provider::class);
 
     $provider->method('getName')
       ->willReturn('test_provider');
@@ -106,17 +98,11 @@ class ProviderEnhancerTest extends KernelTestBase {
    * Test case for the default placeholder generation with an unknown provider.
    */
   public function testGetPlaceholderNoProvider() {
-    $url = $this->getMockBuilder(Url::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $url = $this->createMock(Url::class);
 
-    $thumbnail_url = $this->getMockBuilder(Url::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $thumbnail_url = $this->createMock(Url::class);
 
-    $resource = $this->getMockBuilder(Resource::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $resource = $this->createMock(Resource::class);
 
     $resource->method('getProvider')
       ->willReturn(NULL);
@@ -147,16 +133,12 @@ class ProviderEnhancerTest extends KernelTestBase {
    * @covers \Drupal\oembed_lazyload\ProviderEnhancerBase::getIframe
    */
   public function testGetIframeWithTitle() {
-    $url = $this->getMockBuilder(Url::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $url = $this->createMock(Url::class);
 
     $url->method('toString')
       ->willReturn('https://example.com');
 
-    $resource = $this->getMockBuilder(Resource::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $resource = $this->createMock(Resource::class);
 
     $resource->method('getWidth')
       ->willReturn('550');
@@ -207,16 +189,12 @@ class ProviderEnhancerTest extends KernelTestBase {
    * @covers \Drupal\oembed_lazyload\ProviderEnhancerBase::getIframe
    */
   public function testGetIframeWithoutTitle() {
-    $url = $this->getMockBuilder(Url::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $url = $this->createMock(Url::class);
 
     $url->method('toString')
       ->willReturn('https://example.com');
 
-    $resource = $this->getMockBuilder(Resource::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $resource = $this->createMock(Resource::class);
 
     $resource->method('getWidth')
       ->willReturn('550');
diff --git a/tests/src/Unit/RouteSubscriberTest.php b/tests/src/Unit/RouteSubscriberTest.php
index 12c966b..03d80df 100644
--- a/tests/src/Unit/RouteSubscriberTest.php
+++ b/tests/src/Unit/RouteSubscriberTest.php
@@ -36,21 +36,15 @@ class RouteSubscriberTest extends UnitTestCase {
    */
   public function testAlterRoutes() {
 
-    $route = $this->getMockBuilder(Route::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $route = $this->createMock(Route::class);
 
-    $route_collection = $this->getMockBuilder(RouteCollection::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $route_collection = $this->createMock(RouteCollection::class);
 
     $route_collection->method('get')
       ->with('media.oembed_iframe')
       ->willReturn($route);
 
-    $event = $this->getMockBuilder(RouteBuildEvent::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $event = $this->createMock(RouteBuildEvent::class);
 
     $event->method('getRouteCollection')
       ->willReturn($route_collection);
