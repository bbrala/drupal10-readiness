diff --git a/jfu.module b/jfu.module
index 2d2ca73..ff8f95f 100644
--- a/jfu.module
+++ b/jfu.module
@@ -225,7 +225,7 @@ function jfu_form_alter(&$form, FormStateInterface $form_state, $form_id) {
   
     $url_upload_image = Url::fromRoute('jfu.image_dialog', ['entity_type' => $entity_type, 'bundle' => $bundle], ['absolute' => TRUE]);
     $url_base = Url::fromRoute('<front>', [], ['absolute' => TRUE]);
-    $url_public = file_create_url('public://');
+    $url_public = \Drupal::service('file_url_generator')->generateAbsoluteString('public://');
 
     //TODO: Particular entity reference autocomplete for node
     $target_type = 'node';
diff --git a/src/Plugin/Field/FieldWidget/JSONComponentWidget.php b/src/Plugin/Field/FieldWidget/JSONComponentWidget.php
index f3fc157..670ac6f 100644
--- a/src/Plugin/Field/FieldWidget/JSONComponentWidget.php
+++ b/src/Plugin/Field/FieldWidget/JSONComponentWidget.php
@@ -175,7 +175,7 @@ class JSONComponentWidget extends JSONTextareaWidget {
     }
 
     $components = $this->getSetting('components');
-    $cmd = DRUPAL_ROOT . '/' . drupal_get_path('module', 'jfu') . '/component_models/';
+    $cmd = DRUPAL_ROOT . '/' . \Drupal::service('extension.list.module')->getPath('jfu') . '/component_models/';
     $jfu_components = [];
     
     foreach ($components as $name) {
