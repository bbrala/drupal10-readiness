diff --git a/src/Form/ThirdPartyWrappersAdminForm.php b/src/Form/ThirdPartyWrappersAdminForm.php
index f53d8ae..5a2f37b 100644
--- a/src/Form/ThirdPartyWrappersAdminForm.php
+++ b/src/Form/ThirdPartyWrappersAdminForm.php
@@ -108,15 +108,15 @@ class ThirdPartyWrappersAdminForm extends ConfigFormBase {
     $uri = $this->thirdPartyWrappers->getUri();
     $uri_js = $uri . '/js';
     $uri_css = $uri . '/css';
-    $dir = file_prepare_directory($uri, FILE_CREATE_DIRECTORY);
+    $dir = \Drupal::service('file_system')->prepareDirectory($uri, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY);
     if (empty($dir)) {
       $this->messenger->addError($this->t('There was an error preparing the Third Party Wrappers directory.'));
     }
-    $dir_js = file_prepare_directory($uri_js, FILE_CREATE_DIRECTORY);
+    $dir_js = \Drupal::service('file_system')->prepareDirectory($uri_js, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY);
     if (empty($dir_js)) {
       $this->messenger->addError($this->t('There was an error preparing the Third Party Wrappers JavaScript directory.'));
     }
-    $dir_css = file_prepare_directory($uri_css, FILE_CREATE_DIRECTORY);
+    $dir_css = \Drupal::service('file_system')->prepareDirectory($uri_css, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY);
     if (empty($dir_css)) {
       $this->messenger->addError($this->t('There was an error preparing the Third Party Wrappers CSS directory.'));
     }
diff --git a/src/ThirdPartyWrappers.php b/src/ThirdPartyWrappers.php
index bbc1691..c8b2502 100644
--- a/src/ThirdPartyWrappers.php
+++ b/src/ThirdPartyWrappers.php
@@ -52,7 +52,7 @@ class ThirdPartyWrappers implements ThirdPartyWrappersInterface {
    * {@inheritdoc}
    */
   public function cleanDirectory($path, $age) {
-    foreach (file_scan_directory($path, '/.*/') as $file => $fileobj) {
+    foreach (\Drupal::service('file_system')->scanDirectory($path, '/.*/') as $file => $fileobj) {
       $atime = fileatime($file);
       if ($atime !== FALSE && $atime + $age < time()) {
         $this->fileSystem->unlink($file);
@@ -73,11 +73,11 @@ class ThirdPartyWrappers implements ThirdPartyWrappersInterface {
       $search = '/' . $files_path_esc . '\/' . $prefix . $type . '\/' . $type . '_[^?"]*/is';
       preg_match_all($search, $template, $matches);
       if (!empty($matches[0])) {
-        $third_party_wrappers_uri = file_default_scheme() . '://' . $this->config->get('css_js_dir');
+        $third_party_wrappers_uri = \Drupal::config('system.file')->get('default_scheme') . '://' . $this->config->get('css_js_dir');
         $copy_path = $third_party_wrappers_uri . '/' . $prefix . $type;
-        file_prepare_directory($copy_path, FILE_CREATE_DIRECTORY | FILE_MODIFY_PERMISSIONS);
+        \Drupal::service('file_system')->prepareDirectory($copy_path, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY | \Drupal\Core\File\FileSystemInterface::MODIFY_PERMISSIONS);
         foreach ($matches[0] as $file) {
-          file_unmanaged_copy(($file), $copy_path . '/' . basename($file), FILE_EXISTS_REPLACE);
+          file_unmanaged_copy(($file), $copy_path . '/' . basename($file), \Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE);
         }
       }
     }
@@ -89,7 +89,7 @@ class ThirdPartyWrappers implements ThirdPartyWrappersInterface {
   public function getFilePaths() {
     $paths = [];
     // The system path for public files.
-    $scheme = file_default_scheme();
+    $scheme = \Drupal::config('system.file')->get('default_scheme');
     /** @var \Drupal\Core\StreamWrapper\LocalStream $wrapper */
     $wrapper = $this->streamWrapper->getViaScheme($scheme);
     $files_path = $wrapper->getDirectoryPath();
@@ -143,7 +143,7 @@ class ThirdPartyWrappers implements ThirdPartyWrappersInterface {
    */
   public function getUri() {
     $dir = $this->getDir();
-    $uri = file_default_scheme() . '://' . $this->getDir();
+    $uri = \Drupal::config('system.file')->get('default_scheme') . '://' . $this->getDir();
     if (empty($dir) || empty($uri)) {
       return '';
     }
