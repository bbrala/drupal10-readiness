diff --git a/anchor_link.install b/anchor_link.install
index f2a78ef..e11d103 100644
--- a/anchor_link.install
+++ b/anchor_link.install
@@ -18,7 +18,7 @@ function anchor_link_requirements($phase) {
 
     // If library is not found, then look in the current profile libraries path.
     if (!$library_found) {
-      $profile_path = drupal_get_path('profile', \Drupal::installProfile());
+      $profile_path = \Drupal::service('extension.list.profile')->getPath(\Drupal::installProfile());
       $profile_path .= '/libraries/link';
       // Is the library found in the current profile libraries path.
       $library_found = file_exists(DRUPAL_ROOT . $profile_path);
diff --git a/src/Plugin/CKEditorPlugin/AnchorLink.php b/src/Plugin/CKEditorPlugin/AnchorLink.php
index 036eb06..1ee8dd2 100755
--- a/src/Plugin/CKEditorPlugin/AnchorLink.php
+++ b/src/Plugin/CKEditorPlugin/AnchorLink.php
@@ -95,7 +95,7 @@ class AnchorLink extends CKEditorPluginBase {
 
     // Installation profiles can place libraries into a 'libraries' directory.
     if ($installProfile = \Drupal::installProfile()) {
-      $profile_path = drupal_get_path('profile', $installProfile);
+      $profile_path = \Drupal::service('extension.list.profile')->getPath($installProfile);
       $directories[] = "$profile_path/libraries/";
     }
 
@@ -124,7 +124,7 @@ class AnchorLink extends CKEditorPluginBase {
     // If library is not found, then look in the current profile libraries path.
     if (!$libraryFound) {
       if ($installProfile = \Drupal::installProfile()) {
-        $profilePath = drupal_get_path('profile', $installProfile);
+        $profilePath = \Drupal::service('extension.list.profile')->getPath($installProfile);
         $profilePath .= '/libraries/link';
 
         // Is the library found in the current profile libraries path.
