diff --git a/cookiec.info.yml b/cookiec.info.yml
index a93a9f7..f1ae136 100644
--- a/cookiec.info.yml
+++ b/cookiec.info.yml
@@ -1,8 +1,7 @@
 name: CookieC
 type: module
-core: 8.x
 # version: 8.x-1.0
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 description: This module aims at making the website compliant with the new EU cookie regulation
 configure: cookiec.settings
 
diff --git a/src/EventSubscriber/CookiecSubscriber.php b/src/EventSubscriber/CookiecSubscriber.php
index 84e450a..0be5cc9 100644
--- a/src/EventSubscriber/CookiecSubscriber.php
+++ b/src/EventSubscriber/CookiecSubscriber.php
@@ -47,9 +47,9 @@ class CookiecSubscriber implements EventSubscriberInterface {
   }
 
   /**
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    */
-  public function showPopupMessage(FilterResponseEvent $event) {
+  public function showPopupMessage(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
 
     // Check permissions to display message.
     $response = $event->getResponse();
@@ -66,7 +66,7 @@ class CookiecSubscriber implements EventSubscriberInterface {
     );
 
     $twig = \Drupal::service('twig');
-    $template = $twig->loadTemplate(drupal_get_path('module', 'cookiec') . '/templates/cookiec_info.html.twig');
+    $template = $twig->loadTemplate(\Drupal::service('extension.list.module')->getPath('cookiec') . '/templates/cookiec_info.html.twig');
     $html_info = $template->render($variables);
 
 
@@ -76,7 +76,7 @@ class CookiecSubscriber implements EventSubscriberInterface {
       'hide' => 'hide',
     );
     $twig = \Drupal::service('twig');
-    $template = $twig->loadTemplate(drupal_get_path('module', 'cookiec') . '/templates/cookiec_agreed.html.twig');
+    $template = $twig->loadTemplate(\Drupal::service('extension.list.module')->getPath('cookiec') . '/templates/cookiec_agreed.html.twig');
     $html_agreed = $template->render($variables);
 
     $variables = array(
