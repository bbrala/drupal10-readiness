diff --git a/src/Event/MessageEvent.php b/src/Event/MessageEvent.php
index e8174ef..ff005c3 100644
--- a/src/Event/MessageEvent.php
+++ b/src/Event/MessageEvent.php
@@ -5,7 +5,7 @@ namespace Drupal\migration_tools\Event;
 use Drupal\Component\Render\FormattableMarkup;
 use Symfony\Component\EventDispatcher\Event;
 
-class MessageEvent extends Event {
+class MessageEvent extends \Symfony\Contracts\EventDispatcher\Event {
 
   /**
    * The template string for the message.
diff --git a/src/Redirects.php b/src/Redirects.php
index 61af955..dcbdc80 100644
--- a/src/Redirects.php
+++ b/src/Redirects.php
@@ -459,7 +459,7 @@ class Redirects {
       if (!empty($file_id)) {
         $file_object = File::load($file_id);
         $file_uri = $file_object->getFileUri();
-        $path = file_url_transform_relative(file_create_url($file_uri));
+        $path = \Drupal::service('file_url_generator')->generateString($file_uri);
       }
     }
 
@@ -482,7 +482,7 @@ class Redirects {
     if (!empty($field[$language])) {
       foreach ($field[$language] as $delta => $item) {
         $file = File::load($item['fid']);
-        $url = file_create_url($file->uri);
+        $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->uri);
         $parsed_url = parse_url($url);
         $destination = ltrim($parsed_url['path'], '/');
         redirect_delete_by_path($destination);
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index d49239c..4c988dd 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -29,7 +29,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
