diff --git a/checklistapi.module b/checklistapi.module
index 79e1bbd..ee54101 100644
--- a/checklistapi.module
+++ b/checklistapi.module
@@ -225,7 +225,7 @@ function checklistapi_strtolowercamel($string) {
 function checklistapi_theme() {
   return [
     'checklistapi_progress_bar' => [
-      'path' => drupal_get_path('module', 'checklistapi') . '/templates',
+      'path' => \Drupal::service('extension.list.module')->getPath('checklistapi') . '/templates',
       'template' => 'checklistapi-progress-bar',
       'variables' => [
         'message' => '',
diff --git a/tests/src/Functional/ChecklistapiTest.php b/tests/src/Functional/ChecklistapiTest.php
index 2b2d7e1..dfe962c 100644
--- a/tests/src/Functional/ChecklistapiTest.php
+++ b/tests/src/Functional/ChecklistapiTest.php
@@ -42,7 +42,7 @@ class ChecklistapiTest extends BrowserTestBase {
    *
    * @throws \Drupal\Core\Entity\EntityStorageException
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create a privileged user.
@@ -63,7 +63,7 @@ class ChecklistapiTest extends BrowserTestBase {
     // Assert that access is granted to a user with "edit any checklistapi
     // checklist" permission.
     $this->drupalGet('admin/config/development/checklistapi-example');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
     // Assert that access is granted to a user with checklist-specific
     // permission.
@@ -71,12 +71,12 @@ class ChecklistapiTest extends BrowserTestBase {
     $semi_privileged_user = $this->drupalCreateUser($permissions);
     $this->drupalLogin($semi_privileged_user);
     $this->drupalGet('admin/config/development/checklistapi-example');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
 
     // Assert that access is denied to a non-privileged user.
     $this->drupalLogout();
     $this->drupalGet('admin/config/development/checklistapi-example');
-    $this->assertResponse(403);
+    $this->assertSession()->statusCodeEquals(403);
   }
 
   /**
@@ -85,7 +85,7 @@ class ChecklistapiTest extends BrowserTestBase {
   public function testChecklistComposition() {
     // Assert that a per-checklist help block is created.
     $this->drupalGet('admin/config/development/checklistapi-example');
-    $this->assertRaw('This checklist based on');
+    $this->assertSession()->responseContains('This checklist based on');
   }
 
   /**
