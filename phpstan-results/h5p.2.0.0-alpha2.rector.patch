diff --git a/modules/h5peditor/h5peditor.module b/modules/h5peditor/h5peditor.module
index 471c049..be8edc0 100644
--- a/modules/h5peditor/h5peditor.module
+++ b/modules/h5peditor/h5peditor.module
@@ -12,7 +12,7 @@
 function h5peditor_library_info_build() {
    $libraries = [];
 
-   $h5p_module_path = drupal_get_path('module', 'h5p');
+   $h5p_module_path = \Drupal::service('extension.list.module')->getPath('h5p');
    $libraries['h5peditor.assets'] = [
      'version' => '1.0',
      'license' => [
diff --git a/modules/h5peditor/src/H5PEditor/H5PEditorUtilities.php b/modules/h5peditor/src/H5PEditor/H5PEditorUtilities.php
index 7ca966a..fb4b4e9 100644
--- a/modules/h5peditor/src/H5PEditor/H5PEditorUtilities.php
+++ b/modules/h5peditor/src/H5PEditor/H5PEditorUtilities.php
@@ -36,7 +36,7 @@ class H5PEditorUtilities {
    */
   public static function getEditorSettings() {
     $contentValidator = H5PDrupal::getInstance('contentvalidator');
-    $h5p_module_rel      = base_path() . drupal_get_path('module', 'h5p');
+    $h5p_module_rel      = base_path() . \Drupal::service('extension.list.module')->getPath('h5p');
 
     $settings = [
       'filesPath'          => base_path() . H5PDrupal::getRelativeH5PPath(),
@@ -63,7 +63,7 @@ class H5PEditorUtilities {
    * @return array Js and css for showing the editor
    */
   private static function getEditorAssets() {
-    $h5p_module_rel = base_path() . drupal_get_path('module', 'h5p');
+    $h5p_module_rel = base_path() . \Drupal::service('extension.list.module')->getPath('h5p');
     $corePath   = "{$h5p_module_rel}/vendor/h5p/h5p-core/";
     $editorPath = "{$h5p_module_rel}/vendor/h5p/h5p-editor/";
 
@@ -122,7 +122,7 @@ class H5PEditorUtilities {
   private static function getTranslationFilePath() {
     $language = \Drupal::languageManager()->getCurrentLanguage()->getId();
 
-    $h5p_module_rel = drupal_get_path('module', 'h5p');
+    $h5p_module_rel = \Drupal::service('extension.list.module')->getPath('h5p');
     $languageFolder = "{$h5p_module_rel}/vendor/h5p/h5p-editor/language";
     $defaultLanguage = "{$languageFolder}/en.js";
     $chosenLanguage = "{$languageFolder}/{$language}.js";
diff --git a/src/Controller/H5PAJAX.php b/src/Controller/H5PAJAX.php
index 5a1937b..f6268f1 100644
--- a/src/Controller/H5PAJAX.php
+++ b/src/Controller/H5PAJAX.php
@@ -112,7 +112,7 @@ class H5PAJAX extends ControllerBase {
       ->fields($fields)
       ->execute();
 
-    $this->eventDispatcher->dispatch(FinishedEvent::FINISHED_EVENT, new FinishedEvent($fields));
+    $this->eventDispatcher->dispatch(new FinishedEvent($fields), FinishedEvent::FINISHED_EVENT);
 
     return new JsonResponse(['success' => TRUE]);
   }
diff --git a/src/Controller/H5PEmbed.php b/src/Controller/H5PEmbed.php
index 5e58623..c476034 100644
--- a/src/Controller/H5PEmbed.php
+++ b/src/Controller/H5PEmbed.php
@@ -26,7 +26,7 @@ class H5PEmbed extends ControllerBase {
       ],
     ];
 
-    $h5p_module_path = drupal_get_path('module', 'h5p');
+    $h5p_module_path = \Drupal::service('extension.list.module')->getPath('h5p');
 
     // Load requested content
     $h5p_content = H5PContent::load($id);
diff --git a/src/Entity/H5PContent.php b/src/Entity/H5PContent.php
index ddc651c..16cb0a8 100644
--- a/src/Entity/H5PContent.php
+++ b/src/Entity/H5PContent.php
@@ -195,7 +195,7 @@ class H5PContent extends ContentEntityBase implements ContentEntityInterface {
     }
 
     $h5p_path = $interface->getOption('default_path', 'h5p');
-    return file_create_url("public://{$h5p_path}/exports/interactive-content-" . $this->id() . '.h5p');
+    return \Drupal::service('file_url_generator')->generateAbsoluteString("public://{$h5p_path}/exports/interactive-content-" . $this->id() . '.h5p');
   }
 
   /**
@@ -307,7 +307,7 @@ class H5PContent extends ContentEntityBase implements ContentEntityInterface {
     $filtered_parameters = $this->getFilteredParameters();
     $display_options = $core->getDisplayOptionsForView($this->get('disabled_features')->value, $canUpdateEntity);
 
-    $h5p_module_path = drupal_get_path('module', 'h5p');
+    $h5p_module_path = \Drupal::service('extension.list.module')->getPath('h5p');
     $embed_url = Url::fromUri('internal:/h5p/' . $this->id() . '/embed', ['absolute' => TRUE])->toString(TRUE)->getGeneratedUrl();
     $resizer_url = Url::fromUri('internal:/' . $h5p_module_path . '/vendor/h5p/h5p-core/js/h5p-resizer.js', ['absolute' => TRUE, 'language' => FALSE])->toString(TRUE)->getGeneratedUrl();
     $metadata = $this->getMetadata();
diff --git a/src/Event/FinishedEvent.php b/src/Event/FinishedEvent.php
index 43eba57..6c2eee0 100644
--- a/src/Event/FinishedEvent.php
+++ b/src/Event/FinishedEvent.php
@@ -7,7 +7,7 @@ use Symfony\Component\EventDispatcher\Event;
 /**
  * Wraps a node insertion demo event for event listeners.
  */
-class FinishedEvent extends Event {
+class FinishedEvent extends \Symfony\Contracts\EventDispatcher\Event {
 
   const FINISHED_EVENT = 'h5p.finished';
 
diff --git a/src/Form/H5PAdminSettingsForm.php b/src/Form/H5PAdminSettingsForm.php
index a1ea1f8..f7b1038 100644
--- a/src/Form/H5PAdminSettingsForm.php
+++ b/src/Form/H5PAdminSettingsForm.php
@@ -27,7 +27,7 @@ class H5PAdminSettingsForm extends FormBase {
     $interface = H5PDrupal::getInstance();
     $core = H5PDrupal::getInstance('core');
 
-    $path = drupal_get_path('module', 'h5p');
+    $path = \Drupal::service('extension.list.module')->getPath('h5p');
 
     // Get server setup error messages
     $server_setup_errors = $core->checkSetupErrorMessage()->errors;
diff --git a/src/Form/H5PContentUpgradeForm.php b/src/Form/H5PContentUpgradeForm.php
index f8e0366..9dd77e4 100644
--- a/src/Form/H5PContentUpgradeForm.php
+++ b/src/Form/H5PContentUpgradeForm.php
@@ -43,7 +43,7 @@ class H5PContentUpgradeForm extends FormBase {
 
     $contents_plural = \Drupal::translation()->formatPlural($contents, '1 content instance', '@count content instances');
     $returnLink = Link::fromTextAndUrl(t('Return'), Url::fromUri('internal:/admin/content/h5p/'))->toString();
-    $h5p_module_rel = base_path() . drupal_get_path('module', 'h5p');
+    $h5p_module_rel = base_path() . \Drupal::service('extension.list.module')->getPath('h5p');
     $settings = [
       'libraryInfo' => [
         'message' => t('You are about to upgrade %num. Please select upgrade version.', ['%num' => $contents_plural]),
diff --git a/src/H5PDrupal/H5PDrupal.php b/src/H5PDrupal/H5PDrupal.php
index 1f501b9..14b4a98 100644
--- a/src/H5PDrupal/H5PDrupal.php
+++ b/src/H5PDrupal/H5PDrupal.php
@@ -135,7 +135,7 @@ class H5PDrupal implements \H5PFrameworkInterface {
       'reportingIsEnabled' => ($interface->getOption('enable_lrs_content_types', FALSE) === 1) ? TRUE : FALSE,
       'libraryConfig' => $core->h5pF->getLibraryConfig(),
       'pluginCacheBuster' => '?' . \Drupal::state()->get('system.css_js_query_string', '0'),
-      'libraryUrl' => base_path() . drupal_get_path('module', 'h5p') . '/vendor/h5p/h5p-core/js',
+      'libraryUrl' => base_path() . \Drupal::service('extension.list.module')->getPath('h5p') . '/vendor/h5p/h5p-core/js',
     );
 
     if ($user->id()) {
@@ -170,7 +170,7 @@ class H5PDrupal implements \H5PFrameworkInterface {
 
     // Determine cache buster
     $cache_buster = \Drupal::state()->get('system.css_js_query_string', '0');
-    $h5p_module_path = drupal_get_path('module', 'h5p');
+    $h5p_module_path = \Drupal::service('extension.list.module')->getPath('h5p');
 
     // Add all core scripts
     foreach (\H5PCore::$scripts as $script) {
@@ -240,7 +240,7 @@ class H5PDrupal implements \H5PFrameworkInterface {
     }
     $cachedAsset = $optimizer->optimize($assets);
 
-    return array_map(function($publicUrl){ return file_create_url($publicUrl); }, array_column($cachedAsset, 'data'));
+    return array_map(function($publicUrl){ return \Drupal::service('file_url_generator')->generateAbsoluteString($publicUrl); }, array_column($cachedAsset, 'data'));
   }
 
   /**
diff --git a/src/Plugin/Field/FieldWidget/H5PUploadWidget.php b/src/Plugin/Field/FieldWidget/H5PUploadWidget.php
index d34a9d7..bfbe93e 100644
--- a/src/Plugin/Field/FieldWidget/H5PUploadWidget.php
+++ b/src/Plugin/Field/FieldWidget/H5PUploadWidget.php
@@ -66,7 +66,7 @@ class H5PUploadWidget extends H5PWidgetBase {
     $interface = H5PDrupal::getInstance('interface', $file_field);
     $h5p_path = $interface->getOption('default_path', 'h5p');
     $temporary_file_path = "public://{$h5p_path}/temp/" . uniqid('h5p-');
-    file_prepare_directory($temporary_file_path, FILE_CREATE_DIRECTORY);
+    \Drupal::service('file_system')->prepareDirectory($temporary_file_path, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY);
 
     // Validate file
     $files = file_save_upload($file_field, $validators, $temporary_file_path);
