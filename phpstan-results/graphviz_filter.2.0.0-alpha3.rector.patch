diff --git a/graphviz_filter.info.yml b/graphviz_filter.info.yml
index b86495c..cfe80f3 100644
--- a/graphviz_filter.info.yml
+++ b/graphviz_filter.info.yml
@@ -1,8 +1,7 @@
 name: Graphviz Filter
 type: module
 description: Treats input text as DOT syntax and passes it to dot, neato or other, embedding the output into the page.
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Filters
 
 # Information added by Drupal.org packaging script on 2020-09-11
diff --git a/src/Plugin/Filter/FilterGraphviz.php b/src/Plugin/Filter/FilterGraphviz.php
index 29f86cc..6932709 100644
--- a/src/Plugin/Filter/FilterGraphviz.php
+++ b/src/Plugin/Filter/FilterGraphviz.php
@@ -259,7 +259,7 @@ class FilterGraphviz extends FilterBase implements ContainerFactoryPluginInterfa
     $filename = hash('sha256', $text);
     $this->fileSystem->prepareDirectory($directory, FileSystem::CREATE_DIRECTORY|FileSystem::MODIFY_PERMISSIONS);
     $destination = $directory . '/' . $filename . '.dot';
-    $file = file_save_data($text, $destination, FileSystem::EXISTS_REPLACE);
+    $file = \Drupal::service('file.repository')->writeData($text, $destination, FileSystem::EXISTS_REPLACE);
 
     // Render desired formats.
     $build = [
diff --git a/src/Plugin/FilterFormat/SvgFilterFormat.php b/src/Plugin/FilterFormat/SvgFilterFormat.php
index 2463d0a..088b277 100644
--- a/src/Plugin/FilterFormat/SvgFilterFormat.php
+++ b/src/Plugin/FilterFormat/SvgFilterFormat.php
@@ -27,8 +27,8 @@ class SvgFilterFormat extends FilterFormatBase {
    * {@inheritdoc}
    */
   public function render($destination, $format_destination, $filename, $format, array $arguments) {
-    $outurl = file_create_url($format_destination);
-    $modurl = url(drupal_get_path('module', 'graphviz_formats'), array('absolute' => TRUE));
+    $outurl = \Drupal::service('file_url_generator')->generateAbsoluteString($format_destination);
+    $modurl = url(\Drupal::service('extension.list.module')->getPath('graphviz_formats'), array('absolute' => TRUE));
     if ($arguments['zgrviewer']['value']) {
       return <<<EOS
 
