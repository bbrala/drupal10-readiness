diff --git a/src/Common/PlanyoUtils.php b/src/Common/PlanyoUtils.php
index f26c64f..c9d7b4a 100644
--- a/src/Common/PlanyoUtils.php
+++ b/src/Common/PlanyoUtils.php
@@ -106,7 +106,7 @@ class PlanyoUtils {
     $user = Drupal::currentUser();
     $planyo_login_info = null;
     if ($user && $user->id() && PlanyoUtils::variable_get('planyo_use_login', '0') == '1') {
-      $user_fields = user_load($user->id());
+      $user_fields = \Drupal::service('entity_type.manager')->getStorage('user')->load($user->id());
       $last_name = null;
       $first_name = null;
       $email = null;
diff --git a/src/PlanyoUtils.php b/src/PlanyoUtils.php
index f26c64f..c9d7b4a 100644
--- a/src/PlanyoUtils.php
+++ b/src/PlanyoUtils.php
@@ -106,7 +106,7 @@ class PlanyoUtils {
     $user = Drupal::currentUser();
     $planyo_login_info = null;
     if ($user && $user->id() && PlanyoUtils::variable_get('planyo_use_login', '0') == '1') {
-      $user_fields = user_load($user->id());
+      $user_fields = \Drupal::service('entity_type.manager')->getStorage('user')->load($user->id());
       $last_name = null;
       $first_name = null;
       $email = null;
