diff --git a/planyo.info.yml b/planyo.info.yml
index 47219ee..4838c56 100755
--- a/planyo.info.yml
+++ b/planyo.info.yml
@@ -1,6 +1,5 @@
 name: Planyo.com reservation system module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
 description: "This module embeds the Planyo.com online reservation system.<br/> Before using it, you'll need to create an account at planyo.com. Info: http://www.planyo.com/drupal"
 package: Custom
diff --git a/src/Common/PlanyoUtils.php b/src/Common/PlanyoUtils.php
index f26c64f..877dfe2 100644
--- a/src/Common/PlanyoUtils.php
+++ b/src/Common/PlanyoUtils.php
@@ -106,7 +106,7 @@ class PlanyoUtils {
     $user = Drupal::currentUser();
     $planyo_login_info = null;
     if ($user && $user->id() && PlanyoUtils::variable_get('planyo_use_login', '0') == '1') {
-      $user_fields = user_load($user->id());
+      $user_fields = \Drupal::service('entity_type.manager')->getStorage('user')->load($user->id());
       $last_name = null;
       $first_name = null;
       $email = null;
@@ -362,7 +362,7 @@ class PlanyoUtils {
     $retarr['#attached']['drupalSettings']['planyo'] = array('ulap_script' => $ulap_script,
                                           'drupal_version' => 8,
                                           'planyo_site_id' => $planyo_site_id,  // ID of your planyo site
-                                          'planyo_files_location' => drupal_get_path('module', 'planyo'),  // relative or absolute directory where the planyo files are kept
+                                          'planyo_files_location' => \Drupal::service('extension.list.module')->getPath('planyo'),  // relative or absolute directory where the planyo files are kept
                                           'extra_search_fields' => PlanyoUtils::variable_get('planyo_extra_search_fields', ''), // comma-separated extra fields in the search box
                                           'planyo_language' => $default_language,  // you can optionally change the language here, e.g. 'FR' or 'ES'
                                           'sort_fields' => PlanyoUtils::variable_get('planyo_sort_fields', 'name,price'),  // comma-separated sort fields -- a single field will hide the sort dropdown box
diff --git a/src/PlanyoUtils.php b/src/PlanyoUtils.php
index f26c64f..877dfe2 100644
--- a/src/PlanyoUtils.php
+++ b/src/PlanyoUtils.php
@@ -106,7 +106,7 @@ class PlanyoUtils {
     $user = Drupal::currentUser();
     $planyo_login_info = null;
     if ($user && $user->id() && PlanyoUtils::variable_get('planyo_use_login', '0') == '1') {
-      $user_fields = user_load($user->id());
+      $user_fields = \Drupal::service('entity_type.manager')->getStorage('user')->load($user->id());
       $last_name = null;
       $first_name = null;
       $email = null;
@@ -362,7 +362,7 @@ class PlanyoUtils {
     $retarr['#attached']['drupalSettings']['planyo'] = array('ulap_script' => $ulap_script,
                                           'drupal_version' => 8,
                                           'planyo_site_id' => $planyo_site_id,  // ID of your planyo site
-                                          'planyo_files_location' => drupal_get_path('module', 'planyo'),  // relative or absolute directory where the planyo files are kept
+                                          'planyo_files_location' => \Drupal::service('extension.list.module')->getPath('planyo'),  // relative or absolute directory where the planyo files are kept
                                           'extra_search_fields' => PlanyoUtils::variable_get('planyo_extra_search_fields', ''), // comma-separated extra fields in the search box
                                           'planyo_language' => $default_language,  // you can optionally change the language here, e.g. 'FR' or 'ES'
                                           'sort_fields' => PlanyoUtils::variable_get('planyo_sort_fields', 'name,price'),  // comma-separated sort fields -- a single field will hide the sort dropdown box
