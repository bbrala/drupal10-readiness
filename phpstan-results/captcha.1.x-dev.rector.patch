diff --git a/captcha.module b/captcha.module
index 30b0ac6..6dbac6f 100755
--- a/captcha.module
+++ b/captcha.module
@@ -98,7 +98,7 @@ function captcha_theme() {
     'captcha' => [
       'render element' => 'element',
       'template' => 'captcha',
-      'path' => drupal_get_path('module', 'captcha') . '/templates',
+      'path' => \Drupal::service('extension.list.module')->getPath('captcha') . '/templates',
     ],
   ];
 }
diff --git a/image_captcha/image_captcha.install b/image_captcha/image_captcha.install
index 051a850..81b728d 100755
--- a/image_captcha/image_captcha.install
+++ b/image_captcha/image_captcha.install
@@ -38,8 +38,8 @@ function image_captcha_install() {
   $config = \Drupal::configFactory()->getEditable('image_captcha.settings');
 
   $config->set('image_captcha_fonts', [
-    hash('sha256', drupal_get_path('module', 'image_captcha') . '/fonts/Tesox/tesox.ttf'),
-    hash('sha256', drupal_get_path('module', 'image_captcha') . '/fonts/Tuffy/Tuffy.ttf'),
+    hash('sha256', \Drupal::service('extension.list.module')->getPath('image_captcha') . '/fonts/Tesox/tesox.ttf'),
+    hash('sha256', \Drupal::service('extension.list.module')->getPath('image_captcha') . '/fonts/Tuffy/Tuffy.ttf'),
   ])->save(TRUE);
 }
 
diff --git a/image_captcha/image_captcha.module b/image_captcha/image_captcha.module
index 9518697..b7ec686 100755
--- a/image_captcha/image_captcha.module
+++ b/image_captcha/image_captcha.module
@@ -84,7 +84,7 @@ function _image_captcha_get_available_fonts_from_directories($directories = NULL
   if ($directories === NULL) {
     $request = \Drupal::service('request_stack')->getCurrentRequest();
     $directories = [
-      drupal_get_path('module', 'image_captcha') . '/fonts',
+      \Drupal::service('extension.list.module')->getPath('image_captcha') . '/fonts',
       'sites/all/libraries/fonts',
       DrupalKernel::findSitePath($request) . '/libraries/fonts',
     ];
diff --git a/tests/src/Functional/CaptchaCronTest.php b/tests/src/Functional/CaptchaCronTest.php
index 2fc237c..62894db 100644
--- a/tests/src/Functional/CaptchaCronTest.php
+++ b/tests/src/Functional/CaptchaCronTest.php
@@ -34,7 +34,7 @@ class CaptchaCronTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     ini_set('session.gc_maxlifetime', 60 * 60 * 24);
diff --git a/tests/src/Functional/CaptchaWebTestBase.php b/tests/src/Functional/CaptchaWebTestBase.php
index 248b9dd..913f37b 100755
--- a/tests/src/Functional/CaptchaWebTestBase.php
+++ b/tests/src/Functional/CaptchaWebTestBase.php
@@ -68,7 +68,7 @@ abstract class CaptchaWebTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     // Load two modules: the captcha module itself and the comment
     // module for testing anonymous comments.
     parent::setUp();
diff --git a/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php b/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
index de95902..63bb518 100644
--- a/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
+++ b/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
@@ -43,7 +43,7 @@ class MigrateCaptchaPointsTest extends MigrateDrupal7TestBase {
     parent::setUp();
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
-      drupal_get_path('module', 'captcha'),
+      \Drupal::service('extension.list.module')->getPath('captcha'),
       'tests',
       'fixtures',
       'drupal7.php',
diff --git a/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php b/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
index 477ad80..2e38743 100644
--- a/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
+++ b/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
@@ -43,7 +43,7 @@ class MigrateCaptchaSimpleConfigurationTest extends MigrateDrupal7TestBase {
     parent::setUp();
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
-      drupal_get_path('module', 'captcha'),
+      \Drupal::service('extension.list.module')->getPath('captcha'),
       'tests',
       'fixtures',
       'drupal7.php',
diff --git a/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php b/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
index 4192117..7c77e55 100644
--- a/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
+++ b/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
@@ -18,10 +18,11 @@ use Symfony\Component\DependencyInjection\ContainerInterface;
  */
 class CaptchaPointListBuilderTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Set up.
    */
-  public function setUp() {
+  public function setUp(): void {
     $this->mockModuleHandler = $this->prophesize(ModuleHandlerInterface::class);
     $this->mockModuleHandler->invokeAll(Argument::any(), Argument::any())->willReturn([]);
     $this->mockModuleHandler->alter(Argument::any(), Argument::any(), Argument::any())->willReturn([]);
