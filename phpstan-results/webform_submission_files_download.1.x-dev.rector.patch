diff --git a/src/Controller/DefaultController.php b/src/Controller/DefaultController.php
index 94c09fb..ce0ff69 100644
--- a/src/Controller/DefaultController.php
+++ b/src/Controller/DefaultController.php
@@ -39,7 +39,7 @@ class DefaultController extends ControllerBase {
     }
 
     $filename = $filename . '.zip';
-    $tmp_file = file_save_data('', 'private://' . $filename);
+    $tmp_file = \Drupal::service('file.repository')->writeData('', 'private://' . $filename);
     $tmp_file->status = 0;
     $tmp_file->save();
 
diff --git a/webform_submission_files_download.info.yml b/webform_submission_files_download.info.yml
index 9b012c3..4403c6d 100644
--- a/webform_submission_files_download.info.yml
+++ b/webform_submission_files_download.info.yml
@@ -1,6 +1,5 @@
 name: 'Webform Submission Files Download'
 type: module
 description: 'Allow to download files attached to a single submission'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'webform'
