diff --git a/append_file_info.info.yml b/append_file_info.info.yml
index 39f5940..f28bf81 100644
--- a/append_file_info.info.yml
+++ b/append_file_info.info.yml
@@ -2,8 +2,7 @@ name: Append File Info
 description: Appends file info (extension, size) to links to local managed files.
 
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 # Information added by Drupal.org packaging script on 2021-03-10
 version: '8.x-1.0-rc3'
diff --git a/append_file_info.module b/append_file_info.module
index 39d13d5..d457fcc 100644
--- a/append_file_info.module
+++ b/append_file_info.module
@@ -39,7 +39,7 @@ function _append_file_info_preprocess_file_link(&$variables) {
   // to ensure different file URLs are generated for different sites in a
   // multisite setup, including HTTP and HTTPS versions of the same site.
   // Fix in https://www.drupal.org/node/2646744.
-  $url = file_create_url($file_entity->getFileUri());
+  $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file_entity->getFileUri());
   $variables['#cache']['contexts'][] = 'url.site';
 
   $mime_type = $file->getMimeType();
