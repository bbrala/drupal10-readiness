diff --git a/src/EventSubscriber/RestrictIpEventSubscriber.php b/src/EventSubscriber/RestrictIpEventSubscriber.php
index 30750bf..d95f62a 100644
--- a/src/EventSubscriber/RestrictIpEventSubscriber.php
+++ b/src/EventSubscriber/RestrictIpEventSubscriber.php
@@ -85,7 +85,7 @@ class RestrictIpEventSubscriber implements EventSubscriberInterface
 		return $events;
 	}
 
-	public function checkIpRestricted(GetResponseEvent $event)
+	public function checkIpRestricted(\Symfony\Component\HttpKernel\Event\RequestEvent $event)
 	{
 		unset($_SESSION['restrict_ip']);
 
diff --git a/tests/src/Unit/Service/RestrictIpServiceTest.php b/tests/src/Unit/Service/RestrictIpServiceTest.php
index bbed4c1..bd1a32f 100644
--- a/tests/src/Unit/Service/RestrictIpServiceTest.php
+++ b/tests/src/Unit/Service/RestrictIpServiceTest.php
@@ -22,27 +22,17 @@ class RestrictIpServiceTest extends UnitTestCase
 	/**
 	 * {@inheritdoc}
 	 */
-	public function setUp()
+	public function setUp(): void
 	{
-		$this->currentUser = $this->getMockBuilder('Drupal\Core\Session\AccountProxyInterface')
-			->disableOriginalConstructor()
-			->getMock();
+		$this->currentUser = $this->createMock('Drupal\Core\Session\AccountProxyInterface');
 
-		$this->currentPathStack = $this->getMockBuilder('Drupal\Core\Path\CurrentPathStack')
-			->disableOriginalConstructor()
-			->getMock();
+		$this->currentPathStack = $this->createMock('Drupal\Core\Path\CurrentPathStack');
 
-		$this->requestStack = $this->getMockBuilder('Symfony\Component\HttpFoundation\RequestStack')
-			->disableOriginalConstructor()
-			->getMock();
+		$this->requestStack = $this->createMock('Symfony\Component\HttpFoundation\RequestStack');
 
-		$this->request = $this->getMockBuilder('Symfony\Component\HttpFoundation\Request')
-			->disableOriginalConstructor()
-			->getMock();
+		$this->request = $this->createMock('Symfony\Component\HttpFoundation\Request');
 
-		$this->mapper = $this->getMockBuilder('Drupal\restrict_ip\Mapper\RestrictIpMapper')
-			->disableOriginalConstructor()
-			->getMock();
+		$this->mapper = $this->createMock('Drupal\restrict_ip\Mapper\RestrictIpMapper');
 
 		$this->mapper->expects($this->any())
 			->method('getWhitelistedPaths')
@@ -52,9 +42,7 @@ class RestrictIpServiceTest extends UnitTestCase
 			->method('getBlacklistedPaths')
 			->willReturn(['/node/1']);
 
-		$this->pathMatcher = $this->getMockbuilder('Drupal\Core\Path\PathMatcherInterface')
-			->disableOriginalConstructor()
-			->getMock();
+		$this->pathMatcher = $this->createMock('Drupal\Core\Path\PathMatcherInterface');
 	}
 
 	/**
@@ -244,9 +232,7 @@ class RestrictIpServiceTest extends UnitTestCase
 			'white_black_list' => 0,
 		]);
 
-		$mapper = $this->getMockBuilder('Drupal\restrict_ip\Mapper\RestrictIpMapper')
-			->disableOriginalConstructor()
-			->getMock();
+		$mapper = $this->createMock('Drupal\restrict_ip\Mapper\RestrictIpMapper');
 
 		$mapper->expects($this->any())
 			->method('getWhitelistedIpAddresses')
