[parsing] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.install
[refactoring] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.install
[post rectors] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.install
[print] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.install
[parsing] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.module
[refactoring] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.module
[post rectors] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.module
[print] modules/contrib/optimized_assets_proxy/optimized_assets_proxy.module
[parsing] modules/contrib/optimized_assets_proxy/src/AmpCssCollectionRenderer.php
[printing skipped due error] modules/contrib/optimized_assets_proxy/src/AmpCssCollectionRenderer.php
[parsing] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[refactoring] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[post rectors] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[print] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[refactoring] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[post rectors] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[print] modules/contrib/optimized_assets_proxy/src/AssetDumper.php
[parsing] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[refactoring] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[post rectors] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[print] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[refactoring] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[post rectors] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[print] modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php
[parsing] modules/contrib/optimized_assets_proxy/src/OptimizedAssetsProxyServiceProvider.php
[refactoring] modules/contrib/optimized_assets_proxy/src/OptimizedAssetsProxyServiceProvider.php
[post rectors] modules/contrib/optimized_assets_proxy/src/OptimizedAssetsProxyServiceProvider.php
[print] modules/contrib/optimized_assets_proxy/src/OptimizedAssetsProxyServiceProvider.php

2 files with changes
====================

1) modules/contrib/optimized_assets_proxy/src/EventSubscriber/MissingAsset.php:51

    ---------- begin diff ----------
@@ @@
     $this->eventDispatcher = $event_dispatcher;
   }

-  public function findAndWrite(GetResponseEvent $event) {
+  public function findAndWrite(\Symfony\Component\HttpKernel\Event\RequestEvent $event) {
     $request_path = $event->getRequest()->getPathInfo();

     //$assets_path = file_url_transform_relative(file_create_url('assets://'));
@@ @@
     else {
       $stream_wrapper_uri = 'public://';
     }
-    $assets_path = file_url_transform_relative(file_create_url($stream_wrapper_uri));
+    $assets_path = \Drupal::service('file_url_generator')->generateString($stream_wrapper_uri);

     $matches = [];
     if (preg_match("@^$assets_path(css)/css_|(js)/js_@", $request_path, $matches)) {
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


2) modules/contrib/optimized_assets_proxy/src/AssetDumper.php:14

    ---------- begin diff ----------
@@ @@
       ->fields([
         'file' => basename($uri),
         'data' => $data,
-        'timestamp' => REQUEST_TIME,
+        'timestamp' => \Drupal::time()->getRequestTime(),
       ])
       ->execute();
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [ERROR] Could not process                                                      
         "modules/contrib/optimized_assets_proxy/src/AmpCssCollectionRenderer.php"
         file, due to:                                                          
         "Analyze error: "Class Drupal\amp\Asset\AmpCssCollectionRenderer not   
         found.". Include your files in "$parameters->set(Option::AUTOLOAD_PATHS,
         [...]);" or "$parameters->set(Option::BOOTSTRAP_FILES, [...]);" in     
         "rector.php" config.                                                   
         See https://github.com/rectorphp/rector#configuration".                

