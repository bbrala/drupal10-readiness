diff --git a/druppio_small_business.theme b/druppio_small_business.theme
index 2e9edb7..a3710eb 100644
--- a/druppio_small_business.theme
+++ b/druppio_small_business.theme
@@ -38,7 +38,7 @@ function druppio_small_business_preprocess_page(&$vars) {
   foreach ($sections as $section) {
     $bg = $config->get('bg_upload_' . $section);
     if($bg_image = File::load($bg[0])){
-      $vars['page']['bg_images']['section_' . $section] = file_create_url($bg_image->getFileUri());
+      $vars['page']['bg_images']['section_' . $section] = \Drupal::service('file_url_generator')->generateAbsoluteString($bg_image->getFileUri());
     }
   }
   $vars['page']['active_theme_name'] = $theme;
@@ -130,7 +130,7 @@ function _druppio_small_business_cache($location, $synchronize = FALSE) {
           \Drupal::logger('druppio_small_business')->info('Locally cached JS file has been saved.');
 
           // Return the local JS file path.
-          return file_url_transform_relative(file_create_url($file_destination));
+          return \Drupal::service('file_url_generator')->generateString($file_destination);
         }
       }
     }
@@ -140,7 +140,7 @@ function _druppio_small_business_cache($location, $synchronize = FALSE) {
   }
   else {
     // Return the local JS file path.
-    return file_url_transform_relative(file_create_url($file_destination));
+    return \Drupal::service('file_url_generator')->generateString($file_destination);
   }
 }
 
diff --git a/theme-settings.php b/theme-settings.php
index 04b6af2..dadb720 100644
--- a/theme-settings.php
+++ b/theme-settings.php
@@ -15,7 +15,7 @@ function druppio_small_business_form_system_theme_settings_alter(&$form, &$form_
 
   // Setting the build info because of this issue
   // https://www.drupal.org/node/1862892
-  $theme_file = drupal_get_path('theme', $theme) . '/theme-settings.php';
+  $theme_file = \Drupal::service('extension.list.theme')->getPath($theme) . '/theme-settings.php';
   $build_info = $form_state->getBuildInfo();
   if (!in_array($theme_file, $build_info['files'])) {
     $build_info['files'][] = $theme_file;
