diff --git a/image_browser.module b/image_browser.module
index dce5b2e..2d559cd 100644
--- a/image_browser.module
+++ b/image_browser.module
@@ -31,7 +31,7 @@ function template_preprocess_image_browser(&$variables){
     if($file = File::load($fid)){
       if($file->getMimeType() == 'image/svg+xml'){
         $variables['preview'] = array(
-          '#markup' => '<img src="' . file_create_url($file->getFileUri()) .'" style="max-width: 100px"/>',
+          '#markup' => '<img src="' . \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()) .'" style="max-width: 100px"/>',
         );
       }else{
         $variables['preview'] = array(
diff --git a/src/Controller/ImageBrowserController.php b/src/Controller/ImageBrowserController.php
index c5b9e7c..2947668 100644
--- a/src/Controller/ImageBrowserController.php
+++ b/src/Controller/ImageBrowserController.php
@@ -55,7 +55,7 @@ class ImageBrowserController extends ControllerBase {
     $fid = str_replace('file:', '', $file);
     if ($fid) {
       $file = File::load($fid);
-      $file_url = file_create_url($file->getFileUri());
+      $file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       if($file->getMimeType() == 'image/svg+xml'){
         $preview = array(
           '#markup' => '<img src="' . $file_url .'"/>',
diff --git a/src/Form/LibraryForm.php b/src/Form/LibraryForm.php
index 7ab518c..821b4a8 100644
--- a/src/Form/LibraryForm.php
+++ b/src/Form/LibraryForm.php
@@ -67,7 +67,7 @@ class LibraryForm extends FormBase {
     }
     if ($fid) {
       $file = File::load($fid);
-      $file_url = file_create_url($file->getFileUri());
+      $file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       if($file->getMimeType() == 'image/svg+xml'){
         $preview = array(
           '#markup' => '<img src="' . $file_url .'"/>',
diff --git a/src/Form/UploadForm.php b/src/Form/UploadForm.php
index 9b791e3..2db155a 100644
--- a/src/Form/UploadForm.php
+++ b/src/Form/UploadForm.php
@@ -65,7 +65,7 @@ class UploadForm extends FormBase {
     $response = new AjaxResponse();
     $fid = $form_state->getValue(array('image', 0));
     if ($file = File::load($fid)) {
-      $file_url = file_create_url($file->getFileUri());
+      $file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       if($file->getMimeType() == 'image/svg+xml'){
         $preview = array(
           '#markup' => '<img src="' . $file_url .'" style="max-width:100px"/>',
diff --git a/src/Plugin/views/field/ImageBrowserPreview.php b/src/Plugin/views/field/ImageBrowserPreview.php
index 6275fda..d73d733 100644
--- a/src/Plugin/views/field/ImageBrowserPreview.php
+++ b/src/Plugin/views/field/ImageBrowserPreview.php
@@ -25,7 +25,7 @@ class ImageBrowserPreview extends FieldPluginBase {
     $file = $values->_entity;
     if($file->getMimeType() == 'image/svg+xml'){
       return $build = [
-        '#markup' => '<img src="' . file_create_url($file->getFileUri()) .'"/>',
+        '#markup' => '<img src="' . \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()) .'"/>',
       ];
     }
     return $build = [
