diff --git a/name.install b/name.install
index 47cb0a8..e569044 100644
--- a/name.install
+++ b/name.install
@@ -78,14 +78,14 @@ function name_update_8202() {
 function name_update_8203() {
   $config_factory = \Drupal::configFactory();
 
-  $config_path = drupal_get_path('module', 'name') . '/config/install/name.generate.components.yml';
+  $config_path = \Drupal::service('extension.list.module')->getPath('name') . '/config/install/name.generate.components.yml';
   $data = Yaml::parse(file_get_contents($config_path));
   $config = $config_factory->getEditable('name.generate.components');
   $config->set('components', $data['components']);
   $config->set('gender', $data['gender']);
   $config->save(TRUE);
 
-  $config_path = drupal_get_path('module', 'name') . '/config/install/name.generate.preferred.yml';
+  $config_path = \Drupal::service('extension.list.module')->getPath('name') . '/config/install/name.generate.preferred.yml';
   $data = Yaml::parse(file_get_contents($config_path));
   $config = $config_factory->getEditable('name.generate.preferred');
   $config->set('preferred', $data['preferred']);
@@ -105,7 +105,7 @@ function name_update_8203() {
     $old_config->delete();
   }
   else {
-    $config_path = drupal_get_path('module', 'name') . '/config/install/name.generate.examples.yml';
+    $config_path = \Drupal::service('extension.list.module')->getPath('name') . '/config/install/name.generate.examples.yml';
     $data = Yaml::parse(file_get_contents($config_path));
     $config = $config_factory->getEditable('name.generate.examples');
     $config->set('examples', $data['examples']);
diff --git a/name.module b/name.module
index fe23d89..9e8efe1 100644
--- a/name.module
+++ b/name.module
@@ -482,7 +482,7 @@ function name_element_render_component(array $components, $component_key, array
         '#required' => $show_component_required_marker,
         '#title_display' => 'before',
       ];
-      $element['#title'] = render($label);
+      $element['#title'] = \Drupal::service('renderer')->render($label);
       break;
 
     case 'placeholder':
