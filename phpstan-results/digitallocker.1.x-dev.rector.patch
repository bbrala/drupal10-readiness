diff --git a/digitallocker_issuer/src/Controller/DownloadPdfController.php b/digitallocker_issuer/src/Controller/DownloadPdfController.php
index 3e8e172..e116e51 100644
--- a/digitallocker_issuer/src/Controller/DownloadPdfController.php
+++ b/digitallocker_issuer/src/Controller/DownloadPdfController.php
@@ -25,7 +25,7 @@ class DownloadPdfController extends ControllerBase {
    */
   public function downloadPdf(NodeInterface $node) {
     $content = SignedPdf::generate($node);
-    $path = tempnam(file_directory_temp(), 'dlpdf');
+    $path = tempnam(\Drupal::service('file_system')->getTempDirectory(), 'dlpdf');
     file_put_contents($path, $content);
 
     return (new BinaryFileResponse($path))
diff --git a/digitallocker_issuer/src/Controller/PullApiController.php b/digitallocker_issuer/src/Controller/PullApiController.php
index e814063..74afe9a 100644
--- a/digitallocker_issuer/src/Controller/PullApiController.php
+++ b/digitallocker_issuer/src/Controller/PullApiController.php
@@ -28,7 +28,7 @@ class PullApiController extends ControllerBase {
     $request = new \SimpleXMLElement($input);
     $attr = $request->attributes();
 
-    $alias = \Drupal::service('path.alias_manager')
+    $alias = \Drupal::service('path_alias.manager')
       ->getPathByAlias($request->DocDetails->URI);
     $params = Url::fromUri('internal:/' . $alias)->getRouteParameters();
     $entity_type = key($params);
diff --git a/digitallocker_issuer/src/Form/DigitalLockerEntityTypeSettings.php b/digitallocker_issuer/src/Form/DigitalLockerEntityTypeSettings.php
index 1769bb6..67e323c 100644
--- a/digitallocker_issuer/src/Form/DigitalLockerEntityTypeSettings.php
+++ b/digitallocker_issuer/src/Form/DigitalLockerEntityTypeSettings.php
@@ -55,7 +55,7 @@ class DigitalLockerEntityTypeSettings extends EntityForm {
     /* @var \Drupal\Core\Config\Entity\ConfigEntityTypeInterface $bundle */
     $field_types = [];
     $bundle = $form_state->getFormObject()->getEntity();
-    $fields = \Drupal::entityManager()
+    $fields = \Drupal::service('entity_field.manager')
       ->getFieldDefinitions('node', $bundle->get('type'));
 
     foreach ($fields as $field_name => $field_description) {
diff --git a/digitallocker_issuer/src/PushApi.php b/digitallocker_issuer/src/PushApi.php
index c6e6eb2..cc72a9c 100644
--- a/digitallocker_issuer/src/PushApi.php
+++ b/digitallocker_issuer/src/PushApi.php
@@ -37,7 +37,7 @@ class PushApi {
 
     $timestamp = \Drupal::time()->getRequestTime();
     $client = \Drupal::httpClient();
-    $path = \Drupal::service('path.alias_manager')
+    $path = \Drupal::service('path_alias.manager')
       ->getAliasByPath('/node/' . $node->id());
 
     $field_aadhaar = $node_type->getThirdPartySetting('digitallocker_issuer', 'field_aadhaar');
@@ -74,7 +74,7 @@ class PushApi {
 
     $response = new simpleXMLElement($response->getBody()->getContents());
     if (!intval($response->ResponseStatus)) {
-      drupal_set_message($node->getTitle() . ' : ' . strip_tags(strval($response->ResponseMessage)), 'error');
+      \Drupal::messenger()->addError($node->getTitle() . ' : ' . strip_tags(strval($response->ResponseMessage)));
     }
   }
 
@@ -92,7 +92,7 @@ class PushApi {
     $config = \Drupal::config('digitallocker_issuer.settings');
     $client = \Drupal::httpClient();
     $time = \Drupal::time()->getRequestTime();
-    $nodes = \Drupal::entityManager()->getStorage('node')->loadMultiple($nids);
+    $nodes = \Drupal::service('entity_type.manager')->getStorage('node')->loadMultiple($nids);
     $csv = [];
 
     foreach ($nodes as $node) {
@@ -104,7 +104,7 @@ class PushApi {
       $field_valid = $node_type->getThirdPartySetting('digitallocker_issuer', 'field_validity');
       $field_valid = $node->{$field_valid}->getValue();
 
-      $path = \Drupal::service('path.alias_manager')
+      $path = \Drupal::service('path_alias.manager')
         ->getAliasByPath('/node/' . $node->id());
 
       foreach ($field_aadhaar as $aadhaar) {
@@ -142,15 +142,15 @@ class PushApi {
     try {
       $response = new simpleXMLElement($response->data);
       if ((integer) $response->ResponseStatus) {
-        drupal_set_message(\Drupal::translation()
+        \Drupal::messenger()->addStatus(\Drupal::translation()
           ->formatPlural(count($nids), 'Published 1 certificate.', 'Published @count certificates.'));
       }
       else {
-        drupal_set_message((string) $response->ResponseMessage, 'error');
+        \Drupal::messenger()->addError((string) $response->ResponseMessage);
       }
     }
     catch (HttpException $e) {
-      drupal_set_message($e->getMessage(), 'error');
+      \Drupal::messenger()->addError($e->getMessage());
     }
   }
 
diff --git a/digitallocker_issuer/src/SignedPdf.php b/digitallocker_issuer/src/SignedPdf.php
index 7fd8f8f..9e4bb7b 100644
--- a/digitallocker_issuer/src/SignedPdf.php
+++ b/digitallocker_issuer/src/SignedPdf.php
@@ -34,7 +34,7 @@ class SignedPdf {
       'ContactInfo' => $config->get('certificate_contact'),
     ];
 
-    $filename = tempnam(file_directory_temp(), 'dlpdf');
+    $filename = tempnam(\Drupal::service('file_system')->getTempDirectory(), 'dlpdf');
     $image = imagecreate(200, 50);
     imagecolorallocate($image, 255, 255, 255);
     $black = imagecolorallocate($image, 0, 0, 0);
diff --git a/digitallocker_requester/src/Controller/FetchDocumentController.php b/digitallocker_requester/src/Controller/FetchDocumentController.php
index f8d0eb7..2ce677d 100644
--- a/digitallocker_requester/src/Controller/FetchDocumentController.php
+++ b/digitallocker_requester/src/Controller/FetchDocumentController.php
@@ -105,7 +105,7 @@ class FetchDocumentController extends ControllerBase {
 
         $document = base64_decode((string) $response->DocDetails->docContent[0]);
 
-        $file = file_save_data($document, file_default_scheme() . '://' . $data->filename);
+        $file = file_save_data($document, \Drupal::config('system.file')->get('default_scheme') . '://' . $data->filename);
         $file->status = 0;
 
         return new JsonResponse(['fid' => $file->fid, 'did' => $data->docId]);
