diff --git a/cookiepro_ccpa.info.yml b/cookiepro_ccpa.info.yml
index 4e84a83..258003b 100644
--- a/cookiepro_ccpa.info.yml
+++ b/cookiepro_ccpa.info.yml
@@ -2,5 +2,5 @@ name: Cookiepro CCPA by OneTrust
 description: CookiePro is the most mature and trusted cookie consent tool that is purpose-built for compliance with CCPA, GDPR, ePrivacy, and IAB framework. This module gives the ability to easily add a Do Not Sell button or link to your website.
 package: CookiePro by OneTrust
 type: module
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: cookiepro_ccpa.admin_settings_form
diff --git a/cookiepro_ccpa.module b/cookiepro_ccpa.module
index ca920f8..a824d6f 100644
--- a/cookiepro_ccpa.module
+++ b/cookiepro_ccpa.module
@@ -17,10 +17,10 @@ function cookiepro_ccpa_page_bottom(array &$page_bottom) {
 
   		if( ! empty( $ccpa_settings['Image_Icon'] ) ){
 			$drupal_file_uri = File::load( $ccpa_settings['Image_Icon'][0] )->getFileUri();
-			$image_path = file_create_url( $drupal_file_uri );
+			$image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($drupal_file_uri);
 		} else {
 			global $base_url;
-			$image_path = $base_url .'/' .drupal_get_path('module', 'cookiepro_ccpa') .'/images/icon.png';
+			$image_path = $base_url .'/' .\Drupal::service('extension.list.module')->getPath('cookiepro_ccpa') .'/images/icon.png';
 		}
 
 		$isEmailEnabled = 0;
diff --git a/src/Form/MessagesForm.php b/src/Form/MessagesForm.php
index e400086..39dafdb 100644
--- a/src/Form/MessagesForm.php
+++ b/src/Form/MessagesForm.php
@@ -305,11 +305,11 @@ class MessagesForm extends ConfigFormBase {
 
     if (!empty($ccpa_settings['Image_Icon'])) {
       $drupal_file_uri = File::load($ccpa_settings['Image_Icon'][0])->getFileUri();
-      $image_path = file_create_url($drupal_file_uri);
+      $image_path = \Drupal::service('file_url_generator')->generateAbsoluteString($drupal_file_uri);
     }
     else {
       global $base_url;
-      $image_path = $base_url . '/' . drupal_get_path('module', 'cookiepro_ccpa') . '/images/icon.png';
+      $image_path = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('cookiepro_ccpa') . '/images/icon.png';
     }
 
     $html = '
@@ -389,7 +389,7 @@ class MessagesForm extends ConfigFormBase {
 																			
 				<div class="popup-footer">	
 					<div class="powered-by-icon">
-						<img src="' . $base_url . '/' . drupal_get_path('module', 'cookiepro_ccpa') . '/images/PoweredByCookiePro.svg" alt="CookiePro" title="CookiePro">
+						<img src="' . $base_url . '/' . \Drupal::service('extension.list.module')->getPath('cookiepro_ccpa') . '/images/PoweredByCookiePro.svg" alt="CookiePro" title="CookiePro">
 					</div>
 					<div class="ot-banner-button ConfirmBtn" style="background-color:' . $ccpa_settings['buttonBackgroundColor'] . ';">
 						<input type="button" value="' . $ccpa_settings['confirmbutton'] . '" style="color: ' . $ccpa_settings['button_text_color'] . ';">
@@ -398,7 +398,7 @@ class MessagesForm extends ConfigFormBase {
 				</div>
 			</div>		
 			<div class="confirmation-popup-close" style="background-color: ' . $ccpa_settings['header_icon_background'] . ';">
-				<img src="' . $base_url . '/' . drupal_get_path('module', 'cookiepro_ccpa') . '/images/Close.svg" alt="Close Icon" title="Close Icon">
+				<img src="' . $base_url . '/' . \Drupal::service('extension.list.module')->getPath('cookiepro_ccpa') . '/images/Close.svg" alt="Close Icon" title="Close Icon">
 			</div>
 		</div>
 
