diff --git a/login_by.module b/login_by.module
index a571b05..6da4e13 100644
--- a/login_by.module
+++ b/login_by.module
@@ -113,7 +113,7 @@ function login_by_email_validate($form, FormStateInterface $form_state) {
 
   // load by username.
   if ($user = user_load_by_name($username)) {
-    $form_state->setErrorByName('name', t('Unrecognized email address. <a href=":password">Forgot your password?</a>', [':password' => \Drupal::url('user.pass', [], ['query' => ['name' => $username]])]));
+    $form_state->setErrorByName('name', t('Unrecognized email address. <a href=":password">Forgot your password?</a>', [':password' => \Drupal\Core\Url::fromRoute('user.pass', [], ['query' => ['name' => $username]])->toString()]));
     $form_state->setRebuild();
     return FALSE;
   }
