diff --git a/src/Controller/BigQueryController.php b/src/Controller/BigQueryController.php
index eed048c..1ae1f9a 100644
--- a/src/Controller/BigQueryController.php
+++ b/src/Controller/BigQueryController.php
@@ -41,7 +41,7 @@ class BigQueryController extends ControllerBase {
   public function __construct(
     Connection $connection) {
     $this->database = $connection;
-    $this->modulePath = drupal_get_path('module', $this->moduleName);
+    $this->modulePath = \Drupal::service('extension.list.module')->getPath($this->moduleName);
   }
 
   /**
diff --git a/src/Controller/SimpleSurveyController.php b/src/Controller/SimpleSurveyController.php
index 28ba824..566ee66 100644
--- a/src/Controller/SimpleSurveyController.php
+++ b/src/Controller/SimpleSurveyController.php
@@ -50,7 +50,7 @@ class SimpleSurveyController extends ControllerBase {
     $this->fileSystem = $fileSystemInterface;
     $this->surveyState = $surveyState;
 
-    $this->modulePath = drupal_get_path('module', 'simple_survey');
+    $this->modulePath = \Drupal::service('extension.list.module')->getPath('simple_survey');
   }
 
   /**
diff --git a/src/Controller/SimpleSurveyRestController.php b/src/Controller/SimpleSurveyRestController.php
index 5702aac..7690a19 100644
--- a/src/Controller/SimpleSurveyRestController.php
+++ b/src/Controller/SimpleSurveyRestController.php
@@ -146,7 +146,7 @@ class SimpleSurveyRestController extends ControllerBase {
     $this->time = $time;
     $this->entityTypeManager = $entity_type_manager;
 
-    $this->modulePath = drupal_get_path('module', $this->moduleName);
+    $this->modulePath = \Drupal::service('extension.list.module')->getPath($this->moduleName);
   }
 
   /**
@@ -187,17 +187,7 @@ class SimpleSurveyRestController extends ControllerBase {
     $expireTime = $this->time->getRequestTime() + (60 * 60 * 24 * $cooldown);
 
     $headerResponse = new Response();
-    $cookie = new Cookie(
-      $cookieName,
-      $this->uuidService->generate(),
-      $expireTime,
-      '/',
-      $request->getHost(),
-      FALSE,
-      FALSE,
-      FALSE,
-      'strict'
-    );
+    $cookie = \Symfony\Component\HttpFoundation\Cookie::create($cookieName, $this->uuidService->generate(), $expireTime, '/', $request->getHost(), FALSE, FALSE, FALSE, 'strict');
 
     if ($cookie) {
       $headerResponse->headers->setCookie($cookie);
