[parsing] modules/contrib/screenshot_widget/screenshot_widget.module
[refactoring] modules/contrib/screenshot_widget/screenshot_widget.module
[post rectors] modules/contrib/screenshot_widget/screenshot_widget.module
    [post rector] Rector\PostRector\Rector\NodeToReplacePostRector
    [post rector] Rector\PostRector\Rector\NodeAddingPostRector
    [post rector] Rector\PostRector\Rector\PropertyAddingPostRector
    [post rector] Ssch\TYPO3Rector\Rector\PostRector\FullQualifiedNamePostRector
    [post rector] Rector\PostRector\Rector\NodeRemovingPostRector
    [post rector] Rector\PostRector\Rector\ClassRenamingPostRector
    [post rector] Rector\PostRector\Rector\NameImportingPostRector
    [post rector] Rector\PostRector\Rector\UseAddingPostRector
[print] modules/contrib/screenshot_widget/screenshot_widget.module
[parsing] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php
[refactoring] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php
[post rectors] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php
    [post rector] Rector\PostRector\Rector\NodeToReplacePostRector
    [post rector] Rector\PostRector\Rector\NodeAddingPostRector
    [post rector] Rector\PostRector\Rector\PropertyAddingPostRector
    [post rector] Ssch\TYPO3Rector\Rector\PostRector\FullQualifiedNamePostRector
    [post rector] Rector\PostRector\Rector\NodeRemovingPostRector
    [post rector] Rector\PostRector\Rector\ClassRenamingPostRector
    [post rector] Rector\PostRector\Rector\NameImportingPostRector
    [post rector] Rector\PostRector\Rector\UseAddingPostRector
[print] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php
[refactoring] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php
[post rectors] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php
    [post rector] Rector\PostRector\Rector\NodeToReplacePostRector
    [post rector] Rector\PostRector\Rector\NodeAddingPostRector
    [post rector] Rector\PostRector\Rector\PropertyAddingPostRector
    [post rector] Ssch\TYPO3Rector\Rector\PostRector\FullQualifiedNamePostRector
    [post rector] Rector\PostRector\Rector\NodeRemovingPostRector
    [post rector] Rector\PostRector\Rector\ClassRenamingPostRector
    [post rector] Rector\PostRector\Rector\NameImportingPostRector
    [post rector] Rector\PostRector\Rector\UseAddingPostRector
[print] modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php

1 file with changes
===================

1) modules/contrib/screenshot_widget/src/Plugin/Field/FieldWidget/ScreenshotWidget.php:133

    ---------- begin diff ----------
@@ @@
         //See file_save_data();
         //Code below from file_save_data function.
         $destination = isset($element['#upload_location']) ? $element['#upload_location'] : NULL;
-        if (isset($destination) && !file_prepare_directory($destination, FILE_CREATE_DIRECTORY)) {
+        if (isset($destination) && !\Drupal::service('file_system')->prepareDirectory($destination, \Drupal\Core\File\FileSystemInterface::CREATE_DIRECTORY)) {
           \Drupal::logger('file')->notice('The upload directory %directory for the file field %name could not be created or is not accessible. A newly uploaded file could not be saved in this directory as a consequence, and the upload was canceled.', ['%directory' => $destination, '%name' => $element['#field_name']]);
           $form_state->setError($element, t('The file could not be uploaded.'));
           return FALSE;
@@ @@
         }

         $destination = "{$destination}/screenshot.jpeg";
-        $replace = FILE_EXISTS_RENAME;
+        $replace = \Drupal\Core\File\FileSystemInterface::EXISTS_RENAME;
         $user = \Drupal::currentUser();

         if (empty($destination)) {
-          $destination = file_default_scheme() . '://';
+          $destination = \Drupal::config('system.file')->get('default_scheme') . '://';
         }
         if (!file_valid_uri($destination)) {
           \Drupal::logger('file')->notice('The data could not be saved because the destination %destination is invalid. This may be caused by improper use of file_save_data() or a missing stream wrapper.', ['%destination' => $destination]);
@@ @@
           return FALSE;
         }

-        if ($uri = file_unmanaged_save_data($data, $destination, $replace)) {
+        if ($uri = \Drupal::service('file_system')->saveData($data, $destination, $replace)) {
           // Create a file entity.
           $file = File::create([
             'uri' => $uri,
@@ @@
           // If we are replacing an existing file re-use its database record.
           // @todo Do not create a new entity in order to update it. See
           //   https://www.drupal.org/node/2241865.
-          if ($replace == FILE_EXISTS_REPLACE) {
+          if ($replace == \Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE) {
             $existing_files = entity_load_multiple_by_properties('file', ['uri' => $uri]);
             if (count($existing_files)) {
               $existing = reset($existing_files);
@@ @@
           }
           // If we are renaming around an existing file (rather than a directory),
           // use its basename for the filename.
-          elseif ($replace == FILE_EXISTS_RENAME && is_file($destination)) {
+          elseif ($replace == \Drupal\Core\File\FileSystemInterface::EXISTS_RENAME && is_file($destination)) {
             $file->setFilename(drupal_basename($destination));
           }
    ----------- end diff -----------

Applied rules:
 * FileCreateDirectoryRector
 * FileDefaultSchemeRector
 * FileExistsRenameRector
 * FileExistsReplaceRector
 * FilePrepareDirectoryRector
 * FileUnmanagedSaveDataRector


 [OK] 1 file has been changed by Rector                                         

