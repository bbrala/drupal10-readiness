diff --git a/gitinfo.module b/gitinfo.module
index 3d55704..d1db0b6 100644
--- a/gitinfo.module
+++ b/gitinfo.module
@@ -41,8 +41,8 @@ function gitinfo_cron() {
   $interval = $config->get('interval');
   $interval = !empty($interval) ? $interval : 0;
   $next_execution = \Drupal::state()->get('gitinfo.next_execution', 0);
-  if ($interval && REQUEST_TIME >= $next_execution) {
-    \Drupal::state()->set('gitinfo.next_execution', REQUEST_TIME + $interval);
+  if ($interval && \Drupal::time()->getRequestTime() >= $next_execution) {
+    \Drupal::state()->set('gitinfo.next_execution', \Drupal::time()->getRequestTime() + $interval);
     if (\Drupal::moduleHandler()->moduleExists('basic_auth')) {
       // Generate the report by visiting the page.
       $uri = Url::fromRoute('gitinfo.report', [], ['absolute' => TRUE])->toString();
