diff --git a/modules/widget_provider_example/tests/src/Functional/WidgetExampleFunctionalTest.php b/modules/widget_provider_example/tests/src/Functional/WidgetExampleFunctionalTest.php
index 876d0a9..715f76f 100644
--- a/modules/widget_provider_example/tests/src/Functional/WidgetExampleFunctionalTest.php
+++ b/modules/widget_provider_example/tests/src/Functional/WidgetExampleFunctionalTest.php
@@ -51,7 +51,7 @@ class WidgetExampleFunctionalTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     // Gibt error, aber sonst Container error.
     parent::setUp();
     // Create an admin user.
@@ -62,7 +62,7 @@ class WidgetExampleFunctionalTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function tearDown() {
+  protected function tearDown(): void {
     parent::tearDown();
   }
 
diff --git a/src/Event/RegisterWidgetProvidersEvent.php b/src/Event/RegisterWidgetProvidersEvent.php
index 8be31a9..3f46842 100644
--- a/src/Event/RegisterWidgetProvidersEvent.php
+++ b/src/Event/RegisterWidgetProvidersEvent.php
@@ -5,7 +5,7 @@ namespace Drupal\widget_provider_api\Event;
 use Drupal\widget_provider_api\Widget\WidgetProviderInterface;
 use Symfony\Component\EventDispatcher\Event;
 
-class RegisterWidgetProvidersEvent extends Event {
+class RegisterWidgetProvidersEvent extends \Symfony\Contracts\EventDispatcher\Event {
   /**
    * Name of the event fired when a new registrating widget provider is reported.
    *
diff --git a/src/Widget/WidgetApiManager.php b/src/Widget/WidgetApiManager.php
index 503baef..212f106 100644
--- a/src/Widget/WidgetApiManager.php
+++ b/src/Widget/WidgetApiManager.php
@@ -33,7 +33,7 @@ class WidgetApiManager {
    */
   private function registerWidgetProviders() {
     $event = RegisterWidgetProvidersEvent::create();
-    $this->eventDispatcher->dispatch(RegisterWidgetProvidersEvent::REGISTER_WIDGET_PROVIDERS, $event);
+    $this->eventDispatcher->dispatch($event, RegisterWidgetProvidersEvent::REGISTER_WIDGET_PROVIDERS);
     if ($event->hasWidgetProviders()) {
       $this->addWidgetProviders($event->getWidgetProviders());
     } else {
diff --git a/tests/src/Unit/WidgetApiManagerUnitTest.php b/tests/src/Unit/WidgetApiManagerUnitTest.php
index 664d84c..48f35df 100644
--- a/tests/src/Unit/WidgetApiManagerUnitTest.php
+++ b/tests/src/Unit/WidgetApiManagerUnitTest.php
@@ -42,11 +42,9 @@ class WidgetApiManagerUnitTest extends UnitTestCase {
    *
    * @return void
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
-    $eventdispatcher = $this->getMockBuilder('Symfony\Component\EventDispatcher\EventDispatcherInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $eventdispatcher = $this->createMock('Symfony\Component\EventDispatcher\EventDispatcherInterface');
     $this->widgetApiManager = new WidgetApiManager($eventdispatcher);
   }
 
@@ -62,9 +60,7 @@ class WidgetApiManagerUnitTest extends UnitTestCase {
     } else {
       $this->assertTrue(false);
     }
-    $widgetProvider = $this->getMockBuilder('Drupal\widget_provider_api\Widget\WidgetProviderInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $widgetProvider = $this->createMock('Drupal\widget_provider_api\Widget\WidgetProviderInterface');
     $addWidgetProvider = self::getMethod('addWidgetProvider');
     $addWidgetProvider->invokeArgs($this->widgetApiManager, [$widgetProvider]);
     $attributeProviders = $this->widgetApiManager->getWidgetProviders();
diff --git a/tests/src/Unit/WidgetProviderBaseUnitTest.php b/tests/src/Unit/WidgetProviderBaseUnitTest.php
index 11b71e6..c1e9c06 100644
--- a/tests/src/Unit/WidgetProviderBaseUnitTest.php
+++ b/tests/src/Unit/WidgetProviderBaseUnitTest.php
@@ -23,7 +23,7 @@ class WidgetProviderBaseUnitTest extends UnitTestCase {
   /**
    * {@inheritDoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->widgetProvider = new BlankWidgetProvider('testProvider', []);
   }
 
