diff --git a/sharedemail.info.yml b/sharedemail.info.yml
index 3630576..1cc8438 100755
--- a/sharedemail.info.yml
+++ b/sharedemail.info.yml
@@ -2,7 +2,6 @@ name: 'Shared E-mail'
 type: module
 description: 'Allow an e-mail address to be used by more than one user account'
 configure: sharedemail.settings_form
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.1 || ^10
 dependencies:
   - drupal:user
diff --git a/tests/src/Functional/SharedEmailTest.php b/tests/src/Functional/SharedEmailTest.php
index 3fc1e16..ffc05cd 100755
--- a/tests/src/Functional/SharedEmailTest.php
+++ b/tests/src/Functional/SharedEmailTest.php
@@ -36,7 +36,7 @@ class SharedEmailTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser([
       'administer users',
@@ -64,9 +64,10 @@ class SharedEmailTest extends BrowserTestBase {
     $edit = [
       'sharedemail_msg' => 'Test message',
     ];
+    $this->drupalGet('admin/config/people/shared-email');
 
     // Post the form.
-    $this->drupalPostForm('admin/config/people/shared-email', $edit, t('Save configuration'));
+    $this->submitForm($edit, t('Save configuration'));
 
     // Test the new values are there.
     $this->drupalGet('admin/config/people/shared-email');
@@ -96,9 +97,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using a unique email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('Created a new user account for @name. No email has been sent.', ['@name' => $edit['name']]));
     $this->assertSession()->pageTextNotContains($this->config('sharedemail.settings')->get('sharedemail_msg'));
@@ -124,9 +126,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using an existing email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('The email address @email is already taken.', ['@email' => $duplicateUser->getEmail()]));
   }
@@ -147,9 +150,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using an existing email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('Created a new user account for @name. No email has been sent.', ['@name' => $edit['name']]));
   }
@@ -174,9 +178,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using an existing email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('The email address @email is already taken.', ['@email' => $duplicateUser->getEmail()]));
   }
@@ -206,9 +211,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using an existing email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('Created a new user account for @name. No email has been sent.', ['@name' => $edit['name']]));
   }
@@ -234,9 +240,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using an existing email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('Created a new user account for @name. No email has been sent.', ['@name' => $edit['name']]));
     $this->assertSession()->pageTextContains($this->config('sharedemail.settings')->get('sharedemail_msg'));
@@ -269,9 +276,10 @@ class SharedEmailTest extends BrowserTestBase {
       'pass[pass1]' => 'Test1Password',
       'pass[pass2]' => 'Test1Password',
     ];
+    $this->drupalGet('admin/people/create');
 
     // Attempt to create a new account using an existing email address.
-    $this->drupalPostForm('admin/people/create', $edit, t('Create new account'));
+    $this->submitForm($edit, t('Create new account'));
 
     $this->assertSession()->pageTextContains(t('Created a new user account for @name. No email has been sent.', ['@name' => $edit['name']]));
     $this->assertSession()->pageTextNotContains($this->config('sharedemail.settings')->get('sharedemail_msg'));
