commit bef9ad7b84535fd5dccd44f601045126a64dbea6
Author: solotandem <jim@boombatower.com>
Date:   Fri Apr 29 14:48:00 2022 -0500

    Issue #3159778 Change default value of 'Recreate snippets on cache rebuild' module setting to disabled.
    
      This helps those who run Drush commands as a user other than the web user.
      Update README.md and SettingsForm.php.

commit 4681de7feb9f7935779608265e84e90317e19949
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 29 12:20:06 2022 -0500

    Issue #3272258 by mohammad-fayoumi Remove aria-hidden attribute from noscript snippet.

commit 41b96e2a50a5999969e7a0410b8fda0d100a08a6
Author: solotandem <jim@boombatower.com>
Date:   Mon Feb 14 20:25:39 2022 -0600

    Issue #3183472 by paulocs Replace drupalPostForm() with drupalGet() and submitForm().

commit b08dfb3768fbe9226cc0c7c2adf9fd1419d7ff38
Author: solotandem <jim@boombatower.com>
Date:   Mon Feb 14 19:57:07 2022 -0600

    Issue #3259001 by heddn, solotandem Use file_url_generator service if present.
    
      Retain backward compatability to 8.8 with file_url_transform_relative().

commit aacc3d2bc8a30fc8602529af37033a7de7cfdae9
Author: solotandem <jim@boombatower.com>
Date:   Mon Feb 14 13:35:47 2022 -0600

    Issue #3243890 by larisse Make label and weight translatable in ContainerForm.

commit 87b40f22d0f835d317ca8499559e4d965b5c9036
Author: solotandem <jim@boombatower.com>
Date:   Thu Jun 18 15:14:17 2020 -0500

    Remove unused use statement (missed on dependency injection commit).

commit a64f8ba7d1ce3574b630ac8791f2f0af179322f7
Author: solotandem <jim@boombatower.com>
Date:   Thu Jun 18 14:43:54 2020 -0500

    Replace cache constant (missed on cache backend commit).

commit 9b7248969b23389c049e31c592110ef154ccd50f
Author: solotandem <jim@boombatower.com>
Date:   Thu Jun 18 13:18:36 2020 -0500

    Consolidate similar code in ContainerManager::getScriptAttachments().

commit 5f63f7d24db14693d72283db1eab81684c62a49c
Author: solotandem <jim@boombatower.com>
Date:   Wed Jun 17 19:27:34 2020 -0500

    Add more dependency injection to container manager class.

commit f3f6f549ac97e79fc7b6491f5197b43618afd22d
Author: solotandem <jim@boombatower.com>
Date:   Wed Jun 17 19:19:51 2020 -0500

    Issue #3153033 Support a cache backend as the inline snippet source.
    
      The noscript snippet is always stored in and read from cache.
      The two script snippets are stored in cache but read from file or cache
        depending on the 'include_file' module setting.
      Enhance the tests to deal with both sources.

commit 80a5b52cbdf8553d738030a1e63fbc8adcd21c83
Author: solotandem <jim@boombatower.com>
Date:   Tue Jun 16 14:36:49 2020 -0500

    Issue #3151677 by gena.io Use assertDirectoryNotExists() helper routine.

commit 4135ca7a4042ebb07cfad410e6a5b6b2c819eaec
Author: solotandem <jim@boombatower.com>
Date:   Tue Jun 16 13:00:07 2020 -0500

    Refactor the compact snippet code to a separate routine.

commit af69f95dd407e2a8504e91be9fe5dfaa184caeb2
Author: solotandem <jim@boombatower.com>
Date:   Tue Jun 16 12:43:51 2020 -0500

    Issue #3151318 by recrit, solotandem Allow for other scripts adding items to the dataLayer.
    
       The data layer support provided by this module was never intended to be used
       if other modules or snippets were managing the data layer.

commit d424e475a456e012c1c0abddaf1fea4252f9801f
Author: solotandem <jim@boombatower.com>
Date:   Tue May 26 20:22:23 2020 -0500

    Remove deprecated items, apply coding standards, and update core version.
    
      Replace deprecated functions to be removed from Drupal 9.0.0.
      Replace 'Drupal' static calls with equivalent syntax.
      Update the core version to 8.8 or 9.

commit d469e9a751cbb0e8fd30803f29d02b53fc4fb7c3
Author: solotandem <jim@boombatower.com>
Date:   Mon Apr 27 08:32:43 2020 -0500

    Issue #2845681 by lolandese: Change license.

commit 914a09ff6b5e3f6e6644a0b226ee4d7750ed4092
Author: solotandem <jim@boombatower.com>
Date:   Mon Mar 9 13:00:18 2020 -0500

    Issue #3118743 by mbovan Update configuration URLs in README.

commit 1367d8277e0f1dfeb2601fead3bb088c2dd1d186
Author: solotandem <jim@boombatower.com>
Date:   Tue Feb 25 17:05:58 2020 -0600

    Issue #3020923 Add message to clarify default and existing container settings.
    
      Applies to the settings form.

commit 9b01796c29126796caa36221e58dbc2b9da44a21
Author: solotandem <jim@boombatower.com>
Date:   Tue Feb 25 15:26:02 2020 -0600

    Comply with coding standards.
    
      Remove unused use statements.
      Replace long with short array syntax.

commit bc23d262f79bf8516fad45ff35ef343166b0ed10
Author: solotandem <jim@boombatower.com>
Date:   Tue Feb 25 14:14:01 2020 -0600

    Issue #3114963 Revise the delete-and-recreate snippet workflow.
    
      Limit the meaning of the 'Recreate snippets on cache rebuild' setting to
        just that; i.e. it does not also determine whether the assets are deleted.
      On cache rebuild:
      - flush the parent snippet directory if the corresponding setting is enabled.
      - otherwise delete the snippet directories for enabled containers.
      - create snippet files for enabled containers if the corresponding setting is enabled.
      On page response:
      - create the snippet files for an enabled container if any are missing.
      Update descriptions on settings form.

commit 6e5027235d974fa5e70cc2342794a6edb2f47a07
Author: solotandem <jim@boombatower.com>
Date:   Tue Feb 25 10:14:01 2020 -0600

    Issue #3115753 by ThomWilhelm, solotandem Allow for a 'uri' condition in the container form.

commit fc20c7368478bfe124ac2886340fffdc7ddf54cb
Author: solotandem <jim@boombatower.com>
Date:   Mon Feb 24 19:36:16 2020 -0600

    Remove deprecated items and apply coding standards.
    
      Add 'undefined' property definitions to various classes.
      Replace deprecated functions with others that exist in 8.7.x.
      Change label on container entity annotation.
      Remove message parameter from calls to assert{Raw,Text} and replace calls.

commit 84585e57d754d31d82e9f949ba4991fcd773ed97
Author: solotandem <jim@boombatower.com>
Date:   Mon Feb 24 18:09:48 2020 -0600

    Issue #3101180 by berdir, solotandem Specify core version dependency.
    
      Include the core_version_requirement key added to 8.7.7.
      Replace deprecated function with another that exists in 8.7.x.
      Fix typo on annotation of domain condition.
      Assign default theme property in GTMTestBase.
        This first applies to 8.8.x but automated tests are run against 8.9.x.

commit d2471941281f63c74ce2ef023dbe66c056f0d472
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 13 09:06:24 2020 -0600

    Issue #3106028 Fix typos in ContainerTrait::validateFormValues().

commit 0f8b962f8c0fae54acce28d6675bb6bb0bc97b43
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 20 12:40:46 2019 -0600

    Issue #3100588 by maxrab, solotandem Evaluate all condition plugins that have context.

commit 4dc25709ed2b500172f19793ae8e41cd8bd06aa6
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 5 12:38:35 2019 -0600

    Add to and correct typo in property declarations of ContainerForm.
    
      Remove unused language property.

commit f3b52fedeaa3453a925b88dbf11f571a3f1ad8c0
Author: solotandem <jim@boombatower.com>
Date:   Wed Dec 4 12:44:23 2019 -0600

    Enhance automated tests with more user interface assertions.
    
      Delete containers and snippet files created in code.
      Submit container form to create containers.

commit 4097d0b72580da07418b21fcbb8160426ad79ab1
Author: solotandem <jim@boombatower.com>
Date:   Wed Dec 4 08:24:33 2019 -0600

    Issue #3088579 Recharacterize the base uri setting as the parent uri.
    
      Modify the added requirements check to avoid error on install.

commit c8ec592c8bc50d7567fc9530078a51b7279d63aa
Author: solotandem <jim@boombatower.com>
Date:   Mon Dec 2 10:30:59 2019 -0600

    Remove use statement referring to GoogleTagSettingsForm.

commit cad834b3ae445c778564b05cb69153ac5a22dc39
Author: solotandem <jim@boombatower.com>
Date:   Mon Dec 2 10:29:40 2019 -0600

    Refactor code in container and settings forms to a reused trait.
    
      Add ContainerTrait.php.

commit 99941dcc59e014b3da52dbbebdcc6a62ba408954
Author: solotandem <jim@boombatower.com>
Date:   Tue Nov 19 10:21:47 2019 -0600

    Issue #3085206 Add condition plugin logic to containers. [step three]
    
      Augment ContainerAccessControlHandler::accessCheck to resolve conditions.
      Override resolveConditions() and call condition::evaluate() on the custom
        plugins instead of condition::execute().
      Add access check against condition plugins to Container::insertSnippet().

commit d7df4e4e572035bd4a9f557fb7253c98d28588e3
Author: solotandem <jim@boombatower.com>
Date:   Tue Nov 19 10:10:16 2019 -0600

    Issue #3085206 Add condition plugin logic to containers. [step two]
    
      Add condition plugin items to data_types.schema.yml file.
      Add condition plugin properties and routines to container class.
      Implement condition plugins with container form.
      - inject services to the ContainerForm
      - add routines to build, validate, and submit the condition plugin forms
      Omit condition plugins on the settings form.
      - domain and language do not lend themselves to being default items
      Refactor admin.js to also handle domain and language conditions.

commit 1dd4323882a44cbc0ab0d2bba5f70904deb60b33
Author: solotandem <jim@boombatower.com>
Date:   Tue Nov 19 10:02:19 2019 -0600

    Issue #3085206 Add condition plugin logic to containers. [step one]
    
      Replace the core condition plugin base class.
      - omit the 'negate' configuration item
      - allow the plugin to fully 'evaluate' the condition
      Create condition plugins for the domain and language conditions.
      - extend the custom base class
      - reuse parent routines with consistent child classes
      Implement hook_plugin_filter_TYPE_alter() to restrict use of these plugins
        to this module.

commit 3f4b3828ea26e28e0ddbd26e6f95c43b850ee9aa
Author: solotandem <jim@boombatower.com>
Date:   Wed Nov 13 16:56:29 2019 -0600

    Separate the container settings from insertion conditions.
    
      Reorder the fieldset routines in settings and container forms.
      - remove the fieldset 'tab' description
      - replace verbs with consistent 'insert' tenses
      Reorder the schema items in like fashion.
      Reorder the container properties.

commit ef7bd3df0637aa7194bb7461fd558e613be3b027
Author: solotandem <jim@boombatower.com>
Date:   Wed Nov 13 16:08:51 2019 -0600

    Add container as parameter to alter hooks.
    
      With multiple containers, hook implementers need to know the container.

commit 7f965bc78dd86a12ae92cd358f140f45da597995
Author: solotandem <jim@boombatower.com>
Date:   Fri Nov 8 14:02:46 2019 -0600

    Issue #3087116 Convert README file from text to markdown.

commit c0b992e0a81c4abcc6e03b319c0a6042904b47a0
Author: solotandem <jim@boombatower.com>
Date:   Fri Nov 8 12:50:33 2019 -0600

    Update README file.

commit e56c5ce6adbcc41f739f2efe16a1a0dc05323648
Author: solotandem <jim@boombatower.com>
Date:   Fri Nov 8 12:48:41 2019 -0600

    Add automated tests.

commit 152eab8f350989a65176563efede4e530e181c1d
Author: solotandem <jim@boombatower.com>
Date:   Fri Nov 8 12:33:43 2019 -0600

    Reorganize the schema yaml files.
    
      Move _google_tag_container item to new file for data_types.
      Add the container properties to the container config_entity.

commit ffd57c83fad2e236605b04bd16e75e21264f389e
Author: solotandem <jim@boombatower.com>
Date:   Thu Oct 17 19:57:27 2019 -0500

    Issue #3088579 Recharacterize the base uri setting as the parent uri.
    
      Add conditions to google_tag_uninstall() before deleting snippet directory.

commit 66f82ce2820166922757a6ba50c424f84be36298
Author: solotandem <jim@boombatower.com>
Date:   Thu Oct 17 17:28:46 2019 -0500

    Issue #3088579 Recharacterize the base uri setting as the parent uri.
    
      Create snippet files if the parent uri is changed.
      Add 'flush_snippets' setting.
      Add another requirements check.
      Add hook_update_N routine.
      Add container label to messages.

commit 75189a9e521d58df83ad46c1315ce7cfb7f4ff15
Author: solotandem <jim@boombatower.com>
Date:   Thu Oct 17 17:21:40 2019 -0500

    Issue #3088349 by jhuhta Change the defer attribute value to TRUE from 'true'.

commit f76dac07150bf829fd2b02655beffc9507459293
Author: solotandem <jim@boombatower.com>
Date:   Thu Oct 3 12:26:45 2019 -0500

    Correct the redirect in ContainerForm::save().
    
      Use form_state method not RedirectResponse.

commit 5f7ad058c67f870667d3f86dbb4da58210e93ae0
Author: solotandem <jim@boombatower.com>
Date:   Thu Oct 3 12:25:07 2019 -0500

    Issue #3082285 Change the menu path for container management.
    
      Change link paths in Container annotation.
      This was omitted from earlier commit.

commit 28fed19f39649af1114758d9535f6332a5265e94
Author: solotandem <jim@boombatower.com>
Date:   Wed Oct 2 12:34:47 2019 -0500

    Issue #3057215 by Sergiu Stici, solotandem: Replace deprecated routines and constants.
    
      Includes:
        drupal_chmod, drupal_mkdir, drupal_set_message,
        file_stream_wrapper_valid_scheme,
        file_unmanaged_delete_recursive, file_unmanaged_save_data,
        ConfigEntityBase::url,
        Drupal::url,
        Unicode::strtolower
      Add Container::displayMessage() to handle debug messages.
      Inject more services to ContainerManager.
        fileSystem, messenger, logger

commit 70640c302016699da0e23b2e39df0cd5d4b13f4b
Author: solotandem <jim@boombatower.com>
Date:   Wed Oct 2 07:32:57 2019 -0500

    Issue #3084720 Rename __file_prepare_directory().
    
      PHP 7.2 reserves the double underscore prefix on all function names.

commit 626c929c488f4c45ab30b7f6aa10cfe0dba2b83b
Author: solotandem <jim@boombatower.com>
Date:   Mon Sep 23 18:48:49 2019 -0500

    Issue #3082285 Change the menu path for container management.
    
      Combine the container management, module settings, and default container
      settings under the 'admin/config/system/google-tag' route.

commit d1a37b4bbd000703d311897266cf5b00e1c163e6
Author: solotandem <jim@boombatower.com>
Date:   Sat Sep 14 09:34:01 2019 -0500

    Issue #3081307 Use static array of booleans in Container::insertSnippet().
    
      Remove static variable from each of the xxxCheck() routines.
      This was intended to be changed during commits to enable multiple containers
      on a page request. Without the change, the insertion status of all containers
      is determined by the first container.

commit 40611a470f9cf4a05e6e2412b736715c4ea0708f
Author: solotandem <jim@boombatower.com>
Date:   Sat Sep 14 08:26:05 2019 -0500

    Remove the includes/snippet.inc file.
    
      This file was deprecated during commits to enable multiple containers on a
      page request.

commit b90f1667845bda5b46bdc6607d42b0c671c47120
Author: solotandem <jim@boombatower.com>
Date:   Thu Sep 12 17:20:52 2019 -0500

    Issue #3081007 Add update 8102 to install the container configuration entity type.
    
      This alerts entity type listeners and inserts a row in the key_value table
        (the latter prevents an 'error' on the status report page).

commit 4b32fe856509616a8061fb031d1bdd779cfbb9a7
Author: solotandem <jim@boombatower.com>
Date:   Thu Aug 29 14:15:47 2019 -0500

    Issue #3074528 Eliminate empty tag in head of page response.

commit ede361c23d11d2cb1928e1b4627c81c9056ed0f3
Author: solotandem <jim@boombatower.com>
Date:   Thu Aug 29 14:14:50 2019 -0500

    Issue #3071593 Eliminate HTML enitities from inline script tag.
    
      Set the script tag value to an instance of FormattableMarkup to avoid call to
      Xss::filterAdmin() in HtmlTag::preRenderHtmlTag().

commit 8bef0d2e7455ab77441f2bf7fecb99a09f83094e
Author: solotandem <jim@boombatower.com>
Date:   Wed Apr 3 09:20:13 2019 -0500

    Issue #2996199 Check for Windows OS in _google_tag_is_executable().

commit 7f8479a8c16d526558bef5e7bf597e4184296645
Author: solotandem <jim@boombatower.com>
Date:   Wed Apr 3 08:12:29 2019 -0500

    Issue #3045129 Avoid premature recursive delete in createAllAssets().
    
      If no containers, then no reason to remove stale files.
      If settings uri is empty, then recursive delete may lead to attempt to
        delete entire file system.

commit f1a1d0ed7ff5fcf5246d3b66e06e6a0d53679afb
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 19 09:19:57 2019 -0500

    Issue #3035196 Enable multiple containers on a page request. [step five]
    
      Update google_tag_requirements().
      Add google_tag_update_8101() to convert config item.

commit efaf4e51e6393d39010b5008ef4cfce52b456d87
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 19 05:44:48 2019 -0500

    Enable multiple containers on a page request. [step four]
    
      Update README.txt.
      Rename GoogleTagSettingsForm class to SettingsForm.

commit cf04d172bf16ec5d1cb2018ca180bed163808ec2
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 19 05:39:11 2019 -0500

    Enable multiple containers on a page request. [step three]
    
      Remove routines from module and settings form files added to class methods.
      Call the class methods in module file.
      Separate the module and container settings in GoogleTagSettingsForm.
      Deprecate snippets.inc.

commit 4241fca8c04f4931d47675a77c6bd89e0a5b30a2
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 19 05:24:42 2019 -0500

    Enable multiple containers on a page request. [step two]
    
      Revise schema.yml file.
      - restructure 'google_tag.settings' item
      - add 'uri' item
      - enable multiple container items
      - inherit from config_entity instead of config_object
      - add id and label keys
      Revise settings.yml file.
      - add 'uri' item
        - sites can use a location other than 'public' stream wrapper to store snippets
      - correct 'role_list' to be empty array
      - move container settings to new '_default_container' key
      Revise route, link, and menu item configuration files.
      - add links.action.yml file
      - separate module configuration from container management
        - module configuration at 'admin/config/system/google_tag'
        - container management at 'admin/structure/google_tag'
      Add service.yml file to manage containers.

commit 6d5980b34437c63db4acbf0b1a83b0966bee28e0
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 19 05:10:24 2019 -0500

    Enable multiple containers on a page request. [step one]
    
      Add class and interface files.
      - ContainerAccessControlHandler
      - ContainerController
      - ContainerListBuilder
      - Entity/Container{,Manager{,Interface}}
      - Form/ContainerForm

commit 418a34f615ed03924eb79396b0157bd595b7ff4e
Author: solotandem <jim@boombatower.com>
Date:   Mon Mar 11 11:20:51 2019 -0500

    Issue #3016645 by idebr, solotandem: Only save configured roles in role_list setting.
    
      This avoids a change to the module configuration simply because the list of user roles changes.
      NOTE: amend prior commit to move change to form validation along with all other such code.

commit d47ef767c30d676b3383fb549705358ab6de84bd
Author: solotandem <jim@boombatower.com>
Date:   Fri Mar 8 15:03:36 2019 -0600

    Issue #3016645 by idebr, solotandem: Only save configured roles in role_list setting.
    
      This avoids a change to the module configuration simply because the list of user roles changes.

commit 59cfe40ac70eb701ae964064990261a59f3a3c7d
Author: solotandem <jim@boombatower.com>
Date:   Fri Mar 8 14:03:17 2019 -0600

    Update files for coding standards.

commit de9bf66fe693033cfe33208f509ed0e7f9b16caa
Author: solotandem <jim@boombatower.com>
Date:   Fri Mar 8 12:13:36 2019 -0600

    Issue #3006629 by hideaway, pagach, solotandem: Add 'defer' attribute to script tag.

commit 18d3e445abea4db28415a3ed82258e29c26f9e5d
Author: solotandem <jim@boombatower.com>
Date:   Fri Mar 8 08:59:01 2019 -0600

    Issue #2996199 Test existence of posix functions before call.
    
      These functions are never defined on Windows and the extension that
      provides them may not be included on a Linux distribution.

commit 9c749ae4cf4d6f4c67e38320f50852680f6609a7
Author: solotandem <jim@boombatower.com>
Date:   Thu Mar 7 16:52:07 2019 -0600

    Issue #2998698 by mfernea, solotandem: Restore style attribute on noscript snippet.
    
      As markup, core removes the 'style' attribute from the noscript snippet.
      With the inline template type, core does not alter the noscript snippet.

commit fbe9435765abd35fead00586c4ebb3bc9489b065
Author: solotandem <jim@boombatower.com>
Date:   Thu Mar 7 16:29:39 2019 -0600

    Issue #3009268 by Liam Morland, solotandem: Remove iframe content and title attribute.
    
      This reverts earlier commit that added aria-hidden attribute to noscript tag
        and the content and title attribute to the iframe tag.

commit 69385dc694a04561722fd1a92cd27591ace1c78f
Author: solotandem <jim@boombatower.com>
Date:   Tue Sep 4 20:15:11 2018 -0500

    Issue #2997065 Replace module_load_install() with require_once in google_tag_requirements().

commit a33fa0a543fbe489a67340eb39c9c9cc0aa1ef1c
Author: solotandem <jim@boombatower.com>
Date:   Wed Aug 22 20:21:09 2018 -0500

    Issue #2978157 Retain the slash on front page path.
    
      The path service removes any trailing slashes on known paths.

commit f88a92078441001576244fd1885cac6b2d208346
Author: solotandem <jim@boombatower.com>
Date:   Tue May 22 19:01:33 2018 -0500

    Issue #2974638 Load module file during install before calls to routines in module file.
    
      Applies during install phase in hook_requirements().

commit aa8f5d41b71ea3525d6fcb083cc3b78ad3fd83d8
Author: solotandem <jim@boombatower.com>
Date:   Thu Apr 12 17:24:40 2018 -0500

    Issue #2959218 by slydevil, solotandem Enhance writable check to snippet directory preparation.
    
      Add _google_tag_is_writable(), and call from __file_prepare_directory(),
        hook_requirements() and GoogleTagSettingsForm::createAssets().
      The change causes PHP to respect filesytem ACLs on local stream wrappers.
      NOTE: Modify if core is updated to do the same.
      This patch should allow the tag manager settings form to display and the status
      report to indicate the directory exists and is writable-executable. But it will
      not allow directories and files to be written if access is granted to the web
      user only by ACLs. That requires core to be changed.

commit ddabbeeb48ecdf7eae3f99bcd9bc138d7d5622f0
Author: solotandem <jim@boombatower.com>
Date:   Thu Apr 12 17:19:26 2018 -0500

    Enhance executable check to snippet directory preparation.
    
      Add missing permission bits to _google_tag_is_executable(). (bug fix)
      - code does not reflect whether web user is owner, group, or other user.
      Use local path on all local stream wrappers.
      The change causes PHP to respect filesytem ACLs on local stream wrappers.

commit a1c27afd0a66f1a8ddcfc0c554fa5959af5bd3c2
Author: solotandem <jim@boombatower.com>
Date:   Fri Mar 2 10:50:22 2018 -0600

    Issue #2946496 by WidgetsBurritos, yannisc: Remove iframe content on noscript snippet.

commit 5612d043ff68bbf6648e6c32a5a950402f0d258e
Author: solotandem <jim@boombatower.com>
Date:   Fri Mar 2 09:54:02 2018 -0600

    Issue #2945348 Add executable check to snippet directory preparation.
    
      Load module file during install phase in hook_requirements().

commit a8569329a7d89c1310bf2e7ed5857ae7d86b7176
Author: solotandem <jim@boombatower.com>
Date:   Thu Mar 1 13:32:53 2018 -0600

    Issue #2945348 Add executable check to snippet directory preparation.
    
      Copy file_prepare_directory() as __file_prepare_directory(),
        add _google_tag_is_executable() check, and
        call from hook_requirements() and GoogleTagSettingsForm::createAssets().
      This makes for a self-contained change and avoids the need for a core patch.
      NOTE: revert if core is updated to check the executable bit.

commit 974ec7e092db7b764912bcc5fa2ce50eb49ca20f
Author: solotandem <jim@boombatower.com>
Date:   Wed Feb 28 12:42:53 2018 -0600

    Issue #2881396 Revise message text, restrict message display to admin users, and log error messages.

commit a4b3c781035f2e10adeafe174e3f2beb57da38b3
Author: solotandem <jim@boombatower.com>
Date:   Wed Feb 28 10:06:44 2018 -0600

    Issue #2945348 Add executable check to snippet directory preparation.
    
      Add _google_tag_is_executable() to work around bug in is_executable().
      Add this check to hook_requirements() and GoogleTagSettingsForm::createAssets().
      Current directory preparation steps include:
      - check whether directory exists and is_writable (but not is_executable)
      - if false then call file_prepare_directory
        - if directory does not exist then create it and set write and execute permissions
        - if directory does exist then check is_writable (but not is_executable)
      - the issue lies in lack of is_executable check
      Even with an is_executable check the problem is not resolved for stream wrappers
      - is_executable always returns false on directory in a stream wrapper
      - (other than the php local file wrapper)
      - this includes drupal public, s3, and google cloud storage stream wrappers
    
      NOTE: This commit requires a core patch. The following patch was developed for
      the 8.6.x branch and may require modification to apply to earlier releases.
      See: https://www.drupal.org/files/issues/944582-135-add-executable-check.patch

commit 17409bb8b0202a4dfd246d1e4616ec01b54fa661
Author: solotandem <jim@boombatower.com>
Date:   Tue Jan 2 17:32:10 2018 -0600

    Add 'error' parameter to error messages.

commit 92261dc4e48c73e7b7044953ce4b789a07db169e
Author: solotandem <jim@boombatower.com>
Date:   Tue Jan 2 14:39:50 2018 -0600

    Issue #2926857 Remove white space from beginning of translatable strings.
    
      Restore link display in hook_requirements().
      Restore translatable description in settings form.

commit 57ab95722e99e591d9bb28791ff99884c5e907df
Author: hui <hui@3541499.no-reply.drupal.org>
Date:   Tue Jan 2 11:26:56 2018 -0600

    Issue #2902160 by huiran Add title and aria-hidden attribute to noscript snippet for iFrame accessibility.

commit f2f3280b81dcc1725341011a63db32adbe34cdee
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 1 11:05:25 2018 -0600

    Issue #2923764 by piggito Add leading slash to example in Page paths help text.

commit 09ce10cf135db411b333cfd80e7ce023bc7fe232
Author: solotandem <jim@boombatower.com>
Date:   Fri Jun 16 16:36:13 2017 -0500

    Remove snippet files in hook_uninstall.
    
      Add google_tag_uninstall().

commit 413c3b5b9c2b93e43cac14f6dfa2aef3e0d8f521
Author: solotandem <jim@boombatower.com>
Date:   Fri Jun 16 16:31:22 2017 -0500

    Issue #2843994 by marcelovani, dmsmidt, cburschka, geertvd, solotandem: Create snippet directory and files in hook_rebuild.
    
      Add google_tag_rebuild().
      Add 'rebuild_snippets' setting.

commit 6643c09f6716c3fb5665635503dee85167d1cb84
Author: solotandem <jim@boombatower.com>
Date:   Fri Jun 16 16:09:13 2017 -0500

    Issue #2879444 by syndz, solotandem: Create snippet directory in hook_install.
    
      Add _google_tag_assets_create(); invoke from hook_install.

commit 26556eb07af0f4510accbc03afc84457931f8c6c
Author: solotandem <jim@boombatower.com>
Date:   Fri Jun 16 16:04:31 2017 -0500

    Create snippet directory (if missing) during settings form submit.

commit 7e4527088e1b28daefcdb4d387bac168b06f36a3
Author: solotandem <jim@boombatower.com>
Date:   Thu Jun 8 13:03:12 2017 -0500

    Replace calls to t() by $this->t() in settings form class.

commit dd82cc7ce04c585f3c90d0794f764dd900dceff1
Author: solotandem <jim@boombatower.com>
Date:   Mon May 8 12:36:45 2017 -0500

    Issue #2868850 by Munavijayalakshmi: Remove @file tag docblock from all php class files.

commit 2a4d4b3b17f29e75c818d40701e688caa751a965
Author: solotandem <jim@boombatower.com>
Date:   Mon May 8 12:36:12 2017 -0500

    Remove use statement for PublicStream class.
    
      Missed on earlier commit.

commit 719fbc6672198d9796a133f2b4f9b7a9622d12f5
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 19:57:39 2017 -0500

    Add 'https' to tag manager urls in snippet files.

commit 0ee543e0050a3bf057b5d857ff873ade7ab9a0f6
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 19:46:17 2017 -0500

    Create snippet directory during 'update' phase of google_tag_requirements().

commit 4fd2635c3a617b633f69c96c83d9e8ffb995bdb2
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 19:37:34 2017 -0500

    Add README file.

commit 231e87f8a0b66fdea3daae6ec346daaeeecc0935
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 18:20:43 2017 -0500

    Change directory for snippet files to google_tag.

commit 7a3ae12939e96dfcf3d5105e9e3ac7f6e3c7c82f
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 18:01:13 2017 -0500

    Enhance support for stream wrappers.

commit 17fcac5d5288a5a3e1c4ceecd005e11f985e9887
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 12:34:50 2017 -0500

    Implement an environment for a container.

commit c859bc2882b60bdf02ec4f29bef2046a8a60f330
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 11:04:46 2017 -0500

    Add _google_tag_variable_states() to build states array.

commit 36af0351cc2efb6b5f0a13d26fb462e5ad0a79a1
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 10:47:00 2017 -0500

    Add _google_tag_variable_clean() to cleanse strings.

commit 5f19e4bdbae574e040ea09151dcb66f64f8a960f
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 10:28:02 2017 -0500

    Add toggle setting for inclusion of listed classes in data layer.

commit 361215bf9f3cbfb7c50187f464e306b05402239c
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 09:51:59 2017 -0500

    Create assets in hook_install().

commit c031b0963396a12dcaa98b5605d92027df53d061
Author: solotandem <jim@boombatower.com>
Date:   Sat May 6 09:05:51 2017 -0500

    Add debug output setting to display result of each snippet insertion condition.

commit aa84353dd6ff1646f501de6290bddbec66b318a1
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 23 08:04:43 2017 -0600

    Issue #2845873 by marcelovani: Change vendor name.

commit 09fb862c07d7d7b8b108afe61e768035b4450a41
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 23 08:04:15 2017 -0600

    Issue #2845681 by pingers: Change license.

commit f1070d51ba4b37afd70b0d8efbf138099061f79b
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 9 20:45:10 2017 -0600

    Add query string to snippet URL.
    
      Clear JS cache after saving settings.

commit d4edd68a57509f1d115ca418743b6e9e873eaf22
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 9 20:41:16 2017 -0600

    Add error suppression operator to file_get_contents() calls.

commit 452840d6ef0144dbcb8c5391f0f71ea70e8e1ddc
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 9 20:39:29 2017 -0600

    Remove type attribute from script tag.

commit c8715e19e9e5450a82e52d43087a13034f92a483
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 9 08:56:39 2017 -0600

    Correct the logic of snippet directory check in google_tag_requirements().

commit 68533f03630b5fb25c35f342882bdfd778fdebef
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 9 08:36:10 2017 -0600

    Conform to coding standards regarding data types and array expression length.

commit 4769555f1e70c13d8b5b1f0c167e910cc3ab77ee
Author: solotandem <jim@boombatower.com>
Date:   Mon Jan 9 08:34:12 2017 -0600

    Conform to documentation standards regarding data types and hook description.

commit 975d02f0d41d3f71cbfcd1005431cea335fa7b61
Author: solotandem <jim@boombatower.com>
Date:   Sun Jan 1 13:16:45 2017 -0600

    Restore status code insertion condition.

commit 379c9738dc723601e3f66bb98067efad1b211c53
Author: solotandem <jim@boombatower.com>
Date:   Sat Dec 31 10:33:32 2016 -0600

    Replace double with single quotes in info.yml file.

commit f14c42dce24328f17c81c3cfa3e22241e8f76ae4
Author: solotandem <jim@boombatower.com>
Date:   Sat Dec 31 10:22:52 2016 -0600

    Convert install file to 8.x core API.
    
      Remove 'google_tag_' prefix from setting names.
      Remove hook_install(), hook_uninstall() and hook_update_N() routines.

commit 8d4b8399142929d5d8ffc5ecb9cbdc29ef06bc62
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 17:53:33 2016 -0600

    Convert hook_page_build() to hook_page_attachments() and hook_page_top().
    
      Remove 'google_tag_' prefix from setting names.
      Move script and data layer snippets to 'html_head' key of attachments.
      The '#weight' property does not provide same precision as the 'group' and 'weight' in 7.x API.
      Retain noscript snippet in the 'page_top' region.

commit 257d02f9ed8c063d354fd3f196fb7e3bc64e328e
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 15:07:28 2016 -0600

    Convert snippet insertion condition routines to 8.x core API.
    
      Remove 'google_tag_' prefix from setting names.
      Disable the response status condition due to lack of response status code.

commit 85e86e97d636329c743d40b9297e5ed24d34eab8
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 14:17:33 2016 -0600

    Convert snippet creation routines to 8.x core API.
    
      Remove 'google_tag_' prefix from setting names.
      Remove 'style' attribute from the noscript snippet.

commit 7cdd847bb900095bd7bdded1f5ab68c242f88402
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 17:59:55 2016 -0600

    Update admin.js to 8.x core API.
    
      Replace 'fieldset' with 'details' in find expressions.
      Remove 'google_tag_' prefix from setting names.

commit 5b65addce8a4d13aecc2d2dc34d06faf26d88b69
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 13:34:51 2016 -0600

    Change by mikeyp, solotandem: Convert settings form to extended ConfigFormBase class.
    
      Remove integration with variable module (included in 8.x core).
      Remove integration with datalayer module (no 8.x release).
      Remove includes/admin.inc and variable.inc files.
      Remove css/google_tag.admin.css.

commit a5f86e2cea225a92a5347a586f73a1fe4fcb8a31
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 12:48:03 2016 -0600

    Change by mikeyp, solotandem: Move config items to yml files.
    
      Move _google_tag_help() to module file.
      Remove includes/info.inc and google_tag.info files.
      Add composer.json file.

commit c9808fa0a7303489425540c6dc1f30759d3ba4eb
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 20:27:54 2016 -0600

    Add hook_update_N to rename 'compact_tag' setting to 'compact_snippet'.

commit 531d18182077c68eb4f7ac7c5d6e7815dcca73ee
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 30 11:35:16 2016 -0600

    Add hook_update_N to convert toggle settings from integer to string.

commit 34bf3cbc7fc48fcf4124b9a762d0e8352ba94024
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 19:20:11 2016 -0600

    Reorder statements in script snippet so attribute order matches.

commit 78c207c21e804c4437f072f3a77b40cd9d003359
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 19:18:55 2016 -0600

    Update admin.js for type change to status toggle setting.

commit 448258bd8e49ba7af3d810deb0fbd155cb91108d
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 19:18:10 2016 -0600

    Add constants for all/only form elements.
    
      Revise snippet insertion statements to reflect same.
      Update admin.js to reflect same.

commit 1c2418007ceaf92493b874fbcc8e67930c5e2d20
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 17:10:11 2016 -0600

    Rename constants.

commit 5931a3bf0d9dbc765fc3ca7db7f6a8a28e1cf0e2
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 17:01:53 2016 -0600

    Move admin-only routines out of module file.

commit 31c1eb76e7eab514f3128b9332f8c945fc310030
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 16:39:52 2016 -0600

    Use snippet files to add JS to page response.
    
      Based on setting, include either as 'file' or 'inline' type.

commit 9cfbdd80b947b483407837dc62bdf7b144890316
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 15:16:49 2016 -0600

    Add setting for inclusion of snippets as 'file' or 'inline' type.
    
      Applies to script and data_layer snippets.

commit 68044240e2705bd654c942d74c6fbffd87a06023
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 12:01:13 2016 -0600

    Update api file.

commit 08366df16a1e3dd7da5d99e0a06a2a40aa2d7336
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 11:59:53 2016 -0600

    Save each snippet to a file: script, noscript, and data layer.

commit abe9c05eaae13f0aa6e442b34f26eb96f7df9081
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 11:51:36 2016 -0600

    Add hook_install() and hook_update_N to create snippet directory.

commit aa4ed46fb4b027ce813f8d7270521b763e0ef2a9
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 09:38:55 2016 -0600

    Include data layer in alterable snippets.
    
      Split google_tag_snippet() into separate routines for script and noscript snippets.
      Rename google_tag_data_layer to google_tag_data_layer_snippet.
      Add google_tag_snippets().
      Rename hook to hook_google_tag_snippets_alter().
      Return snippets in an associative array.

commit 44e6f5cb7ffcdd04bb5b2e7edec9dcc6ae27cd35
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 09:28:34 2016 -0600

    Add google_tag_settings_form_after_build() to set submission handler.
    
      The variable module replaces this and system_settings_form_submit().

commit 891b8b8933fff16c5c2c037e08e8bd03da217f41
Author: solotandem <jim@boombatower.com>
Date:   Thu Dec 29 09:23:20 2016 -0600

    Call form_set_error() only if condition is satisfied for data layer.

commit 41ee53b56d526f498c52266c745d0cd6cb11d83a
Author: solotandem <jim@boombatower.com>
Date:   Mon Dec 26 21:12:09 2016 -0600

    Issue #2308667: Add settings for whitelist and blacklist classes.
    
      Add these classes to data layer, either as inline JS or using datalayer module.

commit b536b2c747773a67f92b31231e702585ca65ad9e
Author: solotandem <jim@boombatower.com>
Date:   Mon Dec 26 21:06:20 2016 -0600

    Enhance validation of text fields.

commit 120538a5afd4ad7c5d97f61623a1dea1d454b614
Author: solotandem <jim@boombatower.com>
Date:   Mon Dec 26 08:54:52 2016 -0600

    Add api.php file to describe hooks.

commit cd6bf70f1d65d216d74537a70e1f710a36f78f2d
Author: solotandem <jim@boombatower.com>
Date:   Sat Dec 24 12:22:25 2016 -0600

    ssue #2820017: Change position of 'script' snippet in page response.
    
      Google changed its recommended position for the snippet.
      Utilize standard core routines to allow other modules to alter position.

commit 7bd46b4c36e9b7a7d920c99a1dbba99dc7ca21ff
Author: solotandem <jim@boombatower.com>
Date:   Sat Dec 24 12:07:28 2016 -0600

    Issue #2451295: Add data layer setting.
    
      Replace validation handlers for text values.

commit c22c97da891c0d3ff2af0ae2b2505eca05d3592d
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 23 23:39:35 2016 -0600

    Add two alter hooks: insertion conditions and snippet.

commit 333caea93df1115bfcebf4932662278d3c72fba5
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 23 23:36:06 2016 -0600

    Issue #2501119: Move snippet insertion workflow to hook_page_build().
    
      This allows other modules to alter things in hook_page_alter().
      Add snippet to the page render array instead of inserting into final HTML string.

commit c4c74f818b61fbbba12c07708c05b375504e1a60
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 23 13:36:51 2016 -0600

    Refactor fieldset code for admin form.
    
      Replace plural names with singular.

commit 21351cae458e37c50463d7398168ddf28fe14d11
Author: solotandem <jim@boombatower.com>
Date:   Fri Dec 23 12:40:51 2016 -0600

    Issue #2342557: Add support for variable module.
    
      Allow module to be used with or without variable module.
      Move admin form element definitions to hook_variable_info().
      Avoid multiple places to maintain strings related to variables.
      Include 'multidomain' key in variables for domain support.

commit 77ae5ed40cfa0f28d38ba5a2d2d5f96394208c17
Author: solotandem <jim@boombatower.com>
Date:   Sun Nov 27 21:20:20 2016 -0600

    Issue #2652840: Revise the default listed paths to those defined in core.

commit 65d08a5b85ab8562d8a72684c64c9440e0459700
Author: solotandem <jim@boombatower.com>
Date:   Sun Nov 27 14:35:10 2016 -0600

    Issue #2431109 by bhide.nishad, solotandem: Include link text in translatable strings.

commit 3f85abf162433d1dd06b6e729c86278744751b95
Author: solotandem <jim@boombatower.com>
Date:   Sun Nov 27 13:16:25 2016 -0600

    Revise response status condition to be similar to other conditions.
    
      Use the 'all except' or 'only' format.
      Treat this condition as one of three conditions to be met for snippet inclusion.

commit a8ae42b427388389ec07457c8da3aa1eb5bf8e4e
Author: solotandem <jim@boombatower.com>
Date:   Sun Nov 27 13:11:45 2016 -0600

    Respect the selected roles. (bug fix)

commit 6e635e5f84e272643856119815dbbaaa5979b784
Author: solotandem <jim@boombatower.com>
Date:   Sun Nov 27 12:56:34 2016 -0600

    Remove unused call to drupal_get_http_header().

commit 9868388a14aa7f91607ad8144e9e11a2ed02622f
Author: solotandem <jim@boombatower.com>
Date:   Sat Nov 26 18:31:34 2016 -0600

    Issue #2467901: Replace role IDs with role names.

commit 74313aa53ca9d8460dcadf15cbc165bf3d6d7dba
Author: solotandem <jim@boombatower.com>
Date:   Thu Mar 6 15:24:59 2014 +0000

    Add tab for advanced items to the settings form.

commit d7ff84981933ba264c364986643ab4fe773a33ea
Author: solotandem <jim@boombatower.com>
Date:   Thu Mar 6 15:20:49 2014 +0000

    Encode the container ID before outputting to the response.

commit a4164ac82c4e68ff90b1ffdfa3122055899a5856
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 4 13:31:06 2014 +0000

    Reorder items in form element to be consistent with other elements.

commit b85db5d84df1b803b84805a2b5245564976f43d5
Author: solotandem <jim@boombatower.com>
Date:   Tue Mar 4 13:28:41 2014 +0000

    Issue #2209835: Correct the snippet compaction code.

commit 59966513ad4eb2dc7188b1d916fce4638b59c6df
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 19:55:36 2014 +0000

    Issue #2206989: Return false if the status condition is not enabled.

commit a361ce7375412ac3d529e81b54135af554613fec
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:50:05 2014 +0000

    Add uninstall and requirements hooks.

commit 8b5bd741abc165d4bc711f0363786338bd8f81d2
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:45:24 2014 +0000

    Add snippet insertion routine.

commit 8acd6ba56a47b909d985b1e64a49970f561b05f7
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:43:23 2014 +0000

    Add page_alter hook and routines to check snippet insertion conditions.

commit 696eaf1bd2c21e0a8c4be8bd93e2c844299cc8a3
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:35:14 2014 +0000

    Add CSS and JS files for settings form.

commit 1dd942d434f88f5fb5bc93e5f5d74605c7bce98d
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:31:28 2014 +0000

    Add validation handler.

commit abf5d62203792075a590e4a0c2b81f582d6e9d88
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:29:49 2014 +0000

    Add tab for response status condition.

commit 9c334a86a87164d5086fb47243aa06e85519f8b9
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:27:38 2014 +0000

    Add tab for user role condition.

commit a7c751edb851ade4eaaa9a0650e7c5bc5c6ed152
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:26:05 2014 +0000

    Add tab for page path condition.

commit 5b4116ad872b77f058ab163ac2411911f34d1426
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:22:58 2014 +0000

    Add tab for general items.

commit 5152b421811edc706d3f3132cbe58c5e9b4ed736
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:21:02 2014 +0000

    Add settings form using vertical tabs.

commit e20bad414a7a1c490d77af448efa0ce004d2676c
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:17:00 2014 +0000

    Add menu hook and callback routine.

commit 3712b93a33940771cd2657dff86ebbf26d747277
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:13:34 2014 +0000

    Add permission hook and callback routine.

commit 00724eeaf7c3e9044404a59e63998ed7616d20c4
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 14:11:09 2014 +0000

    Add help hook and callback routine.

commit d9daafbebe7fdac220700042b842bee03ef2c91c
Author: solotandem <jim@boombatower.com>
Date:   Thu Feb 27 13:39:33 2014 +0000

    Add info and module files.
