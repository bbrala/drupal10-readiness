diff --git a/tests/src/Functional/ExternalLibrary/Definition/DefinitionDiscoveryFactoryTest.php b/tests/src/Functional/ExternalLibrary/Definition/DefinitionDiscoveryFactoryTest.php
index 0fee23e..47efb3a 100644
--- a/tests/src/Functional/ExternalLibrary/Definition/DefinitionDiscoveryFactoryTest.php
+++ b/tests/src/Functional/ExternalLibrary/Definition/DefinitionDiscoveryFactoryTest.php
@@ -44,7 +44,7 @@ class DefinitionDiscoveryFactoryTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     /** @var \Drupal\Core\Config\ConfigFactoryInterface $config_factory */
@@ -115,9 +115,9 @@ class DefinitionDiscoveryFactoryTest extends BrowserTestBase {
     /** @var \Drupal\libraries\ExternalLibrary\Definition\DefinitionDiscoveryInterface $discovery */
     $discovery = $this->container->get($discovery_service_id);
     $definition_file = "$definitions_directory/$library_id.json";
-    $this->assertFileNotExists($definition_file);
+    $this->assertFileDoesNotExist($definition_file);
     $this->assertTrue($discovery->hasDefinition($library_id));
-    $this->assertFileNotExists($definition_file);
+    $this->assertFileDoesNotExist($definition_file);
     $this->assertEquals($discovery->getDefinition($library_id), $expected_definition);
     $this->assertFileExists($definition_file);
   }
diff --git a/tests/src/Functional/LibrariesWebTest.php b/tests/src/Functional/LibrariesWebTest.php
index c109094..73fda3e 100644
--- a/tests/src/Functional/LibrariesWebTest.php
+++ b/tests/src/Functional/LibrariesWebTest.php
@@ -48,7 +48,7 @@ class LibrariesWebTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->urlAssembler = $this->container->get('unrouted_url_assembler');
@@ -414,9 +414,9 @@ class LibrariesWebTest extends BrowserTestBase {
 
     // Test loading of integration files.
     $this->drupalGet('libraries_test/integration_files');
-    $this->assertRaw('libraries_test.js', 'Integration file loading: libraries_test.js found');
-    $this->assertRaw('libraries_test.css', 'Integration file loading: libraries_test.css found');
-    $this->assertRaw('libraries_test.inc', 'Integration file loading: libraries_test.inc found');
+    $this->assertSession()->responseContains('libraries_test.js');
+    $this->assertSession()->responseContains('libraries_test.css');
+    $this->assertSession()->responseContains('libraries_test.inc');
 
     // Test version overloading.
     $this->drupalGet('libraries_test/versions');
@@ -436,19 +436,19 @@ class LibrariesWebTest extends BrowserTestBase {
     // When the library information is not cached, all callback groups should be
     // invoked.
     $this->drupalGet('libraries_test/cache');
-    $this->assertRaw('The <em>info</em> callback group was invoked.', 'Info callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>pre-detect</em> callback group was invoked.', 'Pre-detect callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>post-detect</em> callback group was invoked.', 'Post-detect callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>pre-load</em> callback group was invoked.', 'Pre-load callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>post-load</em> callback group was invoked.', 'Post-load callback invoked for uncached libraries.');
+    $this->assertSession()->responseContains('The <em>info</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>pre-detect</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>post-detect</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>pre-load</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>post-load</em> callback group was invoked.');
     // When the library information is cached only the 'pre-load' and
     // 'post-load' callback groups should be invoked.
     $this->drupalGet('libraries_test/cache');
-    $this->assertNoRaw('The <em>info</em> callback group was not invoked.', 'Info callback not invoked for cached libraries.');
-    $this->assertNoRaw('The <em>pre-detect</em> callback group was not invoked.', 'Pre-detect callback not invoked for cached libraries.');
-    $this->assertNoRaw('The <em>post-detect</em> callback group was not invoked.', 'Post-detect callback not invoked for cached libraries.');
-    $this->assertRaw('The <em>pre-load</em> callback group was invoked.', 'Pre-load callback invoked for cached libraries.');
-    $this->assertRaw('The <em>post-load</em> callback group was invoked.', 'Post-load callback invoked for cached libraries.');
+    $this->assertSession()->responseNotContains('The <em>info</em> callback group was not invoked.');
+    $this->assertSession()->responseNotContains('The <em>pre-detect</em> callback group was not invoked.');
+    $this->assertSession()->responseNotContains('The <em>post-detect</em> callback group was not invoked.');
+    $this->assertSession()->responseContains('The <em>pre-load</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>post-load</em> callback group was invoked.');
     \Drupal::state()->set('libraries_test.cache', FALSE);
   }
 
@@ -517,11 +517,11 @@ class LibrariesWebTest extends BrowserTestBase {
         $raw = $prefix . $filepath . $suffix;
         if ($expected) {
           $html_expected[] = Html::escape($raw);
-          $this->assertRaw($raw, "$label$name.$extension found.");
+          $this->assertSession()->responseContains($raw);
         }
         else {
           $html_not_expected[] = Html::escape($raw);
-          $this->assertNoRaw($raw, "$label$name.$extension not found.");
+          $this->assertSession()->responseNotContains($raw);
         }
       }
     }
diff --git a/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTestBase.php b/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTestBase.php
index 4f835b7..59a2382 100644
--- a/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTestBase.php
+++ b/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTestBase.php
@@ -28,7 +28,7 @@ abstract class AssetLibraryTestBase extends LibraryTypeKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->coreLibraryDiscovery = $this->container->get('library.discovery');
   }
diff --git a/tests/src/Kernel/ExternalLibrary/GlobalLocatorTest.php b/tests/src/Kernel/ExternalLibrary/GlobalLocatorTest.php
index 84eb86e..39a361d 100644
--- a/tests/src/Kernel/ExternalLibrary/GlobalLocatorTest.php
+++ b/tests/src/Kernel/ExternalLibrary/GlobalLocatorTest.php
@@ -15,7 +15,7 @@ class GlobalLocatorTest extends LibraryTypeKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Assign our test stream (which points to the test php lib) to the asset
     // scheme. This gives us a scheme to work with in the test that is not
diff --git a/tests/src/Kernel/ExternalLibrary/PhpFile/PhpFileLibraryTest.php b/tests/src/Kernel/ExternalLibrary/PhpFile/PhpFileLibraryTest.php
index 10c1d2c..75098e7 100644
--- a/tests/src/Kernel/ExternalLibrary/PhpFile/PhpFileLibraryTest.php
+++ b/tests/src/Kernel/ExternalLibrary/PhpFile/PhpFileLibraryTest.php
@@ -15,7 +15,7 @@ class PhpFileLibraryTest extends LibraryTypeKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->container->set('stream_wrapper.php_file_libraries', new TestLibraryFilesStream(
diff --git a/tests/src/Kernel/LibraryTypeKernelTestBase.php b/tests/src/Kernel/LibraryTypeKernelTestBase.php
index 8185794..5644545 100644
--- a/tests/src/Kernel/LibraryTypeKernelTestBase.php
+++ b/tests/src/Kernel/LibraryTypeKernelTestBase.php
@@ -14,6 +14,7 @@ use Drupal\libraries\ExternalLibrary\Type\LibraryTypeInterface;
  */
 abstract class LibraryTypeKernelTestBase extends KernelTestBase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * The external library manager.
    *
@@ -50,7 +51,7 @@ abstract class LibraryTypeKernelTestBase extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     /** @var \Drupal\Core\Extension\ModuleHandlerInterface $module_handler */
diff --git a/tests/src/Unit/Plugin/libraries/VersionDetector/LinePatternDetectorTest.php b/tests/src/Unit/Plugin/libraries/VersionDetector/LinePatternDetectorTest.php
index 9f60071..9d14406 100644
--- a/tests/src/Unit/Plugin/libraries/VersionDetector/LinePatternDetectorTest.php
+++ b/tests/src/Unit/Plugin/libraries/VersionDetector/LinePatternDetectorTest.php
@@ -18,6 +18,7 @@ use org\bovigo\vfs\vfsStream;
  */
 class LinePatternDetectorTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   protected $libraryId = 'test_library';
 
   /**
@@ -51,6 +52,7 @@ class LinePatternDetectorTest extends UnitTestCase {
    * @dataProvider providerTestDetectVersionNoVersion
    *
    * @covers ::detectVersion
+   * @doesNotPerformAssertions
    */
   public function testDetectVersionNoVersion($configuration, $file_contents) {
     $library = $this->setupLibrary();
@@ -111,6 +113,7 @@ EOF
    * @dataProvider providerTestDetectVersion
    *
    * @covers ::detectVersion
+   * @doesNotPerformAssertions
    */
   public function testDetectVersion($configuration, $file_contents, $version) {
     $library = $this->setupLibrary();
