diff --git a/src/Annotation/InstallableLibrary.php b/src/Annotation/InstallableLibrary.php
index ea27965..c3066c7 100644
--- a/src/Annotation/InstallableLibrary.php
+++ b/src/Annotation/InstallableLibrary.php
@@ -496,7 +496,7 @@ class InstallableLibrary extends AnnotationObject {
       // Cache response in the database. The TTL value defaults to one day,
       // but allow it to be overrideable via settings.
       $ttl = Settings::get('installable_library_request_ttl', 86400);
-      $cache->set($cid, $cacheableResponse, REQUEST_TIME + $ttl);
+      $cache->set($cid, $cacheableResponse, \Drupal::time()->getRequestTime() + $ttl);
     }
     catch (GuzzleException $exception) {
       \Drupal::logger('markdown')->warning('%type: @message in %function (line %line of %file).<pre><code>@backtrace_string</code></pre>', Error::decodeException($exception));
diff --git a/src/Commands/MarkdownCommands.php b/src/Commands/MarkdownCommands.php
index 48aafec..d34ccbd 100644
--- a/src/Commands/MarkdownCommands.php
+++ b/src/Commands/MarkdownCommands.php
@@ -132,7 +132,7 @@ class MarkdownCommands extends DrushCommands implements ContainerInjectionInterf
    *   The temporary directory path.
    */
   protected function createTempDir() {
-    $tempDir = 'temporary://markdown_' . REQUEST_TIME . Crypt::randomBytesBase64(10);
+    $tempDir = 'temporary://markdown_' . \Drupal::time()->getRequestTime() . Crypt::randomBytesBase64(10);
     if (!is_dir($tempDir) && $this->fileSystem->prepareDirectory($tempDir, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS)) {
       $tempDir = $this->fileSystem->realpath($tempDir);
       static::$tempDirs[] = $tempDir;
diff --git a/src/Render/ParsedMarkdown.php b/src/Render/ParsedMarkdown.php
index f465cc2..f9e6bc0 100644
--- a/src/Render/ParsedMarkdown.php
+++ b/src/Render/ParsedMarkdown.php
@@ -108,7 +108,7 @@ class ParsedMarkdown implements ParsedMarkdownInterface {
 
     // Handle relative time.
     if (is_string($expire)) {
-      $expire = strtotime($expire, $from_time ?: REQUEST_TIME);
+      $expire = strtotime($expire, $from_time ?: \Drupal::time()->getRequestTime());
     }
 
     return $expire;
diff --git a/tests/src/Kernel/MarkdownKernelTestBase.php b/tests/src/Kernel/MarkdownKernelTestBase.php
index 60028b0..d92b3b4 100644
--- a/tests/src/Kernel/MarkdownKernelTestBase.php
+++ b/tests/src/Kernel/MarkdownKernelTestBase.php
@@ -21,7 +21,7 @@ abstract class MarkdownKernelTestBase extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig(['filter', 'markdown']);
diff --git a/tests/src/Kernel/Plugin/Markdown/MissingParserTest.php b/tests/src/Kernel/Plugin/Markdown/MissingParserTest.php
index acaf042..c09521b 100644
--- a/tests/src/Kernel/Plugin/Markdown/MissingParserTest.php
+++ b/tests/src/Kernel/Plugin/Markdown/MissingParserTest.php
@@ -28,7 +28,7 @@ class MissingParserTest extends MarkdownKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->parser = $this->container->get('plugin.manager.markdown.parser')
