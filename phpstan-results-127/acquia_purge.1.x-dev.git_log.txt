commit 264c33857a0bb6137b546f634f352727d824f131
Author: Jakob Perry <japerry007@gmail.com>
Date:   Wed Nov 3 11:05:09 2021 -0700

    Issue #3230755 by mmcconnell: Platform CDN purger can't invalidate URLs

commit 73c1f74d569decfa0d420d0ea26e5d58b8a0238c
Author: Jakob Perry <japerry007@gmail.com>
Date:   Wed Oct 20 14:23:52 2021 -0700

    DIT-418: Create a new Event subscriber to re-tag cached items on acquia cloud.

commit 3848e20eba498dbc003b98c89f4f5b90e31c452d
Author: Jakob Perry <japerry007@gmail.com>
Date:   Thu Sep 30 11:54:50 2021 -0700

    Technically the geoip filter module does not require Acquia Purge.

commit 4cc1e24bfddd9b595de247cd21a561ab5b442294
Author: amarlata-tect <58686506+amarlata-tect@users.noreply.github.com>
Date:   Thu Sep 30 23:04:32 2021 +0530

    DIT-400: add acquia_purge_geoip sub-module.
    
    Co-authored-by: amarlata <amarlata.kumari@acquia.com>

commit ec9d8277dd7b9c8261e7db4f5fbc100845920535
Author: Jakob Perry <japerry007@gmail.com>
Date:   Wed Sep 22 10:18:13 2021 -0700

    Remove unused use statements.

commit f2407011f1ff9ce276efdd6093f9f11fda5d0ed8
Author: Jakob Perry <japerry007@gmail.com>
Date:   Wed Sep 22 10:10:21 2021 -0700

    Issue #3187540 by japerry: Update Acquia Cloud warning on non-cloud environments to info rather than error.

commit 930a0d02b0edab13fb02195139fc8b73c8a8b601
Author: sharique <sharique@73545.no-reply.drupal.org>
Date:   Wed Sep 22 17:03:33 2021 +0000

    Issue #3131134: Update the logic for determining the SitePath

commit a9be27c168a28e1ded355db05f4f136d0ad92190
Author: Jakob Perry <japerry007@gmail.com>
Date:   Wed Sep 22 09:52:24 2021 -0700

    Issue #3157577 by japerry: Update composer requirements to follow core requirements.

commit 825c770c5ee6af32363db059bbe696c3ddfe83d9
Author: chris.guitarte <chris.guitarte@708236.no-reply.drupal.org>
Date:   Wed Sep 22 16:41:41 2021 +0000

    Issue #3101370: Core Tags Queuer should be made a dependency of the Acquia Purge Module

commit 04a0644d679ffbec1b4e63f9939d6ab8111952b5
Author: Jakob Perry <japerry007@gmail.com>
Date:   Wed Sep 22 09:31:29 2021 -0700

    Require Drupal 8.9 or 9.

commit bf0b3f7d64c69fa6f732170e221971c9a6023577
Author: Narendra Shenvi Desai <shenvidesainarendra@gmail.com>
Date:   Tue Sep 21 22:10:11 2021 +0530

    DIT-200: Remove references of beta. (#11)

commit 16676c4e7754836928c7ed4ad40a394f88269df4
Author: Jakob Perry <japerry007@gmail.com>
Date:   Tue Sep 21 12:21:27 2021 -0400

    Update to ORCA 3 and Support Drupal 9.2 (#10)

commit 8f06d3de6cd558b469bf353b380f93d4d496bf5b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 23 12:37:17 2020 +0200

    DT-1697 | Allow full orca testing [2/2]

commit 17607ea9e572be7c490a695186567b4f575c28f7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 23 12:27:13 2020 +0200

    DT-1697 | Allow full orca testing

commit 5a3eb8f5a2b4220a8f779a59c9647b41debb6e96
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 12:21:02 2020 +0200

    CHANGELOG.md

commit 875b936fdc20f64699f06e5693811ac47996e60f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 12:10:32 2020 +0200

    composer.json

commit 9b8559f9c2b643f395cb528b6397bb0e01461b17
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 12:10:21 2020 +0200

    CHANGELOG.md

commit d00b2149a1c2c6f7de88b58ea11d69cb66d9d050
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 12:10:10 2020 +0200

    .gitattributes

commit b87833b0c22ea9154d02e9a8e0ab44716dc191cd
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue May 26 15:34:45 2020 +0200

    PHP version requirement

commit 00dca9b7b0436fea071ab40bf6cf1e118bd39526
Merge: 6dcc82e f87b2f1
Author: Niels van Mourik <1073680+nielsvm@users.noreply.github.com>
Date:   Tue May 26 15:32:00 2020 +0200

    Merge pull request #6 from acquia/require-deprecated-code-scan
    
    Require Deprecated Code Scan CI job to pass

commit f87b2f19bef32528d07ecf63328db60e43df8280
Author: Travis Carden <TravisCarden@users.noreply.github.com>
Date:   Fri May 22 14:22:36 2020 -0400

    Required Deprecated Code Scan CI job to pass

commit 6dcc82e686564b3a85e475c7606f46881d61f1bb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue May 19 14:08:35 2020 +0200

    PHP version requirement downgrade for D8 compatibility.

commit 89d6299b2c2dfb80b6185ba4b7deda26a5f8dfaa
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon May 18 17:18:23 2020 +0200

    normalized composer.json

commit 0eeed7abc9ff6e3b526b97984f2a745357ef3704
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon May 18 17:12:08 2020 +0200

    normalized composer.json

commit 68e9884e6c6aac91ada120c15598fab03c6a8ce7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon May 18 11:24:00 2020 +0200

    ORCA

commit e1c0c5cb60f8b7228bf135cd0a336cf0d5cd5947
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 8 14:11:05 2020 +0200

    Merge branch 'drupal9' into 8.x-1.x

commit 55031a9421691cfb0b851bca4cf230539f928acf
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue May 5 12:24:47 2020 +0200

    core_version_requirement

commit 5bbad2817e29227385d3b96a4221389b5dfc19a1
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon May 4 17:18:19 2020 +0200

    orca update

commit 946fa94c8ab1fa9fe35b1b7a1ade250bc9677275
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon May 4 17:15:59 2020 +0200

    core_version_requirement

commit 92b2b6472a4de58b2e0c879354abb596c9c45f08
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 9 15:22:33 2019 +0200

    Version bump to 8.x-1.1-beta1

commit 731c44531a228b887698334178855cd0e1ac6efb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 9 15:11:36 2019 +0200

    Prevent Guzzle from throwing: Header value must be scalar or null but TagsHeaderValue provided.

commit 97faa422a3c1883d8e532f6d837f00b935231b97
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 9 13:14:29 2019 +0200

    Issue #3085471 by Chi, nielsvm: Remove dependency on purge_drush

commit 57c1beee315f9aab22856356f35f7660cc518bc8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 9 12:42:55 2019 +0200

    Info.yml: slap dependency on >=8.x-3.0-beta9 (tested).

commit 09739c459e6116c40db7d6fa86184ced102ed6fb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 9 12:16:58 2019 +0200

    Composer: slap a dependency on -beta9 (I'm reasonably sure this should work)

commit 4c1aef9ca43312d5978ee57f24f14fde61d99463
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Sep 19 12:01:21 2019 +0200

    [QA] Changed HostingInfo into PlatformInfo to more accurately describe it.

commit 189a45634ad340759029f193ed5598ca841dee5e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Sep 19 11:37:26 2019 +0200

    [Q&A] BackendBase is vendor agnostic.

commit fa70e559acffeb830cafdd81cc59e4a30e16980a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 22:18:35 2019 +0200

    [Q&A] Added item to CHANGELOG.md

commit 38e5c3b21aa05f1f69cac11665b2b02f6d55cfce
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 22:10:00 2019 +0200

    [Q&A] New CHANGELOG.md

commit 5c018a91256c76170e3987f6fb606e25f75c7ee3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 20:08:09 2019 +0200

    [Q&A] Updated PROJECTPAGE.md.

commit a2915a3713ef8f8b00755fc73389ebf0ebc38a65
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 18:57:27 2019 +0200

    [Q&A] More quality fixes, this time using --standard=AcquiaDrupalStrict.

commit aa58a87c7756a3f205d01971e2ed3698e1d3c167
Merge: a06bfaa ec030a3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 18:10:42 2019 +0200

    Merge branch '8.x-1.x' of git.drupal.org:project/acquia_purge into 8.x-1.x

commit a06bfaa3c9fb46df0765c5e6b0d25da86c1b7fbc
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 18:08:54 2019 +0200

    [Q&A] Don't use PurgeLoggerAwareTrait since DebuggerAwareTrait assumes it.

commit 7df887c1be940477e7597a2db40531342719af9e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 18:08:03 2019 +0200

    [Q&A] Update INSTALL.md

commit 06040614102b7f26e2c04e7de0443c892093bcb6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 17:53:51 2019 +0200

    Adding .gitattributes

commit 16e979d19b852bfaf21efc9dca074e7d3d020791
Author: TravisCarden <travis.carden@acquia.com>
Date:   Fri Jun 21 14:50:42 2019 -0400

    Updated ORCA implementation.

commit ec030a3cfe5805aa367f5883b4c688c4a6d9996a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 17:53:51 2019 +0200

    Adding .gitattributes

commit 29e1d88aef436f817e8e3f31b38ebabe6b8beebb
Merge: 0509220 439a5b1
Author: Niels van Mourik <1073680+nielsvm@users.noreply.github.com>
Date:   Wed Sep 18 16:59:36 2019 +0200

    Merge pull request #2 from TravisCarden/orca
    
    Update ORCA implementation

commit 050922054bd446b61e41220c8ee6a31d120b73d8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 16:38:10 2019 +0200

    Q&A: Fixed bugs discovered by PHPStan before they'd be discovered.

commit 900cdda581518659bcf4bd759644c5ae8cdd1b43
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 15:54:48 2019 +0200

    Q&A: Code quality improvements (phpcs --standard=Drupal --extensions=php,module,inc,install,test,profile,theme,css,info,txt,md)

commit 9a51c2a5d0a1bd2113bd5b2d872fba75c84193c3
Merge: 665322e 7bb3c98
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 18 14:34:50 2019 +0200

    [fixing up after --force failed] Merge branch '8.x-1.x' of git.drupal.org:project/acquia_purge into 8.x-1.x

commit 665322ea24575a4a3c888c102f2ac9ff606d9410
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 10 12:36:24 2019 +0200

    NEW Acquia Platform CDN support while also improving code organization greatly.

commit 7bb3c98ce4288d792dcdb629ee17cb1fa02a6f02
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 10 12:36:24 2019 +0200

    NEW HostingInfoInterface::getPlatformCdnConfiguration(), implementation is only settings based for now.

commit 439a5b1c9d4ffbde026320a00d2d3324c2cc6159
Author: TravisCarden <travis.carden@acquia.com>
Date:   Fri Jun 21 14:50:42 2019 -0400

    Updated ORCA implementation.

commit a731b74999f86f8733fd00ae53b109e3a5b2e914
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jun 7 15:12:04 2019 +0200

    .travis file for ORCA (Acquia's internal quality screening for Acquia modules)

commit 7229c0199cdc6efd6faab8ec2b43d3e5aaf41f6d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jun 7 15:11:53 2019 +0200

    Acquia_purge now has a composer.json

commit 8b92a103c5b2d55224700392b590a6e1d2f6791a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed May 29 15:23:53 2019 +0200

    Squashed branch 'release'

commit 691ce896a7ed83e8874c0bfb47eb6da693a40da6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 4 17:12:23 2017 +0200

    PROJECTPAGE.md

commit fb2cb28496156aaf246cbb51cf068235042b4457
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 4 16:57:34 2017 +0200

    BetaProgramCheck has been updated!

commit 89a74cf7ff7107d5da520c0cfaa42bb6b0928127
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 4 16:31:41 2017 +0200

    Suppressing AcquiaPurgeCheck output when it ain't needed.

commit 0c9c53e6193ba6f34c56c5e1a46109c26254235d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 4 16:29:41 2017 +0200

    Adding dynamic_page_cache as requirement too.

commit 78167576113be9b6101214dde44d7cb502ff1e51
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 13:37:03 2017 +0200

    NEW debugging on succeeding cache invalidations too!

commit 744fc0e798764c6f90987e5eddc9e505953cc5aa
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 13:29:37 2017 +0200

    Broke out extracting debug data from requests and responses...

commit f47e5c96b2f09cbe3c0c1b7fe3ad2827381cac53
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 13:15:13 2017 +0200

    Simplified debug logging with ::logDebugTable()

commit a6369c4f9e94b9232b587edbd7e7f09321a3b5a7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 12:01:50 2017 +0200

    Better explain ConnectExceptions.

commit 64555e51e14d98bd4065f79b28d6d4a36fdad150
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 11:24:03 2017 +0200

    NEW exciting diagnostic which detects basic HTTP authentication using Shield or lines in .htaccess. Caches its results for two hours to prevent disk reads, with a crystal clear message.

commit c6099917bbc58eefa3bfd4d64a9eee284da3a655
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 09:23:45 2017 +0200

    MERGED AcquiaCloudCheck into AcquiaPurgeCheck to reduce overhead and present a clearer, single diagnostic to the end user (checking many things).

commit 9039057541601603c06c67254879593f7e2c65ec
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 26 09:05:43 2017 +0200

    New TAGS_GROUPED_BY to have that number more at the top of the code next to the other constants.

commit 2c90a301f60ed03b34fb4cd4c6b7886ed50795c9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jul 24 15:29:15 2017 +0200

    Ported AcquiaCloudPurger to LoggerChannelPart::isDebuggingEnabled() which I just added to purge. Upgrade your purge module if it breaks.

commit 61b828e84557c368237ff90d1c47539e4b2091fe
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jul 24 07:54:13 2017 +0200

    Guzzle takeover: updating code.

commit c875478836d5a6c4bcbd15a42020d1ecce1e7a5c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jul 24 07:52:40 2017 +0200

    Moving the Guzzle implementation in place.

commit b2ba23fd8c0134ce881dd7ededbebff669256c23
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 23:55:13 2017 +0200

    [GUZZLE] backport of the wildcard https fix to the old implementation.

commit 65a3bfe000861b71d3e15ff7debbc326aff3a900
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 23:46:54 2017 +0200

    [GUZZLE] Allow a significantly longer connect timeout, to reduce the errors we're seeing across client sites.

commit 9e031b45ed00a220671497287647a25de074986a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 20:12:02 2017 +0200

    [GUZZLE] ::invalidateEverything() cleanuip.

commit 2ee162abfb0c4daa4d139aaedbf50856416f18a7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 20:09:00 2017 +0200

    [GUZZLE] ::invalidateWildcardUrls() always rewrite https:// to http:// as the VCL still matches that and it saves quite a bit of hassle.

commit afc8e1d717e2f119a86293f07419c2b4ff1af1b7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 20:02:42 2017 +0200

    [GUZZLE] Ported ::invalidateTags() which now also groups by sets of 12 tags.

commit b7ac887626df55f496523926b46f2459ad3eef91
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 20:01:53 2017 +0200

    [GUZZLE] Further hardening of LoadBalancerMiddleware, very strict now.

commit e357fd0125178f491f13b72b4a1a17ff52af9214
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 20:01:20 2017 +0200

    [GUZZLE] Further hardening of LoadBalancerMiddleware, very strict now.

commit ad81488d30ffbd25d70f3657b94fe5e3233a307f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 19:32:29 2017 +0200

    [GUZZLE] Latest tune to debugging output

commit 19c3579dbe70d0d5857d062e0e6ee7119de52510
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 19:28:25 2017 +0200

    [GUZZLE] DELeted legacy ::executeRequests(), ::disableTrustedHostsMechanism(), ::logFailedRequestLegacy()

commit 2cbcdf34682bf360adfad65818c7b47b038902f8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 18:40:26 2017 +0200

    [GUZZLE] Further tuning of the new debugging goodness.

commit e4007d8d41d3b544f97eb6d71e2c0a3cc724ccc5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 18:27:03 2017 +0200

    [GUZZLE] Debugging just leapfrogged from 'meh' to 'woaahhhh' and best of it all is that its overhead now is practically zero when turned off.

commit abc2968d8247e0b0f64e3d7014afb64ce01c285a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 16:15:11 2017 +0200

    [GUZZLE] Ported ::invalidateWildcardUrls(), this was a breeze now!

commit 5d3d612aef0dfef8f12ee57ee1b55faed01ccc43
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 16:04:18 2017 +0200

    [GUZZLE] Disable HTTPS verification like it is in the old implementation.

commit 80990a19447b93942e9086db3ad0f01cf49de5d1
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 16:01:47 2017 +0200

    [GUZZLE] NEW ::getGlobalOptions() and ::getResultsConcurrently()

commit 39373e24a8cb492747baeb4fc71a3e7719a35230
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 16:00:36 2017 +0200

    Strengthened debug logging.

commit 6474cbc2ae7e436bc0f546c5bd891f4d422024c6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 15:10:47 2017 +0200

    [GUZZLE] Fix in ::invalidateUrls() which threw errors.

commit 4c4a4ae45778217a4c335bc62dff4923ffb6ec03
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 15:09:48 2017 +0200

    [GUZZLE] Strengthened ::logFailedRequest(), more readable and now adding class + request info when available.

commit 5edf2b21eef4fe49fd07e36bfdd1caa3aed2fe1f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sun Jul 23 14:07:13 2017 +0200

    [GUZZLE] Hardened LoadBalancerMiddleware by catching 403's, 405's and other METHODs.

commit 38815de76a042c3d9b5da84f776624140e9fbfca
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Jul 22 11:50:07 2017 +0200

    [GUZZLE] Ported ::invalidateUrls() to Guzzle using a concurrency pool. Works, much testing needed.

commit 9797eb4355e8b0ead209456008d58195c3e9c118
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jul 21 23:30:57 2017 +0200

    [GUZZLE] NEW ::logFailedRequest(), old one is temporarily ::logFailedRequestLegacy()

commit d5683414e32e2434a4463eae50a4aab995e7f545
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jul 21 23:29:52 2017 +0200

    [GUZZLE] Reorganized the performance constants to match Guzzle's

commit 5a93b418fd557e925d72dadd8c906f4ea9702f30
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jul 21 23:29:00 2017 +0200

    [GUZZLE] Ported ::invalidateEverything() to Guzzle, seems to work.

commit f7f1acdb951b26477fce3654a40292e0c8bb343f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jul 21 23:25:04 2017 +0200

    [GUZZLE] NEW \acquia_purge\Http\LoadBalancerMiddleware makes response triaging easier.

commit e4ae5e0de4aefa35568685565862d22404080633
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Jul 21 19:30:17 2017 +0200

    [GUZZLE] Because I'm introducing \GuzzleHttp\Psr7\Request, alias the old one.

commit 32bec586e858b8ef550173994884fcbdab2476bf
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 20 14:27:39 2017 +0200

    [GUZZLE] IF and when this branch merges, drop a direct hard cURL function check.

commit 6307064e9b3404cee5763c25367258f99846ee20
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 20 14:23:57 2017 +0200

    [GUZZLE] Injecting the http_client service #babysteps.

commit 6fe63a14d2bead408664dba145028de10453004a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jul 18 16:23:37 2017 +0200

    [GUZZLE] Copied AcquiaCloudPurger into AcquiaCloudGuzzlePurger which I'll port to Guzzle, but it needs to remind a separate plugin for the short-term. So its a temporary purger.

commit 6ba5752d680865ff380b6e7c55878c5e0fcab56d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 6 13:51:29 2017 +0200

    PROJECTPAGE.md update.

commit 67452eeff0d2dd5b2e1d9727ef0b502ca5cc7607
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 6 11:49:22 2017 +0200

    Check for the acquia_purge_beta access token + comment rewrite.

commit 25acd4a485a179865ef8e503145d294a87fb48bb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 6 11:23:40 2017 +0200

    AlphaProgramCheck became the BetaProgramCheck.

commit fc4c58f67cdeddc985ac10b198ed6b94bf9b2122
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 20:52:36 2017 +0200

    Rolled back the 70-tag optimization as I deemed it too risky in combination with the used regex in our VCL implementation.

commit 973296faf7356319f56e4de51669a95f2217662f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 20:33:40 2017 +0200

    Made site IDs 16 characters long, significantly safer.

commit 3ecaeae79f2fcfd31d3472fbdb0f8239cb712d62
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 20:33:19 2017 +0200

    NEW Hash::hash() that wraps the actual algorithm.

commit 59010a99bbc31ffaecb97c9424010927cb3ec2cb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 19:58:11 2017 +0200

    The 70 most used tags are now replaced by 1-2 character long hardcodes. Saves up to 40 characters on the front page!

commit e05500c4ac579c3874016f85fa2fb74264cd9943
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 18:31:24 2017 +0200

    Centralized hashing under \Drupal\acquia_purge\Hash for security and maintenance purposes.

commit fc68da46555a66e1428374ad12c1a85bd419749a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 18:29:10 2017 +0200

    CHANGE the site identifier is now always a 8 characters long unique hash.

commit 2e5352a02a6ffcd34d00b6aee458a3cf2d71a2c0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 17:55:19 2017 +0200

    NEW support for clearing entire sites.

commit 11f85fbb9ea9be1bda804c5e8e82fdd2377c51e2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 28 16:22:44 2017 +0200

    NEW support for clearing 'wildcard URLs' like http://www.site.com/news/*

commit 0dbc1f56a50f24c71044a403fe1c8061a60be028
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jun 1 11:57:07 2017 +0200

    NEW AcquiaPurgeCheck reporting the version and warns when to add the purger.

commit edd5a6117d38773be9f386a3988e4ff123751d35
Author: adam.weingarten <adam.weingarten@2677413.no-reply.drupal.org>
Date:   Mon May 22 12:04:05 2017 +0200

    TEMPORARY! Issue #2844852 by neetu morwani, adam.weingarten: Minify the cache tags sent in the header

commit 403bedd2eb1cab0587954e4553711377d827f368
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon May 22 11:38:49 2017 +0200

    New access code.

commit ca326b275a4b34616360f67d137caa1dd31a6b48
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jan 24 12:44:49 2017 +0100

    Emit tags space-based, to comply with the new VCL logic.

commit 43942a37af3e3256acd42d52893a68cb3bd524fc
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 15 20:03:09 2016 +0100

    Merged ``/tag`` and ``/tags`` invalidation into the single API call ``tags/``, the testsuite passed and acquia_purge has been synced to. Also updated all API descriptions in the slidedeck and CL-14804.

commit 70bb07fc4d630daed65463b8f221c5e38364ff75
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 22 12:21:14 2016 +0100

    Use spaces as separator

commit a73869114dfb1546e7ade2cfb71209ccf0423125
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Sep 29 11:10:31 2016 +0200

    Detect tags with the "|" character in it. Officially this character is not forbidden to be used in tags, but is likely going to cause issues for Varnish based implementations. Therefore we explicitly forbid this practice and log about it as well.

commit 6fc5d116a0543bd771bf0037b2f9f66981d14809
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Sep 29 10:34:23 2016 +0200

    Typo in AcquiaPurgeTagsHeader

commit f73b73b2bc581ed92e1dd74a458782e947b49309
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 15:58:18 2016 +0200

    PROJECTPAGE.md

commit 1f40a25af3cacf73426dc4a5806f6b01d34fdf84
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 15:43:49 2016 +0200

    FAQ.md

commit 74adeb5a7cfb21a50c5bced2dee88c20fa08bb05
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 15:40:52 2016 +0200

    Fixing errors when $settings['trusted_host_patterns'] is set.

commit 2e409964555defb4ded994d9203c2388a53367c2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 14:52:02 2016 +0200

    \Drupal\acquia_purge\Plugin\Purge\DiagnosticCheck\AlphaProgramCheck now agressively enforces several policy decisions vital for the alpha program.

commit 5d43cced29d0ea41760df69da3154462feac8aef
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 14:22:20 2016 +0200

    AlphaProgrammeCheck -> AlphaProgramCheck (http://www.dailywritingtips.com/get-with-the-programme/)

commit 9160a500927bd9664a820bab441ed798c3ed9ec0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 14:18:20 2016 +0200

    Simplified \Drupal\acquia_purge\Plugin\Purge\TagsHeader\AcquiaSiteHeader.

commit 196669ea872bdcbb48ef9148148f374f234df5e0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 14:16:19 2016 +0200

    NEW HostingSiteInfoInterface::getSiteIdentifier() + implementation(s).

commit 1c9b32c4accd6123d1c908dbe52fa2e6b78638fe
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 14:05:20 2016 +0200

    NEW HostingInfoInterface::getSitePath() + implementation.

commit 19240840fa07d44df750d80a11d856f3803ee339
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 08:16:30 2016 +0200

    This has been fixed on cloud, removing.

commit ee807a567fc9010b279df4c1be229cfd5dada5eb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 7 08:01:44 2016 +0200

    Various pareview nitpicks.

commit 04bae174bf7182e8dbaf1e7f99284436da86fb6c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 6 20:17:34 2016 +0200

    Removed VERSION from info.yml for pareview.

commit 17fee4e8e5556a8573ae286af8bb97c37a529296
Author: neerajsingh <neerajsingh@3202261.no-reply.drupal.org>
Date:   Mon Sep 5 11:23:27 2016 +0200

    Issue #2755019 by neerajsingh, nielsvm: Remove @file tag docblock

commit 6cdd21827fba7f3c21e4bed2dd6d1e766dec14cb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 25 14:45:07 2016 +0200

    Adding support for Gardens, thanks Matt.

commit bb41adad65f6c7dd4a1da99e40eee5b19d4a4b1e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 25 14:43:12 2016 +0200

    AlphaProgrammeCheck wasn't working as it should.

commit 2ef38313338530aa4cd11f6fd04b624263050ae4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 20 21:51:26 2016 +0200

    AcquiaCloudPurger gained initial tag support (alpha programme users only).

commit 1869347d80ccf310239a32a014dc68e5caaabab3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 20 19:21:02 2016 +0200

    Separately check for curl_init().

commit 70c655ea101b0f2c7f076aaed7dc2c221b2ecf34
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 20 16:51:43 2016 +0200

    We're adding a temporary secret access code requirement for the alpha programme.

commit c9e4efdfa54b1208f7052d47738c14392cdf0fe3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jul 20 16:37:00 2016 +0200

    AcquiaPurgeTagsHeader brought in line with our pending patch.

commit dbbfe095b04fd286c8695098738a52dbd584f00f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 8 14:45:09 2016 +0200

    Renamed property $acquiaPurgeHostinginfo --> $hostingInfo

commit 398158168307ea929c4adebe014abcc2e53156fa
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 8 13:31:34 2016 +0200

    Dropping $typeMeasurements, this was the predecessor to upstream time measurement.

commit bd241ee0e3eca916689a29729716e883f1c89a71
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 26 14:20:24 2016 +0200

    Adding tags and site header.

commit 7fed5701c4b54e95467664d27e351c2c6503930b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 15 15:50:47 2016 +0100

    The dynamic runtime measurement awesomeness has moved upstream, this means we can simplify AcquiaCloudPurger quite a bit... YAY!

commit e21cddc7c407321d3c115b7d2252f76e19c61495
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Mar 12 00:53:52 2016 +0100

    To prevent that incidental slow measures slash capacity forever, ::typeMeasurementsStop() now slowly restores capacity with decremental steps of 15% to the last known measure when the current performance was faster. Tested it and it works great.

commit ab3eeb59bb7c319f481e6210d7827181c6a533f6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Mar 12 00:09:01 2016 +0100

    THIS IS AWESOME - The new ::typeMeasurementsStart(), ::typeMeasurementsStop() and ::typeMeasurements() track PHP execution time during cache invalidation (by invalidation type) and lets Acquia Purge dynamically adjust its capacity expectations, within boundaries of course. On local tests this easily results in 0.1 resulting in the ::idealConditionsLimit() kicking in.

commit d3ad4647350b730aa44634944b82e6fe075aa3f5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 21:49:27 2016 +0100

    A tiny but totally fatal bug in ::invalidateUrls() - tested with purge_queuer_url locally.

commit 4927abd17f85df321c6cfae4ada2c04632147678
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 21:35:06 2016 +0100

    Implemented ::invalidateUrls() and added ::executeRequests(). The latter relies heavily on \Symfony\Component\HttpFoundation\Request objects which are passed in as mere value objects, with its ->attributes parameter bag as messaging mechanism.

commit ce8e08986d87214f8ea85d4386f081cb4fd53799
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 14:18:55 2016 +0100

    AcquiaCloudPurger got ::invalidateTags(), ::invalidateUrls() and some more stubs and preparations..

commit 26b0eb3fb25dd5f1cbc9f2870b4b087a1d3dc6c5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 13:44:48 2016 +0100

    I'm going for cUrl directly and not for Guzzle, most important reason is the ability to do proper multi-request processing but also to stick to code that already works solidly in the D7 version.

commit ff9f81ef41df38ec5dbe5c8dc9782365aedf5e91
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 13:34:57 2016 +0100

    DOMAINS.md ain't longer relevant for the D8 version.

commit 1da9b32d4b689a29c67904dbd90a19d41526cbd7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 13:24:38 2016 +0100

    PROJECTPAGE.md

commit 385d6bc4a418fbc9c38c6af8bf6f8a7d5914f2d5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 13:16:26 2016 +0100

    Overhaul of PROJECTPAGE.md - putting it live immediately.

commit 48aa842826eb28be975b5a37118dce6225cf8626
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 12:15:40 2016 +0100

    Intitial stab at a acquia_purge port. The 'acquia_purge.hostinginfo' service is in and works, the AcquiaPurger contains non-functional stubs for now.

commit 215a091c9eced8b27744fa25126792657d6acd82
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 11 12:05:00 2016 +0100

    Commenting out the FAQ for later use.

commit f0d7b82b45651924c3b5ae17727c9c2df0f568bf
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 10 10:32:12 2016 +0100

    First stab at INSTALL.md - and feature drop like crazy LOL.

commit f8a9f321121f9efc2b80875622364cd09d6dcd9e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 10 09:30:06 2016 +0100

    The big... purge... ahead to D8 support.

commit 1eaba61293373429afc3e59f1609baae32aae6cb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 10 09:25:20 2016 +0100

    The big... purge... ahead to D8 support.

commit a42baac53da0bac3744fb6521ed2d332cf1623c5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 10 09:21:55 2016 +0100

    URLs in PROJECTPAGE.md

commit d3a56a038ccd4cca8bf17714383fa13659f8a8ba
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 10 09:16:16 2016 +0100

    Converted everything to Markdown, to bring this into line with the other purge projects.

commit 896aeb68fbf711019c5a8b4037e5c7b74a7848ff
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 26 14:24:56 2015 +0100

    Zendesk ticket 231083

commit 1b348fb302511013e7246bf712577313f52f4c28
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 20 13:52:30 2015 +0200

    Zendesk ticket 231083

commit f642736bc56e5ca2298a0967713c384d1407fdc8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 9 12:40:18 2015 +0200

    Issue #2528526 by nielsvm, hayzer: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'module' cannot be null

commit c1bc9edacf48e483254da60a70f08e355f6d3233
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Jul 9 12:32:14 2015 +0200

    Issue #2529750 by Charles Belov: Update permissions description to reflect separation of purge progress bar and manual purge block

commit 6c58470f7c27d3aed4a37356186d42093ed7016d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jul 6 15:00:16 2015 +0200

    Pareview meh

commit 27393b97ef823936b29b0932bd36ffcf2d167043
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jul 6 14:32:37 2015 +0200

    PHP Fatal error: call to undefined function drupal_get_path(), acquia_purge.module:1201

commit 969860bc6d27b30f97ebd03c65f684f8e0560fec
Author: mcdruid <mcdruid@255969.no-reply.drupal.org>
Date:   Thu Jul 2 15:12:00 2015 +0200

    Issue #2503645 by mcdruid, nielsvm: check for wildcards in domains

commit 952e1f319667874b47a1a6dfe6bf562b2c3bd6b0
Author: git <git@569178.no-reply.drupal.org>
Date:   Thu Jul 2 14:42:37 2015 +0200

    Issue #2506443 by Charles Belov: Correct typo "trashing"

commit 7b2d4a6450b1d08af14721539bf3519934932c1a
Author: git <git@569178.no-reply.drupal.org>
Date:   Thu Jul 2 14:36:50 2015 +0200

    Issue #2506465 by Charles Belov, nielsvm: Provide more guidance for checking logs to resolve problem

commit 4a5d0d2da359722e712551e26a58d6d5669e3478
Author: kylebrowning <kylebrowning@211387.no-reply.drupal.org>
Date:   Thu Jul 2 14:24:24 2015 +0200

    Issue #2506881 by kylebrowning: Call to undefined function base_path()

commit a9c7e84541ab7c26d35c901b0f594a6955a5d787
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 3 11:14:43 2015 +0200

    FAQ

commit b7147f70c6249aa1fe89237f83282e514e61dc8d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 21:43:59 2015 +0200

    line length trimming

commit 276ad9cdda531b224925ee41d67515deac68113e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 21:34:45 2015 +0200

    MASSIVE RENAME - to make Pareview.sh happy, expecting many 80col crosses now.

commit 9523e61cbde275587f9eb967556cb01bdce4a09a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 19:40:33 2015 +0200

    Pareview

commit f9782fc13d7befb7ca99dce8a864e80b818f53c9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 19:33:09 2015 +0200

    Pareview

commit 2d1ecc58dbb252665c00a68c8bad79deb00c5e36
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 19:28:22 2015 +0200

    Pareview

commit 554e9dfded7180ba9e152dba2222f334b54b4fba
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 19:05:11 2015 +0200

    Pareview

commit 4e447765784ed7063bf3789a7ad55ccf71c09b60
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 18:43:09 2015 +0200

    Pareview

commit 3de4aca7c1f7ce19d6713a0824a7f5d6252aba28
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 17:26:04 2015 +0200

    A lot more pareview

commit 4e4e0c1f1cdecf62c29d944b3e17ae8ea3a27770
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 17:07:31 2015 +0200

    Pareview

commit f35f7182e0712b4705ddbe55a0c37e44d21616fc
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 17:05:49 2015 +0200

    Pareview recommending typehints too nowadays.

commit 2857f7eeae03f4d267613c8053beb8be391aa6f5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 17:02:35 2015 +0200

    Oh WOW @ code_spell

commit 5208cd2512043902398410b10b20cad597985119
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 17:00:38 2015 +0200

    Fixes from Pareview.

commit a74e76caea068eeb8c74522dc826dc39410683b1
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 2 16:52:54 2015 +0200

    Woah, I was really using a deprecated method yesterday.

commit 0fb2771eb34557dae9efad4a5eaf9b71242e8a2c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 21:35:49 2015 +0200

    Coder strict didn't came with much, phpcs later on.

commit 805d77cdcd46a3f2e792d5e244b072fbaaf21273
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 21:05:44 2015 +0200

    PHP

commit e0fb81beab83b40929ffaf7b6329cd64bf5781da
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 20:56:10 2015 +0200

    Acquia Cloud code compat.

commit 4c847262aa3392ef0619126464b9146abccb1c37
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 20:32:18 2015 +0200

    Issue #2388079 by Elijah Lynn, ashcomd, nielsvm: Support token for X-Acquia-Purge header

commit 8c273fdd3e5012374c0ea86ae2773933fbd13616
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 20:04:12 2015 +0200

    Issue #2356633 by grasmash, nvmourik: introducing hooks hook_acquia_purge_purge_failure(), hook_acquia_purge_purge_success() and helper methods ApQueueService::queueItemPaths() and ApQueueService::queueItemPath().

commit cab74c633d9a6200451eec63f9df5db5fe353f02
Author: nielsvm <nielsvm@163285.no-reply.drupal.org>
Date:   Mon Jun 1 17:17:13 2015 +0200

    Issue #2498329 by nielsvm, Waliur: Acquia_purge update error

commit 797a2d1f3370aa83b2cd44e51caabbe4885756d6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 16:40:33 2015 +0200

    Issue #2368513 by emptyvoid: Separate permissions for ajax status and purge buttons

commit 717533f5170dca50369ab49d3ad92c5643e84791
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 15:48:49 2015 +0200

    Early-load acquia_purge.deprecated.inc from .module as soon as it is included, which fully prevents third-party code from breaking since the deprecated wrappers now get defined at the same stage within Drupal's bootstrap.

commit dfbf0342ddbf32bd02c007503eb6d684ead7969b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 15:13:01 2015 +0200

    Shortened the deprecated helpers by defining _acquia_purge_deprecated().

commit f96d18d37d4e7269db823269c8e8997908267230
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 11:16:51 2015 +0200

    Added _acquia_purge_queue_add() as deprecated helper.

commit ba2061d2803366e5c1cc27f604918890aff89a8c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 11:13:31 2015 +0200

    comment

commit 7c30e58f00dae10f1cc6b0d19b279334bf78bdf8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 1 10:55:22 2015 +0200

    acquia_purge_expire_cache() was still calling _acquia_purge_ajaxprocessor_is_path_blacklisted(), rewrote it.

commit 3eaeb9e13f0ef177c1b03e2be882470ec77cb503
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 16:55:21 2015 +0200

    Issue #2392571 by baaj, nmenon: don't blindly use drush_set_error() everywhere.

commit b6b7353d1038a6c91a3956c5bf0b4b871c5d2fd1
Author: git <git@2488890.no-reply.drupal.org>
Date:   Fri May 29 16:49:14 2015 +0200

    Issue #2352347 by matthew.lavoie, mcpuddin, lahoosascoots: Cloud Domain Detection in /etc/apache2/conf.d getting too many domains

commit 1861a23bb892bebf1a7c15229a1a5f842ffd7783
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 16:24:22 2015 +0200

    Issue #2375451: Module runs even when `$_ENV['AH_SITE_ENVIRONMENT']` isn't available

commit 382eb8cb4875e92e624aff3c2f0136248b3cc8fe
Author: madmatter23 <madmatter23@455714.no-reply.drupal.org>
Date:   Fri May 29 15:59:00 2015 +0200

    Issue #2392563 by grasmash, Charles Belov: Using purge button to purge front page doesn't purge front page

commit 13aa0d2b4a84074b6da6e32aabd4203332ab516c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 15:18:39 2015 +0200

    Issue #2387377: Purge this page button has no effect for second page of view result

commit 5b950d5668273ddb9b716a0c6c07385d66cde889
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 15:01:00 2015 +0200

    Now /acquia_purge_ajax_processor only 403's when users are logged out, highly reducing logged warnings.

commit a54fa0d6e6966fe2ac910539c7485d6a593f45c3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 15:00:17 2015 +0200

    Streamlined the UI by making it faster and by letting the manualpurge form message more accurately.

commit 6c1f4cd584a02228ed51a85e0cdea0084fac1d87
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 14:28:53 2015 +0200

    Preventing PHP imcompat.

commit bb672825bbf0fcacfc42ae9c80fea564251a50f6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 14:16:34 2015 +0200

    CURLE_OPERATION_TIMEDOUT --> CURLE_OPERATION_TIMEOUTED

commit 47067d6649f7390433e577f6b8486ded48a42851
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 13:18:43 2015 +0200

    _acquia_purge_load() greatly simplifies code loading by leveraging our info file and the order of files specified therein. It also replaces all require_once's we we're doing inside ApQueueService and now centralizes all of it.

commit 8850e52cdfbb8a8a524792d7d9958762e24b6994
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 29 10:54:08 2015 +0200

    OOPified queue processing into "processors"": ApAjaxProcessor, ApCronProcessor, ApRuntimeProcessor. Main benefits being better code isolation + decoupling, maintenance simplification and a shorter .module file with a thin "events system" that this API introduces for processors. Its a big swath of code that moved, although the behavior remained entirely the same - should all be better to understand for anybody else besides me :).

commit eefc0a38b871044d62880d1df17c6a43d2609d74
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 21 12:21:10 2015 +0200

    oops

commit d0b32aefeb683e6d0a3d531648a26f60ec3648f2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 21 12:19:00 2015 +0200

    Rewrote several FAQ items and other wording to the new and cleaner reality.

commit 7dc03aea75f736e048589c7bf5fb77a201b4c6ae
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 21 12:12:20 2015 +0200

    $conf['acquia_purge_silentmode'] = TRUE; now visually hides the client-side processor though it CANNOT be disabled. This decouples the visual hiding from cron and late-runtime mode, which was admittingly a little messy.

commit 1c32e00b75e59d552964afe0f56ddad9a3ee3ce8
Author: nielsvm <nielsvm@163285.no-reply.drupal.org>
Date:   Sat May 9 00:22:41 2015 +0200

    Issue #2228949 by Elijah Lynn, Dave Reid, ryandekker, nielsvm: added "late runtime" processing on the server side [OPT-IN]

commit 1e099128f099963b4421c0bd282f1abaee639c02
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 8 23:02:51 2015 +0200

    readability of README.txt

commit 4f4d3e6ee1311a61a933e3c2783b061423ffc304
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 8 17:07:21 2015 +0200

    Cron processing now NO LONGER disables the AJAX processor, though it hides it. Their combination makes the experience only better and it also paves the path for another considered processing mode: late-request processing.

commit 88da310c55bb93e06f6cd03ff85e7160b1b9ed9d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 7 16:56:37 2015 +0200

    Moved locking fully into state storage, now avoiding Drupal's lock API! This is not only a performance optimization (less queries) but also unifies the place where state related to the queue is stored.

commit 5f056caaec6cb5892e6496b0917fcede80899b93
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 7 16:24:26 2015 +0200

    doc

commit 5fc410d008855bcf3068e17117e20109b4b6ceb1
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 16:48:39 2015 +0100

    phpcs --standard=Drupal gave VERY useful feedback, much better than coder_review's UI feedback.

commit 511e9ca2238462b0468816f07f20d2fc40a6b801
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 15:59:46 2015 +0100

    More "useful" code style feedback from coder_review.

commit 0af02fa05f1f058b56307af2de4693cf273928f0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 14:37:21 2015 +0100

    coder_review seriously hates @see

commit 35ed61a8449a760d59f248fdeab392252f367f54
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 14:24:24 2015 +0100

    ApStateStorageBase made the two storage backends much lighter and less vulnerable to code rot.

commit 7645dba65a46bd1f6b1d6632cedb238f68979011
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 13:42:33 2015 +0100

    A ApStateCounter is now a value-added version of ApStateItem and ApStateStorageInterface::getCounter() takes care of instantiating it or overloading ApStateItem objects when its requested - much better this way.

commit 71111dfa11732ac32a0888775f71af852352abe3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 13:41:23 2015 +0100

    Banning ApQueueInterface::counter() in favor of ::good(), ::bad() and ::total() - which all use the new ApStateStorageInterface::getCounter()

commit fefabba918c18fafe4a16c1edd4ec54df2897796
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 10:33:58 2015 +0100

    Moved the Counter under state/ where it belongs - though it was made before the state API was ;)

commit 51fca46f583eda71b01a30e431fc4c89a2044cab
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 10:23:04 2015 +0100

    Removed the needless ApQueueService::queueInitialize()

commit cd63289b522b2f7f634ea1161ba3e7e904778da6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 10:09:43 2015 +0100

    Assasinated ApQueueService::i() in favor of the friendlier and more procedural _acquia_purge_qs(), which does exactly the same thing with the ADDED BENEFIT of loading queue/ApQueueService.php when it is actually needed and when Drupal's autoloader really does fail.

commit 5915d2bd370fa00d57cc5e0e84cc698538bad9d0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 25 00:15:09 2015 +0100

    No longer require passing in '_acquia_purge_purge' in ApQueueService::process(), dx++;

commit c7a9fef899999a5003e6b3b695e1388ff1a152af
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 24 23:56:26 2015 +0100

    NEW A real state API - another BIG refactor waiting to happen. It rips out the old state functions and replaces it with a storage object that holds ApStateItem objects.

commit 8b73902ff37a050ed119154d221655cedb161424
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 24 12:46:02 2015 +0100

    NEW ApSmartQueue: a nice opt-in backend that drops already externally expired items from the queue without working them.

commit b112b00b632cec0a1b3c76508ac3004f5b3f7cba
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 24 11:44:03 2015 +0100

    Fixed a few bugs in the new shiny engine after testing.

commit d855b42fd620eeaf823d9ec7ad2eb5f16922ef2c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 24 11:34:32 2015 +0100

    Improved failure logging big time, its clearer now when it can, e.g.:
    
     - Cannot connect to 10.0.2.1:80, '/' released to queue!
     - Connection to 10.0.2.1 timed out, '/' released to queue!
     - Connecting to 10.0.2.1 exceeded 2 seconds, '/node' released to queue!
     - Cannot resolve host 10.0.2.1, '/' released to queue!
    
    And when it really doesn't know why (includes cUrl msg now):
     - Failed purging 'http://localhost/' from 10.0.2.1, '/' released to queue! CURL: Couldn't connect to server; DEBUG:  [error]
    url:S(16) "http://10.0.2.1/", content_type:NLL, http_code:I(0), header_size:I(0), request_size:I(0), filetime:I(-1),
    ssl_verify_result:I(0), redirect_count:I(0), total_time:F(6.0E-5), namelookup_time:F(2.0E-5), connect_time:F(0),
    pretransfer_time:F(0), size_upload:F(0), size_download:F(0), speed_download:F(0), speed_upload:F(0), download_content_length:F(-1),
    upload_content_length:F(-1), starttransfer_time:F(0), redirect_time:F(0), redirect_url:S(0) "", primary_ip:S(0) "",
    primary_port:I(0), local_ip:S(0) "", local_port:I(0), headers:S(58) "Host: localhost|Accept-Encoding: gzip|X-Acquia-Purge: fake"

commit bc3829457172856e2ec3b5880a299e672625915b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 24 10:42:07 2015 +0100

    NEW ApQueueService - a refactor waiting to happen. It rips the old queue engine out of the .module (see acquia_purge.deprecated.inc) and replaces it with a cleaner and better service object that wraps the underlying queue backend. The queue service encapsulates all the complexity around adding, claiming and processing queue items.

commit 5ce437fad1711e03538ed78f09592a1caffc919a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 24 10:29:39 2015 +0100

    The ApQueueCounter() object provides us now with a much cleaner way of updating counters.

commit 58048f0bc10b74ddf54f253422b409c4500b58f5
Merge: 376edef 10f499b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 20 10:25:31 2015 +0100

    Merge branch '7.x-1.x' into 7.x-1.x-queue
    
    Conflicts:
            acquia_purge.module

commit 10f499b93339872c723baaec2672c13b4687422e
Author: nielsvm <nielsvm@163285.no-reply.drupal.org>
Date:   Fri Mar 20 09:55:16 2015 +0100

    Issue #2387433 by Elijah Lynn, nielsvm: Cleanup docblocks to better meet standards

commit 0d916a01f0c28697cfff8b834f4639485d299f56
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 20 09:47:12 2015 +0100

    $conf['acquia_purge_errorlimit'] now allows setting a static integer as hard limit AND the standard limit is now dynamically calculated as "limit = slowdown factor ^ 3" with 20 as bottom limit. This should put some more relief on sites/editorial users with busy load balancers as the tolorance now goes up exponentially - not encouraging it though ;).

commit 376edef9e1764616a9ef91f7cf4338dfe41a80e1
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 20 08:03:16 2015 +0100

    Calling DeleteQueue() directer.

commit 963f8b0b40dd7389da708a1815413ba531df1d58
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Mar 20 08:02:41 2015 +0100

    docblock

commit 950f941072f0d4ad4151140aacb4b6bc13cdf17e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 19 21:44:26 2015 +0100

    _acquia_purge_queue_add() got removed, in favor of a direct implementation in acquia_purge_purge_path() and acquia_purge_purge_paths(). Also VERY significant is that when acquia_purge_purge_paths() is used (which happens exclusively), it'll use ::createItemMultiple() on the queue backend and thus save tonnes of queries.

commit 6ef301ad024e710aac3f07e2c5c46eb59d07ed33
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 19 20:59:49 2015 +0100

    _acquia_purge_ajaxprocessor_*: reorganized all code related to the AJAX processor and added _acquia_purge_ajaxprocessor_trigger() to more easily register the current user for UI purging and to encapsulate the complexity more.

commit e6b5a1f2498e05f89c19776b1dd6853dc4533d14
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 19 19:48:01 2015 +0100

    _acquia_purge_queue_add() start making use of the more efficient EfficientQueue backend.

commit 7236f5e1d780dbde087243a9e55cfac11b5c704d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Mar 19 16:46:20 2015 +0100

    Introducing EfficientQueueInterface and EfficientQueue, basically code backported from my work on Purge D8. Though the module now uses EfficientQueue, it doesn't call any of its much more efficient methods yet.

commit 456eba26a1bc96f0f0384c6f26471f7491ee660c
Author: davereid <davereid@53892.no-reply.drupal.org>
Date:   Wed Mar 18 15:40:07 2015 +0100

    Issue #2451311 by Dave Reid: Errors running updates when module is disabled

commit 8ff520621bc09b752361596707b8e0cf286b2235
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 18 13:27:33 2015 +0100

    Iterating upon Elijah Lynn's work by fixing void returns and doing more cleanups I could find in the other files.

commit 13ca2b6d8ca85dadee72eab72c60e5e78a9fbaa2
Author: ElijahLynn <ElijahLynn@353190.no-reply.drupal.org>
Date:   Wed Mar 18 13:19:43 2015 +0100

    Issue #2387433 by Elijah Lynn: Cleanup docblocks to better meet standards

commit 2035a591b82284a2395bf035b7dca02788d35d2b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 18 13:04:17 2015 +0100

    Introducing $conf['acquia_purge_passivemode'] = TRUE; for development/local environments to disable expire integration.

commit a093c82071d59f4b96aac153a7fc864dc78b7d4c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 18 12:15:17 2015 +0100

    Issue #2352417 by Charles Belov, nielsvm: Make manual purge blocks sound less threatening

commit f679f851bf4512499e4a426d4bd4a7a34362bd4d
Author: dooug <dooug@417693.no-reply.drupal.org>
Date:   Wed Mar 18 11:48:45 2015 +0100

    Issue #2404983 by dooug, Elijah Lynn: Grammatical fixes for DOMAINS.txt

commit e1beb7361644bee355ebef4ba041cc06d3020e56
Author: heathdutton <heathdutton@2403690.no-reply.drupal.org>
Date:   Wed Mar 18 11:29:14 2015 +0100

    Issue #2442211 by heathdutton: Notice: Use of undefined constant BLOCK_VISIBILITY_NOTLISTED

commit 9ffc80d2d8c95cbcf152599cfab0ba5465ea295d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 18 11:21:42 2015 +0100

    Prevent division-by-zero errors.

commit 620d4b3fed35f6ec14102e43621e72a5ad24e90a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Mar 18 11:12:30 2015 +0100

    Introducing allriskmode, only for real rare use cases that are presumably better off not using acquia_purge and/or waiting for D8.

commit 368488ba4cd1a3daa99fdb8d9a877bf5a8089200
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Mar 3 10:55:34 2015 +0100

    z172437, experimental support for sites.php records in the form of 'site.com.subpath' for as long as the domains contain correctly TLDs. It doesn't just change Acquia Purge's behavior as path records are still skipped, put this in settings.php:
    
    $conf['acquia_purge_sphpskippath'] = FALSE;

commit 06393c925e8f0a6acd22b2e26c54078f5acd9acc
Author: git <git@887104.no-reply.drupal.org>
Date:   Tue Nov 25 17:06:33 2014 +0100

    Issue #2379227 by mattkoltermann: Conflict with Drupal 7.33+ producing "Illegal string offset" warnings on overview page

commit eb093e17ba386e02d8fc742d5c2d7c86a1ef8b1e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 8 10:34:46 2014 +0200

    Issue #2334285 by nielsvm | anavarre: Fixed Update #7103 failed with a PDO exception.

commit c9824a1b4cf9915ac005e228659b0771e98e0cb5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Sep 5 16:21:11 2014 +0200

    WHOA, just 3 coder (minor mode) fixes, that's the best result so far.

commit 7498199b3962c06fdb8259f9e425325bd4840182
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Sep 5 16:08:13 2014 +0200

    Memcached is ENABLED now by default, but only if the site's using it already. Tested this on Acquia Cloud and it works great.

commit b9fe51ff9bd646f4fcb94779ef4eebfe5f93c51e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Sep 5 15:08:15 2014 +0200

    Took me muchos time debugging this with all the async Jquery stuff, but now the AJAX based processor removes itself (detaching didn't work) when its done, so AJAX requests coming after (e.g. manual form submit) won't see it open up again unexpectedly.

commit 5e010afbf1ec28f2f059060bf79c84e587d75e91
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 3 17:35:46 2014 +0200

    manual purge form often caused empty purging progressbars, hopefully this mitigates that.

commit 3ffcc39978151c62cd15896688845a652d9bf964
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 3 17:30:41 2014 +0200

    Fixed two regressions I caused by moving the autocomplete callback.

commit 95ff8523f339e9dc10cb5034304b9986ac25408a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 3 17:01:49 2014 +0200

    theme_acquia_purge_status_report() was using core's constants which aren't always available, yet ours are.

commit da30d1590d883209a9e9b4fb9b349043366524db
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Sep 3 16:29:38 2014 +0200

    After testing on AH it turned out that _acquia_purge_queue_stats()['key'] gives syntax errors on older versions, so introduced _acquia_purge_queue_history() and gave _acquia_purge_queue_stats($key) parameter so we can retrieve stat keys more easily.

commit e00a81a8686e31fa477fc5a7dbc47ae290cbf584
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 2 16:16:42 2014 +0200

    Here at Acquia we have seen cases where 200's were still causing Acquia Purge to loop, so to be sure that possibility is smaller, we're now also seeing 200's as success instead of relying on curl's judgment.

commit 44dc62a254270cc516df0ead24dd3d64267b57ad
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 2 16:15:54 2014 +0200

    We're now setting CURLOPT_RETURNTRANSFER, which should really keep curl quiet this time.

commit 515c705328241063c47ff1bc7c4dddd5db10b2b4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 2 13:15:39 2014 +0200

    2312117: allow site administrator to differentiate the base_path being purged.

commit ad70d92be287abc50da7c10a280de9b24eced486
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 2 12:52:53 2014 +0200

    2331145: note for non-Acquia Cloud users.

commit 508ae7d85506af60d03f3f6314dee85c7837d9c4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 2 12:05:43 2014 +0200

    2189819, 2239043: Improved rules support, with the following consequences:
    
    * URLs and tokens are now equally supported, although domains in URLs get lost and remapped to Acquia Purge's domain configuration.
    * 'Purge a path from Varnish on Acquia Cloud' got obsoleted.
    * "Clear URL(s) from the page cache" gets renamed into 'Clear pages on Acquia Cloud'
    * 'Clear pages on Acquia Cloud' is now the only rule action to be used.

commit 0d09a1f777b089991f2531c43d3099734b3c9e31
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Sep 2 11:34:10 2014 +0200

    Added _acquia_purge_input_validate_msgs(), allowing us to selectively retrieve validation messages as have them cached (and not go through t() over and over).

commit e6ea7e51881c9156d228354612eac07ad76a9cba
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 1 15:32:57 2014 +0200

    Issue #2271983 by janusman: Fixed _acquia_purge_get_domains() incorrectly strips / from the middle of xyz.com/[languageprefix].

commit 169ac58d7bceeb87a562847e62596b0ef952a0a4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Sep 1 14:54:02 2014 +0200

    Issue #2330805 by 8thom: Added support for Authcache.

commit bc534f5fcde57d1a52b6853c74259cfd82e98ebc
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Aug 30 13:33:43 2014 +0200

    Issue #2330109 by Charles Belov: Fixed Typo in notice that website content is being updated.

commit dffbecf45fca31b17ace5e7b0d58dfb553c6a2d8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Aug 30 03:25:44 2014 +0200

    _acquia_purge_queue_lock() is the newest member of the family, which is now the uniform way of getting a lock to purge. The greatest thing is that it maintains the 'locked' state key which we can use in 'drush apd' and the status reports. So now, when someone's purging STATUS=Purging, else STATUS=Items queued or STATUS=Idle.

commit 55b8ba063a632151f9eeda1ed24d06b9690e7954
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Aug 30 02:42:56 2014 +0200

    function order

commit cc3fcbf335674ec8f8a673f2d9f8e8d50ad1a7c5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Aug 30 02:38:56 2014 +0200

    REFACTOR: capacity calculations now being respected.
    - drush ap-process now uses the Batch API and subprocesses for endless processing.
    - _acquia_purge_queue_pop() no longer endlessly continues in while loops, it stops when it maxed out of the items it was allowed to pop.
    - _acquia_purge_get_capacity() now allows subtraction by passing numbers in, so counting down gets easier.
    - FAQ.txt updated.

commit 59b0262200d94fa65ba8e63d472a44ebfa0e2008
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Sat Aug 30 00:34:56 2014 +0200

    The queue diagnostic test now reflects the actual number of items in the queue.

commit 6eafd9f883fe3d68cb06eb248ce8c5c75d78f0de
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 22:44:09 2014 +0200

    acquia_purge_purge_node() got deprecated in favor of expire_execute_expiration().

commit 286b6f634a13e8dbced474059729ecf6205c64f3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 22:33:51 2014 +0200

    NEW hook_acquia_purge_variations_alter() added, before anyone would file issues for it.
    
    function hook_acquia_purge_variations_alter($path, &$variations) {
      if (in_array($path, array('<front>', '', '/'))) {
        $variations[] = 'rss.xml';
      }
      if ($path === 'news') {
        $variations[] = 'news/feed';
      }
    }
    
    $ drush ap-purge 'news <front>'
    Purged: http://mysite.com/news
    Purged: http://mysite.com/news/
    Purged: http://mysite.com/news/feed
    Purged: http://mysite.com/
    Purged: http://mysite.com/node
    Purged: http://mysite.com/node/
    Purged: http://mysite.com/rss.xml

commit a38f5dad9aca7634400aebd2cb6b1ca4213afb1c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 20:25:17 2014 +0200

    Issue #2290791: Acquia Purge now needs expire.module 2.0-rc2 at minimum but 2.0-rc3 is recommended as of this writing, this is now checked at install time. With this decision the support for expire.module 7.x-1.x is DROPPED and the integration with that version will no longer work.

commit d1989f8c0e6562387beaa229b9786990110d85ee
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 19:38:32 2014 +0200

    More goodness with _acquia_purge_queue_deduplicate(), which is now the uniformed way of duplicate prevention, both with queuing as after the fact when processing. When acquia_purge_memcache=TRUE it will also use the state storage and THUS memorize all queued paths (!) since the last time the queue was emptied, isn't that awesome?

commit 85bf1623ceda05b85bfa22dd04ed9747f327ea10
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 17:04:32 2014 +0200

    Reusing the paths blacklist with _acquia_purge_ui_path_blacklisted(), now the on-screen trigger is called _acquia_purge_ui_trigger_purge().

commit 4d863ff9c2d6a80fa4d342d32286ffea9034cf5a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 15:11:21 2014 +0200

    Acquia #137455: Trashed our hook_boot() implementation that forced Expire's 'expire_status', 'expire_debug' and 'expire_include_base_url' variables into the right behavior, which apparently didn't always work. Instead of forcing these settings, I'm just setting them in hook_install() and a new hook_update_N() which makes Acquia Purge a better module citizen. However, as these settings make a night-and-day difference, I added a diagnostic test for the Expire module that checks and blocks anything if any of them are wrong, which is simply better and clearer.

commit f330aeeec9378c3934d8d784cb543ccf2e8a65d2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 15:06:40 2014 +0200

    Issue #2239045 by Charles Belov: Fixed Acquia Purge tells me to disable unavailable Expires setting.

commit 0f4ce11f6e525b2b5550925fb78f6f81fa2f8522
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 14:29:06 2014 +0200

    Not only errors, but the full diagnostic report is now shown on Expire's 'Module status' tab at admin/config/system/expire, and we now ship with our own simpler version of theme_status_report().

commit 25aa3f0ca679985677219cc85aaa90e4e037d4c0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 11:13:28 2014 +0200

    Badly tested last commit, fixed.

commit d4cee621cf7ae7769551f075f424763ba40eb1b2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 11:10:21 2014 +0200

    Moved alias lookup to _acquia_purge_input_path_variations() and added internal path lookup to that as well, code is cleaner and behavior uniform now.

commit 7c0cd3dfa4bcd19a589f52f5b3d22a4cc2ef7317
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 01:06:46 2014 +0200

    Manual purge form block correctly renamed now.

commit 3575f1e1b304b57c2627f4b5c14c01c4ca22da06
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 00:56:55 2014 +0200

    2305309: exciting, refactored the manual purge form code to now provide a 'full', 'paths' and 'page' variation of the form whilst sharing code. Acquia Purge now ships with the administrative blocks "Manual purge form (paths)" and "Manual purge form (paths)" that allow quick and easy purging of pages, users will need the 'purge on-screen' permission (which is already required for the on-screen purging).

commit a3304f96fd8eb8082c42d5f4159669b848e59a67
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Aug 29 00:52:09 2014 +0200

    I renamed the 'purge notification' permission into 'purge on-screen' to better accommodate its renewed usecase, I included acquia_purge_update_7103() to rewrite the permission in the DB and to add it to the admin role automagically.

commit 934de59687b9744cbeafc8f4f1108774072bfc1f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 16:55:34 2014 +0200

    Manual purge form: fixed bug and notifies when in cron mode.

commit 8d92fb6b3dc49f60b5f75301f40a06fc5e6b84ad
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 16:47:01 2014 +0200

    Issue #2302989 by Elijah Lynn: Added Better UI/UX when accessing Manual Purge tab when requirements are not met.

commit 3fa1c1ffffb000bec6d0679c15c21fa4494a872b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 15:19:15 2014 +0200

    2322017: a new and shiny feature: 'variations', which will copies of paths with trailing slashes and ?page parameters to manual purging functionality such as 'drush ap-purge' and the manual purge form. The feature is enabled by default but administrators can disable it with "$conf['acquia_purge_variations'] = FALSE;".

commit 388e8ce8714ed35c732eec025ad24ff1f785664a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 13:07:49 2014 +0200

    drush ap-purge now supports multiple paths as argument while not working any different for single paths:
    
    $ drush ap-purge 'news contact node/1'
    Purged: http://mysite.com/news
    Purged: http://mysite.com/contact
    Purged: http://mysite.com/node/1

commit dca17d5418365520e3a8ddbd755d757374d57bc9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 11:58:20 2014 +0200

    2295741: Specifically trim ending slashes on paths originating from expire but don't do that rtrimming in our core API (drush ap-purge, rule action).

commit 21af13b300c2273bf8730e38c4dd159a6accc5cb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 11:55:10 2014 +0200

    The rule action was still doing input cleaning on its own, that's uniform too now.

commit f0adfcf1ef426282b03de93c1a2e3fae530e642a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 11:03:23 2014 +0200

    2243755: uniformized input validation AND sanitization, so paths now get validated in the same way (and yes howrad, *'s are spotted) and get sanitized before they end up in the queue.

commit eafdc50435f8e90bb837b2c6c8b7fb3c245eceb0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Aug 28 09:41:27 2014 +0200

    Issue #2311341 by Elijah Lynn: Fixed Cleanup global JS variables.

commit 97e7886ab1995bc49d300463405e2c1ba5a4938c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 18:42:35 2014 +0200

    Now Drush APD reports the processing capacity and the slowdown factor, this is going to be very helpful for people.
    
    $ drush apd
     [ok]      HOSTING ENVIRONMENT              acquia cloud (...)
     [ok]      LOAD BALANCERS                   ..., ...
     [ok]      MODULE CONFLICTS                 none
     [ok]      PURGED DOMAINS                   subsite.mysite.com
     [ok]      LOGGING VERBOSITY                successes and failures
     [ok]      CACHE PAGES FOR ANONYMOUS USERS  enabled
     [ok]      EXPIRATION OF CACHED PAGES       24 hours
     [ok]      PROCESSING MODE                  client-side (js)
     [ok]      PROCESSING CAPACITY              20 items per run, slowdown factor=2
     [ok]      PURGED SCHEMES                   http
     [ok]      QUEUE VOLUME                     0 (warning: 1500, shutdown: 5000)
     [info]    STATE DATA LOCATION              memcache
     [info]    STATUS                           inactive

commit 5df28143d181b3e98668c93dd46ab836c4617468
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 18:26:48 2014 +0200

    Refactored the capacity calculation out of _acquia_purge_queue_pop() and into _acquia_purge_get_capacity(), _acquia_purge_get_capacity_factor() and _acquia_purge_get_capacity_maxrequests().

commit 641a6cd2c0891df9d5850165dba5d1d52096d1af
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 15:46:46 2014 +0200

    Setting acquia_purge_memcache=TRUE is now a viable alternative to the public://acquia_purge_state.raw file based state storage that the module defaults to. Once enabled it will store the same bits no longer on disk but in a special memcache bin that doesn't get wiped when calling 'drush cc all'.

commit 91dbfafa8d6a1467f8a056fdd829855a9da6f292
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 14:21:48 2014 +0200

    Now with log deduping in, we can let the AJAX callback write diagnostic errors to the log too. Cron already does, hook_expire_cache() already does.

commit 4c09f250a982b61068b8f2570c167df142617734
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 13:09:57 2014 +0200

    In acquia_purge_expire_cache() we're now always logging issues, but _acquia_purge_get_diagnosis_logged() duplicates for us so it will be better in the end. Also coloring severe issues as red to the end user, as it should be.

commit f06755fff667db0c3f2d7f0dfb8b7a9512142b15
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 13:02:05 2014 +0200

    Now that _acquia_purge_get() got a $get_default parameter, I could reduce the number of defaults more by letting _acquia_purge_queue_clear() make use of it.

commit 1993c8b1d25d0f2234c9f9fccc16eed1d6dfd57d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 12:53:49 2014 +0200

    _acquia_purge_get_diagnosis_logged() now - by default - deduplicates diagnostic messages it logs during one queue processing cycle, which should help not to flood the logs.

commit 3b915bd0be6e87b6accab7675537110a42a61476
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 12:25:36 2014 +0200

    drush apd: small change for formatting when running into errors with other commands, e.g. ap-purge.

commit e144837d99084b00532fd108cf62c71501117f6e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 12:13:27 2014 +0200

    Oops, accidentally enabled acquia_purge_https, put back to FALSE.

commit 6fa085178a472e9cf35425d480ee317f870351fe
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 12:04:31 2014 +0200

    Added _acquia_purge_get(), which solves the problem of free floating state and variable defaults for things Acquia Purge relies on. Now all defaults are in one place (and README.txt) and there's less room for trouble.

commit 139d2c3ba3709de148f9f3d5e3cc9b20328ffd4c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 11:21:09 2014 +0200

    Drush ap-diagnostics is really fancy now, but above all, very readable (+coloring):
    
    $ drush apd
     [ok]      HOSTING ENVIRONMENT              acquia cloud (...)
     [ok]      LOAD BALANCERS                   10.0.0.1, 10.0.0.2
     [ok]      MODULE CONFLICTS                 none
     [ok]      PURGED DOMAINS                   subsite.mysite.com
     [ok]      LOGGING VERBOSITY                successes and failures
     [ok]      CACHE PAGES FOR ANONYMOUS USERS  enabled
     [ok]      EXPIRATION OF CACHED PAGES       24 hours
     [ok]      PROCESSING MODE                  client-side (js)
     [ok]      PURGED SCHEMES                   http
     [ok]      QUEUE VOLUME                     0 (warning: 1500, shutdown: 5000)
     [info]    STATUS                           inactive

commit b68e53b584adaa0e7948511e09997ddb61d30879
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 10:46:43 2014 +0200

    _acquia_purge_get_protocol_schemes() was leading code into 'Division by zero' errors when both http and https were disabled, worked around that now.

commit e73c8fd7988d452cdc2e2cb9fc05927c73b5ef9d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 10:16:41 2014 +0200

    Drush ap-diagnostics received a much needed visual cleanup now that it becomes more and more useful.

commit 10601308e1428126b4b9fd726425a922468c2d63
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 09:28:14 2014 +0200

    Administrators can now suppress SUCCESS logging by putting $conf['acquia_purge_log_success'] = FALSE; in settings.php.

commit 4e1d2c7b63f77d0935e59ab12a16fbf2399a0fdc
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Aug 27 09:11:39 2014 +0200

    Reimplemented the AJAX callback to not even start popping items if diagnostics told us about a blocking error already, as that would increase the bad counter endlessly and still flood the logs. Also did some visual code cleanup.

commit 557eb8574987882ea905a0e2e74f4315fcaf63b2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 16:20:37 2014 +0200

    Improved diagnostic reporting and self-tests, as the system now automatically shuts down when too many errors were reported OR when the queue is dangerously high. It now also reports the queue volume, the warning/shutdown thresholds and whether Acquia Purge is processing through cron/UI. It also emits a warning when cron ran longer than one hour ago.

commit 394952651639bb02f9e05631ba891ee99492cb8c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 16:04:12 2014 +0200

    api doc

commit 468961b3e13f99262444cd5c44852edece653f70
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 16:00:34 2014 +0200

    state usage refactor: we now maintain very accurate 'good' and 'bad' counters, which is more reliable as the voodoo from before. The reason? The state system stores everything in just one place which makes it cheaper for us to use without indirectly causing variable cache wipes as we did before #WIN.

commit 0ec54b1d92b480fe134c04431ea0b21bcad91a45
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 13:14:07 2014 +0200

    state usage refactor: state resets now only happen through _acquia_purge_queue_clear(TRUE), which is cleaner, easier to maintain and above all, safer.

commit cc66419d080da1bbf3c94c0f56ba9c0b98b1d145
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 13:05:46 2014 +0200

    state usage refactor: 'qcount' / 'queue_count' -> 'qtotal'.

commit bede248517dbebbe4b37f64ca0d27fe6122f72e4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 13:00:54 2014 +0200

    state usage refactor: only check+write 'uiusers' when cron is disabled (new name for 'queue_owners').

commit 870fe71751e22b510ed257f7adba6556c274a730
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 12:39:08 2014 +0200

    REwrote _acquia_purge_state_initialize() and _acquia_purge_state_store_commit() to now rely on disk instead of the Cache API, as the latter proved to be too unreliable. The queue state was easy to get lost and a single cron or 'drush cc' could just corrupt the things we knew about the queue entirely.

commit 552ede13fac98ca304d52bbebcdfb5bda4d30035
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 26 09:16:20 2014 +0200

    9093253: with thanks to ryandekker, introducing hook_acquia_purge_domains_alter() to allow certain edge cases to reduce the list of domain names being purged dynamically.

commit c3f891450f547778c3b92758fe4fd5836acc11bb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 23:34:29 2014 +0200

    2306935: by dstol, use module_load_include() instead of D6-style require_once.

commit a2c61cacb2c4822f707c2d730525d7a4e5ce6794
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 23:00:12 2014 +0200

    2100327: SSL support finally landed, no more hacks required. The feature gets enabled by adding "$conf['acquia_purge_https'] = TRUE;" to settings.php and disabling http:// happens by also adding "$conf['acquia_purge_http'] = FALSE;". In addition to just the support for it, I also added several safety valves to the diagnostic tests as just enabling it with many domains might absolutely crash sites, so it should help prevent casualties.

commit fdcaafb4c8094eaa4605c771b37cdd441de36140
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 21:52:37 2014 +0200

    README: updated the config table to also mention default settings.

commit 013004265ee93705eaecec69e5359a0ab926a217
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 20:31:25 2014 +0200

    2228945: implemented 'cold deduplication', which means that items are quickly discarded when *during one processing round* that path was already purged. This will *NOT* prevent duplicates from ending up in the queue - as creation queries would be way to expensive and too much in the way - but it will specifically improve and speed up processing duplicates, especially running from cron or drush appr.

commit b61c751bbd48c18e8a65426e775a495be237d210
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 19:59:35 2014 +0200

    2205015: by introducing _acquia_purge_state_set(), _acquia_purge_state_get(), _acquia_purge_state_initialize() and _acquia_purge_state_store_commit() I circumvented the need of storing state data to the variable system, which was dangerous as outlined in https://www.drupal.org/node/2205015. Now only one cache_set() will happen per page request that called _acquia_purge_state_set(), so its limited to the least possible amount.

commit 5e33fbcb2adc0073db94fff243b358c7a0c90d8a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 19:05:05 2014 +0200

    Finally a good reason to use one of those fancy ASCII art tables: documented configuration options.

commit abb22415662994e438ae6ccfda7ce7008f719fb8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Aug 25 17:44:32 2014 +0200

    2194387, 2228949: by popular demand, it is now possible to *purge from cron and without client-side UI* by setting "$conf['acquia_purge_cron'] = TRUE;" in settings.php.

commit 99989f5c0ad22e3af3113a56eb80c536764b068d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 16:00:40 2014 +0100

    The last pareview fixes.

commit 3a8cb0abd740f1a702cd7c4d160e09f30d670cd4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 15:58:37 2014 +0100

    Fixes to make code (minor mode) happy.

commit 242cb1161ffbf63a7dcb92b40706279f98999be4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 15:49:33 2014 +0100

    More fixes to make pareview happy.

commit 4b7a471175cf0962e054179f6f3c2807a19ffb4c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 15:48:00 2014 +0100

    Fixes to make pareview happy.

commit 4c2548ec17edf2e610d99ff51b57313938f29f7d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 15:32:57 2014 +0100

    Documented an internal reference.

commit 46ba9c9538b85291d5f020eb0396487a0c6c4e77
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 15:01:41 2014 +0100

    Don't allow ELB domain names to slip through.

commit e671d4549804c73ceacca450e5e9deb19ac36ae6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 14:25:17 2014 +0100

    Annotation

commit fe2690e297c8b1868d71a962479f8e257bd165af
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 13:59:44 2014 +0100

    2140037: to accommodate anavarre's feedback better I've put the example paths in a two-column table making everything more visual and less cluttered, also shortens the page.

commit b55962a928a5e7223bba26eb682b6e3a32fab068
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 13:31:59 2014 +0100

    2140037: added example paths including the frontpage based on anavarre's feedback.

commit 467724993fdf3e7973f18a147dd65389c2d22818
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 12:48:14 2014 +0100

    Recommend expire 7.x-1.x users to consider the 2.x-beta-2 through the UI when they need more granular configuration.

commit fe5965389f6f4e3ccfc9ca5122875e2c6411410c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Feb 19 12:33:16 2014 +0100

    Expire 7.x-2.x moved its settings into its own section which breaks our manual purge tab and overall navigation experience. By setting up fake redirecting tabs between 'a./c./development/performance' and 'a./c./system/expire' we restore the experience without breaking anything.

commit 57c9cd2716057e64e74a85585599808c7bdad272
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 17:21:54 2014 +0100

    2179265: the manual purge form now skips validation for the "remove last item" button, thanks to #limit_validation_errors!

commit efc165229afbd03a999f9a4723e872462974b03f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 17:09:24 2014 +0100

    2140035: renamed the "manually purge" form to "manual purge".

commit 9babfbc0344da5614227580838831dd9ef53ef04
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 17:09:13 2014 +0100

    FAQ

commit 5c630f9e8505acf7f030c355a45179a2412e94fb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 16:07:31 2014 +0100

    Don't show the AJAX processor on admin/config/system/expire

commit 0cd0a18f1ed19cc7b19730a89c3d936260e6e23c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 15:55:43 2014 +0100

    Drush ap-process and ap-purge now check for critical error states and refuse to work if something is found.

commit 98f8e3f36c34f6211517679099806892c637e162
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 15:38:29 2014 +0100

    Expire 2.x's status form now also reports Acquia Purge's error issues.

commit 975abf089242b6af9e25708ebf4f31154dc67757
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 15:01:40 2014 +0100

    Continued the adoption of _acquia_purge_are_we_allowed_to_purge() and made all "to purge or not to purge"-checks depend on it, on the outside this will make no difference.

commit db7f5fa53b5397c5bb8661f56eefc4a6612ed4e7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jan 29 14:40:48 2014 +0100

    2140033: by introducing _acquia_purge_are_we_allowed_to_purge it is now possible to hide the manual purge form under ERROR condition states. This helper will also help cleanup other pieces of code.

commit 60886817a7299b8fca07da329dde724509a7570d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 22 14:21:50 2013 +0100

    Enable Expire 7.x-2.x's most important expiration rules by default.

commit 90e5a69056f699f5e7bcfa32af5606fd4ee61159
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 22 13:18:12 2013 +0100

    Continued Expire 7.x-2.x support by dynamically moving the "MANUALLY PURGE" form when necessary.

commit 7f560291f98127c0c3fed47de57d90eb31eb649e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 22 12:47:05 2013 +0100

    We're now hard disabling and removing the 'Include base URL in expires' setting out of Expire 7.x-1.x.

commit 8b355d5cb6878269d0286613405dde8ddc907f64
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 22 12:20:47 2013 +0100

    theme_acquia_purge_status_widget: simplified the status widget drastically and made it more general use now.

commit 9281e9c19296e5634bb8972037d7918b1050fb58
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 22 11:31:50 2013 +0100

    Added experimental support for Expire 7.x-2.x, still, you're warned.

commit d9edd40bff34761644b50ba1918d60f9dd13bd60
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Nov 20 17:36:42 2013 +0100

    2140037: support non-clean url setups on the autocomplete and properly inject the values.

commit 4fa703ddf92b032246678deb65dea6171d3c05cf
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Nov 20 17:23:39 2013 +0100

    2140037: exclude admin/ on results, those don't usually need purging.

commit dd2e82f321803a09442e36eca79b9088ee6956d8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Nov 20 17:20:16 2013 +0100

    2140037: added autocomplete functionality looking up from aliases, menu router and node id's.

commit ed3855c54ea0c7eb298e18260a5c941852b41d8e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Nov 20 12:41:56 2013 +0100

    2049235: fixed the occurence of Acquia Purge's upload widget showing up inside of Media's media browser popup.

commit fbf72482121fc90dbe4469be0d5c32128a433404
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 15:23:15 2013 +0100

    Pareview fixes

commit 7ce2b55476c878e3390859403cc36975eacaf10f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 15:15:54 2013 +0100

    [FEATURE] Manual purge feature for emergency administration needs.

commit fa55e61ed9596f15cc4e2ae01dd0d5f915e3d249
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 15:15:26 2013 +0100

    ROADMAP

commit 520d97966d5f7f2dec29eb5ee146d62097fe5200
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 12:56:28 2013 +0100

    Heavy users (with many editors) might have noticed that whenever two users triggered a purge concurently one of them saw the progressbar disappear preliminary, purges always executed but it was confusing. As of this change multiple users can see the progressbar and will simply "fight who's faster", as just one queue is processed and protected by the lock API. It is however, a good simplification as purges are no longer SESSIONID but user name(s) bound.

commit f4fe788dbaf73f65c3a865491209e9008e394b35
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 12:38:24 2013 +0100

    FAQ: added a question on anonymously triggering of purges.

commit 06c14cdb95d0355c712ef95489fa159f2bd8f1b8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 11:57:59 2013 +0100

    Removed the 'Report cache purges'-setting which became highly redundant with the 'Purge notification'. All you now need to do to visually enable the progressbar for your editors is to assign them this permission. This simplified the code and is more in line with my aim for zero configuration.

commit 34d58e43e5ac4e690078e89e3582482ab91e6c4f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 11:00:54 2013 +0100

    FAQ.txt, added another thing people might notice.

commit d67bef1756c635a75367677c4200fdbe38b7aec7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Nov 15 10:52:01 2013 +0100

    Typos

commit a1d777cc76626895d1e1aab56c24c019c944282a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Nov 13 12:59:00 2013 +0100

    Rewrote README.txt and brought it in line with the site, small fix in FAQ.txt.

commit 30d298c11aaaea53e356e47c3749bc9d9d4cb1e9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 12 21:02:47 2013 +0100

    Added a FAQ and a INSTALL file, and updated the README file.

commit 8076f2f2f519cc752a6da38810febda1e9d5ec05
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 12 20:41:22 2013 +0100

    Big documentation revamp and clarified many things.

commit 8b60941d1d09f7a00ba1c870cb389ab3e574ff2d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 12 20:26:38 2013 +0100

    Added drush ap-list (apl) to easily and quickly see what is in the queue at the moment.

commit c7d1d013bd73896c1a2eccc4f8e9852cc4e72151
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 12 18:11:35 2013 +0100

    Added drush ap-domains (apdo) to the commands toolchain to quickly list the domains getting purged, don't forget passing --uri!

commit bfec29120b8245da8cd1c4405ec80027bfcbded4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 12 16:06:16 2013 +0100

    Don't rely on drupal.org for pointing to MULTISITE.txt, d.o. 2113577.

commit 3450ca538e2161c199ecce3f6e2222b295b7b86e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Nov 12 14:56:57 2013 +0100

    Improved expire path stripping and domain detection for sites with base_path's other than /, now things should go absolutely smooth for these sites too. D.o. 2133001

commit 4396f502a60bea4a8202660e82569d404a35efd0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Oct 11 13:28:23 2013 +0200

    Diagnostics: liberated the policy on domains (since queue api rework) to allow 6 domains as healthy, flag between 6 and 8 as warning and self-shutdown above 8. Still purging 4 or more domains is a clear sign the site isn't architected very well but we can't block purging, it will be slower but not stressing the database anymore.

commit 629aa98fcefc7df4123e3a5deecd6c696d7a2a7d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Oct 11 13:23:05 2013 +0200

    Diagnostics: make the existence of varnish module a warning, not a blocker.

commit 33bc50c00c57ee05dcec577b91ee9e834b31e216
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Oct 11 13:10:31 2013 +0200

    Changed the page_cache_age diagnostic to ONLY block the module when its on 0, anything till 6 hours will now trigger a rewritten warning with links.

commit cb0d7eac44337b1c2f50ee38775d7c6178d77f99
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Oct 11 13:09:05 2013 +0200

    Ensuring that the "purge notification" permission is also nicely respected during failures to not irritate anyone that normally doesn't get purging progressbars anyway.

commit 880007c89d436f10ebc320a34bf09a3d9c5a7cd5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Oct 11 12:57:32 2013 +0200

    Print the HTML version of a diagnostic message in the progressbar.

commit ab248a3589281e95f453a859dddbe1dd2a36c759
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Oct 11 12:44:42 2013 +0200

    Diagnostics: check for critical conditions *BEFORE* starting to purge, preventing the situation where purging stalls and fills up the logs (that can theoretically still happen though). By the use of a yellow warning color it will still be very "in the face" but its something we expect site developers to prevent from happening once implementing the module.

commit 2cf61dbf9d89c9064321a3dfdd64e146d7a6ad42
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 15:19:47 2013 +0200

    Diagnostics: domains: detect Drush'es default domain and raise an error.

commit c874a077e1d4b39606d2f257022abc5a72a5fa92
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 14:40:39 2013 +0200

    Pareview fixes.

commit 7019eceb16b1d86569b1dc1d5bd8aef0f9b5d6a0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 14:37:12 2013 +0200

    The AJAX UI will now directly report ACQUIA_PURGE_SEVLEVEL_ERROR issues found by the diagnostics system, making the problems we're detecting highly visible and increasing in urgency to be fixed.

commit 2108c14e891b407b71b81348500409a80e931e73
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 14:15:25 2013 +0200

    Purge processing (_acquia_purge_queue_processpurge()) is now directly tied to the diagnostics system, which means that every ACQUIA_PURGE_SEVLEVEL_ERROR found will now cause purging to continue and the logs to fill up. Not only "not on acquia cloud" but also too many domains, missing balancers, purge, varnish, boost, missing page cache and super short page cache max age will cause the user to be alerted.

commit 7d1655c0e76c48297ebb7b68337323c7c1fac282
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 14:00:29 2013 +0200

    Diagnostics: domains: 4 or 5 domains get you a warning, 6 or more will cease the purging.

commit 173c275fc0e2368184c3e6b30c95531a648d2352
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 13:48:36 2013 +0200

    Diagnostics: introduced 4 new constants that follow the same value order as REQUIREMENT_INFO/OK/WARNING, difference being that because we declare them, they'll be available to us all the time. So no longer need to include install.inc everywhere.

commit f857dba2223b2000ceea5d363a4735b236ad4430
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 13:26:59 2013 +0200

    Diagnosis: simplified the implementation of _acquia_purge_get_diagnosis() big time and added helper _acquia_purge_get_diagnosis_logged() that will cleanly log items to Drupal's logs.

commit c694f4b95435bdb569cbf71656a771a8748e0f2b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 13:21:35 2013 +0200

    Drush ap-diagnose: removed the line trimming, not needed anymore as the input is right now.

commit a0680876ccf85f97170c28bb204fdab02546e5a9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 13:20:38 2013 +0200

    Diagnostics: rewrote many feedback messages to be non-muliline and to be more descriptive to users both on Drush, Status report and in the logs.

commit e4b5991e6cb3bb4534d8b2222f49fb0329653930
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 11:29:16 2013 +0200

    Diagnostics: refined the single-load balancer message.

commit c0e9f7b871a2e6679432c459da20144241142134
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 11:09:26 2013 +0200

    Coder fixes.

commit 192d4b11af7800ef1599afe49320f8166bd3da10
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 11:05:51 2013 +0200

    Reimplemented hook_expire_cache() a bit differently to make pareview happy.

commit 57e0e93b5c8104357ec4485ab309b2ea66002bd4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:56:04 2013 +0200

    Pareview fixes.

commit ea09d18eda8ae7aed7abcaa224d90316bc87ce2a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:54:52 2013 +0200

    Pareview cleanups.

commit 808cb65a9e4670fa87a5cbe3bedd9ce653b52579
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:48:50 2013 +0200

    Pareview fixes.

commit 6b65b871c964a784851c90af6f9d3d1ec36fedaf
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:47:53 2013 +0200

    Pareview fixes

commit c3478dcafd8d49ef28c0176b347f83417701556f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:41:48 2013 +0200

    Pareview issues spotted.

commit 0fb66bac30be5f04e06b2c04642bf011e0d04f4e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:35:03 2013 +0200

    Pareview: removed @author tags.

commit d49da51d1e783aa224f3153d9ed45b1fd3589fd8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 10:32:45 2013 +0200

    ROADMAP

commit b75c77dc5e2ff946f532ba0d0fc624cd2505cc09
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 00:54:15 2013 +0200

    ap-diagnosis: improved the line printing.

commit c8ea85dbef235d8aeb5b1f50633fa0bff1642f69
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 00:43:20 2013 +0200

    Drush: added and implemented ap-diagnosis to perform and run the diagnostics via drush.

commit a35b8cd527012491f126e05bdf550681e225fe30
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 00:41:22 2013 +0200

    Improved the status test for CLI usage.

commit 054798a27628b86b88df37b40bc7deed32ff9f0b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 00:40:11 2013 +0200

    Improved _acquia_purge_get_diagnosis() to support output for CLI usage, also improved loading of install.inc.

commit 0198e347938126c5a68b92313c48ca3cffb7aa02
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Oct 8 00:31:57 2013 +0200

    Improved _acquia_purge_get_diagnosis() to also include output suitable for the command line.

commit 41d0256ad9731b3c2274b0aabeaca6bf836dd9b5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 23:49:52 2013 +0200

    Ported acquia_purge_requirements() to use _acquia_purge_get_diagnosis() as the new source for the checks it reports, in good circumstances it will only report the status check (idle/purging) or else report every additional warning or error.

commit 793b7baa1bb2770db6c1a9c100ca375b384f7d8e
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 23:47:07 2013 +0200

    The diagnostic tests reside in acquia_purge.diagnostics.inc and work similar to Drupals hooks, all functions following that scheme will automatically be added to the results. The implemented checks so far are:
     - acquia cloud test.
     - load balancers
     - conflicting modules (and expire setting)
     - domains
     - page cache
     - page cache age
     - queue status

commit c04933cd4f3f9c32f3603e586dc967107cc49910
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 23:43:50 2013 +0200

    Added helper _acquia_purge_get_diagnosis() and with that, I've put I much more manageable and flexible self-test system right into the core of the module. Due the sensitivity of many external factors (domains, settings, etc) it is of high importance that we can report at both detailed and high level. More parts of the module will be ported over to the new diagnostics system.

commit bd225e35c4eaa4211810472a95b6930db626f0c8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 17:14:20 2013 +0200

    Reimplemented acquia_purge_purge_paths() to not round-trip acquia_purge_purge_path().

commit b1efd508550e9b76d3244bff89f374525036a865
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 17:00:52 2013 +0200

    ROADMAP.txt

commit 1954eb617b1c2e796584d206c5223be2a712b91a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 16:58:23 2013 +0200

    2014461: Bettering the UX, hide the DSM/apbox container by default (no more "please wait..") via CSS until JS shows it.

commit 6caa756f94cf2448ee107b4a8d024aa553349e9c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 16:36:14 2013 +0200

    2104641: fix the issue in parallel requesting-mode where the curl resource was deregisterd from the curl_multi resource while it was already killed.

commit 3b5c81533b84d5f4707295c22660ce63762d8b70
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Oct 7 10:09:48 2013 +0200

    Readme in HTML, base checking, more follows later.

commit 4b31fd8cd3f87c64e7e34b27f6383452438f3be0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 20:06:33 2013 +0200

    API-CHANGE: acquia_purge_purge_node(), removed $domains here too.

commit 10d5e4a64f420eb82ee3a07b78e16cf925046b01
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 19:39:05 2013 +0200

    UX improvements in the progress bar widget, wording changes thanks to https://drupal.org/node/2002812#comment-7860191 and speedup of the JS fades and slideup. Gives a slicker and faster experience for day-to-day users.

commit 5d7f0803f866aca1687df7390d401665395a3a2c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 19:23:43 2013 +0200

    Domain detection: forget the acquia-sites.com domain automatically once at least one other domain has been found. This means one domain less - and thus a faster experience - for zeroconf users that have a real domain name configured.

commit 1d0c78ac1c50dedd64b7d24ee6d6b10978e31ec1
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 19:11:06 2013 +0200

    Roadmap.

commit edda59146c93278af5091d03a10e882ec4d2d966
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 18:00:21 2013 +0200

    Updating URL now we're a project.

commit 919d61e4b7e2479e460a8188f2424dedcda3ac80
Merge: 1a7e55b 43d656a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 17:15:26 2013 +0200

    Merge branch '7.x-queue' into 7.x

commit 1a7e55bdd2922dbf0db527a32e6ee647f7cafdd0
Merge: 337b9bf 90b9802
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 17:13:11 2013 +0200

    Merge branch '7.x-1.x-beta2-queuing-elb-support' into 7.x

commit 337b9bf671a71f1d0d92168e0d93e83e923574bb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 17:12:29 2013 +0200

    Dirty blob-commit to bring 7.x exactly in line with 90b9802521126940e042be726afcccfad1991815, to ease merging.

commit 43d656aa24eccc007c20b47e569c1fb72934d44d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 16:22:33 2013 +0200

    ROADMAP cleanup.

commit ce4cd14f8c5beaf1059c4ca957e77789ebb8af7f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 15:53:45 2013 +0200

    2049235: Reimplemented acquia_purge_expire_cache() quite a bit in order to better protect ourselves against the garbage that the expire module generates sometimes. What's changed now is that we warn the user and abort purging in the first place when we are unable to cleanup the given paths.

commit cb172b468a20f312aaa7918f0625815a4999987c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Oct 3 15:09:55 2013 +0200

    Major rewrite of the way we interact with the queue and how HTTP calls are being made, this gives us big performance increases as we now do requests parallel and reduced the amount of queue items and their payload drastically. I always thought Drupal's queue API was designed to scale, which it doesn't really do well.
    
    * Deploying a full queue from (say) DEV->STG will now result in continuing needless purges.
    * Drush 'appr' has been simplified and doesn't have to precalculate its iterations anymore (do-while).
    * All _acquia_purge_queue_* functions no longer take paths and balancers as parameters and treat a single path as a single item in the queue, the multiplication happens during processing itself.
    * With ACQUIA_PURGE_QUEUE_TRESHOLD being gone now resource allocation became much better. Depending upon PHP's max execution time, ACQUIA_PURGE_MAX_REQUESTS, ACQUIA_PURGE_PARALLEL_REQUESTS and ACQUIA_PURGE_REQUEST_TIMEOUT the algorithm now calculates exactly how many requests (thus paths and purges) per step are safe to take.
    * Only 80% of the max execution time is assumed available for AP's needs, to prevent crashes at all cost.
    * The consequence of parallel processing is a huge speedup, purging via Drush will even be faster due the lack of a max execution time. Nice.
    * _acquia_purge_get_protocol_schemes() paves the path for https support, follows later.
    * All low level HTTP processing is now offloaded to _acquia_purge_queue_processpurge_requests().
    * API CHANGE: acquia_purge_purge_path and ..paths NO LONGER takes $domains.

commit a56cfc5f26e8f94e945a13d1e87ba2b7fceec1ae
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 2 17:03:42 2013 +0200

    Drush: removed lock test from 'ap-forget' as unreleased locks on a server being hammered that needs its queue emptied won't speed things up much.

commit c11029d5694c54504e441a0c6b2d58999f747337
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 2 17:00:18 2013 +0200

    Reimplemented _acquia_purge_queue_clear() to let it use deleteQueue(), this saves lives for sites that have overfull and crashing queues. Tested it, approved.

commit 9470f4735cd73854a1937a1e649b674fcaf3f176
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 2 16:46:23 2013 +0200

    In this branch I'll intend to drastically reduce the amount of items in the queue and the per-item payload. In this commit we are dropping the queue-pop check to see if the queued item was intended for this environment or not. The consequence here is that deploying from DEV -> STG with items in the queue will let STG purge items not intended for that environment. Its a small unintended use case with great performance improvements, so be it.

commit 90b9802521126940e042be726afcccfad1991815
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Oct 2 16:37:44 2013 +0200

    Various roadmap items that have been added over the course of time.

commit 7d0b24773ce9c00255cc297af1507d981446c422
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Aug 20 12:22:49 2013 +0200

    Pareview DrupalPractice fixes after kscheirer's review.

commit d089dd26d2e888d98236701a0742cc0c8e83e7eb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 16:37:52 2013 +0200

    [QUEUE-ELB-SUPPORT] last needed pareview fix.

commit 9af1b830e1f744f79cf4b6d3cab3eb6d35b304d7
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 16:36:42 2013 +0200

    [QUEUE-ELB-SUPPORT] Second round of pareview fixes.

commit 67a44ce676e561419d4e4c40af311fb28f789719
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 16:25:29 2013 +0200

    [QUEUE-ELB-SUPPORT] First round of pareview fixes.

commit 6ea84937dd36499979d7a7ffdbcbab37a6a605c9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 15:42:28 2013 +0200

    [QUEU-ELB-SUPPORT] Moved the lock timeout value in one place: ACQUIA_PURGE_QUEUE_LOCK_TIMEOUT.

commit f68c35219036513de24c1c126295b295ac18415c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 15:37:26 2013 +0200

    README.txt

commit 2e14cd796c80ff1bdf2f0a77314ed658f4345b24
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 15:33:38 2013 +0200

    [QUEU-ELB-SUPPORT] Drush support: Implemented ap-forget.

commit d9a8cde1b5813d0569f718bfa1b4cfa71ca111b3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 15:28:24 2013 +0200

    [QUEUE-ELB-SUPPORT] Added _acquia_purge_queue_clear() to abort and totally disregard the queue.

commit bc5ceb7692d87d4f9ec477d5804bdb8e6f7267fd
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 15:18:30 2013 +0200

    [QUEU-ELB-SUPPORT] Drush support: implemented ap-process and moved processing logic to ap-process in ap-purge.

commit f53244777c3a5f23cbe83eee4be36d59b8d4e287
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 15:05:00 2013 +0200

    [QUEU-ELB-SUPPORT] Drush support: Implemented ap-purge.

commit 168075c2edb04cdbd9debb84ecd8a903eede6490
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 14:24:04 2013 +0200

    [QUEU-ELB-SUPPORT] Drush support: Added stubs for our callbacks, working.

commit 3ca97ec65c48b29f3e1b2b5579b82c14caf5296c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 14:18:06 2013 +0200

    [QUEU-ELB-SUPPORT] Initial steps of Drush support with written stubs for ap-purge, ap-forget and ap-process.

commit 76b58880869bb919579c83066a2390ea74a65486
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 17 13:43:29 2013 +0200

    [QUEUE-ELB-SUPPORT] Start tracking the Acquia Environment on which the queue item was scheduled so we can prevent needless purges created on the wrong environment.

commit d72c9cd777ec0bf65c4556f8fadef901fd709189
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 16:42:51 2013 +0200

    [QUEUE-ELB-SUPPORT] Further refinements of the client side error handling, it will continue and stay silent on 200 OK's and gracefully tear down when it hits a 403 - access denied.

commit 18b4200a4c3044de03599e8c1a6362490962ab51
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 16:12:17 2013 +0200

    [QUEUE-ELB-SUPPORT] GUI element change, detail

commit a998c63211c97e68790ab9ae0d46e19d0b5016fe
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 15:37:04 2013 +0200

    [QUEUE-ELB-SUPPORT] Changed progressbar label.

commit 5e2fddc5b012b7b243e1912fe5c056c1bce7e0c6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 15:28:12 2013 +0200

    [QUEUE-ELB-SUPPORT] When Varnish throws a 404 back to us, mark this as a valid purge.

commit 14362a7895aae9e336aa27351901d58d543fd19f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 14:56:06 2013 +0200

    [QUEUE-ELB-SUPPORT] Drastic improvement of the on-screen 'please wait' message.

commit d98745d494aceaa37705d5bbd35deeb40a8004df
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 14:53:15 2013 +0200

    [QUEUE-ELB-SUPPORT] Improved the client-side error handling support by stopping after three attempts to prevent the server from warming up due endless AJAX calls.

commit 2ae779c216e30684753de20ae21491e76a7af1ed
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 14:32:16 2013 +0200

    [QUEU-ELB-SUPPORT] After production failures I added debugging symbols on rare failure immediately, and with that introduced _acquia_purge_export_debug_symbols().

commit 87c44d60bc11a586827010c941dcb52c851756d5
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 12:35:21 2013 +0200

    [QUEUE-ELB-SUPPORT] comment.

commit 052d354c645e75a1c4ec33af4bed2d5e9ff70c7a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 02:39:53 2013 +0200

    [QUEU-ELB-SUPPORT] By implementing _acquia_purge_trigger_client_side_purging() the trigger to purge now starts during the same request in which the events are fired, just like in the old situation.

commit 09e6b2835ee1b361c5d3f22707465742f03adffc
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 02:27:37 2013 +0200

    [QUEUE-ELB-SUPPORT] Implemented a extensive GUI widget that handles the purging from the client with proper feedback, slick animations and a good balance between information versus telling the user too much.

commit bdf2093de45ba3b567a430f861680c95e07a6d9d
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 02:18:03 2013 +0200

    [QUEUE-ELB-SUPPORT] Return a locked key in the AJAX callback used for more graceful communication.

commit 55ccc58bf3ba43f6f5009d719845fc6121240cd9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 00:01:11 2013 +0200

    [QUEUE-ELB-SUPPORT] Better wording.

commit 95af1d7df5b3ff67f67cc4d246020ca1a0a02349
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed Jun 5 00:00:12 2013 +0200

    [QUEUE-ELB-SUPPORT] Implementation details on the JS backend that came up during coding.

commit 56fed092911ce3ab1dd7b07002b41ef1bce609c0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 19:08:17 2013 +0200

    [QUEUE-ELB-SUPPORT] Typo fix + Let _acquia_purge_queue_is_user_purging() detect if we are on Acquia Cloud to prevent home users from attempting useless failing purge attempts.

commit 0ce87e32c17f8bacf32edd3a04942df35eab25cb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 19:05:16 2013 +0200

    [QUEUE-ELB-SUPPORT] I implemented hook_init() which will inject the AJAX based refreshing logic on most pages once the current user has a active ongoing purge. The init implementation also sets the on-screen message when users want them.

commit fd092f9beb505c93f453593d23d16e5699e76aeb
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 18:36:18 2013 +0200

    typo

commit 2a40bc73b4f421d627cee6ed27daf439a911221a
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 18:28:25 2013 +0200

    [QUEUE-ELB-SUPPORT] There was code duplication in acquia_purge_purge_paths(), reduced by dispatching everything to acquia_purge_purge_path().

commit 4169689b05ba5cd97aeef9f931e9ded98bc12201
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 18:19:42 2013 +0200

    [QUEUE-ELB-SUPPORT] Implemented /acquia_purge_ajax_processor and a thoroughly tested security test that allows the owners of a purge trigger to continue processing the purges over AJAX. With properly working and testing locking inside the callback in place its also not possible to have duplicate runs going on.

commit 65d9a03bd604580d81e7b338024333a1d35faa7c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 15:57:33 2013 +0200

    [QUEUE-ELB-SUPPORT] The hook_requirements() implementation ("Status Report") now actively shows purging progress whenever active purges are ongoing.

commit d5e3e0c8faa9746de3e00160f9c828492ba63f70
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 15:51:22 2013 +0200

    [QUEUE-ELB-SUPPORT] With the implementation of theme_acquia_purge_status_widget() and theme_acquia_purge_status_bar_widget() there is a first step towards GUI exposure of the new queuing system.

commit 168200a81ffaaee265af8113fce48b530eabfaa4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 14:43:43 2013 +0200

    Styling: dropped the @description Doxygen tags in favor of just @file.

commit 138a462071d6071e5a6b998b1c1f9d531893a319
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 13:25:26 2013 +0200

    [QUEUE-ELB-SUPPORT] Big refactor on the purge helpers to start using the newly built queueing mechanism, summary:
     - Several small typos and doc fixes.
     - _acquia_purge_queue_pop() now releases failed purges back to the queue.
     - Implemented _acquia_purge_queue_processpurge() which is now responsible for purging a single domain+path+balancer combination and does it in a atomic way. Logging is better and cURL now times out after 3 seconds.
     - Its now possible to purge paths like <front>?page=1.
     - _acquia_purge_queue_stats() now returns 'percent' instead of 'percentage'.
     - _acquia_purge_queue_stats() now allows to be fed a purged URL for GUI tracking purposes.
     - acquia_purge_purge_node(), acquia_purge_purge_path() and acquia_purge_purge_paths() now have highly consistent return behaviors and no-longer return booleans but the statistics array.

commit 163055382ab9fa0732776fbb3717bd57c56b5a20
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 11:32:36 2013 +0200

    [QUEUE-ELB-SUPPORT] _acquia_purge_queue_pop() now received a optional argument $processor_callback which allows the caller to immediate provide a processor for every popped item, reducing round-trip code and extra loops.

commit 1c0d00eb12b6b9189fb533976eef399c9e429b06
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 11:08:43 2013 +0200

    [QUEUE-ELB-SUPPORT] Breaking command line support open and start testing for the number of balancers, which always has to be bigger then 0.

commit 1ed2ac6333518a7470571341474765346ea95237
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 10:58:25 2013 +0200

    [QUEUE-ELB-SUPPORT] Introduced _acquia_purge_get_balancers().

commit b71ff080c2cbf7dfc43facfca5bf921ea7276ab2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 10:47:55 2013 +0200

    Typo.

commit 0024cb5e12623a2bed65ed4bf11dfc43d3070e14
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Tue Jun 4 10:45:16 2013 +0200

    [QUEUE-ELB-SUPPORT] First queue implementation on top of the Queue API, API level functionality is tested intensively.

commit 5fca4e7cd6bfa4c862e06f176683b80b832d4ead
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:45:00 2013 +0200

    Further pareview testing.

commit e5fc0d8b9b71a2bfea7cc434b77ca062b8ba27ac
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:42:19 2013 +0200

    Further pareview testing.

commit 9115d9884006c6cfe0dc749b4792a94d138223fa
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:41:01 2013 +0200

    Further pareview testing.

commit 302faa641fcb3881d00bca38a90099a467473692
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:29:44 2013 +0200

    Further pareview testing.

commit 50dbc6bcbcf176615267cbda35e9afad53bc6cd2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:21:50 2013 +0200

    Further pareview testing.

commit ce80d14ab7e1a192e10fcd80a03114d2d9167300
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:20:07 2013 +0200

    Further pareview testing.

commit 98b6eab11b0bbf12ee22e3e7b6db8c98f02635c9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:18:54 2013 +0200

    Further pareview fixing.

commit 42656ebb1b220ffb806aa859c3ec1ab469963716
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:17:41 2013 +0200

    Further pareview testing.

commit f040666d194ba49f27c86f1045502119fc4470b4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:13:04 2013 +0200

    First bunch of long-hanging pareview.sh checks.

commit dd2ddf709eb5df7e1d53e58c9fe8e1372a4ad993
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 23:05:11 2013 +0200

    Checked my code against coder again with minor level checks: Coder found 1 projects, 4 files, 0 warnings were flagged to be ignored.

commit 41a81ca8f02dbf23763cb3806c714b960fa9f4cd
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 22:54:27 2013 +0200

    Reimplemented _acquia_purge_action_purge() as a result from valuable feedback on https://drupal.org/node/2002812#comment-7467754, it is now faster, safer and better written.

commit 75913d43165eaa862e074a26e616406169976be3
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 17:15:25 2013 +0200

    PEBKAC commit, removed debug return.

commit ff396925a8d54ae2c138cd5ad3708b23445b12e2
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Jun 3 17:02:42 2013 +0200

    83827 - The previous fix to this was poorly tested (shame, shame) and has been fixed and tested now, the double slashes will only be filtered from the domain, base_url and path combination.

commit 558b5e067a0bfc7a45a58eb7963c34122c1cda9b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 31 16:56:15 2013 +0200

    2007404 - Strip double paths coming in from expire.module and reassure they don't end up in the end result.

commit 2ff8d65a216699724394d7e02b7299b9ce0e910f
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed May 29 15:47:27 2013 +0200

    Bug that caused 'Notice: Undefined variable: stripped_paths'.

commit 7ce3aa7c0f46d3047b00818bdb26ae9cd0c003a9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 24 18:05:55 2013 +0200

    Added extra compatibility checks.

commit 7f700765c66352ea6a27412e6482f4b791684dc9
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 24 17:18:58 2013 +0200

    Updates to README.txt and the introduction of ROADMAP.txt

commit 77f69d21e2ccaf6d5356685d9dbebee2d0fbad51
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri May 24 16:05:16 2013 +0200

    Removed the built-in node-based purge triggers as this muddies the waters, is expire's job and I've put a direct dependency on the expire module.

commit 6bfb568732ee60d58d1f4c97efdaf20ec1dbe546
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 23 13:15:28 2013 +0200

    I've put the TLD's into a separate file to maintain it more easily.

commit 7be4071d7836782716c0fb7b43efecacd85b43e4
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 23 12:38:10 2013 +0200

    Doxygen

commit 87c6df4255b18f3bb9eef6519f17b52b0a3a5cda
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 23 11:52:26 2013 +0200

    Detect the "Include base URL in expires" settings.

commit b6e96be6c59554f621e3aaeae981f8ee00edaf3c
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu May 23 11:12:31 2013 +0200

    #2000824: implemented logging to create a purged paths breadcrumb trail and to catch edge cases like this bug as I've included extensive debugging information.

commit c4d2699ff417d4d48199cc5109e11b63190cd391
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed May 22 18:55:08 2013 +0200

    #2000824: in order to decrease the random failing detection rate I'm disabling command-line based purging, for now.

commit 4d4ff21bc9f4cbb212e835576825d4debd774790
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed May 22 18:48:43 2013 +0200

    #1886834: implemented arbitrary path purging using a rules action.

commit 797d20b7a970a29c3e92ff7a0a892de761298f79
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed May 22 18:15:48 2013 +0200

    Fixed Doxygen tags.

commit f62b2aa6e9224837741ee7a2199c6c8a3aa3acb8
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Wed May 22 18:05:41 2013 +0200

    Typo

commit 8829b43d4d9cfff8192e433abe25852b03f16d52
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Mon Dec 31 11:41:53 2012 +0100

    Renamed the _acquia_purge_get_domains_add_from_* functions to _acquia_purge_get_domains_add_* to accomodate a bit for the upcoming API additions.

commit b1623f86da8079672041e0fdf993ffdd277d3927
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 16:46:05 2012 +0100

    Removed the drupal_http_request_fails check for now as it's apparently not always *that* reliable.

commit 6e0168c66982749bbf16e4261831199451581125
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 15:09:56 2012 +0100

    Synced up documentation.

commit 90a22f7bb8d3c86aeda2a23516d001bc482d5978
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 15:00:15 2012 +0100

    Applyied patch hook_permission-and-user-access-1872040-2.patch from anavarre to implement a permission for purging notifications as mentioned in #1872040

commit 85c9daf439c46afb45616f6579deb6aa8ed1abec
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 14:01:34 2012 +0100

    typo

commit 46f3d787a2f7808a2e12077e40118b84504782ee
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 13:36:14 2012 +0100

    Added documentation on multi-site setups and automatic domain detection.

commit 6115f6c3fff74a79654446ca2508c7d13902e2f6
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 13:22:14 2012 +0100

    Allow people to override the automatic domains detection by defining it from settings.php, like this:
    
    /**
     * Override domain detection in Acquia Purge.
     */
    $conf['acquia_purge_domains'] = array(
      'subsite.mysite.com',
      'www.subsite.mysite.com',
      'subsite.mysite.de',
      'subsite.mysite.nl'
    );

commit 973bbf722f92798c90255239a6bf3ccf6b1ab55b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 13:20:35 2012 +0100

    hook_requirements: point to the upcoming MULTISITE.txt documentation from the status page when running on a multi site.

commit e64f19b9aa69cde28f93f162476847ce9b7f28fe
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 12:54:22 2012 +0100

    Implemented hook_requirements() now telling users when they are not running on Acquia Cloud or when they are, what the domains are going to be that will be purged on a content update.

commit a09563d1a561a0b5ac520f05cfdabf2e57fdcaa0
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 12:41:40 2012 +0100

    Typo

commit 1bf5e7f80f115eb64309b8791dd80879fb3dcaff
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 12:40:36 2012 +0100

    Fixed the code against complaints from coder.module.

commit 01c93e461460004fb6d4ebe2ec3f805bd3ab24ea
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Fri Dec 21 12:24:55 2012 +0100

    I expanded the domain detection by reading the sites/site.php file whenever it would exist. This file allows multi-site setups to define aliases or complex cases - where sites live on subdirectories for instance - and to map those against the site directory. What this extra detection feature basically does is that it only takes the aliases that match the currently active site (which is detected in bootstrap) and strips out all domain names with a valid TLD (so that excludes localhost etc) or sites that live on a subdirectory, as that's very hard to parse.

commit 764f1d26c08839995fb166854dcb22b7dc6c7dbf
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 19:16:54 2012 +0100

    To better support multi-sites we only load in the configured Acquia Cloud domain names when we are on the 'default' site as that would else flood another site which we don't want to see happening, on <front> for example.

commit e9f3244fdf6b375421d8f53be6cc1bac532c53af
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 19:02:40 2012 +0100

    Cleaned the implementation of _acquia_purge_get_domains() by splitting things out to _acquia_purge_get_domains_add() for adding new domains - and do the cleaning and dupe-checking at the right level - and by isolating the Acquia Cloud domain parsing hack onto a different function _acquia_purge_get_domains_add_from_acloud().

commit 35c749c36f0dcf7630a8e17e3c7f3dc836224a4b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 18:37:17 2012 +0100

    At this moment in time there's no reason to believe why purging would not work on the CLI, as long as curl_init is available which is already being checked for.

commit baa2e44e4aebaaa8ecac4de9cc172a27adb7f118
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 18:24:04 2012 +0100

    Some more naming things.

commit 9f0c1f3d55bc5755c7f0d4e8aec04c183472d366
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 17:59:28 2012 +0100

    hosting --> cloud

commit 8bbe88d38c6fd86c3a254384e1326d8a2691a3be
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 17:58:06 2012 +0100

    Renamed hosting --> running.

commit 93d1b89e9313a8d00c439549ec7ab9207a00c028
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 17:56:32 2012 +0100

    Improved the module description.

commit b533a123733243da2a9f2d4ccc02b2ff398cfb68
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 17:02:31 2012 +0100

    Implemented several changes to adhere to coder.module.

commit bdcebd6ebbc6cfa6c0f47f7bb9f4061875a53b66
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 16:48:31 2012 +0100

    Renamed the API functions to not have leading _'s as that's against Drupal's code style guide.

commit 5f693d75d0f616d3b10c81ab50b67936dd080d46
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 16:15:28 2012 +0100

    Readme typo mutations and added the future plans section.

commit 068f955c7121998e6e0e0f7ca98b7b6f1aa0d28b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 15:59:55 2012 +0100

    Added documentation, exactly the same text as on the d.o. page.

commit 1292cea3f11f02f5dc89c1908a6b8d22316a3351
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 15:23:13 2012 +0100

    As development happened on a local repository, blob-commit the current state of the code into here in one go.

commit 92100a31d1a6cb62259fe58f52a32b5b289b123b
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 15:22:53 2012 +0100

    Setted up the info file for the module.

commit 549677cffa247712f6831eaeda020086ac161f80
Author: Niels van Mourik <niels.vanmourik@acquia.com>
Date:   Thu Dec 20 15:15:06 2012 +0100

    Initial commit.
