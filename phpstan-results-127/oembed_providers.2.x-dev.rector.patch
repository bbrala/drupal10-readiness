diff --git a/tests/src/Functional/ProviderBucketTest.php b/tests/src/Functional/ProviderBucketTest.php
index 8a3039e..cfc5ade 100644
--- a/tests/src/Functional/ProviderBucketTest.php
+++ b/tests/src/Functional/ProviderBucketTest.php
@@ -164,6 +164,7 @@ class ProviderBucketTest extends BrowserTestBase {
 
   /**
    * Tests dependency calculation for ProviderBucket entities.
+   * @doesNotPerformAssertions
    */
   public function testProviderBucketDependencyCalculation() {
     // Create a test provider bucket with a custom provider.
diff --git a/tests/src/Functional/ProviderRepositoryTest.php b/tests/src/Functional/ProviderRepositoryTest.php
index 2ec891a..815f98f 100644
--- a/tests/src/Functional/ProviderRepositoryTest.php
+++ b/tests/src/Functional/ProviderRepositoryTest.php
@@ -21,6 +21,7 @@ use GuzzleHttp\Psr7\Request;
  */
 class ProviderRepositoryTest extends MediaFunctionalTestBase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * {@inheritdoc}
    */
diff --git a/tests/src/Functional/SettingsFormTest.php b/tests/src/Functional/SettingsFormTest.php
index b3c562f..fa61aec 100644
--- a/tests/src/Functional/SettingsFormTest.php
+++ b/tests/src/Functional/SettingsFormTest.php
@@ -91,7 +91,7 @@ class SettingsFormTest extends BrowserTestBase {
     $page = $this->getSession()->getPage();
 
     // Set dummy value in cache, so it can be deleted on form submission.
-    \Drupal::cache()->set('oembed_providers:oembed_providers', 'test value', REQUEST_TIME + (86400));
+    \Drupal::cache()->set('oembed_providers:oembed_providers', 'test value', \Drupal::time()->getRequestTime() + (86400));
 
     $this->drupalLogin($this->adminUser);
     $this->drupalGet('/admin/config/media/oembed-providers');
diff --git a/tests/src/Unit/UrlIsValidTest.php b/tests/src/Unit/UrlIsValidTest.php
index 6e06187..3a499b2 100644
--- a/tests/src/Unit/UrlIsValidTest.php
+++ b/tests/src/Unit/UrlIsValidTest.php
@@ -29,12 +29,8 @@ class UrlIsValidTest extends UnitTestCase {
   protected function setUp(): void {
     parent::setUp();
 
-    $entity_type_manager = $this->getMockBuilder('Drupal\Core\Entity\EntityTypeManager')
-      ->disableOriginalConstructor()
-      ->getMock();
-    $messenger = $this->getMockBuilder('Drupal\Core\Messenger\Messenger')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $entity_type_manager = $this->createMock('Drupal\Core\Entity\EntityTypeManager');
+    $messenger = $this->createMock('Drupal\Core\Messenger\Messenger');
     $this->formObject = new OembedProviderForm($entity_type_manager, $messenger);
   }
 
