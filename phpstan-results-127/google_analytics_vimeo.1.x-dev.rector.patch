diff --git a/google_analytics_vimeo.install b/google_analytics_vimeo.install
index 751bdab..941eb9d 100644
--- a/google_analytics_vimeo.install
+++ b/google_analytics_vimeo.install
@@ -16,7 +16,7 @@ function google_analytics_vimeo_requirements($phase) {
       $library = libraries_detect('vimeo.ga.js');
       $error_message = isset($library['error message']) ? $library['error message'] : '';
       $library_download_url = Url::fromUri($library['download url']);
-      $library_download_link = \Drupal::l(t('Google Analytics Vimeo Video Tracking Library'), $library_download_url);
+      $library_download_link = \Drupal\Core\Link::fromTextAndUrl(t('Google Analytics Vimeo Video Tracking Library'), $library_download_url);
       if (empty($library['installed'])) {
         $requirements['vimeo_ga_js'] = array(
           'title' => t('Google Analytics Vimeo Video Tracking Library'),
@@ -50,7 +50,7 @@ function google_analytics_vimeo_install() {
   if (\Drupal::moduleHandler()->moduleExists('libraries')) {
     $library = libraries_detect('vimeo.ga.js');
     if (isset($library['error message'])) {
-      drupal_set_message($library['error message'], 'error');
+      \Drupal::messenger()->addError($library['error message']);
     }
   }
 }
