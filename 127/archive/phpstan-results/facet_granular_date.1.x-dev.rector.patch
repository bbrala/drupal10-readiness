diff --git a/facet_granular_date.info.yml b/facet_granular_date.info.yml
index 72fd7f8..b267d97 100644
--- a/facet_granular_date.info.yml
+++ b/facet_granular_date.info.yml
@@ -1,8 +1,7 @@
 name: Facet Granular Date
 description: Provides a drill down date facet processor.
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^8 || ^9 || ^10
 dependencies:
   - drupal:node
   - search_api:search_api
diff --git a/src/Plugin/facets/query_type/SearchApiDateGranular.php b/src/Plugin/facets/query_type/SearchApiDateGranular.php
index c1b91c5..fe533f6 100644
--- a/src/Plugin/facets/query_type/SearchApiDateGranular.php
+++ b/src/Plugin/facets/query_type/SearchApiDateGranular.php
@@ -288,7 +288,7 @@ class SearchApiDateGranular extends QueryTypeRangeBase {
         $date = new DrupalDateTime();
         $date->setTimestamp($value);
         $now = new DrupalDateTime();
-        $now->setTimestamp(REQUEST_TIME);
+        $now->setTimestamp(\Drupal::time()->getRequestTime());
         $interval = $date->diff($now);
         $future = $date > $now;
 
