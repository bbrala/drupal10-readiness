diff --git a/ddos_security.module b/ddos_security.module
index 7bcf3e2..8a4269f 100644
--- a/ddos_security.module
+++ b/ddos_security.module
@@ -57,7 +57,7 @@ function ddos_security_cron() {
     if (!empty($config->get('enable_mail_log') && $config->get('enable_mail_log') == 1)) {
       $mailManager = \Drupal::service('plugin.manager.mail');
       $route_url = Url::fromRoute('ddos_security.csv_export', [], ['absolute' => TRUE]);
-      $report_link = \Drupal::l(t('Click here to download'), $route_url);
+      $report_link = \Drupal\Core\Link::fromTextAndUrl(t('Click here to download'), $route_url);
       $module = 'ddos_security';
       $key = 'ddos_security';
       $mailId = \Drupal::config('system.site')->get('mail');
diff --git a/src/EventSubscriber/AttackProtection.php b/src/EventSubscriber/AttackProtection.php
index bfa0140..6a5cb04 100644
--- a/src/EventSubscriber/AttackProtection.php
+++ b/src/EventSubscriber/AttackProtection.php
@@ -102,7 +102,7 @@ class AttackProtection implements EventSubscriberInterface {
   /**
    * Call this method whenever the KernelEvents::TERMINATE event is dispatched.
    */
-  public function ddosSecurity(GetResponseEvent $event) {
+  public function ddosSecurity(\Symfony\Component\HttpKernel\Event\RequestEvent $event) {
     $ddosConfig = $this->config->get('ddos_security.settings');
     $current_path = $this->currentPath->getPath();
 
