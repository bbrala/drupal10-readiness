diff --git a/nexx_integration.install b/nexx_integration.install
index 074322b..cc349c7 100644
--- a/nexx_integration.install
+++ b/nexx_integration.install
@@ -45,7 +45,7 @@ function nexx_integration_schema() {
  * Implements hook_install().
  */
 function nexx_integration_install() {
-  $source = drupal_get_path('module', 'nexx_integration') . '/images/icons';
+  $source = \Drupal::service('extension.list.module')->getPath('nexx_integration') . '/images/icons';
   $destination = \Drupal::config('media.settings')->get('icon_base_uri');
   $file_system = \Drupal::service('file_system');
   $file_system->prepareDirectory($destination, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
diff --git a/src/Controller/OmniaController.php b/src/Controller/OmniaController.php
index 9160392..fd63f2a 100644
--- a/src/Controller/OmniaController.php
+++ b/src/Controller/OmniaController.php
@@ -562,7 +562,7 @@ class OmniaController extends ControllerBase {
       if ($destination_directory) {
         // Import file.
         $this->fileSystem->prepareDirectory($destination_directory, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
-        $thumbnail = file_save_data(file_get_contents($thumb_uri), $destination_file, FileSystemInterface::EXISTS_REPLACE);
+        $thumbnail = \Drupal::service('file.repository')->writeData(file_get_contents($thumb_uri), $destination_file, FileSystemInterface::EXISTS_REPLACE);
         // Add this file to thumbnail field of the nexx media entity.
         $thumbnail_entity->$thumbnail_upload_field->appendItem([
           'target_id' => $thumbnail->id(),
