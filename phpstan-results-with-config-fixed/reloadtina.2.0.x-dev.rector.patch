diff --git a/reloadtina.info.yml b/reloadtina.info.yml
index b763cd9..36fdc99 100644
--- a/reloadtina.info.yml
+++ b/reloadtina.info.yml
@@ -3,7 +3,6 @@ type: module
 description: 'Provides retina version of image styles.'
 package: Image
 version: VERSION
-core: 8.x
 dependencies:
   - image
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
diff --git a/reloadtina.module b/reloadtina.module
index 0255d60..9a6f26d 100644
--- a/reloadtina.module
+++ b/reloadtina.module
@@ -87,7 +87,7 @@ function reloadtina_build_url($image_style, $image_uri, $multiplier = 1, $clean_
     return Url::fromUri('base:' . $directory_path . '/' . \Drupal::service('stream_wrapper_manager')->getTarget($uri), array('absolute' => TRUE, 'query' => $token_query))->toString();
   }
 
-  $file_url = file_create_url($uri);
+  $file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   // Append the query string with the token, if necessary.
   if ($token_query) {
     $file_url .= (strpos($file_url, '?') !== FALSE ? '&' : '?') . UrlHelper::buildQuery($token_query);
