diff --git a/gdoc_field.info.yml b/gdoc_field.info.yml
index 118f816..e4f729d 100644
--- a/gdoc_field.info.yml
+++ b/gdoc_field.info.yml
@@ -2,5 +2,5 @@ name: 'Embedded Google Documents Viewer'
 description: 'An embedded Document viewer field using Google Docs'
 dependencies:
   - drupal:field
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
diff --git a/src/Plugin/Field/FieldFormatter/GdocFieldFormatter.php b/src/Plugin/Field/FieldFormatter/GdocFieldFormatter.php
index dd25fea..65a92aa 100644
--- a/src/Plugin/Field/FieldFormatter/GdocFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/GdocFieldFormatter.php
@@ -63,7 +63,7 @@ class GdocFieldFormatter extends FileFormatterBase {
       $uri_scheme = StreamWrapperManager::getScheme($file_uri);
 
       if ($uri_scheme == 'public') {
-        $url = file_create_url($file->getFileUri());
+        $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
         $elements[$delta] = [
           '#theme' => 'gdoc_field',
           '#url' => $url,
