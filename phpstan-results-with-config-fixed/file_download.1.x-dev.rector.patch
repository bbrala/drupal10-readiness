diff --git a/file_download.module b/file_download.module
index 8af767c..693787f 100644
--- a/file_download.module
+++ b/file_download.module
@@ -22,7 +22,7 @@ use Drupal\Core\Render\BubbleableMetadata;
 function file_download_help($route_name, RouteMatchInterface $arg) {
   switch ($route_name) {
     case 'help.page.file_download':
-      $output = file_get_contents(drupal_get_path('module', 'file_download') . '/README.md');
+      $output = file_get_contents(\Drupal::service('extension.list.module')->getPath('file_download') . '/README.md');
 
       return \Drupal::moduleHandler()->moduleExists('markdown') ? Xss::filterAdmin(\Drupal::moduleHandler()->invoke('markdown', 'filter', ['process', 0, -1, $output])) : '<h3>file_download README</h3><pre>' . Html::escape($output) . '</pre>';
   }
@@ -53,7 +53,7 @@ function template_preprocess_download_file_link(&$variables) {
   // To ensure different file URLs are generated for different sites in a.
   // Multisite setup, including HTTP and HTTPS versions of the same site.
   // Fix in https://www.drupal.org/node/2646744.
-  $url = file_create_url($file_entity->getFileUri());
+  $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file_entity->getFileUri());
   $variables['#cache']['contexts'][] = 'url.site';
 
   $mime_type = $file->getMimeType();
diff --git a/modules/file_download_counter/file_download_counter.module b/modules/file_download_counter/file_download_counter.module
index 3ca4e08..c73fbc6 100644
--- a/modules/file_download_counter/file_download_counter.module
+++ b/modules/file_download_counter/file_download_counter.module
@@ -14,7 +14,7 @@ use Drupal\Core\Routing\RouteMatchInterface;
 function file_download_counter_help($route_name, RouteMatchInterface $route_match) {
   switch ($route_name) {
     case 'help.page.file_download_counter':
-      $output = file_get_contents(drupal_get_path('module', 'file_download_counter') . '/README.md');
+      $output = file_get_contents(\Drupal::service('extension.list.module')->getPath('file_download_counter') . '/README.md');
       return \Drupal::moduleHandler()->moduleExists('markdown') ? \Drupal\Component\Utility\Xss::filterAdmin(\Drupal::moduleHandler()->invoke('markdown', 'filter', ['process', 0, -1, $output])) : '<h3>file_download README</h3><pre>' . \Drupal\Component\Utility\Html::escape($output) . '</pre>';
   }
 }
