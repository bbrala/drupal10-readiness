diff --git a/content_packager.info.yml b/content_packager.info.yml
index 9f41c0d..36c3616 100644
--- a/content_packager.info.yml
+++ b/content_packager.info.yml
@@ -3,8 +3,7 @@ description: Makes it easy to collect an export of content entities and any medi
 package: Custom
 
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 dependencies:
   - drupal:media
diff --git a/src/Form/CreatePackage.php b/src/Form/CreatePackage.php
index 00236ea..a42b961 100644
--- a/src/Form/CreatePackage.php
+++ b/src/Form/CreatePackage.php
@@ -180,7 +180,7 @@ class CreatePackage extends FormBase {
       return;
     }
 
-    $url = file_create_url($full_package_uri);
+    $url = \Drupal::service('file_url_generator')->generateAbsoluteString($full_package_uri);
 
     $form['existing_file'] = [
       '#type' => 'details',
diff --git a/tests/src/Functional/ContentPackagerDirectoryTest.php b/tests/src/Functional/ContentPackagerDirectoryTest.php
index 031629d..fd49b27 100644
--- a/tests/src/Functional/ContentPackagerDirectoryTest.php
+++ b/tests/src/Functional/ContentPackagerDirectoryTest.php
@@ -39,7 +39,7 @@ class ContentPackagerDirectoryTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser([
       'access administration pages',
@@ -75,7 +75,7 @@ class ContentPackagerDirectoryTest extends BrowserTestBase {
     $this->drupalGet('admin/config/content/content_packager');
     $this->assertSession()->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'package_scheme' => 'public://',
       'package_destination' => 'test_folder',
     ], t('Save configuration'));
@@ -118,7 +118,7 @@ class ContentPackagerDirectoryTest extends BrowserTestBase {
     $this->drupalGet('admin/config/content/content_packager');
     $this->assertSession()->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'package_scheme' => 'public://',
       'package_destination' => 'test_folder',
     ], t('Save configuration'));
