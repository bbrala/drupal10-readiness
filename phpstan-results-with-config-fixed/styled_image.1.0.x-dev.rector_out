modules/contrib/styled_image/src/Plugin/Field/FieldFormatter/StyledImageFormatter.php
modules/contrib/styled_image/src/Plugin/Field/FieldType/StyledImageItem.php
modules/contrib/styled_image/src/Plugin/Field/FieldWidget/StyledImageWidget.php
modules/contrib/styled_image/styled_image.module

2 files with changes
====================

1) modules/contrib/styled_image/styled_image.module:87

    ---------- begin diff ----------
@@ @@
   if ($file_new && (StreamWrapperManager::getScheme(($file_new->getFileUri())) !== $field_storage->getSetting('uri_scheme'))) {
     $directory = $field_storage->getSetting('uri_scheme') . '://default_images/';
     \Drupal::service('file_system')->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY);
-    file_move($file_new, $directory . $file_new->filename);
+    \Drupal::service('file.repository')->move($file_new, $directory . $file_new->filename);
   }
 }

@@ @@
   if ($file_new && (StreamWrapperManager::getScheme($file_new->getFileUri()) !== $field_storage->getSetting('uri_scheme'))) {
     $directory = $field_storage->getSetting('uri_scheme') . '://default_images/';
     \Drupal::service('file_system')->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY);
-    file_move($file_new, $directory . $file_new->filename);
+    \Drupal::service('file.repository')->move($file_new, $directory . $file_new->filename);
   }
 }
    ----------- end diff -----------

Applied rules:
 * FileMoveRector
 * ArgumentRemoverRector


2) modules/contrib/styled_image/src/Plugin/Field/FieldFormatter/StyledImageFormatter.php:139

    ---------- begin diff ----------
@@ @@
         // context to ensure different file URLs are generated for different
         // sites in a multisite setup, including HTTP and HTTPS versions of the
         // same site. Fix in https://www.drupal.org/node/2646744.
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
         $cache_contexts[] = 'url.site';
       }
       $cache_tags = Cache::mergeTags($base_cache_tags, $file->getCacheTags());
    ----------- end diff -----------

Applied rules:
 * FromUriRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 2 files have been changed by Rector                                       

