modules/contrib/google_optimize_js/google_optimize_js.install
modules/contrib/google_optimize_js/google_optimize_js.module
modules/contrib/google_optimize_js/google_optimize_js.post_update.php
modules/contrib/google_optimize_js/src/Form/SettingsForm.php
modules/contrib/google_optimize_js/src/Inclusion.php
modules/contrib/google_optimize_js/src/InclusionInterface.php
modules/contrib/google_optimize_js/tests/fixtures/google_optimize_js.update-hook-test.php
modules/contrib/google_optimize_js/tests/src/Functional/FrontendTest.php
modules/contrib/google_optimize_js/tests/src/Functional/SettingsFormTest.php
modules/contrib/google_optimize_js/tests/src/Functional/UpdateTest.php
modules/contrib/google_optimize_js/tests/src/Kernel/InclusionTest.php

3 files with changes
====================

1) modules/contrib/google_optimize_js/tests/src/Kernel/InclusionTest.php:51

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritDoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->installConfig('google_optimize_js');

-    $this->currentPathStack = $this->getMockBuilder(CurrentPathStack::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->currentPathStack = $this->createMock(CurrentPathStack::class);

     $this->container->set('path.current', $this->currentPathStack);

-    $this->adminContext = $this->getMockBuilder(AdminContext::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->adminContext = $this->createMock(AdminContext::class);

     $this->container->set('router.admin_context', $this->adminContext);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/google_optimize_js/tests/src/Functional/UpdateTest.php:20

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->configFactory = $this->container->get('config.factory');
   }
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/google_optimize_js/tests/src/Functional/SettingsFormTest.php:29

    ---------- begin diff ----------
@@ @@

     // Ensure that anonymous users are denied access.
     $this->drupalGet('/admin/config/system/google_optimize');
-    $this->assertResponse(403);
+    $this->assertSession()->statusCodeEquals(403);

     // Ensure that authenticated users without permission are denied access.
     $this->drupalLogin($this->drupalCreateUser());
     $this->drupalGet('/admin/config/system/google_optimize');
-    $this->assertResponse(403);
+    $this->assertSession()->statusCodeEquals(403);
   }

   /**
@@ @@

     // Ensure that authorized users are allowed access.
     $this->drupalGet('/admin/config/system/google_optimize');
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);

     $edit = [
       'container' => '"</script><script>alert("XSS!");</script>',
@@ @@
       'datalayer_js_weight' => 1,
     ];

-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
-    $this->assertText('Container Id field is not in the right format.');
+    $this->submitForm($edit, 'Save configuration');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Container Id field is not in the right format.');

     // Fill out the form.
     $edit = [
@@ @@
       'loading_strategy' => 'asynchronous',
     ];

-    $this->drupalPostForm(NULL, $edit, 'Save configuration');
+    $this->submitForm($edit, 'Save configuration');

     $config = $this->config('google_optimize_js.settings');
     foreach ($edit as $k => $v) {
@@ @@

       // Assert the value on the form has updated.
       $form_element = $this->getSession()->getPage()->findField($k);
-      $this->assertEqual($form_element->getValue(), $v);
+      $this->assertEquals($form_element->getValue(), $v);

       // Assert that configuration has updated.
-      $this->assertEqual($config->get($k), $v);
+      $this->assertEquals($config->get($k), $v);
     }
   }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * AssertResponseRector
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 3 files have been changed by Rector                                       

