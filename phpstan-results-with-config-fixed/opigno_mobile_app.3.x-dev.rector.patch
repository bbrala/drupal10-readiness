diff --git a/modules/opigno_onesignal/src/OneSignalManager.php b/modules/opigno_onesignal/src/OneSignalManager.php
index 0ff1bba..96c2cc8 100644
--- a/modules/opigno_onesignal/src/OneSignalManager.php
+++ b/modules/opigno_onesignal/src/OneSignalManager.php
@@ -103,7 +103,7 @@ class OneSignalManager implements OneSignalManagerInterface {
     }
 
     // Get logo.
-    $logo_path = $base_url . '/' . drupal_get_path("theme", "aristotle") . "/logo.png";
+    $logo_path = $base_url . '/' . \Drupal::service('extension.list.theme')->getPath("aristotle") . "/logo.png";
     // Build title for notification.
     $title = [
       $langcode => isset($params['title']) ? $params['title'] : '',
diff --git a/opigno_mobile_app.module b/opigno_mobile_app.module
index 1e77579..bd7ef45 100644
--- a/opigno_mobile_app.module
+++ b/opigno_mobile_app.module
@@ -48,7 +48,7 @@ function opigno_mobile_app_get_user_picture(\Drupal\user\UserInterface $user) {
   if ($user_picture) {
     $file = File::load($user_picture);
     $uri = $file->getFileUri();
-    $url = file_create_url($uri);
+    $url = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
 
   return isset($url) ? $url : '';
diff --git a/src/Plugin/rest/resource/TokenRestResource.php b/src/Plugin/rest/resource/TokenRestResource.php
index 91ccbf6..11e1db0 100644
--- a/src/Plugin/rest/resource/TokenRestResource.php
+++ b/src/Plugin/rest/resource/TokenRestResource.php
@@ -114,7 +114,7 @@ class TokenRestResource extends ResourceBase {
    */
   public function generateToken() {
     $event = new JwtAuthGenerateEvent(new JsonWebToken());
-    $this->eventDispatcher->dispatch(JwtAuthEvents::GENERATE, $event);
+    $this->eventDispatcher->dispatch($event, JwtAuthEvents::GENERATE);
     $jwt = $event->getToken();
     return $this->transcoder->encode($jwt);
   }
