modules/contrib/gutenberg/gutenberg.api.php
modules/contrib/gutenberg/gutenberg.install
modules/contrib/gutenberg/gutenberg.module
modules/contrib/gutenberg/gutenberg.post_update.php
modules/contrib/gutenberg/gutenberg.theme.inc
modules/contrib/gutenberg/modules/editorskit/build/admin.asset.php
modules/contrib/gutenberg/modules/editorskit/build/editor.asset.php
modules/contrib/gutenberg/modules/editorskit/build/index.asset.php
modules/contrib/gutenberg/modules/editorskit/build/settings.asset.php
modules/contrib/gutenberg/modules/editorskit/build/style.asset.php
modules/contrib/gutenberg/modules/example_block/example_block.module
modules/contrib/gutenberg/modules/gutenberg_cloud/gutenberg_cloud.module
modules/contrib/gutenberg/modules/gutenberg_cloud/src/CloudBlock.php
modules/contrib/gutenberg/modules/gutenberg_cloud/src/CloudBlockBase.php
modules/contrib/gutenberg/modules/gutenberg_cloud/src/CloudBlockInterface.php
modules/contrib/gutenberg/modules/gutenberg_cloud/src/CloudBlockManager.php
modules/contrib/gutenberg/modules/gutenberg_cloud/src/Form/BlockManagerForm.php
modules/contrib/gutenberg/scripts/_cli_include.inc.php
modules/contrib/gutenberg/scripts/generate-vendor.php
modules/contrib/gutenberg/scripts/gutenberg-dependencies.php
modules/contrib/gutenberg/scripts/write-gutenberg-version.php
modules/contrib/gutenberg/src/Ajax/UpdateMediaEntitiesCommand.php
modules/contrib/gutenberg/src/Annotation/GutenbergPlugin.php
modules/contrib/gutenberg/src/AssertMediaTrait.php
modules/contrib/gutenberg/src/BlockProcessor/ConfigurableProcessorBase.php
modules/contrib/gutenberg/src/BlockProcessor/DrupalBlockProcessor.php
modules/contrib/gutenberg/src/BlockProcessor/DuotoneProcessor.php
modules/contrib/gutenberg/src/BlockProcessor/DynamicRenderProcessor.php
modules/contrib/gutenberg/src/BlockProcessor/FieldMappingProcessor.php
modules/contrib/gutenberg/src/BlockProcessor/GutenbergBlockProcessorInterface.php
modules/contrib/gutenberg/src/BlockProcessor/GutenbergBlockProcessorManager.php
modules/contrib/gutenberg/src/BlockProcessor/GutenbergConfigurableBlockProcessorInterface.php
modules/contrib/gutenberg/src/BlockProcessor/OEmbedProcessor.php
modules/contrib/gutenberg/src/BlockProcessor/ReusableBlockProcessor.php
modules/contrib/gutenberg/src/BlocksLibraryManager.php
modules/contrib/gutenberg/src/BlocksRendererHelper.php
modules/contrib/gutenberg/src/Controller/BlocksController.php
modules/contrib/gutenberg/src/Controller/MediaController.php
modules/contrib/gutenberg/src/Controller/OEmbedProxyUrlController.php
modules/contrib/gutenberg/src/Controller/ReusableBlocksController.php
modules/contrib/gutenberg/src/Controller/SearchController.php
modules/contrib/gutenberg/src/Controller/UtilsController.php
modules/contrib/gutenberg/src/DataProvider/BaseDataProvider.php
modules/contrib/gutenberg/src/DataProvider/DataProviderInterface.php
modules/contrib/gutenberg/src/DataProvider/EntityDataProviderManager.php
modules/contrib/gutenberg/src/DataProvider/EntityDataProviderManagerInterface.php
modules/contrib/gutenberg/src/DataProvider/FileEntityDataProvider.php
modules/contrib/gutenberg/src/DataProvider/MediaEntityDataProvider.php
modules/contrib/gutenberg/src/Discovery/BlockJsonDiscovery.php
modules/contrib/gutenberg/src/FileExtensionGuesser.php
modules/contrib/gutenberg/src/FileExtensionGuesserInterface.php
modules/contrib/gutenberg/src/Form/BlockSettingsForm.php
modules/contrib/gutenberg/src/GutenbergElementInfoAlter.php
modules/contrib/gutenberg/src/GutenbergLibraryManager.php
modules/contrib/gutenberg/src/GutenbergLibraryManagerInterface.php
modules/contrib/gutenberg/src/GutenbergMediaLibraryUiBuilder.php
modules/contrib/gutenberg/src/GutenbergPluginBase.php
modules/contrib/gutenberg/src/GutenbergPluginConfigurableInterface.php
modules/contrib/gutenberg/src/GutenbergPluginInterface.php
modules/contrib/gutenberg/src/GutenbergPluginManager.php
modules/contrib/gutenberg/src/MappingFieldsHelper.php
modules/contrib/gutenberg/src/MediaEntityRenderer.php
modules/contrib/gutenberg/src/MediaEntityRendererInterface.php
modules/contrib/gutenberg/src/MediaLibraryGutenbergOpener.php
modules/contrib/gutenberg/src/MediaSelectionProcessor/DefaultMediaSelectionProcessor.php
modules/contrib/gutenberg/src/MediaSelectionProcessor/MediaSelectionProcessorInterface.php
modules/contrib/gutenberg/src/MediaSelectionProcessor/MediaSelectionProcessorManager.php
modules/contrib/gutenberg/src/MediaSelectionProcessor/MediaSelectionProcessorManagerInterface.php
modules/contrib/gutenberg/src/MediaTypeGuesser.php
modules/contrib/gutenberg/src/MediaTypeGuesserInterface.php
modules/contrib/gutenberg/src/MediaUploader.php
modules/contrib/gutenberg/src/MediaUploaderInterface.php
modules/contrib/gutenberg/src/OEmbedResolver.php
modules/contrib/gutenberg/src/OEmbedResolverInterface.php
modules/contrib/gutenberg/src/Parser/BlockParser.php
modules/contrib/gutenberg/src/Parser/BlockParserBlock.php
modules/contrib/gutenberg/src/Parser/BlockParserFrame.php
modules/contrib/gutenberg/src/Persistence/MediaTypePersistenceManager.php
modules/contrib/gutenberg/src/Persistence/MediaTypePersistenceManagerInterface.php
modules/contrib/gutenberg/src/Plugin/Action/ReusableBlockDelete.php
modules/contrib/gutenberg/src/Plugin/Editor/Gutenberg.php
modules/contrib/gutenberg/src/Plugin/Field/FieldFormatter/GutenbergTextFormatter.php
modules/contrib/gutenberg/src/Plugin/Filter/GutenbergFilter.php
modules/contrib/gutenberg/src/Plugin/GutenbergPlugin/DrupalImage.php
modules/contrib/gutenberg/src/ReusableBlockViewsData.php
modules/contrib/gutenberg/src/ScanDir.php
modules/contrib/gutenberg/src/Service/FileEntityNotFoundException.php
modules/contrib/gutenberg/src/Service/FileEntityNotSavedException.php
modules/contrib/gutenberg/src/Service/MediaEntityNotFoundException.php
modules/contrib/gutenberg/src/Service/MediaEntityNotMatchedException.php
modules/contrib/gutenberg/src/Service/MediaEntityNotSavedException.php
modules/contrib/gutenberg/src/Service/MediaService.php
modules/contrib/gutenberg/src/Service/MediaTypeNotFoundException.php
modules/contrib/gutenberg/src/TinyColor.php
modules/contrib/gutenberg/vendor/gutenberg/a11y/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/annotations/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/api-fetch/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/autop/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/blob/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-directory/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-editor/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/archives.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/block.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/calendar.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/categories.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/file.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/file/view.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/home-link.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/latest-comments.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/latest-posts.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/loginout.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/navigation-link.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/navigation.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/navigation/view.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/page-list.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-author.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comment-author.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comment-content.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comment-date.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comment.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comments-count.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comments-form.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comments-link.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-comments.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-content.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-date.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-excerpt.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-featured-image.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-navigation-link.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-template.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-terms.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/post-title.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/query-pagination-next.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/query-pagination-numbers.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/query-pagination-previous.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/query-pagination.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/query-title.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/query.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/rss.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/search.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/shortcode.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/site-logo.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/site-tagline.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/site-title.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/social-link.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/table-of-contents.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/tag-cloud.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/template-part.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/blocks/term-description.php
modules/contrib/gutenberg/vendor/gutenberg/block-library/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-serialization-default-parser/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/block-serialization-spec-parser/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/blocks/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/components/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/compose/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/core-data/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/customize-widgets/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/data-controls/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/data/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/date/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/deprecated/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/dom-ready/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/dom/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/edit-navigation/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/edit-post/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/edit-site/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/edit-widgets/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/editor/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/element/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/escape-html/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/format-library/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/hooks/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/html-entities/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/i18n/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/is-shallow-equal/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/keyboard-shortcuts/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/keycodes/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/list-reusable-blocks/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/media-utils/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/notices/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/nux/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/plugins/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/primitives/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/priority-queue/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/react-i18n/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/redux-routine/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/reusable-blocks/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/rich-text/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/server-side-render/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/shortcode/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/token-list/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/url/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/viewport/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/warning/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/widgets/blocks/legacy-widget.php
modules/contrib/gutenberg/vendor/gutenberg/widgets/index.asset.php
modules/contrib/gutenberg/vendor/gutenberg/wordcount/index.asset.php

5 files with changes
====================

1) modules/contrib/gutenberg/src/Form/BlockSettingsForm.php:100

    ---------- begin diff ----------
@@ @@
   public function buildForm(array $form, FormStateInterface $form_state, $plugin_id = NULL, $config = []) {
     function array_flatten($array = null) {
       $result = array();
-  
+
       if (!is_array($array)) {
           $array = func_get_args();
       }
-  
+
       foreach ($array as $key => $value) {
           if (is_array($value)) {
               $result = array_merge($result, array_flatten($value));
@@ @@
               $result = array_merge($result, array($key => $value));
           }
       }
-  
+
       return $result;
     }

@@ @@

     $plugin_block = $this->blocksRenderer->getBlockFromPluginId($plugin_id, $configuration ?? []);
     $block_form = $plugin_block->blockForm($form, $form_state);
- 
+
     // $form['#attached']['library'][] = 'gutenberg/drupal-block-settings';

     $form['#tree'] = TRUE;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/gutenberg/src/DataProvider/MediaEntityDataProvider.php:23

    ---------- begin diff ----------
@@ @@

     /** @var \Drupal\file\FileInterface $entity */
     $uri = $entity->getFileUri();
-    $source_url = file_url_transform_relative(file_create_url($uri));
+    $source_url = \Drupal::service('file_url_generator')->generateString($uri);
     $file_data = $this->getFileData($entity->id());

     $result = [
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/gutenberg/src/DataProvider/FileEntityDataProvider.php:23

    ---------- begin diff ----------
@@ @@

     /** @var \Drupal\file\FileInterface $entity */
     $uri = $entity->getFileUri();
-    $source_url = file_url_transform_relative(file_create_url($uri));
+    $source_url = \Drupal::service('file_url_generator')->generateString($uri);
     $image = $this->imageFactory->get($uri);
     $file_data = $this->getFileData($entity->id());

@@ @@
       'title' => $file_data['title'] ?? '',
       'filename' => urldecode($entity->getFilename()),
       'url' => $source_url,
-      'link' => file_create_url($source_url),
+      'link' => \Drupal::service('file_url_generator')->generateAbsoluteString($source_url),
       'alt' => $file_data['alt_text'] ?? '',
       'author' => $entity->getOwnerId(),
       'description' => '',
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/gutenberg/src/DataProvider/BaseDataProvider.php:97

    ---------- begin diff ----------
@@ @@
     foreach ($styles as $style) {
       /** @var \Drupal\image\Entity\ImageStyle $style */
       $sizes[$style->getName()] = [
-        'source_url' => file_url_transform_relative($style->buildUrl($uri)),
+        'source_url' => \Drupal::service('file_url_generator')->transformRelative($style->buildUrl($uri)),
       ];
     }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


5) modules/contrib/gutenberg/gutenberg.module:74

    ---------- begin diff ----------
@@ @@
     $template_hooks = drupal_find_theme_templates(
       $templates,
       '.html.twig',
-      drupal_get_path('module', $module) . '/templates'
+      \Drupal::service('extension.list.module')->getPath($module) . '/templates'
     );

     foreach ($definition['dynamic-blocks'] as $block_name => $block_theme_definition) {
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


 [OK] 5 files have been changed by Rector                                       

