diff --git a/modules/purge_processor_lateruntime/src/EventSubscriber/LateRuntimeProcessor.php b/modules/purge_processor_lateruntime/src/EventSubscriber/LateRuntimeProcessor.php
index d9af426..927ae59 100644
--- a/modules/purge_processor_lateruntime/src/EventSubscriber/LateRuntimeProcessor.php
+++ b/modules/purge_processor_lateruntime/src/EventSubscriber/LateRuntimeProcessor.php
@@ -73,10 +73,10 @@ class LateRuntimeProcessor implements EventSubscriberInterface, ContainerAwareIn
   /**
    * Invoked by the TERMINATE kernel event.
    *
-   * @param \Symfony\Component\HttpKernel\Event\PostResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\TerminateEvent $event
    *   The event object.
    */
-  public function onKernelTerminate(PostResponseEvent $event) {
+  public function onKernelTerminate(\Symfony\Component\HttpKernel\Event\TerminateEvent $event) {
 
     // Immediately stop if our plugin is disabled.
     if (!$this->initialize()) {
diff --git a/modules/purge_queuer_coretags/tests/src/Unit/CacheTagsQueuerTest.php b/modules/purge_queuer_coretags/tests/src/Unit/CacheTagsQueuerTest.php
index 9170aef..bcef847 100644
--- a/modules/purge_queuer_coretags/tests/src/Unit/CacheTagsQueuerTest.php
+++ b/modules/purge_queuer_coretags/tests/src/Unit/CacheTagsQueuerTest.php
@@ -30,7 +30,7 @@ class CacheTagsQueuerTest extends UnitTestCase {
   /**
    * The mocked config factory.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Drupal\Core\Config\ConfigFactoryInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\Core\Config\ConfigFactoryInterface
    */
   protected $configFactory;
 
@@ -44,21 +44,21 @@ class CacheTagsQueuerTest extends UnitTestCase {
   /**
    * The mocked queue service.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Drupal\purge\Plugin\Purge\Queue\QueueServiceInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\purge\Plugin\Purge\Queue\QueueServiceInterface
    */
   protected $purgeQueue;
 
   /**
    * The mocked queuers service.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Drupal\purge\Plugin\Purge\Queuers\QueuersServiceInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\purge\Plugin\Purge\Queuers\QueuersServiceInterface
    */
   protected $purgeQueuers;
 
   /**
    * The mocked invalidations factory.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Drupal\purge\Plugin\Purge\Invalidation\InvalidationsServiceInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\purge\Plugin\Purge\Invalidation\InvalidationsServiceInterface
    */
   protected $purgeInvalidationFactory;
 
@@ -109,7 +109,7 @@ class CacheTagsQueuerTest extends UnitTestCase {
       ->expects($this->once())
       ->method('get')
       ->with('coretags')
-      ->willReturn($this->getMockBuilder(QueuerBase::class)->disableOriginalConstructor()->getMock()
+      ->willReturn($this->createMock(QueuerBase::class)
     );
     // Assert how InvalidationsServiceInterface::get() is called.
     $invs_added_total = array_sum(array_map(
diff --git a/modules/purge_ui/tests/src/Functional/DashboardPurgersTest.php b/modules/purge_ui/tests/src/Functional/DashboardPurgersTest.php
index 8c472f6..61f4523 100644
--- a/modules/purge_ui/tests/src/Functional/DashboardPurgersTest.php
+++ b/modules/purge_ui/tests/src/Functional/DashboardPurgersTest.php
@@ -47,7 +47,7 @@ class DashboardPurgersTest extends DashboardTestBase {
     $this->assertSession()->linkByHrefExists(Url::fromRoute('purge_ui.purger_config_dialog_form', $purger_1_route_params)->toString());
     $this->assertSession()->linkByHrefExists(Url::fromRoute('purge_ui.purger_delete_form', $purger_1_route_params)->toString());
     // Assert that the purger-type supportability matrix shows the checkmarks.
-    $expected_checkmark_image_url = file_url_transform_relative(file_create_url('core/misc/icons/73b355/check.svg'));
+    $expected_checkmark_image_url = \Drupal::service('file_url_generator')->generateString('core/misc/icons/73b355/check.svg');
     $this->assertFalse(empty($this->cssSelect('img[width=18][height=18][alt=Supported][title=Supported][src="' . $expected_checkmark_image_url . '"]')));
     $this->assertSession()->responseNotContains('<img supports="drupal-domain"');
     $this->assertSession()->responseNotContains('<img supports="drupal-path"');
diff --git a/modules/purge_ui/tests/src/Functional/Form/Config/PluginConfigFormTestBase.php b/modules/purge_ui/tests/src/Functional/Form/Config/PluginConfigFormTestBase.php
index 84a5816..e49aa0d 100644
--- a/modules/purge_ui/tests/src/Functional/Form/Config/PluginConfigFormTestBase.php
+++ b/modules/purge_ui/tests/src/Functional/Form/Config/PluginConfigFormTestBase.php
@@ -97,6 +97,7 @@ abstract class PluginConfigFormTestBase extends AjaxFormTestBase {
 
   /**
    * Tests save button presence/absence.
+   * @doesNotPerformAssertions
    */
   public function testSaveConfigurationSubmit(): void {
     throw new \LogicException("Implementation of testSaveConfigurationSubmit mandatory!");
diff --git a/src/EventSubscriber/CacheableResponseSubscriber.php b/src/EventSubscriber/CacheableResponseSubscriber.php
index 12c85f7..53d3677 100644
--- a/src/EventSubscriber/CacheableResponseSubscriber.php
+++ b/src/EventSubscriber/CacheableResponseSubscriber.php
@@ -41,10 +41,10 @@ class CacheableResponseSubscriber implements EventSubscriberInterface {
   /**
    * Add cache tags headers on cacheable responses.
    *
-   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   * @param \Symfony\Component\HttpKernel\Event\ResponseEvent $event
    *   The event to process.
    */
-  public function onRespond(FilterResponseEvent $event) {
+  public function onRespond(\Symfony\Component\HttpKernel\Event\ResponseEvent $event) {
     if (!$event->isMasterRequest()) {
       return;
     }
diff --git a/tests/src/Unit/FixGetConfigFactoryStubTrait.php b/tests/src/Unit/FixGetConfigFactoryStubTrait.php
index 4569813..415fd1a 100644
--- a/tests/src/Unit/FixGetConfigFactoryStubTrait.php
+++ b/tests/src/Unit/FixGetConfigFactoryStubTrait.php
@@ -30,17 +30,13 @@ trait FixGetConfigFactoryStubTrait {
       // Also allow to pass in no argument.
       $map[] = ['', $config_values];
 
-      $immutable_config_object = $this->getMockBuilder('Drupal\Core\Config\ImmutableConfig')
-        ->disableOriginalConstructor()
-        ->getMock();
+      $immutable_config_object = $this->createMock('Drupal\Core\Config\ImmutableConfig');
       $immutable_config_object->expects($this->any())
         ->method('get')
         ->will($this->returnValueMap($map));
       $config_get_map[] = [$config_name, $immutable_config_object];
 
-      $mutable_config_object = $this->getMockBuilder('Drupal\Core\Config\Config')
-        ->disableOriginalConstructor()
-        ->getMock();
+      $mutable_config_object = $this->createMock('Drupal\Core\Config\Config');
       $mutable_config_object->expects($this->any())
         ->method('get')
         ->will($this->returnValueMap($map));
diff --git a/tests/src/Unit/Logger/LoggerChannelPartFactoryTest.php b/tests/src/Unit/Logger/LoggerChannelPartFactoryTest.php
index f3c786a..75c210a 100644
--- a/tests/src/Unit/Logger/LoggerChannelPartFactoryTest.php
+++ b/tests/src/Unit/Logger/LoggerChannelPartFactoryTest.php
@@ -22,7 +22,7 @@ class LoggerChannelPartFactoryTest extends UnitTestCase {
   /**
    * The mocked logger channel.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Psr\Log\LoggerInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Psr\Log\LoggerInterface
    */
   protected $loggerChannelPurge;
 
diff --git a/tests/src/Unit/Logger/LoggerChannelPartTest.php b/tests/src/Unit/Logger/LoggerChannelPartTest.php
index 76f77b6..f4fe927 100644
--- a/tests/src/Unit/Logger/LoggerChannelPartTest.php
+++ b/tests/src/Unit/Logger/LoggerChannelPartTest.php
@@ -16,7 +16,7 @@ class LoggerChannelPartTest extends UnitTestCase {
   /**
    * The mocked logger channel.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Psr\Log\LoggerInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Psr\Log\LoggerInterface
    */
   protected $loggerChannelPurge;
 
@@ -91,6 +91,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::emergency
    *
    * @dataProvider providerTestEmergency()
+   * @doesNotPerformAssertions
    */
   public function testEmergency($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'emergency');
@@ -110,6 +111,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::alert
    *
    * @dataProvider providerTestAlert()
+   * @doesNotPerformAssertions
    */
   public function testAlert($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'alert');
@@ -129,6 +131,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::critical
    *
    * @dataProvider providerTestCritical()
+   * @doesNotPerformAssertions
    */
   public function testCritical($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'critical');
@@ -148,6 +151,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::error
    *
    * @dataProvider providerTestError()
+   * @doesNotPerformAssertions
    */
   public function testError($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'error');
@@ -167,6 +171,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::warning
    *
    * @dataProvider providerTestWarning()
+   * @doesNotPerformAssertions
    */
   public function testWarning($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'warning');
@@ -186,6 +191,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::notice
    *
    * @dataProvider providerTestNotice()
+   * @doesNotPerformAssertions
    */
   public function testNotice($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'notice');
@@ -205,6 +211,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::info
    *
    * @dataProvider providerTestInfo()
+   * @doesNotPerformAssertions
    */
   public function testInfo($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'info');
@@ -224,6 +231,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::debug
    *
    * @dataProvider providerTestDebug()
+   * @doesNotPerformAssertions
    */
   public function testDebug($id, array $grants, $output): void {
     $this->helperForSeverityMethods($id, $grants, $output, 'debug');
@@ -243,6 +251,7 @@ class LoggerChannelPartTest extends UnitTestCase {
    * @covers ::log
    *
    * @dataProvider providerTestLog()
+   * @doesNotPerformAssertions
    */
   public function testLog($id, $level, $message, $output): void {
     $this->loggerChannelPurge
diff --git a/tests/src/Unit/Logger/LoggerServiceTest.php b/tests/src/Unit/Logger/LoggerServiceTest.php
index 8a88ebe..1d942c9 100644
--- a/tests/src/Unit/Logger/LoggerServiceTest.php
+++ b/tests/src/Unit/Logger/LoggerServiceTest.php
@@ -40,7 +40,7 @@ class LoggerServiceTest extends UnitTestCase {
   /**
    * The mocked channel part factory.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Drupal\purge\Logger\LoggerChannelPartFactoryInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\purge\Logger\LoggerChannelPartFactoryInterface
    */
   protected $loggerChannelPartFactory;
 
diff --git a/tests/src/Unit/Logger/PurgeLoggerAwareTraitTest.php b/tests/src/Unit/Logger/PurgeLoggerAwareTraitTest.php
index 7db8287..dd26683 100644
--- a/tests/src/Unit/Logger/PurgeLoggerAwareTraitTest.php
+++ b/tests/src/Unit/Logger/PurgeLoggerAwareTraitTest.php
@@ -14,7 +14,7 @@ class PurgeLoggerAwareTraitTest extends UnitTestCase {
   /**
    * The mocked logger.
    *
-   * @var \PHPUnit_Framework_MockObject_MockObject|\Psr\Log\LoggerInterface
+   * @var \PHPUnit\Framework\MockObject\MockObject|\Psr\Log\LoggerInterface
    */
   protected $logger;
 
