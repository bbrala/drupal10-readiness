diff --git a/composer.json b/composer.json
index 2afefbc..3a33773 100644
--- a/composer.json
+++ b/composer.json
@@ -15,7 +15,7 @@
         "sort-packages": true
     },
     "require": {
-        "drupal/core": "^9",
-        "onelogin/php-saml": "^3.4"
+        "onelogin/php-saml": "^3.4",
+        "drupal/core": "^9.1 || ^10"
     }
 }
diff --git a/saml.info.yml b/saml.info.yml
index 45ea00b..3f966bf 100644
--- a/saml.info.yml
+++ b/saml.info.yml
@@ -1,7 +1,7 @@
 name: SAML 2.0 Authentication
 description: SAML authentication integration.
 type: module
-core_version_requirement: ^9
+core_version_requirement: ^9.1 || ^10
 package: Authentication
 
 dependencies:
diff --git a/src/Event/SamlFindAccountEvent.php b/src/Event/SamlFindAccountEvent.php
index 1f919da..3910d36 100644
--- a/src/Event/SamlFindAccountEvent.php
+++ b/src/Event/SamlFindAccountEvent.php
@@ -8,7 +8,7 @@ use Drupal\saml\Entity\IdentityProviderInterface;
 use Drupal\user\UserInterface;
 use Symfony\Component\EventDispatcher\Event;
 
-class SamlFindAccountEvent extends Event {
+class SamlFindAccountEvent extends \Symfony\Contracts\EventDispatcher\Event {
 
   public const NAME = 'saml.find_account';
 
diff --git a/src/Event/SamlLoginEvent.php b/src/Event/SamlLoginEvent.php
index 67f4723..df9b222 100644
--- a/src/Event/SamlLoginEvent.php
+++ b/src/Event/SamlLoginEvent.php
@@ -8,7 +8,7 @@ use Drupal\saml\Entity\IdentityProviderInterface;
 use Drupal\user\UserInterface;
 use Symfony\Component\EventDispatcher\Event;
 
-class SamlLoginEvent extends Event {
+class SamlLoginEvent extends \Symfony\Contracts\EventDispatcher\Event {
 
   public const NAME = 'saml.login';
 
diff --git a/src/Event/SamlSettingsEvent.php b/src/Event/SamlSettingsEvent.php
index 85856c1..7fba05b 100644
--- a/src/Event/SamlSettingsEvent.php
+++ b/src/Event/SamlSettingsEvent.php
@@ -7,7 +7,7 @@ namespace Drupal\saml\Event;
 use Drupal\saml\Config\SamlSettingsInterface;
 use Symfony\Component\EventDispatcher\Event;
 
-class SamlSettingsEvent extends Event {
+class SamlSettingsEvent extends \Symfony\Contracts\EventDispatcher\Event {
 
   public const NAME = 'saml.settings';
 
diff --git a/src/User/SamlUserManager.php b/src/User/SamlUserManager.php
index b01b25e..80276a9 100644
--- a/src/User/SamlUserManager.php
+++ b/src/User/SamlUserManager.php
@@ -44,7 +44,7 @@ class SamlUserManager implements SamlUserManagerInterface {
       if (empty($accounts)) {
         $account = $storage->create([
           'name' => $username,
-          'password' => user_password(32),
+          'password' => \Drupal::service('password_generator')->generate(32),
           'status' => 1,
         ]);
       }
