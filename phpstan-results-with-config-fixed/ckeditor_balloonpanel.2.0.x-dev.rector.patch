diff --git a/ckeditor_balloonpanel.info.yml b/ckeditor_balloonpanel.info.yml
index 92e08b2..13623ab 100644
--- a/ckeditor_balloonpanel.info.yml
+++ b/ckeditor_balloonpanel.info.yml
@@ -2,7 +2,6 @@ name: CKEditor Balloon Panel
 type: module
 description: "Adds the Balloon Panel plugin to CKEditor."
 package: CKEditor
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:ckeditor
diff --git a/src/Plugin/CKEditorPlugin/BalloonPanelPlugin.php b/src/Plugin/CKEditorPlugin/BalloonPanelPlugin.php
index fd73e97..c487f40 100644
--- a/src/Plugin/CKEditorPlugin/BalloonPanelPlugin.php
+++ b/src/Plugin/CKEditorPlugin/BalloonPanelPlugin.php
@@ -77,7 +77,7 @@ class BalloonPanelPlugin extends CKEditorPluginBase {
     // profile, installation profiles may want to place libraries into a
     // 'libraries' directory.
     if ($profile = \Drupal::installProfile()) {
-      $profile_path = drupal_get_path('profile', $profile);
+      $profile_path = \Drupal::service('extension.list.profile')->getPath($profile);
       $searchdir[] = "$profile_path/libraries";
       $searchdir[] = "$profile_path/libraries/ckeditor/plugins";
     };
