modules/contrib/geofield_map/geofield_map.api.php
modules/contrib/geofield_map/geofield_map.install
modules/contrib/geofield_map/geofield_map.module
modules/contrib/geofield_map/geofield_map.post_update.php
modules/contrib/geofield_map/modules/geofield_map_extras/geofield_map_extras.module
modules/contrib/geofield_map/modules/geofield_map_extras/src/Plugin/Field/FieldFormatter/GeofieldGoogleEmbedMapFormatter.php
modules/contrib/geofield_map/modules/geofield_map_extras/src/Plugin/Field/FieldFormatter/GeofieldGoogleStaticMapFormatter.php
modules/contrib/geofield_map/src/Annotation/LeafletTileLayerPlugin.php
modules/contrib/geofield_map/src/Annotation/MapThemer.php
modules/contrib/geofield_map/src/Controller/GeofieldMapAjaxPopupController.php
modules/contrib/geofield_map/src/Element/GeofieldMap.php
modules/contrib/geofield_map/src/Form/GeofieldMapSettingsForm.php
modules/contrib/geofield_map/src/GeofieldMapFieldTrait.php
modules/contrib/geofield_map/src/GeofieldMapFormElementsValidationTrait.php
modules/contrib/geofield_map/src/LeafletTileLayerPluginBase.php
modules/contrib/geofield_map/src/LeafletTileLayerPluginManager.php
modules/contrib/geofield_map/src/MapThemerBase.php
modules/contrib/geofield_map/src/MapThemerInterface.php
modules/contrib/geofield_map/src/MapThemerPluginManager.php
modules/contrib/geofield_map/src/Plugin/Block/GeofieldMapLegend.php
modules/contrib/geofield_map/src/Plugin/Field/FieldFormatter/GeofieldGoogleMapFormatter.php
modules/contrib/geofield_map/src/Plugin/Field/FieldWidget/GeofieldMapWidget.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/CustomIconThemer.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/EntityTypeThemer.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/EntityTypeThemerUrl.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/ListFieldThemer.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/ListFieldThemerUrl.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/TaxonomyTermThemer.php
modules/contrib/geofield_map/src/Plugin/GeofieldMapThemer/TaxonomyTermThemerUrl.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/EsriWorldStreetMap.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/EsriWorldTopoMap.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/HyddaBase.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/HyddaFull.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/OpenMapSurferRoads.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/OpenStreetMapMapnik.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/OpenTopoMap.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/StamenTerrain.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/StamenToner.php
modules/contrib/geofield_map/src/Plugin/LeafletTileLayerPlugin/StamenWatercolor.php
modules/contrib/geofield_map/src/Plugin/views/style/GeofieldGoogleMapViewStyle.php
modules/contrib/geofield_map/src/Services/GeocoderService.php
modules/contrib/geofield_map/src/Services/GoogleMapsService.php
modules/contrib/geofield_map/src/Services/MarkerIconService.php

3 files with changes
====================

1) modules/contrib/geofield_map/src/Services/MarkerIconService.php:126

    ---------- begin diff ----------
@@ @@
    * Set Geofield Map Default Icon Style.
    */
   protected function setDefaultIconStyle() {
-    $image_style_path = drupal_get_path('module', 'geofield_map') . '/config/optional/image.style.geofield_map_default_icon_style.yml';
+    $image_style_path = \Drupal::service('extension.list.module')->getPath('geofield_map') . '/config/optional/image.style.geofield_map_default_icon_style.yml';
     $image_style_data = Yaml::parse(file_get_contents($image_style_path));
     $geofield_map_default_icon_style = $this->config->getEditable('image.style.geofield_map_default_icon_style');
     if ($geofield_map_default_icon_style instanceof Config) {
@@ @@
   public function getLegendIconFromFileUri($file_uri, $icon_width = NULL) {
     $icon_element = [
       '#theme' => 'image',
-      '#uri' => file_create_url($file_uri),
+      '#uri' => \Drupal::service('file_url_generator')->generateAbsoluteString($file_uri),
       '#attributes' => [
         'width' => $icon_width,
       ],
@@ @@
           $url = ImageStyle::load($image_style)->buildUrl($uri);
         }
         else {
-          $url = file_create_url($uri);
+          $url = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
         return $url;
       }
@@ @@
    */
   public function getFileSelectedUrl($file_uri = NULL) {
     if (isset($file_uri)) {
-      $url = file_create_url($file_uri);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($file_uri);
       return $url;
     }
     return NULL;
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


2) modules/contrib/geofield_map/modules/geofield_map_extras/geofield_map_extras.module:18

    ---------- begin diff ----------
@@ @@
       $output .= '<h3>' . t('Geofield Map Extras Help') . '</h3>';
       $output .= '<p>' . t('Additional features to the main Geofield Map module.') . '</p>';
       $output .= '<p>' . t('For more info: @readme', [
-        '@readme' => Link::fromTextAndUrl(t('Readme.md'), Url::fromUri('base:/' . drupal_get_path('module', 'geofield_map_extras') . '/README.md', ['attributes' => ['target' => '_blank']]))->toString(),
+        '@readme' => Link::fromTextAndUrl(t('Readme.md'), Url::fromUri('base:/' . \Drupal::service('extension.list.module')->getPath('geofield_map_extras') . '/README.md', ['attributes' => ['target' => '_blank']]))->toString(),
       ]) . '</p>';
   }
   return $output;
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


3) modules/contrib/geofield_map/geofield_map.module:21

    ---------- begin diff ----------
@@ @@
       $output .= '<h3>' . t('Geofield Map Help') . '</h3>';
       $output .= '<p>' . t('Map Widget, Formatter and Views integration for Geofields.') . '</p>';
       $output .= '<p>' . t('For more info: @readme', [
-        '@readme' => Link::fromTextAndUrl(t('Readme.md'), Url::fromUri('base:/' . drupal_get_path('module', 'geofield_map') . '/README.md', ['attributes' => ['target' => '_blank']]))->toString(),
+        '@readme' => Link::fromTextAndUrl(t('Readme.md'), Url::fromUri('base:/' . \Drupal::service('extension.list.module')->getPath('geofield_map') . '/README.md', ['attributes' => ['target' => '_blank']]))->toString(),
       ]) . '</p>';
   }
   return $output;
@@ @@
       '#theme' => 'image',
       '#width' => $image_preview_width,
       '#height' => $image_preview_height,
-      '#uri' => file_create_url($element['#value']),
+      '#uri' => \Drupal::service('file_url_generator')->generateAbsoluteString($element['#value']),
     ];
     $variables['data'] = [];
     foreach (Element::children($element) as $child) {
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileCreateUrlRector
 * ArgumentRemoverRector


 [OK] 3 files have been changed by Rector                                       

