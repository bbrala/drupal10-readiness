modules/contrib/mailsystem/mailsystem.module
modules/contrib/mailsystem/src/Adapter.php
modules/contrib/mailsystem/src/Form/AdminForm.php
modules/contrib/mailsystem/src/MailsystemManager.php
modules/contrib/mailsystem/src/MailsystemServiceProvider.php
modules/contrib/mailsystem/tests/modules/mailsystem_test/mailsystem_test.module
modules/contrib/mailsystem/tests/modules/mailsystem_test/src/Controller/MailsystemTestController.php
modules/contrib/mailsystem/tests/modules/mailsystem_test/src/Plugin/Mail/Dummy.php
modules/contrib/mailsystem/tests/modules/mailsystem_test/src/Plugin/Mail/DummyFormatter.php
modules/contrib/mailsystem/tests/modules/mailsystem_test/src/Plugin/Mail/DummySender.php
modules/contrib/mailsystem/tests/src/Functional/AdminFormSettingsTest.php
modules/contrib/mailsystem/tests/src/Functional/MailsystemTestThemeTest.php
modules/contrib/mailsystem/tests/src/Unit/AdapterTest.php

3 files with changes
====================

1) modules/contrib/mailsystem/tests/src/Unit/AdapterTest.php:36

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     $this->formatter = new Test();
     $this->sender = new Test();
     $this->adapter = new Adapter($this->formatter, $this->sender);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/mailsystem/tests/src/Functional/MailsystemTestThemeTest.php:38

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->config = $this->config('mailsystem.settings');
   }
@@ @@
     $mails = $this->getMails();

     // Check the configuration and if the correct theme was used in mails.
-    $this->assertEqual($this->config->get('theme'), 'current');
+    $this->assertEquals($this->config->get('theme'), 'current');
     $this->assertTrue(strpos($mails[0]['body'], 'Anonymous (not verified)') !== FALSE);

     // Install the test theme and set it as the mail theme.
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/mailsystem/tests/src/Functional/AdminFormSettingsTest.php:27

    ---------- begin diff ----------
@@ @@
     $assert_session = $this->assertSession();
     // Unauthorized user should not have access.
     $this->drupalGet('admin/config/system/mailsystem');
-    $this->assertResponse(403);
+    $this->assertSession()->statusCodeEquals(403);

     // Check the overview.
     $user = $this->createUser(['administer_mailsystem']);
@@ @@
     $assert_session->optionExists('edit-custom-custom-module', 'User');

     // Configure the default Mail System.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'mailsystem[default_formatter]' => 'test_mail_collector',
       'mailsystem[default_sender]' => 'test_mail_collector',
       'mailsystem[default_theme]' => 'current',
@@ @@
     ], 'Save configuration');

     // Configure a specific module configuration.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_module_key]' => 'aaa',
       'custom[custom_formatter]' => 'test_mail_collector',
@@ @@

     // Add additional custom module settings, one with test_mail_collector and
     // one with php_mail.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_module_key]' => 'bbb',
       'custom[custom_formatter]' => 'test_mail_collector',
@@ @@
     $this->drupalGet('admin/config/system/mailsystem');
     $assert_session->pageTextContains('bbb');

-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_module_key]' => 'ccc',
       'custom[custom_formatter]' => 'php_mail',
@@ @@
     $assert_session->pageTextContains('ccc');

     // Add a custom module settings, without specifying any key.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_formatter]' => 'test_mail_collector',
       'custom[custom_sender]' => 'test_mail_collector',
@@ @@

     // Try to add a custom module, first without setting the module, then
     // without formatter nor sender, then just specifying a key.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module_key]' => 'ddd',
       'custom[custom_formatter]' => 'test_mail_collector',
       'custom[custom_sender]' => 'test_mail_collector',
@@ @@
     $assert_session->pageTextContains('The module is required.');
     $this->drupalGet('admin/config/system/mailsystem');

-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_module_key]' => 'ddd',
     ], 'Add');
@@ @@
     $assert_session->pageTextContains('At least a formatter or sender is required.');
     $this->drupalGet('admin/config/system/mailsystem');

-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module_key]' => 'ddd',
     ], 'Add');
     $assert_session->pageTextNotContains('ddd');
@@ @@
     $this->assertNull($config->get('modules.system.ddd'));

     // Try to update the formatter of the module keyed as 'ccc' from the form.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module_key]' => 'ccc',
       'custom[custom_formatter]' => 'test_mail_collector',
     ], 'Add');
@@ @@
     $this->drupalGet('admin/config/system/mailsystem');

     // Try to update 'modules.system.ccc' formatter and sender from the form.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_module_key]' => 'ccc',
       'custom[custom_formatter]' => 'test_mail_collector',
@@ @@

     // Try to add a custom module with the same settings of an existing one,
     // without formatter and sender.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[custom_module]' => 'system',
       'custom[custom_module_key]' => 'ccc',
     ], 'Add');
@@ @@
     $this->drupalGet('admin/config/system/mailsystem');

     // Edit the second and third custom module formatter from the table.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[modules][system.bbb][formatter]' => 'php_mail',
       'custom[modules][system.ccc][formatter]' => 'test_mail_collector',
     ], 'Save configuration');
@@ @@
     $this->assertEquals($config->get('modules.system.none.formatter'), 'test_mail_collector');

     // Remove the first custom module.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'custom[modules][system.aaa][remove]' => TRUE,
     ], 'Save configuration');
     $config->clear('modules.system.aaa')->save();
    ----------- end diff -----------

Applied rules:
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 3 files have been changed by Rector                                       

