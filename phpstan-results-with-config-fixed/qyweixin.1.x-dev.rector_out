modules/contrib/qyweixin/qyweixin.install
modules/contrib/qyweixin/qyweixin.module
modules/contrib/qyweixin/src/AgentBase.php
modules/contrib/qyweixin/src/AgentInterface.php
modules/contrib/qyweixin/src/Annotation/QyWeixinAgent.php
modules/contrib/qyweixin/src/Controller/QyWeixinController.php
modules/contrib/qyweixin/src/CorpBase.php
modules/contrib/qyweixin/src/Form/SettingsForm.php
modules/contrib/qyweixin/src/MessageBase.php
modules/contrib/qyweixin/src/MessageInterface.php
modules/contrib/qyweixin/src/Plugin/Mail/QyWeixinMail.php
modules/contrib/qyweixin/src/Plugin/QueueWorker/RemoveDepartmentFromUser.php
modules/contrib/qyweixin/src/QyWeixinAgentManager.php
modules/contrib/qyweixin/src/Routing/AgentsRoutes.php
modules/contrib/qyweixin/src/lib/WXBizMsgCrypt.php
modules/contrib/qyweixin/src/lib/errorCode.php
modules/contrib/qyweixin/src/lib/pkcs7Encoder.php
modules/contrib/qyweixin/src/lib/sha1.php
modules/contrib/qyweixin/src/lib/xmlparse.php

1 file with changes
===================

1) modules/contrib/qyweixin/src/CorpBase.php:892

    ---------- begin diff ----------
@@ @@
 			$parsed_url = parse_url($url);
 			if (!isset($destination)) {
 				$header=explode('"',$response->getHeader('Content-disposition'));
-				$path = file_build_uri(\Drupal\Core\File\FileSystem::basename($header[1]));
+				$path = \Drupal::service('stream_wrapper_manager')->normalizeUri(\Drupal::config('system.file')->get('default_scheme') . ('://' . \Drupal\Core\File\FileSystem::basename($header[1])));
 			}
 			else {
 				if (is_dir(\Drupal\Core\File\FileSystem::realpath($destination))) {
@@ @@
 					$path = $destination;
 				}
 			}
-			$file = $managed ? file_save_data($data, $path, $replace) : \Drupal\Core\File\FileSystemInterface::saveData($data, $path, $replace);
+			$file = $managed ? \Drupal::service('file.repository')->writeData($data, $path, $replace) : \Drupal\Core\File\FileSystemInterface::saveData($data, $path, $replace);
 		} catch (\Exception $e) {
 			throw new \Exception($e->getMessage(), $e->getCode());
 		} finally {
    ----------- end diff -----------

Applied rules:
 * FileBuildUriRector
 * FileSaveDataRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


 [ERROR] Could not process "modules/contrib/qyweixin/src/AgentInterface.php" file,
         due to:                                                                
         "Analyze error: "Class Drupal\qyweixin\PluginInspectionInterface not   
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process "modules/contrib/qyweixin/src/AgentBase.php" file, due
         to:                                                                    
         "Analyze error: "Class Drupal\qyweixin\PluginInspectionInterface not   
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

