diff --git a/modules/cacheflush_advanced/tests/src/Functional/CacheFlushAdvancedTest.php b/modules/cacheflush_advanced/tests/src/Functional/CacheFlushAdvancedTest.php
index d4e9d40..b532c99 100644
--- a/modules/cacheflush_advanced/tests/src/Functional/CacheFlushAdvancedTest.php
+++ b/modules/cacheflush_advanced/tests/src/Functional/CacheFlushAdvancedTest.php
@@ -33,7 +33,7 @@ class CacheFlushAdvancedTest extends BrowserTestBase {
   /**
    * Sets up the test.
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $roles = [
@@ -54,38 +54,38 @@ class CacheFlushAdvancedTest extends BrowserTestBase {
   private function interfaceErrorrs() {
     // Check interface has all fields.
     $this->drupalGet('admin/structure/cacheflush/add');
-    $this->assertRaw(t('Custom (advanced)'));
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][0][cid]');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][0][table]');
-    $this->assertFieldByName('advanced_remove_0');
-    $this->assertFieldByName('advance_add');
+    $this->assertSession()->responseContains(t('Custom (advanced)'));
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][0][cid]');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][0][table]');
+    $this->assertSession()->fieldExists('advanced_remove_0');
+    $this->assertSession()->fieldExists('advance_add');
 
     // Test NO error generate if nothing completet on the advanced form.
-    $this->drupalPostForm(NULL, [], t('Save'));
-    $this->assertNoRaw(t('Cache ID is required!'));
-    $this->assertNoRaw(t('Service is required!'));
+    $this->submitForm([], t('Save'));
+    $this->assertSession()->responseNotContains(t('Cache ID is required!'));
+    $this->assertSession()->responseNotContains(t('Service is required!'));
 
     // Test if CID sett and service not, is generating error.
-    $this->drupalPostForm(NULL, ['vertical_tabs_advance[cacheflush_advanced_table][0][cid]' => 'Test 1'], t('Save'));
-    $this->assertNoRaw(t('Cache ID is required!'));
-    $this->assertRaw(t('Service is required'));
+    $this->submitForm(['vertical_tabs_advance[cacheflush_advanced_table][0][cid]' => 'Test 1'], t('Save'));
+    $this->assertSession()->responseNotContains(t('Cache ID is required!'));
+    $this->assertSession()->responseContains(t('Service is required'));
 
     // Test if CID not and service sett, is generating error.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'vertical_tabs_advance[cacheflush_advanced_table][0][cid]' => '',
       'vertical_tabs_advance[cacheflush_advanced_table][0][table]' => 'menu',
     ], t('Save'));
-    $this->assertRaw(t('Cache ID is required!'));
-    $this->assertNoRaw(t('Service is required'));
+    $this->assertSession()->responseContains(t('Cache ID is required!'));
+    $this->assertSession()->responseNotContains(t('Service is required'));
 
     // Test NO error on advanced / save fail because no title sett.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'vertical_tabs_advance[cacheflush_advanced_table][0][cid]' => 'TEST',
       'vertical_tabs_advance[cacheflush_advanced_table][0][table]' => 'menu',
     ], t('Save'));
-    $this->assertNoRaw(t('Cache ID is required!'));
-    $this->assertNoRaw(t('Service is required'));
-    $this->assertRaw(t('Title field is required.'));
+    $this->assertSession()->responseNotContains(t('Cache ID is required!'));
+    $this->assertSession()->responseNotContains(t('Service is required'));
+    $this->assertSession()->responseContains(t('Title field is required.'));
   }
 
   /**
@@ -95,51 +95,51 @@ class CacheFlushAdvancedTest extends BrowserTestBase {
     $this->drupalGet('admin/structure/cacheflush/add');
 
     $this->drupalPostAjaxForm(NULL, [], 'advance_add');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][1][cid]');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][1][table]');
-    $this->assertFieldByName('advanced_remove_1');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][1][cid]');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][1][table]');
+    $this->assertSession()->fieldExists('advanced_remove_1');
 
     $this->drupalPostAjaxForm(NULL, [], 'advance_add');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][2][cid]');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][2][table]');
-    $this->assertFieldByName('advanced_remove_2');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][2][cid]');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][2][table]');
+    $this->assertSession()->fieldExists('advanced_remove_2');
 
     $this->drupalPostAjaxForm(NULL, [], 'advance_add');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][3][cid]');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][3][table]');
-    $this->assertFieldByName('advanced_remove_3');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][3][cid]');
+    $this->assertSession()->fieldExists('vertical_tabs_advance[cacheflush_advanced_table][3][table]');
+    $this->assertSession()->fieldExists('advanced_remove_3');
 
     $this->drupalPostAjaxForm(NULL, [], 'advanced_remove_1');
-    $this->assertFieldByName('advanced_remove_0');
-    $this->assertNoFieldByName('advanced_remove_1');
-    $this->assertFieldByName('advanced_remove_2');
+    $this->assertSession()->fieldExists('advanced_remove_0');
+    $this->assertSession()->fieldValueNotEquals('advanced_remove_1', '');
+    $this->assertSession()->fieldExists('advanced_remove_2');
 
     $this->drupalPostAjaxForm(NULL, ['title' => 'Test 1'], 'advanced_remove_0');
-    $this->assertNoFieldByName('advanced_remove_0');
-    $this->assertNoFieldByName('advanced_remove_1');
-    $this->assertFieldByName('advanced_remove_2');
+    $this->assertSession()->fieldValueNotEquals('advanced_remove_0', '');
+    $this->assertSession()->fieldValueNotEquals('advanced_remove_1', '');
+    $this->assertSession()->fieldExists('advanced_remove_2');
 
     $this->drupalPostAjaxForm(NULL, ['title' => 'Test 1'], 'advanced_remove_2');
-    $this->assertNoFieldByName('advanced_remove_0');
-    $this->assertNoFieldByName('advanced_remove_1');
-    $this->assertNoFieldByName('advanced_remove_2');
+    $this->assertSession()->fieldValueNotEquals('advanced_remove_0', '');
+    $this->assertSession()->fieldValueNotEquals('advanced_remove_1', '');
+    $this->assertSession()->fieldValueNotEquals('advanced_remove_2', '');
 
     $this->drupalPostAjaxForm(NULL, [], 'advance_add');
-    $this->assertFieldByName('advanced_remove_4');
+    $this->assertSession()->fieldExists('advanced_remove_4');
 
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'title' => 'Test 1',
       'vertical_tabs_advance[cacheflush_advanced_table][4][cid]' => 'TEST',
       'vertical_tabs_advance[cacheflush_advanced_table][4][table]' => 'menu',
     ], t('Save'));
 
     $entities = array_values(cacheflush_load_multiple_by_properties(['title' => 'Test 1']));
-    $this->assertEqual($entities[0]->getTitle(), 'Test 1', 'Entity successfully created.');
+    $this->assertEquals($entities[0]->getTitle(), 'Test 1', 'Entity successfully created.');
 
     // Check if entity create on interface.
     $this->drupalGet('cacheflush/' . $entities[0]->id() . '/edit');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][4][cid]', 'TEST');
-    $this->assertFieldByName('vertical_tabs_advance[cacheflush_advanced_table][4][table]', 'menu');
+    $this->assertSession()->fieldValueEquals('vertical_tabs_advance[cacheflush_advanced_table][4][cid]', 'TEST');
+    $this->assertSession()->fieldValueEquals('vertical_tabs_advance[cacheflush_advanced_table][4][table]', 'menu');
   }
 
 }
diff --git a/modules/cacheflush_cron/cacheflush_cron.module b/modules/cacheflush_cron/cacheflush_cron.module
index 3cff024..700a5db 100644
--- a/modules/cacheflush_cron/cacheflush_cron.module
+++ b/modules/cacheflush_cron/cacheflush_cron.module
@@ -56,7 +56,7 @@ function _cacheflush_cron_entity_form(&$form, FormStateInterface $form_state, $o
       ], ['attributes' => ['target' => '_blank']]);
       $url->setText('Edit');
       $renderable = $url->toRenderable();
-      $link = render($renderable);
+      $link = \Drupal::service('renderer')->render($renderable);
     }
   }
 
