diff --git a/includes/webform.theme.template.inc b/includes/webform.theme.template.inc
index 9759452ee..fc7fc9e06 100644
--- a/includes/webform.theme.template.inc
+++ b/includes/webform.theme.template.inc
@@ -938,7 +938,7 @@ function template_preprocess_webform_element_managed_file(array &$variables) {
   if (!empty($variables['file'])) {
     /** @var \Drupal\file\FileInterface $file */
     $file = $variables['file'];
-    $variables['uri'] = file_create_url($file->getFileUri());
+    $variables['uri'] = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
     $variables['extension'] = strtolower(pathinfo($variables['uri'], PATHINFO_EXTENSION));
     $variables['type'] = \Drupal::service('file.mime_type.guesser')->guess($variables['uri']);
     $variables['file_link'] = [
@@ -1003,7 +1003,7 @@ function template_preprocess_webform_element_image_file(array &$variables) {
     $format = $variables['format'];
 
     $uri = $file->getFileUri();
-    $url = Url::fromUri(file_create_url($uri));
+    $url = \Drupal::service('file_url_generator')->generate($uri);
 
     $extension = pathinfo($uri, PATHINFO_EXTENSION);
     $is_image = in_array($extension, ['gif', 'png', 'jpg', 'jpeg']);
diff --git a/modules/webform_access/tests/src/Functional/WebformAccessBrowserTestBase.php b/modules/webform_access/tests/src/Functional/WebformAccessBrowserTestBase.php
index 57d227fab..72342c462 100644
--- a/modules/webform_access/tests/src/Functional/WebformAccessBrowserTestBase.php
+++ b/modules/webform_access/tests/src/Functional/WebformAccessBrowserTestBase.php
@@ -49,7 +49,7 @@ abstract class WebformAccessBrowserTestBase extends WebformNodeBrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create webform nodes.
diff --git a/modules/webform_access/tests/src/Functional/WebformAccessSubmissionViewsTest.php b/modules/webform_access/tests/src/Functional/WebformAccessSubmissionViewsTest.php
index d1166f3c8..51b10d6ca 100644
--- a/modules/webform_access/tests/src/Functional/WebformAccessSubmissionViewsTest.php
+++ b/modules/webform_access/tests/src/Functional/WebformAccessSubmissionViewsTest.php
@@ -22,6 +22,7 @@ class WebformAccessSubmissionViewsTest extends WebformAccessBrowserTestBase {
 
   /**
    * Tests webform access submission views.
+   * @doesNotPerformAssertions
    */
   public function testWebformAccessSubmissionViewsTest() {
     // Create a test submission for each node and user account.
diff --git a/modules/webform_attachment/src/Element/WebformAttachmentBase.php b/modules/webform_attachment/src/Element/WebformAttachmentBase.php
index 220c45c70..41e7297ab 100644
--- a/modules/webform_attachment/src/Element/WebformAttachmentBase.php
+++ b/modules/webform_attachment/src/Element/WebformAttachmentBase.php
@@ -111,7 +111,7 @@ abstract class WebformAttachmentBase extends RenderElement implements WebformAtt
    * {@inheritdoc}
    */
   public static function getFileMimeType(array $element, WebformSubmissionInterface $webform_submission) {
-    /** @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface $file_mime_type_guesser */
+    /** @var \Symfony\Component\Mime\MimeTypesInterface $file_mime_type_guesser */
     $file_mime_type_guesser = \Drupal::service('file.mime_type.guesser');
     $file_name = static::getFileName($element, $webform_submission);
     return $file_mime_type_guesser->guess($file_name);
diff --git a/modules/webform_attachment/src/Element/WebformAttachmentUrl.php b/modules/webform_attachment/src/Element/WebformAttachmentUrl.php
index 2cdd89bb0..3417a975a 100644
--- a/modules/webform_attachment/src/Element/WebformAttachmentUrl.php
+++ b/modules/webform_attachment/src/Element/WebformAttachmentUrl.php
@@ -32,7 +32,7 @@ class WebformAttachmentUrl extends WebformAttachmentBase {
       $token_manager = \Drupal::service('webform.token_manager');
       $url = $token_manager->replace($url, $webform_submission);
       // Url can be a URI.
-      $url = file_create_url($url) ?: $url;
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($url) ?: $url;
       // Prepend scheme and host to root relative path.
       if (strpos($url, '/') === 0) {
         $url = \Drupal::request()->getSchemeAndHttpHost() . $url;
diff --git a/modules/webform_attachment/tests/src/Functional/WebformAttachmentTest.php b/modules/webform_attachment/tests/src/Functional/WebformAttachmentTest.php
index 1f13407d3..6cb54cd6b 100644
--- a/modules/webform_attachment/tests/src/Functional/WebformAttachmentTest.php
+++ b/modules/webform_attachment/tests/src/Functional/WebformAttachmentTest.php
@@ -250,12 +250,12 @@ class WebformAttachmentTest extends WebformBrowserTestBase {
     // Check that attachment is enabled.
     $this->postSubmission($webform_attachment_states, ['attach' => TRUE]);
     $sent_email = $this->getLastEmail();
-    $this->assert(isset($sent_email['params']['attachments'][0]), 'Attachment enabled via #states');
+    $this->assertTrue(isset($sent_email['params']['attachments'][0]), 'Attachment enabled via #states');
 
     // Check that attachment is disabled.
     $this->postSubmission($webform_attachment_states, ['attach' => FALSE]);
     $sent_email = $this->getLastEmail();
-    $this->assert(!isset($sent_email['params']['attachments'][0]), 'Attachment disabled via #states');
+    $this->assertTrue(!isset($sent_email['params']['attachments'][0]), 'Attachment disabled via #states');
   }
 
 }
