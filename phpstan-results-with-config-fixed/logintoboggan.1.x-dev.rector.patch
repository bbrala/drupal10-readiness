diff --git a/logintoboggan.module b/logintoboggan.module
index 4b3e738..1a0e6bd 100644
--- a/logintoboggan.module
+++ b/logintoboggan.module
@@ -244,7 +244,7 @@ function logintoboggan_js_alter(&$javascript) {
     // when the auth user's checkboxes are checked.
     $auth_role = User::AUTHENTICATED_ROLE;
     if ($trusted_role != $auth_role) {
-      $javascript['modules/user/user.permissions.js']['data'] = drupal_get_path('module', 'logintoboggan') . '/js/logintoboggan.permissions.js';
+      $javascript['modules/user/user.permissions.js']['data'] = \Drupal::service('extension.list.module')->getPath('logintoboggan') . '/js/logintoboggan.permissions.js';
     }
   }
 }
diff --git a/src/Form/LogintobogganRegister.php b/src/Form/LogintobogganRegister.php
index e43ef50..ad1ef57 100644
--- a/src/Form/LogintobogganRegister.php
+++ b/src/Form/LogintobogganRegister.php
@@ -96,7 +96,7 @@ class LogintobogganRegister extends RegisterForm {
       $pass = $form_state->getValue('pass');
     }
     else {
-      $pass = user_password();
+      $pass = \Drupal::service('password_generator')->generate();
     }
 
     // Remove unneeded values.
