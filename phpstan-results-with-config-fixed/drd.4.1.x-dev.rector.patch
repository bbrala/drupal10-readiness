diff --git a/drd.install b/drd.install
index fe6c7f7..5c1e75c 100644
--- a/drd.install
+++ b/drd.install
@@ -66,7 +66,7 @@ function drd_update_8001() {
  * Update view definitions.
  */
 function drd_update_8002() {
-  $config_path = drupal_get_path('module', 'drd') . '/config/optional/views.view.drd_';
+  $config_path = \Drupal::service('extension.list.module')->getPath('drd') . '/config/optional/views.view.drd_';
   foreach (['domains_per_project', 'project', 'releases_per_domain'] as $view) {
     $data = Yaml::decode(file_get_contents($config_path . $view . '.yml'));
     Drupal::configFactory()
diff --git a/src/DomainLocalCopy.php b/src/DomainLocalCopy.php
index f7d183f..6bd51ef 100644
--- a/src/DomainLocalCopy.php
+++ b/src/DomainLocalCopy.php
@@ -235,7 +235,7 @@ class DomainLocalCopy {
 
     $this->mkdir($this->settingsDir);
 
-    $templatefilename = drupal_get_path('module', 'drd') . '/templates/DomainLocalCopy.v' . $this->coreVersion . '.settings.php.twig';
+    $templatefilename = \Drupal::service('extension.list.module')->getPath('drd') . '/templates/DomainLocalCopy.v' . $this->coreVersion . '.settings.php.twig';
 
     $twig_loader = new Twig_Loader_Array([]);
     $twig = new Twig_Environment($twig_loader);
diff --git a/src/Entity/Domain.php b/src/Entity/Domain.php
index fa05a46..56b80a2 100644
--- a/src/Entity/Domain.php
+++ b/src/Entity/Domain.php
@@ -839,11 +839,11 @@ class Domain extends ContentEntityBase implements DomainInterface {
       $crypt = 'OpenSSL';
       $crypt_setting = ['cipher' => 'aes-128-cbc'];
     }
-    $crypt_setting['password'] = user_password(50);
+    $crypt_setting['password'] = \Drupal::service('password_generator')->generate(50);
     $this->set('auth', 'shared_secret');
     $this->set('crypt', $crypt);
     $this
-      ->setAuthSetting(['shared_secret' => ['secret' => user_password(50)]])
+      ->setAuthSetting(['shared_secret' => ['secret' => \Drupal::service('password_generator')->generate(50)]])
       ->setCryptSetting([$crypt => $crypt_setting]);
   }
 
