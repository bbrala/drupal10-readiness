diff --git a/outline.module b/outline.module
index d4470f6..1eae175 100755
--- a/outline.module
+++ b/outline.module
@@ -104,7 +104,7 @@ function outline_theme() {
  *   A $page element suitable for use by drupal_render().
  */
 function outline_entry_view(Entry $entry, $view_mode = 'full', $langcode = NULL) {
-  return entity_view($entry, $view_mode, $langcode);
+  return \Drupal::entityTypeManager()->getViewBuilder($entry->getEntityTypeId())->view($entry, $view_mode, $langcode);
 }
 
 /**
diff --git a/outline.theme.inc b/outline.theme.inc
index 1a553ec..94cec4a 100755
--- a/outline.theme.inc
+++ b/outline.theme.inc
@@ -24,7 +24,7 @@ use Drupal\Component\Utility\Html;
 //  $variables['attributes']['class'][] = 'outline';
 //
 //}
-  
+
   //kint($outline_tree);
   //$variables['attributes']['class'][] = Html::getClass('outline-' . $outline->bundle());
 //   if (!$outline->isPublished()) {
diff --git a/src/Plugin/Field/FieldFormatter/EntityReferenceOutlineEntryRssFormatter.php b/src/Plugin/Field/FieldFormatter/EntityReferenceOutlineEntryRssFormatter.php
index cbaf4f7..3c90f73 100755
--- a/src/Plugin/Field/FieldFormatter/EntityReferenceOutlineEntryRssFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/EntityReferenceOutlineEntryRssFormatter.php
@@ -32,7 +32,7 @@ class EntityReferenceOutlineEntryRssFormatter extends EntityReferenceFormatterBa
         'key' => 'category',
         'value' => $entity->label(),
         'attributes' => array(
-          'domain' => $entity->id() ? \Drupal::url('entity.outline_entry.canonical', ['outline_entry' => $entity->id()], array('absolute' => TRUE)) : '',
+          'domain' => $entity->id() ? \Drupal\Core\Url::fromRoute('entity.outline_entry.canonical', ['outline_entry' => $entity->id()], array('absolute' => TRUE))->toString() : '',
         ),
       );
     }
diff --git a/tests/src/Functional/EntryAutocompleteTest.php b/tests/src/Functional/EntryAutocompleteTest.php
index 4062e7b..cd40dda 100644
--- a/tests/src/Functional/EntryAutocompleteTest.php
+++ b/tests/src/Functional/EntryAutocompleteTest.php
@@ -228,7 +228,7 @@ class EntryAutocompleteTest extends OutlineTestBase {
       ['query' => ['q' => 'bbb']]
     );
 
-    $this->assertIdentical($expected, $data);
+    $this->assertSame($expected, $data);
   }
 
 }
