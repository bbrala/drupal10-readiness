diff --git a/captcha.module b/captcha.module
index 199b132..63a0b39 100755
--- a/captcha.module
+++ b/captcha.module
@@ -94,7 +94,7 @@ function captcha_point_load($id) {
  * Implements hook_theme().
  */
 function captcha_theme() {
-  $path = Drupal::hasService('extension.list.module') ? Drupal::service('extension.list.module')->getPath('captcha') : drupal_get_path('module', 'captcha');
+  $path = Drupal::hasService('extension.list.module') ? Drupal::service('extension.list.module')->getPath('captcha') : \Drupal::service('extension.list.module')->getPath('captcha');
   return [
     'captcha' => [
       'render element' => 'element',
diff --git a/image_captcha/image_captcha.install b/image_captcha/image_captcha.install
index 0d68996..2824550 100755
--- a/image_captcha/image_captcha.install
+++ b/image_captcha/image_captcha.install
@@ -37,7 +37,7 @@ function image_captcha_requirements($phase) {
 function image_captcha_install() {
   $config = \Drupal::configFactory()->getEditable('image_captcha.settings');
   // @phpstan-ignore-next-line
-  $module_path = Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : drupal_get_path('module', 'image_captcha');
+  $module_path = Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : \Drupal::service('extension.list.module')->getPath('image_captcha');
   $config->set('image_captcha_fonts', [
     hash('sha256', $module_path . '/fonts/Tesox/tesox.ttf'),
     hash('sha256', $module_path . '/fonts/Tuffy/Tuffy.ttf'),
diff --git a/image_captcha/image_captcha.module b/image_captcha/image_captcha.module
index c7a69de..b58615a 100755
--- a/image_captcha/image_captcha.module
+++ b/image_captcha/image_captcha.module
@@ -85,7 +85,7 @@ function _image_captcha_get_available_fonts_from_directories($directories = NULL
     $request = \Drupal::service('request_stack')->getCurrentRequest();
     $directories = [
       // @phpstan-ignore-next-line
-      (Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : drupal_get_path('module', 'image_captcha')) . '/fonts',
+      (Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : \Drupal::service('extension.list.module')->getPath('image_captcha')) . '/fonts',
       'sites/all/libraries/fonts',
       DrupalKernel::findSitePath($request) . '/libraries/fonts',
     ];
diff --git a/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php b/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
index 406ad50..acb075a 100644
--- a/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
+++ b/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
@@ -44,7 +44,7 @@ class MigrateCaptchaPointsTest extends MigrateDrupal7TestBase {
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
       // @phpstan-ignore-next-line
-      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : drupal_get_path('module', 'captcha'),
+      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : \Drupal::service('extension.list.module')->getPath('captcha'),
       'tests',
       'fixtures',
       'drupal7.php',
diff --git a/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php b/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
index ddc3e0b..dc0cc1d 100644
--- a/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
+++ b/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
@@ -44,7 +44,7 @@ class MigrateCaptchaSimpleConfigurationTest extends MigrateDrupal7TestBase {
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
       // @phpstan-ignore-next-line
-      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : drupal_get_path('module', 'captcha'),
+      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : \Drupal::service('extension.list.module')->getPath('captcha'),
       'tests',
       'fixtures',
       'drupal7.php',
diff --git a/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php b/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
index 56be207..7c77e55 100644
--- a/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
+++ b/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
@@ -18,6 +18,7 @@ use Symfony\Component\DependencyInjection\ContainerInterface;
  */
 class CaptchaPointListBuilderTest extends UnitTestCase {
 
+  use \Prophecy\PhpUnit\ProphecyTrait;
   /**
    * Set up.
    */
