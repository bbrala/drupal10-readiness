diff --git a/bootstrap4.theme b/bootstrap4.theme
index ce8876e..b65e10a 100644
--- a/bootstrap4.theme
+++ b/bootstrap4.theme
@@ -311,12 +311,12 @@ function bootstrap4_form_system_theme_settings_subtheme_submit($form, FormStateI
       $fs->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
 
       $files = $fs->scanDirectory(
-        drupal_get_path('theme', 'bootstrap4') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR, '/.*/');
+        \Drupal::service('extension.list.theme')->getPath('bootstrap4') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR, '/.*/');
       foreach ($files as $file) {
         //dump($file);
         $fileName = $file->filename;
         $fs->copy(
-          drupal_get_path('theme', 'bootstrap4') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR . $fileName,
+          \Drupal::service('extension.list.theme')->getPath('bootstrap4') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR . $fileName,
           $themePath . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR . $fileName, TRUE);
       }
     }
@@ -328,7 +328,7 @@ function bootstrap4_form_system_theme_settings_subtheme_submit($form, FormStateI
       'screenshot.png',
     ];
     foreach ($files as $fileName) {
-      $fs->copy(drupal_get_path('theme', 'bootstrap4') . DIRECTORY_SEPARATOR . $fileName,
+      $fs->copy(\Drupal::service('extension.list.theme')->getPath('bootstrap4') . DIRECTORY_SEPARATOR . $fileName,
         $themePath . DIRECTORY_SEPARATOR . $fileName, TRUE);
     }
 
@@ -368,7 +368,7 @@ function bootstrap4_form_system_theme_settings_subtheme_submit($form, FormStateI
     ];
     foreach ($files as $fileName => $lines) {
       // Get file content.
-      $content = str_replace('bootstrap4', $themeMName, file_get_contents(drupal_get_path('theme', 'bootstrap4') . DIRECTORY_SEPARATOR . $fileName));
+      $content = str_replace('bootstrap4', $themeMName, file_get_contents(\Drupal::service('extension.list.theme')->getPath('bootstrap4') . DIRECTORY_SEPARATOR . $fileName));
       if (is_array($lines)) {
         $content = implode(PHP_EOL, $lines);
       }
@@ -377,7 +377,7 @@ function bootstrap4_form_system_theme_settings_subtheme_submit($form, FormStateI
     }
 
     // Info yml file generation.
-    $infoYml = Yaml::decode(file_get_contents(drupal_get_path('theme', 'bootstrap4') . DIRECTORY_SEPARATOR . 'bootstrap4.info.yml'));
+    $infoYml = Yaml::decode(file_get_contents(\Drupal::service('extension.list.theme')->getPath('bootstrap4') . DIRECTORY_SEPARATOR . 'bootstrap4.info.yml'));
     $infoYml['name'] = $themeName;
     $infoYml['description'] = $themeName . ' subtheme based on Bootstrap 4 theme.';
     $infoYml['base theme'] = 'bootstrap4';
@@ -397,7 +397,7 @@ function bootstrap4_form_system_theme_settings_subtheme_submit($form, FormStateI
 
     // SCSS files generation.
     $scssPath = $themePath . DIRECTORY_SEPARATOR . 'scss';
-    $b5ScssPath = drupal_get_path('theme', 'bootstrap4') . DIRECTORY_SEPARATOR . 'scss' . DIRECTORY_SEPARATOR;
+    $b5ScssPath = \Drupal::service('extension.list.theme')->getPath('bootstrap4') . DIRECTORY_SEPARATOR . 'scss' . DIRECTORY_SEPARATOR;
     $fs->prepareDirectory($scssPath, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
     $files = [
       'style.scss' => [
@@ -411,7 +411,7 @@ function bootstrap4_form_system_theme_settings_subtheme_submit($form, FormStateI
         "// Include bootstrap.",
         "@import '" .
         str_repeat('../', count(explode(DIRECTORY_SEPARATOR, $subthemePathValue)) + 2) .
-        drupal_get_path('theme', 'bootstrap4') . "/scss/style';",
+        \Drupal::service('extension.list.theme')->getPath('bootstrap4') . "/scss/style';",
         '',
       ],
       '_variables_theme.scss' => $b5ScssPath . '_variables_theme.scss',
