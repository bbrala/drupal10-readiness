diff --git a/bootstrap5.theme b/bootstrap5.theme
index 8140211c..f047ac3b 100644
--- a/bootstrap5.theme
+++ b/bootstrap5.theme
@@ -287,12 +287,12 @@ function bootstrap5_form_system_theme_settings_subtheme_submit($form, FormStateI
       $fs->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
 
       $files = $fs->scanDirectory(
-        drupal_get_path('theme', 'bootstrap5') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR, '/.*/');
+        \Drupal::service('extension.list.theme')->getPath('bootstrap5') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR, '/.*/');
       foreach ($files as $file) {
         //dump($file);
         $fileName = $file->filename;
         $fs->copy(
-          drupal_get_path('theme', 'bootstrap5') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR . $fileName,
+          \Drupal::service('extension.list.theme')->getPath('bootstrap5') . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR . $fileName,
           $themePath . DIRECTORY_SEPARATOR . $subforder . DIRECTORY_SEPARATOR . $fileName, TRUE);
       }
     }
@@ -304,7 +304,7 @@ function bootstrap5_form_system_theme_settings_subtheme_submit($form, FormStateI
       'screenshot.png',
     ];
     foreach ($files as $fileName) {
-      $fs->copy(drupal_get_path('theme', 'bootstrap5') . DIRECTORY_SEPARATOR . $fileName,
+      $fs->copy(\Drupal::service('extension.list.theme')->getPath('bootstrap5') . DIRECTORY_SEPARATOR . $fileName,
         $themePath . DIRECTORY_SEPARATOR . $fileName, TRUE);
     }
 
@@ -344,7 +344,7 @@ function bootstrap5_form_system_theme_settings_subtheme_submit($form, FormStateI
     ];
     foreach ($files as $fileName => $lines) {
       // Get file content.
-      $content = str_replace('bootstrap4', $themeMName, file_get_contents(drupal_get_path('theme', 'bootstrap5') . DIRECTORY_SEPARATOR . $fileName));
+      $content = str_replace('bootstrap4', $themeMName, file_get_contents(\Drupal::service('extension.list.theme')->getPath('bootstrap5') . DIRECTORY_SEPARATOR . $fileName));
       if (is_array($lines)) {
         $content = implode(PHP_EOL, $lines);
       }
@@ -353,7 +353,7 @@ function bootstrap5_form_system_theme_settings_subtheme_submit($form, FormStateI
     }
 
     // Info yml file generation.
-    $infoYml = Yaml::decode(file_get_contents(drupal_get_path('theme', 'bootstrap5') . DIRECTORY_SEPARATOR . 'bootstrap5.info.yml'));
+    $infoYml = Yaml::decode(file_get_contents(\Drupal::service('extension.list.theme')->getPath('bootstrap5') . DIRECTORY_SEPARATOR . 'bootstrap5.info.yml'));
     $infoYml['name'] = $themeName;
     $infoYml['description'] = $themeName . ' subtheme based on Bootstrap 5 theme.';
     $infoYml['base theme'] = 'bootstrap5';
@@ -373,7 +373,7 @@ function bootstrap5_form_system_theme_settings_subtheme_submit($form, FormStateI
 
     // SCSS files generation.
     $scssPath = $themePath . DIRECTORY_SEPARATOR . 'scss';
-    $b5ScssPath = drupal_get_path('theme', 'bootstrap5') . DIRECTORY_SEPARATOR . 'scss' . DIRECTORY_SEPARATOR;
+    $b5ScssPath = \Drupal::service('extension.list.theme')->getPath('bootstrap5') . DIRECTORY_SEPARATOR . 'scss' . DIRECTORY_SEPARATOR;
     $fs->prepareDirectory($scssPath, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
     $files = [
       'style.scss' => [
@@ -387,7 +387,7 @@ function bootstrap5_form_system_theme_settings_subtheme_submit($form, FormStateI
         "// Include bootstrap.",
         "@import '" .
         str_repeat('../', count(explode(DIRECTORY_SEPARATOR, $subthemePathValue)) + 2) .
-        drupal_get_path('theme', 'bootstrap5') . "/scss/style';",
+        \Drupal::service('extension.list.theme')->getPath('bootstrap5') . "/scss/style';",
         '',
       ],
       '_variables_theme.scss' => $b5ScssPath . '_variables_theme.scss',
