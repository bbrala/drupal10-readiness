diff --git a/email_registration.module b/email_registration.module
index 3a99b68..489878e 100644
--- a/email_registration.module
+++ b/email_registration.module
@@ -135,7 +135,7 @@ function email_registration_form_user_form_alter(&$form, FormStateInterface $for
     /** @var \Drupal\Core\Entity\EntityFormInterface $form_object */
     $form_object = $form_state->getFormObject();
     if ($form_object->getEntity()->isNew()) {
-      $form['account']['name']['#value'] = 'email_registration_' . user_password();
+      $form['account']['name']['#value'] = 'email_registration_' . \Drupal::service('password_generator')->generate();
     }
   }
   $form['account']['mail']['#title'] = t('Email');
