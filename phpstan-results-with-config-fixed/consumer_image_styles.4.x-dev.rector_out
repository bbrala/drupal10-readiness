modules/contrib/consumer_image_styles/consumer_image_styles.module
modules/contrib/consumer_image_styles/src/ConsumerImageStylesServiceProvider.php
modules/contrib/consumer_image_styles/src/ImageStylesProvider.php
modules/contrib/consumer_image_styles/src/ImageStylesProviderInterface.php
modules/contrib/consumer_image_styles/src/Normalizer/LinkCollectionNormalizer.php
modules/contrib/consumer_image_styles/src/Plugin/jsonapi/FieldEnhancer/ImageStyles.php
modules/contrib/consumer_image_styles/tests/src/Functional/ConsumerImageSylesFunctionalTest.php

2 files with changes
====================

1) modules/contrib/consumer_image_styles/src/Normalizer/LinkCollectionNormalizer.php:117

    ---------- begin diff ----------
@@ @@
       $image_style->transformDimensions($dimensions, $uri);
       $variant_link = new Link(
         CacheableMetadata::createFromObject($image_style),
-        Url::fromUri(file_create_url($image_style->buildUrl($uri))),
+        \Drupal::service('file_url_generator')->generate($image_style->buildUrl($uri)),
         ImageStylesProvider::DERIVATIVE_LINK_REL,
         // Target attributes can only be strings, but dimensions are links.
         array_map(function (?int $dimension): string {
    ----------- end diff -----------

Applied rules:
 * FromUriRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


2) modules/contrib/consumer_image_styles/src/ImageStylesProvider.php:102

    ---------- begin diff ----------
@@ @@
     }
     $cacheable_metadata->addCacheableDependency($image_style);
     $info = [
-      'href' => file_create_url($image_style->buildUrl($uri)),
+      'href' => \Drupal::service('file_url_generator')->generateAbsoluteString($image_style->buildUrl($uri)),
       'title' => $this->t('Image Style: @name', ['@name' => $image_style->label()]),
       'meta' => ['rel' => static::DERIVATIVE_LINK_REL],
       // This is json:api 1.1 compatible.
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


 [OK] 2 files have been changed by Rector                                       

