diff --git a/openid_claveunica.info.yml b/openid_claveunica.info.yml
index 2f72f0b..d9de291 100644
--- a/openid_claveunica.info.yml
+++ b/openid_claveunica.info.yml
@@ -2,6 +2,6 @@ name: OpenID ClaveUnica
 type: module
 description: This module helps to integrate the openid "clave Ãºnica" with OpenID Connect.
 package: 'User authentication'
-core_version_requirement: ^8.7.7 || ^9
+core_version_requirement: ^8.7.7 || ^9 || ^10
 dependencies:
   - openid_connect:openid_connect
diff --git a/src/Form/CompleteProfileForm.php b/src/Form/CompleteProfileForm.php
index d6aa7d1..f9b5145 100644
--- a/src/Form/CompleteProfileForm.php
+++ b/src/Form/CompleteProfileForm.php
@@ -119,7 +119,7 @@ class CompleteProfileForm extends FormBase {
     $account = User::load($form_state->getValue('uid'));
     $account->setEmail($form_state->getValue('mail'));
     $account->save();
-    $account->setLastLoginTime(REQUEST_TIME);
+    $account->setLastLoginTime(\Drupal::time()->getRequestTime());
 
     \Drupal::currentUser()->setAccount($account);
 
