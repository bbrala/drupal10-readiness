modules/contrib/aggrid/aggrid.install
modules/contrib/aggrid/src/Plugin/Field/FieldType/AggridFieldType.php
modules/contrib/aggrid/src/AggridAccessController.php
modules/contrib/aggrid/aggrid.module
modules/contrib/aggrid/includes/aggrid.install.update.inc
modules/contrib/aggrid/src/AggridConfigHelpers.php
modules/contrib/aggrid/modules/aggrid_demo/aggrid_demo.install
modules/contrib/aggrid/src/Plugin/Field/FieldWidget/AggridJsonWidgetType.php
modules/contrib/aggrid/src/Plugin/Field/FieldWidget/AggridWidgetType.php
modules/contrib/aggrid/src/Plugin/diff/Field/AggridFieldBuilder.php
modules/contrib/aggrid/src/AggridHtmlRouteProvider.php
modules/contrib/aggrid/src/AggridListBuilder.php
modules/contrib/aggrid/src/AggridSuppression.php
modules/contrib/aggrid/src/Utils/HelperFunctions.php
modules/contrib/aggrid/tests/src/Functional/AggridTableReferenceTest.php
modules/contrib/aggrid/tests/src/Functional/AggridTest.php
modules/contrib/aggrid/src/Commands/AggridDrushCommands.php
modules/contrib/aggrid/src/Entity/Aggrid.php
modules/contrib/aggrid/src/Entity/AggridInterface.php
modules/contrib/aggrid/src/Form/AggridDeleteForm.php
modules/contrib/aggrid/src/Form/AggridForm.php
modules/contrib/aggrid/src/Form/GeneralSettingsForm.php
modules/contrib/aggrid/src/Plugin/Field/FieldFormatter/AggridFormatterType.php
modules/contrib/aggrid/src/Plugin/Field/FieldFormatter/HtmlFormatterType.php

5 files with changes
====================

1) modules/contrib/aggrid/includes/aggrid.install.update.inc:11

    ---------- begin diff ----------
@@ @@
 function aggrid_update_8001()
 {
   
-  $file_path = drupal_get_path('module', 'aggrid') . '/config/install/aggrid.general.yml';
+  $file_path = \Drupal::service('extension.list.module')->getPath('aggrid') . '/config/install/aggrid.general.yml';
   
   $file_contents = file_get_contents($file_path);
   $ymldata = Yaml::parse($file_contents);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


2) modules/contrib/aggrid/tests/src/Functional/AggridTest.php:101

    ---------- begin diff ----------
@@ @@
     $this->clickLink('Add ag-Grid Config Entity');
     $aggrid_label = 'Test AG Table';
     $aggrid_machine_name = 'test_ag_table';
-    $this->drupalPostForm(
-      NULL,
-      [
-        'label' => $aggrid_label,
-        'id' => $aggrid_machine_name,
-        'aggridDefault' => '{}',
-        'addOptions' => '{}',
-      ],
-      'Save'
-    );
+    $this->submitForm([
+      'label' => $aggrid_label,
+      'id' => $aggrid_machine_name,
+      'aggridDefault' => '{}',
+      'addOptions' => '{}',
+    ], 'Save');

     // 4) Verify that our test ag table appears when we edit it.
     $this->drupalGet('/admin/structure/aggrid/' . $aggrid_machine_name .'/edit');
@@ @@
     $this->clickLink('Add ag-Grid Config Entity');
     $aggrid_machine_name = 'test_ag_table';
     $aggrid_label = 'Test AG Table';
-    $this->drupalPostForm(
-      NULL,
-      [
-        'label' => $aggrid_label,
-        'id' => $aggrid_machine_name,
-        'aggridDefault' => '{}',
-        'addOptions' => '{}',
-      ],
-      'Save'
-    );
+    $this->submitForm([
+      'label' => $aggrid_label,
+      'id' => $aggrid_machine_name,
+      'aggridDefault' => '{}',
+      'addOptions' => '{}',
+    ], 'Save');
     $this->drupalGet('/admin/structure/aggrid');
     $assert->pageTextContains($aggrid_label);
     $assert->pageTextContains($aggrid_machine_name);
+    $this->drupalGet(Url::fromRoute('entity.aggrid.add_form'));

     // Try to re-submit the same ag test, and verify that we see an error
     // message and not a PHP error.
-    $this->drupalPostForm(
-      Url::fromRoute('entity.aggrid.add_form'),
-      [
-        'label' => $aggrid_label,
-        'id' => $aggrid_machine_name,
-        'aggridDefault' => '{}',
-        'addOptions' => '{}',
-      ],
-      'Save'
-    );
+    $this->submitForm([
+      'label' => $aggrid_label,
+      'id' => $aggrid_machine_name,
+      'aggridDefault' => '{}',
+      'addOptions' => '{}',
+    ], 'Save');
     $assert->pageTextContains('The machine-readable name is already in use.');

     // 6) Verify that required links are present on respective paths.
     $this->drupalGet(Url::fromRoute('entity.aggrid.collection'));
-    $this->assertLinkByHref('/admin/structure/aggrid/add');
-    $this->assertLinkByHref('/admin/structure/aggrid/test_ag_table/edit');
-    $this->assertLinkByHref('/admin/structure/aggrid/test_ag_table/delete');
+    $this->assertSession()->linkByHrefExists('/admin/structure/aggrid/add');
+    $this->assertSession()->linkByHrefExists('/admin/structure/aggrid/test_ag_table/edit');
+    $this->assertSession()->linkByHrefExists('/admin/structure/aggrid/test_ag_table/delete');

     // Verify links on Add ag-Grid.
     $this->drupalGet('/admin/structure/aggrid/add');
-    $this->assertLinkByHref('/admin/structure/aggrid');
+    $this->assertSession()->linkByHrefExists('/admin/structure/aggrid');

     // Verify links on Edit ag-Grid.
     $this->drupalGet('/admin/structure/aggrid/test_ag_table/edit');
-    $this->assertLinkByHref('/admin/structure/aggrid/test_ag_table/delete');
-    $this->assertLinkByHref('/admin/structure/aggrid');
+    $this->assertSession()->linkByHrefExists('/admin/structure/aggrid/test_ag_table/delete');
+    $this->assertSession()->linkByHrefExists('/admin/structure/aggrid');

     // Verify links on Delete ag-Grid.
     $this->drupalGet('/admin/structure/aggrid/test_ag_table/delete');
    ----------- end diff -----------

Applied rules:
 * AssertLinkByHrefRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/aggrid/tests/src/Functional/AggridTableReferenceTest.php:57

    ---------- begin diff ----------
@@ @@

     // - Under "Reference" select "other".
     // - Choose a label and click continue.
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'new_storage_type' => 'entity_reference',
       'field_name' => 'aggrid',
       'label' => 'ag-Grid',
@@ @@
     $assert->statusCodeEquals(200);

     // - Under configuration select "aggrid".
-    $this->drupalPostForm(NULL, [
+    $this->submitForm([
       'settings[target_type]' => 'aggrid',
     ], 'Save field settings');
     $assert->statusCodeEquals(200);
@@ @@
     $aggrid = Aggrid::loadMultiple();
     /* @var aggrid \Drupal\aggrid\Entity\Aggrid */
     $aggrid = reset($aggrid);
-    $this->drupalPostForm(Url::fromRoute('node.add', ['node_type' => $type->id()]), [
+    $this->drupalGet(Url::fromRoute('node.add', ['node_type' => $type->id()]));
+    $this->submitForm([
       'title[0][value]' => 'title',
       'field_aggrid[0][target_id]' => $aggrid->label(),
     ], 'Save');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/aggrid/src/Plugin/diff/Field/AggridFieldBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\aggrid\Plugin\diff\Field;

+use Drupal\aggrid\Entity\Aggrid;
 use Drupal\aggrid\Entity;
 use Drupal\diff\FieldDiffBuilderBase;
 use Drupal\Core\Field\FieldItemListInterface;
@@ @@
       // Compare text formats.
       $aggridValue = json_decode($values['value']);

-      $aggridEntity = Entity\Aggrid::load($values['aggrid_id']);
+      $aggridEntity = Aggrid::load($values['aggrid_id']);
       $aggridDefault = json_decode($aggridEntity->get('aggridDefault'));

       $columns = [];
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector


5) modules/contrib/aggrid/src/Plugin/Field/FieldFormatter/HtmlFormatterType.php:228

    ---------- begin diff ----------
@@ @@
         
       }
       else {
-        
+
         if ($items[$delta]->value == '' || $items[$delta]->value == '{}') {
           $aggridValue = $aggridDefault['default']->rowData;
         }
@@ @@
         else {
           $aggridValue = json_decode($items[$delta]->value);
         }
-        
+
         $pinnedTopRowData = @$aggridDefault['addOptions']->pinnedTopRowData;
         $pinnedBottomRowData = @$aggridDefault['addOptions']->pinnedBottomRowData;
-        
+
         $aggridRowSettings = $aggridDefault['aggridRowSettings'];

         // Set complimentary suppression variable
@@ @@

         // Close up the headers and start on data rows.
         $table_render .= '</thead><tbody>';
-        
+
         // Pinned Top Row Settings.
         $pinnedTopRowSettings[][][] = "";
         $pinnedTopRowSettings = $aggridConfigHelpers->getRowSettings($aggridRowSettings, $headers, $pinnedTopRowData, 't-');
-        
+
         // Pinned Top Rows.
         $table_render .= $this->createAggridRowData($pinnedTopRowSettings, $columns, $headers, $pinnedTopRowData);

         // (Data) Row Settings.
         $rowSettings = $aggridConfigHelpers->getRowSettings($aggridRowSettings, $headers, $rowData, '');
-        
+
         // Data rows.
         $table_render .= $this->createAggridRowData($rowSettings, $columns, $headers, $rowData);
         // Set the row suppression from after the actual rowData is run
         $rowSuppression = $this->rowSuppression;
-        
+
         // Pinned Bottom Row Settings.
         $pinnedBottomRowSettings = $aggridConfigHelpers->getRowSettings($aggridRowSettings, $headers, $pinnedBottomRowData, 'b-');
-        
+
         // Pinned Bottom Rows.
         $table_render .= $this->createAggridRowData($pinnedBottomRowSettings, $columns, $headers, $pinnedBottomRowData);
-        
+
         // Close up the table.
         $table_render .= '</tbody></table>';
-        
+
         $elements[$delta]['container'] = [
           '#theme' => 'aggrid_table',
           '#title' => $this->fieldDefinition->label(),
@@ @@
             ],
           ],
         ];
-        
+
         /*
          * Putting this code to the side for now. They're currently working on multiple headers
          * for the '#type' => 'table'
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 5 files have been changed by Rector                                       

