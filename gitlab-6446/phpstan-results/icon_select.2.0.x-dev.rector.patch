diff --git a/icon_select.info.yml b/icon_select.info.yml
index 132b401..5ecd560 100644
--- a/icon_select.info.yml
+++ b/icon_select.info.yml
@@ -1,9 +1,8 @@
 name: Icon Select
 type: module
 description: Icon selector field
-core: 8.x
 package: Liip
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:taxonomy
   - drupal:field
diff --git a/icon_select.module b/icon_select.module
index dd7e603..ac5d135 100644
--- a/icon_select.module
+++ b/icon_select.module
@@ -42,7 +42,7 @@ function icon_select_preprocess_page(&$vars) {
 
   if (file_exists($svg_path)) {
     // Add a random string to disable caching of AJAX request.
-    $full_url = file_url_transform_relative(file_create_url(SvgSpriteGenerator::getSpriteDestinationPath()));
+    $full_url = \Drupal::service('file_url_generator')->generateString(SvgSpriteGenerator::getSpriteDestinationPath());
     $url = $full_url . '?hash=' . \Drupal::state()->get('icon_select_hash');
     $vars['#attached']['drupalSettings']['icon_select']['icon_select_url'] = $url;
   }
diff --git a/src/Helper/SvgSpriteGenerator.php b/src/Helper/SvgSpriteGenerator.php
index 48f3f5c..36f1518 100644
--- a/src/Helper/SvgSpriteGenerator.php
+++ b/src/Helper/SvgSpriteGenerator.php
@@ -96,7 +96,7 @@ class SvgSpriteGenerator {
     $destination = SvgSpriteGenerator::getSpriteDestinationPath();
     $dirname = \Drupal::service('file_system')->dirname($destination);
     \Drupal::service('file_system')->prepareDirectory($dirname, FileSystemInterface::CREATE_DIRECTORY);
-    $file = file_save_data($sprite, $destination, FileSystemInterface::EXISTS_REPLACE);
+    $file = \Drupal::service('file.repository')->writeData($sprite, $destination, FileSystemInterface::EXISTS_REPLACE);
 
     if ($file) {
       return $file->getFileUri();
