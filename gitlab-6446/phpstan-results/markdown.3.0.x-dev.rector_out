modules/contrib/markdown/markdown.api.php
modules/contrib/markdown/src/Annotation/InstallablePlugin.php
modules/contrib/markdown/src/Exception/MarkdownException.php
modules/contrib/markdown/src/Plugin/Markdown/AnnotatedPluginBase.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/TaskListExtension.php
modules/contrib/markdown/src/Plugin/Validation/Constraint/Exists.php
modules/contrib/markdown/src/Traits/FilterAwareTrait.php
modules/contrib/markdown/src/Util/ParserAwareInterface.php
modules/contrib/markdown/src/Plugin/Validation/Constraint/ExistsValidator.php
modules/contrib/markdown/src/Util/Semver.php
modules/contrib/markdown/src/Traits/FilterFormatAwareTrait.php
modules/contrib/markdown/src/Exception/MarkdownExceptionInterface.php
modules/contrib/markdown/src/Exception/MarkdownFileNotExistsException.php
modules/contrib/markdown/src/Traits/FormTrait.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/ExtensionInterface.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/RendererInterface.php
modules/contrib/markdown/src/Plugin/Markdown/EnabledPluginInterface.php
modules/contrib/markdown/src/Plugin/Markdown/ExtensibleParserInterface.php
modules/contrib/markdown/src/Exception/MarkdownUnexpectedValueException.php
modules/contrib/markdown/src/Plugin/Markdown/ExtensionInterface.php
modules/contrib/markdown/src/Plugin/Markdown/InstallablePluginBase.php
modules/contrib/markdown/markdown.install
modules/contrib/markdown/src/Exception/MarkdownUrlNotExistsException.php
modules/contrib/markdown/src/Exception/MissingVersionException.php
modules/contrib/markdown/src/Form/OverviewForm.php
modules/contrib/markdown/src/Plugin/Markdown/AnnotatedPluginInterface.php
modules/contrib/markdown/src/Plugin/Validation/Constraint/Installed.php
modules/contrib/markdown/src/Plugin/Markdown/BaseExtensibleParser.php
modules/contrib/markdown/src/Plugin/Validation/Constraint/Version.php
modules/contrib/markdown/src/Plugin/Validation/Constraint/VersionValidator.php
modules/contrib/markdown/src/Annotation/InstallablePluginTrait.php
modules/contrib/markdown/src/Util/SortArray.php
modules/contrib/markdown/src/Traits/HttpClientTrait.php
modules/contrib/markdown/src/Plugin/migrate/process/MarkdownSettingsGenerator.php
modules/contrib/markdown/src/Traits/MarkdownTrait.php
modules/contrib/markdown/src/Traits/MoreInfoTrait.php
modules/contrib/markdown/src/PluginManager/AllowedHtmlManager.php
modules/contrib/markdown/src/Annotation/InstallableRequirement.php
modules/contrib/markdown/markdown.module
modules/contrib/markdown/src/Traits/NormalizeTrait.php
modules/contrib/markdown/src/Plugin/Markdown/BaseExtension.php
modules/contrib/markdown/tests/src/Kernel/MarkdownKernelTestBase.php
modules/contrib/markdown/src/Traits/ParserAllowedHtmlTrait.php
modules/contrib/markdown/src/Traits/ParserAwareTrait.php
modules/contrib/markdown/src/Traits/RendererTrait.php
modules/contrib/markdown/src/Traits/SettingsTrait.php
modules/contrib/markdown/src/Plugin/Markdown/BaseParser.php
modules/contrib/markdown/tests/src/Kernel/Plugin/Markdown/MissingParserTest.php
modules/contrib/markdown/src/Form/ParserConfigurationForm.php
modules/contrib/markdown/src/Twig/Extension.php
modules/contrib/markdown/src/Twig/Node.php
modules/contrib/markdown/markdown.post_update.php
modules/contrib/markdown/src/Plugin/Markdown/InstallablePluginInterface.php
modules/contrib/markdown/src/Twig/TokenParser.php
modules/contrib/markdown/src/Plugin/Markdown/MissingExtension.php
modules/contrib/markdown/src/Annotation/MarkdownAllowedHtml.php
modules/contrib/markdown/src/Plugin/Markdown/MissingParser.php
modules/contrib/markdown/src/Annotation/MarkdownExtension.php
modules/contrib/markdown/src/Annotation/MarkdownParser.php
modules/contrib/markdown/src/Annotation/PeclExtension.php
modules/contrib/markdown/src/Util/Composer.php
modules/contrib/markdown/src/Annotation/AnnotationObject.php
modules/contrib/markdown/src/Plugin/Markdown/Parsedown/Parsedown.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/BaseExtension.php
modules/contrib/markdown/src/BcSupport/BcAliasedInterface.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/CommonMark.php
modules/contrib/markdown/src/BcSupport/ConfigurableInterface.php
modules/contrib/markdown/src/BcSupport/DependentPluginDefinitionInterface.php
modules/contrib/markdown/src/BcSupport/DiscoveryException.php
modules/contrib/markdown/src/PluginManager/EnableAwarePluginManagerInterface.php
modules/contrib/markdown/src/PluginManager/ExtensionCollection.php
modules/contrib/markdown/src/BcSupport/FormStateDecoratorBase.php
modules/contrib/markdown/src/Plugin/Markdown/Parsedown/ParsedownExtra.php
modules/contrib/markdown/src/Plugin/Markdown/ParserInterface.php
modules/contrib/markdown/src/Plugin/Markdown/Pecl/Cmark.php
modules/contrib/markdown/src/Util/Error.php
modules/contrib/markdown/src/Plugin/Markdown/PhpMarkdown/PhpMarkdown.php
modules/contrib/markdown/src/Util/FilterAwareInterface.php
modules/contrib/markdown/src/Util/FilterFormatAwareInterface.php
modules/contrib/markdown/src/Util/FilterHtml.php
modules/contrib/markdown/src/Annotation/ComposerPackage.php
modules/contrib/markdown/src/PluginManager/ExtensionManager.php
modules/contrib/markdown/src/Plugin/Markdown/PhpMarkdown/PhpMarkdownExtra.php
modules/contrib/markdown/src/BcSupport/FormStateValuesTrait.php
modules/contrib/markdown/src/Annotation/Identifier.php
modules/contrib/markdown/src/BcSupport/ObjectWithPluginCollectionInterface.php
modules/contrib/markdown/src/BcSupport/PluginDependencyTrait.php
modules/contrib/markdown/src/PluginManager/ExtensionManagerInterface.php
modules/contrib/markdown/src/PluginManager/InstallablePluginManager.php
modules/contrib/markdown/src/Annotation/InstallableLibrary.php
modules/contrib/markdown/src/BcSupport/SubformState.php
modules/contrib/markdown/src/Plugin/Markdown/PluginBase.php
modules/contrib/markdown/src/Plugin/Markdown/PluginInterface.php
modules/contrib/markdown/src/Plugin/Markdown/RenderStrategyInterface.php
modules/contrib/markdown/src/Plugin/Markdown/SettingsInterface.php
modules/contrib/markdown/src/BcSupport/SubformStateInterface.php
modules/contrib/markdown/src/Commands/MarkdownCommands.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/CommonMarkGfm.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/AttributesExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/AutolinkExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/DisallowedRawHtmlExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/ExternalLinkExtension.php
modules/contrib/markdown/src/Util/KeyValuePipeConverter.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/ExternalLinkRenderer.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/FootnoteExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/HeadingPermalinkExtension.php
modules/contrib/markdown/src/Form/ParserOperationForm.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/MentionExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/SmartPunctuationExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/StrikethroughExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/TableExtension.php
modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/TableOfContentsExtension.php
modules/contrib/markdown/src/Form/SubformState.php
modules/contrib/markdown/src/Config/MarkdownConfig.php
modules/contrib/markdown/src/PluginManager/InstallablePluginManagerInterface.php
modules/contrib/markdown/src/PluginManager/ParserManager.php
modules/contrib/markdown/src/Form/SubformStateInterface.php
modules/contrib/markdown/src/Markdown.php
modules/contrib/markdown/src/Exception/InstallablePluginExceptionInterface.php
modules/contrib/markdown/src/PluginManager/ParserManagerInterface.php
modules/contrib/markdown/src/Render/ParsedMarkdown.php
modules/contrib/markdown/src/MarkdownInterface.php
modules/contrib/markdown/src/ParamConverter/MarkdownParamConverter.php
modules/contrib/markdown/src/Plugin/Filter/FilterMarkdown.php
modules/contrib/markdown/src/Render/ParsedMarkdownInterface.php
modules/contrib/markdown/src/Traits/EnableAwarePluginManagerTrait.php
modules/contrib/markdown/src/Traits/EnabledPluginTrait.php
modules/contrib/markdown/src/Traits/FeatureDetectionTrait.php
modules/contrib/markdown/src/Plugin/Filter/FilterMarkdownInterface.php
modules/contrib/markdown/src/Plugin/Markdown/AllowedHtml/FilterAlign.php
modules/contrib/markdown/src/Plugin/Markdown/AllowedHtml/FilterCaption.php
modules/contrib/markdown/src/Plugin/Markdown/AllowedHtml/MediaEmbed.php
modules/contrib/markdown/src/Plugin/Markdown/AllowedHtmlInterface.php

9 files with changes
====================

1) modules/contrib/markdown/tests/src/Kernel/Plugin/Markdown/MissingParserTest.php:27

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->parser = $this->container->get('plugin.manager.markdown.parser')
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/markdown/tests/src/Kernel/MarkdownKernelTestBase.php:20

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(['filter', 'markdown']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/markdown/src/Plugin/Markdown/Pecl/Cmark.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\markdown\Plugin\Markdown\Pecl;

+use function CommonMark\Parse;
+use function CommonMark\Render\HTML;
 use Drupal\Core\Language\LanguageInterface;
 use Drupal\markdown\Plugin\Markdown\AllowedHtmlInterface;
 use Drupal\markdown\Plugin\Markdown\BaseParser;
@@ @@
     try {
       if (is_string($markdown)) {
         // NOTE: these are functions, not classes.
-        $node = \CommonMark\Parse($markdown);
-        return \CommonMark\Render\HTML($node);
+        $node = Parse($markdown);
+        return HTML($node);
       }
     }
     catch (\Exception $e) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/markdown/src/Traits/HttpClientTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\markdown\Traits;

+use function GuzzleHttp\default_user_agent;
 /**
  * Trait to assist with creating an HTTP client using module info as user-agent.
  *
@@ @@
       $httpClientFactory = \Drupal::service('http_client_factory');
       static::$httpClient = $httpClientFactory->fromOptions([
         'headers' => [
-          'User-Agent' => $extension . ' Drupal/' . \Drupal::VERSION . ' (+https://www.drupal.org/) ' . \GuzzleHttp\default_user_agent(),
+          'User-Agent' => $extension . ' Drupal/' . \Drupal::VERSION . ' (+https://www.drupal.org/) ' . default_user_agent(),
         ],
       ]);
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector


5) modules/contrib/markdown/src/Annotation/InstallableLibrary.php:495

    ---------- begin diff ----------
@@ @@
       // Cache response in the database. The TTL value defaults to one day,
       // but allow it to be overrideable via settings.
       $ttl = Settings::get('installable_library_request_ttl', 86400);
-      $cache->set($cid, $cacheableResponse, REQUEST_TIME + $ttl);
+      $cache->set($cid, $cacheableResponse, \Drupal::time()->getRequestTime() + $ttl);
     }
     catch (GuzzleException $exception) {
       \Drupal::logger('markdown')->warning('%type: @message in %function (line %line of %file).<pre><code>@backtrace_string</code></pre>', Error::decodeException($exception));
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/markdown/markdown.api.php:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\markdown\Plugin\Markdown\PhpMarkdown\PhpMarkdownExtra;
+use Drupal\Component\Utility\Crypt;
 /**
  * @file
  * Hooks and alters provided by the Markdown module.
@@ @@
 function hook_markdown_html_alter(&$html, array $context) {
   // Ignore non PHP Markdown Extra parsers.
   $parser = $context['parser'];
-  if (!($parser instanceof \Drupal\markdown\Plugin\Markdown\PhpMarkdown\PhpMarkdownExtra)) {
+  if (!($parser instanceof PhpMarkdownExtra)) {
     return;
   }

@@ @@
   if ($phpMarkdown->omit_footnotes && $phpMarkdown->footnotes_assembled) {
     // Create a hash based on the contents of the HTML output.
     // This can be used as the lookup identifier to load the footnotes later.
-    $hash = \Drupal\Component\Utility\Crypt::hashBase64($html);
+    $hash = Crypt::hashBase64($html);
     \Drupal::keyValue('my_module.markdown.footnotes')->set($hash, $phpMarkdown->footnotes_assembled);
   }
 }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


7) modules/contrib/markdown/src/Commands/MarkdownCommands.php:131

    ---------- begin diff ----------
@@ @@
    *   The temporary directory path.
    */
   protected function createTempDir() {
-    $tempDir = 'temporary://markdown_' . REQUEST_TIME . Crypt::randomBytesBase64(10);
+    $tempDir = 'temporary://markdown_' . \Drupal::time()->getRequestTime() . Crypt::randomBytesBase64(10);
     if (!is_dir($tempDir) && $this->fileSystem->prepareDirectory($tempDir, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS)) {
       $tempDir = $this->fileSystem->realpath($tempDir);
       static::$tempDirs[] = $tempDir;
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


8) modules/contrib/markdown/src/Plugin/Markdown/CommonMark/Extension/HeadingPermalinkExtension.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\markdown\Plugin\Markdown\CommonMark\Extension;

+use League\CommonMark\Extension\HeadingPermalink\HeadingPermalinkRenderer;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Plugin\PluginFormInterface;
 use Drupal\Core\Theme\ActiveTheme;
@@ @@
     $innerContents = '';
     if (defined('\\League\\CommonMark\\Extension\\HeadingPermalink\\HeadingPermalinkRenderer::DEFAULT_INNER_CONTENTS')) {
       /* @noinspection PhpFullyQualifiedNameUsageInspection */
-      $innerContents = \League\CommonMark\Extension\HeadingPermalink\HeadingPermalinkRenderer::DEFAULT_INNER_CONTENTS; // phpcs:ignore
+      $innerContents = HeadingPermalinkRenderer::DEFAULT_INNER_CONTENTS; // phpcs:ignore
     }

     return [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


9) modules/contrib/markdown/src/Render/ParsedMarkdown.php:107

    ---------- begin diff ----------
@@ @@

     // Handle relative time.
     if (is_string($expire)) {
-      $expire = strtotime($expire, $from_time ?: REQUEST_TIME);
+      $expire = strtotime($expire, $from_time ?: \Drupal::time()->getRequestTime());
     }

     return $expire;
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector


 [ERROR] Could not process "modules/contrib/markdown/src/Twig/Extension.php"    
         file, due to:                                                          
         "System error: "Provided node "Twig_Extension_GlobalsInterface" is not 
         interface, but "class""                                                
         Run Rector with "--debug" option and post the report here:             
         https://github.com/rectorphp/rector/issues/new". On line: 17           

