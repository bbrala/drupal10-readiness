diff --git a/src/Controller/DvfHelpController.php b/src/Controller/DvfHelpController.php
index ffe9a55..2ee972c 100644
--- a/src/Controller/DvfHelpController.php
+++ b/src/Controller/DvfHelpController.php
@@ -21,7 +21,7 @@ class DvfHelpController extends ControllerBase {
    */
   public function helpPage($topic) {
 
-    $dvf_path = drupal_get_path('module', 'dvf');
+    $dvf_path = \Drupal::service('extension.list.module')->getPath('dvf');
     $file_path = $dvf_path . '/templates/help/';
     $css_path = base_path() . $dvf_path . '/css/help.css';
 
diff --git a/src/Plugin/Visualisation/Source/VisualisationSourceBase.php b/src/Plugin/Visualisation/Source/VisualisationSourceBase.php
index 47d6591..0c622e2 100644
--- a/src/Plugin/Visualisation/Source/VisualisationSourceBase.php
+++ b/src/Plugin/Visualisation/Source/VisualisationSourceBase.php
@@ -239,7 +239,7 @@ abstract class VisualisationSourceBase extends PluginBase implements Visualisati
   public function getDownloadUrl() {
     $uri = $this->config('uri');
     return ('dvf_file' === $this->visualisation->getPluginId())
-      ? file_create_url($uri) : $uri;
+      ? \Drupal::service('file_url_generator')->generateAbsoluteString($uri) : $uri;
   }
 
   /**
diff --git a/tests/src/Functional/Traits/DvfFileTrait.php b/tests/src/Functional/Traits/DvfFileTrait.php
index a00b5c5..bb6f4a3 100644
--- a/tests/src/Functional/Traits/DvfFileTrait.php
+++ b/tests/src/Functional/Traits/DvfFileTrait.php
@@ -53,7 +53,7 @@ trait DvfFileTrait {
    *   Full path to directory.
    */
   protected function getDvfSampleDirFullPath() {
-    return \Drupal::root() . '/' . drupal_get_path('module', 'dvf') . $this->dvfSampleDirPath;
+    return \Drupal::root() . '/' . \Drupal::service('extension.list.module')->getPath('dvf') . $this->dvfSampleDirPath;
   }
 
   /**
