diff --git a/wisski.theme b/wisski.theme
index 1dc235f..49760c1 100644
--- a/wisski.theme
+++ b/wisski.theme
@@ -84,7 +84,7 @@ function wisski_locale_translation_projects_alter(&$projects) {
   $projects['wisski'] = array(
     'info' => array(
       'interface translation project' => 'wisski',
-      'interface translation server pattern' => drupal_get_path('theme', 'wisski').'/translations/de.po',
+      'interface translation server pattern' => \Drupal::service('extension.list.theme')->getPath('wisski').'/translations/de.po',
     ),
   );
 }
@@ -103,7 +103,7 @@ function wisski_preprocess_entity_print(&$vars) {
 }
 
 //In this function there will be specific theme settings added
-function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormStateInterface $form_state) {
+function wisski_form_system_theme_settings_alter(&$form, FormStateInterface $form_state) {
 //--------------------- Fieldsets for theme settings
   $form['#attributes']['autocomplete'] = 'off';
  
@@ -188,7 +188,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $fid_custom_css = $form_state->getValue('custom_css');
      if (isset($fid_custom_css[0]) && $fid_custom_css[0] > 0) {
          $custom_css_id = $fid_custom_css[0];
-         $file_custom_css = \Drupal\file\Entity\File::load($custom_css_id);
+         $file_custom_css = File::load($custom_css_id);
          rename($file_custom_css->getFileUri(),"public://wisski-stylesheet/custom.css");
          $file_custom_css->setPermanent();
          $file_custom_css->setFilename('custom.css');
@@ -208,7 +208,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
              $file_id = $file->id();
              if($file_id != $custom_css_id)
                 {
-                $previous_css = \Drupal\file\Entity\File::load($file_id);
+                $previous_css = File::load($file_id);
                 $previous_css->setFilename('old.css');
                 $previous_css->setFileUri('public://wisski-stylesheet/old.css');
                 $previous_css->delete();
@@ -218,7 +218,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
          }
          else
          {
-         $file_custom_css = \Drupal\file\Entity\File::load($fid_custom_css[0]);
+         $file_custom_css = File::load($fid_custom_css[0]);
          rename($file_custom_css->getFileUri(),"public://wisski-stylesheet/custom.css");
          $file_custom_css->setPermanent();
          $file_custom_css->setFilename('custom.css');
@@ -244,7 +244,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $responsive_logo_fid = $form_state->getValue('responsive_logo');
      if (isset($responsive_logo_fid[0]) && $responsive_logo_fid[0] > 0) {
        $responsive_logo_id = $responsive_logo_fid[0];
-       $responsive_logo_file = \Drupal\file\Entity\File::load($responsive_logo_id);
+       $responsive_logo_file = File::load($responsive_logo_id);
        $responsive_logo_file_parts = pathinfo($responsive_logo_file->getFilename());
        $responsive_logo_file_extension = $responsive_logo_file_parts['extension'];
        rename($responsive_logo_file->getFileUri(),"public://responsive-logo/responsive-logo.".$responsive_logo_file_extension);
@@ -269,7 +269,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $responsive_logo_file_logo_id = $responsive_logo_file_logo->id();
               if($responsive_logo_file_logo_id != $responsive_logo_id)
                 {
-                $responsive_logo_previous_logo = \Drupal\file\Entity\File::load($responsive_logo_file_logo_id);
+                $responsive_logo_previous_logo = File::load($responsive_logo_file_logo_id);
                 $responsive_logo_previous_logo_parts = pathinfo($responsive_logo_previous_logo->getFilename());
                 $responsive_logo_previous_logo_extension = $responsive_logo_previous_logo_parts['extension'];
                 $responsive_logo_previous_logo->setFilename('old_logo.'.$responsive_logo_previous_logo_extension);
@@ -305,7 +305,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $fid = $form_state->getValue('banner_image');
      if (isset($fid[0]) && $fid[0] > 0) {
        $banner_id = $fid[0];
-       $file = \Drupal\file\Entity\File::load($banner_id);
+       $file = File::load($banner_id);
        $file_parts = pathinfo($file->getFilename());
        $file_extension = $file_parts['extension'];
        rename($file->getFileUri(),"public://banner-image/banner.".$file_extension);
@@ -330,7 +330,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $file_banner_id = $file_banner->id();
               if($file_banner_id != $banner_id)
                 {
-                $previous_banner = \Drupal\file\Entity\File::load($file_banner_id);
+                $previous_banner = File::load($file_banner_id);
                 $previous_banner_parts = pathinfo($previous_banner->getFilename());
                 $previous_banner_extension = $previous_banner_parts['extension'];
                 $previous_banner->setFilename('old_banner.'.$previous_banner_extension);
@@ -372,7 +372,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $second_banner_fid = $form_state->getValue('second_banner_image');
      if (isset($second_banner_fid[0]) && $second_banner_fid[0] > 0) {
        $second_banner_id = $second_banner_fid[0];
-       $second_banner_file = \Drupal\file\Entity\File::load($second_banner_id);
+       $second_banner_file = File::load($second_banner_id);
        $second_banner_file_parts = pathinfo($second_banner_file->getFilename());
        $second_banner_file_extension = $second_banner_file_parts['extension'];
        rename($second_banner_file->getFileUri(),"public://banner-image/second_banner.".$second_banner_file_extension);
@@ -397,7 +397,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $second_banner_file_banner_id = $second_banner_file_banner->id();
               if($second_banner_file_banner_id != $second_banner_id)
                 {
-                $second_banner_previous_banner = \Drupal\file\Entity\File::load($second_banner_file_banner_id);
+                $second_banner_previous_banner = File::load($second_banner_file_banner_id);
                 $second_banner_previous_banner_parts = pathinfo($second_banner_previous_banner->getFilename());
                 $second_banner_previous_banner_extension = $second_banner_previous_banner_parts['extension'];
                 $second_banner_previous_banner->setFilename('old_second_banner.'.$second_banner_previous_banner_extension);
@@ -434,7 +434,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $fid_footer_logo_left = $form_state->getValue('footer_logo_left');
      if (isset($fid_footer_logo_left[0]) && $fid_footer_logo_left[0] > 0) {
        $footer_logo_left_id = $fid_footer_logo_left[0];
-       $file_footer_logo_left = \Drupal\file\Entity\File::load($footer_logo_left_id);
+       $file_footer_logo_left = File::load($footer_logo_left_id);
        $file_footer_logo_left_parts = pathinfo($file_footer_logo_left->getFilename());
        $file_footer_logo_left_extension = $file_footer_logo_left_parts['extension'];
        rename($file_footer_logo_left->getFileUri(),"public://footer-logos/footer_logo_left.".$file_footer_logo_left_extension);
@@ -459,7 +459,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $file_footer_logo_left_id = $file_footer_logo_left->id();
               if($file_footer_logo_left_id != $footer_logo_left_id)
                 {
-                $previous_footer_logo_left = \Drupal\file\Entity\File::load($file_footer_logo_left_id);
+                $previous_footer_logo_left = File::load($file_footer_logo_left_id);
                 $previous_footer_logo_left_parts = pathinfo($previous_footer_logo_left->getFilename());
                 $previous_footer_logo_left_extension = $previous_footer_logo_left_parts['extension'];
                 $previous_footer_logo_left->setFilename('old_footer_logo_left.'.$previous_footer_logo_left_extension);
@@ -471,7 +471,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
            $fid_footer_logo_left = $form_state->getValue('footer_logo_left');
      if (isset($fid_footer_logo_left[0]) && $fid_footer_logo_left[0] > 0) {
        $footer_logo_left_id = $fid_footer_logo_left[0];
-       $file_footer_logo_left = \Drupal\file\Entity\File::load($footer_logo_left_id);
+       $file_footer_logo_left = File::load($footer_logo_left_id);
        $file_footer_logo_left_parts = pathinfo($file_footer_logo_left->getFilename());
        $file_footer_logo_left_extension = $file_footer_logo_left_parts['extension'];
        rename($file_footer_logo_left->getFileUri(),"public://footer-logos/footer_logo_left.".$file_footer_logo_left_extension);
@@ -496,7 +496,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $file_footer_logo_left_id = $file_footer_logo_left->id();
               if($file_footer_logo_left_id != $footer_logo_left_id)
                 {
-                $previous_footer_logo_left = \Drupal\file\Entity\File::load($file_footer_logo_left_id);
+                $previous_footer_logo_left = File::load($file_footer_logo_left_id);
                 $previous_footer_logo_left_parts = pathinfo($previous_footer_logo_left->getFilename());
                 $previous_footer_logo_left_extension = $previous_footer_logo_left_parts['extension'];
                 $previous_footer_logo_left->setFilename('old_footer_logo_left.'.$previous_footer_logo_left_extension);
@@ -550,7 +550,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $fid_footer_logo_center_left = $form_state->getValue('footer_logo_center_left');
      if (isset($fid_footer_logo_center_left[0]) && $fid_footer_logo_center_left[0] > 0) {
        $footer_logo_center_left_id = $fid_footer_logo_center_left[0];
-       $file_footer_logo_center_left = \Drupal\file\Entity\File::load($footer_logo_center_left_id);
+       $file_footer_logo_center_left = File::load($footer_logo_center_left_id);
        $file_footer_logo_center_left_parts = pathinfo($file_footer_logo_center_left->getFilename());
        $file_footer_logo_center_left_extension = $file_footer_logo_center_left_parts['extension'];
        rename($file_footer_logo_center_left->getFileUri(),"public://footer-logos/footer_logo_center_left.".$file_footer_logo_center_left_extension);
@@ -575,7 +575,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $file_footer_logo_center_left_id = $file_footer_logo_center_left->id();
               if($file_footer_logo_center_left_id != $footer_logo_center_left_id)
                 {
-                $previous_footer_logo_center_left = \Drupal\file\Entity\File::load($file_footer_logo_center_left_id);
+                $previous_footer_logo_center_left = File::load($file_footer_logo_center_left_id);
                 $previous_footer_logo_center_left_parts = pathinfo($previous_footer_logo_center_left->getFilename());
                 $previous_footer_logo_center_left_extension = $previous_footer_logo_center_left_parts['extension'];
                 $previous_footer_logo_center_left->setFilename('old_footer_logo_center_left.'.$previous_footer_logo_center_left_extension);
@@ -624,7 +624,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $fid_footer_logo_center_right = $form_state->getValue('footer_logo_center_right');
      if (isset($fid_footer_logo_center_right[0]) && $fid_footer_logo_center_right[0] > 0) {
        $footer_logo_center_right_id = $fid_footer_logo_center_right[0];
-       $file_footer_logo_center_right = \Drupal\file\Entity\File::load($footer_logo_center_right_id);
+       $file_footer_logo_center_right = File::load($footer_logo_center_right_id);
        $file_footer_logo_center_right_parts = pathinfo($file_footer_logo_center_right->getFilename());
        $file_footer_logo_center_right_extension = $file_footer_logo_center_right_parts['extension'];
        rename($file_footer_logo_center_right->getFileUri(),"public://footer-logos/footer_logo_center_right.".$file_footer_logo_center_right_extension);
@@ -649,7 +649,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $file_footer_logo_center_right_id = $file_footer_logo_center_right->id();
               if($file_footer_logo_center_right_id != $footer_logo_center_right_id)
                 {
-                $previous_footer_logo_center_right = \Drupal\file\Entity\File::load($file_footer_logo_center_right_id);
+                $previous_footer_logo_center_right = File::load($file_footer_logo_center_right_id);
                 $previous_footer_logo_center_right_parts = pathinfo($previous_footer_logo_center_right->getFilename());
                 $previous_footer_logo_center_right_extension = $previous_footer_logo_center_right_parts['extension'];
                 $previous_footer_logo_center_right->setFilename('old_footer_logo_center_right.'.$previous_footer_logo_center_right_extension);
@@ -700,7 +700,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
   $fid_footer_logo_right = $form_state->getValue('footer_logo_right');
      if (isset($fid_footer_logo_right[0]) && $fid_footer_logo_right[0] > 0) {
        $footer_logo_right_id = $fid_footer_logo_right[0];
-       $file_footer_logo_right = \Drupal\file\Entity\File::load($footer_logo_right_id);
+       $file_footer_logo_right = File::load($footer_logo_right_id);
        $file_footer_logo_right_parts = pathinfo($file_footer_logo_right->getFilename());
        $file_footer_logo_right_extension = $file_footer_logo_right_parts['extension'];
        rename($file_footer_logo_right->getFileUri(),"public://footer-logos/footer_logo_right.".$file_footer_logo_right_extension);
@@ -725,7 +725,7 @@ function wisski_form_system_theme_settings_alter(&$form, Drupal\Core\Form\FormSt
               $file_footer_logo_right_id = $file_footer_logo_right->id();
               if($file_footer_logo_right_id != $footer_logo_right_id)
                 {
-                $previous_footer_logo_right = \Drupal\file\Entity\File::load($file_footer_logo_right_id);
+                $previous_footer_logo_right = File::load($file_footer_logo_right_id);
                 $previous_footer_logo_right_parts = pathinfo($previous_footer_logo_right->getFilename());
                 $previous_footer_logo_right_extension = $previous_footer_logo_right_parts['extension'];
                 $previous_footer_logo_right->setFilename('old_footer_logo_right.'.$previous_footer_logo_right_extension);
@@ -776,18 +776,18 @@ function wisski_preprocess_page(&$variables) {
   $responsive_logo_fid = $myconfig->get('responsive_logo');
   if($responsive_logo_fid != '') {
     foreach ($responsive_logo_fid as $responsive_logo_key => $responsive_logo_value) {
-      $responsive_logo_file = \Drupal\file\Entity\File::load($responsive_logo_value);
+      $responsive_logo_file = File::load($responsive_logo_value);
       $responsive_logo_uri = $responsive_logo_file->getFileUri();
-      $variables['responsive_logo'] = file_create_url($responsive_logo_uri);
+      $variables['responsive_logo'] = \Drupal::service('file_url_generator')->generateAbsoluteString($responsive_logo_uri);
     }
   }
 
   $fid = $myconfig->get('banner_image');
   if($fid != '') {
     foreach ($fid as $key => $value) {
-      $file = \Drupal\file\Entity\File::load($value);
+      $file = File::load($value);
       $uri = $file->getFileUri();
-      $variables['banner_image'] = file_create_url($uri);
+      $variables['banner_image'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
     }
   }
 
@@ -814,9 +814,9 @@ function wisski_preprocess_page(&$variables) {
   $second_banner_fid = $second_banner_myconfig->get('second_banner_image');
   if(is_array($second_banner_fid) && (!empty($second_banner_fid != ''))) {
     foreach ($second_banner_fid as $second_banner_key => $second_banner_value) {
-      $second_banner_file = \Drupal\file\Entity\File::load($second_banner_value);
+      $second_banner_file = File::load($second_banner_value);
       $second_banner_uri = $second_banner_file->getFileUri();
-      $variables['second_banner_image'] = file_create_url($second_banner_uri);
+      $variables['second_banner_image'] = \Drupal::service('file_url_generator')->generateAbsoluteString($second_banner_uri);
     }
   }
 
@@ -838,9 +838,9 @@ function wisski_preprocess_page(&$variables) {
   $footer_logo_left = $footer_logo_left_config->get('footer_logo_left');
   if($footer_logo_left != '') {
     foreach ($footer_logo_left as $key_footer_logo_left => $value_footer_logo_left) {
-      $file_footer_logo_left = \Drupal\file\Entity\File::load($value_footer_logo_left);
+      $file_footer_logo_left = File::load($value_footer_logo_left);
       $uri_footer_logo_left = $file_footer_logo_left->getFileUri();
-      $variables['footer_logo_left'] = file_create_url($uri_footer_logo_left);
+      $variables['footer_logo_left'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri_footer_logo_left);
     }
   }
 
@@ -862,9 +862,9 @@ function wisski_preprocess_page(&$variables) {
   $footer_logo_center_left = $footer_logo_center_left_config->get('footer_logo_center_left');
   if($footer_logo_center_left != '') {
     foreach ($footer_logo_center_left as $key_footer_logo_center_left => $value_footer_logo_center_left) {
-      $file_footer_logo_center_left = \Drupal\file\Entity\File::load($value_footer_logo_center_left);
+      $file_footer_logo_center_left = File::load($value_footer_logo_center_left);
       $uri_footer_logo_center_left = $file_footer_logo_center_left->getFileUri();
-      $variables['footer_logo_center_left'] = file_create_url($uri_footer_logo_center_left);
+      $variables['footer_logo_center_left'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri_footer_logo_center_left);
     }
   }
 
@@ -886,9 +886,9 @@ function wisski_preprocess_page(&$variables) {
   $footer_logo_center_right = $footer_logo_center_right_config->get('footer_logo_center_right');
   if($footer_logo_center_right != '') {
     foreach ($footer_logo_center_right as $key_footer_logo_center_right => $value_footer_logo_center_right) {
-      $file_footer_logo_center_right = \Drupal\file\Entity\File::load($value_footer_logo_center_right);
+      $file_footer_logo_center_right = File::load($value_footer_logo_center_right);
       $uri_footer_logo_center_right = $file_footer_logo_center_right->getFileUri();
-      $variables['footer_logo_center_right'] = file_create_url($uri_footer_logo_center_right);
+      $variables['footer_logo_center_right'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri_footer_logo_center_right);
     }
   }
 
@@ -910,9 +910,9 @@ function wisski_preprocess_page(&$variables) {
   $footer_logo_right = $footer_logo_right_config->get('footer_logo_right');
   if($footer_logo_right != '') {
     foreach ($footer_logo_right as $key_footer_logo_right => $value_footer_logo_right) {
-      $file_footer_logo_right = \Drupal\file\Entity\File::load($value_footer_logo_right);
+      $file_footer_logo_right = File::load($value_footer_logo_right);
       $uri_footer_logo_right = $file_footer_logo_right->getFileUri();
-      $variables['footer_logo_right'] = file_create_url($uri_footer_logo_right);
+      $variables['footer_logo_right'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri_footer_logo_right);
     }
   }
 
@@ -943,9 +943,9 @@ function wisski_preprocess_block(&$variables) {
   $responsive_logo_fid = $myconfig->get('responsive_logo');
   if($responsive_logo_fid != '') {
     foreach ($responsive_logo_fid as $responsive_logo_key => $responsive_logo_value) {
-      $responsive_logo_file = \Drupal\file\Entity\File::load($responsive_logo_value);
+      $responsive_logo_file = File::load($responsive_logo_value);
       $responsive_logo_uri = $responsive_logo_file->getFileUri();
-      $variables['responsive_logo'] = file_create_url($responsive_logo_uri);
+      $variables['responsive_logo'] = \Drupal::service('file_url_generator')->generateAbsoluteString($responsive_logo_uri);
     }
   }
 
@@ -956,7 +956,7 @@ function wisski_preprocess_block(&$variables) {
 //Some data for language settings is added
 function wisski_preprocess_links__language_block(&$variables) {
        //Here the current path is detemined (the last paths after the country code)
-       $url = \Drupal\Core\Url::fromRoute('<current>');
+       $url = Url::fromRoute('<current>');
        $current_path = $url->getInternalPath();
 
        //Now the default language and its prefix are determined
@@ -978,9 +978,9 @@ function wisski_preprocess_html(&$variables) {
  $css_fid = $css_myconfig->get('custom_css');
   if($css_fid != '') {
     foreach ($css_fid as $css_key => $css_value) {
-      $css_file = \Drupal\file\Entity\File::load($css_value);
+      $css_file = File::load($css_value);
       $css_uri = $css_file->getFileUri();
-      $variables['custom_css'] = file_create_url($css_uri);
+      $variables['custom_css'] = \Drupal::service('file_url_generator')->generateAbsoluteString($css_uri);
     }
   }
 }
