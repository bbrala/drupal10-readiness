modules/contrib/contact_emails/src/Routing/RouteSubscriber.php
modules/contrib/contact_emails/contact_emails.install
modules/contrib/contact_emails/src/Tests/ContactEmailsDefaultEmailTest.php
modules/contrib/contact_emails/src/Tests/ContactEmailsRecipientReferenceTest.php
modules/contrib/contact_emails/src/Tests/ContactEmailsRecipientTest.php
modules/contrib/contact_emails/contact_emails.module
modules/contrib/contact_emails/src/Tests/ContactEmailsReplyToReferenceTest.php
modules/contrib/contact_emails/src/ContactEmailListBuilder.php
modules/contrib/contact_emails/src/Tests/ContactEmailsReplyToTest.php
modules/contrib/contact_emails/tests/modules/contact_emails_test_mail_alter/contact_emails_test_mail_alter.module
modules/contrib/contact_emails/src/ContactEmailStorage.php
modules/contrib/contact_emails/src/ContactEmailStorageInterface.php
modules/contrib/contact_emails/src/ContactEmailer.php
modules/contrib/contact_emails/src/ContactEmails.php
modules/contrib/contact_emails/src/ContactEmailsTestBase.php
modules/contrib/contact_emails/src/Entity/ContactEmail.php
modules/contrib/contact_emails/src/Entity/ContactEmailInterface.php
modules/contrib/contact_emails/src/Form/ContactEmailForm.php
modules/contrib/contact_emails/src/Routing/RouteCallback.php

6 files with changes
====================

1) modules/contrib/contact_emails/src/Tests/ContactEmailsReplyToTest.php:39

    ---------- begin diff ----------
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the reply-to is the default site email.
-    $this->assertText('Message-reply-to:site-default-mail@test.com', 'Message to set to default successfully.');
+    $this->assertSession()->pageTextContains('Message-reply-to:site-default-mail@test.com');
   }

   /**
@@ @@
       'reply_to_field[0][value]' => 'field_email_address',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'message[0][value]' => 'Submission Test Form Body',
       'field_email_address[0][value]' => 'email.in.field@test.com',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that it says message has been sent.
-    $this->assertText('Message-reply-to:email.in.field@test.com', 'Message reply-to set successfully.');
+    $this->assertSession()->pageTextContains('Message-reply-to:email.in.field@test.com');
   }

   /**
@@ @@
       'reply_to_type[0][value]' => 'submitter',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the email of the currently logged in user.
-    $this->assertText('Message-reply-to:' . \Drupal::currentUser()->getEmail(), 'Message to set successfully.');
+    $this->assertSession()->pageTextContains('Message-reply-to:' . \Drupal::currentUser()->getEmail());
   }

   /**
@@ @@
       'reply_to_email[0][value]' => 'manual-email-1@test.com',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the email of the currently logged in user.
-    $this->assertText('Message-reply-to:manual-email-1@test.com', 'Message reply-to set successfully.');
+    $this->assertSession()->pageTextContains('Message-reply-to:manual-email-1@test.com');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/contact_emails/src/Tests/ContactEmailsReplyToReferenceTest.php:41

    ---------- begin diff ----------
@@ @@
       'reply_to_reference[0][value]' => 'field_reference.contact_message.contact_reference_test_form.field_email_reference',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Open the contact form on the front-end.
     $this->drupalGet('/contact/contact_emails_test_form');
@@ @@
       'message[0][value]' => 'Submission Test Form Body',
       'field_reference' => $last_option->getValue(),
     ];
-    $this->drupalPostForm(NULL, $params, t('Send message'));
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the email of the currently logged in user.
-    $this->assertText('Message-reply-to:email-via-reference@test.com', 'Message reply-to set successfully.');
+    $this->assertSession()->pageTextContains('Message-reply-to:email-via-reference@test.com');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/contact_emails/src/Tests/ContactEmailsRecipientTest.php:39

    ---------- begin diff ----------
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the to is the default site email.
-    $this->assertText('Message-to:site-default-mail@test.com', 'Message to set to default successfully.');
+    $this->assertSession()->pageTextContains('Message-to:site-default-mail@test.com');
   }

   /**
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'message[0][value]' => 'Submission Test Form Body',
       'field_email_address[0][value]' => 'email.in.field@test.com',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the value of the field.
-    $this->assertText('Message-to:email.in.field@test.com', 'Message to set successfully.');
+    $this->assertSession()->pageTextContains('Message-to:email.in.field@test.com');
   }

   /**
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the email of the currently logged in user.
-    $this->assertText('Message-to:' . \Drupal::currentUser()->getEmail(), 'Message to set successfully.');
+    $this->assertSession()->pageTextContains('Message-to:' . \Drupal::currentUser()->getEmail());
   }

   /**
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the email of the currently logged in user.
-    $this->assertText('Message-to:manual-email-1@test.com, manual-email-2@test.com', 'Message to set successfully.');
+    $this->assertSession()->pageTextContains('Message-to:manual-email-1@test.com, manual-email-2@test.com');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/contact_emails/src/Tests/ContactEmailsRecipientReferenceTest.php:41

    ---------- begin diff ----------
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Open the contact form on the front-end.
     $this->drupalGet('/contact/contact_emails_test_form');
@@ @@
       'message[0][value]' => 'Submission Test Form Body',
       'field_reference' => $last_option->getValue(),
     ];
-    $this->drupalPostForm(NULL, $params, t('Send message'));
+    $this->submitForm($params, t('Send message'));

     // Assert that the message to is the email of the currently logged in user.
-    $this->assertText('Message-to:email-via-reference@test.com', 'Message to set successfully.');
+    $this->assertSession()->pageTextContains('Message-to:email-via-reference@test.com');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/contact_emails/src/Tests/ContactEmailsDefaultEmailTest.php:36

    ---------- begin diff ----------
@@ @@
       'reply_to_type[0][value]' => 'default',
       'status[value]' => TRUE,
     ];
-    $this->drupalPostForm('/admin/structure/contact/manage/contact_emails_test_form/emails/add', $params, t('Save'));
+    $this->drupalGet('/admin/structure/contact/manage/contact_emails_test_form/emails/add');
+    $this->submitForm($params, t('Save'));

     // Submit the contact form on the front-end of the website.
     $params = [
@@ @@
       'subject[0][value]' => 'Submission Test Form Subject',
       'message[0][value]' => 'Submission Test Form Body',
     ];
-    $this->drupalPostForm('/contact/contact_emails_test_form', $params, t('Send message'));
+    $this->drupalGet('/contact/contact_emails_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that it says message has been sent.
-    $this->assertText('Your message has been sent.', 'Message sent successfully.');
+    $this->assertSession()->pageTextContains('Your message has been sent.');

     // Assert subject and body.
-    $this->assertText('Contact Emails Test Form Subject', 'Message subject set successfully.');
-    $this->assertText('Contact Emails Test Form Body', 'Message body set successfully.');
+    $this->assertSession()->pageTextContains('Contact Emails Test Form Subject');
+    $this->assertSession()->pageTextContains('Contact Emails Test Form Body');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/contact_emails/src/ContactEmailsTestBase.php:26

    ---------- begin diff ----------
@@ @@
    *
    * @throws \Drupal\Core\Entity\EntityStorageException
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->createUserAndLogin();
     $this->createBaseContactForm();
@@ @@
       'recipients' => 'test@example.com',
       'contact_storage_submit_text' => 'Send message',
     ];
-    $this->drupalPostForm('admin/structure/contact/add', $params, t('Save'));
+    $this->drupalGet('admin/structure/contact/add');
+    $this->submitForm($params, t('Save'));
   }

   /**
@@ @@
       'label' => 'Email address',
       'field_name' => 'email_address',
     ];
-    $this->drupalPostForm('admin/structure/contact/manage/contact_emails_test_form/fields/add-field', $params, t('Save and continue'));
+    $this->drupalGet('admin/structure/contact/manage/contact_emails_test_form/fields/add-field');
+    $this->submitForm($params, t('Save and continue'));

     // Save the default base field settings.
-    $this->drupalPostForm(NULL, [], t('Save field settings'));
+    $this->submitForm([], t('Save field settings'));

     // Save the field settings.
-    $this->drupalPostForm(NULL, [], t('Save settings'));
+    $this->submitForm([], t('Save settings'));

     // Assert that the field exists.
-    $this->assertText('field_email_address', 'Field email address exists.');
+    $this->assertSession()->pageTextContains('field_email_address');
   }

   /**
@@ @@
       'recipients' => 'test@example.com',
       'contact_storage_submit_text' => 'Send message',
     ];
-    $this->drupalPostForm('admin/structure/contact/add', $params, t('Save'));
+    $this->drupalGet('admin/structure/contact/add');
+    $this->submitForm($params, t('Save'));

     // Add an email field to be referenced.
     $params = [
@@ @@
       'label' => 'Email reference',
       'field_name' => 'email_reference',
     ];
-    $this->drupalPostForm('admin/structure/contact/manage/contact_reference_test_form/fields/add-field', $params, t('Save and continue'));
+    $this->drupalGet('admin/structure/contact/manage/contact_reference_test_form/fields/add-field');
+    $this->submitForm($params, t('Save and continue'));

     // Save the default base field settings.
-    $this->drupalPostForm(NULL, [], t('Save field settings'));
+    $this->submitForm([], t('Save field settings'));

     // Save the field settings.
-    $this->drupalPostForm(NULL, [], t('Save settings'));
+    $this->submitForm([], t('Save settings'));

     // Assert that the field exists.
-    $this->assertText('field_email_reference', 'Field email address exists.');
+    $this->assertSession()->pageTextContains('field_email_reference');

     // Add an email field to reference the new form's field.
     $params = [
@@ @@
       'label' => 'Reference',
       'field_name' => 'reference',
     ];
-    $this->drupalPostForm('admin/structure/contact/manage/contact_emails_test_form/fields/add-field', $params, t('Save and continue'));
+    $this->drupalGet('admin/structure/contact/manage/contact_emails_test_form/fields/add-field');
+    $this->submitForm($params, t('Save and continue'));

     // Save the default base field settings.
     $params = [
       'settings[target_type]' => 'contact_message',
     ];
-    $this->drupalPostForm(NULL, $params, t('Save field settings'));
+    $this->submitForm($params, t('Save field settings'));

     // Save the field settings.
     $params = [
       'settings[handler_settings][target_bundles][contact_reference_test_form]' => 'contact_reference_test_form',
     ];
-    $this->drupalPostForm(NULL, $params, t('Save settings'));
+    $this->submitForm($params, t('Save settings'));

     // Assert that the field exists.
-    $this->assertText('field_reference', 'Field reference exists.');
+    $this->assertSession()->pageTextContains('field_reference');

     // Save the display settings to make the reference a simple select.
     $params = [
       'fields[field_reference][type]' => 'options_select',
     ];
-    $this->drupalPostForm('admin/structure/contact/manage/contact_emails_test_form/form-display', $params, t('Save'));
+    $this->drupalGet('admin/structure/contact/manage/contact_emails_test_form/form-display');
+    $this->submitForm($params, t('Save'));

     // Submit the refernce contact form on the front-end of the website.
     $params = [
@@ @@
       'message[0][value]' => 'Submission Test Form Body',
       'field_email_reference[0][value]' => 'email-via-reference@test.com',
     ];
-    $this->drupalPostForm('contact/contact_reference_test_form', $params, t('Send message'));
+    $this->drupalGet('contact/contact_reference_test_form');
+    $this->submitForm($params, t('Send message'));

     // Assert that it says message has been sent.
-    $this->assertText('Your message has been sent.', 'Message sent successfully.');
+    $this->assertSession()->pageTextContains('Your message has been sent.');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

