modules/contrib/libraries/libraries.api.php
modules/contrib/libraries/src/ExternalLibrary/Definition/DefinitionDiscoveryFactory.php
modules/contrib/libraries/src/ExternalLibrary/Local/LocatorInterface.php
modules/contrib/libraries/src/ExternalLibrary/Version/VersionDetectorManager.php
modules/contrib/libraries/tests/src/Kernel/LibraryTypeKernelTestBase.php
modules/contrib/libraries/tests/example/example_4.php
modules/contrib/libraries/tests/libraries/test_php_file_library/test_php_file_library.php
modules/contrib/libraries/tests/modules/libraries_test/libraries_test.inc
modules/contrib/libraries/tests/modules/libraries_test/libraries_test.module
modules/contrib/libraries/src/ExternalLibrary/Local/LocatorManager.php
modules/contrib/libraries/libraries.drush.inc
modules/contrib/libraries/src/ExternalLibrary/PhpFile/PhpFileLibrary.php
modules/contrib/libraries/src/ExternalLibrary/Version/VersionedLibraryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Version/VersionedLibraryTrait.php
modules/contrib/libraries/src/ExternalLibrary/Definition/DefinitionDiscoveryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Definition/FileDefinitionDiscovery.php
modules/contrib/libraries/src/Plugin/MissingPluginConfigurationException.php
modules/contrib/libraries/src/ExternalLibrary/PhpFile/PhpFileLibraryInterface.php
modules/contrib/libraries/src/Plugin/libraries/Locator/ChainLocator.php
modules/contrib/libraries/src/ExternalLibrary/PhpFile/PhpFileLoaderInterface.php
modules/contrib/libraries/src/ExternalLibrary/Definition/FileDefinitionDiscoveryBase.php
modules/contrib/libraries/src/ExternalLibrary/PhpFile/PhpRequireLoader.php
modules/contrib/libraries/src/ExternalLibrary/Remote/RemoteLibraryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Remote/RemoteLibraryTrait.php
modules/contrib/libraries/src/ExternalLibrary/Type/LibraryCreationListenerInterface.php
modules/contrib/libraries/src/Plugin/libraries/Locator/GlobalLocator.php
modules/contrib/libraries/src/ExternalLibrary/Type/LibraryLoadingListenerInterface.php
modules/contrib/libraries/src/ExternalLibrary/Type/LibraryTypeBase.php
modules/contrib/libraries/src/ExternalLibrary/Definition/GuzzleDefinitionDiscovery.php
modules/contrib/libraries/libraries.install
modules/contrib/libraries/src/ExternalLibrary/Type/LibraryTypeFactory.php
modules/contrib/libraries/src/Plugin/libraries/Locator/UriLocator.php
modules/contrib/libraries/libraries.module
modules/contrib/libraries/src/ExternalLibrary/Definition/WritableDefinitionDiscoveryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Type/LibraryTypeInterface.php
modules/contrib/libraries/src/ExternalLibrary/Definition/WritableFileDefinitionDiscovery.php
modules/contrib/libraries/src/ExternalLibrary/Utility/DependencyAccessorTrait.php
modules/contrib/libraries/src/ExternalLibrary/Utility/IdAccessorTrait.php
modules/contrib/libraries/src/ExternalLibrary/Utility/LibraryAccessorInterface.php
modules/contrib/libraries/src/ExternalLibrary/Utility/LibraryAccessorTrait.php
modules/contrib/libraries/src/ExternalLibrary/Dependency/DependentLibraryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Utility/LibraryIdAccessorInterface.php
modules/contrib/libraries/src/ExternalLibrary/Dependency/DependentLibraryTrait.php
modules/contrib/libraries/src/ExternalLibrary/Utility/LibraryIdAccessorTrait.php
modules/contrib/libraries/src/ExternalLibrary/Version/VersionDetectorInterface.php
modules/contrib/libraries/src/ExternalLibrary/Exception/InvalidLibraryDependencyException.php
modules/contrib/libraries/src/ExternalLibrary/Exception/LibraryDefinitionNotFoundException.php
modules/contrib/libraries/src/ExternalLibrary/Exception/LibraryNotInstalledException.php
modules/contrib/libraries/src/ExternalLibrary/Exception/LibraryTypeNotFoundException.php
modules/contrib/libraries/src/ExternalLibrary/Exception/UnknownLibraryVersionException.php
modules/contrib/libraries/src/ExternalLibrary/LibraryBase.php
modules/contrib/libraries/src/Plugin/libraries/Type/AssetLibraryType.php
modules/contrib/libraries/tests/modules/libraries_test/src/Controller/ExampleController.php
modules/contrib/libraries/src/ExternalLibrary/LibraryInterface.php
modules/contrib/libraries/src/Plugin/libraries/Type/MultipleAssetLibraryType.php
modules/contrib/libraries/src/ExternalLibrary/LibraryManager.php
modules/contrib/libraries/tests/src/Unit/Plugin/libraries/VersionDetector/LinePatternDetectorTest.php
modules/contrib/libraries/src/Plugin/libraries/Type/PhpFileLibraryType.php
modules/contrib/libraries/src/Plugin/libraries/VersionDetector/LinePatternDetector.php
modules/contrib/libraries/src/ExternalLibrary/LibraryManagerInterface.php
modules/contrib/libraries/src/ExternalLibrary/Local/LocalLibraryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Local/LocalLibraryTrait.php
modules/contrib/libraries/tests/src/Functional/ExternalLibrary/Definition/DefinitionDiscoveryFactoryTest.php
modules/contrib/libraries/src/Plugin/libraries/VersionDetector/StaticDetector.php
modules/contrib/libraries/src/StreamWrapper/AssetLibrariesStream.php
modules/contrib/libraries/src/StreamWrapper/LibraryDefinitionsStream.php
modules/contrib/libraries/src/StreamWrapper/LocalHiddenStreamTrait.php
modules/contrib/libraries/src/StreamWrapper/PhpFileLibrariesStream.php
modules/contrib/libraries/src/StreamWrapper/PrivateStreamTrait.php
modules/contrib/libraries/tests/example/example_1.php
modules/contrib/libraries/tests/example/example_2.php
modules/contrib/libraries/tests/example/example_3.php
modules/contrib/libraries/src/Annotation/LibraryType.php
modules/contrib/libraries/src/Annotation/Locator.php
modules/contrib/libraries/src/Annotation/VersionDetector.php
modules/contrib/libraries/src/Config/LibrariesConfigSubscriber.php
modules/contrib/libraries/src/ExternalLibrary/Asset/AssetLibrary.php
modules/contrib/libraries/tests/src/Functional/LibrariesWebTest.php
modules/contrib/libraries/src/ExternalLibrary/Asset/AssetLibraryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Asset/AttachableAssetLibraryRegistrationInterface.php
modules/contrib/libraries/src/ExternalLibrary/Asset/LocalRemoteAssetTrait.php
modules/contrib/libraries/src/ExternalLibrary/Asset/MultipleAssetLibrary.php
modules/contrib/libraries/src/ExternalLibrary/Asset/MultipleAssetLibraryInterface.php
modules/contrib/libraries/src/ExternalLibrary/Definition/ChainDefinitionDiscovery.php
modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTest.php
modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTestBase.php
modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/Asset/MultipleAssetLibraryTest.php
modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/GlobalLocatorTest.php
modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/PhpFile/PhpFileLibraryTest.php
modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/TestLibraryFilesStream.php
modules/contrib/libraries/tests/src/Kernel/LibrariesApi/LibrariesUnitTest.php

13 files with changes
=====================

1) modules/contrib/libraries/tests/src/Unit/Plugin/libraries/VersionDetector/LinePatternDetectorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\libraries\Unit\Plugin\libraries\VersionDetector;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\libraries\ExternalLibrary\Local\LocalLibraryInterface;
 use Drupal\libraries\ExternalLibrary\Version\VersionedLibraryInterface;
 use Drupal\libraries\Plugin\libraries\VersionDetector\LinePatternDetector;
@@ @@
  */
 class LinePatternDetectorTest extends UnitTestCase {

+  use ProphecyTrait;
   protected $libraryId = 'test_library';

   /**
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ExplicitPhpErrorApiRector (https://github.com/sebastianbergmann/phpunit/blob/master/ChangeLog-9.0.md)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/libraries/tests/src/Kernel/LibraryTypeKernelTestBase.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\libraries\Kernel;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Component\Plugin\Exception\PluginException;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\libraries\ExternalLibrary\Exception\LibraryDefinitionNotFoundException;
@@ @@
  */
 abstract class LibraryTypeKernelTestBase extends KernelTestBase {

+  use ProphecyTrait;
   /**
    * The external library manager.
    *
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     /** @var \Drupal\Core\Extension\ModuleHandlerInterface $module_handler */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/libraries/src/Plugin/libraries/Type/MultipleAssetLibraryType.php:24

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function getAttachableAssetLibraries(LibraryInterface $external_library, LibraryManagerInterface $library_manager) {
-    assert($external_library instanceof \Drupal\libraries\ExternalLibrary\Asset\MultipleAssetLibraryInterface);
+    assert($external_library instanceof MultipleAssetLibraryInterface);
     /** @var \Drupal\libraries\ExternalLibrary\Asset\MultipleAssetLibraryInterface $external_library */
     $attachable_libraries = [];
     foreach ($external_library->getAttachableAssetLibraries($library_manager) as $component_name => $attachable_library) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/libraries/src/Plugin/libraries/Type/AssetLibraryType.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\libraries\Plugin\libraries\Type;

+use Drupal\libraries\ExternalLibrary\Asset\AssetLibraryInterface;
 use Drupal\libraries\ExternalLibrary\Asset\AssetLibrary;
 use Drupal\libraries\ExternalLibrary\Asset\AttachableAssetLibraryRegistrationInterface;
 use Drupal\libraries\ExternalLibrary\LibraryInterface;
@@ @@
    * {@inheritdoc}
    */
   public function getAttachableAssetLibraries(LibraryInterface $library, LibraryManagerInterface $library_manager) {
-    assert($library instanceof \Drupal\libraries\ExternalLibrary\Asset\AssetLibraryInterface);
+    assert($library instanceof AssetLibraryInterface);
     /** @var \Drupal\libraries\ExternalLibrary\Asset\AssetLibraryInterface $library */
     return [$library->getId() => $library->getAttachableAssetLibrary($library_manager)];
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/libraries/src/Plugin/libraries/Locator/UriLocator.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\libraries\Plugin\libraries\Locator;

+use Drupal\Core\StreamWrapper\LocalStream;
 use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
 use Drupal\Core\StreamWrapper\StreamWrapperManagerInterface;
 use Drupal\libraries\ExternalLibrary\Local\LocalLibraryInterface;
@@ @@
   public function locate(LocalLibraryInterface $library) {
     /** @var \Drupal\Core\StreamWrapper\LocalStream $stream_wrapper */
     $stream_wrapper = $this->streamWrapperManager->getViaUri($this->uri);
-    assert($stream_wrapper instanceof \Drupal\Core\StreamWrapper\LocalStream);
+    assert($stream_wrapper instanceof LocalStream);
     // Calling LocalStream::getDirectoryPath() explicitly avoids the realpath()
     // usage in LocalStream::getLocalPath(), which breaks if Libraries API is
     // symbolically linked into the Drupal installation.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector


6) modules/contrib/libraries/libraries.module:116

    ---------- begin diff ----------
@@ @@
   // profile, installation profiles may want to place libraries into a
   // 'libraries' directory.
   if ($profile = \Drupal::installProfile()) {
-    $profile_path = drupal_get_path('profile', $profile);
+    $profile_path = \Drupal::service('extension.list.profile')->getPath($profile);
     $searchdir[] = "$profile_path/libraries";
   };

@@ @@
  * https://www.drupal.org/node/2170763
  */
 function libraries_scan_info_files() {
-  $profile = drupal_get_path('profile', \Drupal::installProfile());
+  $profile = \Drupal::service('extension.list.profile')->getPath(\Drupal::installProfile());
   $config = DrupalKernel::findSitePath(\Drupal::request());

   // Build a list of directories.
@@ @@
       libraries_load_files([
         'files' => $files,
         'path' => '',
-        'library path' => drupal_get_path('module', $module),
+        'library path' => \Drupal::service('extension.list.module')->getPath($module),
       ]);
     }
   }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


7) modules/contrib/libraries/libraries.api.php:604

    ---------- begin diff ----------
@@ @@
 function hook_libraries_info_file_paths() {
   // Taken from the Libraries test module, which needs to specify the path to
   // the test library.
-  return [drupal_get_path('module', 'libraries_test') . '/example'];
+  return [\Drupal::service('extension.list.module')->getPath('libraries_test') . '/example'];
 }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


8) modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/PhpFile/PhpFileLibraryTest.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->container->set('stream_wrapper.php_file_libraries', new TestLibraryFilesStream(
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/GlobalLocatorTest.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Assign our test stream (which points to the test php lib) to the asset
     // scheme. This gives us a scheme to work with in the test that is not
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/libraries/tests/src/Kernel/ExternalLibrary/Asset/AssetLibraryTestBase.php:27

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->coreLibraryDiscovery = $this->container->get('library.discovery');
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/libraries/tests/src/Functional/LibrariesWebTest.php:47

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->urlAssembler = $this->container->get('unrouted_url_assembler');
@@ @@
   public function testLibrariesScanInfoFiles() {
     $expected = [
       'example_info_file' => (object) [
-        'uri' => drupal_get_path('module', 'libraries') . '/tests/example/example_info_file.libraries.info.yml',
+        'uri' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example/example_info_file.libraries.info.yml',
         'filename' => 'example_info_file.libraries.info.yml',
         'name' => 'example_info_file.libraries.info',
       ],
@@ @@
     // Test that library information is found correctly.
     $expected = [
       'name' => 'Example files',
-      'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+      'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
       'version' => '1',
       'files' => [
         'js' => ['example_1.js' => []],
@@ @@
     // Test a library specified with an .info file gets detected.
     $expected = [
       'name' => 'Example info file',
-      'info file' => drupal_get_path('module', 'libraries') . '/tests/example/example_info_file.libraries.info.yml',
+      'info file' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example/example_info_file.libraries.info.yml',
     ];
     libraries_info_defaults($expected, 'example_info_file');
     $library = libraries_info('example_info_file');
@@ @@
   public function testCallbacks() {
     $expected = [
       'name' => 'Example callback',
-      'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+      'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
       'version' => '1',
       'versions' => [
         '1' => [
@@ @@

     // Test loading of integration files.
     $this->drupalGet('libraries_test/integration_files');
-    $this->assertRaw('libraries_test.js', 'Integration file loading: libraries_test.js found');
-    $this->assertRaw('libraries_test.css', 'Integration file loading: libraries_test.css found');
-    $this->assertRaw('libraries_test.inc', 'Integration file loading: libraries_test.inc found');
+    $this->assertSession()->responseContains('libraries_test.js');
+    $this->assertSession()->responseContains('libraries_test.css');
+    $this->assertSession()->responseContains('libraries_test.inc');

     // Test version overloading.
     $this->drupalGet('libraries_test/versions');
@@ @@
     // When the library information is not cached, all callback groups should be
     // invoked.
     $this->drupalGet('libraries_test/cache');
-    $this->assertRaw('The <em>info</em> callback group was invoked.', 'Info callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>pre-detect</em> callback group was invoked.', 'Pre-detect callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>post-detect</em> callback group was invoked.', 'Post-detect callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>pre-load</em> callback group was invoked.', 'Pre-load callback invoked for uncached libraries.');
-    $this->assertRaw('The <em>post-load</em> callback group was invoked.', 'Post-load callback invoked for uncached libraries.');
+    $this->assertSession()->responseContains('The <em>info</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>pre-detect</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>post-detect</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>pre-load</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>post-load</em> callback group was invoked.');
     // When the library information is cached only the 'pre-load' and
     // 'post-load' callback groups should be invoked.
     $this->drupalGet('libraries_test/cache');
-    $this->assertNoRaw('The <em>info</em> callback group was not invoked.', 'Info callback not invoked for cached libraries.');
-    $this->assertNoRaw('The <em>pre-detect</em> callback group was not invoked.', 'Pre-detect callback not invoked for cached libraries.');
-    $this->assertNoRaw('The <em>post-detect</em> callback group was not invoked.', 'Post-detect callback not invoked for cached libraries.');
-    $this->assertRaw('The <em>pre-load</em> callback group was invoked.', 'Pre-load callback invoked for cached libraries.');
-    $this->assertRaw('The <em>post-load</em> callback group was invoked.', 'Post-load callback invoked for cached libraries.');
+    $this->assertSession()->responseNotContains('The <em>info</em> callback group was not invoked.');
+    $this->assertSession()->responseNotContains('The <em>pre-detect</em> callback group was not invoked.');
+    $this->assertSession()->responseNotContains('The <em>post-detect</em> callback group was not invoked.');
+    $this->assertSession()->responseContains('The <em>pre-load</em> callback group was invoked.');
+    $this->assertSession()->responseContains('The <em>post-load</em> callback group was invoked.');
     \Drupal::state()->set('libraries_test.cache', FALSE);
   }

@@ @@

     foreach ($names as $name => $expected) {
       foreach ($extensions as $extension) {
-        $filepath = drupal_get_path('module', 'libraries') . "/tests/example/$name.$extension";
+        $filepath = \Drupal::service('extension.list.module')->getPath('libraries') . "/tests/example/$name.$extension";
         // JavaScript and CSS files appear as full URLs and with an appended
         // query string.
         if (in_array($extension, ['js', 'css'])) {
@@ @@
         $raw = $prefix . $filepath . $suffix;
         if ($expected) {
           $html_expected[] = Html::escape($raw);
-          $this->assertRaw($raw, "$label$name.$extension found.");
+          $this->assertSession()->responseContains($raw);
         }
         else {
           $html_not_expected[] = Html::escape($raw);
-          $this->assertNoRaw($raw, "$label$name.$extension not found.");
+          $this->assertSession()->responseNotContains($raw);
         }
       }
     }
    ----------- end diff -----------

Applied rules:
 * AssertNoRawRector
 * AssertRawRector
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/libraries/tests/src/Functional/ExternalLibrary/Definition/DefinitionDiscoveryFactoryTest.php:43

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     /** @var \Drupal\Core\Config\ConfigFactoryInterface $config_factory */
@@ @@
     /** @var \Drupal\libraries\ExternalLibrary\Definition\DefinitionDiscoveryInterface $discovery */
     $discovery = $this->container->get($discovery_service_id);
     $definition_file = "$definitions_directory/$library_id.json";
-    $this->assertFileNotExists($definition_file);
+    $this->assertFileDoesNotExist($definition_file);
     $this->assertTrue($discovery->hasDefinition($library_id));
-    $this->assertFileNotExists($definition_file);
+    $this->assertFileDoesNotExist($definition_file);
     $this->assertEquals($discovery->getDefinition($library_id), $expected_definition);
     $this->assertFileExists($definition_file);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * RenameMethodRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/libraries/tests/modules/libraries_test/libraries_test.module:14

    ---------- begin diff ----------
@@ @@
   // Test library detection.
   $libraries['example_missing'] = [
     'name' => 'Example missing',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/missing',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/missing',
   ];
   $libraries['example_undetected_version'] = [
     'name' => 'Example undetected version',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests',
     'version callback' => '_libraries_test_return_version',
     'version arguments' => [FALSE],
   ];
   $libraries['example_unsupported_version'] = [
     'name' => 'Example unsupported version',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests',
     'version callback' => '_libraries_test_return_version',
     'version arguments' => ['1'],
     'versions' => [
@@ @@

   $libraries['example_supported_version'] = [
     'name' => 'Example supported version',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests',
     'version callback' => '_libraries_test_return_version',
     'version arguments' => ['1'],
     'versions' => [
@@ @@
   // Test the default version callback.
   $libraries['example_default_version_callback'] = [
     'name' => 'Example default version callback',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version arguments' => [
       'file' => 'README.txt',
       // Version 1
@@ @@
   // Test a multiple-parameter version callback.
   $libraries['example_multiple_parameter_version_callback'] = [
     'name' => 'Example multiple parameter version callback',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     // Version 1
     'version callback' => '_libraries_test_get_version',
     'version arguments' => ['README.txt', '/Version (\d+)/', 5],
@@ @@
   // Test a top-level files property.
   $libraries['example_files'] = [
     'name' => 'Example files',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'files' => [
       'js' => ['example_1.js'],
@@ @@
   // these files should be automatically loaded when the library is loaded.
   $libraries['example_integration_files'] = [
     'name' => 'Example integration files',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'integration files' => [
       'libraries_test' => [
@@ @@
   // Test version overloading.
   $libraries['example_versions'] = [
     'name' => 'Example versions',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '2',
     'versions' => [
       '1' => [
@@ @@
   // Test variant detection.
   $libraries['example_variant_missing'] = [
     'name' => 'Example variant missing',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'variants' => [
       'example_variant' => [
@@ @@

   $libraries['example_variant'] = [
     'name' => 'Example variant',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'variants' => [
       'example_variant' => [
@@ @@
   // Test correct behaviour with multiple versions and multiple variants.
   $libraries['example_versions_and_variants'] = [
     'name' => 'Example versions and variants',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '2',
     'versions' => [
       '1' => [
@@ @@
   // This library acts as a dependency for the libraries below.
   $libraries['example_dependency'] = [
     'name' => 'Example dependency',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1.1',
     'files' => ['js' => ['example_1.js']],
   ];
   $libraries['example_dependency_missing'] = [
     'name' => 'Example dependency missing',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'dependencies' => ['example_missing'],
     'files' => ['js' => ['example_1.js']],
@@ @@
   ];
   $libraries['example_dependency_incompatible'] = [
     'name' => 'Example dependency incompatible',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'dependencies' => ['example_dependency (>1.1)'],
     'files' => ['js' => ['example_1.js']],
@@ @@
   ];
   $libraries['example_dependency_compatible'] = [
     'name' => 'Example dependency compatible',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'dependencies' => ['example_dependency (>=1.1)'],
     'files' => ['js' => ['example_1.js']],
@@ @@
   // Test the applying of callbacks.
   $libraries['example_callback'] = [
     'name' => 'Example callback',
-    'library path' => drupal_get_path('module', 'libraries') . '/tests/example',
+    'library path' => \Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example',
     'version' => '1',
     'versions' => [
       '1' => [
@@ @@
  * Implements hook_libraries_info_file_paths()
  */
 function libraries_test_libraries_info_file_paths() {
-  return [drupal_get_path('module', 'libraries') . '/tests/example'];
+  return [\Drupal::service('extension.list.module')->getPath('libraries') . '/tests/example'];
 }

 /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


 [OK] 13 files have been changed by Rector                                      

