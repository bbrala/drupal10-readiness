diff --git a/src/ContentLoader/ContentLoader.php b/src/ContentLoader/ContentLoader.php
index 570a357..78a1d23 100644
--- a/src/ContentLoader/ContentLoader.php
+++ b/src/ContentLoader/ContentLoader.php
@@ -291,7 +291,7 @@ class ContentLoader implements ContentLoaderInterface {
 
     // Dispatch the event notification.
     $content_parsed_event = new ContentParsedEvent($this, $this->contentFile, $this->parsedContent);
-    $this->getEventDispatcher()->dispatch(YamlContentEvents::CONTENT_PARSED, $content_parsed_event);
+    $this->getEventDispatcher()->dispatch($content_parsed_event, YamlContentEvents::CONTENT_PARSED);
 
     return $this->parsedContent;
   }
@@ -311,13 +311,13 @@ class ContentLoader implements ContentLoaderInterface {
 
       // Dispatch the pre-save event.
       $entity_pre_save_event = new EntityPreSaveEvent($this, $entity, $content_item);
-      $this->getEventDispatcher()->dispatch(YamlContentEvents::ENTITY_PRE_SAVE, $entity_pre_save_event);
+      $this->getEventDispatcher()->dispatch($entity_pre_save_event, YamlContentEvents::ENTITY_PRE_SAVE);
 
       $entity->save();
 
       // Dispatch the post-save event.
       $entity_post_save_event = new EntityPostSaveEvent($this, $entity, $content_item);
-      $this->getEventDispatcher()->dispatch(YamlContentEvents::ENTITY_POST_SAVE, $entity_post_save_event);
+      $this->getEventDispatcher()->dispatch($entity_post_save_event, YamlContentEvents::ENTITY_POST_SAVE);
 
       $loaded_content[] = $entity;
     }
@@ -348,7 +348,7 @@ class ContentLoader implements ContentLoaderInterface {
 
     // Dispatch the entity import event.
     $entity_import_event = new EntityImportEvent($this, $entity_definition, $content_data);
-    $this->getEventDispatcher()->dispatch(YamlContentEvents::IMPORT_ENTITY, $entity_import_event);
+    $this->getEventDispatcher()->dispatch($entity_import_event, YamlContentEvents::IMPORT_ENTITY);
 
     // Parse properties for creation and fields for processing.
     $attributes = $this->getContentAttributes($entity_type, $content_data);
@@ -452,7 +452,7 @@ class ContentLoader implements ContentLoaderInterface {
 
           // Dispatch field import event prior to populating fields.
           $field_import_event = new FieldImportEvent($this, $entity, $field_instance, $field_data);
-          $this->getEventDispatcher()->dispatch(YamlContentEvents::IMPORT_FIELD, $field_import_event);
+          $this->getEventDispatcher()->dispatch($field_import_event, YamlContentEvents::IMPORT_FIELD);
 
           $this->populateField($field_instance, $field_data);
         }
diff --git a/src/Event/EventBase.php b/src/Event/EventBase.php
index d145ab7..1c59d04 100644
--- a/src/Event/EventBase.php
+++ b/src/Event/EventBase.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\yaml_content\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\yaml_content\ContentLoader\ContentLoaderInterface;
 
 /**
diff --git a/src/Plugin/yaml_content/process/File.php b/src/Plugin/yaml_content/process/File.php
index 8cf5d2a..0a955d6 100644
--- a/src/Plugin/yaml_content/process/File.php
+++ b/src/Plugin/yaml_content/process/File.php
@@ -50,7 +50,7 @@ class File extends YamlContentProcessBase implements YamlContentProcessInterface
         ->prepareDirectory($destination, FileSystemInterface::CREATE_DIRECTORY);
 
       // Save the file data or return an existing file.
-      $file = file_save_data($output, $destination . $filename, FileSystemInterface::EXISTS_REPLACE);
+      $file = \Drupal::service('file.repository')->writeData($output, $destination . $filename, FileSystemInterface::EXISTS_REPLACE);
 
       // Use the newly created file id as the value.
       $field_data['target_id'] = $file->id();
diff --git a/src/Service/LoadHelper.php b/src/Service/LoadHelper.php
index 6ae48a4..c20e7e6 100644
--- a/src/Service/LoadHelper.php
+++ b/src/Service/LoadHelper.php
@@ -81,7 +81,7 @@ class LoadHelper {
    *   matching `*.content.yml` are queued for import.
    */
   public function importModule($module, $file = NULL) {
-    $path = drupal_get_path('module', $module);
+    $path = \Drupal::service('extension.list.module')->getPath($module);
 
     $this->loader->setContentPath($path);
 
@@ -107,7 +107,7 @@ class LoadHelper {
    *   matching `*.content.yml` are queued for import.
    */
   public function importProfile($profile, $file = NULL) {
-    $path = drupal_get_path('profile', $profile);
+    $path = \Drupal::service('extension.list.profile')->getPath($profile);
 
     $this->loader->setContentPath($path);
 
diff --git a/tests/src/Functional/NodeImportTest.php b/tests/src/Functional/NodeImportTest.php
index eb86cd7..0d8a0a4 100644
--- a/tests/src/Functional/NodeImportTest.php
+++ b/tests/src/Functional/NodeImportTest.php
@@ -55,7 +55,7 @@ class NodeImportTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create our article content type.
@@ -67,7 +67,7 @@ class NodeImportTest extends BrowserTestBase {
     // Prepare the content loader.
     $this->contentLoader = \Drupal::service('yaml_content.content_loader');
     // Look for content files in the tests directory.
-    $this->contentLoader->setContentPath(drupal_get_path('module', 'yaml_content') . '/tests');
+    $this->contentLoader->setContentPath(\Drupal::service('extension.list.module')->getPath('yaml_content') . '/tests');
   }
 
   /**
diff --git a/tests/src/Functional/Plugin/yaml_content/process/FileTest.php b/tests/src/Functional/Plugin/yaml_content/process/FileTest.php
index 19e7898..121eedf 100644
--- a/tests/src/Functional/Plugin/yaml_content/process/FileTest.php
+++ b/tests/src/Functional/Plugin/yaml_content/process/FileTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\yaml_content\Functional\Plugin\yaml_content\process;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Field\BaseFieldDefinition;
 use Drupal\Core\Field\FieldItemList;
 use Drupal\Core\TypedData\DataDefinition;
@@ -25,6 +26,7 @@ use Symfony\Component\DependencyInjection\ContainerInterface;
  */
 class FileTest extends BrowserTestBase {
 
+  use ProphecyTrait;
   use LoadFixturesTrait;
 
   protected static $modules = ['file'];
diff --git a/tests/src/Functional/TaxonomyImportTest.php b/tests/src/Functional/TaxonomyImportTest.php
index e985ff6..5fc260c 100644
--- a/tests/src/Functional/TaxonomyImportTest.php
+++ b/tests/src/Functional/TaxonomyImportTest.php
@@ -47,13 +47,13 @@ class TaxonomyImportTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Prepare the content loader.
     $this->contentLoader = \Drupal::service('yaml_content.content_loader');
     // Look for content files in the tests directory.
-    $this->contentLoader->setContentPath(drupal_get_path('module', 'yaml_content') . '/tests');
+    $this->contentLoader->setContentPath(\Drupal::service('extension.list.module')->getPath('yaml_content') . '/tests');
   }
 
   /**
diff --git a/tests/src/Unit/ContentLoader/ContentLoaderTest.php b/tests/src/Unit/ContentLoader/ContentLoaderTest.php
index 1a4f200..36c7c63 100644
--- a/tests/src/Unit/ContentLoader/ContentLoaderTest.php
+++ b/tests/src/Unit/ContentLoader/ContentLoaderTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\yaml_content\Unit\ContentLoader;
 
+use PHPUnit\Framework\Error\Warning;
 use Drupal\Component\EventDispatcher\ContainerAwareEventDispatcher;
 use Drupal\Core\Field\BaseFieldDefinition;
 use Drupal\Core\Field\FieldItemList;
@@ -54,7 +55,7 @@ class ContentLoaderTest extends ContentLoaderTestBase {
      $this->contentLoader->setContentPath($this->root->url());
 
      // Parse the test file expecting an error for the missing file.
-     $this->expectException(\PHPUnit\Framework\Error\Warning::class);
+     $this->expectException(Warning::class);
      $this->contentLoader->parseContent($test_file);
    }
 
diff --git a/tests/src/Unit/ContentLoader/ContentLoaderTestBase.php b/tests/src/Unit/ContentLoader/ContentLoaderTestBase.php
index 5678fcf..87d33d8 100644
--- a/tests/src/Unit/ContentLoader/ContentLoaderTestBase.php
+++ b/tests/src/Unit/ContentLoader/ContentLoaderTestBase.php
@@ -34,10 +34,7 @@ abstract class ContentLoaderTestBase extends UnitTestCase {
    */
   protected function getContentLoaderMock($stubbed_methods = NULL) {
     // Partially mock the ContentLoader for testing specific methods.
-    $this->contentLoader = $this->getMockBuilder(ContentLoader::class)
-      ->disableOriginalConstructor()
-      ->setMethods($stubbed_methods)
-      ->getMock();
+    $this->contentLoader = $this->createMock(ContentLoader::class);
 
     return $this->contentLoader;
   }
@@ -63,7 +60,7 @@ abstract class ContentLoaderTestBase extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Prepare the directory structure.
diff --git a/tests/src/Unit/EntityLoadHelper/EntityLoadHelperTest.php b/tests/src/Unit/EntityLoadHelper/EntityLoadHelperTest.php
index ede40ad..4bd0aa1 100644
--- a/tests/src/Unit/EntityLoadHelper/EntityLoadHelperTest.php
+++ b/tests/src/Unit/EntityLoadHelper/EntityLoadHelperTest.php
@@ -42,10 +42,7 @@ class EntityLoadHelperTest extends UnitTestCase {
    */
   protected function getEntityLoadHelperMock($stubbed_methods = NULL) {
     // Partially mock the ContentLoader for testing specific methods.
-    $mock = $this->getMockBuilder(EntityLoadHelper::class)
-      ->disableOriginalConstructor()
-      ->setMethods($stubbed_methods)
-      ->getMock();
+    $mock = $this->createMock(EntityLoadHelper::class);
 
     return $mock;
   }
diff --git a/tests/src/Unit/Plugin/yaml_content/process/FileTest.php b/tests/src/Unit/Plugin/yaml_content/process/FileTest.php
index 7f9436a..74bc97a 100644
--- a/tests/src/Unit/Plugin/yaml_content/process/FileTest.php
+++ b/tests/src/Unit/Plugin/yaml_content/process/FileTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\yaml_content\Unit\Plugin\yaml_content\process;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Tests\UnitTestCase;
 use Drupal\Tests\yaml_content\Traits\LoadFixturesTrait;
 use Drupal\yaml_content\ContentLoader\ContentLoader;
@@ -21,6 +22,7 @@ use Symfony\Component\DependencyInjection\ContainerInterface;
  */
 class FileTest extends UnitTestCase {
 
+  use ProphecyTrait;
   use LoadFixturesTrait;
 
   /**
@@ -33,7 +35,7 @@ class FileTest extends UnitTestCase {
   /**
    * Setup the file process plugin for all tests.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $args = [
       'my_entity',
diff --git a/tests/src/Unit/Plugin/yaml_content/process/ReferenceTest.php b/tests/src/Unit/Plugin/yaml_content/process/ReferenceTest.php
index b4a2848..164cde9 100644
--- a/tests/src/Unit/Plugin/yaml_content/process/ReferenceTest.php
+++ b/tests/src/Unit/Plugin/yaml_content/process/ReferenceTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\yaml_content\Unit\Plugin\yaml_content\process;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -21,6 +22,7 @@ use Prophecy\Argument;
  */
 class ReferenceTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The entity type manager service mock.
    *
@@ -45,7 +47,7 @@ class ReferenceTest extends UnitTestCase {
   /**
    * Setup mocks and a reference plugin for all tests.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->entityTypeManager = $this->prophesize(EntityTypeManagerInterface::class);
     $this->entityStorageHandler = $this->prophesize(EntityStorageInterface::class);
