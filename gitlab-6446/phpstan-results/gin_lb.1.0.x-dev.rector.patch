diff --git a/gin_lb.module b/gin_lb.module
index cb077b8..e20032c 100644
--- a/gin_lb.module
+++ b/gin_lb.module
@@ -764,7 +764,7 @@ function gin_lb_css_alter(&$css, AttachedAssetsInterface $assets) {
     $stable_themes = ['stable', 'stable9'];
     foreach ($stable_themes as $stable_theme) {
       if ($theme_handler->themeExists($stable_theme)) {
-        $stable_theme_css = drupal_get_path('theme', $stable_theme) . '/css';
+        $stable_theme_css = \Drupal::service('extension.list.theme')->getPath($stable_theme) . '/css';
         // Remove very specific CSS files that this module is overriding.
         unset($css[$stable_theme_css . '/layout_builder/layout-builder.css']);
         unset($css[$stable_theme_css . '/core/dialog/off-canvas.theme.css']);
diff --git a/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php b/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php
index abbee31..691c5dd 100644
--- a/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php
+++ b/src/EventSubscriber/LayoutBuilderBrowserEventSubscriber.php
@@ -2,8 +2,8 @@
 
 namespace Drupal\gin_lb\EventSubscriber;
 
+use Symfony\Component\HttpKernel\Event\ViewEvent;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent;
 use Symfony\Component\HttpKernel\KernelEvents;
 
 /**
@@ -16,7 +16,7 @@ class LayoutBuilderBrowserEventSubscriber implements EventSubscriberInterface {
   /**
    * Add layout-builder-browser class layout_builder.choose_block build block.
    */
-  public function onView(GetResponseForControllerResultEvent $event) {
+  public function onView(ViewEvent $event) {
     $request = $event->getRequest();
     $route = $request->attributes->get('_route');
 
