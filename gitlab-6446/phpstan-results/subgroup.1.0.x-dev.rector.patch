diff --git a/src/Event/GroupLeafEvent.php b/src/Event/GroupLeafEvent.php
index 9ba7506..daad3b4 100644
--- a/src/Event/GroupLeafEvent.php
+++ b/src/Event/GroupLeafEvent.php
@@ -2,8 +2,8 @@
 
 namespace Drupal\subgroup\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\group\Entity\GroupInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * Defines the event for group leaf status changes.
diff --git a/src/Event/GroupTypeLeafEvent.php b/src/Event/GroupTypeLeafEvent.php
index a832a06..8ef3fbe 100644
--- a/src/Event/GroupTypeLeafEvent.php
+++ b/src/Event/GroupTypeLeafEvent.php
@@ -2,8 +2,8 @@
 
 namespace Drupal\subgroup\Event;
 
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\group\Entity\GroupTypeInterface;
-use Symfony\Component\EventDispatcher\Event;
 
 /**
  * Defines the event for group type leaf status changes.
diff --git a/subgroup.module b/subgroup.module
index a5d06f5..f51802c 100644
--- a/subgroup.module
+++ b/subgroup.module
@@ -90,10 +90,10 @@ function subgroup_group_update(GroupInterface $group) {
     $event_dispatcher = \Drupal::service('event_dispatcher');
     $event = new GroupLeafEvent($group);
     if ($current_is_leaf) {
-      $event_dispatcher->dispatch(LeafEvents::GROUP_LEAF_ADD, $event);
+      $event_dispatcher->dispatch($event, LeafEvents::GROUP_LEAF_ADD);
     }
     else {
-      $event_dispatcher->dispatch(LeafEvents::GROUP_LEAF_REMOVE, $event);
+      $event_dispatcher->dispatch($event, LeafEvents::GROUP_LEAF_REMOVE);
     }
   }
 }
@@ -112,7 +112,7 @@ function subgroup_group_type_insert(GroupTypeInterface $group_type) {
     /** @var \Drupal\Component\EventDispatcher\ContainerAwareEventDispatcher $event_dispatcher */
     $event_dispatcher = \Drupal::service('event_dispatcher');
     $event = new GroupTypeLeafEvent($group_type);
-    $event_dispatcher->dispatch(LeafEvents::GROUP_TYPE_LEAF_IMPORT, $event);
+    $event_dispatcher->dispatch($event, LeafEvents::GROUP_TYPE_LEAF_IMPORT);
   }
 }
 
@@ -135,13 +135,13 @@ function subgroup_group_type_update(GroupTypeInterface $group_type) {
     $event_dispatcher = \Drupal::service('event_dispatcher');
     $event = new GroupTypeLeafEvent($group_type);
     if ($group_type->isSyncing()) {
-      $event_dispatcher->dispatch(LeafEvents::GROUP_TYPE_LEAF_IMPORT, $event);
+      $event_dispatcher->dispatch($event, LeafEvents::GROUP_TYPE_LEAF_IMPORT);
     }
     elseif ($current_is_leaf) {
-      $event_dispatcher->dispatch(LeafEvents::GROUP_TYPE_LEAF_ADD, $event);
+      $event_dispatcher->dispatch($event, LeafEvents::GROUP_TYPE_LEAF_ADD);
     }
     else {
-      $event_dispatcher->dispatch(LeafEvents::GROUP_TYPE_LEAF_REMOVE, $event);
+      $event_dispatcher->dispatch($event, LeafEvents::GROUP_TYPE_LEAF_REMOVE);
     }
   }
 }
diff --git a/tests/src/Kernel/GroupContentDeleteTest.php b/tests/src/Kernel/GroupContentDeleteTest.php
index b81d021..cb978f9 100644
--- a/tests/src/Kernel/GroupContentDeleteTest.php
+++ b/tests/src/Kernel/GroupContentDeleteTest.php
@@ -29,7 +29,7 @@ class GroupContentDeleteTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->subgroupHandler = $this->entityTypeManager->getHandler('group_type', 'subgroup');
     $this->storage = $this->entityTypeManager->getStorage('group_content');
diff --git a/tests/src/Kernel/GroupContentInsertTest.php b/tests/src/Kernel/GroupContentInsertTest.php
index 48cb5b8..8812484 100644
--- a/tests/src/Kernel/GroupContentInsertTest.php
+++ b/tests/src/Kernel/GroupContentInsertTest.php
@@ -33,7 +33,7 @@ class GroupContentInsertTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->groupSubgroupHandler = $this->entityTypeManager->getHandler('group', 'subgroup');
     $this->groupTypeSubgroupHandler = $this->entityTypeManager->getHandler('group_type', 'subgroup');
diff --git a/tests/src/Kernel/GroupCreateTest.php b/tests/src/Kernel/GroupCreateTest.php
index 73926da..1e86a6c 100644
--- a/tests/src/Kernel/GroupCreateTest.php
+++ b/tests/src/Kernel/GroupCreateTest.php
@@ -21,7 +21,7 @@ class GroupCreateTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->accessControlHandler = $this->entityTypeManager->getAccessControlHandler('group');
diff --git a/tests/src/Kernel/GroupDeleteTest.php b/tests/src/Kernel/GroupDeleteTest.php
index 6e7f51e..a1f3dfa 100644
--- a/tests/src/Kernel/GroupDeleteTest.php
+++ b/tests/src/Kernel/GroupDeleteTest.php
@@ -22,7 +22,7 @@ class GroupDeleteTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->subgroupHandler = $this->entityTypeManager->getHandler('group', 'subgroup');
diff --git a/tests/src/Kernel/GroupLeafTest.php b/tests/src/Kernel/GroupLeafTest.php
index dc28bee..242999d 100644
--- a/tests/src/Kernel/GroupLeafTest.php
+++ b/tests/src/Kernel/GroupLeafTest.php
@@ -23,7 +23,7 @@ class GroupLeafTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $group_type = $this->createGroupType();
diff --git a/tests/src/Kernel/GroupSubgroupHandlerTest.php b/tests/src/Kernel/GroupSubgroupHandlerTest.php
index 9a42236..11ca6c0 100644
--- a/tests/src/Kernel/GroupSubgroupHandlerTest.php
+++ b/tests/src/Kernel/GroupSubgroupHandlerTest.php
@@ -87,7 +87,7 @@ class GroupSubgroupHandlerTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->subgroupHandler = $this->entityTypeManager->getHandler('group', 'subgroup');
 
diff --git a/tests/src/Kernel/GroupTypeDeleteTest.php b/tests/src/Kernel/GroupTypeDeleteTest.php
index b9e02ab..d458bba 100644
--- a/tests/src/Kernel/GroupTypeDeleteTest.php
+++ b/tests/src/Kernel/GroupTypeDeleteTest.php
@@ -22,7 +22,7 @@ class GroupTypeDeleteTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->subgroupHandler = $this->entityTypeManager->getHandler('group_type', 'subgroup');
diff --git a/tests/src/Kernel/GroupTypeLeafImportTest.php b/tests/src/Kernel/GroupTypeLeafImportTest.php
index 8285368..923e603 100644
--- a/tests/src/Kernel/GroupTypeLeafImportTest.php
+++ b/tests/src/Kernel/GroupTypeLeafImportTest.php
@@ -21,7 +21,7 @@ class GroupTypeLeafImportTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // The system.site key is required for import validation.
diff --git a/tests/src/Kernel/GroupTypeLeafTest.php b/tests/src/Kernel/GroupTypeLeafTest.php
index cd1d12a..e190058 100644
--- a/tests/src/Kernel/GroupTypeLeafTest.php
+++ b/tests/src/Kernel/GroupTypeLeafTest.php
@@ -23,7 +23,7 @@ class GroupTypeLeafTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $group_type = $this->createGroupType([
       'third_party_settings' => [
diff --git a/tests/src/Kernel/GroupTypeSubgroupHandlerTest.php b/tests/src/Kernel/GroupTypeSubgroupHandlerTest.php
index 457efb3..2687f6f 100644
--- a/tests/src/Kernel/GroupTypeSubgroupHandlerTest.php
+++ b/tests/src/Kernel/GroupTypeSubgroupHandlerTest.php
@@ -64,7 +64,7 @@ class GroupTypeSubgroupHandlerTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->subgroupHandler = $this->entityTypeManager->getHandler('group_type', 'subgroup');
 
diff --git a/tests/src/Kernel/GroupViewTest.php b/tests/src/Kernel/GroupViewTest.php
index 6446c2d..22c20c5 100644
--- a/tests/src/Kernel/GroupViewTest.php
+++ b/tests/src/Kernel/GroupViewTest.php
@@ -22,7 +22,7 @@ class GroupViewTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig('subgroup_test_views');
diff --git a/tests/src/Kernel/InheritedGroupPermissionCalculatorTest.php b/tests/src/Kernel/InheritedGroupPermissionCalculatorTest.php
index ebf3387..f9c82ae 100644
--- a/tests/src/Kernel/InheritedGroupPermissionCalculatorTest.php
+++ b/tests/src/Kernel/InheritedGroupPermissionCalculatorTest.php
@@ -19,7 +19,7 @@ class InheritedGroupPermissionCalculatorTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set up some group types to form a tree.
diff --git a/tests/src/Kernel/RoleInheritanceAccessControlHandlerTest.php b/tests/src/Kernel/RoleInheritanceAccessControlHandlerTest.php
index 216f1df..bc5633d 100644
--- a/tests/src/Kernel/RoleInheritanceAccessControlHandlerTest.php
+++ b/tests/src/Kernel/RoleInheritanceAccessControlHandlerTest.php
@@ -29,7 +29,7 @@ class RoleInheritanceAccessControlHandlerTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->accessControlHandler = $this->entityTypeManager->getAccessControlHandler('subgroup_role_inheritance');
diff --git a/tests/src/Kernel/RoleInheritanceStorageTest.php b/tests/src/Kernel/RoleInheritanceStorageTest.php
index b37a37d..64710da 100644
--- a/tests/src/Kernel/RoleInheritanceStorageTest.php
+++ b/tests/src/Kernel/RoleInheritanceStorageTest.php
@@ -39,7 +39,7 @@ class RoleInheritanceStorageTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set up two group types to form a tree.
diff --git a/tests/src/Kernel/RoleInheritanceTest.php b/tests/src/Kernel/RoleInheritanceTest.php
index f12ab25..ecb21cb 100644
--- a/tests/src/Kernel/RoleInheritanceTest.php
+++ b/tests/src/Kernel/RoleInheritanceTest.php
@@ -22,7 +22,7 @@ class RoleInheritanceTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Set up two group types to form a tree.
diff --git a/tests/src/Kernel/SubgroupFieldManagerTest.php b/tests/src/Kernel/SubgroupFieldManagerTest.php
index 1f44e63..fb3d1f8 100644
--- a/tests/src/Kernel/SubgroupFieldManagerTest.php
+++ b/tests/src/Kernel/SubgroupFieldManagerTest.php
@@ -34,7 +34,7 @@ class SubgroupFieldManagerTest extends SubgroupKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->fieldManager = $this->container->get('subgroup.field_manager');
     $this->groupType = $this->createGroupType();
diff --git a/tests/src/Kernel/SubgroupKernelTestBase.php b/tests/src/Kernel/SubgroupKernelTestBase.php
index 16b15d8..ab16df6 100644
--- a/tests/src/Kernel/SubgroupKernelTestBase.php
+++ b/tests/src/Kernel/SubgroupKernelTestBase.php
@@ -33,7 +33,7 @@ abstract class SubgroupKernelTestBase extends EntityKernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installEntitySchema('group');
diff --git a/tests/src/Unit/GroupTypeLeafSubscriberTest.php b/tests/src/Unit/GroupTypeLeafSubscriberTest.php
index f31974f..f068d82 100644
--- a/tests/src/Unit/GroupTypeLeafSubscriberTest.php
+++ b/tests/src/Unit/GroupTypeLeafSubscriberTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\subgroup\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\group\Entity\GroupContentTypeInterface;
 use Drupal\group\Entity\GroupTypeInterface;
@@ -24,6 +25,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class GroupTypeLeafSubscriberTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The event subscriber to test.
    *
@@ -62,7 +64,7 @@ class GroupTypeLeafSubscriberTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->subgroupHandler = $this->prophesize(SubgroupHandlerInterface::class);
diff --git a/tests/src/Unit/SubgroupHandlerBaseTest.php b/tests/src/Unit/SubgroupHandlerBaseTest.php
index bdb768b..15930a2 100644
--- a/tests/src/Unit/SubgroupHandlerBaseTest.php
+++ b/tests/src/Unit/SubgroupHandlerBaseTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\subgroup\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Entity\EntityTypeInterface;
@@ -21,6 +22,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class SubgroupHandlerBaseTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The base subgroup handler.
    *
@@ -45,7 +47,7 @@ class SubgroupHandlerBaseTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->entity = $this->prophesize(EntityInterface::class);
diff --git a/tests/src/Unit/TreeCacheTagInvalidatorTest.php b/tests/src/Unit/TreeCacheTagInvalidatorTest.php
index ea87aa7..e851024 100644
--- a/tests/src/Unit/TreeCacheTagInvalidatorTest.php
+++ b/tests/src/Unit/TreeCacheTagInvalidatorTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\subgroup\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Cache\CacheTagsInvalidatorInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\group\Entity\GroupInterface;
@@ -21,6 +22,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class TreeCacheTagInvalidatorTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * The event subscriber to test.
    *
@@ -59,7 +61,7 @@ class TreeCacheTagInvalidatorTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->groupSubgroupHandler = $this->prophesize(SubgroupHandlerInterface::class);
