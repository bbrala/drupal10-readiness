modules/contrib/tellstick/src/Plugin/views/field/TellstickHandlerFieldSensor.php
modules/contrib/tellstick/src/Access/TellstickDataAccessControlHandler.php
modules/contrib/tellstick/src/Controller/TellstickSensorUpdateController.php
modules/contrib/tellstick/src/Entity/TellstickData.php
modules/contrib/tellstick/src/Plugin/views/filter/TellstickHandlerFilterData.php
modules/contrib/tellstick/src/Plugin/views/filter/TellstickHandlerFilterDataSensor.php
modules/contrib/tellstick/src/Plugin/views/filter/TellstickHandlerFilterSensor.php
modules/contrib/tellstick/src/Entity/TellstickDataInterface.php
modules/contrib/tellstick/src/Entity/TellstickDataViewsData.php
modules/contrib/tellstick/src/Plugin/views/sort/TellstickHandlerSortSensor.php
modules/contrib/tellstick/src/Entity/TellstickSensor.php
modules/contrib/tellstick/src/TellstickDataListBuilder.php
modules/contrib/tellstick/src/TellstickLiveService.php
modules/contrib/tellstick/src/Entity/TellstickSensorInterface.php
modules/contrib/tellstick/src/Entity/TellstickSensorViewsData.php
modules/contrib/tellstick/src/Form/TellstickBlockSettingForm.php
modules/contrib/tellstick/src/TellstickSensorHelper.php
modules/contrib/tellstick/src/Form/TellstickDataItemDeleteForm.php
modules/contrib/tellstick/src/TellstickSensorHtmlRouteProvider.php
modules/contrib/tellstick/src/TellstickSensorListBuilder.php
modules/contrib/tellstick/src/Form/TellstickDataItemForm.php
modules/contrib/tellstick/src/Form/TellstickSensorDeleteForm.php
modules/contrib/tellstick/src/TellstickService.php
modules/contrib/tellstick/src/Form/TellstickSensorSettingForm.php
modules/contrib/tellstick/src/Form/TellstickSensorToggleForm.php
modules/contrib/tellstick/src/Form/TellstickSettingForm.php
modules/contrib/tellstick/src/TellstickServiceInterface.php
modules/contrib/tellstick/tellstick.install
modules/contrib/tellstick/tellstick.module
modules/contrib/tellstick/src/Plugin/Block/TellstickBlock.php
modules/contrib/tellstick/src/Plugin/views/field/TellstickHandlerFieldData.php

3 files with changes
====================

1) modules/contrib/tellstick/tellstick.module:71

    ---------- begin diff ----------
@@ @@
     $tellstick_data = TellstickData::create([
       'sensor' => $attrib['id'],
       'data' => serialize($values),
-      'created' => REQUEST_TIME,
+      'created' => \Drupal::time()->getRequestTime(),
     ]);
     $tellstick_data->save();
   }
@@ @@
     ->get('database_lifetime');

   // Remove only once a day.
-  $midnight = strtotime(date('Y-m-d', REQUEST_TIME));
+  $midnight = strtotime(date('Y-m-d', \Drupal::time()->getRequestTime()));
   if ($lifetime <> 0) {
     $database = \Drupal::database();
     $tellstickService = \Drupal::service('tellstick');
@@ @@
     if ($records_removed <> 0) {
       $message = t('Cleaned out @number sensor records older than @lifetime', [
         '@number' => $records_removed,
-        '@lifetime' => date('Y-m-d', REQUEST_TIME - $lifetime * 24 * 60 * 60),
+        '@lifetime' => date('Y-m-d', \Drupal::time()->getRequestTime() - $lifetime * 24 * 60 * 60),
       ]);
       \Drupal::logger('tellstick')
         ->notice($message);
@@ @@
 function tellstick_views_api() {
   return [
     'api' => 3,
-    'path' => drupal_get_path('module', 'tellstick') . '/views',
+    'path' => \Drupal::service('extension.list.module')->getPath('tellstick') . '/views',
   ];
 }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * RequestTimeConstRector
 * ArgumentRemoverRector


2) modules/contrib/tellstick/src/TellstickService.php:90

    ---------- begin diff ----------
@@ @@
     // If this is the first time force an update.
     // If it is more than 1 h also force an update.
     $update = empty($sensor) ? TRUE :
-      $sensor->get('changed')->value < REQUEST_TIME - 1 * 60 * 60;
+      $sensor->get('changed')->value < \Drupal::time()->getRequestTime() - 1 * 60 * 60;
     if ($update) {
       // Try first loading from the Telldus Live instead.
       $live_sensor = $this->tellstickLiveService
@@ @@
             'ignored' => (string) $ignored,
             // Use the last update from Tellstick Live!.
             'changed' => (string) $changed,
-            'created' => REQUEST_TIME,
+            'created' => \Drupal::time()->getRequestTime(),
             'weight' => 0,
             'data' => serialize($data),
           ]);
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector


3) modules/contrib/tellstick/src/Controller/TellstickSensorUpdateController.php:84

    ---------- begin diff ----------
@@ @@
       }
     }
     // Save the last run time for this Controller.
-    \Drupal::state()->set('tellstick.sensor_update', REQUEST_TIME);
+    \Drupal::state()->set('tellstick.sensor_update', \Drupal::time()->getRequestTime());
     // Set message with number of sensors imported.
     $message = $this->t('A total of @updateCount sensor(s) updated out of @sensorCount checked.', [
       '@sensorCount' => $sensorCount,
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 3 files have been changed by Rector                                       

