diff --git a/gammu_smsd.module b/gammu_smsd.module
index 3eec287..4e03eff 100644
--- a/gammu_smsd.module
+++ b/gammu_smsd.module
@@ -17,7 +17,7 @@ function gammu_smsd_help($route_name, RouteMatchInterface $route_match) {
       $config = \Drupal::config('gammu_smsd.settings');
       $token = $config->get('gammu_token');
       include_once \Drupal::root() . '/core/themes/engines/twig/twig.engine';
-      return twig_render_template(drupal_get_path('module', 'gammu_smsd') . '/templates/gammu-smsd-help-body.html.twig', array(
+      return twig_render_template(\Drupal::service('extension.list.module')->getPath('gammu_smsd') . '/templates/gammu-smsd-help-body.html.twig', array(
         'token' => $token,
         'theme_hook_original' => 'not-applicable',
       ));
diff --git a/src/Form/SmsSettingsForm.php b/src/Form/SmsSettingsForm.php
index a3b78b8..ca63f18 100644
--- a/src/Form/SmsSettingsForm.php
+++ b/src/Form/SmsSettingsForm.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\gammu_smsd\Form;
 
+use Drupal\field\Entity\FieldConfig;
 use Drupal\Component\Utility\Random;
 use Drupal\Core\Form\ConfigFormBase;
 use Drupal\Core\Form\FormStateInterface;
@@ -227,7 +228,7 @@ class SmsSettingsForm extends ConfigFormBase {
         }
         foreach ($fields as $field_name => $bundles) {
           $bundle = array_key_first($bundles['bundles']);
-          $field = \Drupal\field\Entity\FieldConfig::loadByName($entity_type, $bundle, $field_name);
+          $field = FieldConfig::loadByName($entity_type, $bundle, $field_name);
           $options["$entity_type|$field_name|$bundle"] = $field->getLabel() . " - $bundle";
         }
       }
@@ -270,7 +271,7 @@ class SmsSettingsForm extends ConfigFormBase {
           if (!empty($phone_bundle) && $bundle != $phone_bundle) {
             continue;
           }
-          $field = \Drupal\field\Entity\FieldConfig::loadByName($entity_type, $bundle, $field_name);
+          $field = FieldConfig::loadByName($entity_type, $bundle, $field_name);
           if ($field) {
             $options[$field_name] = $field->getLabel();
           }
diff --git a/src/GammuDatabase.php b/src/GammuDatabase.php
index 519b190..7a5304c 100644
--- a/src/GammuDatabase.php
+++ b/src/GammuDatabase.php
@@ -2,13 +2,14 @@
 
 namespace Drupal\gammu_smsd;
 
+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Database\Database;
 use PDOException;
 
 class GammuDatabase {
 
-  protected \Drupal\Core\Config\ImmutableConfig $config;
+  protected ImmutableConfig $config;
   protected $connection;
   /**
    *
@@ -72,7 +73,7 @@ class GammuDatabase {
 
   public function gammu_message_detail($Number, $phone_name, $phone_num, $time) {
     include_once \Drupal::root() . '/core/themes/engines/twig/twig.engine';
-    return twig_render_template(drupal_get_path('module', 'gammu_smsd') . '/templates/gammu-smsd-message.html.twig', [
+    return twig_render_template(\Drupal::service('extension.list.module')->getPath('gammu_smsd') . '/templates/gammu-smsd-message.html.twig', [
       'tel' => $Number,
       'phone_name' => $phone_name,
       'phone_num' => $phone_num,
