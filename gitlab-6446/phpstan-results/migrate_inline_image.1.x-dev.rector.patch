diff --git a/src/Plugin/migrate/process/SaveInlineImage.php b/src/Plugin/migrate/process/SaveInlineImage.php
index afa6163..299f034 100644
--- a/src/Plugin/migrate/process/SaveInlineImage.php
+++ b/src/Plugin/migrate/process/SaveInlineImage.php
@@ -75,7 +75,7 @@ class SaveInlineImage extends ProcessPluginBase {
     $this->createPath($save_path);
 
     $info = pathinfo($source_path);
-    $file = file_save_data(file_get_contents($source_path),$save_path.'/'.$info['basename']);
+    $file = \Drupal::service('file.repository')->writeData(file_get_contents($source_path), $save_path.'/'.$info['basename']);
 
     if ($file === false) throw new MigrateException('Fail on saving file ' . $source_path);
 
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index 87316d1..a0702f4 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -29,7 +29,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
