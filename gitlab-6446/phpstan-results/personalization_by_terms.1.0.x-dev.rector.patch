diff --git a/src/Controller/VisitedTermsController.php b/src/Controller/VisitedTermsController.php
index 16c77c0..187d040 100644
--- a/src/Controller/VisitedTermsController.php
+++ b/src/Controller/VisitedTermsController.php
@@ -117,7 +117,7 @@ class VisitedTermsController extends ControllerBase implements ContainerInjectio
           ]));
         }
         else {
-          $link = $visited_terms->link($date);
+          $link = $visited_terms->toLink($date)->toString();
         }
 
         $row = [];
diff --git a/src/Form/VisitedTermsRevisionDeleteForm.php b/src/Form/VisitedTermsRevisionDeleteForm.php
index 56b5c41..ffe4b5b 100644
--- a/src/Form/VisitedTermsRevisionDeleteForm.php
+++ b/src/Form/VisitedTermsRevisionDeleteForm.php
@@ -57,7 +57,7 @@ class VisitedTermsRevisionDeleteForm extends ConfirmFormBase {
    */
   public function getQuestion() {
     return $this->t('Are you sure you want to delete the revision from %revision-date?', [
-      '%revision-date' => format_date($this->revision->getRevisionCreationTime()),
+      '%revision-date' => \Drupal::service('date.formatter')->format($this->revision->getRevisionCreationTime()),
     ]);
   }
 
@@ -92,7 +92,7 @@ class VisitedTermsRevisionDeleteForm extends ConfirmFormBase {
     $this->VisitedTermsStorage->deleteRevision($this->revision->getRevisionId());
 
     $this->logger('content')->notice('Visited terms: deleted %title revision %revision.', ['%title' => $this->revision->label(), '%revision' => $this->revision->getRevisionId()]);
-    $this->messenger()->addMessage(t('Revision from %revision-date of Visited terms %title has been deleted.', ['%revision-date' => format_date($this->revision->getRevisionCreationTime()), '%title' => $this->revision->label()]));
+    $this->messenger()->addMessage(t('Revision from %revision-date of Visited terms %title has been deleted.', ['%revision-date' => \Drupal::service('date.formatter')->format($this->revision->getRevisionCreationTime()), '%title' => $this->revision->label()]));
     $form_state->setRedirect(
       'entity.visited_terms.canonical',
        ['visited_terms' => $this->revision->id()]
diff --git a/src/Form/VisitedTermsRevisionRevertForm.php b/src/Form/VisitedTermsRevisionRevertForm.php
index 8886dbd..ceca731 100644
--- a/src/Form/VisitedTermsRevisionRevertForm.php
+++ b/src/Form/VisitedTermsRevisionRevertForm.php
@@ -129,7 +129,7 @@ class VisitedTermsRevisionRevertForm extends ConfirmFormBase {
   protected function prepareRevertedRevision(VisitedTermsInterface $revision, FormStateInterface $form_state) {
     $revision->setNewRevision();
     $revision->isDefaultRevision(TRUE);
-    $revision->setRevisionCreationTime(REQUEST_TIME);
+    $revision->setRevisionCreationTime(\Drupal::time()->getRequestTime());
 
     return $revision;
   }
