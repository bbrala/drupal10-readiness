diff --git a/alt_login.module b/alt_login.module
index 6cf0100..3f2aa7d 100644
--- a/alt_login.module
+++ b/alt_login.module
@@ -82,7 +82,7 @@ function alt_login_form_alter(&$form, $form_state, $form_id) {
     if (empty($aliases['username'])) {
       if ($user->isNew()) {
         $namefield['#access'] = FALSE;
-        $namefield['#value'] = user_password(8);
+        $namefield['#value'] = \Drupal::service('password_generator')->generate(8);
       }
       elseif (count($aliases) == 1) {
         $namefield = [
