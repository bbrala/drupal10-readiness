diff --git a/src/ElementreeBaseProvider.php b/src/ElementreeBaseProvider.php
index 21575d9..183721d 100644
--- a/src/ElementreeBaseProvider.php
+++ b/src/ElementreeBaseProvider.php
@@ -163,8 +163,8 @@ class ElementreeBaseProvider implements ElementreeBaseProviderInterface {
                 ->load($file_id);
 
               if (!empty($file)) {
-                $absolute_path = file_create_url($file->getFileUri());
-                $label_values[$label_key] = file_url_transform_relative($absolute_path);
+                $absolute_path = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
+                $label_values[$label_key] = \Drupal::service('file_url_generator')->transformRelative($absolute_path);
               }
               else {
                 unset($label_key[$label_key]);
