diff --git a/includes/popup.util.inc b/includes/popup.util.inc
index b17481a..b4406b8 100644
--- a/includes/popup.util.inc
+++ b/includes/popup.util.inc
@@ -7,14 +7,14 @@ function _popup_title($title, $path) {
   if ($path){
     global $theme;
 
-    $theme_path = drupal_get_path('theme', $theme) . '/' . $path;
+    $theme_path = \Drupal::service('extension.list.theme')->getPath($theme) . '/' . $path;
     $files_path = \Drupal::config('system.file')->get('default_scheme') . '://' . $path;
 
     $candidates = array_keys(
       array_filter(
         array(
           $path => file_exists(realpath($path)), // Relative to drupal install
-          file_create_url($files_path) => file_exists(\Drupal::service('file_system')->realpath($files_path)), // Relative to the files folder
+          \Drupal::service('file_url_generator')->generateAbsoluteString($files_path) => file_exists(\Drupal::service('file_system')->realpath($files_path)), // Relative to the files folder
           $theme_path => file_exists(realpath($theme_path)), // Relative to theme
         )
       )
diff --git a/modules/popup_block/popup_block.module b/modules/popup_block/popup_block.module
index dd4d5bf..dab74d2 100644
--- a/modules/popup_block/popup_block.module
+++ b/modules/popup_block/popup_block.module
@@ -95,7 +95,7 @@ function popup_block_features_api() {
       'name' => t('Popup blocks'),
       'default_hook' => 'popupblock_defaults',
       'default_file' => FEATURES_DEFAULTS_INCLUDED_COMMON,
-      'file' => drupal_get_path('module', 'popup_block') .'/includes/popup_block.features.inc',
+      'file' => \Drupal::service('extension.list.module')->getPath('popup_block') .'/includes/popup_block.features.inc',
     ),
 	);
 }
diff --git a/modules/popup_descriptions/popup_descriptions.module b/modules/popup_descriptions/popup_descriptions.module
index b7f0d82..8b512c1 100644
--- a/modules/popup_descriptions/popup_descriptions.module
+++ b/modules/popup_descriptions/popup_descriptions.module
@@ -7,7 +7,7 @@
  */
 function popup_descriptions_menu(){
 
-  $path = drupal_get_path('module', 'popup_descriptions');
+  $path = \Drupal::service('extension.list.module')->getPath('popup_descriptions');
 
   return array(
 
@@ -46,7 +46,7 @@ function popup_descriptions_form_alter(&$form, &$form_state, $form_id){
   $admin_links = \Drupal::state()->get('description-popup-admin', FALSE);
 
   if ($access && $admin_links){
-    drupal_add_css(drupal_get_path('module', 'popup_descriptions') . '/style/popup-descriptions.css');
+    drupal_add_css(\Drupal::service('extension.list.module')->getPath('popup_descriptions') . '/style/popup-descriptions.css');
   }
 
 }
diff --git a/modules/popup_filter/includes/popup_filter.admin.inc b/modules/popup_filter/includes/popup_filter.admin.inc
index 519b735..b499ae9 100644
--- a/modules/popup_filter/includes/popup_filter.admin.inc
+++ b/modules/popup_filter/includes/popup_filter.admin.inc
@@ -4,8 +4,8 @@
 
 function popup_filter_insert_form(){
 
-  drupal_add_css(drupal_get_path('module', 'popup_filter').'/popup-filter-admin.css');
-  drupal_add_js(drupal_get_path('module', 'popup_filter').'/popup-filter-admin.js');
+  drupal_add_css(\Drupal::service('extension.list.module')->getPath('popup_filter').'/popup-filter-admin.css');
+  drupal_add_js(\Drupal::service('extension.list.module')->getPath('popup_filter').'/popup-filter-admin.js');
 
   module_load_include('inc', 'popup', 'includes/popup.util');
 
diff --git a/modules/popup_filter/includes/popup_filter_form.php b/modules/popup_filter/includes/popup_filter_form.php
index 7240c04..36fae23 100644
--- a/modules/popup_filter/includes/popup_filter_form.php
+++ b/modules/popup_filter/includes/popup_filter_form.php
@@ -1,4 +1,3 @@
-
 <div  class="popup-filter-form-wrapper">
 
   <div  class="popup-attributes">
diff --git a/modules/popup_filter/popup_filter.module b/modules/popup_filter/popup_filter.module
index f531dc7..b50b540 100644
--- a/modules/popup_filter/popup_filter.module
+++ b/modules/popup_filter/popup_filter.module
@@ -11,7 +11,7 @@
  */
 function popup_filter_menu(){
 
-  $path = drupal_get_path('module', 'popup_filter');
+  $path = \Drupal::service('extension.list.module')->getPath('popup_filter');
 
   return array(
 
diff --git a/modules/popup_menu/popup_menu.module b/modules/popup_menu/popup_menu.module
index 843187f..17b8c84 100644
--- a/modules/popup_menu/popup_menu.module
+++ b/modules/popup_menu/popup_menu.module
@@ -133,7 +133,7 @@ function popup_menu_features_api() {
       'name' => t('Popup menus'),
       'default_hook' => 'popupmenu_defaults',
       'default_file' => FEATURES_DEFAULTS_INCLUDED_COMMON,
-      'file' => drupal_get_path('module', 'popup_menu') .'/includes/popup_menu.features.inc',
+      'file' => \Drupal::service('extension.list.module')->getPath('popup_menu') .'/includes/popup_menu.features.inc',
     ),
 	);
 }
diff --git a/modules/popup_ui/includes/popup_ui.admin.inc b/modules/popup_ui/includes/popup_ui.admin.inc
index f76f8ec..ec27415 100644
--- a/modules/popup_ui/includes/popup_ui.admin.inc
+++ b/modules/popup_ui/includes/popup_ui.admin.inc
@@ -8,8 +8,8 @@
 
 function popup_ui_form_formatters($form, &$form_state){
 
-  drupal_add_css(drupal_get_path('module', 'popup_ui').'/style/popup-ui.css');
-  drupal_add_css(drupal_get_path('module', 'popup_ui').'/style/popup-ui.css');
+  drupal_add_css(\Drupal::service('extension.list.module')->getPath('popup_ui').'/style/popup-ui.css');
+  drupal_add_css(\Drupal::service('extension.list.module')->getPath('popup_ui').'/style/popup-ui.css');
 
 	$options = _popup_ui_form_options();
   $formatters = _popup_ui_formatter_settings();
diff --git a/modules/popup_ui/includes/popup_ui.api.inc b/modules/popup_ui/includes/popup_ui.api.inc
index a5302d3..7098803 100644
--- a/modules/popup_ui/includes/popup_ui.api.inc
+++ b/modules/popup_ui/includes/popup_ui.api.inc
@@ -25,7 +25,7 @@
 function popup_ui_confirm($title, $message, $confirm_path, $attributes = array()){
 
   module_load_include('inc', 'popup', 'includes/popup.api');
-  drupal_add_css(drupal_get_path('module', 'popup_ui').'/style/popup-confirm.css');
+  drupal_add_css(\Drupal::service('extension.list.module')->getPath('popup_ui').'/style/popup-confirm.css');
   
   $confirm_title = isset($attributes['confirm label'])
     ? $attributes['confirm label']
diff --git a/modules/popup_ui/popup_ui.module b/modules/popup_ui/popup_ui.module
index 7691a54..3d354e7 100644
--- a/modules/popup_ui/popup_ui.module
+++ b/modules/popup_ui/popup_ui.module
@@ -107,7 +107,7 @@ function popup_ui_features_api() {
       'default_hook' => 'popupformat_defaults',
       'default_file' => FEATURES_DEFAULTS_INCLUDED_COMMON,
       'file' =>
-        drupal_get_path('module', 'popup_ui') .
+        \Drupal::service('extension.list.module')->getPath('popup_ui') .
         '/includes/popup_ui.features.inc',
     ),
 	);
diff --git a/src/Utility/DescriptionTemplateTrait.php b/src/Utility/DescriptionTemplateTrait.php
index 7fc73ad..a29684c 100644
--- a/src/Utility/DescriptionTemplateTrait.php
+++ b/src/Utility/DescriptionTemplateTrait.php
@@ -72,7 +72,7 @@ trait DescriptionTemplateTrait {
    *   Path string.
    */
   protected function getDescriptionTemplatePath() {
-    return drupal_get_path('module', $this->getModuleName()) . "/templates/description.html.twig";
+    return \Drupal::service('extension.list.module')->getPath($this->getModuleName()) . "/templates/description.html.twig";
   }
 
 }
