diff --git a/src/Plugin/CKEditorPlugin/HTMLCodeSniffer.php b/src/Plugin/CKEditorPlugin/HTMLCodeSniffer.php
index c0dbdff..9fc7061 100644
--- a/src/Plugin/CKEditorPlugin/HTMLCodeSniffer.php
+++ b/src/Plugin/CKEditorPlugin/HTMLCodeSniffer.php
@@ -47,7 +47,7 @@ class HTMLCodeSniffer extends CKEditorPluginBase implements CKEditorPluginConfig
    * {@inheritdoc}
    */
   public function getFile() {
-    return drupal_get_path('module', 'ckeditor_accessibility_auditor') . '/js/plugins/html_codesniffer/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('ckeditor_accessibility_auditor') . '/js/plugins/html_codesniffer/plugin.js';
   }
 
   /**
@@ -57,7 +57,7 @@ class HTMLCodeSniffer extends CKEditorPluginBase implements CKEditorPluginConfig
     return [
       'HTML_CodeSniffer' => [
         'label' => $this->t('Accessibility Auditor (HTML_CodeSniffer)'),
-        'image' => drupal_get_path('module', 'ckeditor_accessibility_auditor') . '/js/plugins/html_codesniffer/icons/html_codesniffer.png',
+        'image' => \Drupal::service('extension.list.module')->getPath('ckeditor_accessibility_auditor') . '/js/plugins/html_codesniffer/icons/html_codesniffer.png',
       ],
     ];
   }
diff --git a/tests/src/FunctionalJavascript/HTMLCodeSnifferTest.php b/tests/src/FunctionalJavascript/HTMLCodeSnifferTest.php
index b962f77..c01b92a 100644
--- a/tests/src/FunctionalJavascript/HTMLCodeSnifferTest.php
+++ b/tests/src/FunctionalJavascript/HTMLCodeSnifferTest.php
@@ -37,7 +37,7 @@ class HTMLCodeSnifferTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a text format and associate CKEditor.
@@ -115,8 +115,8 @@ class HTMLCodeSnifferTest extends WebDriverTestBase {
     $web_assert->assertWaitOnAjaxRequest();
 
     // Check that the icon is displayed.
-    $markup = file_url_transform_relative(file_create_url(drupal_get_path('module', 'ckeditor_accessibility_auditor') . '/js/plugins/html_codesniffer/icons/html_codesniffer.png'));
-    $this->assertRaw($markup);
+    $markup = \Drupal::service('file_url_generator')->generateString(\Drupal::service('extension.list.module')->getPath('ckeditor_accessibility_auditor') . '/js/plugins/html_codesniffer/icons/html_codesniffer.png');
+    $this->assertSession()->responseContains($markup);
 
     // Click the button.
     $this->getSession()->getPage()->find('css', '.cke_button__html_codesniffer_icon')->click();
@@ -132,10 +132,10 @@ class HTMLCodeSnifferTest extends WebDriverTestBase {
   public function testSettings() {
     // Test as admin.
     $this->drupalGet('admin/config/content/formats/manage/filtered_html');
-    $this->assertRaw('Enter the URL to use as a base path for loading the HTML_CodeSniffer files.');
-    $this->assertRaw('Enter the default standard to be selected in the auditor');
-    $this->drupalPostForm(NULL, ['editor[settings][plugins][html_codesniffer][base_url]' => '\\//squizlabs.github.io/HTML_CodeSniffer/build/'], 'Save configuration');
-    $this->assertRaw('Please enter a valid Base URL for the Accessibility Auditor.');
+    $this->assertSession()->responseContains('Enter the URL to use as a base path for loading the HTML_CodeSniffer files.');
+    $this->assertSession()->responseContains('Enter the default standard to be selected in the auditor');
+    $this->submitForm(['editor[settings][plugins][html_codesniffer][base_url]' => '\\//squizlabs.github.io/HTML_CodeSniffer/build/'], 'Save configuration');
+    $this->assertSession()->responseContains('Please enter a valid Base URL for the Accessibility Auditor.');
 
     $not_an_admin = $this->drupalCreateUser([
       'administer nodes',
@@ -147,7 +147,7 @@ class HTMLCodeSnifferTest extends WebDriverTestBase {
     $this->drupalLogin($not_an_admin);
     $this->drupalGet('admin/config/content/formats/manage/filtered_html');
     // Check that settings are disabled for non-admins.
-    $this->assertRaw('Only editable by Administrators!');
+    $this->assertSession()->responseContains('Only editable by Administrators!');
     $page = $this->getSession()->getPage();
     $this->assertTrue($page->findField('editor[settings][plugins][html_codesniffer][base_url]')->hasAttribute('disabled'));
   }
