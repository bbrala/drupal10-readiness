modules/contrib/captcha/captcha.api.php
modules/contrib/captcha/image_captcha/image_captcha.admin.inc
modules/contrib/captcha/modules/captcha_long_form_id_test/src/Form/LongIdForm.php
modules/contrib/captcha/tests/fixtures/drupal7.php
modules/contrib/captcha/captcha.inc
modules/contrib/captcha/tests/src/Functional/CaptchaAdminTest.php
modules/contrib/captcha/modules/captcha_test/captcha_test.module
modules/contrib/captcha/image_captcha/image_captcha.install
modules/contrib/captcha/src/CaptchaPointInterface.php
modules/contrib/captcha/src/Element/Captcha.php
modules/contrib/captcha/image_captcha/image_captcha.module
modules/contrib/captcha/captcha.install
modules/contrib/captcha/captcha.module
modules/contrib/captcha/src/Entity/CaptchaPoint.php
modules/contrib/captcha/src/Entity/Controller/CaptchaPointListBuilder.php
modules/contrib/captcha/src/EventSubscriber/CaptchaCachedSettingsSubscriber.php
modules/contrib/captcha/src/Form/CaptchaExamplesForm.php
modules/contrib/captcha/image_captcha/src/Controller/CaptchaFontPreviewController.php
modules/contrib/captcha/src/Form/CaptchaPointDeleteForm.php
modules/contrib/captcha/image_captcha/src/Controller/CaptchaImageGeneratorController.php
modules/contrib/captcha/src/Form/CaptchaPointDisableForm.php
modules/contrib/captcha/src/Form/CaptchaPointEnableForm.php
modules/contrib/captcha/image_captcha/src/Controller/CaptchaImageRefresh.php
modules/contrib/captcha/src/Form/CaptchaPointForm.php
modules/contrib/captcha/image_captcha/src/Form/ImageCaptchaSettingsForm.php
modules/contrib/captcha/tests/src/Functional/CaptchaCacheTest.php
modules/contrib/captcha/src/Form/CaptchaSettingsForm.php
modules/contrib/captcha/tests/src/Functional/CaptchaCronTest.php
modules/contrib/captcha/tests/src/Functional/CaptchaPersistenceTest.php
modules/contrib/captcha/src/Plugin/migrate/process/CaptchaTypeFormatter.php
modules/contrib/captcha/src/Plugin/migrate/source/CaptchaPoints.php
modules/contrib/captcha/image_captcha/src/Response/CaptchaImageResponse.php
modules/contrib/captcha/captcha.post_update.php
modules/contrib/captcha/src/Service/CaptchaService.php
modules/contrib/captcha/tests/src/Functional/CaptchaSessionReuseAttackTestCase.php
modules/contrib/captcha/tests/src/Functional/CaptchaTest.php
modules/contrib/captcha/tests/src/Functional/CaptchaWebTestBase.php
modules/contrib/captcha/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php
modules/contrib/captcha/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php
modules/contrib/captcha/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php
modules/contrib/captcha/image_captcha/src/StreamedResponse/CaptchaFontPreviewStreamedResponse.php

6 files with changes
====================

1) modules/contrib/captcha/captcha.module:97

    ---------- begin diff ----------
@@ @@
  */
 function captcha_theme() {
   // @phpstan-ignore-next-line
-  $path = Drupal::hasService('extension.list.module') ? Drupal::service('extension.list.module')->getPath('captcha') : drupal_get_path('module', 'captcha');
+  $path = Drupal::hasService('extension.list.module') ? Drupal::service('extension.list.module')->getPath('captcha') : \Drupal::service('extension.list.module')->getPath('captcha');
   return [
     'captcha' => [
       'render element' => 'element',
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


2) modules/contrib/captcha/image_captcha/image_captcha.module:84

    ---------- begin diff ----------
@@ @@
     $request = \Drupal::service('request_stack')->getCurrentRequest();
     $directories = [
       // @phpstan-ignore-next-line
-      (Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : drupal_get_path('module', 'image_captcha')) . '/fonts',
+      (Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : \Drupal::service('extension.list.module')->getPath('image_captcha')) . '/fonts',
       'sites/all/libraries/fonts',
       DrupalKernel::findSitePath($request) . '/libraries/fonts',
     ];
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


3) modules/contrib/captcha/image_captcha/image_captcha.install:36

    ---------- begin diff ----------
@@ @@
 function image_captcha_install() {
   $config = \Drupal::configFactory()->getEditable('image_captcha.settings');
   // @phpstan-ignore-next-line
-  $module_path = Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : drupal_get_path('module', 'image_captcha');
+  $module_path = Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('image_captcha') : \Drupal::service('extension.list.module')->getPath('image_captcha');
   $config->set('image_captcha_fonts', [
     hash('sha256', $module_path . '/fonts/Tesox/tesox.ttf'),
     hash('sha256', $module_path . '/fonts/Tuffy/Tuffy.ttf'),
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


4) modules/contrib/captcha/tests/src/Unit/Controller/CaptchaPointListBuilderTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\captcha\Unit\Controller;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\captcha\Entity\CaptchaPoint;
 use Drupal\captcha\Entity\Controller\CaptchaPointListBuilder;
 use Drupal\Core\Entity\EntityStorageInterface;
@@ @@
  */
 class CaptchaPointListBuilderTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * Set up.
    */
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/captcha/tests/src/Kernel/Migrate/d7/MigrateCaptchaSimpleConfigurationTest.php:43

    ---------- begin diff ----------
@@ @@
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
       // @phpstan-ignore-next-line
-      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : drupal_get_path('module', 'captcha'),
+      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : \Drupal::service('extension.list.module')->getPath('captcha'),
       'tests',
       'fixtures',
       'drupal7.php',
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/captcha/tests/src/Kernel/Migrate/d7/MigrateCaptchaPointsTest.php:43

    ---------- begin diff ----------
@@ @@
     $this->loadFixture(implode(DIRECTORY_SEPARATOR, [
       DRUPAL_ROOT,
       // @phpstan-ignore-next-line
-      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : drupal_get_path('module', 'captcha'),
+      \Drupal::hasService('extension.list.module') ? \Drupal::service('extension.list.module')->getPath('captcha') : \Drupal::service('extension.list.module')->getPath('captcha'),
       'tests',
       'fixtures',
       'drupal7.php',
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

