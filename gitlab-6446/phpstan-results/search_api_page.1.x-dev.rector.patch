diff --git a/search_api_page.info.yml b/search_api_page.info.yml
index 34304df..5364d6d 100644
--- a/search_api_page.info.yml
+++ b/search_api_page.info.yml
@@ -4,7 +4,7 @@ dependencies:
   - search_api:search_api
 test_dependencies:
   - facets:facets
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.1 || ^10
 package: Search
 type: module
 configure: entity.search_api_page.collection
diff --git a/search_api_page.module b/search_api_page.module
index b8b4486..78de5ad 100644
--- a/search_api_page.module
+++ b/search_api_page.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\file\Entity\File;
 /**
  * @file
  * Search API pages file.
@@ -118,7 +119,7 @@ function template_preprocess_search_api_page_result(&$variables) {
 
   $variables['snippet'] = ['#markup' => $item->getExcerpt()];
   $variables['title'] = $entity->label();
-  if ($entity instanceof \Drupal\file\Entity\File) {
+  if ($entity instanceof File) {
     $variables['url'] = $entity->createFileUrl();
   }
   else {
diff --git a/tests/src/Functional/BlockTest.php b/tests/src/Functional/BlockTest.php
index ed657ce..bb8333b 100644
--- a/tests/src/Functional/BlockTest.php
+++ b/tests/src/Functional/BlockTest.php
@@ -12,7 +12,7 @@ class BlockTest extends FunctionalTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->drupalLogin($this->adminUser);
@@ -50,12 +50,13 @@ class BlockTest extends FunctionalTestBase {
       'id' => $id,
       'index' => $indexId,
     ];
-    $this->drupalPostForm('admin/config/search/search-api-pages/add', $step1, 'Next');
+    $this->drupalGet('admin/config/search/search-api-pages/add');
+    $this->submitForm($step1, 'Next');
 
     $step2 = [
       'path' => $path,
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
   }
 
   /**
diff --git a/tests/src/Functional/FacetsIntegrationTest.php b/tests/src/Functional/FacetsIntegrationTest.php
index 4d28cb8..58312fc 100644
--- a/tests/src/Functional/FacetsIntegrationTest.php
+++ b/tests/src/Functional/FacetsIntegrationTest.php
@@ -27,7 +27,7 @@ class FacetsIntegrationTest extends FunctionalTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->adminUser = $this->drupalCreateUser([
diff --git a/tests/src/Functional/FunctionalTestBase.php b/tests/src/Functional/FunctionalTestBase.php
index eb4d313..c119b6a 100644
--- a/tests/src/Functional/FunctionalTestBase.php
+++ b/tests/src/Functional/FunctionalTestBase.php
@@ -74,7 +74,7 @@ abstract class FunctionalTestBase extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create the users used for the tests.
diff --git a/tests/src/Functional/IntegrationTest.php b/tests/src/Functional/IntegrationTest.php
index 2f255b2..34bd613 100644
--- a/tests/src/Functional/IntegrationTest.php
+++ b/tests/src/Functional/IntegrationTest.php
@@ -30,33 +30,34 @@ class IntegrationTest extends FunctionalTestBase {
       'id' => 'search',
       'index' => $this->index->id(),
     ];
-    $this->drupalPostForm('admin/config/search/search-api-pages/add', $step1, 'Next');
+    $this->drupalGet('admin/config/search/search-api-pages/add');
+    $this->submitForm($step1, 'Next');
 
     // Test whether a leading slash leads to a form error.
     $step2 = [
       'path' => '/search',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
     $assert_session->responseContains('The path should not contain leading or trailing slashes.');
 
     // Test whether a trailing slash leads to a form error.
     $step2 = [
       'path' => 'search/',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
     $assert_session->responseContains('The path should not contain leading or trailing slashes.');
 
     // Test whether both a leading slash and a trailing slash leads to a form error.
     $step2 = [
       'path' => '/search/',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
     $assert_session->responseContains('The path should not contain leading or trailing slashes.');
 
     $step2 = [
       'path' => 'search',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
 
     $assert_session->responseNotContains('The path should not contain leading or trailing slashes.');
 
@@ -83,8 +84,9 @@ class IntegrationTest extends FunctionalTestBase {
     $assert_session->pageTextContains('Your search yielded no results.');
     $this->drupalGet('search');
     $assert_session->pageTextNotContains('Your search yielded no results.');
+    $this->drupalGet('admin/config/search/search-api-pages/search');
 
-    $this->drupalPostForm('admin/config/search/search-api-pages/search', ['show_all_when_no_keys' => TRUE, 'show_search_form' => FALSE], 'Save');
+    $this->submitForm(['show_all_when_no_keys' => TRUE, 'show_search_form' => FALSE], 'Save');
     $this->drupalGet('search');
     $assert_session->pageTextNotContains('Your search yielded no results.');
     $assert_session->responseNotContains('Enter the terms you wish to search for.');
@@ -92,8 +94,9 @@ class IntegrationTest extends FunctionalTestBase {
 
     $this->drupalGet('search/number10');
     $assert_session->pageTextContains('1 result found');
+    $this->drupalGet('admin/config/search/search-api-pages/search');
 
-    $this->drupalPostForm('admin/config/search/search-api-pages/search', ['show_search_form' => TRUE], 'Save');
+    $this->submitForm(['show_search_form' => TRUE], 'Save');
 
     $this->drupalGet('search/number11');
     $assert_session->pageTextContains('1 result found');
@@ -116,15 +119,15 @@ class IntegrationTest extends FunctionalTestBase {
     $this->drupalGet('/search');
     $this->assertSession()->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, ['keys' => 'Owls'], 'Search');
+    $this->submitForm(['keys' => 'Owls'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
     $assert_session->pageTextNotContains('49 results found');
-    $this->drupalPostForm(NULL, ['keys' => 'birds'], 'Search');
+    $this->submitForm(['keys' => 'birds'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
     $assert_session->pageTextNotContains('49 results found');
-    $this->drupalPostForm(NULL, ['keys' => 'Strigiformes'], 'Search');
+    $this->submitForm(['keys' => 'Strigiformes'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
     $assert_session->pageTextNotContains('49 results found');
@@ -134,7 +137,7 @@ class IntegrationTest extends FunctionalTestBase {
     $node->save();
     $this->indexItems($this->index->id());
 
-    $this->drupalPostForm(NULL, ['keys' => 'Owls'], 'Search');
+    $this->submitForm(['keys' => 'Owls'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('10 results found');
   }
@@ -166,15 +169,15 @@ class IntegrationTest extends FunctionalTestBase {
     $this->drupalGet('/search');
     $assert_session->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, ['keys' => 'Owls'], 'Search');
+    $this->submitForm(['keys' => 'Owls'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
 
-    $this->drupalPostForm(NULL, ['keys' => 'birds of prey'], 'Search');
+    $this->submitForm(['keys' => 'birds of prey'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
 
-    $this->drupalPostForm(NULL, ['keys' => 'prey birds'], 'Search');
+    $this->submitForm(['keys' => 'prey birds'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
   }
@@ -187,11 +190,11 @@ class IntegrationTest extends FunctionalTestBase {
     $this->drupalGet('/search');
     $assert_session->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, ['keys' => 'Owls '], 'Search');
+    $this->submitForm(['keys' => 'Owls '], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
 
-    $this->drupalPostForm(NULL, ['keys' => ' Owls'], 'Search');
+    $this->submitForm(['keys' => ' Owls'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('9 results found');
   }
@@ -211,7 +214,7 @@ class IntegrationTest extends FunctionalTestBase {
     $this->drupalGet('/search');
     $assert_session->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, ['keys' => 'foo/bar'], 'Search');
+    $this->submitForm(['keys' => 'foo/bar'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('1 result found');
   }
@@ -232,7 +235,7 @@ class IntegrationTest extends FunctionalTestBase {
     $this->drupalGet('/search');
     $assert_session->statusCodeEquals(200);
 
-    $this->drupalPostForm(NULL, ['keys' => 'Undefined'], 'Search');
+    $this->submitForm(['keys' => 'Undefined'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('1 result found');
   }
diff --git a/tests/src/Functional/LanguageIntegrationTest.php b/tests/src/Functional/LanguageIntegrationTest.php
index b37a859..6ac82cd 100644
--- a/tests/src/Functional/LanguageIntegrationTest.php
+++ b/tests/src/Functional/LanguageIntegrationTest.php
@@ -21,7 +21,7 @@ class LanguageIntegrationTest extends FunctionalTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->drupalLogin($this->adminUser);
@@ -57,12 +57,13 @@ class LanguageIntegrationTest extends FunctionalTestBase {
       'id' => 'search',
       'index' => $this->index->id(),
     ];
-    $this->drupalPostForm('admin/config/search/search-api-pages/add', $step1, 'Next');
+    $this->drupalGet('admin/config/search/search-api-pages/add');
+    $this->submitForm($step1, 'Next');
 
     $step2 = [
       'path' => 'search',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
   }
 
   /**
@@ -72,14 +73,14 @@ class LanguageIntegrationTest extends FunctionalTestBase {
     $assert_session = $this->assertSession();
 
     $this->drupalGet('/search');
-    $this->drupalPostForm(NULL, ['keys' => 'bird'], 'Search');
+    $this->submitForm(['keys' => 'bird'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('1 result found');
     $assert_session->pageTextContains('Hawk');
     $assert_session->pageTextNotContains('Your search yielded no results.');
 
     $this->drupalGet('/nl/search');
-    $this->drupalPostForm(NULL, ['keys' => 'bird'], 'Search');
+    $this->submitForm(['keys' => 'bird'], 'Search');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('1 result found');
     $assert_session->pageTextContains('Havik');
@@ -130,7 +131,7 @@ class LanguageIntegrationTest extends FunctionalTestBase {
 
     // Test that keys are properly preserved when switching languages.
     $this->drupalGet('/search');
-    $this->drupalPostForm(NULL, ['keys' => 'bird'], 'Search');
+    $this->submitForm(['keys' => 'bird'], 'Search');
     $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()->pageTextContains('1 result found');
     $this->assertSession()->pageTextContains('Hawk');
diff --git a/tests/src/Functional/ParseModeTest.php b/tests/src/Functional/ParseModeTest.php
index e44b772..1695ea9 100644
--- a/tests/src/Functional/ParseModeTest.php
+++ b/tests/src/Functional/ParseModeTest.php
@@ -12,7 +12,7 @@ class ParseModeTest extends FunctionalTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->drupalLogin($this->adminUser);
@@ -31,11 +31,12 @@ class ParseModeTest extends FunctionalTestBase {
       'id' => 'search_page_test',
       'index' => $this->index->id(),
     ];
-    $this->drupalPostForm('admin/config/search/search-api-pages/add', $step1, 'Next');
+    $this->drupalGet('admin/config/search/search-api-pages/add');
+    $this->submitForm($step1, 'Next');
     $step2 = [
       'path' => 'search-page-test',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
     $this->drupalGet('admin/config/search/search-api-pages');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('Search Page Test');
@@ -55,7 +56,8 @@ class ParseModeTest extends FunctionalTestBase {
     $edit = [
       'parse_mode' => 'terms',
     ];
-    $this->drupalPostForm('admin/config/search/search-api-pages/search_page_test', $edit, 'Save');
+    $this->drupalGet('admin/config/search/search-api-pages/search_page_test');
+    $this->submitForm($edit, 'Save');
     $this->drupalGet('admin/config/search/search-api-pages/search_page_test');
     $assert_session->statusCodeEquals(200);
     $assert_session->responseContains('terms');
diff --git a/tests/src/Functional/ViewModeTest.php b/tests/src/Functional/ViewModeTest.php
index 3c89836..3c27985 100644
--- a/tests/src/Functional/ViewModeTest.php
+++ b/tests/src/Functional/ViewModeTest.php
@@ -12,7 +12,7 @@ class ViewModeTest extends FunctionalTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Create blog content type and create one node of this type.
@@ -49,7 +49,7 @@ class ViewModeTest extends FunctionalTestBase {
     $edit = [
       'fields[body][region]' => 'hidden',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Create a Search API Page and verify that it exists.
     $step1 = [
@@ -57,11 +57,12 @@ class ViewModeTest extends FunctionalTestBase {
       'id' => 'search_page_test',
       'index' => $this->index->id(),
     ];
-    $this->drupalPostForm('admin/config/search/search-api-pages/add', $step1, 'Next');
+    $this->drupalGet('admin/config/search/search-api-pages/add');
+    $this->submitForm($step1, 'Next');
     $step2 = [
       'path' => 'search-page-test',
     ];
-    $this->drupalPostForm(NULL, $step2, 'Save');
+    $this->submitForm($step2, 'Save');
     $this->drupalGet('admin/config/search/search-api-pages');
     $assert_session->statusCodeEquals(200);
     $assert_session->pageTextContains('Search Page Test');
@@ -76,15 +77,15 @@ class ViewModeTest extends FunctionalTestBase {
       'view_mode_configuration[entity:node][default]' => 'default',
       'view_mode_configuration[entity:node][overrides][document]' => 'teaser',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Save');
+    $this->submitForm($edit, 'Save');
 
     // Perform a few searches and check whether the outcome is as expected.
     $this->drupalGet('search-page-test');
     $assert_session->statusCodeEquals(200);
-    $this->drupalPostForm(NULL, ['keys' => 'blog number 1'], 'Search');
+    $this->submitForm(['keys' => 'blog number 1'], 'Search');
     $assert_session->pageTextContains('Title blog number 1');
     $assert_session->pageTextContains('This is the body text for blog number 1.');
-    $this->drupalPostForm(NULL, ['keys' => 'document number 1'], 'Search');
+    $this->submitForm(['keys' => 'document number 1'], 'Search');
     $assert_session->pageTextContains('Title document number 1');
     $assert_session->pageTextNotContains('This is the body text for document number 1.');
   }
