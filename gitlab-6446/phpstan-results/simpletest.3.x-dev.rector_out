modules/contrib/simpletest-simpletest/simpletest.api.php
modules/contrib/simpletest-simpletest/src/Tests/MissingCheckedRequirementsTest.php
modules/contrib/simpletest-simpletest/src/Cache/Context/TestDiscoveryCacheContext.php
modules/contrib/simpletest-simpletest/tests/src/Functional/SimpletestUiTest.php
modules/contrib/simpletest-simpletest/simpletest.install
modules/contrib/simpletest-simpletest/simpletest.module
modules/contrib/simpletest-simpletest/src/ContentTypeCreationTrait.php
modules/contrib/simpletest-simpletest/src/EnvironmentCleanerFactory.php
modules/contrib/simpletest-simpletest/src/Tests/SimpleTestBrowserTest.php
modules/contrib/simpletest-simpletest/src/EnvironmentCleanerService.php
modules/contrib/simpletest-simpletest/tests/src/Functional/ThroughUITest.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/Cache/Context/TestDiscoveryCacheContextTest.php
modules/contrib/simpletest-simpletest/src/Exception/MissingGroupException.php
modules/contrib/simpletest-simpletest/src/Form/SimpletestResultsForm.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/DeprecatedCleanupTest.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/Migrate/d6/MigrateSimpletestConfigsTest.php
modules/contrib/simpletest-simpletest/src/Tests/SimpleTestErrorCollectorTest.php
modules/contrib/simpletest-simpletest/src/Tests/SimpleTestInstallBatchTest.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/Migrate/d7/MigrateSimpletestSettingsTest.php
modules/contrib/simpletest-simpletest/src/Tests/SimpleTestTest.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/PhpUnitErrorTest.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/SimpletestDeprecationTest.php
modules/contrib/simpletest-simpletest/src/Form/SimpletestSettingsForm.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/TestDeprecatedTestHooks.php
modules/contrib/simpletest-simpletest/src/Form/SimpletestTestForm.php
modules/contrib/simpletest-simpletest/src/AssertContentTrait.php
modules/contrib/simpletest-simpletest/src/AssertHelperTrait.php
modules/contrib/simpletest-simpletest/src/BlockCreationTrait.php
modules/contrib/simpletest-simpletest/src/BrowserTestBase.php
modules/contrib/simpletest-simpletest/tests/src/Kernel/TestDiscoveryDeprecationTest.php
modules/contrib/simpletest-simpletest/tests/src/Unit/SimpletestPhpunitRunCommandTest.php
modules/contrib/simpletest-simpletest/src/InstallerTestBase.php
modules/contrib/simpletest-simpletest/src/Tests/SkipRequiredModulesTest.php
modules/contrib/simpletest-simpletest/src/Tests/TimeZoneTest.php
modules/contrib/simpletest-simpletest/src/Tests/UiPhpUnitOutputTest.php
modules/contrib/simpletest-simpletest/src/Tests/WebTestBaseInstallTest.php
modules/contrib/simpletest-simpletest/src/UserCreationTrait.php
modules/contrib/simpletest-simpletest/src/WebAssert.php
modules/contrib/simpletest-simpletest/src/WebTestBase.php
modules/contrib/simpletest-simpletest/tests/src/Unit/SimpletestUiPrinterTest.php
modules/contrib/simpletest-simpletest/tests/src/Unit/TestBaseTest.php
modules/contrib/simpletest-simpletest/src/KernelTestBase.php
modules/contrib/simpletest-simpletest/tests/src/Unit/TestDiscoveryTest.php
modules/contrib/simpletest-simpletest/tests/src/Unit/WebTestBaseTest.php
modules/contrib/simpletest-simpletest/src/NodeCreationTrait.php
modules/contrib/simpletest-simpletest/src/RandomGeneratorTrait.php
modules/contrib/simpletest-simpletest/src/RouteProvider.php
modules/contrib/simpletest-simpletest/src/SessionTestTrait.php
modules/contrib/simpletest-simpletest/src/TestBase.php
modules/contrib/simpletest-simpletest/tests/fixtures/simpletest_phpunit_browsertest.php
modules/contrib/simpletest-simpletest/tests/fixtures/simpletest_phpunit_run_command_test.php
modules/contrib/simpletest-simpletest/tests/modules/simpletest_deprecation_test/simpletest_deprecation_test.module
modules/contrib/simpletest-simpletest/tests/src/Functional/OtherInstallationProfileTestsTest.php
modules/contrib/simpletest-simpletest/tests/src/Functional/SimpletestTest.php
modules/contrib/simpletest-simpletest/src/TestDiscovery.php
modules/contrib/simpletest-simpletest/src/TestServiceProvider.php
modules/contrib/simpletest-simpletest/src/Tests/BrokenSetUpTest.php
modules/contrib/simpletest-simpletest/src/Tests/BrowserTest.php
modules/contrib/simpletest-simpletest/src/Tests/KernelTestBaseTest.php

20 files with changes
=====================

1) modules/contrib/simpletest-simpletest/simpletest.module:61

    ---------- begin diff ----------
@@ @@
 function simpletest_js_alter(&$javascript, AttachedAssetsInterface $assets) {
   // Since SimpleTest is a special use case for the table select, stick the
   // SimpleTest JavaScript above the table select.
-  $simpletest = drupal_get_path('module', 'simpletest') . '/simpletest.js';
+  $simpletest = \Drupal::service('extension.list.module')->getPath('simpletest') . '/simpletest.js';
   if (array_key_exists($simpletest, $javascript) && array_key_exists('core/misc/tableselect.js', $javascript)) {
     $javascript[$simpletest]['weight'] = $javascript['core/misc/tableselect.js']['weight'] - 1;
   }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


2) modules/contrib/simpletest-simpletest/tests/src/Unit/WebTestBaseTest.php:48

    ---------- begin diff ----------
@@ @@
   public function testAssertFieldByName($filename, $name, $value, $expected) {
     $content = file_get_contents(__DIR__ . '/../../fixtures/' . $filename . '.html');

-    $web_test = $this->getMockBuilder('Drupal\simpletest\WebTestBase')
-      ->disableOriginalConstructor()
-      ->setMethods(['getRawContent', 'assertTrue', 'pass'])
-      ->getMock();
+    $web_test = $this->createMock('Drupal\simpletest\WebTestBase');

     $web_test->expects($this->any())
       ->method('getRawContent')
@@ @@
    */
   public function testClickLink($expected, $label, $index, $xpath_data) {
     // Mock a WebTestBase object and some of its methods.
-    $web_test = $this->getMockBuilder('Drupal\simpletest\WebTestBase')
-      ->disableOriginalConstructor()
-      ->setMethods([
-        'pass',
-        'fail',
-        'getUrl',
-        'xpath',
-        'drupalGet',
-        'getAbsoluteUrl',
-      ])
-      ->getMock();
+    $web_test = $this->createMock('Drupal\simpletest\WebTestBase');

     // Mocked getUrl() is only used for reporting so we just return a string.
     $web_test->expects($this->any())
@@ @@
    * @dataProvider providerTestGetAbsoluteUrl
    */
   public function testGetAbsoluteUrl($href, $expected_absolute_path) {
-    $web_test = $this->getMockBuilder('Drupal\simpletest\WebTestBase')
-      ->disableOriginalConstructor()
-      ->setMethods(['getUrl'])
-      ->getMock();
+    $web_test = $this->createMock('Drupal\simpletest\WebTestBase');

     $web_test->expects($this->any())
       ->method('getUrl')
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/simpletest-simpletest/tests/src/Unit/TestDiscoveryTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\simpletest\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Composer\Autoload\ClassLoader;
 use Drupal\Core\DependencyInjection\Container;
 use Drupal\Core\DrupalKernel;
@@ @@
  */
 class TestDiscoveryTest extends UnitTestCase {

+  use ProphecyTrait;
   protected function setupVfsWithTestClasses() {
     vfsStream::setup('drupal');
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/simpletest-simpletest/tests/src/Unit/TestBaseTest.php:114

    ---------- begin diff ----------
@@ @@
     // randomString() should always include an ampersand ('&')  and a
     // greater than ('>') if $length is greater than 3.
     if ($length > 4) {
-      $this->assertContains('&', $string);
-      $this->assertContains('>', $string);
+      $this->assertStringContainsString('&', $string);
+      $this->assertStringContainsString('>', $string);
     }
   }

@@ @@
    */
   public function testCheckRequirements() {
     $test_base = $this->getTestBaseForAssertionTests('test_id');
-    $this->assertInternalType(
-        'array',
+    $this->assertIsArray(
         $this->invokeProtectedMethod($test_base, 'checkRequirements', [])
     );
   }
    ----------- end diff -----------

Applied rules:
 * SpecificAssertContainsRector
 * SpecificAssertInternalTypeRector (https://github.com/sebastianbergmann/phpunit/blob/master/ChangeLog-8.0.md)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/simpletest-simpletest/tests/src/Unit/SimpletestPhpunitRunCommandTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\simpletest\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Database\Database;
 use Drupal\Core\DependencyInjection\ContainerBuilder;
 use Drupal\Core\File\FileSystemInterface;
@@ @@
  */
 class SimpletestPhpunitRunCommandTest extends TestCase {

+  use ProphecyTrait;
   /**
    * Path to the app root.
    *
@@ @@
   /**
    * {@inheritdoc}
    */
-  public static function setUpBeforeClass() {
+  public static function setUpBeforeClass(): void {
     parent::setUpBeforeClass();
     // Figure out our app root.
     self::$root = dirname(dirname(dirname(dirname(dirname(dirname(__DIR__))))));
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Organize our mock container.
     $container = new ContainerBuilder();
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function tearDown() {
+  protected function tearDown(): void {
     // We unset the $base_url global, since the test code sets it as a
     // side-effect.
     unset($GLOBALS['base_url']);
    ----------- end diff -----------

Applied rules:
 * AddProphecyTraitRector (https://github.com/sebastianbergmann/phpunit/issues/4142)
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/simpletest-simpletest/tests/src/Kernel/TestDeprecatedTestHooks.php:37

    ---------- begin diff ----------
@@ @@
    */
   public function testHookTestGroupStarted() {
     // Mock a database connection enough for simpletest_run_tests().
-    $insert = $this->getMockBuilder(Insert::class)
-      ->disableOriginalConstructor()
-      ->setMethods(['execute', 'useDefaults'])
-      ->getMock();
+    $insert = $this->createMock(Insert::class);
     $insert->expects($this->any())
       ->method('useDefaults')
       ->willReturn($insert);
@@ @@
       ->willReturn($insert);

     // Mock public stream wrapper enough for simpletest_run_tests().
-    $public = $this->getMockBuilder(PublicStream::class)
-      ->disableOriginalConstructor()
-      // Mock all methods to do nothing and return NULL.
-      ->setMethods([])
-      ->getMock();
+    $public = $this->createMock(PublicStream::class);

     // Set up the container.
     $this->container->set('database', $connection);
@@ @@
    */
   public function testHookTestFinished() {
     // Mock test_discovery.
-    $discovery = $this->getMockBuilder(TestDiscovery::class)
-      ->disableOriginalConstructor()
-      ->setMethods(['registerTestNamespaces'])
-      ->getMock();
+    $discovery = $this->createMock(TestDiscovery::class);
     $discovery->expects($this->once())
       ->method('registerTestNamespaces')
       ->willReturn([]);

     // Mock renderer.
-    $renderer = $this->getMockBuilder(Renderer::class)
-      ->disableOriginalConstructor()
-      ->setMethods(['render'])
-      ->getMock();
+    $renderer = $this->createMock(Renderer::class);
     // We don't care what the rendered batch elements look like.
     $renderer->expects($this->any())
       ->method('render')
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


7) modules/contrib/simpletest-simpletest/tests/src/Kernel/SimpletestDeprecationTest.php:48

    ---------- begin diff ----------
@@ @@
     // - simpletest_phpunit_xml_to_rows().
     $this->assertStringEndsWith('/phpunit-23.xml', simpletest_phpunit_xml_filepath(23));

-    $this->assertInternalType('string', simpletest_phpunit_command());
+    $this->assertIsString(simpletest_phpunit_command());

     $this->assertEquals([], simpletest_phpunit_find_testcases(new \SimpleXMLElement('<not_testcase></not_testcase>')));
    ----------- end diff -----------

Applied rules:
 * SpecificAssertInternalTypeRector (https://github.com/sebastianbergmann/phpunit/blob/master/ChangeLog-8.0.md)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


8) modules/contrib/simpletest-simpletest/tests/src/Kernel/Migrate/d7/MigrateSimpletestSettingsTest.php:15

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig(static::$modules);
     $this->executeMigration('d7_simpletest_settings');
@@ @@
   public function testMigration() {
     $config = \Drupal::config('simpletest.settings')->get();
     $this->assertTrue($config['clear_results']);
-    $this->assertIdentical(CURLAUTH_BASIC, $config['httpauth']['method']);
-    $this->assertIdentical('testbot', $config['httpauth']['username']);
-    $this->assertIdentical('foobaz', $config['httpauth']['password']);
+    $this->assertSame(CURLAUTH_BASIC, $config['httpauth']['method']);
+    $this->assertSame('testbot', $config['httpauth']['username']);
+    $this->assertSame('foobaz', $config['httpauth']['password']);
     $this->assertTrue($config['verbose']);
   }
    ----------- end diff -----------

Applied rules:
 * AssertIdenticalRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/simpletest-simpletest/tests/src/Kernel/Migrate/d6/MigrateSimpletestConfigsTest.php:21

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig(['simpletest']);
     $this->executeMigration('d6_simpletest_settings');
@@ @@
    */
   public function testSimpletestSettings() {
     $config = $this->config('simpletest.settings');
-    $this->assertIdentical(TRUE, $config->get('clear_results'));
-    $this->assertIdentical(CURLAUTH_BASIC, $config->get('httpauth.method'));
+    $this->assertSame(TRUE, $config->get('clear_results'));
+    $this->assertSame(CURLAUTH_BASIC, $config->get('httpauth.method'));
     // NULL in the dump means defaults which is empty string. Same as omitting
     // them.
-    $this->assertIdentical('', $config->get('httpauth.password'));
-    $this->assertIdentical('', $config->get('httpauth.username'));
-    $this->assertIdentical(TRUE, $config->get('verbose'));
+    $this->assertSame('', $config->get('httpauth.password'));
+    $this->assertSame('', $config->get('httpauth.username'));
+    $this->assertSame(TRUE, $config->get('verbose'));
     $this->assertConfigSchema(\Drupal::service('config.typed'), 'simpletest.settings', $config->get());
   }
    ----------- end diff -----------

Applied rules:
 * AssertIdenticalRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/simpletest-simpletest/tests/src/Kernel/Cache/Context/TestDiscoveryCacheContextTest.php:23

    ---------- begin diff ----------
@@ @@
    */
   public function testContext() {
     // Mock test discovery.
-    $discovery = $this->getMockBuilder(TestDiscovery::class)
-      ->setMethods(['getTestClasses'])
-      ->disableOriginalConstructor()
-      ->getMock();
+    $discovery = $this->createMock(TestDiscovery::class);
     // Set getTestClasses() to return different results on subsequent calls.
     // This emulates changed tests in the filesystem.
     $discovery->expects($this->any())
    ----------- end diff -----------

Applied rules:
 * GetMockBuilderGetMockToCreateMockRector (https://github.com/lmc-eu/steward/pull/187/files#diff-c7e8c65e59b8b4ff8b54325814d4ba55L80)
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


11) modules/contrib/simpletest-simpletest/tests/src/Functional/ThroughUITest.php:16

    ---------- begin diff ----------
@@ @@
   /**
    * This test method must always pass.
    */
-  public function testThroughUi() {
-    $this->pass('Success!');
+  public function testThroughUi()
+  {
   }

 }
    ----------- end diff -----------

Applied rules:
 * PassRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


12) modules/contrib/simpletest-simpletest/tests/src/Functional/SimpletestUiTest.php:23

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->drupalLogin($this->createUser(['administer unit tests']));
   }
@@ @@
       $edit = [
         "tests[$test]" => TRUE,
       ];
-      $this->drupalPostForm($url, $edit, t('Run tests'));
+      $this->drupalGet($url);
+      $this->submitForm($edit, t('Run tests'));
       $assertion->pageTextContains('0 fails, 0 exceptions');
     }
   }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/simpletest-simpletest/tests/src/Functional/OtherInstallationProfileTestsTest.php:44

    ---------- begin diff ----------
@@ @@
    */
   protected $adminUser;

-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->adminUser = $this->drupalCreateUser(['administer unit tests']);
@@ @@
     // Assert the existence of a test in a different installation profile than
     // the current.
     $this->drupalGet(Url::fromRoute('simpletest.test_form'));
-    $this->assertText('Tests Standard installation profile expectations.');
+    $this->assertSession()->pageTextContains('Tests Standard installation profile expectations.');

     // Assert the existence of a test for a module in a different installation
     // profile than the current.
-    $this->assertText('Drupal\Tests\drupal_system_listing_compatible_test\Kernel\SystemListingCrossProfileCompatibleTest');
+    $this->assertSession()->pageTextContains('Drupal\Tests\drupal_system_listing_compatible_test\Kernel\SystemListingCrossProfileCompatibleTest');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/simpletest-simpletest/src/Tests/SimpleTestTest.php:131

    ---------- begin diff ----------
@@ @@

         $edit = [];
         $edit['tests[Drupal\simpletest\Tests\SimpleTestTest]'] = TRUE;
-        $this->drupalPostForm(NULL, $edit, t('Run tests'));
+        $this->submitForm($edit, t('Run tests'));

         // Parse results and confirm that they are correct.
         $this->getTestResults();
@@ @@
           $assertion['file'] = $this->asText($row->td[2]);
           $assertion['line'] = $this->asText($row->td[3]);
           $assertion['function'] = $this->asText($row->td[4]);
-          $ok_url = file_url_transform_relative(file_create_url('core/misc/icons/73b355/check.svg'));
+          $ok_url = \Drupal::service('file_url_generator')->generateString('core/misc/icons/73b355/check.svg');
           $assertion['status'] = ($row->td[5]->img['src'] == $ok_url) ? 'Pass' : 'Fail';
           $results['assertions'][] = $assertion;
         }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * PassRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


15) modules/contrib/simpletest-simpletest/src/Tests/SimpleTestBrowserTest.php:60

    ---------- begin diff ----------
@@ @@
       'name' => $user->getAccountName(),
       'pass' => $user->pass_raw,
     ];
-    $this->drupalPostForm('user/login', $edit, t('Log in'), [
+    $this->drupalGet('user/login', [
       'query' => ['destination' => 'user/logout'],
     ]);
+    $this->submitForm($edit, t('Log in'));
     $headers = $this->drupalGetHeaders(TRUE);
     $this->assertEqual(count($headers), 2, 'Simpletest stopped following redirects after the first one.');

@@ @@
     // Logout the user which was logged in during test-setup.
     $this->drupalLogout();

-    $system_path = $base_url . '/' . drupal_get_path('module', 'system');
+    $system_path = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('system');
     $http_path = $system_path . '/tests/http.php/user/login';
     $https_path = $system_path . '/tests/https.php/user/login';
     // Generate a valid simpletest User-Agent to pass validation.
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


16) modules/contrib/simpletest-simpletest/src/Tests/MissingCheckedRequirementsTest.php:46

    ---------- begin diff ----------
@@ @@
     if (!$this->isInChildSite()) {
       // Run this test from web interface.
       $edit['tests[Drupal\simpletest\Tests\MissingCheckedRequirementsTest]'] = TRUE;
-      $this->drupalPostForm('admin/config/development/testing', $edit, t('Run tests'));
+      $this->drupalGet('admin/config/development/testing');
+      $this->submitForm($edit, t('Run tests'));
       $this->assertRaw('Test is not allowed to run.', 'Test check for requirements came up.');
       $this->assertNoText('Test ran when it failed requirements check.', 'Test requirements stopped test from running.');
     }
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


17) modules/contrib/simpletest-simpletest/src/Tests/BrowserTest.php:46

    ---------- begin diff ----------
@@ @@
     $this->assertEqual($absolute, $this->url, 'Passed and requested URL are equal.');
     $this->assertEqual($this->url, $this->getAbsoluteUrl($this->url), 'Requested and returned absolute URL are equal.');

-    $this->drupalPostForm(NULL, [], t('Log in'));
+    $this->submitForm([], t('Log in'));
     $this->assertEqual($absolute, $this->url, 'Passed and requested URL are equal.');
     $this->assertEqual($this->url, $this->getAbsoluteUrl($this->url), 'Requested and returned absolute URL are equal.');

@@ @@
     // Check that the $this->cookies property is populated when a user logs in.
     $user = $this->drupalCreateUser();
     $edit = ['name' => $user->getAccountName(), 'pass' => $user->pass_raw];
-    $this->drupalPostForm('<front>', $edit, t('Log in'));
+    $this->drupalGet('<front>');
+    $this->submitForm($edit, t('Log in'));
     $this->assertEqual(count($this->cookies), 1, 'A cookie is set when the user logs in.');

     // Check that the name and value of the cookie match the request data.
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


18) modules/contrib/simpletest-simpletest/src/Tests/BrokenSetUpTest.php:79

    ---------- begin diff ----------
@@ @@
       // Verify that a broken setUp() method is caught.
       file_put_contents($this->sharedTriggerFile, 'setup');
       $edit['tests[Drupal\simpletest\Tests\BrokenSetUpTest]'] = TRUE;
-      $this->drupalPostForm('admin/config/development/testing', $edit, t('Run tests'));
+      $this->drupalGet('admin/config/development/testing');
+      $this->submitForm($edit, t('Run tests'));
       $this->assertRaw('Broken setup');
       $this->assertNoRaw('The setUp() method has run.');
       $this->assertNoRaw('Broken test');
@@ @@
       // Verify that a broken tearDown() method is caught.
       file_put_contents($this->sharedTriggerFile, 'teardown');
       $edit['tests[Drupal\simpletest\Tests\BrokenSetUpTest]'] = TRUE;
-      $this->drupalPostForm('admin/config/development/testing', $edit, t('Run tests'));
+      $this->drupalGet('admin/config/development/testing');
+      $this->submitForm($edit, t('Run tests'));
       $this->assertNoRaw('Broken setup');
       $this->assertRaw('The setUp() method has run.');
       $this->assertNoRaw('Broken test');
@@ @@
       // Verify that a broken test method is caught.
       file_put_contents($this->sharedTriggerFile, 'test');
       $edit['tests[Drupal\simpletest\Tests\BrokenSetUpTest]'] = TRUE;
-      $this->drupalPostForm('admin/config/development/testing', $edit, t('Run tests'));
+      $this->drupalGet('admin/config/development/testing');
+      $this->submitForm($edit, t('Run tests'));
       $this->assertNoRaw('Broken setup');
       $this->assertRaw('The setUp() method has run.');
       $this->assertRaw('Broken test');
    ----------- end diff -----------

Applied rules:
 * PassRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


19) modules/contrib/simpletest-simpletest/src/TestBase.php:912

    ---------- begin diff ----------
@@ @@
       // Initialize verbose debugging.
       $this->verbose = TRUE;
       $this->verboseDirectory = PublicStream::basePath() . '/simpletest/verbose';
-      $this->verboseDirectoryUrl = file_create_url($this->verboseDirectory);
+      $this->verboseDirectoryUrl = \Drupal::service('file_url_generator')->generateAbsoluteString($this->verboseDirectory);
       if (\Drupal::service('file_system')->prepareDirectory($this->verboseDirectory, FileSystemInterface::CREATE_DIRECTORY) && !file_exists($this->verboseDirectory . '/.htaccess')) {
         file_put_contents($this->verboseDirectory . '/.htaccess', "<IfModule mod_expires.c>\nExpiresActive Off\n</IfModule>\n");
       }
@@ @@
     if (PHP_SAPI !== 'cli' && session_status() === PHP_SESSION_ACTIVE) {
       session_destroy();
       $params = session_get_cookie_params();
-      setcookie(session_name(), '', REQUEST_TIME - 3600, $params['path'], $params['domain'], $params['secure'], $params['httponly']);
+      setcookie(session_name(), '', \Drupal::time()->getRequestTime() - 3600, $params['path'], $params['domain'], $params['secure'], $params['httponly']);
     }
     session_name($this->originalSessionName);
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * PassRector
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector


20) modules/contrib/simpletest-simpletest/src/InstallerTestBase.php:188

    ---------- begin diff ----------
@@ @@
     $edit = [
       'langcode' => $this->langcode,
     ];
-    $this->drupalPostForm(NULL, $edit, $this->translations['Save and continue']);
+    $this->submitForm($edit, $this->translations['Save and continue']);
   }

   /**
@@ @@
     $edit = [
       'profile' => $this->profile,
     ];
-    $this->drupalPostForm(NULL, $edit, $this->translations['Save and continue']);
+    $this->submitForm($edit, $this->translations['Save and continue']);
   }

   /**
@@ @@
    */
   protected function setUpSettings() {
     $edit = $this->translatePostValues($this->parameters['forms']['install_settings_form']);
-    $this->drupalPostForm(NULL, $edit, $this->translations['Save and continue']);
+    $this->submitForm($edit, $this->translations['Save and continue']);
   }

   /**
@@ @@
    */
   protected function setUpSite() {
     $edit = $this->translatePostValues($this->parameters['forms']['install_configure_form']);
-    $this->drupalPostForm(NULL, $edit, $this->translations['Save and continue']);
+    $this->submitForm($edit, $this->translations['Save and continue']);
     // If we've got to this point the site is installed using the regular
     // installation workflow.
     $this->isInstalled = TRUE;
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [ERROR] Could not process                                                      
         "modules/contrib/simpletest-simpletest/src/WebTestBase.php" file, due  
         to:                                                                    
         "System error: "Unexpected argument count for drupalPostForm"          
         Run Rector with "--debug" option and post the report here:             
         https://github.com/rectorphp/rector/issues/new". On line: 80           

