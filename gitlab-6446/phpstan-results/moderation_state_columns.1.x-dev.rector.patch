diff --git a/moderation_state_columns.module b/moderation_state_columns.module
index ed86ab3..4365742 100644
--- a/moderation_state_columns.module
+++ b/moderation_state_columns.module
@@ -71,7 +71,7 @@ function template_preprocess_views_view_moderation_state_columns(&$variables) {
     }
     $variables['#cache']['tags'] = array_merge($variables['#cache']['tags'], $entity->getCacheTags());
 
-    $entities[$state][] = render($row);
+    $entities[$state][] = \Drupal::service('renderer')->render($row);
   }
   $variables['json_encoded_content'] = json_encode([
     'states' => $states,
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index 61de1cb..4e9a548 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -29,7 +29,7 @@ class LoadTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
