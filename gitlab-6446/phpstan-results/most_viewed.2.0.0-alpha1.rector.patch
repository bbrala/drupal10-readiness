diff --git a/composer.json b/composer.json
index 8cc0ff7..32a4e7e 100644
--- a/composer.json
+++ b/composer.json
@@ -8,7 +8,7 @@
         }
     },
     "require": {
-        "drupal/core": "^8 || ^9"
+        "drupal/core": "^9.3 || ^10"
     },
     "license": "GPL-2.0-or-later"
 }
diff --git a/most_viewed.info.yml b/most_viewed.info.yml
index 82d46c6..624350f 100644
--- a/most_viewed.info.yml
+++ b/most_viewed.info.yml
@@ -3,7 +3,7 @@ type: module
 description: 'Provide statistics and opportunity to order content as most viewed in specified time.'
 package: Other
 # version: VERSION
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 # Information added by Drupal.org packaging script on 2022-02-14
 version: '2.0.0-alpha1'
diff --git a/most_viewed.module b/most_viewed.module
index edea0c4..c4adcdc 100644
--- a/most_viewed.module
+++ b/most_viewed.module
@@ -4,7 +4,7 @@
  * Main module file.
  */
 
-define('MOST_VIEWED_MODULE_PATH', drupal_get_path('module', 'most_viewed'));
+define('MOST_VIEWED_MODULE_PATH', \Drupal::service('extension.list.module')->getPath('most_viewed'));
 
 use Drupal\Core\Url;
 use Drupal\Core\Database\Database;
diff --git a/views/handlers/most_viewed_handler_sort_most_viewed.inc b/views/handlers/most_viewed_handler_sort_most_viewed.inc
index a46dd83..9a02a14 100644
--- a/views/handlers/most_viewed_handler_sort_most_viewed.inc
+++ b/views/handlers/most_viewed_handler_sort_most_viewed.inc
@@ -34,7 +34,7 @@ class most_viewed_handler_sort_most_viewed extends views_handler_sort {
     $extra = array();
 
     if (!empty($this->options['days'])) {
-      $timestamp = REQUEST_TIME - ($this->options['days'] * 24 * 60 * 60);
+      $timestamp = \Drupal::time()->getRequestTime() - ($this->options['days'] * 24 * 60 * 60);
       $extra = "most_viewed_hits.created > $timestamp";
     }
 
