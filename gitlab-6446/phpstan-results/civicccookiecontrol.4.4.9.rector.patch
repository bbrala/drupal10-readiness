diff --git a/civiccookiecontrol.module b/civiccookiecontrol.module
index 6a22822..d288691 100644
--- a/civiccookiecontrol.module
+++ b/civiccookiecontrol.module
@@ -96,7 +96,7 @@ function civiccookiecontrol_page_attachments(array &$page) {
   $is_admin = \Drupal::service('router.admin_context')->isAdminRoute($route);
 
   $page['#attached']['drupalSettings']['path'] = [
-    'civiccookiecontrol_path' => drupal_get_path('module', 'civiccookiecontrol'),
+    'civiccookiecontrol_path' => \Drupal::service('extension.list.module')->getPath('civiccookiecontrol'),
   ];
   if (!$is_admin || $cccConfig->get('civiccookiecontrol_drupal_admin')) {
     $page['#attached']['drupalSettings']['civiccookiecontrol'] = CCCConfigFactory::getCccConfig($cccConfig->get('civiccookiecontrol_api_key_version'))->getCccConfigJson();
@@ -145,7 +145,7 @@ function civiccookiecontrol_check_if_empty(array $configElement) {
  */
 function civiccookiecontrol_set_ccclogo(array &$variables) {
   global $base_url;
-  $variables['ccc_logo'] = $base_url . '/' . drupal_get_path('module', 'civiccookiecontrol') . '/images/CookieControlCivic.png';
+  $variables['ccc_logo'] = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('civiccookiecontrol') . '/images/CookieControlCivic.png';
 }
 
 /**
diff --git a/modules/civic_govuk_cookiecontrol/src/Form/CivicGovUkCookieControlSettings.php b/modules/civic_govuk_cookiecontrol/src/Form/CivicGovUkCookieControlSettings.php
index 16d063e..bf6d6ed 100644
--- a/modules/civic_govuk_cookiecontrol/src/Form/CivicGovUkCookieControlSettings.php
+++ b/modules/civic_govuk_cookiecontrol/src/Form/CivicGovUkCookieControlSettings.php
@@ -205,10 +205,7 @@ class CivicGovUkCookieControlSettings extends ConfigFormBase {
    *   Current language string.
    */
   protected function loadSettings(array &$form, $langCode, $lang) {
-    $iabYamlPath = drupal_get_path(
-          'module',
-          'civic_govuk_cookiecontrol'
-      ) .
+    $iabYamlPath = \Drupal::service('extension.list.module')->getPath('civic_govuk_cookiecontrol') .
           "/src/Form/GovUkFormElements/civic_govuk_cookiecontrol.texts.yml";
 
     $formItems = Yaml::parse(file_get_contents($iabYamlPath));
diff --git a/src/Form/IAB2Settings.php b/src/Form/IAB2Settings.php
index d0a7957..129b87b 100644
--- a/src/Form/IAB2Settings.php
+++ b/src/Form/IAB2Settings.php
@@ -172,7 +172,7 @@ class IAB2Settings extends ConfigFormBase {
    * Loads IAB 2.0 form elements from the corresponding twig file.
    */
   protected function loadIabSettings(&$form) {
-    $iabYamlPath = drupal_get_path('module', 'civiccookiecontrol') . "/src/Form/IAB2FormElements/iab.settings.yml";
+    $iabYamlPath = \Drupal::service('extension.list.module')->getPath('civiccookiecontrol') . "/src/Form/IAB2FormElements/iab.settings.yml";
     $formItems = Yaml::parse(file_get_contents($iabYamlPath));
     foreach ($formItems as $key => $element) {
       if (array_key_exists('#format', $element) && $element['#format'] == 'full_html') {
diff --git a/src/Form/Steps/CCCBaseStep.php b/src/Form/Steps/CCCBaseStep.php
index c968416..9229e26 100644
--- a/src/Form/Steps/CCCBaseStep.php
+++ b/src/Form/Steps/CCCBaseStep.php
@@ -147,7 +147,7 @@ abstract class CCCBaseStep implements CCCStepInterface {
     $cccFormElements = $this->tempStore->get('cccFormElements');
 
     if (empty($cccFormElements)) {
-      $ymlFiles = $this->fileSystem->scanDirectory(DRUPAL_ROOT . '/' . drupal_get_path('module', 'civiccookiecontrol') . "/src/Form/CookieControlFormElements", '/.*\.yml$/');
+      $ymlFiles = $this->fileSystem->scanDirectory(DRUPAL_ROOT . '/' . \Drupal::service('extension.list.module')->getPath('civiccookiecontrol') . "/src/Form/CookieControlFormElements", '/.*\.yml$/');
       foreach ($ymlFiles as $file_path => $ymlFile) {
         $file_contents = file_get_contents($file_path);
         $formItems = Yaml::parse($file_contents);
diff --git a/src/Form/Steps/CCCSettings.php b/src/Form/Steps/CCCSettings.php
index 6e0b518..59a251e 100644
--- a/src/Form/Steps/CCCSettings.php
+++ b/src/Form/Steps/CCCSettings.php
@@ -301,9 +301,7 @@ their consent.</div>";
         }
 
         if (empty($element['#placeholder']) && ($key == 'civiccookiecontrol_button_icon')) {
-          $element['#placeholder'] = $base_url . file_url_transform_relative(file_create_url(
-                theme_get_setting('logo.url', $this->config->get('default'))
-            ));
+          $element['#placeholder'] = $base_url . \Drupal::service('file_url_generator')->generateString(theme_get_setting('logo.url', $this->config->get('default')));
         }
 
         if (array_key_exists('#format', $element) && $element['#format'] == 'full_html') {
