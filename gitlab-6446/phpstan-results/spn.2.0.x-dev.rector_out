modules/contrib/spn/spn.install
modules/contrib/spn/src/Form/PetitionExportSettingsForm.php
modules/contrib/spn/spn.module
modules/contrib/spn/src/Controller/SignatureValidation.php
modules/contrib/spn/src/Entity/PetitionSignature.php
modules/contrib/spn/src/Form/PetitionForm.php
modules/contrib/spn/src/Entity/PetitionUser.php
modules/contrib/spn/src/Form/NotificationsForm.php
modules/contrib/spn/src/Plugin/Block/PetitionForm.php
modules/contrib/spn/src/Plugin/Block/PetitionResults.php

2 files with changes
====================

1) modules/contrib/spn/src/Plugin/Block/PetitionResults.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\spn\Plugin\Block;

+use Drupal\Core\Database\Database;
 use Drupal\Core\Block\BlockBase;

 /**
@@ @@
       if ($bundle == 'petition') {
         
         // establish a basic connection with all petitions
-        $connection = \Drupal\Core\Database\Database::getConnection();
+        $connection = Database::getConnection();
         $query = $connection->select('petition_signatures', 'petition');
         $query->condition('petition.nid', $nid);
         $query->condition('petition.validated', 1);
@@ @@
             
             // if the user is a drupal user get his data
             if($user_data->{'is_drupal_user'} == 1) {
-            
+
               // get the user info
               $query_user = $connection->select('users_field_data', 'user');
               $query_user->condition('user.uid', $user_data->{'id_drupal'});
@@ @@
               //$query_user->addField('user__field_nom', 'field_nom_value', 'lastname');
               $query_user->addField('user', 'mail');
               $user_result = $query_user->execute()->fetchObject();
-              
+
               // add signature
               $signatures[] = [
                 'name' => $user_result->{'name'},
@@ @@
                 'mail' => $user_result->{'mail'},
                 'comment' => $user_data->{'comment'},
               ];
-              
+
             // if the user is not signed up get his data from our custom sql database
             } else {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/spn/src/Form/PetitionExportSettingsForm.php:0

    ---------- begin diff ----------
@@ @@
 <?php
 namespace Drupal\spn\Form;

+use Drupal\node\Entity\Node;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Ajax\AjaxResponse;
@@ @@

     $array_petitions = [];
     $nids = \Drupal::entityQuery('node')->condition('type', 'petition')->execute();
-    $nodes = \Drupal\node\Entity\Node::loadMultiple($nids);
+    $nodes = Node::loadMultiple($nids);

     foreach ($nodes as $nodekey => $node) {
         $petition_nodes[$nodekey] = $node->label();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 2 files have been changed by Rector                                       

