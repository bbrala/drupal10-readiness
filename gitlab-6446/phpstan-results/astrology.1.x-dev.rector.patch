diff --git a/astrology.install b/astrology.install
index 4268a5d..25b4594 100644
--- a/astrology.install
+++ b/astrology.install
@@ -176,7 +176,7 @@ function astrology_install() {
   // Create default astrology.
   \Drupal::database()->insert('astrology')->fields($data)->execute();
 
-  $module_path = drupal_get_path('module', 'astrology');
+  $module_path = \Drupal::service('extension.list.module')->getPath('astrology');
   $values = [
     [
       'astrology_id' => 1,
diff --git a/src/Controller/AstrologyController.php b/src/Controller/AstrologyController.php
index 857ebf1..cb080af 100644
--- a/src/Controller/AstrologyController.php
+++ b/src/Controller/AstrologyController.php
@@ -442,7 +442,7 @@ class AstrologyController extends ControllerBase {
     foreach ($result as $row) {
       $weeks = $this->utility->getFirstLastDow($row->post_date);
       $icon = $this->t('<img src=":src" alt=":alt" height=":height" width=":width" />', [
-        ':src' => file_create_url($row->icon),
+        ':src' => \Drupal::service('file_url_generator')->generateAbsoluteString($row->icon),
         ':alt' => $row->name,
         ':height' => '30',
         ':width' => '30',
@@ -510,7 +510,7 @@ class AstrologyController extends ControllerBase {
     foreach ($result as $row) {
 
       $icon = $this->t('<img src=":src" alt=":alt" height=":height" width=":width" />', [
-        ':src' => file_create_url($row->icon),
+        ':src' => \Drupal::service('file_url_generator')->generateAbsoluteString($row->icon),
         ':alt' => $row->name,
         ':height' => '30',
         ':width' => '30',
