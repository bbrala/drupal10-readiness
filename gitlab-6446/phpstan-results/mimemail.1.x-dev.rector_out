modules/contrib/mimemail/mimemail.module
modules/contrib/mimemail/tests/src/Kernel/MimeMailCompressTest.php
modules/contrib/mimemail/modules/mimemail_example/mimemail_example.module
modules/contrib/mimemail/modules/mimemail_example/src/Form/ExampleForm.php
modules/contrib/mimemail/tests/src/Kernel/MimeMailFormatHelperTest.php
modules/contrib/mimemail/modules/mimemail_example/tests/src/Functional/ExampleMailTest.php
modules/contrib/mimemail/src/Form/AdminForm.php
modules/contrib/mimemail/src/Plugin/Mail/MimeMail.php
modules/contrib/mimemail/src/Utility/MimeMailFormatHelper.php
modules/contrib/mimemail/tests/src/Functional/MimeMailWebTest.php

5 files with changes
====================

1) modules/contrib/mimemail/tests/src/Kernel/MimeMailFormatHelperTest.php:49

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Sets up an anonymous and two authenticated users.
     $this->adminUser = $this->setUpCurrentUser([
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/mimemail/tests/src/Functional/MimeMailWebTest.php:36

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create admin user.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/mimemail/src/Utility/MimeMailFormatHelper.php:344

    ---------- begin diff ----------
@@ @@
     // to an email message.
     static $files = [];

-    /** @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface $mime_type_guesser */
+    /** @var \Symfony\Component\Mime\MimeTypesInterface $mime_type_guesser */
     $mime_type_guesser = \Drupal::service('file.mime_type.guesser');

     /** @var \Drupal\Core\File\FileSystemInterface $file_system */
@@ @@
         }
         // The $url is a non-local URI that needs to be converted to a URL.
         else {
-          $file = $file_system->realpath($url) ? $file_system->realpath($url) : file_create_url($url);
+          $file = $file_system->realpath($url) ? $file_system->realpath($url) : \Drupal::service('file_url_generator')->generateAbsoluteString($url);
         }
       }
     }
@@ @@
       if ($is_image) {
         if ($to_link) {
           // Exclude images from embedding if needed.
-          $url = file_create_url($url);
+          $url = \Drupal::service('file_url_generator')->generateAbsoluteString($url);
           $url = str_replace(' ', '%20', $url);
         }
         else {
@@ @@
     // Control variable to avoid boundary collision.
     static $part_num = 0;

-    /** @var \Symfony\Component\HttpFoundation\File\MimeType\MimeTypeGuesserInterface $mime_type_guesser */
+    /** @var \Symfony\Component\Mime\MimeTypesInterface $mime_type_guesser */
     $mime_type_guesser = \Drupal::service('file.mime_type.guesser');

     /** @var \Drupal\Component\Datetime\TimeInterface $time */
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * RenameClassRector
 * WrapReturnRector


4) modules/contrib/mimemail/src/Form/AdminForm.php:123

    ---------- begin diff ----------
@@ @@
     $theme = $this->themeHandler->getDefault();
     // @todo Searching the path is not what we want - this is how it was done
     // in D7, but that's not how assets should be handled in D8.
-    $mailstyle = drupal_get_path('theme', $theme) . '/mail.css';
+    $mailstyle = \Drupal::service('extension.list.theme')->getPath($theme) . '/mail.css';
     // Disable site style sheets including option if found.
     if (is_file($mailstyle)) {
       $config->set('sitestyle', FALSE);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/mimemail/modules/mimemail_example/tests/src/Functional/ExampleMailTest.php:39

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create our test users.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 5 files have been changed by Rector                                       

