modules/contrib/photos/photos.install
modules/contrib/photos/photos_access/src/Plugin/migrate/source/PhotosAccess.php
modules/contrib/photos/src/Plugin/Block/PhotosInformation.php
modules/contrib/photos/tests/src/Functional/AddPhotosAlbumImageTest.php
modules/contrib/photos/photos.module
modules/contrib/photos/photos_access/src/Plugin/migrate/source/PhotosAccessUser.php
modules/contrib/photos/src/Controller/PhotosAlbumController.php
modules/contrib/photos/src/Plugin/Block/PhotosRandomImages.php
modules/contrib/photos/src/Plugin/Block/PhotosRecentImages.php
modules/contrib/photos/tests/src/Kernel/CreatePhotosAlbumTest.php
modules/contrib/photos/src/Plugin/Block/PhotosUserImages.php
modules/contrib/photos/tests/src/Unit/PhotosAlbumTest.php
modules/contrib/photos/src/Plugin/Filter/PhotosFilter.php
modules/contrib/photos/src/Plugin/migrate/destination/Photos.php
modules/contrib/photos/src/Plugin/migrate/destination/PhotosComment.php
modules/contrib/photos/src/Plugin/migrate/destination/PhotosCount.php
modules/contrib/photos/src/Plugin/migrate/destination/PhotosImage.php
modules/contrib/photos/src/Plugin/migrate/destination/PhotosNode.php
modules/contrib/photos/src/Plugin/migrate/source/Photos.php
modules/contrib/photos/src/Plugin/migrate/source/PhotosComment.php
modules/contrib/photos/src/Plugin/migrate/source/PhotosCount.php
modules/contrib/photos/src/Plugin/migrate/source/PhotosImage.php
modules/contrib/photos/src/Plugin/migrate/source/PhotosNode.php
modules/contrib/photos/src/Plugin/views/field/PhotosImage.php
modules/contrib/photos/src/Controller/PhotosAlbumsRecentController.php
modules/contrib/photos/src/Controller/PhotosController.php
modules/contrib/photos/src/Controller/PhotosEditController.php
modules/contrib/photos/src/Controller/PhotosImageController.php
modules/contrib/photos/src/Controller/PhotosImagesRecentController.php
modules/contrib/photos/src/Controller/PhotosRearrangeController.php
modules/contrib/photos/photos_access/photos_access.install
modules/contrib/photos/photos_access/photos_access.module
modules/contrib/photos/src/Controller/PhotosUserAlbumsController.php
modules/contrib/photos/src/Controller/PhotosUserImagesController.php
modules/contrib/photos/src/Form/PhotosAdminSettingsForm.php
modules/contrib/photos/photos_access/src/Controller/DefaultController.php
modules/contrib/photos/photos_access/src/Form/PhotosAccessPasswordForm.php
modules/contrib/photos/src/Form/PhotosDirectoryImportForm.php
modules/contrib/photos/photos_access/src/Plugin/migrate/destination/PhotosAccess.php
modules/contrib/photos/photos_access/src/Plugin/migrate/destination/PhotosAccessUser.php
modules/contrib/photos/src/Form/PhotosImageDeleteForm.php
modules/contrib/photos/src/Form/PhotosImageEditForm.php
modules/contrib/photos/src/Form/PhotosUploadForm.php
modules/contrib/photos/src/PhotosAlbum.php
modules/contrib/photos/src/PhotosBreadcrumbBuilder.php
modules/contrib/photos/src/PhotosImage.php
modules/contrib/photos/src/PhotosUpload.php

5 files with changes
====================

1) modules/contrib/photos/tests/src/Kernel/CreatePhotosAlbumTest.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->installConfig(['system']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/photos/tests/src/Functional/AddPhotosAlbumImageTest.php:41

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Create user with permissions to edit own photos.
     $this->account = $this->drupalCreateUser([
@@ @@
     $album->save();

     // Get test image file.
-    $testPhotoUri = drupal_get_path('module', 'photos') . '/tests/images/photos-test-picture.jpg';
+    $testPhotoUri = \Drupal::service('extension.list.module')->getPath('photos') . '/tests/images/photos-test-picture.jpg';
     $fileSystem = \Drupal::service('file_system');

     // Post image upload form.
@@ @@
       'title_0' => 'Test photo title',
       'des_0' => 'Test photos description',
     ];
-    $this->drupalPostForm('node/' . $album->id() . '/photos', $edit, 'Confirm upload');
+    $this->drupalGet('node/' . $album->id() . '/photos');
+    $this->submitForm($edit, 'Confirm upload');

     // Get album images.
     $photosAlbum = new PhotosAlbum($album->id());
@@ @@
     $edit = [
       'title' => 'Test new title',
     ];
-    $this->drupalPostForm(NULL, $edit, 'Confirm changes');
+    $this->submitForm($edit, 'Confirm changes');

     // Confirm that image title has been updated.
     $photosImage = new PhotosImage($imageFid);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * UiHelperTraitDrupalPostFormRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/photos/photos_access/photos_access.module:267

    ---------- begin diff ----------
@@ @@
     $old_file_wrapper = \Drupal::service('stream_wrapper_manager')->getScheme($uri) . '://';
     if ($old_file_wrapper <> $file_wrapper) {
       $new_uri = str_replace($old_file_wrapper, $file_wrapper, $uri);
-      file_move($file, $new_uri);
+      \Drupal::service('file.repository')->move($file, $new_uri);
       if ($new_scheme == 'public') {
         $pathinfo = pathinfo($uri);
         $ext = strtolower($pathinfo['extension']);
    ----------- end diff -----------

Applied rules:
 * FileMoveRector
 * ArgumentRemoverRector


4) modules/contrib/photos/src/PhotosUpload.php:192

    ---------- begin diff ----------
@@ @@
           $ext = end($filename_parts);
           if (in_array($ext, $type)) {
             $path = \Drupal::service('file_system')->createFilename(PhotosUpload::rename($image['name'], $ext), PhotosUpload::path($scheme, '', $account));
-            if ($temp_file = file_save_data($zip->getFromIndex($x), $path)) {
+            if ($temp_file = \Drupal::service('file.repository')->writeData($zip->getFromIndex($x), $path)) {
               // Update file values.
               $temp_file->pid = $value->pid;
               $temp_file->nid = $value->nid;
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * ArgumentRemoverRector
 * WrapReturnRector


5) modules/contrib/photos/src/PhotosImage.php:135

    ---------- begin diff ----------
@@ @@
     $style->createDerivative($uri, $destination);

     // Return URL.
-    $url = file_create_url($destination);
+    $url = \Drupal::service('file_url_generator')->generateAbsoluteString($destination);
     return $url;
   }

@@ @@
         $image_url = ImageStyle::load($style_name)->buildUrl($uri);
       }
       else {
-        $image_url = file_create_url($uri);
+        $image_url = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
       }
     }
     else {
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector


 [OK] 5 files have been changed by Rector                                       

