diff --git a/partial.module b/partial.module
index b0c3203..ae9a6e6 100644
--- a/partial.module
+++ b/partial.module
@@ -63,5 +63,5 @@ function partial($name, array $context = [], array $libraries = []) {
     '#context' => $context,
     '#libraries' => $libraries,
   ];
-  return render($build);
+  return \Drupal::service('renderer')->render($build);
 }
diff --git a/src/TwigExtension/PartialTwigExtension.php b/src/TwigExtension/PartialTwigExtension.php
index b8d64da..b15e9ed 100644
--- a/src/TwigExtension/PartialTwigExtension.php
+++ b/src/TwigExtension/PartialTwigExtension.php
@@ -46,7 +46,7 @@ class PartialTwigExtension extends \Twig_Extension {
       '#name' => $name,
       '#context' => $context,
     ];
-    return render($build);
+    return \Drupal::service('renderer')->render($build);
   }
 
   /**
@@ -58,7 +58,7 @@ class PartialTwigExtension extends \Twig_Extension {
       '#name' => $name,
       '#context' => $context,
     ];
-    return render($build);
+    return \Drupal::service('renderer')->render($build);
   }
 
 }
