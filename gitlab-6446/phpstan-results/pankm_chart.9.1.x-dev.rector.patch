diff --git a/pankm_chart.install b/pankm_chart.install
index ae8758c..975ebf6 100755
--- a/pankm_chart.install
+++ b/pankm_chart.install
@@ -221,7 +221,7 @@ function pankm_chart_uninstall() {
  */
 function pankm_chart_add_node() {
   $filename = 'sample.csv';
-  $source = drupal_get_path('module', 'pankm_chart') . '/' . $filename;
+  $source = \Drupal::service('extension.list.module')->getPath('pankm_chart') . '/' . $filename;
   $destination = "public://pankm_chart/";
   $file_csv = NULL;
   if (!file_exists($destination)) {
diff --git a/pankm_chart.module b/pankm_chart.module
index e26556a..8db6910 100755
--- a/pankm_chart.module
+++ b/pankm_chart.module
@@ -83,8 +83,8 @@ function pankm_chart_preprocess_page(&$variables) {
       global $base_url;
       $type = $node->field_chart_type->value;
       $csv = isset($node->field_csv->entity) ? $node->field_csv->entity->getFileUri() : "";
-      $module = drupal_get_path('module', 'pankm_chart');
-      $csv_path = file_create_url($csv);
+      $module = \Drupal::service('extension.list.module')->getPath('pankm_chart');
+      $csv_path = \Drupal::service('file_url_generator')->generateAbsoluteString($csv);
       $variables['#attached']['drupalSettings']['chartType'] = $type;
       $variables['#attached']['drupalSettings']['csvPath'] = $csv_path;
       $variables['#attached']['drupalSettings']['modulePath'] = $base_url . '/' . $module;
