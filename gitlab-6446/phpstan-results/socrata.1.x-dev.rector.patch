diff --git a/socrata_filter/src/Plugin/Filter/FilterSocrata.php b/socrata_filter/src/Plugin/Filter/FilterSocrata.php
index 37af744..e7de543 100644
--- a/socrata_filter/src/Plugin/Filter/FilterSocrata.php
+++ b/socrata_filter/src/Plugin/Filter/FilterSocrata.php
@@ -61,7 +61,7 @@ class FilterSocrata extends FilterBase {
           $render_array['#width'] = $this->getWidth($vars);
           $render_array['#height'] = $this->getHeight($vars);;
 
-          $retval = render($render_array);
+          $retval = \Drupal::service('renderer')->render($render_array);
         }
         return $retval;
       },
diff --git a/socrata_filter/tests/src/Kernel/FilterSocrataTest.php b/socrata_filter/tests/src/Kernel/FilterSocrataTest.php
index 71e3302..f3f04f6 100644
--- a/socrata_filter/tests/src/Kernel/FilterSocrataTest.php
+++ b/socrata_filter/tests/src/Kernel/FilterSocrataTest.php
@@ -39,7 +39,7 @@ class FilterSocrataTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $data = Yaml::parse(file_get_contents(__DIR__ . '/../../../../tests/config/data.yml'));
diff --git a/socrata_views/tests/src/Kernel/SocrataDisplayExtenderTest.php b/socrata_views/tests/src/Kernel/SocrataDisplayExtenderTest.php
index 596bb74..f6d4f87 100644
--- a/socrata_views/tests/src/Kernel/SocrataDisplayExtenderTest.php
+++ b/socrata_views/tests/src/Kernel/SocrataDisplayExtenderTest.php
@@ -35,7 +35,7 @@ class SocrataDisplayExtenderTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->installConfig(['views']);
     $this->moduleHandler = $this->container->get('module_handler');
diff --git a/tests/src/Functional/EndpointFormTest.php b/tests/src/Functional/EndpointFormTest.php
index a0cdc1f..c90e9d1 100644
--- a/tests/src/Functional/EndpointFormTest.php
+++ b/tests/src/Functional/EndpointFormTest.php
@@ -33,7 +33,7 @@ class EndpointFormTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->data = Yaml::parse(file_get_contents(__DIR__ . '/../../config/data.yml'));
   }
@@ -61,7 +61,8 @@ class EndpointFormTest extends BrowserTestBase {
     $this->drupalGet(Url::fromRoute('entity.endpoint.collection'));
 
     $edit = [];
-    $this->drupalPostForm(Url::fromRoute('entity.endpoint.add_form'), $edit, t('Save'));
+    $this->drupalGet(Url::fromRoute('entity.endpoint.add_form'));
+    $this->submitForm($edit, t('Save'));
     $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()->pageTextContains('Machine-readable name field is required.');
     $this->assertSession()->pageTextContains('Name field is required');
@@ -70,25 +71,29 @@ class EndpointFormTest extends BrowserTestBase {
     $edit['label'] = $this->data['endpoints']['valid']['label'];
     $edit['id'] = $this->data['endpoints']['valid']['id'];
     $edit['url'] = str_replace('resource/', '', $this->data['endpoints']['valid']['url']);
-    $this->drupalPostForm(Url::fromRoute('entity.endpoint.add_form'), $edit, t('Save'));
+    $this->drupalGet(Url::fromRoute('entity.endpoint.add_form'));
+    $this->submitForm($edit, t('Save'));
     $this->assertSession()->pageTextContains("does not point to a valid SODA2 resource");
 
     $edit['url'] = $this->data['endpoints']['valid']['url'];
-    $this->drupalPostForm(Url::fromRoute('entity.endpoint.add_form'), $edit, t('Save'));
+    $this->drupalGet(Url::fromRoute('entity.endpoint.add_form'));
+    $this->submitForm($edit, t('Save'));
     $this->assertSession()->pageTextNotContains('does not point to a valid SODA2 resource');
     $this->assertSession()->pageTextNotContains('did not return a valid response');
     $this->assertSession()->pageTextContains("Saved the {$edit['label']} endpoint");
     $endpoint = Endpoint::load($edit['id']);
     $this->assertNotNull($endpoint);
+    $this->drupalGet(Url::fromRoute('entity.endpoint.add_form'));
 
-    $this->drupalPostForm(Url::fromRoute('entity.endpoint.add_form'), $edit, t('Save'));
+    $this->submitForm($edit, t('Save'));
     $this->assertSession()->pageTextContains("The machine-readable name is already in use");
 
     $this->drupalGet(Url::fromRoute('entity.endpoint.edit_form', ['endpoint' => $edit['id']]));
     $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()->elementAttributeContains('css', 'input#edit-id', 'disabled', 'disabled');
+    $this->drupalGet(Url::fromRoute('entity.endpoint.delete_form', ['endpoint' => $edit['id']]));
 
-    $this->drupalPostForm(Url::fromRoute('entity.endpoint.delete_form', ['endpoint' => $edit['id']]), [], t('Delete'));
+    $this->submitForm([], t('Delete'));
     $this->assertSession()->statusCodeEquals(200);
     $this->assertSession()->pageTextContains("{$edit['label']} has been deleted");
     $endpoint = Endpoint::load($edit['id']);
diff --git a/tests/src/Functional/SocrataSelectQueryExecutionTest.php b/tests/src/Functional/SocrataSelectQueryExecutionTest.php
index b7adfac..1107918 100644
--- a/tests/src/Functional/SocrataSelectQueryExecutionTest.php
+++ b/tests/src/Functional/SocrataSelectQueryExecutionTest.php
@@ -38,7 +38,7 @@ class SocrataSelectQueryExecutionTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->data = Yaml::parse(file_get_contents(__DIR__ . '/../../config/data.yml'));
   }
diff --git a/tests/src/Kernel/SocrataSelectQueryTest.php b/tests/src/Kernel/SocrataSelectQueryTest.php
index be0ea65..cc18c08 100644
--- a/tests/src/Kernel/SocrataSelectQueryTest.php
+++ b/tests/src/Kernel/SocrataSelectQueryTest.php
@@ -38,7 +38,7 @@ class SocrataSelectQueryTest extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->data = Yaml::parse(file_get_contents(__DIR__ . '/../../config/data.yml'));
   }
diff --git a/tests/src/Unit/EndpointTest.php b/tests/src/Unit/EndpointTest.php
index 1f7e536..cfc7de7 100644
--- a/tests/src/Unit/EndpointTest.php
+++ b/tests/src/Unit/EndpointTest.php
@@ -36,7 +36,7 @@ class EndpointTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->data = Yaml::parse(file_get_contents(__DIR__ . '/../../config/data.yml'));
