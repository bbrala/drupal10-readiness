modules/contrib/personalization_by_terms/personalization_by_terms.module
modules/contrib/personalization_by_terms/src/Form/VisitedTermsRevisionRevertForm.php
modules/contrib/personalization_by_terms/visited_terms.page.inc
modules/contrib/personalization_by_terms/personalization_by_terms.views.inc
modules/contrib/personalization_by_terms/src/Controller/VisitedTermsController.php
modules/contrib/personalization_by_terms/src/Form/VisitedTermsSettingsForm.php
modules/contrib/personalization_by_terms/src/Form/VisitedTermsTypeDeleteForm.php
modules/contrib/personalization_by_terms/src/Form/VisitedTermsTypeForm.php
modules/contrib/personalization_by_terms/src/Plugin/Field/FieldFormatter/TermCountFormatterType.php
modules/contrib/personalization_by_terms/src/Entity/VisitedTerms.php
modules/contrib/personalization_by_terms/src/Plugin/Field/FieldType/TermCountFieldType.php
modules/contrib/personalization_by_terms/src/Plugin/Field/FieldWidget/TermCountWidgetType.php
modules/contrib/personalization_by_terms/src/Plugin/views/field/VisitorTermsField.php
modules/contrib/personalization_by_terms/src/Entity/VisitedTermsInterface.php
modules/contrib/personalization_by_terms/src/Entity/VisitedTermsType.php
modules/contrib/personalization_by_terms/src/Plugin/views/sort/VisitorTermsSort.php
modules/contrib/personalization_by_terms/src/Entity/VisitedTermsTypeInterface.php
modules/contrib/personalization_by_terms/src/Entity/VisitedTermsViewsData.php
modules/contrib/personalization_by_terms/src/TermsTrackingService.php
modules/contrib/personalization_by_terms/src/EventSubscriber/TrackTermsKernelSubscriber.php
modules/contrib/personalization_by_terms/src/Form/VisitedTermsDeleteForm.php
modules/contrib/personalization_by_terms/src/Form/VisitedTermsForm.php
modules/contrib/personalization_by_terms/src/Form/VisitedTermsRevisionDeleteForm.php
modules/contrib/personalization_by_terms/src/TermsTrackingServiceInterface.php
modules/contrib/personalization_by_terms/src/ViewsQueryTrait.php
modules/contrib/personalization_by_terms/src/VisitedTermsAccessControlHandler.php
modules/contrib/personalization_by_terms/src/VisitedTermsHtmlRouteProvider.php
modules/contrib/personalization_by_terms/src/VisitedTermsListBuilder.php
modules/contrib/personalization_by_terms/src/VisitedTermsStorage.php
modules/contrib/personalization_by_terms/src/VisitedTermsStorageInterface.php
modules/contrib/personalization_by_terms/src/VisitedTermsTypeHtmlRouteProvider.php
modules/contrib/personalization_by_terms/src/VisitedTermsTypeListBuilder.php

3 files with changes
====================

1) modules/contrib/personalization_by_terms/src/Form/VisitedTermsRevisionDeleteForm.php:56

    ---------- begin diff ----------
@@ @@
    */
   public function getQuestion() {
     return $this->t('Are you sure you want to delete the revision from %revision-date?', [
-      '%revision-date' => format_date($this->revision->getRevisionCreationTime()),
+      '%revision-date' => \Drupal::service('date.formatter')->format($this->revision->getRevisionCreationTime()),
     ]);
   }

@@ @@
     $this->VisitedTermsStorage->deleteRevision($this->revision->getRevisionId());

     $this->logger('content')->notice('Visited terms: deleted %title revision %revision.', ['%title' => $this->revision->label(), '%revision' => $this->revision->getRevisionId()]);
-    $this->messenger()->addMessage(t('Revision from %revision-date of Visited terms %title has been deleted.', ['%revision-date' => format_date($this->revision->getRevisionCreationTime()), '%title' => $this->revision->label()]));
+    $this->messenger()->addMessage(t('Revision from %revision-date of Visited terms %title has been deleted.', ['%revision-date' => \Drupal::service('date.formatter')->format($this->revision->getRevisionCreationTime()), '%title' => $this->revision->label()]));
     $form_state->setRedirect(
       'entity.visited_terms.canonical',
        ['visited_terms' => $this->revision->id()]
    ----------- end diff -----------

Applied rules:
 * FormatDateRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


2) modules/contrib/personalization_by_terms/src/Controller/VisitedTermsController.php:116

    ---------- begin diff ----------
@@ @@
           ]));
         }
         else {
-          $link = $visited_terms->link($date);
+          $link = $visited_terms->toLink($date)->toString();
         }

         $row = [];
    ----------- end diff -----------

Applied rules:
 * EntityInterfaceLinkRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/personalization_by_terms/src/Form/VisitedTermsRevisionRevertForm.php:128

    ---------- begin diff ----------
@@ @@
   protected function prepareRevertedRevision(VisitedTermsInterface $revision, FormStateInterface $form_state) {
     $revision->setNewRevision();
     $revision->isDefaultRevision(TRUE);
-    $revision->setRevisionCreationTime(REQUEST_TIME);
+    $revision->setRevisionCreationTime(\Drupal::time()->getRequestTime());

     return $revision;
   }
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 3 files have been changed by Rector                                       

