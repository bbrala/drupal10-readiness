diff --git a/src/NodeExporter.php b/src/NodeExporter.php
index 31f106c..abb6849 100644
--- a/src/NodeExporter.php
+++ b/src/NodeExporter.php
@@ -87,7 +87,7 @@ class NodeExporter implements NodeExporterInterface, ContainerFactoryPluginInter
     $lines = $this->generateRecords();
     $lines = implode(PHP_EOL, $lines);
     // @todo - Allow for private storage.
-    return file_save_data($lines, 'public://' . $this->filename, FileSystemInterface::EXISTS_REPLACE);
+    return \Drupal::service('file.repository')->writeData($lines, 'public://' . $this->filename, FileSystemInterface::EXISTS_REPLACE);
   }
 
   /**
