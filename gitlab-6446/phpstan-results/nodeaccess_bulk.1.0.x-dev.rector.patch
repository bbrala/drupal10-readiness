diff --git a/src/Plugin/Action/NodeaccessBulkAction.php b/src/Plugin/Action/NodeaccessBulkAction.php
index 94da7cb..254b390 100644
--- a/src/Plugin/Action/NodeaccessBulkAction.php
+++ b/src/Plugin/Action/NodeaccessBulkAction.php
@@ -63,7 +63,7 @@ class NodeaccessBulkAction extends ViewsBulkOperationsActionBase implements
       ->condition("nid", $nid)
       ->execute();
     foreach ($grants as $grant) {
-      $id = db_insert("nodeaccess")
+      $id = \Drupal::database()->insert("nodeaccess")
         ->fields([
           "nid" => $nid,
           "gid" => $grant["gid"],
@@ -124,7 +124,7 @@ class NodeaccessBulkAction extends ViewsBulkOperationsActionBase implements
         array_push($uids, $form_values["keys"]);
       }
       $params = [":uids[]" => $uids];
-      $result = db_query($sql, $params);
+      $result = \Drupal::database()->query($sql, $params);
       foreach ($result as $account) {
         $form_values["uid"][$account->uid] = [
           "name" => $account->name,
