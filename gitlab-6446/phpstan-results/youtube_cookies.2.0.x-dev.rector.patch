diff --git a/composer.json b/composer.json
index d955918..5910530 100644
--- a/composer.json
+++ b/composer.json
@@ -15,6 +15,6 @@
   },
   "license": "GPL-2.0+",
   "require": {
-    "drupal/core": "^8 || ^9"
+    "drupal/core": "^9.3 || ^10"
   }
 }
diff --git a/youtube_cookies.info.yml b/youtube_cookies.info.yml
index 1af9750..ad085e0 100644
--- a/youtube_cookies.info.yml
+++ b/youtube_cookies.info.yml
@@ -2,6 +2,5 @@ name: youtube_cookies
 type: module
 description: Manage youtube cookie privacy
 package: Media
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: youtube_cookies.settings
diff --git a/youtube_cookies.module b/youtube_cookies.module
index f62920c..d903bc2 100644
--- a/youtube_cookies.module
+++ b/youtube_cookies.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Render\RenderContext;
 /**
  * @file
  * Do not load youtube videos after accepting youtube onetrust cookies.
@@ -15,7 +16,7 @@ function youtube_cookies_page_attachments(&$attachments) {
   if (!empty($cookie_category) && !empty($provider)) {
     $attachments['#attached']['library'][] = 'youtube_cookies/youtube-cookies';
     $attachments['#attached']['library'][] = sprintf('youtube_cookies/%s', $provider);
-    \Drupal::service('renderer')->executeInRenderContext(new \Drupal\Core\Render\RenderContext(), function () use (&$attachments, $config, $provider) {
+    \Drupal::service('renderer')->executeInRenderContext(new RenderContext(), function () use (&$attachments, $config, $provider) {
       $attachments['#attached']['drupalSettings']['youtubeCookies']['cookieCategory'] = $config->get('cookie_category');
       $attachments['#attached']['drupalSettings']['youtubeCookies']['action'] = $config->get('action');
       $attachments['#attached']['drupalSettings']['youtubeCookies']['popupMessage'] = youtube_cookies_popup_message($config->get('popup_message'));
@@ -46,7 +47,7 @@ function youtube_cookies_popup_message($message) {
       ],
     ],
   ];
-  return render($button);
+  return \Drupal::service('renderer')->render($button);
 }
 
 /**
@@ -70,7 +71,7 @@ function youtube_cookies_popup_button($provider) {
       ],
     ],
   ];
-  return render($button);
+  return \Drupal::service('renderer')->render($button);
 }
 
 /**
@@ -90,7 +91,7 @@ function youtube_cookies_ok_button() {
       ],
     ],
   ];
-  return render($button);
+  return \Drupal::service('renderer')->render($button);
 }
 
 /**
@@ -110,5 +111,5 @@ function youtube_cookies_exit_button() {
       ],
     ],
   ];
-  return render($button);
+  return \Drupal::service('renderer')->render($button);
 }
