modules/contrib/global_content/global_content.module
modules/contrib/global_content/src/GlobalContentHtmlRouteProvider.php
modules/contrib/global_content/global_content.page.inc
modules/contrib/global_content/src/Controller/GlobalContentController.php
modules/contrib/global_content/src/GlobalContentListBuilder.php
modules/contrib/global_content/src/GlobalContentStorage.php
modules/contrib/global_content/src/GlobalContentStorageInterface.php
modules/contrib/global_content/src/GlobalContentTranslationHandler.php
modules/contrib/global_content/src/Entity/GlobalContent.php
modules/contrib/global_content/tests/src/Functional/LoadTest.php
modules/contrib/global_content/src/Entity/GlobalContentInterface.php
modules/contrib/global_content/src/Entity/GlobalContentViewsData.php
modules/contrib/global_content/src/Form/GlobalContentDeleteForm.php
modules/contrib/global_content/src/Form/GlobalContentForm.php
modules/contrib/global_content/src/Form/GlobalContentRevisionDeleteForm.php
modules/contrib/global_content/src/Form/GlobalContentRevisionRevertForm.php
modules/contrib/global_content/src/Form/GlobalContentRevisionRevertTranslationForm.php
modules/contrib/global_content/src/Form/GlobalContentSettingsForm.php
modules/contrib/global_content/src/GlobalContentAccessControlHandler.php

6 files with changes
====================

1) modules/contrib/global_content/tests/src/Functional/LoadTest.php:33

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
@@ @@
    */
   public function testLoad() {
     $this->drupalGet(Url::fromRoute('<front>'));
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertResponseRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/global_content/src/Form/GlobalContentRevisionRevertTranslationForm.php:109

    ---------- begin diff ----------
@@ @@

     $latest_revision_translation->setNewRevision();
     $latest_revision_translation->isDefaultRevision(TRUE);
-    $revision->setRevisionCreationTime(REQUEST_TIME);
+    $revision->setRevisionCreationTime(\Drupal::time()->getRequestTime());

     return $latest_revision_translation;
   }
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/global_content/src/Form/GlobalContentRevisionRevertForm.php:148

    ---------- begin diff ----------
@@ @@
   protected function prepareRevertedRevision(GlobalContentInterface $revision, FormStateInterface $form_state) {
     $revision->setNewRevision();
     $revision->isDefaultRevision(TRUE);
-    $revision->setRevisionCreationTime(REQUEST_TIME);
+    $revision->setRevisionCreationTime(\Drupal::time()->getRequestTime());

     return $revision;
   }
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/global_content/src/Form/GlobalContentRevisionDeleteForm.php:71

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function getQuestion() {
-    return $this->t('Are you sure you want to delete the revision from %revision-date?', ['%revision-date' => format_date($this->revision->getRevisionCreationTime())]);
+    return $this->t('Are you sure you want to delete the revision from %revision-date?', ['%revision-date' => \Drupal::service('date.formatter')->format($this->revision->getRevisionCreationTime())]);
   }

   /**
@@ @@

     $this->messenger()
       ->addMessage($this->t('Revision from %revision-date of Global Content %title has been deleted.', [
-        '%revision-date' => format_date($this->revision->getRevisionCreationTime()),
+        '%revision-date' => \Drupal::service('date.formatter')->format($this->revision->getRevisionCreationTime()),
         '%title' => $this->revision->label(),
       ]));
    ----------- end diff -----------

Applied rules:
 * FormatDateRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/global_content/src/Form/GlobalContentForm.php:41

    ---------- begin diff ----------
@@ @@
       $entity->setNewRevision();

       // If a new revision is created, save the current user as revision author.
-      $entity->setRevisionCreationTime(REQUEST_TIME);
+      $entity->setRevisionCreationTime(\Drupal::time()->getRequestTime());
       $entity->setRevisionUserId(\Drupal::currentUser()->id());
     }
     else {
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


6) modules/contrib/global_content/src/Controller/GlobalContentController.php:110

    ---------- begin diff ----------
@@ @@
           ]));
         }
         else {
-          $link = $global_content->link($date);
+          $link = $global_content->toLink($date)->toString();
         }

         $row = [];
    ----------- end diff -----------

Applied rules:
 * EntityInterfaceLinkRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

