diff --git a/message_subscribe_email/message_subscribe_email.install b/message_subscribe_email/message_subscribe_email.install
index ed7243a..cc1b3e9 100644
--- a/message_subscribe_email/message_subscribe_email.install
+++ b/message_subscribe_email/message_subscribe_email.install
@@ -18,7 +18,7 @@ function message_subscribe_email_install() {
   }
   else {
     // Pre-Drupal 8.8.
-    $display = entity_get_form_display('user', 'user', 'default');
+    $display = \Drupal::service('entity_display.repository')->getFormDisplay('user', 'user', 'default');
   }
   if (!$display->getComponent('message_subscribe_email')) {
     $settings = [
diff --git a/message_subscribe_email/tests/src/Functional/ViewsTest.php b/message_subscribe_email/tests/src/Functional/ViewsTest.php
index 1b0a74b..9f5a0d2 100644
--- a/message_subscribe_email/tests/src/Functional/ViewsTest.php
+++ b/message_subscribe_email/tests/src/Functional/ViewsTest.php
@@ -38,7 +38,7 @@ class ViewsTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->flagService = $this->container->get('flag');
diff --git a/message_subscribe_email/tests/src/FunctionalJavascript/MessageSubscribeEmailTest.php b/message_subscribe_email/tests/src/FunctionalJavascript/MessageSubscribeEmailTest.php
index 8bed8f9..5a6a03d 100644
--- a/message_subscribe_email/tests/src/FunctionalJavascript/MessageSubscribeEmailTest.php
+++ b/message_subscribe_email/tests/src/FunctionalJavascript/MessageSubscribeEmailTest.php
@@ -40,7 +40,7 @@ class MessageSubscribeEmailTest extends WebDriverTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Add some nodes.
diff --git a/message_subscribe_email/tests/src/Kernel/Form/AdminSettingsTest.php b/message_subscribe_email/tests/src/Kernel/Form/AdminSettingsTest.php
index c0c3f3d..0bc2bed 100644
--- a/message_subscribe_email/tests/src/Kernel/Form/AdminSettingsTest.php
+++ b/message_subscribe_email/tests/src/Kernel/Form/AdminSettingsTest.php
@@ -19,7 +19,7 @@ class AdminSettingsTest extends MessageSubscribeAdminSettingsTest {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->values['message_subscribe_email_flag_prefix'] = [
diff --git a/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailNotificationsTest.php b/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailNotificationsTest.php
index 93f003b..c3c6bdb 100644
--- a/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailNotificationsTest.php
+++ b/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailNotificationsTest.php
@@ -15,7 +15,7 @@ class MessageSubscribeEmailNotificationsTest extends MessageSubscribeEmailTestBa
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $flag = $this->flagService->getFlagById('subscribe_node');
diff --git a/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailSubscribersTest.php b/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailSubscribersTest.php
index cf22330..7790733 100644
--- a/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailSubscribersTest.php
+++ b/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailSubscribersTest.php
@@ -18,7 +18,7 @@ class MessageSubscribeEmailSubscribersTest extends MessageSubscribeEmailTestBase
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     // Opt out of default email notifications and subscribe to node 1.
diff --git a/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailTestBase.php b/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailTestBase.php
index ac88e23..16612c4 100644
--- a/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailTestBase.php
+++ b/message_subscribe_email/tests/src/Kernel/MessageSubscribeEmailTestBase.php
@@ -46,7 +46,7 @@ abstract class MessageSubscribeEmailTestBase extends MessageSubscribeTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->installConfig(['message_subscribe_email']);
diff --git a/message_subscribe_email/tests/src/Unit/ManagerTest.php b/message_subscribe_email/tests/src/Unit/ManagerTest.php
index 5725359..a8a0482 100644
--- a/message_subscribe_email/tests/src/Unit/ManagerTest.php
+++ b/message_subscribe_email/tests/src/Unit/ManagerTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\message_subscribe_email\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Config\ImmutableConfig;
 use Drupal\flag\FlagInterface;
@@ -18,6 +19,7 @@ use Drupal\Tests\UnitTestCase;
  */
 class ManagerTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Tests the flag retrieval.
    *
diff --git a/message_subscribe_ui/tests/src/Functional/SubscriptionsBlockTest.php b/message_subscribe_ui/tests/src/Functional/SubscriptionsBlockTest.php
index 0deb0f0..4db9c2a 100644
--- a/message_subscribe_ui/tests/src/Functional/SubscriptionsBlockTest.php
+++ b/message_subscribe_ui/tests/src/Functional/SubscriptionsBlockTest.php
@@ -66,7 +66,7 @@ class SubscriptionsBlockTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->adminUser = $this->createUser([], NULL, TRUE);
@@ -139,7 +139,7 @@ class SubscriptionsBlockTest extends BrowserTestBase {
       'subscriptions[taxonomy_term][' . $this->terms[1]->id() . ']' => TRUE,
       'subscriptions[taxonomy_term][' . $this->terms[7]->id() . ']' => TRUE,
     ];
-    $this->drupalPostForm(NULL, $edit, t('Save'));
+    $this->submitForm($edit, t('Save'));
     $flag = $this->flagService->getFlagById('subscribe_term');
     foreach ([1, 3, 7, 9] as $i) {
       $term = $this->terms[$i];
@@ -173,7 +173,7 @@ class SubscriptionsBlockTest extends BrowserTestBase {
     $edit = [
       'subscriptions[user][' . $this->adminUser->id() . ']' => TRUE,
     ];
-    $this->drupalPostForm(NULL, $edit, t('Save'));
+    $this->submitForm($edit, t('Save'));
     $flag = $this->flagService->getFlagById('subscribe_user');
     $this->assertNotEmpty($this->flagService->getEntityFlaggings($flag, $this->adminUser, $this->webUser));
     // Subscriptions should be checked.
diff --git a/tests/src/Functional/UninstallTest.php b/tests/src/Functional/UninstallTest.php
index 59772e1..8625b18 100644
--- a/tests/src/Functional/UninstallTest.php
+++ b/tests/src/Functional/UninstallTest.php
@@ -27,10 +27,11 @@ class UninstallTest extends BrowserTestBase {
     // Verify settings page.
     $this->drupalGet(Url::fromRoute('message_subscribe.admin_settings'));
     $this->assertSession()->statusCodeEquals(200);
+    $this->drupalGet('admin/modules/uninstall');
 
     // Uninstall module.
-    $this->drupalPostForm('admin/modules/uninstall', ['uninstall[message_subscribe]' => TRUE], t('Uninstall'));
-    $this->drupalPostForm(NULL, [], t('Uninstall'));
+    $this->submitForm(['uninstall[message_subscribe]' => TRUE], t('Uninstall'));
+    $this->submitForm([], t('Uninstall'));
 
     // Validate Message Subscribe was uninstalled.
     $this->assertSession()->pageTextContains(t('The selected modules have been uninstalled.'));
diff --git a/tests/src/Kernel/ContextTest.php b/tests/src/Kernel/ContextTest.php
index 7f99b0c..a51c287 100644
--- a/tests/src/Kernel/ContextTest.php
+++ b/tests/src/Kernel/ContextTest.php
@@ -78,7 +78,7 @@ class ContextTest extends MessageSubscribeTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->installSchema('comment', ['comment_entity_statistics']);
diff --git a/tests/src/Kernel/Form/MessageSubscribeAdminSettingsTest.php b/tests/src/Kernel/Form/MessageSubscribeAdminSettingsTest.php
index 7c048cd..a43479b 100644
--- a/tests/src/Kernel/Form/MessageSubscribeAdminSettingsTest.php
+++ b/tests/src/Kernel/Form/MessageSubscribeAdminSettingsTest.php
@@ -26,7 +26,7 @@ class MessageSubscribeAdminSettingsTest extends ConfigFormTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->form = MessageSubscribeAdminSettings::create($this->container);
diff --git a/tests/src/Kernel/MessageSubscribeTestBase.php b/tests/src/Kernel/MessageSubscribeTestBase.php
index b7e0c60..d1cd006 100644
--- a/tests/src/Kernel/MessageSubscribeTestBase.php
+++ b/tests/src/Kernel/MessageSubscribeTestBase.php
@@ -51,7 +51,7 @@ abstract class MessageSubscribeTestBase extends KernelTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->installSchema('system', ['sequences']);
diff --git a/tests/src/Kernel/QueueTest.php b/tests/src/Kernel/QueueTest.php
index 13542d4..aea7ae7 100644
--- a/tests/src/Kernel/QueueTest.php
+++ b/tests/src/Kernel/QueueTest.php
@@ -24,7 +24,7 @@ class QueueTest extends MessageSubscribeTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->config('message_subscribe.settings')
diff --git a/tests/src/Kernel/SubscribersTest.php b/tests/src/Kernel/SubscribersTest.php
index ba41c8b..824caa2 100644
--- a/tests/src/Kernel/SubscribersTest.php
+++ b/tests/src/Kernel/SubscribersTest.php
@@ -56,7 +56,7 @@ class SubscribersTest extends MessageSubscribeTestBase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     $this->installSchema('node', ['node_access']);
diff --git a/tests/src/Unit/SubscribersTest.php b/tests/src/Unit/SubscribersTest.php
index 957acfc..fc40ac7 100644
--- a/tests/src/Unit/SubscribersTest.php
+++ b/tests/src/Unit/SubscribersTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\message_subscribe\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Entity\EntityInterface;
@@ -29,6 +30,7 @@ use Prophecy\Argument;
  */
 class SubscribersTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Mock flag service.
    *
@@ -74,7 +76,7 @@ class SubscribersTest extends UnitTestCase {
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
 
     require __DIR__ . '/../fixture_foo.module.php';
