modules/contrib/fillpdf/fillpdf.api.php
modules/contrib/fillpdf/src/Controller/HandlePdfController.php
modules/contrib/fillpdf/src/FillPdfFormInterface.php
modules/contrib/fillpdf/src/Plugin/FillPdfActionPluginBase.php
modules/contrib/fillpdf/tests/modules/fillpdf_test/fillpdf_test.module
modules/contrib/fillpdf/tests/src/Functional/PdfPopulationTest.php
modules/contrib/fillpdf/src/FillPdfFormListBuilder.php
modules/contrib/fillpdf/src/Plugin/FillPdfActionPluginInterface.php
modules/contrib/fillpdf/src/Plugin/FillPdfActionPluginManager.php
modules/contrib/fillpdf/fillpdf.install
modules/contrib/fillpdf/tests/modules/fillpdf_test/src/Plugin/PdfBackend/TestPdfBackend.php
modules/contrib/fillpdf/src/Plugin/PdfBackend/FillPdfServicePdfBackend.php
modules/contrib/fillpdf/src/FillPdfFormViewsData.php
modules/contrib/fillpdf/src/FillPdfLinkManipulatorInterface.php
modules/contrib/fillpdf/src/Form/FillPdfFormConfirmFormBase.php
modules/contrib/fillpdf/src/Form/FillPdfFormDeleteForm.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfFormDeleteFormTest.php
modules/contrib/fillpdf/src/Plugin/PdfBackend/LocalServerPdfBackend.php
modules/contrib/fillpdf/src/Form/FillPdfFormDuplicateForm.php
modules/contrib/fillpdf/src/Form/FillPdfFormExportForm.php
modules/contrib/fillpdf/src/Form/FillPdfFormFieldForm.php
modules/contrib/fillpdf/src/Plugin/PdfBackend/PdftkPdfBackend.php
modules/contrib/fillpdf/src/Entity/FillPdfFileContext.php
modules/contrib/fillpdf/src/Form/FillPdfFormForm.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfFormDuplicateFormTest.php
modules/contrib/fillpdf/src/Entity/FillPdfFileContextViewsData.php
modules/contrib/fillpdf/src/Entity/FillPdfForm.php
modules/contrib/fillpdf/fillpdf.module
modules/contrib/fillpdf/src/Annotation/FillPdfActionPlugin.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfFormFormTest.php
modules/contrib/fillpdf/src/Annotation/PdfBackend.php
modules/contrib/fillpdf/src/Component/Helper/FillPdfMappingHelper.php
modules/contrib/fillpdf/src/Component/Helper/FillPdfMappingHelperInterface.php
modules/contrib/fillpdf/src/Component/Utility/FillPdf.php
modules/contrib/fillpdf/tests/src/Functional/PdfWebformPopulationTest.php
modules/contrib/fillpdf/src/Plugin/PdfBackendBase.php
modules/contrib/fillpdf/src/Plugin/PdfBackendInterface.php
modules/contrib/fillpdf/src/Plugin/PdfBackendManager.php
modules/contrib/fillpdf/src/Serializer.php
modules/contrib/fillpdf/src/Entity/FillPdfFormField.php
modules/contrib/fillpdf/src/ExportableContentEntityInterface.php
modules/contrib/fillpdf/src/FieldMapping.php
modules/contrib/fillpdf/src/SerializerInterface.php
modules/contrib/fillpdf/src/FieldMapping/ImageFieldMapping.php
modules/contrib/fillpdf/src/Service/BackendProxy.php
modules/contrib/fillpdf/src/FieldMapping/TextFieldMapping.php
modules/contrib/fillpdf/tests/src/Functional/UninstallTest.php
modules/contrib/fillpdf/src/FillPdfAccessController.php
modules/contrib/fillpdf/src/FillPdfAccessHelper.php
modules/contrib/fillpdf/tests/src/Kernel/FillPdfKernelTestBase.php
modules/contrib/fillpdf/src/Service/BackendProxyInterface.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfFormImportFormTest.php
modules/contrib/fillpdf/src/Service/FillPdfAdminFormHelper.php
modules/contrib/fillpdf/src/FillPdfAccessHelperInterface.php
modules/contrib/fillpdf/src/FillPdfAdminFormHelperInterface.php
modules/contrib/fillpdf/tests/src/Traits/TestFillPdfTrait.php
modules/contrib/fillpdf/src/FillPdfContextManagerInterface.php
modules/contrib/fillpdf/src/FillPdfFileContextAccessControlHandler.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfOverviewFormTest.php
modules/contrib/fillpdf/src/FillPdfFileContextInterface.php
modules/contrib/fillpdf/src/FillPdfFormAccessControlHandler.php
modules/contrib/fillpdf/src/FillPdfFormFieldInterface.php
modules/contrib/fillpdf/src/FillPdfFormFieldStorage.php
modules/contrib/fillpdf/src/Service/FillPdfContextManager.php
modules/contrib/fillpdf/src/Service/FillPdfLinkManipulator.php
modules/contrib/fillpdf/src/FillPdfFormFieldViewsData.php
modules/contrib/fillpdf/tests/src/Traits/TestImageFieldTrait.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfSettingsFormTest.php
modules/contrib/fillpdf/src/Form/FillPdfFormImportForm.php
modules/contrib/fillpdf/tests/src/Unit/FieldMapping/ImageFieldMappingTest.php
modules/contrib/fillpdf/src/Form/FillPdfOverviewForm.php
modules/contrib/fillpdf/tests/src/Unit/FieldMapping/TextFieldMappingTest.php
modules/contrib/fillpdf/src/ShellManager.php
modules/contrib/fillpdf/tests/src/Unit/LinkManipulator/ParseBooleanFlagsTest.php
modules/contrib/fillpdf/src/ShellManagerInterface.php
modules/contrib/fillpdf/src/TokenResolver.php
modules/contrib/fillpdf/tests/src/Unit/LinkManipulator/ParseEntityIdsTest.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfTestBase.php
modules/contrib/fillpdf/xfdf.inc
modules/contrib/fillpdf/src/Form/FillPdfSettingsForm.php
modules/contrib/fillpdf/tests/src/Functional/FillPdfUploadTestBase.php
modules/contrib/fillpdf/src/TokenResolverInterface.php
modules/contrib/fillpdf/tests/src/Functional/HandlePdfControllerTest.php
modules/contrib/fillpdf/src/InputHelper.php
modules/contrib/fillpdf/src/InputHelperInterface.php
modules/contrib/fillpdf/src/OutputHandler.php
modules/contrib/fillpdf/src/OutputHandlerInterface.php
modules/contrib/fillpdf/src/Plugin/FillPdfActionPlugin/FillPdfDownloadAction.php
modules/contrib/fillpdf/src/Plugin/FillPdfActionPlugin/FillPdfRedirectAction.php
modules/contrib/fillpdf/tests/src/Functional/LinkManipulatorTest.php
modules/contrib/fillpdf/src/Plugin/FillPdfActionPlugin/FillPdfSaveAction.php
modules/contrib/fillpdf/tests/src/Functional/PdfParseTest.php

6 files with changes
====================

1) modules/contrib/fillpdf/src/Component/Utility/FillPdf.php:27

    ---------- begin diff ----------
@@ @@
     if (empty($pdftk_path)) {
       $pdftk_path = 'pdftk';
     }
-    $process = new Process($pdftk_path . ' --version');
+    $process = new Process([$pdftk_path, '--version']);
     $process->run();

     // Check there's no error code and the --version output includes "pdftk".
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * StringToArrayArgumentProcessRector
 * WrapReturnRector


2) modules/contrib/fillpdf/tests/src/Traits/TestFillPdfTrait.php:147

    ---------- begin diff ----------
@@ @@
   protected function getTestPdfPath($filename) {
     /** @var \Drupal\Core\File\FileSystem $file_system */
     $file_system = $this->container->get('file_system');
-    return $file_system->realpath(drupal_get_path('module', 'fillpdf') . '/tests/modules/fillpdf_test/files/' . $filename);
+    return $file_system->realpath(\Drupal::service('extension.list.module')->getPath('fillpdf') . '/tests/modules/fillpdf_test/files/' . $filename);
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector


3) modules/contrib/fillpdf/src/Plugin/PdfBackend/PdftkPdfBackend.php:92

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function parseStream($pdf_content) {
-    $template_file = file_save_data($pdf_content);
+    $template_file = \Drupal::service('file.repository')->writeData($pdf_content);
     return $this->parseFile($template_file);
   }

@@ @@
    * {@inheritdoc}
    */
   public function mergeStream($pdf_content, array $field_mappings, array $context) {
-    $template_file = file_save_data($pdf_content);
+    $template_file = \Drupal::service('file.repository')->writeData($pdf_content);
     return $this->mergeFile($template_file, $field_mappings, $context);
   }

@@ @@
     $xfdf_name = $template_uri . '.xfdf';
     $xfdf = create_xfdf(basename($xfdf_name), $fields);
     // Generate the file.
-    $xfdf_file = file_save_data($xfdf, $xfdf_name, FileSystemInterface::EXISTS_RENAME);
+    $xfdf_file = \Drupal::service('file.repository')->writeData($xfdf, $xfdf_name, FileSystemInterface::EXISTS_RENAME);

     // @todo Improve this approach when we turn $context into a value object.
     if (!isset($context['fid'])) {
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


4) modules/contrib/fillpdf/src/Plugin/FillPdfActionPlugin/FillPdfRedirectAction.php:30

    ---------- begin diff ----------
@@ @@
    */
   public function execute() {
     $saved_file = $this->savePdf();
-    $url = ($saved_file !== FALSE) ? file_create_url($saved_file->getFileUri()) : Url::fromRoute('<front>')->toString();
+    $url = ($saved_file !== FALSE) ? \Drupal::service('file_url_generator')->generateAbsoluteString($saved_file->getFileUri()) : Url::fromRoute('<front>')->toString();
     return new RedirectResponse($url);
   }
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


5) modules/contrib/fillpdf/src/OutputHandler.php:97

    ---------- begin diff ----------
@@ @@
     }
     else {
       // Full steam ahead!
-      $saved_file = file_save_data($configuration['data'], "{$resolved_destination_path}/{$configuration['filename']}", FileSystemInterface::EXISTS_RENAME);
+      $saved_file = \Drupal::service('file.repository')->writeData($configuration['data'], "{$resolved_destination_path}/{$configuration['filename']}", FileSystemInterface::EXISTS_RENAME);
       $this->rememberFileContext($saved_file, $configuration['context']);
     }
    ----------- end diff -----------

Applied rules:
 * FileSaveDataRector
 * ArgumentRemoverRector
 * WrapReturnRector


6) modules/contrib/fillpdf/tests/modules/fillpdf_test/src/Plugin/PdfBackend/TestPdfBackend.php:86

    ---------- begin diff ----------
@@ @@
    */
   public function mergeStream($pdf_content, array $field_mappings, array $context) {
     // Not really populated, but that isn't our job.
-    $populated_pdf = file_get_contents(drupal_get_path('module', 'fillpdf_test') . '/files/fillpdf_test_v3.pdf');
+    $populated_pdf = file_get_contents(\Drupal::service('extension.list.module')->getPath('fillpdf_test') . '/files/fillpdf_test_v3.pdf');

     $this->state->set('fillpdf_test.last_populated_metadata', [
       'field_mapping' => $field_mappings,
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

