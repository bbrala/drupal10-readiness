diff --git a/modules/google_analytics_reports_api/tests/src/mock.php b/modules/google_analytics_reports_api/tests/src/mock.php
index ecd73c3..4d02841 100644
--- a/modules/google_analytics_reports_api/tests/src/mock.php
+++ b/modules/google_analytics_reports_api/tests/src/mock.php
@@ -15,9 +15,7 @@ function mock_drupal_services($item, $config_map = []) {
 
   foreach ([
     ['Drupal\\Core\\StreamWrapper\\StreamWrapperManager', 'stream_wrapper_manager', function ($item, &$themock) {
-      $fake = $item->getMockBuilder('Drupal\Core\StreamWrapper\PrivateStream')
-        ->disableOriginalConstructor()
-        ->getMock();
+      $fake = $item->createMock('Drupal\Core\StreamWrapper\PrivateStream');
       $file = realpath(__DIR__ . '/credential.json');
       $fake->expects($item->any())
         ->method('realpath')
@@ -39,9 +37,7 @@ function mock_drupal_services($item, $config_map = []) {
     },
 ],
     ['Drupal\\Core\\Cache\\CacheFactory', 'cache_factory', function ($item, &$themock) {
-      $file = $item->getMockBuilder('Drupal\Core\Cache\NullBackend')
-        ->disableOriginalConstructor()
-        ->getMock();
+      $file = $item->createMock('Drupal\Core\Cache\NullBackend');
 
       $themock->expects($item->any())
         ->method('get')
@@ -70,11 +66,7 @@ function mock_drupal_service($item, $class, $key, $callback) {
   static $container;
   if (!is_object($class)) {
     $methods = get_class_methods($class);
-    $sv = $item
-      ->getMockBuilder($class)
-      ->disableOriginalConstructor()
-      ->setMethods($methods)
-      ->getMock($key);
+    $sv = $item->createMock($class);
   }
   else {
     $sv = $class;
