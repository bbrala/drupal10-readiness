diff --git a/src/Controller/DefaultController.php b/src/Controller/DefaultController.php
index 4c602f8..b54f051 100644
--- a/src/Controller/DefaultController.php
+++ b/src/Controller/DefaultController.php
@@ -5,6 +5,7 @@
 
 namespace Drupal\webform_email_reply\Controller;
 
+use Drupal\Core\Access\AccessResultInterface;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Session\AccountInterface;
 use Drupal\webform\WebformRequestInterface;
@@ -36,14 +37,14 @@ class DefaultController extends ControllerBase {
   /**
    * Current user account.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $current_user;
 
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;
 
@@ -75,10 +76,10 @@ class DefaultController extends ControllerBase {
    *
    * @param \Drupal\webform\WebformSubmissionInterface $webform_submission
    *   A webform submission.
-   * @param \Drupal\Core\Session\AccountInterface $account
+   * @param AccountInterface $account
    *   Run access checks for this account.
    *
-   * @return \Drupal\Core\Access\AccessResultInterface
+   * @return AccessResultInterface
    *   The access result.
    */
   public static function checkReplyAccess(AccountInterface $account) {
@@ -112,7 +113,7 @@ class DefaultController extends ControllerBase {
       $file_display = 'none';
       if ($reply->fid) {
         $file = File::load($reply->fid);
-        $uri = file_create_url($file->getFileUri());
+        $uri = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
         // $file_display = [
         //   '#type' => 'link',
         //   '#title' => $this->t('View'),
diff --git a/src/Form/WebformEmailReplyForm.php b/src/Form/WebformEmailReplyForm.php
index ffccf2c..63cbcbf 100644
--- a/src/Form/WebformEmailReplyForm.php
+++ b/src/Form/WebformEmailReplyForm.php
@@ -7,6 +7,8 @@
 
 namespace Drupal\webform_email_reply\Form;
 
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Access\AccessResultInterface;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Render\Element;
@@ -30,7 +32,7 @@ class WebformEmailReplyForm extends FormBase {
   /**
    * The source entity.
    *
-   * @var \Drupal\Core\Entity\EntityInterface
+   * @var EntityInterface
    */
   protected $entity;
 
@@ -51,7 +53,7 @@ class WebformEmailReplyForm extends FormBase {
   /**
    * Current user account.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $current_user;
 
@@ -81,10 +83,10 @@ class WebformEmailReplyForm extends FormBase {
    *
    * @param \Drupal\webform\WebformSubmissionInterface $webform_submission
    *   A webform submission.
-   * @param \Drupal\Core\Session\AccountInterface $account
+   * @param AccountInterface $account
    *   Run access checks for this account.
    *
-   * @return \Drupal\Core\Access\AccessResultInterface
+   * @return AccessResultInterface
    *   The access result.
    */
   public static function checkReplyAccess(WebformSubmissionInterface $webform_submission, AccountInterface $account) {
@@ -182,7 +184,7 @@ class WebformEmailReplyForm extends FormBase {
     return $form;
   }
 
-  public function validateForm(array &$form, \Drupal\Core\Form\FormStateInterface $form_state) {
+  public function validateForm(array &$form, FormStateInterface $form_state) {
     $from_email = $form_state->getValue(['details', 'from_address']);
     if (!\Drupal::service('email.validator')->isValid($from_email)) {
       $form_state->setErrorByName('details][from_address', $this->t('The from email address, @email, is not valid. Please enter a valid email address.', [
@@ -231,7 +233,7 @@ class WebformEmailReplyForm extends FormBase {
         'filename' => $file->getFilename(),
         'filemime' => $file->getMimeType(),
         'filepath' => \Drupal::service('file_system')->realpath($file->getFileUri()),
-        '_uri' => file_create_url($file->getFileUri()),
+        '_uri' => \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()),
       ];
       $params['headers'] = [
         'MIME-Version' => '1.0',
