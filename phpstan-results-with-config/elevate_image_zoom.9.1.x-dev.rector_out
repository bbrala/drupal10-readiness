modules/contrib/elevate_image_zoom/elevate_image_zoom.install
modules/contrib/elevate_image_zoom/elevate_image_zoom.module
modules/contrib/elevate_image_zoom/src/Plugin/Field/FieldFormatter/ElevateImageZoomFormatter.php

1 file with changes
===================

1) modules/contrib/elevate_image_zoom/src/Plugin/Field/FieldFormatter/ElevateImageZoomFormatter.php:6

    ---------- begin diff ----------
@@ @@

 namespace Drupal\elevate_image_zoom\Plugin\Field\FieldFormatter;

+use Drupal\Core\Field\EntityReferenceFieldItemListInterface;
 use Drupal\core\field\FieldItemListInterface;
 use Drupal\image\Plugin\Field\FieldFormatter\ImageFormatter;
 use Drupal\Core\Form\FormStateInterface;
@@ @@
    */
   public function viewElements(FieldItemListInterface $items, $langcode) {
     $elements = [];
-    /** @var \Drupal\Core\Field\EntityReferenceFieldItemListInterface $items */
+    /** @var EntityReferenceFieldItemListInterface $items */
     if (empty($images = $this->getEntitiesToView($items, $langcode))) {
       return $elements;
     }
@@ @@
       $image_style_thumbnail = $this->imageStyleStorage->load($this->getSetting('elevate_thumbnail'));
       foreach ($images as $delta => $image) {
         $image_uri = $image->getFileUri();
-        $zoom_image_url = $zoom_image_style ? $zoom_image_style->buildUrl($image_uri) : file_create_url($image_uri);
-        $zoom_image_url = file_url_transform_relative($zoom_image_url);
-        $image_url = $image_style_setting ? $image_style_setting->buildUrl($image_uri) : file_create_url($image_uri);
-        $image_url = file_url_transform_relative($image_url);
-        $thumbnail_image_url = $image_style_thumbnail ? $image_style_thumbnail->buildUrl($image_uri) : file_create_url($image_uri);
-        $thumbnail_image_url = file_url_transform_relative($thumbnail_image_url);
+        $zoom_image_url = $zoom_image_style ? $zoom_image_style->buildUrl($image_uri) : \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
+        $zoom_image_url = \Drupal::service('file_url_generator')->transformRelative($zoom_image_url);
+        $image_url = $image_style_setting ? $image_style_setting->buildUrl($image_uri) : \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
+        $image_url = \Drupal::service('file_url_generator')->transformRelative($image_url);
+        $thumbnail_image_url = $image_style_thumbnail ? $image_style_thumbnail->buildUrl($image_uri) : \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
+        $thumbnail_image_url = \Drupal::service('file_url_generator')->transformRelative($thumbnail_image_url);
         $images_array[$delta]['images_url'] = $image_url;
         $images_array[$delta]['zoom_image_url'] = $zoom_image_url;
         $images_array[$delta]['thumbnail'] = $thumbnail_image_url;
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

