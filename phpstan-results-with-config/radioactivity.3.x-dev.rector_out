modules/contrib/radioactivity/endpoints/file/rest.php
modules/contrib/radioactivity/radioactivity.module
modules/contrib/radioactivity/src/Controller/EmitController.php
modules/contrib/radioactivity/src/DefaultIncidentStorage.php
modules/contrib/radioactivity/src/EntityOperations.php
modules/contrib/radioactivity/src/Event/EnergyBelowCutoffEvent.php
modules/contrib/radioactivity/src/Incident.php
modules/contrib/radioactivity/src/IncidentInterface.php
modules/contrib/radioactivity/src/IncidentStorageInterface.php
modules/contrib/radioactivity/src/Plugin/Field/FieldFormatter/RadioactivityEmitter.php
modules/contrib/radioactivity/src/Plugin/Field/FieldFormatter/RadioactivityValue.php
modules/contrib/radioactivity/src/Plugin/Field/FieldType/RadioactivityField.php
modules/contrib/radioactivity/src/Plugin/Field/FieldWidget/RadioactivityEnergy.php
modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityDecay.php
modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityIncidents.php
modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityQueueWorkerBase.php
modules/contrib/radioactivity/src/RadioactivityProcessor.php
modules/contrib/radioactivity/src/RadioactivityProcessorInterface.php
modules/contrib/radioactivity/src/RestIncidentStorage.php
modules/contrib/radioactivity/src/RestIncidentStorageInterface.php
modules/contrib/radioactivity/src/RestProcessor.php
modules/contrib/radioactivity/src/StorageFactory.php
modules/contrib/radioactivity/tests/src/FunctionalJavascript/EmitTest.php
modules/contrib/radioactivity/tests/src/FunctionalJavascript/RadioactivityFunctionalJavascriptTestBase.php
modules/contrib/radioactivity/tests/src/Kernel/EmitControllerEndpointTest.php
modules/contrib/radioactivity/tests/src/Kernel/RadioactivityFieldTypeTest.php
modules/contrib/radioactivity/tests/src/Kernel/RadioactivityValueFormatterTest.php
modules/contrib/radioactivity/tests/src/Traits/RadioactivityFunctionTestTrait.php
modules/contrib/radioactivity/tests/src/Unit/DefaultIncidentStorageTest.php
modules/contrib/radioactivity/tests/src/Unit/EmitControllerTest.php
modules/contrib/radioactivity/tests/src/Unit/EnergyBelowCutoffTest.php
modules/contrib/radioactivity/tests/src/Unit/EventTestBase.php
modules/contrib/radioactivity/tests/src/Unit/IncidentTest.php
modules/contrib/radioactivity/tests/src/Unit/RadioactivityProcessorTest.php
modules/contrib/radioactivity/tests/src/Unit/RestIncidentStorageTest.php
modules/contrib/radioactivity/tests/src/Unit/RestProcessorTest.php
modules/contrib/radioactivity/tests/src/Unit/StorageFactoryTest.php

24 files with changes
=====================

1) modules/contrib/radioactivity/tests/src/Unit/StorageFactoryTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Unit;

+use PHPUnit\Framework\MockObject\MockObject;
 use Drupal\Tests\UnitTestCase;
 use Drupal\Core\Config\ConfigFactory;
 use Drupal\Core\Config\ImmutableConfig;
@@ @@
   /**
    * Mocked immutable configuration object.
    *
-   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\Core\Config\ImmutableConfig
+   * @var MockObject|ImmutableConfig
    */
   private $config;

@@ @@
   /**
    * Mocked class resolver.
    *
-   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\Core\DependencyInjection\ClassResolverInterface
+   * @var MockObject|ClassResolverInterface
    */
   private $classResolver;

@@ @@
   /**
    * Mocked config factory.
    *
-   * @var \PHPUnit\Framework\MockObject\MockObject|\Drupal\Core\Config\ConfigFactory
+   * @var MockObject|ConfigFactory
    */
   private $configFactory;

@@ @@
       ->will($this->returnValue($this->config));

     // Mock the class resolver and the classes it provides.
-    $mockRestStorage = $this->getMockBuilder(RestIncidentStorage::class)
-      ->getMock();
-    $mockDefaultStorage = $this->getMockBuilder(DefaultIncidentStorage::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $mockRestStorage = $this->createMock(RestIncidentStorage::class);
+    $mockDefaultStorage = $this->createMock(DefaultIncidentStorage::class);

     $this->classResolver = $this->getMockBuilder(ClassResolverInterface::class)
       ->setMethods(['getInstanceFromDefinition'])
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/radioactivity/tests/src/Unit/RestProcessorTest.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * The Rest Processor under test.
    *
-   * @var \Drupal\radioactivity\RestProcessor
+   * @var RestProcessor
    */
   private $sut;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/radioactivity/tests/src/Unit/RestIncidentStorageTest.php:16

    ---------- begin diff ----------
@@ @@
   /**
    * The RestIncidentStorage under test.
    *
-   * @var \Drupal\radioactivity\RestIncidentStorage
+   * @var RestIncidentStorage
    */
   private $sut;

@@ @@
    * @covers ::addIncident
    */
   public function testAddIncident() {
-    $incident = $this->getMockBuilder(IncidentInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $incident = $this->createMock(IncidentInterface::class);

     $this->expectException("Exception");
     $this->expectExceptionMessage("The Radioactivity rest endpoint expects incidents to be added somewhere else.");
@@ @@

   /**
    * @covers ::clearIncidents
+   * @doesNotPerformAssertions
    */
   public function testClearIncidents() {
     $this->sut->expects($this->once())
    ----------- end diff -----------

Applied rules:
 * AddDoesNotPerformAssertionToNonAssertingTestRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ExplicitPhpErrorApiRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/radioactivity/tests/src/Unit/RadioactivityProcessorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Prophecy\Prophecy\ProphecyInterface;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Entity\EntityPublishedInterface;
@@ @@
  */
 class RadioactivityProcessorTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The radioactivity processor under test.
    *
-   * @var \Drupal\radioactivity\RadioactivityProcessorInterface
+   * @var RadioactivityProcessorInterface
    */
   protected $sut;

@@ @@
   /**
    * Mock entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * Mock field storage configuration.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $fieldStorageConfig;

@@ @@
   /**
    * Mock state system.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;

@@ @@
   /**
    * Mock logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;

@@ @@
   /**
    * Mock Radioactivity logger channel.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelInterface
+   * @var LoggerChannelInterface
    */
   protected $loggerChannel;

@@ @@
   /**
    * The radioactivity storage factory.
    *
-   * @var \Drupal\radioactivity\StorageFactory
+   * @var StorageFactory
    */
   protected $storage;

@@ @@
   /**
    * The radioactivity incident storage.
    *
-   * @var \Drupal\radioactivity\IncidentStorageInterface
+   * @var IncidentStorageInterface
    */
   protected $incidentStorage;

@@ @@
   /**
    * The queue factory.
    *
-   * @var \Drupal\Core\Queue\QueueFactory
+   * @var QueueFactory
    */
   protected $queueFactory;

@@ @@
   /**
    * The event dispatcher.
    *
-   * @var \Symfony\Component\EventDispatcher\EventDispatcherInterface|\Prophecy\Prophecy\ProphecyInterface
+   * @var EventDispatcherInterface|ProphecyInterface
    */
   protected $eventDispatcher;

@@ @@
       'timestamp' => $this->requestTime,
     ])->shouldBeCalledTimes($isPublished ? 1 : 0);

-    /** @var \Drupal\Core\Entity\EntityTypeInterface $entityType */
+    /** @var EntityTypeInterface $entityType */
     $entityType = $this->prophesize(EntityTypeInterface::class);
     $entityType->isRevisionable()->willReturn(FALSE);
-    /** @var \Drupal\Core\Entity\ContentEntityInterface|\Drupal\Core\Entity\EntityPublishedInterface $entity */
+    /** @var ContentEntityInterface|EntityPublishedInterface $entity */
     $entity = $this->prophesize(PublishedContentEntityInterface::class);
     $entity->getEntityType()->willReturn($entityType);
     $entity->isPublished()->willReturn($isPublished);
@@ @@
       'timestamp' => $this->requestTime,
     ];

-    /** @var \Drupal\Core\Entity\EntityTypeInterface $entityType */
+    /** @var EntityTypeInterface $entityType */
     $entityType = $this->prophesize(EntityTypeInterface::class);
     $entityType->isRevisionable()->willReturn($isRevisonable);

-    /** @var \Drupal\Core\Entity\ContentEntityInterface|\Drupal\Core\Entity\EntityPublishedInterface $entity */
+    /** @var ContentEntityInterface|EntityPublishedInterface $entity */
     $entity = $this->prophesize(PublishedContentEntityInterface::class);
     $entity->getEntityType()->willReturn($entityType);
     $entity->id()->willReturn(123);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/radioactivity/tests/src/Unit/EmitControllerTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
+use Prophecy\Prophecy\ProphecyInterface;
+use Drupal\radioactivity\DefaultIncidentStorage;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Site\Settings;
 use Drupal\radioactivity\Controller\EmitController;
@@ @@
  */
 class EmitControllerTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * The request received by the controller.
    *
-   * @var \Symfony\Component\HttpFoundation\Request
+   * @var Request
    */
   protected $request;

@@ @@
   /**
    * The dependency injection container.
    *
-   * @var \Symfony\Component\DependencyInjection\ContainerInterface|\Prophecy\Prophecy\ProphecyInterface
+   * @var ContainerInterface|ProphecyInterface
    */
   protected $container;

@@ @@
   /**
    * The incident storage factory.
    *
-   * @var \Drupal\radioactivity\StorageFactory
+   * @var StorageFactory
    */
   protected $incidentStorageFactory;

@@ @@
   /**
    * The default incident storage.
    *
-   * @var \Drupal\radioactivity\DefaultIncidentStorage
+   * @var DefaultIncidentStorage
    */
   protected $defaultIncidentStorage;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/radioactivity/tests/src/Unit/DefaultIncidentStorageTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\Core\State\StateInterface;
 use Drupal\radioactivity\DefaultIncidentStorage;
 use Drupal\radioactivity\IncidentInterface;
@@ @@
  */
 class DefaultIncidentStorageTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * A mock state storage.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;

@@ @@
   /**
    * The system under test.
    *
-   * @var \Drupal\radioactivity\DefaultIncidentStorage
+   * @var DefaultIncidentStorage
    */
   protected $sut;

@@ @@
   /**
    * A mock radioactivity incident.
    *
-   * @var \Drupal\radioactivity\IncidentInterface
+   * @var IncidentInterface
    */
   protected $incident;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/radioactivity/tests/src/Traits/RadioactivityFunctionTestTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Traits;

+use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Entity\Entity\EntityFormDisplay;
 use Drupal\Core\Entity\Entity\EntityViewDisplay;
 use Drupal\Core\Entity\EntityInterface;
@@ @@
    * @param string $display
    *   The field display type.
    *
-   * @return \Drupal\Core\Entity\Entity\EntityViewDisplay
+   * @return EntityViewDisplay
    *   The entity view display object.
    */
   protected function createEmitterViewDisplay($fieldName, $energy = 10, $display = 'raw') {
@@ @@
    * @param int $decimals
    *   Number of decimals to display.
    *
-   * @return \Drupal\Core\Entity\Entity\EntityViewDisplay
+   * @return EntityViewDisplay
    *   The entity view display object.
    */
   protected function createValueViewDisplay($fieldName, $decimals = 0) {
@@ @@
   /**
    * Creates an entity.
    *
-   * @return \Drupal\Core\Entity\ContentEntityInterface
+   * @return ContentEntityInterface
    *   The created entity.
    */
   public function createContent() {

-    /** @var \Drupal\Core\Entity\ContentEntityInterface $entity */
+    /** @var ContentEntityInterface $entity */
     $entity = \Drupal::entityTypeManager()->getStorage($this->entityType)->create([
       'type' => $this->entityType,
       'title' => $this->randomString(),
@@ @@
   /**
    * Assert the energy values from a field.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The host entity of the field.
    * @param string $fieldName
    *   The field to be asserted.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


8) modules/contrib/radioactivity/tests/src/Kernel/RadioactivityValueFormatterTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Kernel;

+use Drupal\Core\Entity\Entity\EntityViewDisplay;
+use Drupal\Core\Entity\FieldableEntityInterface;
 use Drupal\entity_test\Entity\EntityTest;
 use Drupal\Tests\field\Kernel\FieldKernelTestBase;
 use Drupal\Tests\radioactivity\Traits\RadioactivityFunctionTestTrait;
@@ @@
   /**
    * The entity view display object.
    *
-   * @var \Drupal\Core\Entity\Entity\EntityViewDisplay
+   * @var EntityViewDisplay
    */
   protected $entityViewDisplay;

@@ @@
   /**
    * The entity that contains the energy field.
    *
-   * @var \Drupal\Core\Entity\FieldableEntityInterface
+   * @var FieldableEntityInterface
    */
   protected $entity;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/radioactivity/tests/src/Kernel/RadioactivityFieldTypeTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\Kernel;

+use Drupal\Core\Entity\Entity\EntityViewDisplay;
+use Drupal\Core\Entity\FieldableEntityInterface;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\entity_test\Entity\EntityTest;
 use Drupal\Tests\field\Kernel\FieldKernelTestBase;
@@ @@
   /**
    * The entity view display object.
    *
-   * @var \Drupal\Core\Entity\Entity\EntityViewDisplay
+   * @var EntityViewDisplay
    */
   protected $entityViewDisplay;

@@ @@
   /**
    * The entity that contains the energy field.
    *
-   * @var \Drupal\Core\Entity\FieldableEntityInterface
+   * @var FieldableEntityInterface
    */
   protected $entity;

@@ @@
     parent::setUp();

     // Mock Time::getRequestTime.
-    $dateTime = $this->getMockBuilder(TimeInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $dateTime = $this->createMock(TimeInterface::class);
     $dateTime
       ->expects($this->any())
       ->method('getRequestTime')
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/radioactivity/tests/src/FunctionalJavascript/RadioactivityFunctionalJavascriptTestBase.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\FunctionalJavascript;

+use Drupal\user\Entity\User;
+use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\FunctionalJavascriptTests\WebDriverTestBase;
 use Drupal\Tests\radioactivity\Traits\RadioactivityFunctionTestTrait;

@@ @@
   /**
    * An admin user.
    *
-   * @var \Drupal\user\Entity\User
+   * @var User
    */
   protected $adminUser;

@@ @@
   /**
    * The entity that holds the energy field(s).
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   protected $entity;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/radioactivity/tests/src/FunctionalJavascript/EmitTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\radioactivity\FunctionalJavascript;

+use Drupal\Core\Entity\ContentEntityInterface;
+use Drupal\entity_test\Entity\EntityTestRevPub;
 use Drupal\Tests\Traits\Core\CronRunTrait;

 /**
@@ @@
     $this->cronRun();

     // The entity has updated values, reload it.
-    /** @var \Drupal\Core\Entity\ContentEntityInterface $entity */
+    /** @var ContentEntityInterface $entity */
     $entity = \Drupal::entityTypeManager()
       ->getStorage($this->entityType)
       ->load($entity->id());
@@ @@
     $this->createEnergyFormDisplay($this->fieldName);
     $this->createEmitterViewDisplay($this->fieldName, 1, 'raw');

-    /** @var \Drupal\entity_test\Entity\EntityTestRevPub $entity */
+    /** @var EntityTestRevPub $entity */
     $entity = $this->createContent();
     $this->assetIncidentCount(0);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


12) modules/contrib/radioactivity/src/StorageFactory.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\radioactivity;

+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\DependencyInjection\ClassResolverInterface;

@@ @@
   /**
    * The radioactivity storage configuration.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   protected $config;

@@ @@
   /**
    * The class resolver.
    *
-   * @var \Drupal\Core\DependencyInjection\ClassResolverInterface
+   * @var ClassResolverInterface
    */
   protected $classResolver;

@@ @@
   /**
    * StorageFactory constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The configuration factory.
-   * @param \Drupal\Core\DependencyInjection\ClassResolverInterface $classResolver
+   * @param ClassResolverInterface $classResolver
    *   The class resolver.
    */
   public function __construct(ConfigFactoryInterface $configFactory, ClassResolverInterface $classResolver) {
@@ @@
    * @param string $type
    *   The type of storage to get.
    *
-   * @return \Drupal\radioactivity\IncidentStorageInterface
+   * @return IncidentStorageInterface
    *   Instance of the requested storage.
    */
   public function get($type) {
@@ @@
         $instance = $this->classResolver->getInstanceFromDefinition('radioactivity.default_incident_storage');
     }

-    /** @var \Drupal\radioactivity\IncidentStorageInterface $instance */
+    /** @var IncidentStorageInterface $instance */
     return $instance;
   }

@@ @@
   /**
    * Get the configured incident storage.
    *
-   * @return \Drupal\radioactivity\IncidentStorageInterface
+   * @return IncidentStorageInterface
    *   The configured storage instance.
    */
   public function getConfiguredStorage() {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


13) modules/contrib/radioactivity/src/RestIncidentStorage.php:102

    ---------- begin diff ----------
@@ @@
   protected function getDefaultEndpoint() {
     global $base_url;

-    return $base_url . '/' . drupal_get_path('module', 'radioactivity') . '/endpoints/file/rest.php';
+    return $base_url . '/' . \Drupal::service('extension.list.module')->getPath('radioactivity') . '/endpoints/file/rest.php';
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


14) modules/contrib/radioactivity/src/RadioactivityProcessorInterface.php:46

    ---------- begin diff ----------
@@ @@
   /**
    * Queue processing of Radioactivity decays.
    *
-   * @param \Drupal\field\FieldStorageConfigInterface $fieldConfig
+   * @param FieldStorageConfigInterface $fieldConfig
    *   Configuration of the field to be processed.
    * @param array $entityIds
    *   Entity IDs to be processed.
@@ @@
    *
    * @param string $entityType
    *   Incident entity type.
-   * @param \Drupal\radioactivity\IncidentInterface[][] $entityIncidents
+   * @param IncidentInterface[][] $entityIncidents
    *   Radioactivity incidents grouped per entity ID (1st) and incident ID
    *   (2nd).
    */
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


15) modules/contrib/radioactivity/src/RadioactivityProcessor.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\radioactivity;

+use Drupal\Core\Logger\LoggerChannelInterface;
+use Drupal\field\Entity\FieldStorageConfig;
+use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\Core\Entity\EntityPublishedInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The state key-value storage.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;

@@ @@
   /**
    * The radioactivity logger.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelInterface
+   * @var LoggerChannelInterface
    */
   protected $log;

@@ @@
   /**
    * The radioactivity storage.
    *
-   * @var \Drupal\radioactivity\IncidentStorageInterface
+   * @var IncidentStorageInterface
    */
   protected $storage;

@@ @@
   /**
    * The queue factory service.
    *
-   * @var \Drupal\Core\Queue\QueueFactory
+   * @var QueueFactory
    */
   protected $queue;

@@ @@
   /**
    * The event dispatcher service.
    *
-   * @var \Symfony\Component\EventDispatcher\EventDispatcherInterface
+   * @var EventDispatcherInterface
    */
   protected $eventDispatcher;

@@ @@
   /**
    * Constructs a Radioactivity processor.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Core\State\StateInterface $state
+   * @param StateInterface $state
    *   The key-value storage.
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   * @param LoggerChannelFactoryInterface $logger_factory
    *   The logger.
-   * @param \Drupal\radioactivity\StorageFactory $storage
+   * @param StorageFactory $storage
    *   The storage factory service.
-   * @param \Drupal\Component\Datetime\TimeInterface $time
+   * @param TimeInterface $time
    *   The time service.
-   * @param \Drupal\Core\Queue\QueueFactory $queue
+   * @param QueueFactory $queue
    *   The queue factory service.
-   * @param \Symfony\Component\EventDispatcher\EventDispatcherInterface $event_dispatcher
+   * @param EventDispatcherInterface $event_dispatcher
    *   The event dispatcher service.
    */
   public function __construct(EntityTypeManagerInterface $entity_type_manager, StateInterface $state, LoggerChannelFactoryInterface $logger_factory, StorageFactory $storage, TimeInterface $time, QueueFactory $queue, EventDispatcherInterface $event_dispatcher) {
@@ @@
     $resultCount = 0;
     $processed = FALSE;

-    /** @var \Drupal\field\Entity\FieldStorageConfig[] $fieldConfigs */
+    /** @var FieldStorageConfig[] $fieldConfigs */
     $fieldConfigs = $this->entityTypeManager->getStorage('field_storage_config')->loadByProperties(['type' => 'radioactivity']);

     if (empty($fieldConfigs)) {
@@ @@
    * passed since the last cron run. The number of seconds is stored in
    * 'granularity' field setting.
    *
-   * @param \Drupal\field\FieldStorageConfigInterface $fieldConfig
+   * @param FieldStorageConfigInterface $fieldConfig
    *   Configuration of the field to be checked.
    *
    * @return bool
@@ @@
   /**
    * Update entities attached to given field storage.
    *
-   * @param \Drupal\field\FieldStorageConfigInterface $fieldConfig
+   * @param FieldStorageConfigInterface $fieldConfig
    *   Configuration of the field to be processed.
    *
    * @return int
@@ @@
     $halfLife = $fieldConfig->getSetting('halflife');
     $cutoff = $fieldConfig->getSetting('cutoff');

-    /** @var \Drupal\Core\Entity\ContentEntityInterface[] $entities */
+    /** @var ContentEntityInterface[] $entities */
     $entities = $this->entityTypeManager
       ->getStorage($entityType)
       ->loadMultiple($entityIds);
@@ @@
         // the cutoff value. This is needed for Rules integration, but can be
         // used by any module that wants to use events.
         $event = new EnergyBelowCutoffEvent($entity);
-        $this->eventDispatcher->dispatch('radioactivity_field_cutoff', $event);
+        $this->eventDispatcher->dispatch($event, 'radioactivity_field_cutoff');
       }

       if ($entity->getEntityType()->isRevisionable()) {
@@ @@
    * {@inheritdoc}
    */
   public function queueProcessIncidents($entityType, array $entityIncidents) {
-    /** @var \Drupal\Core\Entity\ContentEntityInterface[] $entities */
+    /** @var ContentEntityInterface[] $entities */
     $entities = $this->entityTypeManager->getStorage($entityType)->loadMultiple(array_keys($entityIncidents));

     foreach ($entities as $entity) {

-      /** @var \Drupal\radioactivity\IncidentInterface $incident */
+      /** @var IncidentInterface $incident */
       foreach ($entityIncidents[$entity->id()] as $incident) {
         $entity->get($incident->getFieldName())->energy += $incident->getEnergy();
       }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


16) modules/contrib/radioactivity/src/Plugin/QueueWorker/RadioactivityQueueWorkerBase.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * The radioactivity.processor service.
    *
-   * @var \Drupal\radioactivity\RadioactivityProcessorInterface
+   * @var RadioactivityProcessorInterface
    */
   protected $radioactivityProcessor;

@@ @@
    *   The plugin_id for the plugin instance.
    * @param array $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\radioactivity\RadioactivityProcessorInterface $radioactivity_processor
+   * @param RadioactivityProcessorInterface $radioactivity_processor
    *   The radioactivity.processor service.
    */
   public function __construct(array $configuration, $plugin_id, array $plugin_definition, RadioactivityProcessorInterface $radioactivity_processor) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/radioactivity/src/Plugin/Field/FieldFormatter/RadioactivityEmitter.php:140

    ---------- begin diff ----------
@@ @@
   /**
    * Generate the output appropriate for one field item.
    *
-   * @param \Drupal\Core\Field\FieldItemInterface $item
+   * @param FieldItemInterface $item
    *   One field item.
    *
    * @return string
@@ @@
   /**
    * Determine if the field should emit energy.
    *
-   * @param \Drupal\Core\Field\FieldItemListInterface $items
+   * @param FieldItemListInterface $items
    *   The field item list of the field.
    *
    * @return bool
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


18) modules/contrib/radioactivity/src/IncidentStorageInterface.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * Adds an incident to the storage.
    *
-   * @param \Drupal\radioactivity\IncidentInterface $incident
+   * @param IncidentInterface $incident
    *   The incident object.
    */
   public function addIncident(IncidentInterface $incident);
@@ @@
   /**
    * Gets all incidents from the storage.
    *
-   * @return \Drupal\radioactivity\IncidentInterface[]
+   * @return IncidentInterface[]
    *   Array of incident objects.
    */
   public function getIncidents();
@@ @@
    * @param string $entity_type
    *   Entity type for selection. Default to all entity types.
    *
-   * @return \Drupal\radioactivity\IncidentInterface[][]
+   * @return IncidentInterface[][]
    *   Array of incident objects keyed by entity type (1st) and entity ID (2nd).
    */
   public function getIncidentsByType($entity_type = '');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


19) modules/contrib/radioactivity/src/Incident.php:110

    ---------- begin diff ----------
@@ @@
    * @param array $data
    *   Associative array of incident data.
    *
-   * @return \Drupal\radioactivity\IncidentInterface
+   * @return IncidentInterface
    *   An Incident object.
    */
   public static function createFromPostData(array $data) {
@@ @@
    * @param object $formatter
    *   The formatter in use.
    *
-   * @return \Drupal\radioactivity\IncidentInterface
+   * @return IncidentInterface
    *   The incident object.
    */
   public static function createFromFieldItemsAndFormatter($items, $item, $formatter) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


20) modules/contrib/radioactivity/src/Event/EnergyBelowCutoffEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\radioactivity\Event;

+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\Core\Entity\ContentEntityInterface;
-use Symfony\Component\EventDispatcher\Event;

 /**
  * Represents a 'Energy is below the cutoff level' event.
@@ @@
   /**
    * The entity.
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   public $entity;

@@ @@
   /**
    * Constructs the object.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    */
   public function __construct(ContentEntityInterface $entity) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


21) modules/contrib/radioactivity/src/EntityOperations.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * The module handler service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   private $moduleHandler;

@@ @@
   /**
    * The entity type bundle info service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeBundleInfoInterface
+   * @var EntityTypeBundleInfoInterface
    */
   private $bundleInfo;

@@ @@
   /**
    * EntityOperations constructor.
    *
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $moduleHandler
+   * @param ModuleHandlerInterface $moduleHandler
    *   The module handler service.
-   * @param \Drupal\Core\Entity\EntityTypeBundleInfoInterface $bundleInfo
+   * @param EntityTypeBundleInfoInterface $bundleInfo
    *   The entity type bundle info service.
    */
   public function __construct(ModuleHandlerInterface $moduleHandler, EntityTypeBundleInfoInterface $bundleInfo) {
@@ @@
   /**
    * Determines if the entity is moderated by the Content Moderation module.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity to check.
    *
    * @return bool
@@ @@
   /**
    * Acts on an entity and set published status based on the moderation state.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity being saved.
    *
    * @see hook_entity_presave()
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


22) modules/contrib/radioactivity/src/DefaultIncidentStorage.php:11

    ---------- begin diff ----------
@@ @@
   /**
    * The state key-value storage.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;

@@ @@
   /**
    * DefaultIncidentStorage constructor.
    *
-   * @param \Drupal\Core\State\StateInterface $state
+   * @param StateInterface $state
    *   The state key-value storage.
    */
   public function __construct(StateInterface $state) {
@@ @@
   public function getIncidentsByType($entity_type = '') {
     $incidents = [];

-    /** @var \Drupal\radioactivity\IncidentInterface[] $stored_incidents */
+    /** @var IncidentInterface[] $stored_incidents */
     $stored_incidents = $this->state->get(self::STORAGE_KEY, []);
     foreach ($stored_incidents as $incident) {
       $incidents[$incident->getEntityTypeId()][$incident->getEntityId()][] = $incident;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


23) modules/contrib/radioactivity/src/Controller/EmitController.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\radioactivity\Controller;

+use Drupal\radioactivity\IncidentStorageInterface;
 use Drupal\Core\DependencyInjection\ContainerInjectionInterface;
 use Drupal\radioactivity\StorageFactory;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * The incident storage.
    *
-   * @var \Drupal\radioactivity\IncidentStorageInterface
+   * @var IncidentStorageInterface
    */
   protected $incidentStorage;

@@ @@
   /**
    * Constructs an EmitController object.
    *
-   * @param \Drupal\radioactivity\StorageFactory $storageFactory
+   * @param StorageFactory $storageFactory
    *   Radioactivity storage factory.
    */
   public function __construct(StorageFactory $storageFactory) {
@@ @@
   /**
    * Callback for /radioactivity/emit.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request object.
    *
-   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   * @return JsonResponse
    *   Response object.
    */
   public function emit(Request $request) {
@@ @@
    * @param string $message
    *   The message content of the response.
    *
-   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   * @return JsonResponse
    *   The response.
    */
   protected function buildJsonStatusResponse($status, $message) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


24) modules/contrib/radioactivity/radioactivity.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\field\Entity\FieldStorageConfig;
+use Drupal\radioactivity\RadioactivityProcessorInterface;
 /**
  * @file
  * Provides a field type which can be used as a hotness metric.
@@ @@
   // the field actually has something in it to trigger the formatters.
   $fields = radioactivity_get_field_names();

-  /** @var \Drupal\Core\Entity\FieldableEntityInterface[] $entities */
+  /** @var FieldableEntityInterface[] $entities */
   foreach ($entities as &$entity) {
     foreach ($fields as $field_name) {
       if (is_a($entity, FieldableEntityInterface::class)
@@ @@

   $entity_type_manager = \Drupal::service('entity_type.manager');

-  /** @var \Drupal\field\Entity\FieldStorageConfig[] $field_storage_configs */
+  /** @var FieldStorageConfig[] $field_storage_configs */
   if (!$field_storage_configs = $entity_type_manager->getStorage('field_storage_config')->loadByProperties(['type' => 'radioactivity'])) {
     return $fields;
   }
@@ @@
  * Implements hook_cron().
  */
 function radioactivity_cron() {
-  /** @var \Drupal\radioactivity\RadioactivityProcessorInterface $processor */
+  /** @var RadioactivityProcessorInterface $processor */
   $processor = \Drupal::service('radioactivity.processor');
   $processor->processDecay();
   $processor->processIncidents();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


 [ERROR] Could not process                                                      
         "modules/contrib/radioactivity/tests/src/Unit/EventTestBase.php" file, 
         due to:                                                                
         "Analyze error: "Class                                                 
         Drupal\Tests\rules\Unit\Integration\Event\EventTestBase not found.".   
         Include your files in "$rectorConfig->autoloadPaths([...]);" or        
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/radioactivity/tests/src/Unit/EnergyBelowCutoffTest.php"
         file, due to:                                                          
         "Analyze error: "Class                                                 
         Drupal\Tests\rules\Unit\Integration\Event\EventTestBase not found.".   
         Include your files in "$rectorConfig->autoloadPaths([...]);" or        
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [WARNING] 1 nodes were removed                                                 

