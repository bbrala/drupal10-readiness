diff --git a/spamspan.module b/spamspan.module
index f02af84..fc5b234 100644
--- a/spamspan.module
+++ b/spamspan.module
@@ -63,7 +63,7 @@ function spamspan_theme($existing, $type, $theme, $path) {
   return [
     'spamspan_at_sign' => [
       'variables' => [
-        'path' => base_path() . drupal_get_path('module', 'spamspan') . '/image.gif',
+        'path' => base_path() . \Drupal::service('extension.list.module')->getPath('spamspan') . '/image.gif',
         'settings' => [],
       ],
     ],
diff --git a/src/SpamspanTrait.php b/src/SpamspanTrait.php
index 328a6e9..9d2afc7 100644
--- a/src/SpamspanTrait.php
+++ b/src/SpamspanTrait.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\spamspan;
 
+use Drupal\Core\Render\RendererInterface;
 use Drupal\Component\Utility\Html;
 use Drupal\Component\Utility\Xss;
 
@@ -222,7 +223,7 @@ trait SpamspanTrait {
         '#theme' => 'spamspan_at_sign',
         '#settings' => $this->settings,
       ];
-      /** @var \Drupal\Core\Render\RendererInterface $renderer */
+      /** @var RendererInterface $renderer */
       $renderer = \Drupal::service('renderer');
       $at = $renderer->renderPlain($render_at);
     }
diff --git a/src/TwigExtension/SpamspanExtension.php b/src/TwigExtension/SpamspanExtension.php
index a2f0d1e..97fe740 100644
--- a/src/TwigExtension/SpamspanExtension.php
+++ b/src/TwigExtension/SpamspanExtension.php
@@ -13,14 +13,14 @@ class SpamspanExtension extends \Twig_Extension {
   /**
    * The renderer.
    *
-   * @var \Drupal\Core\Render\Renderer
+   * @var Renderer
    */
   protected $renderer;
 
   /**
    * Constructor of SpamSpanExtension.
    *
-   * @param \Drupal\Core\Render\Renderer $renderer
+   * @param Renderer $renderer
    *   The renderer.
    */
   public function __construct(Renderer $renderer) {
diff --git a/tests/src/Kernel/FilterSpamspanUnitTest.php b/tests/src/Kernel/FilterSpamspanUnitTest.php
index d9ccb90..a942473 100644
--- a/tests/src/Kernel/FilterSpamspanUnitTest.php
+++ b/tests/src/Kernel/FilterSpamspanUnitTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\spamspan\Kernel;
 
+use Drupal\spamspan\Plugin\Filter\FilterSpamspan;
 use Drupal\filter\FilterPluginCollection;
 use Drupal\KernelTests\KernelTestBase;
 
@@ -22,21 +23,21 @@ class FilterSpamspanUnitTest extends KernelTestBase {
   /**
    * Default spamspan filter.
    *
-   * @var \Drupal\spamspan\Plugin\Filter\FilterSpamspan
+   * @var FilterSpamspan
    */
   protected $spamspanFilter;
 
   /**
    * Default spamspan filter with spamspan_use_form = 1.
    *
-   * @var \Drupal\spamspan\Plugin\Filter\FilterSpamspan
+   * @var FilterSpamspan
    */
   protected $spamspanFilterForm;
 
   /**
    * Default spamspan filter with custom at and dot.
    *
-   * @var \Drupal\spamspan\Plugin\Filter\FilterSpamspan
+   * @var FilterSpamspan
    */
   protected $spamspanFilterAtDot;
 
@@ -83,7 +84,7 @@ class FilterSpamspanUnitTest extends KernelTestBase {
     $this->spamspanFilterAtDot = $manager->createInstance('filter_spamspan', $configuration);
 
     // Read the test image from the file provided.
-    $this->base64Image = file_get_contents(drupal_get_path('module', 'spamspan') . '/tests/src/Kernel/base64image.txt');
+    $this->base64Image = file_get_contents(\Drupal::service('extension.list.module')->getPath('spamspan') . '/tests/src/Kernel/base64image.txt');
 
   }
 
@@ -247,10 +248,8 @@ class FilterSpamspanUnitTest extends KernelTestBase {
     // Graphical at and [dot].
     $emails = [
       'user@example.com' => $this->withDom
-      ? '<span class="spamspan"><span class="u">user</span><img class="spamspan-image" alt="at" src="' . base_path() . drupal_get_path('module',
-          'spamspan') . '/image.gif"><span class="d">example<span class="o"> [dot] </span>com</span></span>'
-      : '<span class="spamspan"><span class="u">user</span><img class="spamspan-image" alt="at" src="' . base_path() . drupal_get_path('module',
-          'spamspan') . '/image.gif" /><span class="d">example<span class="o"> [dot] </span>com</span></span>',
+      ? '<span class="spamspan"><span class="u">user</span><img class="spamspan-image" alt="at" src="' . base_path() . \Drupal::service('extension.list.module')->getPath('spamspan') . '/image.gif"><span class="d">example<span class="o"> [dot] </span>com</span></span>'
+      : '<span class="spamspan"><span class="u">user</span><img class="spamspan-image" alt="at" src="' . base_path() . \Drupal::service('extension.list.module')->getPath('spamspan') . '/image.gif" /><span class="d">example<span class="o"> [dot] </span>com</span></span>',
     ];
 
     foreach ($emails as $input => $shouldbe) {
