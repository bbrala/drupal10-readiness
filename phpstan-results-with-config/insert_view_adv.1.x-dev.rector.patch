diff --git a/src/Controller/AdvancedInsertViewController.php b/src/Controller/AdvancedInsertViewController.php
index 8ee65d7..76a3164 100644
--- a/src/Controller/AdvancedInsertViewController.php
+++ b/src/Controller/AdvancedInsertViewController.php
@@ -26,14 +26,14 @@ class AdvancedInsertViewController extends ControllerBase {
   /**
    * The renderer.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
 
   /**
    * Constructs a ViewAjaxController object.
    *
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer.
    */
   public function __construct(RendererInterface $renderer) {
@@ -52,14 +52,13 @@ class AdvancedInsertViewController extends ControllerBase {
   /**
    * Loads and renders a view via AJAX.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The current request object.
    *
-   * @param \Drupal\filter\Entity\FilterFormat|null $filter_format
+   * @param FilterFormat|null $filter_format
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The view response as ajax response.
-   *
    */
   public function ajaxView(Request $request, FilterFormat $filter_format = NULL) {
     $name = $request->request->get('view_name');
diff --git a/src/Form/InsertViewDialog.php b/src/Form/InsertViewDialog.php
index 0369b16..bc53fa9 100644
--- a/src/Form/InsertViewDialog.php
+++ b/src/Form/InsertViewDialog.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\insert_view_adv\Form;
 
+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
 use Drupal\Core\Ajax\AjaxResponse;
 use Drupal\Core\Ajax\CloseModalDialogCommand;
 use Drupal\Core\Ajax\HtmlCommand;
@@ -24,19 +26,19 @@ use Symfony\Component\DependencyInjection\ContainerInterface;
 class InsertViewDialog extends FormBase {
 
   /**
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;
 
   /**
    * InsertViewDialog constructor.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
+   * @param EntityTypeManagerInterface $entityTypeManager
    */
   public function __construct(EntityTypeManagerInterface $entityTypeManager, EntityFieldManagerInterface $entityFieldManager) {
     $this->entityTypeManager = $entityTypeManager;
@@ -44,9 +46,9 @@ class InsertViewDialog extends FormBase {
   }
 
   /**
-   * @param \Symfony\Component\DependencyInjection\ContainerInterface $container
+   * @param ContainerInterface $container
    *
-   * @return \Drupal\Core\Form\FormBase|\Drupal\insert_view_adv\Form\InsertViewDialog
+   * @return FormBase|\Drupal\insert_view_adv\Form\InsertViewDialog
    */
   public static function create(ContainerInterface $container) {
     return new static(
@@ -121,8 +123,8 @@ class InsertViewDialog extends FormBase {
    * @param $view_block
    * @param $num
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function renderArgument(&$form, $form_state, $view_block, $num) {
     if (!empty($form['#view_arguments'][$view_block][$num])) {
@@ -326,7 +328,7 @@ class InsertViewDialog extends FormBase {
   /**
    * Get a value from the widget in the WYSIWYG.
    *
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state to extract values from.
    * @param string $key
    *   The key to get from the selected WYSIWYG element.
@@ -341,7 +343,7 @@ class InsertViewDialog extends FormBase {
   /**
    * Get the values from the form required for the client.
    *
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state from the dialog submission.
    *
    * @return array
diff --git a/src/Plugin/CKEditorPlugin/InsertView.php b/src/Plugin/CKEditorPlugin/InsertView.php
index b5fef10..46d8b7c 100644
--- a/src/Plugin/CKEditorPlugin/InsertView.php
+++ b/src/Plugin/CKEditorPlugin/InsertView.php
@@ -22,7 +22,7 @@ class InsertView extends CKEditorPluginBase implements CKEditorPluginConfigurabl
    * {@inheritdoc}
    */
   public function getFile() {
-    return drupal_get_path('module', 'insert_view_adv') . '/plugin/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('insert_view_adv') . '/plugin/plugin.js';
   }
 
   /**
@@ -32,7 +32,7 @@ class InsertView extends CKEditorPluginBase implements CKEditorPluginConfigurabl
     return [
       'insert_view_adv' => [
         'label' => $this->t('Advanced insert View'),
-        'image' => drupal_get_path('module', 'insert_view_adv') . '/plugin/icon.png',
+        'image' => \Drupal::service('extension.list.module')->getPath('insert_view_adv') . '/plugin/icon.png',
       ],
     ];
   }
diff --git a/src/Plugin/Filter/InsertView.php b/src/Plugin/Filter/InsertView.php
index 53c6763..cdf78f1 100644
--- a/src/Plugin/Filter/InsertView.php
+++ b/src/Plugin/Filter/InsertView.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\insert_view_adv\Plugin\Filter;
 
+use Drupal\views\ViewExecutable;
+use Symfony\Component\HttpFoundation\Request;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Security\TrustedCallbackInterface;
@@ -142,7 +144,7 @@ class InsertView extends FilterBase implements TrustedCallbackInterface {
         return ['#attached' => [], '#markup' => $plain];
       }
     }
-    /** @var \Drupal\views\ViewExecutable $view */
+    /** @var ViewExecutable $view */
     $view = Views::getView($view_name);
     if (empty($view)) {
       return ['#attached' => [], '#markup' => $plain];
@@ -152,7 +154,7 @@ class InsertView extends FilterBase implements TrustedCallbackInterface {
       return ['#attached' => [], '#markup' => $plain];
     }
     $view->setDisplay($display_id);
-    /** @var \Symfony\Component\HttpFoundation\Request $request */
+    /** @var Request $request */
     $request = \Drupal::service('request_stack')->getCurrentRequest();
     $current_path = $request->getPathInfo();
     // Workaround for exposed filter reset button.
@@ -213,7 +215,7 @@ class InsertView extends FilterBase implements TrustedCallbackInterface {
         '#type' => 'item_list',
         '#items' => $items,
       ];
-      return render($list);
+      return \Drupal::service('renderer')->render($list);
     }
     else {
       return $this->t('You may use [view:<em>name=display=args</em>] tags to display views.');
