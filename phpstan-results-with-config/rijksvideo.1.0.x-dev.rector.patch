diff --git a/rijksvideo.module b/rijksvideo.module
index 3f770bd..c179b31 100644
--- a/rijksvideo.module
+++ b/rijksvideo.module
@@ -74,11 +74,11 @@ function rijksvideo_preprocess_media(&$variables) {
   }
 
   if (!empty($media->get('field_rijksvideo_thumbnail')->getString())) {
-    $variables['poster'] = file_create_url($media->get('field_rijksvideo_thumbnail')->entity->getFileUri());
+    $variables['poster'] = \Drupal::service('file_url_generator')->generateAbsoluteString($media->get('field_rijksvideo_thumbnail')->entity->getFileUri());
   }
 
   if (!empty($media->get('field_rijksvideo_caption')->getString())) {
-    $variables['caption'] = file_create_url($media->get('field_rijksvideo_caption')->entity->getFileUri());
+    $variables['caption'] = \Drupal::service('file_url_generator')->generateAbsoluteString($media->get('field_rijksvideo_caption')->entity->getFileUri());
   }
 
   $sources = json_decode($media->get('field_rijksvideo_sources')->value, TRUE);
diff --git a/src/Event/RijksvideoEvent.php b/src/Event/RijksvideoEvent.php
index 1e7beed..7f0cc71 100644
--- a/src/Event/RijksvideoEvent.php
+++ b/src/Event/RijksvideoEvent.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\rijksvideo\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\Core\Entity\EntityInterface;
 
 /**
@@ -14,14 +14,14 @@ class RijksvideoEvent extends Event {
   /**
    * Media entity.
    *
-   * @var \Drupal\Core\Entity\EntityInterface
+   * @var EntityInterface
    */
   protected $entity;
 
   /**
    * Constructs a media insertion event object.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Media entity.
    */
   public function __construct(EntityInterface $entity) {
@@ -31,7 +31,7 @@ class RijksvideoEvent extends Event {
   /**
    * Get the inserted entity.
    *
-   * @return \Drupal\Core\Entity\EntityInterface
+   * @return EntityInterface
    *   Return the Media entity.
    */
   public function getEntity() {
diff --git a/src/EventSubscriber/RijksvideoEventSubscriber.php b/src/EventSubscriber/RijksvideoEventSubscriber.php
index 4b8b45a..e7a6418 100644
--- a/src/EventSubscriber/RijksvideoEventSubscriber.php
+++ b/src/EventSubscriber/RijksvideoEventSubscriber.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\rijksvideo\EventSubscriber;
 
+use Drupal\Core\Entity\EntityStorageException;
 use Drupal\Component\Utility\Bytes;
 use Drupal\file\Entity\File;
 use Drupal\rijksvideo\Event\RijksvideoEvent;
@@ -24,10 +25,10 @@ class RijksvideoEventSubscriber implements EventSubscriberInterface {
   /**
    * Enrich the creation of a new media entity.
    *
-   * @param \Drupal\rijksvideo\Event\RijksvideoEvent $event
+   * @param RijksvideoEvent $event
    *   The Rijksvideo event.
    *
-   * @throws \Drupal\Core\Entity\EntityStorageException
+   * @throws EntityStorageException
    */
   public function fillMetaData(RijksvideoEvent $event) {
     $entity = $event->getEntity();
@@ -127,7 +128,7 @@ class RijksvideoEventSubscriber implements EventSubscriberInterface {
     $file = $this->convertSrtToVtt($file_content);
 
     // Save the new subtitle file.
-    $subtitles = file_save_data($file, str_replace('.srt', '.vtt', $path));
+    $subtitles = \Drupal::service('file.repository')->writeData($file, str_replace('.srt', '.vtt', $path));
 
     return $subtitles;
   }
