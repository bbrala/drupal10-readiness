diff --git a/imagecache_external.info.yml b/imagecache_external.info.yml
index 0965d1d..9d81ac3 100644
--- a/imagecache_external.info.yml
+++ b/imagecache_external.info.yml
@@ -3,7 +3,7 @@ name: Imagecache External
 description: Allows you to fetch external images and use image styles on them.
 dependencies:
   - drupal:image
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 configure: imagecache_external.admin_settings
 
 # Information added by Drupal.org packaging script on 2020-11-19
diff --git a/imagecache_external.module b/imagecache_external.module
index 7032f1e..58c2b58 100755
--- a/imagecache_external.module
+++ b/imagecache_external.module
@@ -1,4 +1,6 @@
 <?php
+use Drupal\Core\Image\Image;
+use Drupal\Core\Config\ImmutableConfig;
 /**
  * @file
  * Allows the usage of Image Styles on external images.
@@ -216,7 +218,7 @@ function imagecache_external_fetch($url, $cachepath) {
         return \Drupal::service('file_system')->saveData($result->getBody(), $cachepath, FileSystemInterface::EXISTS_REPLACE);
       }
       else {
-        $file = file_save_data($result->getBody(), $cachepath, FileSystemInterface::EXISTS_REPLACE);
+        $file = \Drupal::service('file.repository')->writeData($result->getBody(), $cachepath, FileSystemInterface::EXISTS_REPLACE);
         return $file->getFileUri();
       }
     }
@@ -294,7 +296,7 @@ function imagecache_external_file_download($uri) {
   // Check if the path contains 'imagecache/external'.
   // If not, we fallback to the Image module.
   if (strpos($uri, '/' . imagecache_external_config()->get('imagecache_directory') . '/') > 0) {
-    /** @var \Drupal\Core\Image\Image $image */
+    /** @var Image $image */
     $image = Drupal::service('image.factory')->get($uri);
     // For safety, we only allow our own mimetypes.
     if (in_array($image->getMimeType(), imagecache_external_allowed_mimetypes())) {
@@ -454,7 +456,7 @@ function imagecache_external_allowed_mimetypes() {
 /**
  * Helper function that returns a config object for imagecache_external.
  *
- * @return \Drupal\Core\Config\ImmutableConfig
+ * @return ImmutableConfig
  *   An immutable configuration object.
  */
 function imagecache_external_config() {
diff --git a/src/Form/SettingsForm.php b/src/Form/SettingsForm.php
index e24eb81..9d039df 100644
--- a/src/Form/SettingsForm.php
+++ b/src/Form/SettingsForm.php
@@ -20,23 +20,23 @@ class SettingsForm extends ConfigFormBase {
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * Constructs a new SettingsForm.
    *
-   * @param \Drupal\Core\File\FileSystemInterface $fileSystem
+   * @param FileSystemInterface $fileSystem
    *   The file system service.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory.
    */
   public function __construct(FileSystemInterface $fileSystem, ConfigFactoryInterface $config_factory) {
diff --git a/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php b/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php
index 54a9e87..c8fd615 100644
--- a/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php
+++ b/src/Plugin/Field/FieldFormatter/ImagecacheExternalImage.php
@@ -33,7 +33,7 @@ class ImagecacheExternalImage extends FormatterBase implements ContainerFactoryP
   /**
    * The database connection.
    *
-   * @var \Drupal\Core\Image\ImageFactory
+   * @var ImageFactory
    */
   protected $imageFactory;
 
@@ -192,7 +192,7 @@ class ImagecacheExternalImage extends FormatterBase implements ContainerFactoryP
       }
 
       if (isset($link_file)) {
-        $url = Url::fromUri(file_create_url($image_path));
+        $url = \Drupal::service('file_url_generator')->generate($image_path);
       }
 
       $image = $this->imageFactory->get($image_path);
@@ -219,7 +219,7 @@ class ImagecacheExternalImage extends FormatterBase implements ContainerFactoryP
       }
 
       if ($url) {
-        $rendered_image = render($image_build);
+        $rendered_image = \Drupal::service('renderer')->render($image_build);
         $elements[$delta] = Link::fromTextAndUrl($rendered_image, $url)->toRenderable();
       }
       else {
diff --git a/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php b/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php
index 9a012ad..8d689da 100644
--- a/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php
+++ b/src/Plugin/Field/FieldFormatter/ImagecacheExternalResponsiveImage.php
@@ -3,6 +3,8 @@
 
 namespace Drupal\imagecache_external\Plugin\Field\FieldFormatter;
 
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\responsive_image\Entity\ResponsiveImageStyle;
 use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Link;
 use Drupal\Core\Session\AccountInterface;
@@ -37,28 +39,28 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
   /**
    * The responsive image style storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $responsiveImageStyleStorage;
 
   /**
    * The image factory service.
    *
-   * @var \Drupal\Core\Image\ImageFactory
+   * @var ImageFactory
    */
   protected $imageFactory;
 
   /**
    * The current user.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $currentUser;
 
   /**
    * The link generator.
    *
-   * @var \Drupal\Core\Utility\LinkGeneratorInterface
+   * @var LinkGeneratorInterface
    */
   protected $linkGenerator;
 
@@ -69,7 +71,7 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ -81,11 +83,11 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
    *   Any third party settings.
    * @param \Drupal\Core\Image\ImageFactory
    *   The image factory service.
-   * @param \Drupal\Core\Entity\EntityStorageInterface $responsive_image_style_storage
+   * @param EntityStorageInterface $responsive_image_style_storage
    *   The responsive image style storage.
-   * @param \Drupal\Core\Utility\LinkGeneratorInterface $link_generator
+   * @param LinkGeneratorInterface $link_generator
    *   The link generator service.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
    */
   public function __construct($plugin_id, $plugin_definition, $field_definition, array $settings, $label, $view_mode, array $third_party_settings, ImageFactory $image_factory, EntityStorageInterface $responsive_image_style_storage, LinkGeneratorInterface $link_generator, AccountInterface $current_user) {
@@ -136,7 +138,7 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
     $responsive_image_options = [];
     $responsive_image_styles = $this->responsiveImageStyleStorage->loadMultiple();
     if ($responsive_image_styles && !empty($responsive_image_styles)) {
-      /** @var \Drupal\responsive_image\Entity\ResponsiveImageStyle $responsive_image_style */
+      /** @var ResponsiveImageStyle $responsive_image_style */
       foreach ($responsive_image_styles as $machine_name => $responsive_image_style) {
         if ($responsive_image_style->hasImageStyleMappings()) {
           $responsive_image_options[$machine_name] = $responsive_image_style->label();
@@ -251,7 +253,7 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
       }
 
       if (isset($link_file)) {
-        $url = Url::fromUri(file_create_url($image_path));
+        $url = \Drupal::service('file_url_generator')->generate($image_path);
       }
 
       $image = $this->imageFactory->get($image_path);
@@ -278,7 +280,7 @@ class ImagecacheExternalResponsiveImage extends FormatterBase implements Contain
       }
 
       if ($url) {
-        $rendered_image = render($image_build);
+        $rendered_image = \Drupal::service('renderer')->render($image_build);
         $elements[$delta] = Link::fromTextAndUrl($rendered_image, $url)->toRenderable();
       }
       else {
