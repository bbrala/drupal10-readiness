modules/contrib/image_background_formatter/image_background_formatter.module
modules/contrib/image_background_formatter/src/Plugin/Field/FieldFormatter/ImageBackgroundFormatter.php

1 file with changes
===================

1) modules/contrib/image_background_formatter/src/Plugin/Field/FieldFormatter/ImageBackgroundFormatter.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\image_background_formatter\Plugin\Field\FieldFormatter;

+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
 use Drupal\Core\Entity\EntityTypeManager;
 use Drupal\Core\Field\FieldDefinitionInterface;
 use Drupal\Core\Field\FieldItemListInterface;
@@ @@
   /**
    * EntityTypeManager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManager
+   * @var EntityTypeManager
    */
   private $entityTypeManager;

@@ @@
    *   Plugin id.
    * @param string $plugin_definition
    *   Plugin definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   Field definition.
    * @param array $settings
    *   Settings.
@@ @@
    *   View mode.
    * @param array $third_party_settings
    *   Third party settings.
-   * @param \Drupal\Core\Entity\EntityTypeManager $entityTypeManager
+   * @param EntityTypeManager $entityTypeManager
    *   EntityTypeManager.
    */
   public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, $label, $view_mode, array $third_party_settings, EntityTypeManager $entityTypeManager) {
@@ @@
   /**
    * View Elements.
    *
-   * @param \Drupal\Core\Field\FieldItemListInterface $items
+   * @param FieldItemListInterface $items
    *   Items.
    * @param string $langcode
    *   Langcode.
@@ @@
    * @return array
    *   Rendered array.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function viewElements(FieldItemListInterface $items, $langcode) {
     $element = [];
@@ @@

       $element[$delta] = [
         '#theme' => 'image_background_formatter',
-        '#img' => isset($style) ? $style->buildUrl($item->entity->getFileUri()) : file_create_url($item->entity->getFileUri()),
+        '#img' => isset($style) ? $style->buildUrl($item->entity->getFileUri()) : \Drupal::service('file_url_generator')->generateAbsoluteString($item->entity->getFileUri()),
         '#attached' => [
           'library' => 'image_background_formatter/image_background_formatter',
         ],
@@ @@
    *
    * @param array $form
    *   Form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   Form state.
    *
    * @return array|mixed
    *   Form array.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function settingsForm(array $form, FormStateInterface $form_state) {
     $settings = $this->getSettings();
@@ @@
   /**
    * Creates an instance of the plugin.
    *
-   * @param \Symfony\Component\DependencyInjection\ContainerInterface $container
+   * @param ContainerInterface $container
    *   The container to pull out services used in the plugin.
    * @param array $configuration
    *   A configuration array containing information about the plugin instance.
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

