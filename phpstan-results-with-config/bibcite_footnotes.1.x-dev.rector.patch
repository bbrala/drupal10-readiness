diff --git a/bibcite_footnotes.module b/bibcite_footnotes.module
index bec0ebd..7f2c3cc 100644
--- a/bibcite_footnotes.module
+++ b/bibcite_footnotes.module
@@ -1,5 +1,8 @@
 <?php
 
+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
+use Drupal\core\Entity\EntityInterface;
 /**
  * @file
  * Contains bibcite_footnotes.module.
@@ -25,7 +28,7 @@ function bibcite_footnotes_theme() {
     ],
     'bibcite_footnote_list' => [
       'render element' => 'footnotes',
-      'path' => drupal_get_path('module', 'bibcite_footnotes') . '/templates',
+      'path' => \Drupal::service('extension.list.module')->getPath('bibcite_footnotes') . '/templates',
       'template' => 'bibcite-footnote-list',
       'variables' => [
         'notes' => [],
@@ -59,8 +62,8 @@ function bibcite_footnotes_help($route_name, RouteMatchInterface $route_match) {
  *
  * @param $variables Theme variables.
  *
- * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
- * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+ * @throws InvalidPluginDefinitionException
+ * @throws PluginNotFoundException
  */
 function bibcite_footnotes_preprocess_bibcite_footnote_list(&$variables) {
   $config = $variables['config'];
@@ -145,8 +148,8 @@ function bibcite_footnotes_preprocess_bibcite_footnote_list(&$variables) {
         $build[] = $citation_build;
       }
 
-      $render = render($build);
-      $item['sort'] = trim(strip_tags(render($citation_build)));
+      $render = \Drupal::service('renderer')->render($build);
+      $item['sort'] = trim(strip_tags(\Drupal::service('renderer')->render($citation_build)));
     }
 
 //    $item['#markup'] = $render;
@@ -198,7 +201,7 @@ function bibcite_footnotes_preprocess_bibcite_footnote_link(&$variables) {
     $class .= '-inline';
   }
 
-  $title = trim(strip_tags(render($citation_data)));
+  $title = trim(strip_tags(\Drupal::service('renderer')->render($citation_data)));
   $url = Url::fromUserInput('#' . $fn['fn_id'], ['attributes' => ['id' => $fn['ref_id'], 'class' => $class, 'title' => $title]]);
 
 
@@ -216,7 +219,7 @@ function bibcite_footnotes_preprocess_bibcite_footnote_link(&$variables) {
  * @TODO: Add cleanup batch task for orphaned References.
  *
  * @param $form
- * @param \Drupal\Core\Form\FormStateInterface $form_state
+ * @param FormStateInterface $form_state
  */
 function bibcite_footnotes_inline_entity_form_entity_form_alter(&$form, FormStateInterface &$form_state) {
   $form['#save_entity'] = TRUE;
@@ -230,7 +233,7 @@ function bibcite_footnotes_inline_entity_form_entity_form_alter(&$form, FormStat
  * into a JavaScript setting under drupalSettings.bibcite_footnotes.references.
  *
  * @param $form
- * @param \Drupal\Core\Form\FormStateInterface $form_state
+ * @param FormStateInterface $form_state
  */
 function bibcite_footnotes_form_node_form_alter(&$form, FormStateInterface &$form_state) {
   $ief = $form_state->get('inline_entity_form');
@@ -250,7 +253,7 @@ function bibcite_footnotes_form_node_form_alter(&$form, FormStateInterface &$for
 
             foreach ($ief_instance['entities'] as $entity_wrapper) {
               /**
-               * @var \Drupal\core\Entity\EntityInterface $entity
+               * @var EntityInterface $entity
                */
               $entity = $entity_wrapper['entity'];
               if ($entity->getEntityTypeId() == 'bibcite_reference') {
@@ -307,7 +310,7 @@ function bibcite_footnotes_get_ckeditor_select_item($entity): array {
 
   $data = $serializer->normalize($entity, 'csl');
   $build = ['#theme' => 'bibcite_citation', '#data' => $data];
-  $citation_text = trim(strip_tags(render($build)));
+  $citation_text = trim(strip_tags(\Drupal::service('renderer')->render($build)));
   // Attempt to match up pre-saved entities with the eventual saved ones.
   $citation_key = $entity->id->first()->getValue()['value'];
   return [$citation_text, $citation_key];
@@ -330,7 +333,7 @@ function bibcite_footnotes_preprocess_field(&$variables, $hook) {
         $items[] = [
           'orig_index' => $index,
           'orig_element' => $element,
-          'rendered' => trim(strip_tags(render($renderable))),
+          'rendered' => trim(strip_tags(\Drupal::service('renderer')->render($renderable))),
         ];
       }
     }
diff --git a/src/Plugin/BibCiteProcessor/CiteprocPhpInline.php b/src/Plugin/BibCiteProcessor/CiteprocPhpInline.php
index 87d320f..aa785af 100644
--- a/src/Plugin/BibCiteProcessor/CiteprocPhpInline.php
+++ b/src/Plugin/BibCiteProcessor/CiteprocPhpInline.php
@@ -24,7 +24,7 @@ class CiteprocPhpInline extends BibCiteProcessorBase implements BibCiteProcessor
   /**
    * Config factory service.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
diff --git a/src/Plugin/CKEditorPlugin/ReferenceFootnotes.php b/src/Plugin/CKEditorPlugin/ReferenceFootnotes.php
index 069bc9d..9038af1 100644
--- a/src/Plugin/CKEditorPlugin/ReferenceFootnotes.php
+++ b/src/Plugin/CKEditorPlugin/ReferenceFootnotes.php
@@ -33,7 +33,7 @@ class ReferenceFootnotes extends CKEditorPluginBase {
     return [
       'reference_footnotes' => [
         'label' => t('Reference Footnotes'),
-        'image' => drupal_get_path('module', 'bibcite_footnotes') . '/js/plugins/reference_footnotes/images/icon.png',
+        'image' => \Drupal::service('extension.list.module')->getPath('bibcite_footnotes') . '/js/plugins/reference_footnotes/images/icon.png',
       ],
     ];
   }
@@ -44,7 +44,7 @@ class ReferenceFootnotes extends CKEditorPluginBase {
   public function getFile() {
     // Make sure that the path to the plugin.js matches the file structure of
     // the CKEditor plugin you are implementing.
-    return drupal_get_path('module', 'bibcite_footnotes') . '/js/plugins/reference_footnotes/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('bibcite_footnotes') . '/js/plugins/reference_footnotes/plugin.js';
   }
 
   /**
