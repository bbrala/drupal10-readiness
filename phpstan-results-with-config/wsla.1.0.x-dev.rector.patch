diff --git a/src/EventSubscriber/WebformFileUploadToSalesforceSubscriber.php b/src/EventSubscriber/WebformFileUploadToSalesforceSubscriber.php
index 34c22a2..a932372 100755
--- a/src/EventSubscriber/WebformFileUploadToSalesforceSubscriber.php
+++ b/src/EventSubscriber/WebformFileUploadToSalesforceSubscriber.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\webform_file_upload_to_salesforce\EventSubscriber;
 
+use Drupal\Core\File\FileSystemInterface;
+use Drupal\Core\Messenger\MessengerInterface;
 use Drupal\file\Entity\File;
 use Drupal\salesforce\Event\SalesforceEvents;
 use Drupal\salesforce_mapping\Event\SalesforcePushParamsEvent;
@@ -21,7 +23,7 @@ class WebformFileUploadToSalesforceSubscriber implements EventSubscriberInterfac
     /**
      * Core file system interface.
      *
-     * @var \Drupal\Core\File\FileSystemInterface
+     * @var FileSystemInterface
      */
     protected $fileSystem;
 
@@ -35,7 +37,7 @@ class WebformFileUploadToSalesforceSubscriber implements EventSubscriberInterfac
     /**
      * The Messenger service.
      *
-     * @var \Drupal\Core\Messenger\MessengerInterface
+     * @var MessengerInterface
      */
     protected $messenger;
 
@@ -58,7 +60,7 @@ class WebformFileUploadToSalesforceSubscriber implements EventSubscriberInterfac
                 if(isset($fValue['#custom_lead']) && ($leadFlag == false)){
                     $leadFlag = true;
                     $file = File::load($data[$fld]);
-                    $path = file_create_url($file->getFileUri());
+                    $path = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
                     $fileName = $file->getFilename();
                     $this->handleFile($path, $mappedObject, $fileName);
                 }
