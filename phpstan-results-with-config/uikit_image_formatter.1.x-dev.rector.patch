diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index 18f40be..329175a 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\uikit_image_formatter\Functional;
 
+use Drupal\user\UserInterface;
 use Drupal\Core\Url;
 use Drupal\Tests\BrowserTestBase;
 
@@ -22,14 +23,14 @@ class LoadTest extends BrowserTestBase {
   /**
    * A user with permission to administer site configuration.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $user;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
diff --git a/uikit_image_formatter.info.yml b/uikit_image_formatter.info.yml
index 985c602..6e23ebb 100644
--- a/uikit_image_formatter.info.yml
+++ b/uikit_image_formatter.info.yml
@@ -4,8 +4,7 @@ package: UIkit
 
 type: module
 
-core: '8.x'
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 # Information added by Drupal.org packaging script on 2020-12-03
 version: '8.x-1.4'
diff --git a/uikit_image_formatter.theme.inc b/uikit_image_formatter.theme.inc
index 9cdfd31..10ced26 100644
--- a/uikit_image_formatter.theme.inc
+++ b/uikit_image_formatter.theme.inc
@@ -57,7 +57,7 @@ function template_preprocess_uikit_lightbox(array &$variables) {
     $style->transformDimensions($dimensions, $uri);
   }
   else {
-    $path = file_create_url($uri);
+    $path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
 
   // Render as a standard image if an image style is not given.
@@ -138,7 +138,7 @@ function template_preprocess_uikit_slideshow(array &$variables) {
           $style->transformDimensions($dimensions, $uri);
         }
         else {
-          $path = file_create_url($uri);
+          $path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
         }
         if (!empty($caption)) {
           $variables['attributes'] = [
@@ -154,7 +154,7 @@ function template_preprocess_uikit_slideshow(array &$variables) {
     }
     if($mime_parts[0] == 'video') {
       // We have a video
-      $variables['video'] = file_create_url($uri);
+      $variables['video'] = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
     }
   }
   else {
@@ -225,7 +225,7 @@ function template_preprocess_uikit_slider(array &$variables) {
       $style->transformDimensions($dimensions, $uri);
     }
     else {
-      $path = file_create_url($uri);
+      $path = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
     }
     if (!empty($caption)) {
       $variables['attributes'] = [
