modules/contrib/video_sitemap/modules/video_sitemap_video_embed/src/Plugin/video_sitemap/VideoLocation/VideoEmbed.php
modules/contrib/video_sitemap/src/Annotation/VideoLocation.php
modules/contrib/video_sitemap/src/BatchTrait.php
modules/contrib/video_sitemap/src/Controller/VideoSitemapController.php
modules/contrib/video_sitemap/src/Form/VideoSitemapGenerateForm.php
modules/contrib/video_sitemap/src/Form/VideoSitemapSettingsForm.php
modules/contrib/video_sitemap/src/Plugin/QueueWorker/NodeWithVideoQueue.php
modules/contrib/video_sitemap/src/Plugin/video_sitemap/VideoLocation/VideoFile.php
modules/contrib/video_sitemap/src/SitemapWriter.php
modules/contrib/video_sitemap/src/VideoLocationManager.php
modules/contrib/video_sitemap/src/VideoLocationPluginBase.php
modules/contrib/video_sitemap/src/VideoLocationPluginInterface.php
modules/contrib/video_sitemap/src/VideoSitemapEntityManager.php
modules/contrib/video_sitemap/src/VideoSitemapGenerator.php
modules/contrib/video_sitemap/video_sitemap.api.php
modules/contrib/video_sitemap/video_sitemap.install
modules/contrib/video_sitemap/video_sitemap.module

12 files with changes
=====================

1) modules/contrib/video_sitemap/video_sitemap.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\video_sitemap\VideoSitemapGenerator;
+use Drupal\video_sitemap\VideoSitemapEntityManager;
 /**
  * @file
  * Main module file.
@@ @@
   if (!$config->get('cron_generate')) {
     return;
   }
-  /** @var \Drupal\video_sitemap\VideoSitemapGenerator $generator */
+  /** @var VideoSitemapGenerator $generator */
   $generator = \Drupal::service('video_sitemap.generator');
   // If the minimum sitemap lifetime hasn't been passed, skip.
   $last_generated = $generator->getLastGenerated();
@@ @@
  * Implements hook_ENTITY_TYPE_insert().
  */
 function video_sitemap_node_insert(EntityInterface $entity) {
-  /** @var \Drupal\video_sitemap\VideoSitemapEntityManager $entity_manager */
+  /** @var VideoSitemapEntityManager $entity_manager */
   $entity_manager = \Drupal::service('video_sitemap.entity_manager');
   $entity_manager->addEntityToQueue($entity);
 }
@@ @@
  * Implements hook_ENTITY_TYPE_update().
  */
 function video_sitemap_node_update(EntityInterface $entity) {
-  /** @var \Drupal\video_sitemap\VideoSitemapEntityManager $entity_manager */
+  /** @var VideoSitemapEntityManager $entity_manager */
   $entity_manager = \Drupal::service('video_sitemap.entity_manager');
   $entity_manager->addEntityToQueue($entity);
 }
@@ @@
  * Removes node for video sitemap index table..
  */
 function video_sitemap_node_delete(EntityInterface $entity) {
-  /** @var \Drupal\video_sitemap\VideoSitemapEntityManager $entity_manager */
+  /** @var VideoSitemapEntityManager $entity_manager */
   $entity_manager = \Drupal::service('video_sitemap.entity_manager');
   $entity_manager->deleteLocRecord($entity);
 }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


2) modules/contrib/video_sitemap/src/VideoSitemapGenerator.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\video_sitemap;

+use Drupal\Core\Config\Config;
+use Drupal\Core\Entity\EntityMalformedException;
+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\Core\Field\BaseFieldDefinition;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\Component\Plugin\PluginManagerInterface;
 use Drupal\Component\Utility\Xss;
@@ @@
   /**
    * The queue service.
    *
-   * @var \Drupal\Core\Queue\QueueFactory
+   * @var QueueFactory
    */
   protected $queueFactory;

@@ @@
   /**
    * The queue plugin manager.
    *
-   * @var \Drupal\Core\Queue\QueueWorkerManagerInterface
+   * @var QueueWorkerManagerInterface
    */
   protected $queueManager;

@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * Video location plugin manager.
    *
-   * @var \Drupal\Component\Plugin\PluginManagerInterface
+   * @var PluginManagerInterface
    */
   protected $locationManager;

@@ @@
   /**
    * The module config.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $config;

@@ @@
   /**
    * The database connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $connection;

@@ @@
   /**
    * The Sitemap writer service.
    *
-   * @var \Drupal\video_sitemap\SitemapWriter
+   * @var SitemapWriter
    */
   protected $writer;

@@ @@
   /**
    * The time service.
    *
-   * @var \Drupal\Component\Datetime\TimeInterface
+   * @var TimeInterface
    */
   protected $time;

@@ @@
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;

   /**
-   * @var \Drupal\Core\Extension\ModuleHandler
+   * @var ModuleHandler
    */
   protected $moduleHandler;

@@ @@
   /**
    * Constructs a VideoSitemapGenerator object.
    *
-   * @param \Drupal\Core\Queue\QueueFactory $queue_factory
+   * @param QueueFactory $queue_factory
    *   The queue service.
-   * @param \Drupal\Core\Queue\QueueWorkerManagerInterface $queue_manager
+   * @param QueueWorkerManagerInterface $queue_manager
    *   The queue plugin manager.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Component\Plugin\PluginManagerInterface $location_manager
+   * @param PluginManagerInterface $location_manager
    *   Video location plugin manager.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config
+   * @param ConfigFactoryInterface $config
    *   The config factory.
-   * @param \Drupal\Core\Database\Connection $connection
+   * @param Connection $connection
    *   The Database connection.
-   * @param \Drupal\video_sitemap\SitemapWriter $sitemap_writer
+   * @param SitemapWriter $sitemap_writer
    *   The Sitemap writer service.
-   * @param \Drupal\Component\Datetime\TimeInterface $time
+   * @param TimeInterface $time
    *   The time service.
-   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   * @param DateFormatterInterface $date_formatter
    *   The date formatter service.
-   * @param \Drupal\Core\Extension\ModuleHandler $module_handler
+   * @param ModuleHandler $module_handler
    *   The module handler service.
    */
   public function __construct(
@@ @@
   /**
    * Stores videos used on a node as a sitemap index data.
    *
-   * @param \Drupal\node\NodeInterface $node
+   * @param NodeInterface $node
    *   Node entity.
    *
-   * @throws \Drupal\Core\Entity\EntityMalformedException
+   * @throws EntityMalformedException
    * @throws \Exception
    */
   public function processVideoUsageOnNode(NodeInterface $node) {
@@ @@
   /**
    * Searches for videos used on a node.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Entity item.
    *
    * @return array
    *   Sitemap index data for a give node.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginException
+   * @throws PluginNotFoundException
    */
   private function getMediaValuesFromEntity(EntityInterface $entity) {
     $records = [];
@@ @@
   /**
    * Callback to find any children referenced entities.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Entity item.
    *
    * @return array
    *   Child items.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   protected function getChildren(EntityInterface $entity) {
     $children = [];
@@ @@
   /**
    * Gets an entity type fields of entity reference type.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Entity item.
    * @param boolean $target_media
    *   Flag if the searched type is Media.
@@ @@
       return $fields;
     }

-    /** @var \Drupal\Core\Field\FieldDefinitionInterface[] $fields */
+    /** @var FieldDefinitionInterface[] $fields */
     $fields_defintion = \Drupal::getContainer()
       ->get('entity_field.manager')
       ->getFieldDefinitions($entity->getEntityTypeId(), $entity->bundle());
     foreach ($fields_defintion as $key => $field) {
-      /** @var \Drupal\Core\Field\BaseFieldDefinition $field */
+      /** @var BaseFieldDefinition $field */
       if (!in_array($field->getType(), ['entity_reference', 'entity_reference_revisions'])) {
         continue;
       }
@@ @@
   /**
    * Gets Media entity description field value.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   Media item.
    *
    * @return string
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


3) modules/contrib/video_sitemap/src/VideoSitemapEntityManager.php:15

    ---------- begin diff ----------
@@ @@
   /**
    * The queue service.
    *
-   * @var \Drupal\Core\Queue\QueueFactory
+   * @var QueueFactory
    */
   protected $queueFactory;

@@ @@
   /**
    * The database connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $connection;

@@ @@
   /**
    * Constructs a VideoSitemapGenerator object.
    *
-   * @param \Drupal\Core\Queue\QueueFactory $queue_factory
+   * @param QueueFactory $queue_factory
    *   The queue service.
-   * @param \Drupal\Core\Database\Connection $connection
+   * @param Connection $connection
    *   The Database connection.
    */
   public function __construct(QueueFactory $queue_factory, Connection $connection) {
@@ @@
   /**
    * Add entity item to the index queue.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Entity object.
    */
   public function addEntityToQueue(EntityInterface $entity) {
@@ @@
   /**
    * Deletes entity record from index table.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Entity object.
    */
   public function deleteLocRecord(EntityInterface $entity) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


4) modules/contrib/video_sitemap/src/VideoLocationPluginInterface.php:14

    ---------- begin diff ----------
@@ @@
    *
    * This is used for <video:thumbnail_loc> sitemap tag.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   A media item..
    *
    * @return string
@@ @@
    *
    * This is used for <video:player_loc> sitemap tag.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   A media item.
    *
    * @return string
@@ @@
    *
    * This is used for <video:content_loc> sitemap tag.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   A media item.
    *
    * @return string
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


5) modules/contrib/video_sitemap/src/Plugin/video_sitemap/VideoLocation/VideoFile.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
    *   The plugin id.
    * @param array $plugin_definition
    *   The plugin definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
    */
   public function __construct(array $configuration, $plugin_id, array $plugin_definition, EntityTypeManagerInterface $entity_type_manager) {
@@ @@
     if (is_numeric($target_id)) {
       $file = $storage->load($target_id);
       if (!empty($file)) {
-        return file_create_url($file->getFileUri());
+        return \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       }
     }
     return '';
@@ @@
     if (is_numeric($target_id)) {
       $file = $storage->load($target_id);
       if (!empty($file)) {
-        return file_create_url($file->getFileUri());
+        return \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       }
     }
     return '';
@@ @@
   /**
    * Get the primary value stored in the Media source field.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   Media entity..
    *
    * @return mixed
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/video_sitemap/src/Plugin/QueueWorker/NodeWithVideoQueue.php:21

    ---------- begin diff ----------
@@ @@
   /**
    * The Video Sitemap generator service.
    *
-   * @var \Drupal\video_sitemap\VideoSitemapGenerator
+   * @var VideoSitemapGenerator
    */
   protected $generator;

@@ @@
   /**
    * Entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
    *   The plugin_id for the plugin instance.
    * @param array $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\video_sitemap\VideoSitemapGenerator $video_sitemap_generator
+   * @param VideoSitemapGenerator $video_sitemap_generator
    *   The Video Sitemap generator service.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   Entity type manager.
    */
   public function __construct(array $configuration, $plugin_id, array $plugin_definition, VideoSitemapGenerator $video_sitemap_generator, EntityTypeManagerInterface $entity_type_manager) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/video_sitemap/src/Form/VideoSitemapSettingsForm.php:23

    ---------- begin diff ----------
@@ @@
   /**
    * The entity type bundle info service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeBundleInfoInterface
+   * @var EntityTypeBundleInfoInterface
    */
   protected $entityTypeBundleInfo;

@@ @@
   /**
    * Video location plugin manager.
    *
-   * @var \Drupal\Component\Plugin\PluginManagerInterface
+   * @var PluginManagerInterface
    */
   protected $locationManager;

@@ @@
   /**
    * Entity field manager service.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;

@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * VideoSitemapSettingsForm constructor.
    *
-   * @param \Drupal\Core\Entity\EntityTypeBundleInfoInterface $entity_type_bundle_info
+   * @param EntityTypeBundleInfoInterface $entity_type_bundle_info
    *   The entity type bundle info service.
-   * @param \Drupal\Component\Plugin\PluginManagerInterface $location_manager
+   * @param PluginManagerInterface $location_manager
    *   Video location plugin manager.
-   * @param \Drupal\Core\Entity\EntityFieldManagerInterface $entity_field_manager
+   * @param EntityFieldManagerInterface $entity_field_manager
    *   Entity field manager service.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
    */
   public function __construct(EntityTypeBundleInfoInterface $entity_type_bundle_info, PluginManagerInterface $location_manager, EntityFieldManagerInterface $entity_field_manager, EntityTypeManagerInterface $entity_type_manager) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/video_sitemap/src/Form/VideoSitemapGenerateForm.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * The Video Sitemap generator service.
    *
-   * @var \Drupal\video_sitemap\VideoSitemapGenerator
+   * @var VideoSitemapGenerator
    */
   protected $generator;

@@ @@
   /**
    * Constructs a new VideoSitemapGenerateForm object.
    *
-   * @param \Drupal\video_sitemap\VideoSitemapGenerator $video_sitemap_generator
+   * @param VideoSitemapGenerator $video_sitemap_generator
    *   The Video Sitemap generator service.
    */
   public function __construct(VideoSitemapGenerator $video_sitemap_generator) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/video_sitemap/src/Controller/VideoSitemapController.php:18

    ---------- begin diff ----------
@@ @@
   /**
    * The video sitemap generator service.
    *
-   * @var \Drupal\video_sitemap\VideoSitemapGenerator
+   * @var VideoSitemapGenerator
    */
   protected $generator;

@@ @@
   /**
    * VideoSitemapController constructor.
    *
-   * @param \Drupal\video_sitemap\VideoSitemapGenerator $generator
+   * @param VideoSitemapGenerator $generator
    *   The video sitemap generator service.
    */
   public function __construct(VideoSitemapGenerator $generator) {
@@ @@
   /**
    * Returns the whole sitemap or its requested chunk.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request object.
    *
    * @throws NotFoundHttpException
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/video_sitemap/src/BatchTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\video_sitemap;

+use Drupal\Component\Plugin\Exception\PluginException;
+use Drupal\Core\Queue\QueueWorkerManagerInterface;
+use Drupal\Core\Queue\QueueFactory;
 use Drupal\Core\Queue\RequeueException;
 use Drupal\Core\Queue\SuspendQueueException;
 use Drupal\Core\StringTranslation\StringTranslationTrait;
@@ @@
    * @param array $context
    *   The batch context.
    *
-   * @throws \Drupal\Component\Plugin\Exception\PluginException
+   * @throws PluginException
    */
   public static function processQueue(array &$context) {
-    /** @var \Drupal\Core\Queue\QueueWorkerManagerInterface $queue_manager */
+    /** @var QueueWorkerManagerInterface $queue_manager */
     $queue_manager = \Drupal::service('plugin.manager.queue_worker');
-    /** @var \Drupal\Core\Queue\QueueFactory $queue_factory */
+    /** @var QueueFactory $queue_factory */
     $queue_factory = \Drupal::service('queue');
     $queue_name = 'node_with_video_queue';

@@ @@
    *   The batch context.
    */
   public static function generateSitemapFromIndex(array &$context) {
-    /** @var \Drupal\video_sitemap\VideoSitemapGenerator $generator */
+    /** @var VideoSitemapGenerator $generator */
     $generator = \Drupal::service('video_sitemap.generator');
     $generator->writeSitemap();
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


11) modules/contrib/video_sitemap/src/Annotation/VideoLocation.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\video_sitemap\Annotation;

+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;

 /**
@@ @@
   /**
    * The title of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
    ----------- end diff -----------

Applied rules:
 * PseudoNamespaceToNamespaceRector


12) modules/contrib/video_sitemap/modules/video_sitemap_video_embed/src/Plugin/video_sitemap/VideoLocation/VideoEmbed.php:92

    ---------- begin diff ----------
@@ @@
   /**
    * Get Media video provider.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   Media entity.
    *
    * @return mixed
@@ @@
   /**
    * Get the primary value stored in the Media source field.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   Media entity..
    *
    * @return mixed
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 12 files have been changed by Rector                                      

