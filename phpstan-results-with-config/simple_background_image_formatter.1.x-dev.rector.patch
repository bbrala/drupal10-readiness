diff --git a/simple_background_image_formatter.info.yml b/simple_background_image_formatter.info.yml
index 700511f..0f543ab 100644
--- a/simple_background_image_formatter.info.yml
+++ b/simple_background_image_formatter.info.yml
@@ -1,7 +1,6 @@
 name: Simple Background-image Formatter
 description: Provides a field formatter which allows images to be formatted as a css background-image instead of an actual html img tag.
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - drupal:image
diff --git a/simple_background_image_formatter.module b/simple_background_image_formatter.module
index 6ef5a42..337972a 100644
--- a/simple_background_image_formatter.module
+++ b/simple_background_image_formatter.module
@@ -1,5 +1,7 @@
 <?php
 
+use Drupal\image\Plugin\Field\FieldType\ImageItem;
+use Drupal\file\Entity\File;
 /**
  * @file
  * Contains hook implementations.
@@ -37,9 +39,9 @@ function simple_background_image_formatter_theme($existing, $type, $theme, $path
  * @ingroup themeable
  */
 function template_preprocess_simple_background_image_formatter(array &$variables) {
-  /** @var \Drupal\image\Plugin\Field\FieldType\ImageItem $item */
+  /** @var ImageItem $item */
   $item = $variables['item'];
-  /** @var \Drupal\file\Entity\File $file */
+  /** @var File $file */
   $file = $item->entity;
 
   $uri = $file->get('uri')->first()->getValue()['value'];
@@ -48,7 +50,7 @@ function template_preprocess_simple_background_image_formatter(array &$variables
     $imageUrl = $style->buildUrl($uri);
   }
   else {
-    $imageUrl = file_create_url($uri);
+    $imageUrl = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }
 
   $variables['attributes']['style'] = "background-image: url(\"{$imageUrl}\");";
