diff --git a/Tests/Controller/MediaSitemapBatchControllerTest.php b/Tests/Controller/MediaSitemapBatchControllerTest.php
index 47be0e0..c46155f 100644
--- a/Tests/Controller/MediaSitemapBatchControllerTest.php
+++ b/Tests/Controller/MediaSitemapBatchControllerTest.php
@@ -18,7 +18,7 @@ class MediaSitemapBatchControllerTest extends WebTestBase {
   /**
    * Drupal\Core\Database\Driver\mysql\Connection definition.
    *
-   * @var Drupal\Core\Database\Driver\mysql\Connection
+   * @var Connection
    */
   protected $database;
   /**
diff --git a/Tests/Controller/MediaSitemapControllerTest.php b/Tests/Controller/MediaSitemapControllerTest.php
index e3c89c9..eae272b 100644
--- a/Tests/Controller/MediaSitemapControllerTest.php
+++ b/Tests/Controller/MediaSitemapControllerTest.php
@@ -19,14 +19,14 @@ class MediaSitemapControllerTest extends WebTestBase {
   /**
    * Drupal\Core\Database\Driver\mysql\Connection definition.
    *
-   * @var Drupal\Core\Database\Driver\mysql\Connection
+   * @var Connection
    */
   protected $database;
 
   /**
    * Drupal\Core\Config\ConfigFactory definition.
    *
-   * @var Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $config_factory;
   /**
diff --git a/src/Controller/MediaSitemapBatchController.php b/src/Controller/MediaSitemapBatchController.php
index 1d4f9e8..32bff5c 100644
--- a/src/Controller/MediaSitemapBatchController.php
+++ b/src/Controller/MediaSitemapBatchController.php
@@ -22,7 +22,7 @@ class MediaSitemapBatchController extends ControllerBase {
   /**
    * Drupal\Core\Database\Driver\mysql\Connection definition.
    *
-   * @var Drupal\Core\Database\Driver\mysql\Connection
+   * @var Connection
    */
   protected $database;
 
diff --git a/src/Controller/MediaSitemapController.php b/src/Controller/MediaSitemapController.php
index 638a0e7..f0881ca 100644
--- a/src/Controller/MediaSitemapController.php
+++ b/src/Controller/MediaSitemapController.php
@@ -24,14 +24,14 @@ class MediaSitemapController extends ControllerBase {
   /**
    * Drupal\Core\Database\Driver\mysql\Connection definition.
    *
-   * @var Drupal\Core\Database\Driver\mysql\Connection
+   * @var Connection
    */
   protected $database;
 
   /**
    * Drupal\Core\Config\ConfigFactory definition.
    *
-   * @var Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $config_factory;
   /**
@@ -68,7 +68,7 @@ class MediaSitemapController extends ControllerBase {
     );
     $rows = array();
     $url = 'public://media_sitemap/image_sitemap.xml';
-    $url = file_create_url($url);
+    $url = \Drupal::service('file_url_generator')->generateAbsoluteString($url);
 
     // Rows of table.
     $image_sitemap_created = $this->config('media_sitemap.settings')->get('image_sitemap_created');
diff --git a/src/MediaSitemapGenerator.php b/src/MediaSitemapGenerator.php
index 12d2f37..bbd3a08 100644
--- a/src/MediaSitemapGenerator.php
+++ b/src/MediaSitemapGenerator.php
@@ -26,26 +26,26 @@ class MediaSitemapGenerator implements MediaSitemapGeneratorInterface {
   protected $database;
 
   /**
-   * @var \Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $configFactory;
 
   /**
-   * @var \Drupal\Core\File\FileSystem
+   * @var FileSystem
    */
   protected $fileSystem;
 
   /**
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;
 
   /**
    * MediaSitemapGenerator constructor.
    * @param Connection $database
-   * @param \Drupal\Core\Config\ConfigFactory $configFactory
-   * @param \Drupal\Core\File\FileSystem $fileSystem
-   * @param \Drupal\Core\Messenger\MessengerInterface $messenger
+   * @param ConfigFactory $configFactory
+   * @param FileSystem $fileSystem
+   * @param MessengerInterface $messenger
    */
   public function __construct(Connection $database, ConfigFactory $configFactory, FileSystem $fileSystem, MessengerInterface $messenger) {
     $this->database = $database;
@@ -89,7 +89,7 @@ class MediaSitemapGenerator implements MediaSitemapGeneratorInterface {
           $output .= '<url><loc>' . Url::fromRoute('entity.node.canonical', array('node' => $nid->id), array('absolute' => TRUE))
               ->toString() . '</loc>';
           foreach ($files as $file) {
-            $output .= '<image:image><image:loc>' . file_create_url($file->uri) . '</image:loc><image:title>' . $file->filename . '</image:title></image:image>';
+            $output .= '<image:image><image:loc>' . \Drupal::service('file_url_generator')->generateAbsoluteString($file->uri) . '</image:loc><image:title>' . $file->filename . '</image:title></image:image>';
           }
           $output .= '</url>';
           $total_urls++;
@@ -97,7 +97,7 @@ class MediaSitemapGenerator implements MediaSitemapGeneratorInterface {
       }
       $output .= '</urlset>';
       // File build path.
-      $path = file_create_url($this->fileSystem->realpath( $this->configFactory->get('system.file')->get('default_scheme') . "://media_sitemap"));
+      $path = \Drupal::service('file_url_generator')->generateAbsoluteString($this->fileSystem->realpath( $this->configFactory->get('system.file')->get('default_scheme') . "://media_sitemap"));
       if (!is_dir($path)) {
         \Drupal::service('file_system')->mkdir($path);
       }
