diff --git a/src/Controller/ShortifyController.php b/src/Controller/ShortifyController.php
index 71c9c96..0d3b588 100644
--- a/src/Controller/ShortifyController.php
+++ b/src/Controller/ShortifyController.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\shortify\Controller;
 
+use function GuzzleHttp\json_encode;
 use Drupal;
 use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
 use Drupal\Component\Plugin\Exception\PluginNotFoundException;
@@ -87,7 +88,7 @@ class ShortifyController extends ControllerBase implements ContainerInjectionInt
       }
     }
 
-    return new Response(\GuzzleHttp\json_encode($defaultList));
+    return new Response(json_encode($defaultList));
   }
 
   public function addFile(): JsonResponse {
@@ -132,6 +133,6 @@ class ShortifyController extends ControllerBase implements ContainerInjectionInt
   }
 
   public function getShortcodesList(): Response {
-    return new Response(\GuzzleHttp\json_encode($this->defaultShortcodes));
+    return new Response(json_encode($this->defaultShortcodes));
   }
 }
diff --git a/src/Plugin/Shortcode/FormRender.php b/src/Plugin/Shortcode/FormRender.php
index f25612b..80f1f68 100644
--- a/src/Plugin/Shortcode/FormRender.php
+++ b/src/Plugin/Shortcode/FormRender.php
@@ -47,7 +47,7 @@ class FormRender extends PsShortcodeBase
             $build = Drupal::entityTypeManager()
                 ->getViewBuilder('webform')
                 ->view($webform);
-            $render = render($build);
+            $render = \Drupal::service('renderer')->render($build);
         }
 
         return $this->renderShortcode($render);
diff --git a/src/Plugin/Shortcode/Navigation.php b/src/Plugin/Shortcode/Navigation.php
index 24fbe90..bcba977 100644
--- a/src/Plugin/Shortcode/Navigation.php
+++ b/src/Plugin/Shortcode/Navigation.php
@@ -73,7 +73,7 @@ class Navigation extends PsShortcodeBase {
     $form = Drupal::formBuilder()->getForm(SearchBlockForm::class);
     $form['keys']['#attributes']['placeholder'] = t('Enter text to search...');
     $form['actions']['#attributes']['class'][0] .= ' ps-hide';
-    $render = render($form);
+    $render = \Drupal::service('renderer')->render($form);
     $searchButtonText = t('Search button');
     $render = str_replace('</form>', "<button title='$searchButtonText' type='reset' class='search ps-search-button'></button></form>", $render);
     return str_replace('class="form-search"', 'class="form-search ps-input-search"', $render);
