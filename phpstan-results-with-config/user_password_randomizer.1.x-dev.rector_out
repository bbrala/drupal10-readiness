modules/contrib/user_password_randomizer/src/Form/UserPasswordRandomizerSettingsForm.php
modules/contrib/user_password_randomizer/src/RandomizerJobExecutor.php
modules/contrib/user_password_randomizer/src/UserPasswordRandomizer.php
modules/contrib/user_password_randomizer/src/UserPasswordRandomizerInterface.php
modules/contrib/user_password_randomizer/tests/src/Unit/RandomizerJobExecutorTest.php
modules/contrib/user_password_randomizer/user_password_randomizer.install
modules/contrib/user_password_randomizer/user_password_randomizer.module

6 files with changes
====================

1) modules/contrib/user_password_randomizer/user_password_randomizer.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\user_password_randomizer\RandomizerJobExecutor;
 /**
  * @file
  * Drupal hooks and functions for user_password_randomizer.
  */
-
 /**
  * Implements hook_cron().
  */
 function user_password_randomizer_cron() {
-  /** @var \Drupal\user_password_randomizer\RandomizerJobExecutor $jobExecutor */
+  /** @var RandomizerJobExecutor $jobExecutor */
   $jobExecutor = \Drupal::service('user_password_randomizer.job_executor');
   $jobExecutor->cron();
 }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


2) modules/contrib/user_password_randomizer/tests/src/Unit/RandomizerJobExecutorTest.php:2

    ---------- begin diff ----------
@@ @@
 namespace Drupal\Tests\user_password_randomizer\Unit {


+  use Prophecy\PhpUnit\ProphecyTrait;
+  use Drupal\Core\Config\ConfigFactoryInterface;
+  use PHPUnit\Framework\MockObject\MockBuilder;
   use Drupal\Component\Datetime\TimeInterface;
   use Drupal\Core\Entity\EntityStorageInterface;
   use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ @@
    */
   class RandomizerJobExecutorTest extends UnitTestCase {

+    use ProphecyTrait;
     /**
      * @covers ::execute
      */
     public function testExecute() {
-      /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit\Framework\MockObject\MockBuilder $configFactory */
+      /** @var ConfigFactoryInterface|MockBuilder $configFactory */
       $configFactory = $this->getConfigFactoryStub([
         'user_password_randomizer.settings' => [
           'update_interval' => 60,
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/user_password_randomizer/src/UserPasswordRandomizerInterface.php:13

    ---------- begin diff ----------
@@ @@
    *
    * This ensures no other username than the user passed have this username.
    *
-   * @param \Drupal\user\UserInterface $user
+   * @param UserInterface $user
    *   Generate a new username for this user.
    *
    * @return string
@@ @@
   /**
    * Generates a password for a user.
    *
-   * @param \Drupal\user\UserInterface $user
+   * @param UserInterface $user
    *   Generate a new password for this user.
    *
    * @return string
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


4) modules/contrib/user_password_randomizer/src/UserPasswordRandomizer.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\user_password_randomizer;

+use Drupal\user\UserStorageInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Utility\Token;
@@ @@
   /**
    * The token replacement instance.
    *
-   * @var \Drupal\Core\Utility\Token
+   * @var Token
    */
   protected $token;

@@ @@
   /**
    * Config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * User storage.
    *
-   * @var \Drupal\user\UserStorageInterface
+   * @var UserStorageInterface
    */
   protected $userStorage;

@@ @@
   /**
    * UserPasswordRandomizer constructor.
    *
-   * @param \Drupal\Core\Utility\Token $token
+   * @param Token $token
    *   The token replacement instance.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   Config factory.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
+   * @param EntityTypeManagerInterface $entityTypeManager
    *   The entity type manager.
    */
   public function __construct(Token $token, ConfigFactoryInterface $configFactory, EntityTypeManagerInterface $entityTypeManager) {
@@ @@
       else {
         // When pattern is empty we generate a random (not cryptographically
         // secure) string.
-        $newUsername = user_password(16);
+        $newUsername = \Drupal::service('password_generator')->generate(16);
       }
     } while ($countUsers($newUsername) > 0);

@@ @@
   public function generatePassword(UserInterface $user): string {
     // @todo Replace user_password() with password component.
     // @see https://www.drupal.org/project/drupal/issues/3153085
-    return \user_password(16);
+    return \Drupal::service('password_generator')->generate(16);
   }

 }
    ----------- end diff -----------

Applied rules:
 * UserPasswordRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


5) modules/contrib/user_password_randomizer/src/RandomizerJobExecutor.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\user_password_randomizer;

+use Drupal\user\UserStorageInterface;
+use Drupal\user\UserInterface;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Entity\EntityStorageException;
@@ @@
   /**
    * The logger.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;

@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * The state service.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;

@@ @@
   /**
    * The time service.
    *
-   * @var \Drupal\Component\Datetime\TimeInterface
+   * @var TimeInterface
    */
   protected $time;

@@ @@
   /**
    * The user password randomizer.
    *
-   * @var \Drupal\user_password_randomizer\UserPasswordRandomizerInterface
+   * @var UserPasswordRandomizerInterface
    */
   protected $randomizer;

@@ @@
   /**
    * The user entity storage.
    *
-   * @var \Drupal\user\UserStorageInterface
+   * @var UserStorageInterface
    */
   protected $userStorage;

@@ @@
     // @todo allow users to be configured.
     $userId = 1;

-    /** @var \Drupal\user\UserInterface $user */
+    /** @var UserInterface $user */
     $user = $this->userStorage->load($userId);
     $loggerArgs = [
       '@user' => 'user ' . $user->id(),
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


6) modules/contrib/user_password_randomizer/src/Form/UserPasswordRandomizerSettingsForm.php:17

    ---------- begin diff ----------
@@ @@
   /**
    * The module handler.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;

@@ @@
   /**
    * The date formatter.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;

@@ @@
   /**
    * Constructs a new UserPasswordRandomizerSettingsForm.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The factory for configuration objects.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $moduleHandler
+   * @param ModuleHandlerInterface $moduleHandler
    *   The module handler.
-   * @param \Drupal\Core\Datetime\DateFormatterInterface $dateFormatter
+   * @param DateFormatterInterface $dateFormatter
    *   The date formatter.
    */
   public function __construct(ConfigFactoryInterface $configFactory, ModuleHandlerInterface $moduleHandler, DateFormatterInterface $dateFormatter) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 6 files have been changed by Rector                                       

