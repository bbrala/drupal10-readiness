modules/contrib/simple_background_image_formatter/simple_background_image_formatter.module
modules/contrib/simple_background_image_formatter/src/Plugin/Field/FieldFormatter/SimpleBackgroundImageFormatter.php

1 file with changes
===================

1) modules/contrib/simple_background_image_formatter/simple_background_image_formatter.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\image\Plugin\Field\FieldType\ImageItem;
+use Drupal\file\Entity\File;
 /**
  * @file
  * Contains hook implementations.
@@ @@
  * @ingroup themeable
  */
 function template_preprocess_simple_background_image_formatter(array &$variables) {
-  /** @var \Drupal\image\Plugin\Field\FieldType\ImageItem $item */
+  /** @var ImageItem $item */
   $item = $variables['item'];
-  /** @var \Drupal\file\Entity\File $file */
+  /** @var File $file */
   $file = $item->entity;

   $uri = $file->get('uri')->first()->getValue()['value'];
@@ @@
     $imageUrl = $style->buildUrl($uri);
   }
   else {
-    $imageUrl = file_create_url($uri);
+    $imageUrl = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
   }

   $variables['attributes']['style'] = "background-image: url(\"{$imageUrl}\");";
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector


 [OK] 1 file has been changed by Rector                                         

