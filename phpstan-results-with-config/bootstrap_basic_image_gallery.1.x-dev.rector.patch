diff --git a/src/Form/SettingsForm.php b/src/Form/SettingsForm.php
index 0fd894a..f2be349 100644
--- a/src/Form/SettingsForm.php
+++ b/src/Form/SettingsForm.php
@@ -15,7 +15,7 @@ class SettingsForm extends ConfigFormBase {
   /**
    * The path validator.
    *
-   * @var \Drupal\Core\Path\PathValidatorInterface
+   * @var PathValidatorInterface
    */
   protected $pathValidator;
 
diff --git a/src/Plugin/Field/FieldFormatter/BootstrapBasicImageGalleryFormatter.php b/src/Plugin/Field/FieldFormatter/BootstrapBasicImageGalleryFormatter.php
index db6f6ec..c8f62bf 100644
--- a/src/Plugin/Field/FieldFormatter/BootstrapBasicImageGalleryFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/BootstrapBasicImageGalleryFormatter.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\bootstrap_basic_image_gallery\Plugin\Field\FieldFormatter;
 
+use Drupal\image\ImageStyleInterface;
 use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Drupal\image\Plugin\Field\FieldFormatter\ImageFormatterBase;
@@ -31,21 +32,21 @@ class BootstrapBasicImageGalleryFormatter extends ImageFormatterBase implements
   /**
    * Image style storage.
    *
-   * @var Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $imageStyleStorage;
 
   /**
    * Theme manager.
    *
-   * @var Drupal\Core\Theme\ThemeManagerInterface
+   * @var ThemeManagerInterface
    */
   protected $themeManager;
 
   /**
    * Configuration.
    *
-   * @var Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $configFactory;
 
@@ -172,7 +173,7 @@ class BootstrapBasicImageGalleryFormatter extends ImageFormatterBase implements
     foreach ($files as $delta => $file) {
 
       $image_uri = $file->getFileUri();
-      $url = Url::fromUri(file_create_url($image_uri));
+      $url = \Drupal::service('file_url_generator')->generate($image_uri);
 
       // Extract field item attributes for the theme function, and unset them
       // from the $item so that the field template does not re-render them.
@@ -208,7 +209,7 @@ class BootstrapBasicImageGalleryFormatter extends ImageFormatterBase implements
         $item_attributes['data-mainsrc'] = $main_image_style->buildUrl($image_uri);
       }
       else {
-        $item_attributes['data-mainsrc'] = file_create_url($image_uri);
+        $item_attributes['data-mainsrc'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
       }
 
       // Generate the thumbnail.
@@ -365,7 +366,7 @@ class BootstrapBasicImageGalleryFormatter extends ImageFormatterBase implements
     $dependencies = parent::calculateDependencies();
     foreach (['image_style', 'thumbnail_image_style', 'modal_image_style'] as $setting_name) {
       $style_id = $this->getSetting($setting_name);
-      /** @var \Drupal\image\ImageStyleInterface $style */
+      /** @var ImageStyleInterface $style */
       if ($style_id && $style = $this->imageStyleStorage->load($style_id)) {
         // If this formatter uses a valid image style to display the image, add
         // the image style configuration entity as dependency of this formatter.
@@ -382,7 +383,7 @@ class BootstrapBasicImageGalleryFormatter extends ImageFormatterBase implements
     $changed = parent::onDependencyRemoval($dependencies);
     foreach (['image_style', 'thumbnail_image_style', 'modal_image_style'] as $setting_name) {
       $style_id = $this->getSetting($setting_name);
-      /** @var \Drupal\image\ImageStyleInterface $style */
+      /** @var ImageStyleInterface $style */
       if ($style_id && $style = $this->imageStyleStorage->load($style_id)) {
         if (!empty($dependencies[$style->getConfigDependencyKey()][$style->getConfigDependencyName()])) {
           $replacement_id = $this->imageStyleStorage->getReplacementId($style_id);
diff --git a/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaGalleryFormatter.php b/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaGalleryFormatter.php
index 6c97f2c..278c4a8 100644
--- a/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaGalleryFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaGalleryFormatter.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\bootstrap_basic_image_gallery\Plugin\Field\FieldFormatter;
 
+use Drupal\file\FileStorage;
+use Drupal\image\ImageStyleInterface;
 use Drupal\Core\Entity\EntityDisplayRepositoryInterface;
 use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ -35,42 +37,42 @@ class BootstrapBasicMediaGalleryFormatter extends ImageFormatterBase implements
   /**
    * Image style storage.
    *
-   * @var Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $imageStyleStorage;
 
   /**
    * Theme manager.
    *
-   * @var Drupal\Core\Theme\ThemeManagerInterface
+   * @var ThemeManagerInterface
    */
   protected $themeManager;
 
   /**
    * Configuration.
    *
-   * @var Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $configFactory;
 
   /**
    * The entity display repository.
    *
-   * @var \Drupal\Core\Entity\EntityDisplayRepositoryInterface
+   * @var EntityDisplayRepositoryInterface
    */
   protected $entityDisplayRepository;
 
   /**
    * The storage handler class for files.
    *
-   * @var \Drupal\file\FileStorage
+   * @var FileStorage
    */
   protected $fileStorage;
 
   /**
    * The media view builder.
    *
-   * @var \Drupal\Core\Entity\EntityViewBuilderInterface
+   * @var EntityViewBuilderInterface
    */
   protected $mediaViewBuilder;
 
@@ -214,7 +216,7 @@ class BootstrapBasicMediaGalleryFormatter extends ImageFormatterBase implements
       $source = $media->getSource()->getSourceFieldValue($media);
       if ($source) {
         $image_uri = $this->fileStorage->load($source)->getFileUri();
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
       }
       else {
         return [];
@@ -409,7 +411,7 @@ class BootstrapBasicMediaGalleryFormatter extends ImageFormatterBase implements
     $dependencies = parent::calculateDependencies();
     foreach (['thumbnail_image_style', 'modal_image_style'] as $setting_name) {
       $style_id = $this->getSetting($setting_name);
-      /** @var \Drupal\image\ImageStyleInterface $style */
+      /** @var ImageStyleInterface $style */
       if ($style_id && $style = $this->imageStyleStorage->load($style_id)) {
         // If this formatter uses a valid image style to display the image, add
         // the image style configuration entity as dependency of this formatter.
@@ -426,7 +428,7 @@ class BootstrapBasicMediaGalleryFormatter extends ImageFormatterBase implements
     $changed = parent::onDependencyRemoval($dependencies);
     foreach (['thumbnail_image_style', 'modal_image_style'] as $setting_name) {
       $style_id = $this->getSetting($setting_name);
-      /** @var \Drupal\image\ImageStyleInterface $style */
+      /** @var ImageStyleInterface $style */
       if ($style_id && $style = $this->imageStyleStorage->load($style_id)) {
         if (!empty($dependencies[$style->getConfigDependencyKey()][$style->getConfigDependencyName()])) {
           $replacement_id = $this->imageStyleStorage->getReplacementId($style_id);
diff --git a/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaThumbnailGalleryFormatter.php b/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaThumbnailGalleryFormatter.php
index b3f2419..6ad6cf2 100644
--- a/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaThumbnailGalleryFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/BootstrapBasicMediaThumbnailGalleryFormatter.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\bootstrap_basic_image_gallery\Plugin\Field\FieldFormatter;
 
+use Drupal\file\FileStorage;
+use Drupal\image\ImageStyleInterface;
 use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Drupal\image\Plugin\Field\FieldFormatter\ImageFormatterBase;
@@ -33,28 +35,28 @@ class BootstrapBasicMediaThumbnailGalleryFormatter extends ImageFormatterBase im
   /**
    * Image style storage.
    *
-   * @var Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $imageStyleStorage;
 
   /**
    * Theme manager.
    *
-   * @var Drupal\Core\Theme\ThemeManagerInterface
+   * @var ThemeManagerInterface
    */
   protected $themeManager;
 
   /**
    * Configuration.
    *
-   * @var Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $configFactory;
 
   /**
    * The storage handler class for files.
    *
-   * @var \Drupal\file\FileStorage
+   * @var FileStorage
    */
   protected $fileStorage;
 
@@ -197,7 +199,7 @@ class BootstrapBasicMediaThumbnailGalleryFormatter extends ImageFormatterBase im
       $source = $media->getSource()->getSourceFieldValue($media);
       if ($source) {
         $image_uri = $this->fileStorage->load($source)->getFileUri();
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
       }
       else {
         return [];
@@ -237,7 +239,7 @@ class BootstrapBasicMediaThumbnailGalleryFormatter extends ImageFormatterBase im
         $item_attributes['data-mainsrc'] = $main_image_style->buildUrl($image_uri);
       }
       else {
-        $item_attributes['data-mainsrc'] = file_create_url($image_uri);
+        $item_attributes['data-mainsrc'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
       }
 
       // Generate the thumbnail.
@@ -395,7 +397,7 @@ class BootstrapBasicMediaThumbnailGalleryFormatter extends ImageFormatterBase im
     $dependencies = parent::calculateDependencies();
     foreach (['image_style', 'thumbnail_image_style', 'modal_image_style'] as $setting_name) {
       $style_id = $this->getSetting($setting_name);
-      /** @var \Drupal\image\ImageStyleInterface $style */
+      /** @var ImageStyleInterface $style */
       if ($style_id && $style = $this->imageStyleStorage->load($style_id)) {
         // If this formatter uses a valid image style to display the image, add
         // the image style configuration entity as dependency of this formatter.
@@ -412,7 +414,7 @@ class BootstrapBasicMediaThumbnailGalleryFormatter extends ImageFormatterBase im
     $changed = parent::onDependencyRemoval($dependencies);
     foreach (['image_style', 'thumbnail_image_style', 'modal_image_style'] as $setting_name) {
       $style_id = $this->getSetting($setting_name);
-      /** @var \Drupal\image\ImageStyleInterface $style */
+      /** @var ImageStyleInterface $style */
       if ($style_id && $style = $this->imageStyleStorage->load($style_id)) {
         if (!empty($dependencies[$style->getConfigDependencyKey()][$style->getConfigDependencyName()])) {
           $replacement_id = $this->imageStyleStorage->getReplacementId($style_id);
