modules/contrib/formassembly/formassembly.module
modules/contrib/formassembly/src/ApiAuthorize.php
modules/contrib/formassembly/src/ApiBase.php
modules/contrib/formassembly/src/ApiMarkup.php
modules/contrib/formassembly/src/ApiSync.php
modules/contrib/formassembly/src/Command/SyncCommand.php
modules/contrib/formassembly/src/Commands/FormassemblyCommands.php
modules/contrib/formassembly/src/Component/Render/FormBodyUnescapedMarkup.php
modules/contrib/formassembly/src/Component/Render/FormassemblyHtmlResponseAttachmentsProcessor.php
modules/contrib/formassembly/src/Controller/OauthInteractions.php
modules/contrib/formassembly/src/Entity/FormAssemblyEntity.php
modules/contrib/formassembly/src/Entity/FormAssemblyEntityInterface.php
modules/contrib/formassembly/src/Entity/FormAssemblyEntityViewBuilder.php
modules/contrib/formassembly/src/Entity/FormAssemblyEntityViewsData.php
modules/contrib/formassembly/src/Exception/FormAssemblyException.php
modules/contrib/formassembly/src/Form/FormAssemblyEntityDeleteForm.php
modules/contrib/formassembly/src/Form/FormAssemblyEntityForm.php
modules/contrib/formassembly/src/Form/FormAssemblyEntitySettingsForm.php
modules/contrib/formassembly/src/FormAssemblyBatchProcessor.php
modules/contrib/formassembly/src/FormAssemblyEntityAccessControlHandler.php
modules/contrib/formassembly/src/FormAssemblyEntityHtmlRouteProvider.php
modules/contrib/formassembly/src/FormAssemblyEntityListBuilder.php
modules/contrib/formassembly/src/FormAssemblyKeyService.php
modules/contrib/formassembly/src/FormAssemblyStorage.php
modules/contrib/formassembly/src/Plugin/KeyType/FormAssemblyOauth.php
modules/contrib/formassembly/tests/src/Functional/FormAssemblyLoadTest.php
modules/contrib/formassembly/tests/src/Unit/FormassemblyHtmlResponseAttachmentsProcessorTest.php

19 files with changes
=====================

1) modules/contrib/formassembly/tests/src/Unit/FormassemblyHtmlResponseAttachmentsProcessorTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\formassembly\Unit;

+use Prophecy\PhpUnit\ProphecyTrait;
+use PHPUnit\Framework\MockObject\MockObject;
+use Prophecy\Prophecy\ObjectProphecy;
 use Drupal\Core\Asset\AssetCollectionRendererInterface;
 use Drupal\Core\Asset\AssetResolverInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
@@ @@
  */
 class FormassemblyHtmlResponseAttachmentsProcessorTest extends UnitTestCase {

+  use ProphecyTrait;
   /**
    * A mock core html attachment processor.
    *
-   * @var \Drupal\Core\Render\AttachmentsResponseProcessorInterface|\PHPUnit_Framework_MockObject_MockObject
+   * @var AttachmentsResponseProcessorInterface|MockObject
    */
   protected $attachmentProcessor;

@@ @@
   /**
    * A mock asset resolver service.
    *
-   * @var \Prophecy\Prophecy\ObjectProphecy
+   * @var ObjectProphecy
    */
   protected $assetResolver;

@@ @@
   /**
    * A mock CSS collection renderer.
    *
-   * @var \Prophecy\Prophecy\ObjectProphecy
+   * @var ObjectProphecy
    */
   protected $cssCollectionRenderer;

@@ @@
   /**
    * A mock JS collection renderer.
    *
-   * @var \Prophecy\Prophecy\ObjectProphecy
+   * @var ObjectProphecy
    */
   protected $jsCollectionRenderer;

@@ @@
   /**
    * A mock RequestStack.
    *
-   * @var \Prophecy\Prophecy\ObjectProphecy
+   * @var ObjectProphecy
    */
   protected $requestStack;

@@ @@
   /**
    * A mock renderer.
    *
-   * @var \Prophecy\Prophecy\ObjectProphecy
+   * @var ObjectProphecy
    */
   protected $renderer;

@@ @@
   /**
    * A mock module handler.
    *
-   * @var \Prophecy\Prophecy\ObjectProphecy
+   * @var ObjectProphecy
    */
   protected $moduleHandler;

@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Mock core attachment processor.
-    $this->attachmentProcessor = $this->getMockBuilder(AttachmentsResponseProcessorInterface::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->attachmentProcessor = $this->createMock(AttachmentsResponseProcessorInterface::class);
     $this->attachmentProcessor->method('processAttachments')
       ->willReturnArgument(0);
     $this->assetResolver = $this->prophesize(AssetResolverInterface::class);
@@ @@
   /**
    * Creates a FormassemblyHtmlResponseAttachmentsProcessor object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   A mock config factory that can contain 'dfp.settings' configuration.
    *
-   * @return \Drupal\formassembly\Component\Render\FormassemblyHtmlResponseAttachmentsProcessor
+   * @return FormassemblyHtmlResponseAttachmentsProcessor
    *   The DfpHtmlResponseAttachmentsProcessor object.
    */
   protected function getFormassemblyAttachmentProcessor(ConfigFactoryInterface $config_factory) {
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * AddProphecyTraitRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/formassembly/tests/src/Functional/FormAssemblyLoadTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\formassembly\Functional;

+use Drupal\user\UserInterface;
 use Drupal\Core\Url;
 use Drupal\Tests\BrowserTestBase;

@@ @@
   /**
    * A user with permission to administer site configuration.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $user;

@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser([
       'administer site configuration',
@@ @@
    */
   public function testLoad() {
     $this->drupalGet(Url::fromRoute('fa_form.settings'));
-    $this->assertResponse(200);
+    $this->assertSession()->statusCodeEquals(200);
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertResponseRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/formassembly/src/FormAssemblyStorage.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly;

+use Drupal\Core\Entity\EntityStorageException;
+use Drupal\formassembly\Entity\FormAssemblyEntity;
 use Drupal\Core\Entity\Sql\SqlContentEntityStorage;

 /**
@@ @@
    * @param array $faidEnabled
    *   The name of the entity property.
    *
-   * @throws \Drupal\Core\Entity\EntityStorageException
+   * @throws EntityStorageException
    */
   public function disableInactive(array $faidEnabled) {
     $query = $this->database->select($this->baseTable, 'fa');
@@ @@
     $missingForms = $query->execute()->fetchCol();
     $toDisable = $this->loadMultiple($missingForms);
     foreach ($toDisable as $entity) {
-      /** @var \Drupal\formassembly\Entity\FormAssemblyEntity $entity */
+      /** @var FormAssemblyEntity $entity */
       $entity->disable()->save();
     }
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/formassembly/src/FormAssemblyKeyService.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly;

+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\key\Entity\Key;
 use Drupal\key\KeyRepositoryInterface;
@@ @@
   /**
    * Config for the oauth credentials.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   protected $oauthConfig;

@@ @@
   /**
    * KeyService constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   Injected service.
    */
   public function __construct(ConfigFactoryInterface $config_factory) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


5) modules/contrib/formassembly/src/FormAssemblyEntityHtmlRouteProvider.php:44

    ---------- begin diff ----------
@@ @@
   /**
    * Gets the collection route.
    *
-   * @param \Drupal\Core\Entity\EntityTypeInterface $entity_type
+   * @param EntityTypeInterface $entity_type
    *   The entity type.
    *
-   * @return \Symfony\Component\Routing\Route|null
+   * @return Route|null
    *   The generated route, if available.
    */
   protected function getCollectionRoute(EntityTypeInterface $entity_type) {
@@ @@
   /**
    * Gets the settings form route.
    *
-   * @param \Drupal\Core\Entity\EntityTypeInterface $entity_type
+   * @param EntityTypeInterface $entity_type
    *   The entity type.
    *
-   * @return \Symfony\Component\Routing\Route|null
+   * @return Route|null
    *   The generated route, if available.
    */
   protected function getSettingsFormRoute(EntityTypeInterface $entity_type) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/formassembly/src/FormAssemblyEntityAccessControlHandler.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly;

+use Drupal\formassembly\Entity\FormAssemblyEntityInterface;
 use Drupal\Core\Entity\EntityAccessControlHandler;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Session\AccountInterface;
@@ @@
    * {@inheritdoc}
    */
   protected function checkAccess(EntityInterface $entity, $operation, AccountInterface $account) {
-    /** @var \Drupal\formassembly\Entity\FormAssemblyEntityInterface $entity */
+    /** @var FormAssemblyEntityInterface $entity */
     switch ($operation) {
       case 'view':
         return AccessResult::allowedIfHasPermission($account, 'view formassembly form entities');
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/formassembly/src/FormAssemblyBatchProcessor.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly;

+use Drupal\Component\Uuid\Php;
 use Drupal\Component\Uuid\UuidInterface;
 use Drupal\Core\StringTranslation\StringTranslationTrait;
 use Drupal\Core\StringTranslation\TranslationInterface;
@@ @@
   /**
    * Injected Sync service.
    *
-   * @var \Drupal\formassembly\ApiSync
+   * @var ApiSync
    */
   protected $apiSync;

@@ @@
   /**
    * Injected UUID service.
    *
-   * @var \Drupal\Component\Uuid\Php
+   * @var Php
    */
   protected $uuid;

@@ @@
   /**
    * FormAssemblyBatchProcessor constructor.
    *
-   * @param \Drupal\formassembly\ApiSync $apiSync
+   * @param ApiSync $apiSync
    *   Injected service.
-   * @param \Drupal\Component\Uuid\UuidInterface $uuid
+   * @param UuidInterface $uuid
    *   Injected service.
-   * @param \Drupal\Core\StringTranslation\TranslationInterface $string_translation
+   * @param TranslationInterface $string_translation
    *   Injected service.
    */
   public function __construct(
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


8) modules/contrib/formassembly/src/Form/FormAssemblyEntitySettingsForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly\Form;

+use Drupal\formassembly\ApiAuthorize;
+use Drupal\formassembly\FormAssemblyKeyService;
+use Drupal\Core\Config\Config;
+use Drupal\Core\Config\ImmutableConfig;
+use Drupal\Core\Utility\LinkGeneratorInterface;
 use Drupal\Core\Form\ConfigFormBaseTrait;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
@@ @@
   /**
    * Injected authorization service.
    *
-   * @var \Drupal\formassembly\ApiAuthorize
+   * @var ApiAuthorize
    */
   protected $authorize;

@@ @@
   /**
    * Injected key service.
    *
-   * @var \Drupal\formassembly\FormAssemblyKeyService
+   * @var FormAssemblyKeyService
    */
   protected $keyService;

@@ @@
   /**
    * FormAssemblyEntity config.
    *
-   * @var \Drupal\Core\Config\Config|\Drupal\Core\Config\ImmutableConfig
+   * @var Config|ImmutableConfig
    */
   protected $formassemblyConfig;

@@ @@
   /**
    * Injected service.
    *
-   * @var \Drupal\Core\Utility\LinkGeneratorInterface
+   * @var LinkGeneratorInterface
    */
   protected $linkGenerator;

@@ @@
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    */
   public function submitForm(array &$form, FormStateInterface $form_state) {
-    /** @var \Drupal\Core\Config\Config $formassembly_config */
+    /** @var Config $formassembly_config */
     $values = $form_state->getValues();
     $config = [
       'endpoint' => $values['endpoint'],
@@ @@
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/formassembly/src/Form/FormAssemblyEntityForm.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * Formassembly markup service.
    *
-   * @var \Drupal\formassembly\ApiMarkup
+   * @var ApiMarkup
    */
   protected $markup;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/formassembly/src/Entity/FormAssemblyEntityViewBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly\Entity;

+use Drupal\formassembly\ApiMarkup;
+use Psr\Log\LoggerInterface;
+use Drupal\Core\PageCache\ResponsePolicy\KillSwitch;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\Core\Entity\EntityViewBuilder;
@@ @@
   /**
    * Formassembly markup service.
    *
-   * @var \Drupal\formassembly\ApiMarkup
+   * @var ApiMarkup
    */
   protected $markup;

@@ @@
   /**
    * Default logger channel.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;

@@ @@
   /**
    * Injected service.
    *
-   * @var \Drupal\Core\PageCache\ResponsePolicy\KillSwitch
+   * @var KillSwitch
    */
   protected $killSwitch;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/formassembly/src/Entity/FormAssemblyEntityInterface.php:88

    ---------- begin diff ----------
@@ @@
   /**
    * Sets fa_form status to 1-published.
    *
-   * @return \Drupal\formassembly\Entity\FormAssemblyEntity
+   * @return FormAssemblyEntity
    *   The called FormAssembly Form entity.
    */
   public function enable();
@@ @@
   /**
    * Sets fa_form status to 0-unpublished.
    *
-   * @return \Drupal\formassembly\Entity\FormAssemblyEntity
+   * @return FormAssemblyEntity
    *   The called FormAssembly Form entity.
    */
   public function disable();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


12) modules/contrib/formassembly/src/Controller/OauthInteractions.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly\Controller;

+use Symfony\Component\HttpFoundation\Request;
+use Drupal\formassembly\ApiAuthorize;
+use Drupal\Core\Messenger\Messenger;
+use Drupal\formassembly\FormAssemblyKeyService;
+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Controller\ControllerBase;
 use Drupal\Core\Url;
 use Symfony\Component\HttpFoundation\RedirectResponse;
@@ @@
   /**
    * Injected service.
    *
-   * @var \Symfony\Component\HttpFoundation\Request
+   * @var Request
    */
   protected $currentRequest;

@@ @@
   /**
    * Injected service.
    *
-   * @var \Drupal\formassembly\ApiAuthorize
+   * @var ApiAuthorize
    */
   protected $apiAuthorize;

@@ @@
   /**
    * Injected service.
    *
-   * @var \Drupal\Core\Messenger\Messenger
+   * @var Messenger
    */
   protected $messenger;

@@ @@
   /**
    * Service to obtain oauth credentials.
    *
-   * @var \Drupal\formassembly\FormAssemblyKeyService
+   * @var FormAssemblyKeyService
    */
   protected $keyService;

@@ @@
    * Assemble the authorization url and redirect to it.
    */
   public function authorize() {
-    /** @var \Drupal\Core\Config\ImmutableConfig $formassembly_config */
+    /** @var ImmutableConfig $formassembly_config */
     $credentials = $this->keyService->getOauthKeys();
     $provider = new OauthProvider([
       'clientId' => $credentials['cid'],
@@ @@
    * @throws \Exception
    *   Re-throws any caught exception after sending a message to the user.
    *
-   * @return \Symfony\Component\HttpFoundation\RedirectResponse
+   * @return RedirectResponse
    *   Redirect to the settings form.
    */
   public function code() {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/formassembly/src/Component/Render/FormassemblyHtmlResponseAttachmentsProcessor.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * The HTML response attachments processor service.
    *
-   * @var \Drupal\Core\Render\AttachmentsResponseProcessorInterface
+   * @var AttachmentsResponseProcessorInterface
    */
   protected $htmlResponseAttachmentsProcessor;

@@ @@
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * Constructs a DfpResponseAttachmentsProcessor object.
    *
-   * @param \Drupal\Core\Render\AttachmentsResponseProcessorInterface $html_response_attachments_processor
+   * @param AttachmentsResponseProcessorInterface $html_response_attachments_processor
    *   The HTML response attachments processor service.
-   * @param \Drupal\Core\Asset\AssetResolverInterface $asset_resolver
+   * @param AssetResolverInterface $asset_resolver
    *   An asset resolver.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   A config factory for retrieving required config objects.
-   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $css_collection_renderer
+   * @param AssetCollectionRendererInterface $css_collection_renderer
    *   The CSS asset collection renderer.
-   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $js_collection_renderer
+   * @param AssetCollectionRendererInterface $js_collection_renderer
    *   The JS asset collection renderer.
-   * @param \Symfony\Component\HttpFoundation\RequestStack $request_stack
+   * @param RequestStack $request_stack
    *   The request stack.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler service.
    */
   public function __construct(AttachmentsResponseProcessorInterface $html_response_attachments_processor, AssetResolverInterface $asset_resolver, ConfigFactoryInterface $config_factory, AssetCollectionRendererInterface $css_collection_renderer, AssetCollectionRendererInterface $js_collection_renderer, RequestStack $request_stack, RendererInterface $renderer, ModuleHandlerInterface $module_handler) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/formassembly/src/Commands/FormassemblyCommands.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly\Commands;

+use Symfony\Component\Console\Helper\ProgressBar;
 use Drupal\formassembly\FormAssemblyBatchProcessor;
 use Drush\Commands\DrushCommands;

@@ @@
   /**
    * Injected Sync service.
    *
-   * @var \Drupal\formassembly\FormAssemblyBatchProcessor
+   * @var FormAssemblyBatchProcessor
    */
   protected $batchProcessor;

@@ @@
   /**
    * Symfony progress bar component.
    *
-   * @var \Symfony\Component\Console\Helper\ProgressBar
+   * @var ProgressBar
    */
   protected $progressBar;

@@ @@
   /**
    * FormassemblyCommands constructor.
    *
-   * @param \Drupal\formassembly\FormAssemblyBatchProcessor $batchProcessor
+   * @param FormAssemblyBatchProcessor $batchProcessor
    *   Our batch processing service.
    */
   public function __construct(FormAssemblyBatchProcessor $batchProcessor) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/formassembly/src/ApiSync.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly;

+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
+use Drupal\formassembly\Entity\FormAssemblyEntity;
 use Drupal\Core\Cache\CacheBackendInterface;
 use Drupal\Core\Config\ConfigFactory;
 use Drupal\Component\Utility\Xss;
@@ @@
   /**
    * GuzzleHttp\Client definition.
    *
-   * @var \GuzzleHttp\Client
+   * @var Client
    */
   protected $httpClient;

@@ @@
   /**
    * FormAssembly storage..
    *
-   * @var \Drupal\formassembly\FormAssemblyStorage
+   * @var FormAssemblyStorage
    */
   protected $faStorage;

@@ @@
   /**
    * Injected authorization service.
    *
-   * @var \Drupal\formassembly\ApiAuthorize
+   * @var ApiAuthorize
    */
   protected $authorize;

@@ @@
   /**
    * Injected service for fasync cache.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cache;

@@ @@
   /**
    * ApiSync constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactory $config_factory
+   * @param ConfigFactory $config_factory
    *   Injected config service.
-   * @param \Psr\Log\LoggerInterface $loggerChannel
+   * @param LoggerInterface $loggerChannel
    *   Injected service.
    *   Injected service.
-   * @param \GuzzleHttp\Client $http_client
+   * @param Client $http_client
    *   Injected Guzzle client.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   Injected entity type service.
-   * @param \Drupal\formassembly\ApiAuthorize $authorize
+   * @param ApiAuthorize $authorize
    *   Injected api service.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cacheBackend
+   * @param CacheBackendInterface $cacheBackend
    *   Injected service.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function __construct(
     ConfigFactory $config_factory,
@@ @@
   /**
    * Helper method for getting forms from the admin index.
    *
-   * @throws \Drupal\formassembly\Exception\FormAssemblyException
+   * @throws FormAssemblyException
    *   If the request is not returned in proper form.
    * @throws \UnexpectedValueException
    *   If an http return code other than 200 is received.
@@ @@
   /**
    * Helper method for getting forms from the standard index.
    *
-   * @throws \Drupal\formassembly\Exception\FormAssemblyException
+   * @throws FormAssemblyException
    *   If the request is not returned in proper form.
    * @throws \UnexpectedValueException
    *   If an http return code other than 200 is received.
@@ @@
         if (!empty($searchByFaId)) {
           // There should only be one item - faid is a unique key so pop
           // the first item off the array.
-          /** @var \Drupal\formassembly\Entity\FormAssemblyEntity $formAssemblyEntity */
+          /** @var FormAssemblyEntity $formAssemblyEntity */
           $formAssemblyEntity = array_shift($searchByFaId);
           // Update forms that have changed since the last sync.
           if ($formAssemblyEntity->getModifiedTime() < $formData['modified']) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/formassembly/src/ApiMarkup.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * GuzzleHttp\Client definition.
    *
-   * @var \GuzzleHttp\Client
+   * @var Client
    */
   protected $httpClient;

@@ @@
   /**
    * Injected authorization service.
    *
-   * @var \Drupal\formassembly\ApiAuthorize
+   * @var ApiAuthorize
    */
   protected $authorize;

@@ @@
   /**
    * Injected service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;

@@ @@
   /**
    * Injected service.
    *
-   * @var \Drupal\Core\Utility\Token
+   * @var Token
    */
   protected $tokens;

@@ @@
   /**
    * Injected Service.
    *
-   * @var \Drupal\Core\Routing\RouteMatchInterface
+   * @var RouteMatchInterface
    */
   protected $routeMatch;

@@ @@
   /**
    * Injected Service.
    *
-   * @var \Drupal\Core\Session\AccountProxyInterface
+   * @var AccountProxyInterface
    */
   protected $userProxy;

@@ @@
   /**
    * ApiSync constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactory $config_factory
+   * @param ConfigFactory $config_factory
    *   Injected config service.
-   * @param \Psr\Log\LoggerInterface $loggerChannel
+   * @param LoggerInterface $loggerChannel
    *   Injected service.
-   * @param \GuzzleHttp\Client $http_client
+   * @param Client $http_client
    *   Injected Guzzle client.
-   * @param \Drupal\formassembly\ApiAuthorize $authorize
+   * @param ApiAuthorize $authorize
    *   Injected api service.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $moduleHandler
+   * @param ModuleHandlerInterface $moduleHandler
    *   Injected service.
-   * @param \Drupal\Core\Utility\Token $tokenService
+   * @param Token $tokenService
    *   Injected service.
-   * @param \Drupal\Core\Routing\RouteMatchInterface $routeMatch
+   * @param RouteMatchInterface $routeMatch
    *   Injected service.
-   * @param \Drupal\Core\Session\AccountProxyInterface $userProxy
+   * @param AccountProxyInterface $userProxy
    *   Injected service.
    */
   public function __construct(
@@ @@
    * hook_formassembly_form_params_alter(&$params) to allow modules to modify
    * the passed parameter list.
    *
-   * @param \Drupal\formassembly\Entity\FormAssemblyEntity $entity
+   * @param FormAssemblyEntity $entity
    *   Entity form object.
    *
    * @return string
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/formassembly/src/ApiBase.php:51

    ---------- begin diff ----------
@@ @@
   /**
    * Injected config service.
    *
-   * @var \Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $configFactory;

@@ @@
   /**
    * Default logger channel.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;

@@ @@
   /**
    * ApiBase constructor. No matching create() method - used to build services.
    *
-   * @param \Drupal\Core\Config\ConfigFactory $config_factory
+   * @param ConfigFactory $config_factory
    *   Injected config service.
    * @param \Drupal\formassembly\LoggerInterface $loggerChannel
    *   Injected logging service.
@@ @@
    * @param string $segment
    *   A string key to indicate which path to use.
    *
-   * @return \Drupal\Core\Url
+   * @return Url
    *   A url object configured for the proper endpoint.
    */
   public function getUrl($segment) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


18) modules/contrib/formassembly/src/ApiAuthorize.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\formassembly;

+use League\OAuth2\Client\Token\AccessToken;
 use Drupal\Core\Url;
 use Drupal\Core\Config\ConfigFactory;
 use Drupal\Core\State\StateInterface as State;
@@ @@
   /**
    * Service to obtain oauth credentials.
    *
-   * @var \Drupal\formassembly\FormAssemblyKeyService
+   * @var FormAssemblyKeyService
    */
   protected $keyService;

@@ @@
   /**
    * ApiAuthorize constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactory $config_factory
+   * @param ConfigFactory $config_factory
    *   Injected ConfigFactory service.
-   * @param \Psr\Log\LoggerInterface $loggerChannel
+   * @param LoggerInterface $loggerChannel
    *   Injected Logger service.
    * @param \Drupal\Core\State\StateInterface $state
    *   Injected State service.
-   * @param \Drupal\formassembly\FormAssemblyKeyService $keyService
+   * @param FormAssemblyKeyService $keyService
    *   Injected Key service.
    */
   public function __construct(
@@ @@
    *   Any exception passed through from the Oauth request.
    */
   public function getToken() {
-    /** @var \League\OAuth2\Client\Token\AccessToken $accessToken */
+    /** @var AccessToken $accessToken */
     $accessToken = $this->state->get('fa_form.access_token');
     if ($accessToken->hasExpired()) {
       // Get the provider.
@@ @@
    *   If there is such a valid token.
    */
   public function isAuthorized() {
-    /** @var \League\OAuth2\Client\Token\AccessToken $accessToken */
+    /** @var AccessToken $accessToken */
     $accessToken = $this->state->get('fa_form.access_token');
     return isset($accessToken) && !$accessToken->hasExpired();
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


19) modules/contrib/formassembly/formassembly.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\formassembly\FormAssemblyBatchProcessor;
 /**
  * @file
  * Procedural code for formassembly module.
@@ @@
  * Implementation of callback_batch_operation()
  */
 function formassembly_batch_get_forms(&$context) {
-  /** @var \Drupal\formassembly\FormAssemblyBatchProcessor $batchProcessor */
+  /** @var FormAssemblyBatchProcessor $batchProcessor */
   $batchProcessor = \Drupal::service('formassembly.batch');
   if (empty($context['sandbox'])) {
     // Batch has not run before.  Initialize.
@@ @@
  * Implementation of  callback_batch_finished()
  */
 function formassembly_batch_finished($success, $results, $operations) {
-  /** @var \Drupal\formassembly\FormAssemblyBatchProcessor $batchProcessor */
+  /** @var FormAssemblyBatchProcessor $batchProcessor */
   $batchProcessor = \Drupal::service('formassembly.batch');
   if ($success) {
     $batchProcessor->batchPostProcess($results['sync_id']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


 [ERROR] Could not process                                                      
         "modules/contrib/formassembly/src/Plugin/KeyType/FormAssemblyOauth.php"
         file, due to:                                                          
         "Analyze error: "Class                                                 
         Drupal\key\Plugin\KeyType\AuthenticationMultivalueKeyType not found.". 
         Include your files in "$rectorConfig->autoloadPaths([...]);" or        
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

 [ERROR] Could not process                                                      
         "modules/contrib/formassembly/src/Command/SyncCommand.php" file, due to: 
         "Analyze error: "Class Drupal\Console\Core\Command\ContainerAwareCommand
         not found.". Include your files in                                     
         "$rectorConfig->autoloadPaths([...]);" or                              
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

