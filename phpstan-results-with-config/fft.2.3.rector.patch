diff --git a/fft.module b/fft.module
index 4a69feb..b59cf1b 100644
--- a/fft.module
+++ b/fft.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\text\Plugin\Field\FieldType\TextWithSummaryItem;
 /**
  * @file
  * Field formatter template.
@@ -37,7 +38,7 @@ function fft_realpath($file, $template_file = '') {
 
   if (strpos($file, '{theme}') !== FALSE) {
     $theme_default = $GLOBALS['conf']['theme_default'];
-    $theme_path = drupal_get_path('theme', $theme_default);
+    $theme_path = \Drupal::service('extension.list.theme')->getPath($theme_default);
     $file = str_replace('{theme}', $theme_path, $file);
     return $file;
   }
@@ -48,7 +49,9 @@ function fft_realpath($file, $template_file = '') {
   foreach ($types as $type) {
     $pattern = '/\{' . $type . '-(.+)\}/';
     preg_match($pattern, $file, $matches);
-    if (count($matches) > 1 && ($path = drupal_get_path($type, $matches[1])) != '') {
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Unsupported extension type encountered, using extension.path.resolver instead of extension.list
+    if (count($matches) > 1 && ($path = \Drupal::service('extension.path.resolver')->getPath($type, $matches[1])) != '') {
       $file = str_replace($matches[0], $path, $file);
       return $file;
     }
@@ -139,7 +142,7 @@ function fft_field_formatter_render($entity, $field_type, $items, array $setting
       foreach ($items as $delta => $item) {
         $image_uri = $item->entity->getFileUri();
         $image['uri'] = $image_uri;
-        $image['path'] = file_create_url($image_uri);
+        $image['path'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_uri);
         foreach (['width', 'height', 'alt'] as $key) {
           $image["$key"] = $item->$key;
         }
@@ -161,7 +164,7 @@ function fft_field_formatter_render($entity, $field_type, $items, array $setting
     case 'text_long':
     case 'text_with_summary':
       foreach ($items as $delta => $item) {
-        /** @var \Drupal\text\Plugin\Field\FieldType\TextWithSummaryItem $item */
+        /** @var TextWithSummaryItem $item */
         $data[] = [
           'text' => !empty($item->processed) ? $item->processed : '',
           'summary' => !empty($item->summary_processed) ? $item->summary_processed : '',
@@ -234,7 +237,7 @@ function fft_field_styled_image_url($image, $style) {
   $image_uri = $image->entity->getFileUri();
   $image_filepath = $style->buildUri($image_uri);
   $style->createDerivative($image_uri, $image_filepath);
-  $image_info['path'] = file_create_url($image_filepath);
+  $image_info['path'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_filepath);
   // Determine the dimensions of the styled image.
   $dimensions = [
     'width' => $image->width,
diff --git a/modules/vff/vff.theme.inc b/modules/vff/vff.theme.inc
index 390d5bd..7af736f 100644
--- a/modules/vff/vff.theme.inc
+++ b/modules/vff/vff.theme.inc
@@ -1,5 +1,7 @@
 <?php
 
+use Drupal\views\ViewExecutable;
+use Drupal\vff\Plugin\views\style\ViewFormatterTemplate;
 /**
  * @file
  * Preprocess formatter template.
@@ -57,10 +59,10 @@ function vff_build_tree(array $flat, $idField = 'id', $parentIdField = 'parentId
  *   The array variables.
  */
 function template_preprocess_views_formatter_template(array &$variables) {
-  /** @var \Drupal\views\ViewExecutable $view */
+  /** @var ViewExecutable $view */
   $view = $variables['view'];
   $rows = $variables['rows'];
-  /** @var \Drupal\vff\Plugin\views\style\ViewFormatterTemplate $style */
+  /** @var ViewFormatterTemplate $style */
   $style = $view->style_plugin;
   $options = $style->options;
   $template_file = fft_storage_dir() . "/" . $options['template'];
diff --git a/src/Event/PreProcess.php b/src/Event/PreProcess.php
index ef4fad2..d160128 100644
--- a/src/Event/PreProcess.php
+++ b/src/Event/PreProcess.php
@@ -2,7 +2,7 @@
 
 namespace Drupal\fft\Event;
 
-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;
 
 /**
  * Class PreProcess.
