modules/contrib/shortcode/shortcode_basic_tags/shortcode_basic_tags.module
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/BlockShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/ButtonShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/ClearShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/DropcapShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/HighlightShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/ImageShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/ItemShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/LinkShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/QuoteShortcode.php
modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/RandomShortcode.php
modules/contrib/shortcode/shortcode_example/src/Plugin/Shortcode/BootstrapColumnShortcode.php
modules/contrib/shortcode/src/Annotation/Shortcode.php
modules/contrib/shortcode/src/Plugin/Filter/Shortcode.php
modules/contrib/shortcode/src/Plugin/Filter/ShortcodeCorrector.php
modules/contrib/shortcode/src/Plugin/ShortcodeBase.php
modules/contrib/shortcode/src/Plugin/ShortcodeInterface.php
modules/contrib/shortcode/src/ShortcodePluginManager.php
modules/contrib/shortcode/src/ShortcodeService.php
modules/contrib/shortcode/tests/src/Functional/ShortcodeTest.php

9 files with changes
====================

1) modules/contrib/shortcode/tests/src/Functional/ShortcodeTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\shortcode\Functional;

+use Drupal\shortcode\ShortcodeService;
+use Drupal\Core\GeneratedUrl;
 use Drupal\Tests\BrowserTestBase;
 use Drupal\Core\Url;

@@ @@
   /**
    * The shortcode service.
    *
-   * @var \Drupal\shortcode\ShortcodeService
+   * @var ShortcodeService
    */
   private $shortcodeService;

@@ @@
   /**
    * Url of the site.
    *
-   * @var \Drupal\Core\GeneratedUrl|string
+   * @var GeneratedUrl|string
    */
   private $siteUrl;

@@ @@
   /**
    * Perform any initial set up tasks that run before every test method.
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();
     $this->shortcodeService = $this->container->get('shortcode');
     $this->siteUrl = Url::fromRoute('<front>', [], ["absolute" => TRUE])->toString();
@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@
     $test_input = '[highlight]highlighted text[/highlight]';
     $expected_output = '<span class="highlight">highlighted text</span>';
     $output = $this->shortcodeService->process($test_input);
-    $this->assertEqual($output, $expected_output, 'Highlight shortcode output matches.');
+    $this->assertEquals($output, $expected_output, 'Highlight shortcode output matches.');

     $test_input = '[highlight class="custom-class"]highlighted text[/highlight]';
     $expected_output = '<span class="custom-class highlight">highlighted text</span>';
     $output = $this->shortcodeService->process($test_input);
-    $this->assertEqual($output, $expected_output, 'Highlight shortcode with custom class output matches.');
+    $this->assertEquals($output, $expected_output, 'Highlight shortcode with custom class output matches.');
   }

   /**
@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@
     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
       $output = preg_replace('/\s+/', ' ', $output);
-      $this->assertEqual($output, $set['output'], $set['message']);
+      $this->assertEquals($output, $set['output'], $set['message']);
     }
   }

@@ @@

     foreach ($sets as $set) {
       $output = $this->shortcodeService->process($set['input']);
-      $this->assertEqual(strlen($output), $set['output'], $set['message']);
+      $this->assertEquals(strlen($output), $set['output'], $set['message']);
     }
   }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/shortcode/src/ShortcodeService.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\shortcode;

+use Drupal\Component\Plugin\PluginManagerInterface;
+use Drupal\shortcode\Plugin\ShortcodeInterface;
 use Drupal\filter\Plugin\FilterInterface;
 use Drupal\Core\Language\Language;

@@ @@
   /**
    * The devel dumper plugin manager.
    *
-   * @var \Drupal\shortcode\ShortcodePluginManager
+   * @var ShortcodePluginManager
    */
   protected $shortCodePluginManager;

@@ @@
   /**
    * Constructs a ShortcodeService object.
    *
-   * @param \Drupal\shortcode\ShortcodePluginManager $shortCodePluginManager
+   * @param ShortcodePluginManager $shortCodePluginManager
    *   The config factory service.
    */
   public function __construct(ShortcodePluginManager $shortCodePluginManager) {
@@ @@
    */
   public function loadShortcodePlugins() {

-    /** @var \Drupal\Component\Plugin\PluginManagerInterface $type */
+    /** @var PluginManagerInterface $type */
     $definitions_raw = $this->shortCodePluginManager->getDefinitions();

     $definitions = [];
@@ @@
   /**
    * Returns array of shortcode plugin definitions enabled for the filter.
    *
-   * @param \Drupal\filter\Plugin\FilterInterface $filter
+   * @param FilterInterface $filter
    *   The filter. Defaults to NULL, where all shortcode plugins will be
    *   returned.
    * @param bool $reset
@@ @@
    * @param string $shortcode_id
    *   The shorShortCodetcode plugin id.
    *
-   * @return \Drupal\shortcode\Plugin\ShortcodeInterface
+   * @return ShortcodeInterface
    *   The plugin instance.
    */
   public function getShortcodePlugin($shortcode_id) {
@@ @@
    *   The string containing shortcodes to be processed.
    * @param string $langcode
    *   The language code of the text to be filtered.
-   * @param \Drupal\filter\Plugin\FilterInterface $filter
+   * @param FilterInterface $filter
    *   The text filter.
    *
    * @return string
@@ @@
    *   Text to be processed.
    * @param string $langcode
    *   The language code of the text to be filtered.
-   * @param \Drupal\filter\Plugin\FilterInterface $filter
+   * @param FilterInterface $filter
    *   The filter plugin that triggered this process.
    *
    * @return string
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


3) modules/contrib/shortcode/src/ShortcodePluginManager.php:20

    ---------- begin diff ----------
@@ @@
    * @param \Traversable $namespaces
    *   An object that implements \Traversable which contains the root paths
    *   keyed by the corresponding namespace to look for plugin implementations.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   * @param CacheBackendInterface $cache_backend
    *   Cache backend instance to use.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler to invoke the alter hook with.
    */
   public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/shortcode/src/Plugin/ShortcodeInterface.php:39

    ---------- begin diff ----------
@@ @@
    *
    * @param array $form
    *   A minimally pre-populated form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The state of the (entire) configuration form.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


5) modules/contrib/shortcode/src/Plugin/ShortcodeBase.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\shortcode\Plugin;

+use Drupal\Component\Render\MarkupInterface;
 use Drupal\Component\Utility\Html;
 use Drupal\Component\Utility\UrlHelper;
 use Drupal\Core\Render\RendererInterface;
@@ @@
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;

@@ @@
    *   The plugin ID for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer service.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, RendererInterface $renderer) {
@@ @@
     $field_media = $this->getMediaField($media_entity);
     if ($field_media) {
       $file = $field_media->entity;
-      return file_create_url($file->getFileUri());
+      return \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
     }
     return FALSE;
   }
@@ @@
    * Loop through Drupal media file fields, and return a field object if
    * found.
    *
-   * @param \Drupal\media\Entity\Media $entity
+   * @param Media $entity
    *   Drupal media entity.
    *
    * @return mixed|object|bool
@@ @@
    * @param array $elements
    *   The structured array describing the data to be rendered.
    *
-   * @return \Drupal\Component\Render\MarkupInterface|mixed
+   * @return MarkupInterface|mixed
    *   Element stripped of any bubbleable metadata.
    */
   public function render(array &$elements) {
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/shortcode/src/Plugin/Filter/Shortcode.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\shortcode\Plugin\Filter;

+use Drupal\shortcode\ShortcodeService;
+use Drupal\shortcode\Plugin\ShortcodeInterface;
+use Drupal\shortcode\ShortcodePluginManager;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\filter\FilterProcessResult;
 use Drupal\filter\Plugin\FilterBase;
@@ @@
    */
   public function settingsForm(array $form, FormStateInterface $form_state) {

-    /** @var \Drupal\shortcode\ShortcodeService $shortcodeService */
+    /** @var ShortcodeService $shortcodeService */
     $shortcodeService = \Drupal::service('shortcode');
     $shortcodes = $shortcodeService->loadShortcodePlugins();

@@ @@
         return $b['weight'] - $a['weight'];
       });

-      /** @var \Drupal\shortcode\Plugin\ShortcodeInterface $shortcode */
+      /** @var ShortcodeInterface $shortcode */
       foreach ($sorted_shortcodes as $shortcode_id => $shortcode_info) {
         $settings[$shortcode_id] = [
           '#type' => 'checkbox',
@@ @@
    */
   public function process($text, $langcode) {
     if (!empty($text)) {
-      /** @var \Drupal\shortcode\ShortcodeService $shortcodeEngine */
+      /** @var ShortcodeService $shortcodeEngine */
       $shortcodeEngine = \Drupal::service('shortcode');
       $text = $shortcodeEngine->process($text, $langcode, $this);
     }
@@ @@
    */
   public function tips($long = FALSE) {

-    /** @var \Drupal\shortcode\ShortcodeService $type */
+    /** @var ShortcodeService $type */
     $type = \Drupal::service('shortcode');

     // todo: it duplicates the tips section.
     // Get enabled shortcodes for this text format.
     $shortcodes = $type->getShortcodePlugins($this);
-    /** @var \Drupal\shortcode\ShortcodePluginManager $type */
+    /** @var ShortcodePluginManager $type */
     $type = \Drupal::service('plugin.manager.shortcode');

     // Gather tips defined in all enabled plugins.
     $tips = [];
     foreach ($shortcodes as $shortcode_info) {
-      /** @var \Drupal\shortcode\Plugin\ShortcodeInterface $shortcode */
+      /** @var ShortcodeInterface $shortcode */
       $shortcode = $type->createInstance($shortcode_info['id']);
       $tips[] = $shortcode->tips($long);
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/shortcode/src/Annotation/Shortcode.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\shortcode\Annotation;

+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;

 /**
@@ @@
    *
    * This is used as an administrative summary of what the shortcode does.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    * @ingroup plugin_translatable
    */
   public $title;
@@ @@
   /**
    * Additional administrative information about the shortcode's behavior.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *  (optional)
    * @ingroup plugin_translatable
    */
    ----------- end diff -----------

Applied rules:
 * PseudoNamespaceToNamespaceRector


8) modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/ImageShortcode.php:41

    ---------- begin diff ----------
@@ @@
           $attributes['src'] = ImageStyle::load($attributes['imagestyle'])->buildUrl($properties['path']);
         }
         else {
-          $attributes['src'] = file_create_url($properties['path']);
+          $attributes['src'] = \Drupal::service('file_url_generator')->generateAbsoluteString($properties['path']);
         }
       }
       if ($properties['alt'] && !$attributes['alt']) {
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/shortcode/shortcode_basic_tags/src/Plugin/Shortcode/BlockShortcode.php:22

    ---------- begin diff ----------
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;

@@ @@
    *   The plugin ID for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer service.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
    */
   public function __construct(
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 9 files have been changed by Rector                                       

