diff --git a/src/Controller/WeMegaMenuAdminController.php b/src/Controller/WeMegaMenuAdminController.php
index 301f0ba..eb8a9a0 100644
--- a/src/Controller/WeMegaMenuAdminController.php
+++ b/src/Controller/WeMegaMenuAdminController.php
@@ -17,7 +17,7 @@ class WeMegaMenuAdminController extends ControllerBase {
     /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
@@ -30,10 +30,10 @@ class WeMegaMenuAdminController extends ControllerBase {
   /**
    * Constructs the WeMegaMenuAdminController.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory.
-   * 
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler.
    */
   public function __construct(ConfigFactoryInterface $config_factory, ModuleHandlerInterface $module_handler) {
@@ -102,7 +102,7 @@ class WeMegaMenuAdminController extends ControllerBase {
   public function resetConfigWeMegaMenu() {
     if (isset($_POST['action']) && $_POST['action'] == 'reset' && isset($_POST['menu_name']) && isset($_POST['theme'])) {
       $theme_array = WeMegaMenuBuilder::renderWeMegaMenuBlock($_POST['menu_name'], $_POST['theme']);
-      $markup = render($theme_array);
+      $markup = \Drupal::service('renderer')->render($theme_array);
       echo $markup;
       we_megamenu_flush_render_cache();
       exit;
@@ -115,7 +115,7 @@ class WeMegaMenuAdminController extends ControllerBase {
       $result = $query->execute();
       WeMegaMenuBuilder::initMegamenu($_POST['menu_name'], $_POST['theme']);
       $theme_array = WeMegaMenuBuilder::renderWeMegaMenuBlock($_POST['menu_name'], $_POST['theme']);
-      $markup = render($theme_array);
+      $markup = \Drupal::service('renderer')->render($theme_array);
       echo $markup;
       we_megamenu_flush_render_cache();
       exit;
diff --git a/src/WeMegaMenuBuilder.php b/src/WeMegaMenuBuilder.php
index eb5a2bc..5ad52ee 100644
--- a/src/WeMegaMenuBuilder.php
+++ b/src/WeMegaMenuBuilder.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\we_megamenu;
 
+use Drupal\Core\Menu\MenuLinkTreeElement;
 use Drupal\block\Entity\Block;
 use Drupal\views\Views;
 use Drupal;
@@ -13,14 +14,14 @@ class WeMegaMenuBuilder {
    *
    * @param string $menu_name
    *   Public static function getMenuTree menu_name.
-   * @param \Drupal\Core\Menu\MenuLinkTreeElement $items
+   * @param MenuLinkTreeElement $items
    *   Public static function getMenuTree items.
    * @param int $level
    *   Public static function getMenuTree level.
    *
    * @return array
    *   Public static function getMenuTree array.
-  */
+   */
   public static function getMenuTree($menu_name, $backend = TRUE, $items = [], $level = 0) {
     $result = [];
     if ($level == 0) {
@@ -255,7 +256,7 @@ class WeMegaMenuBuilder {
         $html .= '<div class="type-of-block">';
         $html .= '<div class="block-inner">';
         $html .= $title_enable ? '<h2>' . $title . '</h2>' : '';
-        $html .= render($block_content);
+        $html .= \Drupal::service('renderer')->render($block_content);
         $html .= '</div>';
         $html .= '</div>';
       }
diff --git a/we_megamenu.install b/we_megamenu.install
index 307f364..b4ad153 100644
--- a/we_megamenu.install
+++ b/we_megamenu.install
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Database\Database;
 /**
  * @file
  * Create table we_megamenu().
@@ -37,6 +38,6 @@ function we_megamenu_schema() {
  */
 function we_megamenu_update_8101() {
   $sql = 'ALTER TABLE `we_megamenu` CHANGE `data_config` `data_config` LONGTEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL';
-  \Drupal\Core\Database\Database::getConnection()
+  Database::getConnection()
     ->query($sql);
-}
\ No newline at end of file
+}
