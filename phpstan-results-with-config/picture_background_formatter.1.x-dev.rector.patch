diff --git a/picture_background_formatter.info.yml b/picture_background_formatter.info.yml
index 84bbe55..ee3062c 100644
--- a/picture_background_formatter.info.yml
+++ b/picture_background_formatter.info.yml
@@ -1,7 +1,6 @@
 name: 'Picture Background Formatter'
 description: 'Provides an image field formatter to generate responsive background images.'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - responsive_image
 package: Media
diff --git a/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatter.php b/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatter.php
index f7cd6c7..7486a9b 100644
--- a/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatter.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\picture_background_formatter\Plugin\Field\FieldFormatter;
 
+use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Cache\Cache;
 use Drupal\Component\Utility\Html;
 use Drupal\Core\Field\FieldItemInterface;
@@ -103,9 +104,9 @@ class PictureBackgroundFormatter extends ResponsiveImageFormatter implements Con
   /**
    * Build the inline css style based on a set of files and a selector.
    *
-   * @param \Drupal\Core\Entity\EntityInterface[] $files
+   * @param EntityInterface[] $files
    *   The array of referenced files to display, keyed by delta.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The parent entity the field belongs to. Used for token replacement in the
    *   selector.
    *
@@ -184,7 +185,7 @@ class PictureBackgroundFormatter extends ResponsiveImageFormatter implements Con
           }
 
           if ($mapping['image_mapping'] == "_original image_") {
-            $url = file_create_url($image->getFileUri());
+            $url = \Drupal::service('file_url_generator')->generateAbsoluteString($image->getFileUri());
           }
           else {
             $url = ImageStyle::load($mapping['image_mapping'])->buildUrl($image->getFileUri());
diff --git a/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatterMedia.php b/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatterMedia.php
index dcc8384..8a12714 100644
--- a/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatterMedia.php
+++ b/src/Plugin/Field/FieldFormatter/PictureBackgroundFormatterMedia.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\picture_background_formatter\Plugin\Field\FieldFormatter;
 
+use Drupal\media\MediaInterface;
 use Drupal\Core\Field\FieldItemListInterface;
 use Drupal\Core\Field\Plugin\Field\FieldType\EntityReferenceItem;
 use Drupal\Core\Field\FieldDefinitionInterface;
@@ -45,7 +46,7 @@ class PictureBackgroundFormatterMedia extends PictureBackgroundFormatter {
     // The parent entity, used for token replacement in the selector.
     $entity = $items->getEntity();
 
-    /** @var \Drupal\media\MediaInterface $media_item */
+    /** @var MediaInterface $media_item */
     foreach ($media as $delta => $media_item) {
       $type_configuration = method_exists($media_item, 'getSource') ? $media_item->getSource()->getConfiguration() : $media_item->getType()->getConfiguration();
 
