diff --git a/image_domain_filter.info.yml b/image_domain_filter.info.yml
index 9a22c6e..f4c5248 100644
--- a/image_domain_filter.info.yml
+++ b/image_domain_filter.info.yml
@@ -2,5 +2,5 @@ name: Image Domain Filter
 type: module
 description: "Provides a text filter allowing images to be restricted to trusted hosts."
 package: Filters
-core_version_requirement: '^8 || ^9'
+core_version_requirement: ^9.3 || ^10
 configure: image_domain_filter.admin_settings
diff --git a/src/FlattenHostsTrait.php b/src/FlattenHostsTrait.php
index 60697c5..55ac9de 100644
--- a/src/FlattenHostsTrait.php
+++ b/src/FlattenHostsTrait.php
@@ -14,7 +14,7 @@ trait FlattenHostsTrait {
    *
    * @param array $element
    *   The form element.
-   * @param \Drupal\Core\Form\FormStateInterface $formState
+   * @param FormStateInterface $formState
    *   The form state.
    */
   public static function expandHosts(array $element, FormStateInterface $formState) {
diff --git a/src/Form/ImageDomainFilterSettingsForm.php b/src/Form/ImageDomainFilterSettingsForm.php
index d647c1f..059b800 100644
--- a/src/Form/ImageDomainFilterSettingsForm.php
+++ b/src/Form/ImageDomainFilterSettingsForm.php
@@ -22,16 +22,16 @@ class ImageDomainFilterSettingsForm extends ConfigFormBase {
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * ImageDomainFilterSettingsForm constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The factory for configuration objects.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
+   * @param EntityTypeManagerInterface $entityTypeManager
    *   The entity type manager service.
    */
   public function __construct(ConfigFactoryInterface $config_factory, EntityTypeManagerInterface $entityTypeManager) {
diff --git a/src/Plugin/Filter/ImageDomainFilter.php b/src/Plugin/Filter/ImageDomainFilter.php
index 921f201..3eb39a3 100644
--- a/src/Plugin/Filter/ImageDomainFilter.php
+++ b/src/Plugin/Filter/ImageDomainFilter.php
@@ -39,14 +39,14 @@ class ImageDomainFilter extends FilterBase implements ContainerFactoryPluginInte
   /**
    * The configuration factory service.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * The module handler service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;
 
@@ -59,9 +59,9 @@ class ImageDomainFilter extends FilterBase implements ContainerFactoryPluginInte
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The configuration factory service.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $moduleHandler
+   * @param ModuleHandlerInterface $moduleHandler
    *   The module handler service.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, ConfigFactoryInterface $configFactory, ModuleHandlerInterface $moduleHandler) {
@@ -216,7 +216,7 @@ class ImageDomainFilter extends FilterBase implements ContainerFactoryPluginInte
     $base_path_length = mb_strlen($base_path);
     $local_dir = \Drupal::root() . '/';
 
-    $src = file_url_transform_relative($src);
+    $src = \Drupal::service('file_url_generator')->transformRelative($src);
     if (mb_substr($src, 0, $base_path_length) != $base_path) {
       return FALSE;
     }
