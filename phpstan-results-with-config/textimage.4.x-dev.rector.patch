diff --git a/composer.json b/composer.json
index 4bbb12e..5edd385 100644
--- a/composer.json
+++ b/composer.json
@@ -3,8 +3,8 @@
     "type": "drupal-module",
     "description": "Provides Text and Image field formatters, and an API, to allow building image styles with variable text.",
     "require": {
-        "drupal/core": "^9.2",
-        "drupal/image_effects": "^3.2"
+        "drupal/image_effects": "^3.2",
+        "drupal/core": "^9.3 || ^10"
     },
     "conflict": {
         "drupal/redirect": "<1.7"
diff --git a/src/Controller/TextimageDownloadController.php b/src/Controller/TextimageDownloadController.php
index 054190f..5c178df 100644
--- a/src/Controller/TextimageDownloadController.php
+++ b/src/Controller/TextimageDownloadController.php
@@ -27,52 +27,52 @@ class TextimageDownloadController extends FileDownloadController implements Cont
   /**
    * The Textimage factory.
    *
-   * @var \Drupal\textimage\TextimageFactory
+   * @var TextimageFactory
    */
   protected $textimageFactory;
 
   /**
    * The image factory.
    *
-   * @var \Drupal\Core\Image\ImageFactory
+   * @var ImageFactory
    */
   protected $imageFactory;
 
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * The Textimage logger.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;
 
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
   /**
    * Constructs a TextimageDownloadController object.
    *
-   * @param \Drupal\textimage\TextimageFactory $textimage_factory
+   * @param TextimageFactory $textimage_factory
    *   The Textimage factory.
-   * @param \Drupal\Core\Image\ImageFactory $image_factory
+   * @param ImageFactory $image_factory
    *   The image factory.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory.
-   * @param \Psr\Log\LoggerInterface $logger
+   * @param LoggerInterface $logger
    *   The Textimage logger.
-   * @param \Drupal\Core\File\FileSystemInterface $file_system
+   * @param FileSystemInterface $file_system
    *   The file system service.
-   * @param \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface $stream_wrapper_manager
+   * @param StreamWrapperManagerInterface $stream_wrapper_manager
    *   The stream wrapper manager service.
    */
   public function __construct(TextimageFactory $textimage_factory, ImageFactory $image_factory, ConfigFactoryInterface $config_factory, LoggerInterface $logger, FileSystemInterface $file_system, StreamWrapperManagerInterface $stream_wrapper_manager) {
@@ -103,18 +103,18 @@ class TextimageDownloadController extends FileDownloadController implements Cont
    *
    * After generating an image, transfer it to the requesting agent.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request object. The 'text' query parameter coming from the URL
    *   contains the text elements to be used to deliver the Textimage.
-   * @param \Drupal\image\ImageStyleInterface $image_style
+   * @param ImageStyleInterface $image_style
    *   The image style to deliver.
    *
-   * @throws \Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException
+   * @throws AccessDeniedHttpException
    *   Thrown when Textimage URL generation is not enabled.
-   * @throws \Symfony\Component\HttpKernel\Exception\NotFoundHttpException
+   * @throws NotFoundHttpException
    *   Thrown when the image style is missing.
    *
-   * @return \Symfony\Component\HttpFoundation\BinaryFileResponse|\Symfony\Component\HttpFoundation\Response
+   * @return BinaryFileResponse|Response
    *   The transferred file as response or some error response.
    */
   public function urlDeliver(Request $request, ImageStyleInterface $image_style) {
@@ -171,13 +171,13 @@ class TextimageDownloadController extends FileDownloadController implements Cont
    *
    * After generating an image, transfer it to the requesting agent.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request object.
    *
-   * @throws \Symfony\Component\HttpKernel\Exception\NotFoundHttpException
+   * @throws NotFoundHttpException
    *   Thrown when the textimage ID is not found.
    *
-   * @return \Symfony\Component\HttpFoundation\BinaryFileResponse|\Symfony\Component\HttpFoundation\Response
+   * @return BinaryFileResponse|Response
    *   The transferred file as response or some error response.
    */
   public function deferredDelivery(Request $request) {
@@ -202,12 +202,12 @@ class TextimageDownloadController extends FileDownloadController implements Cont
   /**
    * Returns the image file at URI.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request object.
    * @param string $uri
    *   The URI of the file to be returned.
    *
-   * @return \Symfony\Component\HttpFoundation\BinaryFileResponse|\Symfony\Component\HttpFoundation\Response
+   * @return BinaryFileResponse|Response
    *   The transferred file as response or some error response.
    */
   protected function returnBinary(Request $request, $uri) {
diff --git a/src/Form/FlushAllForm.php b/src/Form/FlushAllForm.php
index 0f8a965..32497aa 100644
--- a/src/Form/FlushAllForm.php
+++ b/src/Form/FlushAllForm.php
@@ -16,14 +16,14 @@ class FlushAllForm extends ConfirmFormBase {
   /**
    * The Textimage factory.
    *
-   * @var \Drupal\textimage\TextimageFactory
+   * @var TextimageFactory
    */
   protected $textimageFactory;
 
   /**
    * Constructs a FlushAllForm object.
    *
-   * @param \Drupal\textimage\TextimageFactory $textimage_factory
+   * @param TextimageFactory $textimage_factory
    *   The Textimage factory.
    */
   public function __construct(TextimageFactory $textimage_factory) {
diff --git a/src/Form/SettingsForm.php b/src/Form/SettingsForm.php
index cfecc89..6dfc65f 100644
--- a/src/Form/SettingsForm.php
+++ b/src/Form/SettingsForm.php
@@ -18,34 +18,34 @@ class SettingsForm extends ConfigFormBase {
   /**
    * The Textimage factory.
    *
-   * @var \Drupal\textimage\TextimageFactory
+   * @var TextimageFactory
    */
   protected $textimageFactory;
 
   /**
    * The font selector plugin manager.
    *
-   * @var \Drupal\image_effects\Plugin\ImageEffectsPluginManager
+   * @var ImageEffectsPluginManager
    */
   protected $fontManager;
 
   /**
    * The Image factory.
    *
-   * @var \Drupal\Core\Image\ImageFactory
+   * @var ImageFactory
    */
   protected $imageFactory;
 
   /**
    * Constructs the class for Textimage settings form.
    *
-   * @param \Drupal\textimage\TextimageFactory $textimage_factory
+   * @param TextimageFactory $textimage_factory
    *   The Textimage factory.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The factory for configuration objects.
-   * @param \Drupal\image_effects\Plugin\ImageEffectsPluginManager $font_plugin_manager
+   * @param ImageEffectsPluginManager $font_plugin_manager
    *   The font selector plugin manager.
-   * @param \Drupal\Core\Image\ImageFactory $image_factory
+   * @param ImageFactory $image_factory
    *   The Image factory.
    */
   public function __construct(TextimageFactory $textimage_factory, ConfigFactoryInterface $config_factory, ImageEffectsPluginManager $font_plugin_manager, ImageFactory $image_factory) {
diff --git a/src/PathProcessor/TextimagePathProcessor.php b/src/PathProcessor/TextimagePathProcessor.php
index 539ed2d..bfb87b0 100644
--- a/src/PathProcessor/TextimagePathProcessor.php
+++ b/src/PathProcessor/TextimagePathProcessor.php
@@ -18,14 +18,14 @@ class TextimagePathProcessor implements InboundPathProcessorInterface {
   /**
    * The stream wrapper manager service.
    *
-   * @var \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface
+   * @var StreamWrapperManagerInterface
    */
   protected $streamWrapperManager;
 
   /**
    * Constructs a new TextimagePathProcessor object.
    *
-   * @param \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface $stream_wrapper_manager
+   * @param StreamWrapperManagerInterface $stream_wrapper_manager
    *   The stream wrapper manager service.
    */
   public function __construct(StreamWrapperManagerInterface $stream_wrapper_manager) {
diff --git a/src/Plugin/Field/FieldFormatter/TextimageImageFieldFormatter.php b/src/Plugin/Field/FieldFormatter/TextimageImageFieldFormatter.php
index 84c2b2b..1e75b6f 100644
--- a/src/Plugin/Field/FieldFormatter/TextimageImageFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/TextimageImageFieldFormatter.php
@@ -30,7 +30,7 @@ class TextimageImageFieldFormatter extends ImageFormatter {
   /**
    * The Textimage factory service.
    *
-   * @var \Drupal\textimage\TextimageFactory
+   * @var TextimageFactory
    */
   protected $textimageFactory;
 
@@ -41,7 +41,7 @@ class TextimageImageFieldFormatter extends ImageFormatter {
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ -51,11 +51,11 @@ class TextimageImageFieldFormatter extends ImageFormatter {
    *   The view mode.
    * @param array $third_party_settings
    *   Any third party settings settings.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
-   * @param \Drupal\Core\Entity\EntityStorageInterface $image_style_storage
+   * @param EntityStorageInterface $image_style_storage
    *   The image style entity storage.
-   * @param \Drupal\textimage\TextimageFactory $textimage_factory
+   * @param TextimageFactory $textimage_factory
    *   The Textimage factory service.
    */
   public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, $label, $view_mode, array $third_party_settings, AccountInterface $current_user, EntityStorageInterface $image_style_storage, TextimageFactory $textimage_factory) {
@@ -246,7 +246,7 @@ class TextimageImageFieldFormatter extends ImageFormatter {
       if (!$entity_url) {
         switch ($this->getSetting('image_link')) {
           case 'file':
-            $url = Url::fromUri(file_create_url($file->getFileUri()));
+            $url = \Drupal::service('file_url_generator')->generate($file->getFileUri());
             break;
 
           case 'derivative':
diff --git a/src/Plugin/Field/FieldFormatter/TextimageTextFieldFormatter.php b/src/Plugin/Field/FieldFormatter/TextimageTextFieldFormatter.php
index efa6ce4..17e4c28 100644
--- a/src/Plugin/Field/FieldFormatter/TextimageTextFieldFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/TextimageTextFieldFormatter.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\textimage\Plugin\Field\FieldFormatter;
 
+use Drupal\image\ImageStyleInterface;
 use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Field\FieldDefinitionInterface;
 use Drupal\Core\Field\FieldItemListInterface;
@@ -37,28 +38,28 @@ class TextimageTextFieldFormatter extends FormatterBase implements ContainerFact
   /**
    * The current user.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $currentUser;
 
   /**
    * The Textimage factory service.
    *
-   * @var \Drupal\textimage\TextimageFactory
+   * @var TextimageFactory
    */
   protected $textimageFactory;
 
   /**
    * The image style entity storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $imageStyleStorage;
 
   /**
    * A logger instance.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;
 
@@ -69,7 +70,7 @@ class TextimageTextFieldFormatter extends FormatterBase implements ContainerFact
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ -79,13 +80,13 @@ class TextimageTextFieldFormatter extends FormatterBase implements ContainerFact
    *   The view mode.
    * @param array $third_party_settings
    *   Any third party settings settings.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
-   * @param \Drupal\textimage\TextimageFactory $textimage_factory
+   * @param TextimageFactory $textimage_factory
    *   The Textimage factory service.
-   * @param \Drupal\Core\Entity\EntityStorageInterface $image_style_storage
+   * @param EntityStorageInterface $image_style_storage
    *   The image style entity storage.
-   * @param \Psr\Log\LoggerInterface $logger
+   * @param LoggerInterface $logger
    *   A logger instance.
    */
   public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, $label, $view_mode, array $third_party_settings, AccountInterface $current_user, TextimageFactory $textimage_factory, EntityStorageInterface $image_style_storage, LoggerInterface $logger) {
@@ -364,7 +365,7 @@ class TextimageTextFieldFormatter extends FormatterBase implements ContainerFact
   public function calculateDependencies() {
     $dependencies = parent::calculateDependencies();
     $style_id = $this->getSetting('image_style');
-    /** @var \Drupal\image\ImageStyleInterface $style */
+    /** @var ImageStyleInterface $style */
     if ($style_id && $style = ImageStyle::load($style_id)) {
       // If this formatter uses a valid image style to display the image, add
       // the image style configuration entity as dependency of this formatter.
@@ -379,7 +380,7 @@ class TextimageTextFieldFormatter extends FormatterBase implements ContainerFact
   public function onDependencyRemoval(array $dependencies) {
     $changed = parent::onDependencyRemoval($dependencies);
     $style_id = $this->getSetting('image_style');
-    /** @var \Drupal\image\ImageStyleInterface $style */
+    /** @var ImageStyleInterface $style */
     if ($style_id && $style = ImageStyle::load($style_id)) {
       if (!empty($dependencies[$style->getConfigDependencyKey()][$style->getConfigDependencyName()])) {
         $replacement_id = $this->imageStyleStorage->getReplacementId($style_id);
diff --git a/src/Routing/TextimageRoutes.php b/src/Routing/TextimageRoutes.php
index 286d0a9..ccb55e9 100644
--- a/src/Routing/TextimageRoutes.php
+++ b/src/Routing/TextimageRoutes.php
@@ -15,14 +15,14 @@ class TextimageRoutes implements ContainerInjectionInterface {
   /**
    * The stream wrapper manager service.
    *
-   * @var \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface
+   * @var StreamWrapperManagerInterface
    */
   protected $streamWrapperManager;
 
   /**
    * Constructs a new TextimageRoutes object.
    *
-   * @param \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface $stream_wrapper_manager
+   * @param StreamWrapperManagerInterface $stream_wrapper_manager
    *   The stream wrapper manager service.
    */
   public function __construct(StreamWrapperManagerInterface $stream_wrapper_manager) {
@@ -41,7 +41,7 @@ class TextimageRoutes implements ContainerInjectionInterface {
   /**
    * Returns an array of route objects.
    *
-   * @return \Symfony\Component\Routing\Route[]
+   * @return Route[]
    *   An array of route objects.
    */
   public function routes() {
diff --git a/src/Textimage.php b/src/Textimage.php
index 885b433..597ac25 100644
--- a/src/Textimage.php
+++ b/src/Textimage.php
@@ -32,63 +32,63 @@ class Textimage implements TextimageInterface {
   /**
    * The Textimage factory service.
    *
-   * @var \Drupal\textimage\TextimageFactory
+   * @var TextimageFactory
    */
   protected $factory;
 
   /**
    * The lock service.
    *
-   * @var \Drupal\Core\Lock\LockBackendInterface
+   * @var LockBackendInterface
    */
   protected $lock;
 
   /**
    * The image factory service.
    *
-   * @var \Drupal\Core\Image\ImageFactory
+   * @var ImageFactory
    */
   protected $imageFactory;
 
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * The textimage cache service.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cache;
 
   /**
    * The Textimage logger.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;
 
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
   /**
    * The image effect manager service.
    *
-   * @var \Drupal\image\ImageEffectManager
+   * @var ImageEffectManager
    */
   protected $imageEffectManager;
 
   /**
    * The stream wrapper manager service.
    *
-   * @var \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface
+   * @var StreamWrapperManagerInterface
    */
   protected $streamWrapperManager;
 
@@ -148,7 +148,7 @@ class Textimage implements TextimageInterface {
   /**
    * Image style used for this Textimage.
    *
-   * @var \Drupal\image\ImageStyleInterface
+   * @var ImageStyleInterface
    */
   protected $style = NULL;
 
@@ -197,7 +197,7 @@ class Textimage implements TextimageInterface {
    * system context. Also used to track Textimages from image fields formatted
    * through Textimage field display formatter and to resolve file tokens.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $sourceImageFile = NULL;
 
@@ -211,30 +211,30 @@ class Textimage implements TextimageInterface {
   /**
    * Bubbleable metadata of the Textimage.
    *
-   * @var \Drupal\Core\Render\BubbleableMetadata
+   * @var BubbleableMetadata
    */
   protected $bubbleableMetadata = NULL;
 
   /**
    * Constructs a Textimage object.
    *
-   * @param \Drupal\textimage\TextimageFactory $textimage_factory
+   * @param TextimageFactory $textimage_factory
    *   The Textimage factory.
-   * @param \Drupal\Core\Lock\LockBackendInterface $lock_service
+   * @param LockBackendInterface $lock_service
    *   The lock service.
-   * @param \Drupal\Core\Image\ImageFactory $image_factory
+   * @param ImageFactory $image_factory
    *   The image factory.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory.
-   * @param \Psr\Log\LoggerInterface $logger
+   * @param LoggerInterface $logger
    *   The Textimage logger.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_service
+   * @param CacheBackendInterface $cache_service
    *   The Textimage cache service.
-   * @param \Drupal\Core\File\FileSystemInterface $file_system
+   * @param FileSystemInterface $file_system
    *   The file system service.
-   * @param \Drupal\image\ImageEffectManager $image_effect_manager
+   * @param ImageEffectManager $image_effect_manager
    *   The image effect manager service.
-   * @param \Drupal\Core\StreamWrapper\StreamWrapperManagerInterface $stream_wrapper_manager
+   * @param StreamWrapperManagerInterface $stream_wrapper_manager
    *   The stream wrapper manager service.
    */
   public function __construct(TextimageFactory $textimage_factory, LockBackendInterface $lock_service, ImageFactory $image_factory, ConfigFactoryInterface $config_factory, LoggerInterface $logger, CacheBackendInterface $cache_service, FileSystemInterface $file_system, ImageEffectManager $image_effect_manager, StreamWrapperManagerInterface $stream_wrapper_manager) {
@@ -431,7 +431,7 @@ class Textimage implements TextimageInterface {
    * {@inheritdoc}
    */
   public function getUrl() {
-    return $this->processed ? Url::fromUri(file_create_url($this->getUri())) : NULL;
+    return $this->processed ? \Drupal::service('file_url_generator')->generate($this->getUri()) : NULL;
   }
 
   /**
@@ -749,7 +749,7 @@ class Textimage implements TextimageInterface {
    * @param array $effects
    *   An array of image effects.
    *
-   * @return \Drupal\image\ImageStyleInterface
+   * @return ImageStyleInterface
    *   An image style object.
    */
   protected function buildStyleFromEffects(array $effects) {
diff --git a/src/TextimageFactory.php b/src/TextimageFactory.php
index ea250d4..90e91b5 100644
--- a/src/TextimageFactory.php
+++ b/src/TextimageFactory.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\textimage;
 
+use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Cache\CacheBackendInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -25,77 +26,77 @@ class TextimageFactory implements TextimageFactoryInterface {
   /**
    * The token resolution service.
    *
-   * @var \Drupal\Core\Utility\Token
+   * @var Token
    */
   protected $token;
 
   /**
    * The Textimage logger.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;
 
   /**
    * The stream wrapper manager service.
    *
-   * @var \Drupal\Core\StreamWrapper\StreamWrapperManager
+   * @var StreamWrapperManager
    */
   protected $streamWrapperManager;
 
   /**
    * The Textimage cache service.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cache;
 
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * The current user.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $currentUser;
 
   /**
    * The User entity storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $userStorage;
 
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
   /**
    * Constructs a new TextimageFactory object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory.
-   * @param \Drupal\Core\Utility\Token $token_service
+   * @param Token $token_service
    *   The token resolution service.
-   * @param \Psr\Log\LoggerInterface $logger
+   * @param LoggerInterface $logger
    *   The Textimage logger.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_service
+   * @param CacheBackendInterface $cache_service
    *   The Textimage cache service.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
-   * @param \Drupal\Core\StreamWrapper\StreamWrapperManager $stream_wrapper_manager
+   * @param StreamWrapperManager $stream_wrapper_manager
    *   The stream wrapper manager service.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The image style entity storage.
-   * @param \Drupal\Core\File\FileSystemInterface $file_system
+   * @param FileSystemInterface $file_system
    *   The file system service.
    */
   public function __construct(ConfigFactoryInterface $config_factory, Token $token_service, LoggerInterface $logger, CacheBackendInterface $cache_service, AccountInterface $current_user, StreamWrapperManager $stream_wrapper_manager, EntityTypeManagerInterface $entity_type_manager, FileSystemInterface $file_system) {
diff --git a/src/TextimageFactoryInterface.php b/src/TextimageFactoryInterface.php
index d122c45..7a78b71 100644
--- a/src/TextimageFactoryInterface.php
+++ b/src/TextimageFactoryInterface.php
@@ -14,10 +14,10 @@ interface TextimageFactoryInterface {
   /**
    * Gets a Textimage object.
    *
-   * @param \Drupal\Core\Render\BubbleableMetadata $bubbleable_metadata
+   * @param BubbleableMetadata $bubbleable_metadata
    *   A BubbleableMetadata object.
    *
-   * @return \Drupal\textimage\Textimage
+   * @return Textimage
    *   A new Textimage object.
    */
   public function get(BubbleableMetadata $bubbleable_metadata = NULL);
@@ -28,7 +28,7 @@ interface TextimageFactoryInterface {
    * @param string $tiid
    *   The Textimage ID.
    *
-   * @return \Drupal\textimage\Textimage
+   * @return Textimage
    *   A Textimage object with properties loaded from cache.
    */
   public function load($tiid);
@@ -42,7 +42,7 @@ interface TextimageFactoryInterface {
    *   A text conversion option.
    * @param array $token_data
    *   (optional) Token data to be passed to Token::replace.
-   * @param \Drupal\Core\Render\BubbleableMetadata $bubbleable_metadata
+   * @param BubbleableMetadata $bubbleable_metadata
    *   (optional) A BubbleableMetadata object to collect cacheability metadata
    *   from the token replacement process.
    *
@@ -56,7 +56,7 @@ interface TextimageFactoryInterface {
   /**
    * Checks if an image style is Textimage relevant.
    *
-   * @param \Drupal\image\ImageStyleInterface $image_style
+   * @param ImageStyleInterface $image_style
    *   The image style to check.
    *
    * @return bool
@@ -80,7 +80,7 @@ interface TextimageFactoryInterface {
    *
    * Clears immediate cache and all the image files associated.
    *
-   * @param \Drupal\image\ImageStyleInterface $style
+   * @param ImageStyleInterface $style
    *   The style being flushed.
    */
   public function flushStyle(ImageStyleInterface $style);
@@ -117,7 +117,7 @@ interface TextimageFactoryInterface {
    *   The tokens to resolve.
    * @param array $data
    *   Token data array.
-   * @param \Drupal\Core\Render\BubbleableMetadata $bubbleable_metadata
+   * @param BubbleableMetadata $bubbleable_metadata
    *   The bubbleable metadata.
    *
    * @return array
@@ -128,7 +128,7 @@ interface TextimageFactoryInterface {
   /**
    * Retrieves text from a Text field.
    *
-   * @param Drupal\Core\Field\FieldItemListInterface $items
+   * @param FieldItemListInterface $items
    *   Field items.
    *
    * @return array
diff --git a/src/TextimageInterface.php b/src/TextimageInterface.php
index be91d38..6d4e40d 100644
--- a/src/TextimageInterface.php
+++ b/src/TextimageInterface.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\textimage;
 
+use Drupal\Core\Url;
 use Drupal\Core\DependencyInjection\ContainerInjectionInterface;
 use Drupal\Core\Render\BubbleableMetadata;
 use Drupal\image\ImageStyleInterface;
@@ -15,7 +16,7 @@ interface TextimageInterface extends ContainerInjectionInterface {
   /**
    * Set the image style.
    *
-   * @param \Drupal\image\ImageStyleInterface $image_style
+   * @param ImageStyleInterface $image_style
    *   The image style to be used to derive the Textimage.
    *
    * @return $this
@@ -56,7 +57,7 @@ interface TextimageInterface extends ContainerInjectionInterface {
   /**
    * Sets the image source file.
    *
-   * @param \Drupal\file\FileInterface $source_image_file
+   * @param FileInterface $source_image_file
    *   A file entity.
    * @param int|null $width
    *   (optional) The source image width if known. Defaults to NULL.
@@ -100,7 +101,7 @@ interface TextimageInterface extends ContainerInjectionInterface {
   /**
    * Sets the bubbleable metadata.
    *
-   * @param \Drupal\Core\Render\BubbleableMetadata $bubbleable_metadata
+   * @param BubbleableMetadata $bubbleable_metadata
    *   A BubbleableMetadata object.
    *
    * @return $this
@@ -136,7 +137,7 @@ interface TextimageInterface extends ContainerInjectionInterface {
   /**
    * Returns the URL of the Textimage.
    *
-   * @return \Drupal\Core\Url
+   * @return Url
    *   The Url object for the textimage.
    */
   public function getUrl();
@@ -160,7 +161,7 @@ interface TextimageInterface extends ContainerInjectionInterface {
   /**
    * Gets the bubbleable metadata of the Textimage.
    *
-   * @return \Drupal\Core\Render\BubbleableMetadata
+   * @return BubbleableMetadata
    *   A BubbleableMetadata object.
    */
   public function getBubbleableMetadata();
diff --git a/src/TextimageLogger.php b/src/TextimageLogger.php
index b14fba7..99e1605 100644
--- a/src/TextimageLogger.php
+++ b/src/TextimageLogger.php
@@ -20,25 +20,25 @@ class TextimageLogger extends LoggerChannel {
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * The Textimage logger channel.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $loggerChannel;
 
   /**
    * Constructs a TextimageLogger object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory.
-   * @param \Psr\Log\LoggerInterface $logger_channel
+   * @param LoggerInterface $logger_channel
    *   The Textimage logger channel.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
    */
   public function __construct(ConfigFactoryInterface $config_factory, LoggerInterface $logger_channel, AccountInterface $current_user) {
diff --git a/tests/src/Functional/TextimageFieldFormatterTest.php b/tests/src/Functional/TextimageFieldFormatterTest.php
index 74fa9a2..4ef7120 100644
--- a/tests/src/Functional/TextimageFieldFormatterTest.php
+++ b/tests/src/Functional/TextimageFieldFormatterTest.php
@@ -47,7 +47,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
       ->setTokenData(['node' => $node])
       ->process($field_value);
     $textimage_url = $textimage->getUrl()->toString();
-    $rel_url = file_url_transform_relative($textimage_url);
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage_url);
 
     // Assert HTML tags are stripped and entities are decoded.
     $this->assertSame(['Para1 Para2  "Title" One …'], $textimage->getText());
@@ -145,7 +145,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
       ->setTokenData(['node' => $node])
       ->process($field_value);
     $textimage_url = $textimage->getUrl()->toString();
-    $rel_url = file_url_transform_relative($textimage_url);
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage_url);
 
     // Assert HTML tags are stripped and entities are decoded.
     $this->assertSame(['Para1 Para2  "Title" One …'], $textimage->getText());
@@ -242,7 +242,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
       ->setTokenData(['node' => $node])
       ->process($field_value)
       ->getUrl()->toString();
-    $rel_url = file_url_transform_relative($textimage_url);
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage_url);
 
     $display = $this->entityDisplayRepository->getViewDisplay('node', $node->getType(), 'default');
     $display_options['type'] = 'textimage_text_field_formatter';
@@ -273,7 +273,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
         ->setTokenData(['node' => $node])
         ->process($field_value[$i])
         ->getUrl()->toString();
-      $rel_url = file_url_transform_relative($textimage_url);
+      $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage_url);
 
       $this->assertSame($rel_url, $elements[$i]->getAttribute('src'));
       $this->assertSame('Alternate text: Test Title', $elements[$i]->getAttribute('alt'));
@@ -307,7 +307,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
     // Get the stored image.
     $fid = $node->{$field_name}[0]->get('target_id')->getValue();
     $source_image_file = File::load($fid);
-    $source_image_file_url = file_create_url($source_image_file->getFileUri());
+    $source_image_file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($source_image_file->getFileUri());
 
     // Get Textimage URL.
     $textimage_url = $this->textimageFactory->get()
@@ -316,7 +316,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
       ->setTokenData(['node' => $node, 'file' => $source_image_file])
       ->process(NULL)
       ->getUrl()->toString();
-    $rel_url = file_url_transform_relative($textimage_url);
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage_url);
 
     // Test the textimage formatter - no link.
     $display = $this->entityDisplayRepository->getViewDisplay('node', $node->getType(), 'default');
@@ -435,7 +435,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
     // Get the stored image.
     $fid = $node->{$field_name}[0]->get('target_id')->getValue();
     $source_image_file = File::load($fid);
-    $source_image_file_url = file_create_url($source_image_file->getFileUri());
+    $source_image_file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($source_image_file->getFileUri());
 
     // Get Textimage URL.
     $textimage_url = $this->textimageFactory->get()
@@ -444,7 +444,7 @@ class TextimageFieldFormatterTest extends TextimageTestBase {
       ->setTokenData(['node' => $node, 'file' => $source_image_file])
       ->process(NULL)
       ->getUrl()->toString();
-    $rel_url = file_url_transform_relative($textimage_url);
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage_url);
 
     // Test the textimage formatter - no link.
     $display = $this->entityDisplayRepository->getViewDisplay('node', $node->getType(), 'default');
diff --git a/tests/src/Functional/TextimageRedirectIntegrationTest.php b/tests/src/Functional/TextimageRedirectIntegrationTest.php
index 0aa67fd..a315c8b 100644
--- a/tests/src/Functional/TextimageRedirectIntegrationTest.php
+++ b/tests/src/Functional/TextimageRedirectIntegrationTest.php
@@ -54,7 +54,7 @@ class TextimageRedirectIntegrationTest extends TextimageTestBase {
     // Get the stored image.
     $fid = $node->{$field_name}[0]->get('target_id')->getValue();
     $source_image_file = File::load($fid);
-    $source_image_file_url = file_create_url($source_image_file->getFileUri());
+    $source_image_file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($source_image_file->getFileUri());
 
     // Get Textimage URL.
     $textimage = $this->textimageFactory->get()
@@ -62,7 +62,7 @@ class TextimageRedirectIntegrationTest extends TextimageTestBase {
       ->setStyle(ImageStyle::load('textimage_test'))
       ->setTokenData(['node' => $node, 'file' => $source_image_file])
       ->process(NULL);
-    $rel_url = file_url_transform_relative($textimage->getUrl()->toString());
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($textimage->getUrl()->toString());
     $this->assertFileDoesNotExist($textimage->getUri());
 
     // Test the textimage formatter - no link.
diff --git a/tests/src/Functional/TextimageTestBase.php b/tests/src/Functional/TextimageTestBase.php
index b9bcd57..0048ae4 100644
--- a/tests/src/Functional/TextimageTestBase.php
+++ b/tests/src/Functional/TextimageTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\textimage\Functional;
 
+use Drupal\Core\File\FileSystemInterface;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
 use Drupal\Tests\BrowserTestBase;
@@ -37,7 +38,7 @@ abstract class TextimageTestBase extends BrowserTestBase {
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
diff --git a/tests/src/Kernel/TextimageApiTest.php b/tests/src/Kernel/TextimageApiTest.php
index ba73ed2..9e429e6 100644
--- a/tests/src/Kernel/TextimageApiTest.php
+++ b/tests/src/Kernel/TextimageApiTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\textimage\Kernel;
 
+use Drupal\user\Entity\User;
 use Drupal\file\Entity\File;
 use Drupal\image\Entity\ImageStyle;
 use Drupal\KernelTests\KernelTestBase;
@@ -38,7 +39,7 @@ class TextimageApiTest extends KernelTestBase {
   /**
    * An user account, to be used for token replacement.
    *
-   * @var \Drupal\user\Entity\User
+   * @var User
    */
   protected $testUser;
 
@@ -308,7 +309,7 @@ class TextimageApiTest extends KernelTestBase {
     $files = $this->getTestFiles('image');
     $file = File::create((array) array_shift($files));
     $file->save();
-    file_move($file, 'image-test.PNG');
+    \Drupal::service('file.repository')->move($file, 'image-test.PNG');
     $textimage = $this->textimageFactory->get();
     $textimage
       ->setStyle(ImageStyle::load('textimage_test'))
diff --git a/tests/src/Kernel/TextimageTestTrait.php b/tests/src/Kernel/TextimageTestTrait.php
index f81b801..8707803 100644
--- a/tests/src/Kernel/TextimageTestTrait.php
+++ b/tests/src/Kernel/TextimageTestTrait.php
@@ -2,6 +2,10 @@
 
 namespace Drupal\Tests\textimage\Kernel;
 
+use Drupal\textimage\TextimageFactoryInterface;
+use Drupal\Core\Render\RendererInterface;
+use Drupal\Core\File\FileSystemInterface;
+use Drupal\Core\Entity\EntityDisplayRepositoryInterface;
 use Drupal\image\Entity\ImageStyle;
 
 /**
@@ -12,28 +16,28 @@ trait TextimageTestTrait {
   /**
    * The Textimage factory service.
    *
-   * @var \Drupal\textimage\TextimageFactoryInterface
+   * @var TextimageFactoryInterface
    */
   protected $textimageFactory;
 
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
 
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
   /**
    * The entity display repository service.
    *
-   * @var \Drupal\Core\Entity\EntityDisplayRepositoryInterface
+   * @var EntityDisplayRepositoryInterface
    */
   protected $entityDisplayRepository;
 
@@ -51,7 +55,7 @@ trait TextimageTestTrait {
     $config = \Drupal::configFactory()->getEditable('image_effects.settings');
     $config
       ->set('image_selector.plugin_id', 'dropdown')
-      ->set('image_selector.plugin_settings.dropdown.path', drupal_get_path('module', 'image_effects') . '/tests/images')
+      ->set('image_selector.plugin_settings.dropdown.path', \Drupal::service('extension.list.module')->getPath('image_effects') . '/tests/images')
       ->set('font_selector.plugin_id', 'dropdown')
       ->set('font_selector.plugin_settings.dropdown.path', 'vendor://fileeye/linuxlibertine-fonts')
       ->save();
diff --git a/tests/src/Kernel/TextimageThemeTest.php b/tests/src/Kernel/TextimageThemeTest.php
index 9ae1a3d..60c483c 100644
--- a/tests/src/Kernel/TextimageThemeTest.php
+++ b/tests/src/Kernel/TextimageThemeTest.php
@@ -70,7 +70,7 @@ class TextimageThemeTest extends KernelTestBase {
     ];
     $this->setRawContent($this->renderer->renderRoot($output));
     $abs_url = $textimage->getUrl()->toString();
-    $rel_url = file_url_transform_relative($abs_url);
+    $rel_url = \Drupal::service('file_url_generator')->transformRelative($abs_url);
     // @todo changing behaviour in D8.1, need to watch #2646744
     $elements = $this->cssSelect("a[href='$abs_url'] div.textimage-container-test img[src='$rel_url']");
     $this->assertNotEmpty($elements, 'Textimage formatted correctly.');
diff --git a/textimage.info.yml b/textimage.info.yml
index ecd169f..7086973 100644
--- a/textimage.info.yml
+++ b/textimage.info.yml
@@ -1,5 +1,5 @@
 type: module
-core_version_requirement: ^9.2
+core_version_requirement: ^9.3 || ^10
 name: Textimage
 description: 'Provides Text and Image field formatters, and an API, to allow building image styles with variable text.'
 package: Media
