modules/contrib/friendlycaptcha/friendlycaptcha.install
modules/contrib/friendlycaptcha/friendlycaptcha.module
modules/contrib/friendlycaptcha/src/Form/FriendlyCaptchaAdminSettingsForm.php
modules/contrib/friendlycaptcha/tests/src/Functional/FriendlyCaptchaBasicTest.php

1 file with changes
===================

1) modules/contrib/friendlycaptcha/tests/src/Functional/FriendlyCaptchaBasicTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\friendlycaptcha\Functional;

+use Drupal\user\UserInterface;
 use Drupal\Tests\BrowserTestBase;
 use Drupal\Core\StringTranslation\StringTranslationTrait;

@@ @@
   /**
    * A normal user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $normalUser;

@@ @@
   /**
    * An admin user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;

@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     module_load_include('inc', 'captcha');

@@ @@
     // Check form validation.
     $edit['friendlycaptcha_site_key'] = '';
     $edit['friendlycaptcha_api_key'] = '';
-    $this->drupalPostForm('admin/config/people/captcha/friendlycaptcha', $edit, $this->t('Save configuration'));
+    $this->drupalGet('admin/config/people/captcha/friendlycaptcha');
+    $this->submitForm($edit, $this->t('Save configuration'));

     $this->assertSession()->responseContains($this->t('Site key field is required.'), '[testFriendlycaptchaAdminSettingsForm]: Empty site key detected.');
     $this->assertSession()->responseContains($this->t('API key field is required.'), '[testFriendlycaptchaAdminSettingsForm]: Empty api key detected.');
@@ @@
     $edit['friendlycaptcha_site_key'] = $site_key;
     $edit['friendlycaptcha_api_key'] = $api_key;
     $edit['friendlycaptcha_api_endpoint'] = $endpoint;
-    $this->drupalPostForm('admin/config/people/captcha/friendlycaptcha', $edit, $this->t('Save configuration'));
+    $this->drupalGet('admin/config/people/captcha/friendlycaptcha');
+    $this->submitForm($edit, $this->t('Save configuration'));
     $this->assertSession()->responseContains($this->t('The configuration options have been saved.'), '[testFriendlycaptchaAdminSettingsForm]: The configuration options have been saved.');

     $this->assertSession()->responseNotContains($this->t('Site key field is required.'), '[testFriendlycaptchaAdminSettingsForm]: Site key was not empty.');
@@ @@
     $this->assertSession()
       ->hiddenFieldExists('captcha_response')
       ->setValue('?');
+    $this->drupalGet('user/login');

-    $this->drupalPostForm('user/login', $edit, $this->t('Log in'));
+    $this->submitForm($edit, $this->t('Log in'));
     // Check for error message.
     $this->assertSession()->pageTextContains($this->t('The answer you entered for the CAPTCHA was not correct.'), 'CAPTCHA should block user login form', 'Friendlycaptcha');
    ----------- end diff -----------

Applied rules:
 * UiHelperTraitDrupalPostFormRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 1 file has been changed by Rector                                         

