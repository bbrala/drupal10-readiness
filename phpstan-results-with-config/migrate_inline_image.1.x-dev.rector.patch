diff --git a/migrate_inline_image.info.yml b/migrate_inline_image.info.yml
index 5984d41..87c679a 100644
--- a/migrate_inline_image.info.yml
+++ b/migrate_inline_image.info.yml
@@ -1,7 +1,7 @@
 name: 'Migrate Inline Image'
 type: module
 description: 'Migrate inline images for the rich-text field.'
-core_version_requirement: ^8.8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'Migrate'
 dependencies:
   - migrate_file:migrate_file
diff --git a/src/Plugin/migrate/process/SaveInlineImage.php b/src/Plugin/migrate/process/SaveInlineImage.php
index afa6163..299f034 100644
--- a/src/Plugin/migrate/process/SaveInlineImage.php
+++ b/src/Plugin/migrate/process/SaveInlineImage.php
@@ -75,7 +75,7 @@ class SaveInlineImage extends ProcessPluginBase {
     $this->createPath($save_path);
 
     $info = pathinfo($source_path);
-    $file = file_save_data(file_get_contents($source_path),$save_path.'/'.$info['basename']);
+    $file = \Drupal::service('file.repository')->writeData(file_get_contents($source_path), $save_path.'/'.$info['basename']);
 
     if ($file === false) throw new MigrateException('Fail on saving file ' . $source_path);
 
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index 87316d1..24a0634 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\migrate_inline_image\Functional;
 
+use Drupal\user\UserInterface;
 use Drupal\Core\Url;
 use Drupal\Tests\BrowserTestBase;
 
@@ -22,14 +23,14 @@ class LoadTest extends BrowserTestBase {
   /**
    * A user with permission to administer site configuration.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $user;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
