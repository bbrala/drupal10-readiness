modules/contrib/usage_data/src/Annotation/UsageType.php
modules/contrib/usage_data/src/Event/CollectExtraDataEvent.php
modules/contrib/usage_data/src/Event/RecordingViewEvent.php
modules/contrib/usage_data/src/Event/UsageDataEvents.php
modules/contrib/usage_data/src/Form/SettingsForm.php
modules/contrib/usage_data/src/Plugin/QueueWorker/UsageDataRecords.php
modules/contrib/usage_data/src/Plugin/UsageType/Generic.php
modules/contrib/usage_data/src/Plugin/UsageType/GenericCounter.php
modules/contrib/usage_data/src/Plugin/UsageType/Legacy.php
modules/contrib/usage_data/src/Plugin/UsageTypeCountInterface.php
modules/contrib/usage_data/src/Plugin/UsageTypeInterface.php
modules/contrib/usage_data/src/Plugin/UsageTypeManager.php
modules/contrib/usage_data/src/Plugin/UsageTypeManagerInterface.php
modules/contrib/usage_data/src/Plugin/UsageTypePluginBase.php
modules/contrib/usage_data/src/Plugin/views/field/UsageDataField.php
modules/contrib/usage_data/src/Plugin/views/query/UsageDataQuery.php
modules/contrib/usage_data/src/Plugin/views/sort/UsageDataSort.php
modules/contrib/usage_data/src/UsageData.php
modules/contrib/usage_data/src/UsageDataDatabaseStorage.php
modules/contrib/usage_data/src/UsageDataInterface.php
modules/contrib/usage_data/src/UsageDataStorageInterface.php
modules/contrib/usage_data/usage_data.api.php
modules/contrib/usage_data/usage_data.install
modules/contrib/usage_data/usage_data.module
modules/contrib/usage_data/usage_data.php

16 files with changes
=====================

1) modules/contrib/usage_data/usage_data.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\views\ViewExecutable;
+use Drupal\usage_data\Plugin\UsageTypeManager;
+use Drupal\usage_data\UsageDataDatabaseStorage;
 /**
  * @file
  * Contains usage_data.module.
@@ @@
  * Implements hook_page_attachments().
  */
 function usage_data_page_attachments(array &$attachments) {
-  /** @var \Drupal\usage_data\UsageDataInterface $usage */
+  /** @var UsageDataInterface $usage */
   $usage = \Drupal::service('usage_data.usage');
   $attachments['#attached']['library'][] = 'usage_data/entity.statistics';
   $attachments['#attached']['drupalSettings']['usage_data']['url'] = $usage->getPostUrl();
@@ @@
  */
 function usage_data_entity_view(array &$build, EntityInterface $entity, EntityViewDisplayInterface $display, $view_mode) {
   if (!$entity->isNew()) {
-    /** @var \Drupal\usage_data\UsageDataInterface $usage */
+    /** @var UsageDataInterface $usage */
     $usage = \Drupal::service('usage_data.usage');
     $additionalData = [
       'view_mode' => $view_mode,
@@ @@
  * Implements hook_views_pre_render().
  */
 function usage_data_views_pre_render($view) {
-  /** @var \Drupal\views\ViewExecutable $view */
+  /** @var ViewExecutable $view */
   if ($view->getDisplay()->hasPath()) {

-    /** @var \Drupal\usage_data\UsageDataInterface $usage */
+    /** @var UsageDataInterface $usage */
     $usage = \Drupal::service('usage_data.usage');

     // For views we are going to concatenate the view id and the display id and
@@ @@

   // Track reload for Ajax enabled views.
   if (!empty($rows = $view->result) && $view->getDisplay()->ajaxEnabled() && !empty($rows[0]->_entity)) {
-    /** @var \Drupal\usage_data\UsageDataInterface $usage */
+    /** @var UsageDataInterface $usage */
     $usage = \Drupal::service('usage_data.usage');
     $view->element['#attached']['drupalSettings']['usage_data']['url'] = $usage->getPostUrl();
   }
@@ @@

   // Omit views/entity routes.
   if (!usage_data_is_entity_route() && strpos($route_name, 'view.') !== 0) {
-    /** @var \Drupal\usage_data\UsageDataInterface $usage */
+    /** @var UsageDataInterface $usage */
     $usage = \Drupal::service('usage_data.usage');
     if ($data = $usage->getUsageData(UsageDataInterface::EVENT_TYPE_VIEW, 'route:' . $route_name, NULL, $variables)) {
       $variables['#attached']['drupalSettings']['usage_data']['data'][$route_name] = $data;
@@ @@
     ->accessCheck(FALSE)
     ->execute();
   $fid = $fids ? array_key_first($fids) : 0;
-  /** @var \Drupal\usage_data\UsageDataInterface $usage */
+  /** @var UsageDataInterface $usage */
   $usage = \Drupal::service('usage_data.usage');
   $render = [];
   $additionalData = [
@@ @@
  * @todo change to joins for proper implementations.
  */
 function usage_data_views_data() {
-  /** @var \Drupal\usage_data\Plugin\UsageTypeManager $usageTypeManager */
+  /** @var UsageTypeManager $usageTypeManager */
   $usageTypeManager = \Drupal::service('plugin.manager.usage_type');
   $entityTypeManager = \Drupal::entityTypeManager();
-  /** @var \Drupal\usage_data\UsageDataDatabaseStorage $usageDataDatabaseStorage */
+  /** @var UsageDataDatabaseStorage $usageDataDatabaseStorage */
   $usageDataDatabaseStorage = \Drupal::service('usage_data.storage.database');
   $data = [];
   if (!empty($activePlugins = $usageTypeManager->getActiveDefinitions())) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


2) modules/contrib/usage_data/usage_data.install:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\usage_data\UsageDataStorageInterface;
+use Drupal\usage_data\Plugin\UsageTypeManagerInterface;
 /**
  * @file
  * Install and update functions for the Work Horse Statistics module.
@@ @@
  */
 function usage_data_update_9201() {
   $logger = \Drupal::logger('usage_data');
-  /** @var \Drupal\usage_data\UsageDataStorageInterface $usage_storage */
+  /** @var UsageDataStorageInterface $usage_storage */
   $usage_storage = \Drupal::service('usage_data.storage.database');
   $database = Database::getConnection();
   $schema = $database->schema();
@@ @@
     'unsigned' => TRUE,
   ];

-  /** @var \Drupal\usage_data\Plugin\UsageTypeManagerInterface $usage_manager */
+  /** @var UsageTypeManagerInterface $usage_manager */
   $usage_manager = \Drupal::service('plugin.manager.usage_type');
   foreach ($usage_manager->getActiveDefinitions() as $definition) {
     $table_name = $usage_storage->tableName($definition['id']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


3) modules/contrib/usage_data/src/UsageDataStorageInterface.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data;

+use Drupal\Core\Database\Query\SelectInterface;
+use Drupal\Core\Database\StatementInterface;
 /**
  * Usage Data storage interface.
  */
@@ @@
    * @param string $entityId
    *   The optional entity id.
    *
-   * @return \Drupal\Core\Database\Query\SelectInterface
+   * @return SelectInterface
    *   The query for the usage type.
    */
   public function fetchUsageQuery($type, $eventType = NULL, $entityTypeId = NULL, $entityId = NULL);
@@ @@
    * @param array $conditions
    *   Additional conditions to add to the query.
    *
-   * @return \Drupal\Core\Database\StatementInterface|mixed
+   * @return StatementInterface|mixed
    *   Either the executed query or the count.
    */
   public function fetchUsageData($type, $eventType = NULL, $entityTypeId = NULL, $entityId = NULL, $count = TRUE, array $conditions = []);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


4) modules/contrib/usage_data/src/UsageDataInterface.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data;

+use Drupal\Core\GeneratedUrl;
 /**
  * Interface definition for the main service.
  */
@@ @@
   /**
    * Helper to retrieve post path.
    *
-   * @return \Drupal\Core\GeneratedUrl|string
+   * @return GeneratedUrl|string
    *   The path to the tracking script.
    */
   public function getPostUrl();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


5) modules/contrib/usage_data/src/UsageDataDatabaseStorage.php:27

    ---------- begin diff ----------
@@ @@
   /**
    * The database connection used.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected Connection $connection;

@@ @@
   /**
    * The usage type manager.
    *
-   * @var \Drupal\usage_data\Plugin\UsageTypeManagerInterface
+   * @var UsageTypeManagerInterface
    */
   protected UsageTypeManagerInterface $usageTypeManager;

@@ @@
   /**
    * Constructs the database storage.
    *
-   * @param \Drupal\Core\Database\Connection $connection
+   * @param Connection $connection
    *   The database connection for the node view storage.
-   * @param \Drupal\usage_data\Plugin\UsageTypeManagerInterface $usageTypeManager
+   * @param UsageTypeManagerInterface $usageTypeManager
    *   The usage type manager.
    */
   public function __construct(Connection $connection, UsageTypeManagerInterface $usageTypeManager) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


6) modules/contrib/usage_data/src/UsageData.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data;

+use Drupal\usage_data\Plugin\UsageTypeInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Extension\ModuleHandlerInterface;
 use Drupal\Core\Url;
@@ @@
   /**
    * Usage type manager.
    *
-   * @var \Drupal\usage_data\Plugin\UsageTypeManagerInterface
+   * @var UsageTypeManagerInterface
    */
   protected UsageTypeManagerInterface $usageTypeManager;

@@ @@
   /**
    * Event dispatcher.
    *
-   * @var \Symfony\Component\EventDispatcher\EventDispatcherInterface
+   * @var EventDispatcherInterface
    */
   protected EventDispatcherInterface $eventDispatcher;

@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected ConfigFactoryInterface $configFactory;

@@ @@
   /**
    * The module handler.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected ModuleHandlerInterface $moduleHandler;

@@ @@
   /**
    * The current request.
    *
-   * @var \Symfony\Component\HttpFoundation\Request
+   * @var Request
    */
   protected Request $request;

@@ @@
   /**
    * Constructs a new usage data object.
    *
-   * @param \Drupal\usage_data\Plugin\UsageTypeManagerInterface $usageTypeManager
+   * @param UsageTypeManagerInterface $usageTypeManager
    *   The usage type manager.
-   * @param \Symfony\Component\EventDispatcher\EventDispatcherInterface $eventDispatcher
+   * @param EventDispatcherInterface $eventDispatcher
    *   Used for dispatching social auth events.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The configuration factory.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $moduleHandler
+   * @param ModuleHandlerInterface $moduleHandler
    *   The module handler.
-   * @param \Symfony\Component\HttpFoundation\RequestStack $requestStack
+   * @param RequestStack $requestStack
    *   The request stack.
    */
   public function __construct(UsageTypeManagerInterface $usageTypeManager, EventDispatcherInterface $eventDispatcher, ConfigFactoryInterface $configFactory, ModuleHandlerInterface $moduleHandler, RequestStack $requestStack) {
@@ @@
     $data = [];
     $activePluginDefinitions = $this->usageTypeManager->getActiveDefinitions();
     foreach ($activePluginDefinitions as $id => $definition) {
-      /** @var \Drupal\usage_data\Plugin\UsageTypeInterface $plugin */
+      /** @var UsageTypeInterface $plugin */
       $plugin = $this->usageTypeManager->createInstance($id);
       if ($parsed = $plugin->parseEvent($eventType, $entityTypeId, $entityId, $render, $additionalData)) {
         // Collect extra data event.
@@ @@
    * {@inheritDoc}
    */
   public function getPostUrl() {
-    $path = drupal_get_path('module', 'usage_data');
+    $path = \Drupal::service('extension.list.module')->getPath('usage_data');
     return Url::fromUri('base:' . $path . '/usage_data.php')->toString();
   }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


7) modules/contrib/usage_data/src/Plugin/views/sort/UsageDataSort.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data\Plugin\views\sort;

+use Drupal\usage_data\UsageDataStorageInterface;
+use Drupal\views\Plugin\ViewsHandlerManager;
 use Drupal\usage_data\Plugin\UsageTypeCountInterface;
 use Drupal\views\Plugin\views\sort\SortPluginBase;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * The usage storage.
    *
-   * @var \Drupal\usage_data\UsageDataStorageInterface
+   * @var UsageDataStorageInterface
    */
   protected $usageStorage;

@@ @@
   /**
    * The views handler join.
    *
-   * @var \Drupal\views\Plugin\ViewsHandlerManager
+   * @var ViewsHandlerManager
    */
   protected $viewsJoin;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/usage_data/src/Plugin/views/field/UsageDataField.php:18

    ---------- begin diff ----------
@@ @@
   /**
    * Usage Data database storage.
    *
-   * @var \Drupal\usage_data\UsageDataDatabaseStorage
+   * @var UsageDataDatabaseStorage
    */
   protected $usageDataDatabaseStorage;

@@ @@
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\usage_data\UsageDataDatabaseStorage $usageDataDatabaseStorage
+   * @param UsageDataDatabaseStorage $usageDataDatabaseStorage
    *   Usage Data database storage.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, UsageDataDatabaseStorage $usageDataDatabaseStorage) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/usage_data/src/Plugin/UsageTypePluginBase.php:16

    ---------- begin diff ----------
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected EntityTypeManagerInterface $entityTypeManager;

@@ @@
   /**
    * The current path.
    *
-   * @var \Drupal\Core\Path\CurrentPathStack
+   * @var CurrentPathStack
    */
   protected CurrentPathStack $currentPath;

@@ @@
    *   The plugin id.
    * @param mixed $plugin_definition
    *   The plugin definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
+   * @param EntityTypeManagerInterface $entityTypeManager
    *   The entity type manager.
-   * @param \Drupal\Core\Path\CurrentPathStack $currentPath
+   * @param CurrentPathStack $currentPath
    *   The current path service.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entityTypeManager, CurrentPathStack $currentPath) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/usage_data/src/Plugin/UsageTypeManager.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected ConfigFactoryInterface $configFactory;

@@ @@
    * @param \Traversable $namespaces
    *   An object that implements \Traversable which contains the root paths
    *   keyed by the corresponding namespace to look for plugin implementations.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   * @param CacheBackendInterface $cache_backend
    *   Cache backend instance to use.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler to invoke the alter hook with.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The configuration factory.
    */
   public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler, ConfigFactoryInterface $config_factory) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/usage_data/src/Plugin/UsageType/Legacy.php:28

    ---------- begin diff ----------
@@ @@
   /**
    * The current user.
    *
-   * @var \Drupal\Core\Session\AccountProxyInterface
+   * @var AccountProxyInterface
    */
   protected AccountProxyInterface $currentUser;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/usage_data/src/Plugin/QueueWorker/UsageDataRecords.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data\Plugin\QueueWorker;

+use Drupal\usage_data\UsageDataDatabaseStorage;
 use Drupal\Core\Queue\QueueWorkerBase;

 /**
@@ @@
    * {@inheritdoc}
    */
   public function processItem($data) {
-    /** @var \Drupal\usage_data\UsageDataDatabaseStorage $databaseStorage */
+    /** @var UsageDataDatabaseStorage $databaseStorage */
     $databaseStorage = \Drupal::service('usage_data.storage.database');
     $databaseStorage->recordUsage($data);
   }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/usage_data/src/Form/SettingsForm.php:16

    ---------- begin diff ----------
@@ @@
   /**
    * Usage type manager.
    *
-   * @var \Drupal\usage_data\Plugin\UsageTypeManagerInterface
+   * @var UsageTypeManagerInterface
    */
   protected UsageTypeManagerInterface $usageTypeManager;

@@ @@
   /**
    * The module handler.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected ModuleHandlerInterface $moduleHandler;

@@ @@
   /**
    * Creates a SettingsForm instance.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   Config factory class instance.
-   * @param \Drupal\usage_data\Plugin\UsageTypeManagerInterface $usageTypeManager
+   * @param UsageTypeManagerInterface $usageTypeManager
    *   The usage type manager.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler to invoke the alter hook with.
    */
   public function __construct(ConfigFactoryInterface $config_factory, UsageTypeManagerInterface $usageTypeManager, ModuleHandlerInterface $module_handler) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/usage_data/src/Event/RecordingViewEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data\Event;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * Event fired when a view record data is about to be stored.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/usage_data/src/Event/CollectExtraDataEvent.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data\Event;

-use Symfony\Component\EventDispatcher\Event;
+use Symfony\Contracts\EventDispatcher\Event;

 /**
  * Event fired when collecting extra data to be passed to the ajax call.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/usage_data/src/Annotation/UsageType.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\usage_data\Annotation;

+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;

 /**
@@ @@
   /**
    * The human-readable name of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
@@ @@
   /**
    * The description of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
    ----------- end diff -----------

Applied rules:
 * PseudoNamespaceToNamespaceRector


 [WARNING] 2 nodes were removed                                                 

 [OK] 16 files have been changed by Rector                                      

