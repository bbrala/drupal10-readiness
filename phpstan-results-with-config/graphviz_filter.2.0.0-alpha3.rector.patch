diff --git a/graphviz_filter.info.yml b/graphviz_filter.info.yml
index b86495c..cfe80f3 100644
--- a/graphviz_filter.info.yml
+++ b/graphviz_filter.info.yml
@@ -1,8 +1,7 @@
 name: Graphviz Filter
 type: module
 description: Treats input text as DOT syntax and passes it to dot, neato or other, embedding the output into the page.
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: Filters
 
 # Information added by Drupal.org packaging script on 2020-09-11
diff --git a/graphviz_filter.module b/graphviz_filter.module
index 7daa637..4207f9a 100644
--- a/graphviz_filter.module
+++ b/graphviz_filter.module
@@ -1,5 +1,11 @@
 <?php
 
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
+use Drupal\Core\Entity\EntityStorageException;
+use Drupal\file\FileStorage;
+use Drupal\Core\Entity\Query\Sql\Query;
 /**
  * @file
  * Provides new "Graphviz" filter that interprets text as DOT syntax
@@ -91,7 +97,7 @@ function graphviz_filter_file_download($uri) {
 /**
  * Implements hook_entity_delete().
  */
-function graphviz_filter_entity_delete(Drupal\Core\Entity\EntityInterface $entity) {
+function graphviz_filter_entity_delete(EntityInterface $entity) {
   if ($entity->isSyncing()
       || !$entity instanceof ContentEntityBase) {
     return;
@@ -123,15 +129,15 @@ function graphviz_filter_entity_delete(Drupal\Core\Entity\EntityInterface $entit
  *
  * @param $name
  *
- * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
- * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
- * @throws \Drupal\Core\Entity\EntityStorageException
+ * @throws InvalidPluginDefinitionException
+ * @throws PluginNotFoundException
+ * @throws EntityStorageException
  */
 function graphviz_filter_delete_files_by_name($name) {
-  /** @var \Drupal\file\FileStorage $storage */
+  /** @var FileStorage $storage */
   $storage = \Drupal::service('entity_type.manager')->getStorage('file');
 
-  /** @var \Drupal\Core\Entity\Query\Sql\Query $query */
+  /** @var Query $query */
   $query = $storage->getQuery();
   $query->condition('uri', '%' . FilterGraphviz::getDirectory() . '/' . $name . '%', 'LIKE');
   $fids = $query->execute();
diff --git a/src/Annotation/FilterFormat.php b/src/Annotation/FilterFormat.php
index 27a451d..30928c7 100644
--- a/src/Annotation/FilterFormat.php
+++ b/src/Annotation/FilterFormat.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\graphviz_filter\Annotation;
 
+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;
 
 /**
@@ -23,7 +24,7 @@ class FilterFormat extends Plugin {
   /**
    * The label of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
@@ -32,7 +33,7 @@ class FilterFormat extends Plugin {
   /**
    * The plugin description.
    *
-   * @var \Drupal\Core\Annotation\Translation (optional)
+   * @var Translation (optional)
    *
    * @ingroup plugin_translatable
    */
diff --git a/src/Plugin/Filter/FilterGraphviz.php b/src/Plugin/Filter/FilterGraphviz.php
index 29f86cc..c483909 100644
--- a/src/Plugin/Filter/FilterGraphviz.php
+++ b/src/Plugin/Filter/FilterGraphviz.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\graphviz_filter\Plugin\Filter;
 
+use Drupal\Component\Plugin\Exception\PluginException;
 use Drupal\Component\Utility\Html;
 use Drupal\Core\Messenger\MessengerInterface;
 use Drupal\Core\Session\AccountProxyInterface;
@@ -53,40 +54,40 @@ class FilterGraphviz extends FilterBase implements ContainerFactoryPluginInterfa
   protected $arguments = [];
 
   /**
-   * @var \Drupal\graphviz_filter\Plugin\FilterFormatPluginManager
+   * @var FilterFormatPluginManager
    */
   protected $filterFormatPluginManager;
 
   /**
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
 
   /**
    * The Messenger service.
    *
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;
 
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;
 
   /**
    * The file_system service.
    *
-   * @var \Drupal\Core\File\FileSystem;
+   * @var FileSystem ;
    */
   protected $fileSystem;
 
   /**
    * The current user service.
    *
-   * @var \Drupal\Core\Session\AccountProxyInterface
+   * @var AccountProxyInterface
    */
   protected $user;
 
@@ -96,10 +97,10 @@ class FilterGraphviz extends FilterBase implements ContainerFactoryPluginInterfa
    * @param array $configuration
    * @param $plugin_id
    * @param $plugin_definition
-   * @param \Drupal\graphviz_filter\Plugin\FilterFormatPluginManager $filterFormatPluginManager
-   * @param \Drupal\Core\Render\RendererInterface $renderer
-   * @param \Drupal\Core\Messenger\MessengerInterface $messenger
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   * @param FilterFormatPluginManager $filterFormatPluginManager
+   * @param RendererInterface $renderer
+   * @param MessengerInterface $messenger
+   * @param LoggerChannelFactoryInterface $logger_factory
    * @param \Drupal\Core\File\FileSystem
    * @param \Drupal\Core\Session\AccountProxyInterface
    */
@@ -235,7 +236,7 @@ class FilterGraphviz extends FilterBase implements ContainerFactoryPluginInterfa
    *
    * @return string
    *   Filtered HTML with graphiz code converted to specified format.
-   * @throws \Drupal\Component\Plugin\Exception\PluginException
+   * @throws PluginException
    *
    * @see \Drupal\graphviz_filter\Plugin\Filter\FilterGraphviz::process().
    */
@@ -259,7 +260,7 @@ class FilterGraphviz extends FilterBase implements ContainerFactoryPluginInterfa
     $filename = hash('sha256', $text);
     $this->fileSystem->prepareDirectory($directory, FileSystem::CREATE_DIRECTORY|FileSystem::MODIFY_PERMISSIONS);
     $destination = $directory . '/' . $filename . '.dot';
-    $file = file_save_data($text, $destination, FileSystem::EXISTS_REPLACE);
+    $file = \Drupal::service('file.repository')->writeData($text, $destination, FileSystem::EXISTS_REPLACE);
 
     // Render desired formats.
     $build = [
diff --git a/src/Plugin/FilterFormat/FilterFormatBase.php b/src/Plugin/FilterFormat/FilterFormatBase.php
index 36a9bf6..98812b4 100644
--- a/src/Plugin/FilterFormat/FilterFormatBase.php
+++ b/src/Plugin/FilterFormat/FilterFormatBase.php
@@ -17,7 +17,7 @@ abstract class FilterFormatBase extends PluginBase implements FilterFormatInterf
   use StringTranslationTrait;
 
   /**
-   * @var \Drupal\filter\FilterPluginManager
+   * @var FilterPluginManager
    */
   protected $filterPluginManager;
 
@@ -27,7 +27,7 @@ abstract class FilterFormatBase extends PluginBase implements FilterFormatInterf
    * @param array $configuration
    * @param $plugin_id
    * @param $plugin_definition
-   * @param \Drupal\filter\FilterPluginManager $filter_plugin_manager
+   * @param FilterPluginManager $filter_plugin_manager
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition,
                               FilterPluginManager $filter_plugin_manager) {
diff --git a/src/Plugin/FilterFormat/SvgFilterFormat.php b/src/Plugin/FilterFormat/SvgFilterFormat.php
index 2463d0a..088b277 100644
--- a/src/Plugin/FilterFormat/SvgFilterFormat.php
+++ b/src/Plugin/FilterFormat/SvgFilterFormat.php
@@ -27,8 +27,8 @@ class SvgFilterFormat extends FilterFormatBase {
    * {@inheritdoc}
    */
   public function render($destination, $format_destination, $filename, $format, array $arguments) {
-    $outurl = file_create_url($format_destination);
-    $modurl = url(drupal_get_path('module', 'graphviz_formats'), array('absolute' => TRUE));
+    $outurl = \Drupal::service('file_url_generator')->generateAbsoluteString($format_destination);
+    $modurl = url(\Drupal::service('extension.list.module')->getPath('graphviz_formats'), array('absolute' => TRUE));
     if ($arguments['zgrviewer']['value']) {
       return <<<EOS
 
diff --git a/src/Plugin/FilterFormatPluginManager.php b/src/Plugin/FilterFormatPluginManager.php
index 585dc1e..c0ea788 100644
--- a/src/Plugin/FilterFormatPluginManager.php
+++ b/src/Plugin/FilterFormatPluginManager.php
@@ -19,9 +19,9 @@ class FilterFormatPluginManager extends DefaultPluginManager {
    * @param \Traversable $namespaces
    *   An object that implements \Traversable which contains the root paths
    *   keyed by the corresponding namespace to look for plugin implementations.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   * @param CacheBackendInterface $cache_backend
    *   Cache backend instance to use.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler to invoke the alter hook with.
    */
   public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler) {
