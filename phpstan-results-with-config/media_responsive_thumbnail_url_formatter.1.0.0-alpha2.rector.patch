diff --git a/media_responsive_thumbnail_url_formatter.info.yml b/media_responsive_thumbnail_url_formatter.info.yml
index 2d9223b..9714913 100644
--- a/media_responsive_thumbnail_url_formatter.info.yml
+++ b/media_responsive_thumbnail_url_formatter.info.yml
@@ -2,8 +2,7 @@ name: Media Responsive Thumbnail URL Formatter
 type: module
 description: Provides a field formatter for media reference field
 package: Custom
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 dependencies:
   - media_responsive_thumbnail:media_responsive_thumbnail
   - drupal:responsive_image
diff --git a/src/Plugin/Field/FieldFormatter/MediaResponsiveThumbnailUrlFormatter.php b/src/Plugin/Field/FieldFormatter/MediaResponsiveThumbnailUrlFormatter.php
index c1ae7f9..594e10b 100644
--- a/src/Plugin/Field/FieldFormatter/MediaResponsiveThumbnailUrlFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/MediaResponsiveThumbnailUrlFormatter.php
@@ -55,13 +55,13 @@ class MediaResponsiveThumbnailUrlFormatter extends MediaResponsiveThumbnailForma
     }
 
 
-    /** @var \Drupal\media\MediaInterface[] $media_items */
+    /** @var MediaInterface[] $media_items */
     foreach ($media_items as $delta => $media) {
       $thumbnailUri = $media->get('thumbnail')->entity->getFileUri();
       $urls = [];
       foreach ($image_styles as $image_style_name => $image_style) {
-        $url = $image_style ? $image_style->buildUrl($thumbnailUri) : file_create_url($thumbnailUri);
-        $urls[$image_style_name]['#markup'] = file_url_transform_relative($url);
+        $url = $image_style ? $image_style->buildUrl($thumbnailUri) : \Drupal::service('file_url_generator')->generateAbsoluteString($thumbnailUri);
+        $urls[$image_style_name]['#markup'] = \Drupal::service('file_url_generator')->transformRelative($url);
       }
       $elements[$delta] = [
         '#theme' => 'item_list',
