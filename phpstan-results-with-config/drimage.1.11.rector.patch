diff --git a/src/Controller/DrImageController.php b/src/Controller/DrImageController.php
index 42aff67..9488be4 100644
--- a/src/Controller/DrImageController.php
+++ b/src/Controller/DrImageController.php
@@ -2,6 +2,9 @@
 
 namespace Drupal\drimage\Controller;
 
+use Symfony\Component\HttpFoundation\BinaryFileResponse;
+use Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException;
+use Symfony\Component\HttpKernel\Exception\ServiceUnavailableHttpException;
 use Drupal\Core\Entity\EntityStorageException;
 use Drupal\file\Entity\File;
 use Drupal\image\Controller\ImageStyleDownloadController;
@@ -205,7 +208,7 @@ class DrImageController extends ImageStyleDownloadController {
   /**
    * Deliver an image from the requested parameters.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request object.
    * @param int $width
    *    The requested width in pixels that came from the JS.
@@ -216,12 +219,12 @@ class DrImageController extends ImageStyleDownloadController {
    * @param string $filename
    *    The filename, only here for SEO purposes.
    *
-   * @return \Symfony\Component\HttpFoundation\BinaryFileResponse|\Symfony\Component\HttpFoundation\Response
+   * @return BinaryFileResponse|Response
    *   The transferred file as response or some error response.
    *
-   * @throws \Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException
+   * @throws AccessDeniedHttpException
    *   Thrown when the user does not have access to the file.
-   * @throws \Symfony\Component\HttpKernel\Exception\ServiceUnavailableHttpException
+   * @throws ServiceUnavailableHttpException
    *   Thrown when the file is still being generated.
    */
   public function image(Request $request, $width, $height, $fid, $filename) {
diff --git a/src/Form/DrimageSettingsForm.php b/src/Form/DrimageSettingsForm.php
index df4b566..5191669 100644
--- a/src/Form/DrimageSettingsForm.php
+++ b/src/Form/DrimageSettingsForm.php
@@ -20,25 +20,25 @@ class DrimageSettingsForm extends ConfigFormBase {
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;
 
   /**
    * The module handler.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;
 
   /**
    * Constructs a DrimageSettingsForm object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The factory for configuration objects.
-   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   * @param DateFormatterInterface $date_formatter
    *   The date formatter service.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler.
    */
   public function __construct(ConfigFactoryInterface $config_factory, DateFormatterInterface $date_formatter, ModuleHandlerInterface $module_handler) {
diff --git a/src/Plugin/Field/FieldFormatter/DrImageFormatter.php b/src/Plugin/Field/FieldFormatter/DrImageFormatter.php
index 1435e8c..0eafb0d 100644
--- a/src/Plugin/Field/FieldFormatter/DrImageFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/DrImageFormatter.php
@@ -250,7 +250,7 @@ class DrImageFormatter extends ImageFormatter {
       $elements[$delta]['#alt'] = $element['#item']->getValue()['alt'];
       $elements[$delta]['#data']['original_width'] = $element['#item']->getValue()['width'];
       $elements[$delta]['#data']['original_height'] = $element['#item']->getValue()['height'];
-      $elements[$delta]['#data']['original_source'] = file_url_transform_relative(file_create_url($files[$delta]->getFileUri()));
+      $elements[$delta]['#data']['original_source'] = \Drupal::service('file_url_generator')->generateString($files[$delta]->getFileUri());
 
       // Unset the fallback image.
       unset($elements[$delta]['#image']);
diff --git a/src/Plugin/Field/FieldFormatter/DrImageUriFormatter.php b/src/Plugin/Field/FieldFormatter/DrImageUriFormatter.php
index e1da7d2..149c22e 100644
--- a/src/Plugin/Field/FieldFormatter/DrImageUriFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/DrImageUriFormatter.php
@@ -82,7 +82,7 @@ class DrImageUriFormatter extends DrImageFormatter {
     $elements[0]['#alt'] = $file->getMetaData('alt');
     $elements[0]['#data']['original_width'] = $file->getMetaData('width');
     $elements[0]['#data']['original_height'] = $file->getMetaData('height');
-    $elements[0]['#data']['original_source'] = file_url_transform_relative(file_create_url($file->getFileUri()));
+    $elements[0]['#data']['original_source'] = \Drupal::service('file_url_generator')->generateString($file->getFileUri());
 
     // Unset the fallback image.
     unset($elements[0]['#image']);
