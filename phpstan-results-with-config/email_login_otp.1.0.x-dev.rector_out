modules/contrib/email_login_otp/email_login_otp.install
modules/contrib/email_login_otp/email_login_otp.module
modules/contrib/email_login_otp/src/Controller/GeneralController.php
modules/contrib/email_login_otp/src/EventSubscriber/OtpRedirectSubscriber.php
modules/contrib/email_login_otp/src/Form/OTPForm.php
modules/contrib/email_login_otp/src/Form/OtpSettingsForm.php
modules/contrib/email_login_otp/src/Services/Otp.php

5 files with changes
====================

1) modules/contrib/email_login_otp/src/Services/Otp.php:36

    ---------- begin diff ----------
@@ @@
   public function send($otp, $to = null) {
     $to                = $to ? $to : $this->getField('email');
     $langcode          = $this->languageManager->getCurrentLanguage()->getId();
-    $mail_template     = file_get_contents(drupal_get_path('module', 'email_login_otp').'/templates/email_login_otp_mail.html.twig');
+    $mail_template     = file_get_contents(\Drupal::service('extension.list.module')->getPath('email_login_otp').'/templates/email_login_otp_mail.html.twig');
     $mail_message      = str_replace('{{username}}', $this->username, $mail_template);
     $mail_message      = str_replace('{{otp}}', $otp, $mail_message);
     $params['message'] = $mail_message;
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


2) modules/contrib/email_login_otp/src/Form/OtpSettingsForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\email_login_otp\Form;

+use Drupal\Core\StringTranslation\TranslationManager;
+use Drupal\Core\Session\AccountProxyInterface;
+use Drupal\Core\Database\Connection;
+use Drupal\Core\Messenger\Messenger;
+use Drupal\email_login_otp\Services\Otp;
+use Drupal\Component\Utility\EmailValidator;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * Drupal\Core\StringTranslation\TranslationManager definition.
    *
-   * @var \Drupal\Core\StringTranslation\TranslationManager
+   * @var TranslationManager
    */
   protected $stringTranslation;

@@ @@
   /**
    * Drupal\Core\Session\AccountProxyInterface definition.
    *
-   * @var \Drupal\Core\Session\AccountProxyInterface
+   * @var AccountProxyInterface
    */
   protected $currentUser;

@@ @@
   /**
    * Drupal\Core\Database\Connection definition.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
   /**
    * Drupal\Core\Messenger\Messenger definition.
    *
-   * @var \Drupal\Core\Messenger\Messenger
+   * @var Messenger
    */
   protected $messenger;

@@ @@
   /**
    * Drupal\email_login_otp\Services\Otp definition.
    *
-   * @var \Drupal\email_login_otp\Services\Otp
+   * @var Otp
    */
   protected $otp;

@@ @@
   /**
    * Drupal\Component\Utility\EmailValidator definition.
    *
-   * @var \Drupal\Component\Utility\EmailValidator
+   * @var EmailValidator
    */
   protected $emailValidator;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/email_login_otp/src/Form/OTPForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\email_login_otp\Form;

+use Drupal\Core\Messenger\Messenger;
+use Drupal\email_login_otp\Services\Otp;
+use Drupal\Core\Cache\CacheBackendInterface;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Drupal\Core\TempStore\PrivateTempStoreFactory;
 use Drupal\Core\Form\FormBase;
@@ @@
   /**
    * Drupal\Core\Messenger\Messenger definition.
    *
-   * @var \Drupal\Core\Messenger\Messenger
+   * @var Messenger
    */
   protected $messenger;

@@ @@
   /**
    * Drupal\Core\TempStore\PrivateTempStoreFactory definition.
    *
-   * @var \Drupal\Core\TempStore\PrivateTempStoreFactory
+   * @var PrivateTempStoreFactory
    */
   protected $tempStoreFactory;

@@ @@
   /**
    * Drupal\email_login_otp\Services\Otp definition.
    *
-   * @var \Drupal\email_login_otp\Services\Otp
+   * @var Otp
    */
   protected $otp;

@@ @@
   /**
    * Drupal\Core\Cache\CacheBackendInterface definition.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cacheService;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/email_login_otp/src/EventSubscriber/OtpRedirectSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\email_login_otp\EventSubscriber;

+use Symfony\Contracts\EventDispatcher\Event;
+use Symfony\Component\HttpKernel\Event\RequestEvent;
 use Symfony\Component\HttpFoundation\RedirectResponse;
 use Symfony\Component\HttpKernel\KernelEvents;
-use Symfony\Component\HttpKernel\Event\GetResponseEvent;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 use Drupal\Core\TempStore\PrivateTempStoreFactory;
 use Drupal\Core\Session\AccountInterface;
@@ @@
   /**
    * This method is called when the login_redirect is dispatched.
    *
-   * @param \Symfony\Component\EventDispatcher\Event $event
+   * @param Event $event
    *   The dispatched event.
    */
-  public function loginRedirect(GetResponseEvent $event) {
+  public function loginRedirect(RequestEvent $event) {
     $uid = $this->tempStore->get('email_login_otp')->get('uid');
     if (($this->currentPath->getPath() == '/login-otp' && $this->currentUser->isAuthenticated()) ||
     ($this->currentPath->getPath() == '/login-otp' && $uid == null) ||
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


5) modules/contrib/email_login_otp/src/Controller/GeneralController.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\email_login_otp\Controller;

+use Drupal\Core\TempStore\PrivateTempStoreFactory;
+use Drupal\email_login_otp\Services\Otp;
+use Drupal\Core\Session\AccountProxy;
+use Drupal\Core\Path\CurrentPathStack;
 use Drupal\user\Entity\User;
 use Drupal\Core\Controller\ControllerBase;
 use Symfony\Component\HttpFoundation\RedirectResponse;
@@ @@
   /**
    * Drupal\Core\TempStore\PrivateTempStoreFactory definition.
    *
-   * @var \Drupal\Core\TempStore\PrivateTempStoreFactory
+   * @var PrivateTempStoreFactory
    */
   protected $tempstorePrivate;

@@ @@
   /**
    * Drupal\email_login_otp\Services\Otp definition.
    *
-   * @var \Drupal\email_login_otp\Services\Otp
+   * @var Otp
    */
   protected $otp;

@@ @@
   /**
    * Drupal\Core\Session\AccountProxy definition.
    *
-   * @var \Drupal\Core\Session\AccountProxy
+   * @var AccountProxy
    */
   protected $currentUser;

@@ @@
   /**
    * Drupal\Core\Path\CurrentPathStack definition.
    *
-   * @var \Drupal\Core\Path\CurrentPathStack
+   * @var CurrentPathStack
    */
   protected $currentPath;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 5 files have been changed by Rector                                       

