modules/contrib/simple_menu_icons/simple_menu_icons.module

1 file with changes
===================

1) modules/contrib/simple_menu_icons/simple_menu_icons.module:27

    ---------- begin diff ----------
@@ @@
  * Implements hook_form_BASE_FORM_ID_alter()
  *
  * @param $form
- * @param \Drupal\Core\Form\FormStateInterface $form_state
+ * @param FormStateInterface $form_state
  * @param $form_id
  */
 function simple_menu_icons_form_menu_link_content_form_alter(&$form, FormStateInterface $form_state, $form_id) {
@@ @@
  * Process the submitted form.
  *
  * @param $form
- * @param \Drupal\Core\Form\FormStateInterface $form_state
+ * @param FormStateInterface $form_state
  */
 function simple_menu_icons_menu_link_content_form_submit($form, FormStateInterface $form_state) {
   // First we just grab the file ID for the icon we uploaded, if any.
@@ @@

     $menu_icons[] = [
       'mlid' => $item->id,
-      'path' => file_url_transform_relative(file_create_url($image_path)),
+      'path' => \Drupal::service('file_url_generator')->generateString($image_path),
       'width' => $image_width,
     ];
   }
@@ @@
  * Implements hook_css_alter().
  *
  * @param $css
- * @param \Drupal\Core\Asset\AttachedAssetsInterface $assets
+ * @param AttachedAssetsInterface $assets
  */
 function simple_menu_icons_css_alter(&$css, AttachedAssetsInterface $assets) {
   $css_suffix = \Drupal::state()->get('simple_menu_icons_css_suffix') ?: NULL;
@@ @@
     $cssfile = SIMPLE_MENU_ICONS_CSS_PATH . '/menu_icons.css';
   }
   if (file_exists($cssfile) && $css) {
-    $css_path = file_create_url($cssfile);
+    $css_path = \Drupal::service('file_url_generator')->generateAbsoluteString($cssfile);
     if (!empty($css_path)) {
       $css[$css_path] = [
         'weight' => CSS_COMPONENT,
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector


 [OK] 1 file has been changed by Rector                                         

