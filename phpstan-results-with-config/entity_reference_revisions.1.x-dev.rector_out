modules/contrib/entity_reference_revisions/entity_reference_revisions.module
modules/contrib/entity_reference_revisions/entity_reference_revisions.views.inc
modules/contrib/entity_reference_revisions/src/Commands/EntityReferenceRevisionsCommands.php
modules/contrib/entity_reference_revisions/src/EntityNeedsSaveInterface.php
modules/contrib/entity_reference_revisions/src/EntityNeedsSaveTrait.php
modules/contrib/entity_reference_revisions/src/EntityReferenceRevisionsFieldItemList.php
modules/contrib/entity_reference_revisions/src/EntityReferenceRevisionsOrphanPurger.php
modules/contrib/entity_reference_revisions/src/EntityReferenceRevisionsServiceProvider.php
modules/contrib/entity_reference_revisions/src/Form/OrphanedCompositeEntitiesDeleteForm.php
modules/contrib/entity_reference_revisions/src/Normalizer/EntityReferenceRevisionItemNormalizer.php
modules/contrib/entity_reference_revisions/src/Plugin/DataType/EntityReferenceRevisions.php
modules/contrib/entity_reference_revisions/src/Plugin/DataType/EntityRevisionsAdapter.php
modules/contrib/entity_reference_revisions/src/Plugin/Derivative/MigrateEntityReferenceRevisions.php
modules/contrib/entity_reference_revisions/src/Plugin/Field/FieldFormatter/EntityReferenceRevisionsEntityFormatter.php
modules/contrib/entity_reference_revisions/src/Plugin/Field/FieldFormatter/EntityReferenceRevisionsFormatterBase.php
modules/contrib/entity_reference_revisions/src/Plugin/Field/FieldType/EntityReferenceRevisionsItem.php
modules/contrib/entity_reference_revisions/src/Plugin/Field/FieldWidget/EntityReferenceRevisionsAutocompleteWidget.php
modules/contrib/entity_reference_revisions/src/Plugin/QueueWorker/OrphanPurger.php
modules/contrib/entity_reference_revisions/src/Plugin/diff/Field/EntityReferenceRevisionsFieldDiffBuilder.php
modules/contrib/entity_reference_revisions/src/Plugin/migrate/destination/EntityReferenceRevisions.php
modules/contrib/entity_reference_revisions/src/Plugin/views/display/EntityReferenceRevisions.php
modules/contrib/entity_reference_revisions/src/Plugin/views/row/EntityReferenceRevisions.php
modules/contrib/entity_reference_revisions/src/Plugin/views/style/EntityReferenceRevisions.php
modules/contrib/entity_reference_revisions/src/TypedData/EntityRevisionDataDefinition.php
modules/contrib/entity_reference_revisions/tests/modules/entity_composite_relationship_test/src/Entity/EntityTestCompositeRelationship.php
modules/contrib/entity_reference_revisions/tests/modules/entity_host_relationship_test/src/Entity/EntityTestHostRelationship.php
modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsAdminTest.php
modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsAutocompleteTest.php
modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsDiffTest.php
modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsNormalizerTest.php
modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsOrphanRemovalForBaseFieldDefinitionTest.php
modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsOrphanRemovalTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsCompositeTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsCompositeTranslatableFieldTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsCompositeTranslationTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsFormatterTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsSaveTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/Plugin/Derivative/EntityReferenceRevisionsDeriverTest.php
modules/contrib/entity_reference_revisions/tests/src/Kernel/Plugin/migrate/destination/EntityReferenceRevisionsDestinationTest.php

20 files with changes
=====================

1) modules/contrib/entity_reference_revisions/tests/src/Kernel/Plugin/migrate/destination/EntityReferenceRevisionsDestinationTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Kernel\Plugin\migrate\destination;

+use Drupal\migrate\Plugin\MigrationPluginManager;
+use Drupal\entity_reference_revisions\Plugin\migrate\destination\EntityReferenceRevisions;
+use Drupal\Core\Entity\EntityStorageBase;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
 use Drupal\KernelTests\KernelTestBase;
@@ @@
   /**
    * The migration plugin manager.
    *
-   * @var \Drupal\migrate\Plugin\MigrationPluginManager
+   * @var MigrationPluginManager
    */
   protected $migrationPluginManager;

@@ @@
    * @covers ::getEntityTypeId
    */
   public function testGetEntityTypeId(array $definition, $expected) {
-    /** @var \Drupal\migrate\Plugin\Migration $migration */
+    /** @var Migration $migration */
     $migration = $this->migrationPluginManager->createStubMigration($definition);
-    /** @var \Drupal\entity_reference_revisions\Plugin\migrate\destination\EntityReferenceRevisions $destination */
+    /** @var EntityReferenceRevisions $destination */
     $destination = $migration->getDestinationPlugin();

-    /** @var \Drupal\Core\Entity\EntityStorageBase $storage */
+    /** @var EntityStorageBase $storage */
     $reflected_storage = new \ReflectionProperty($destination, 'storage');
     $reflected_storage->setAccessible(TRUE);
     $storage = $reflected_storage->getValue($destination);
@@ @@
    * @covers ::rollbackNonTranslation
    */
   public function testGetEntity(array $definition, array $expected) {
-    /** @var \Drupal\migrate\Plugin\Migration $migration */
+    /** @var Migration $migration */
     $migration = $this->migrationPluginManager->createStubMigration($definition);
     $migrationExecutable = (new MigrateExecutable($migration, $this));
-    /** @var \Drupal\Core\Entity\EntityStorageBase $storage */
+    /** @var EntityStorageBase $storage */
     $reflected_storage = new \ReflectionProperty($migration->getDestinationPlugin(), 'storage');
     $reflected_storage->setAccessible(TRUE);
     $storage = $reflected_storage->getValue($migration->getDestinationPlugin());
@@ @@
    * @covers ::rollbackNonTranslation
    */
   public function testGetEntityForceRevision(array $definition, array $expected) {
-    /** @var \Drupal\migrate\Plugin\Migration $migration */
+    /** @var Migration $migration */
     $migration = $this->migrationPluginManager->createStubMigration($definition);
     $migrationExecutable = (new MigrateExecutable($migration, $this));
-    /** @var \Drupal\Core\Entity\EntityStorageBase $storage */
+    /** @var EntityStorageBase $storage */
     $reflected_storage = new \ReflectionProperty($migration->getDestinationPlugin(), 'storage');
     $reflected_storage->setAccessible(TRUE);
     $storage = $reflected_storage->getValue($migration->getDestinationPlugin());
@@ @@
     foreach ($data as $datum) {
       $migration = $this->migrationPluginManager->createInstance($datum['definition']['id']);
       $migrationExecutable = (new MigrateExecutable($migration, $this));
-      /** @var \Drupal\Core\Entity\EntityStorageBase $storage */
+      /** @var EntityStorageBase $storage */
       $reflected_storage = new \ReflectionProperty($migration->getDestinationPlugin(), 'storage');
       $reflected_storage->setAccessible(TRUE);
       $storage = $reflected_storage->getValue($migration->getDestinationPlugin());
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsSaveTest.php:78

    ---------- begin diff ----------
@@ @@

     $text = 'Clever text';
     // Set the name to a new text.
-    /** @var \Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship $entity_test */
+    /** @var EntityTestCompositeRelationship $entity_test */
     $entity_test->name = $text;
     $entity_test->setNeedsSave(TRUE);
     // Create a node with a reference to the test entity and save.
@@ @@
     $node->save();

     // Check that the name has been updated when the parent has been saved.
-    /** @var \Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship $entity_test_after */
+    /** @var EntityTestCompositeRelationship $entity_test_after */
     $entity_test_after = EntityTestCompositeRelationship::load($entity_test->id());
     static::assertEquals($entity_test_after->name->value, $text);

@@ @@
     $node_target->save();

     // Create an entity reference field to reference to the test target node.
-    /** @var \Drupal\field\Entity\FieldStorageConfig $field_storage */
+    /** @var FieldStorageConfig $field_storage */
     $field_storage = FieldStorageConfig::create([
       'field_name' => 'target_node_reference',
       'entity_type' => 'node',
@@ @@
       'settings' => ['target_type' => 'node'],
     ]);
     $field_storage->save();
-    /** @var \Drupal\field\Entity\FieldConfig $field */
+    /** @var FieldConfig $field */
     $field = FieldConfig::create([
       'field_storage' => $field_storage,
       'bundle' => 'article',
@@ @@

   /**
    * Tests FieldType\EntityReferenceRevisionsItem::deleteRevision
+   * @doesNotPerformAssertions
    */
   public function testEntityReferenceRevisionsDeleteHandleDeletedChild() {
     $field_storage = FieldStorageConfig::create([
    ----------- end diff -----------

Applied rules:
 * AddDoesNotPerformAssertionToNonAssertingTestRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsFormatterTest.php:77

    ---------- begin diff ----------
@@ @@

     $text = 'Clever text';
     // Set the name to a new text.
-    /** @var \Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship $entity_test */
+    /** @var EntityTestCompositeRelationship $entity_test */
     $entity_test->name = $text;
     $entity_test->setNeedsSave(TRUE);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsCompositeTranslationTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Kernel;

+use Drupal\Core\Database\Connection;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\node\NodeStorageInterface;
+use Drupal\node\NodeInterface;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Field\FieldStorageDefinitionInterface;
 use Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship;
@@ @@
   /**
    * The current database connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
-   *
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
    * Test the storage for handling pending revisions with translations.
    */
   public function testCompositePendingRevisionTranslation() {
-    /** @var \Drupal\node\NodeStorageInterface $node_storage */
+    /** @var NodeStorageInterface $node_storage */
     $node_storage = \Drupal::entityTypeManager()->getStorage('node');

     // Create a nested composite entity.
@@ @@
     $node->save();
     $initial_revision_id = $node->getRevisionId();

-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = $node_storage->load($node->id());

     // Assert that there is only 1 revision when creating a node.
@@ @@
     $this->assertRevisionCount(4, $nested_composite);
     $this->assertRevisionCount(1, $second_nested_composite);

-    /** @var \Drupal\node\NodeInterface $node_de */
+    /** @var NodeInterface $node_de */
     $node_de = $node_storage->loadRevision($node_de->getRevisionId());
     $this->assertFalse($node_de->isDefaultRevision());
     $this->assertFalse((bool) $node_de->isRevisionTranslationAffected());
@@ @@
     // Now assert that all 3 revisions exist as expected. Two translation
     // pending revisions, each composite has the original revision as parent
     // without any existing translation.
-    /** @var \Drupal\node\NodeInterface $node_fr */
+    /** @var NodeInterface $node_fr */
     $node_fr = $node_storage->loadRevision($node_fr->getRevisionId());
     $this->assertFalse($node_fr->isDefaultRevision());
     $this->assertTrue($node_fr->hasTranslation('de'));
@@ @@
    * Tests that composite translations affects the host entity's translations.
    */
   public function testCompositeTranslation() {
-    /** @var \Drupal\node\NodeStorageInterface $node_storage */
+    /** @var NodeStorageInterface $node_storage */
     $node_storage = $this->entityTypeManager->getStorage('node');

     // Create a composite entity.
@@ @@
     ]);
     $node->save();

-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = $node_storage->load($node->id());

     // Assert that there is only 1 revision when creating a node.
@@ @@
    * Tests that nested composite translations affects the host translations.
    */
   public function testNestedCompositeTranslation() {
-    /** @var \Drupal\node\NodeStorageInterface $node_storage */
+    /** @var NodeStorageInterface $node_storage */
     $node_storage = \Drupal::entityTypeManager()->getStorage('node');

     // Create a nested composite entity.
@@ @@
       'composite_reference' => $composite,
     ]);
     $node->save();
-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = $node_storage->load($node->id());

     // Assert that there is only 1 revision when creating a node.
@@ @@
    *
    * @param int $expected
    *   The expected count.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    */
   protected function assertAffectedRevisionCount($expected, EntityInterface $entity) {
@@ @@
    *
    * @param int $expected
    *   The expected amount of revisions.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    */
   protected function assertRevisionCount($expected, EntityInterface $entity) {
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsCompositeTranslatableFieldTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Kernel;

+use Drupal\Core\Database\Connection;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\node\NodeStorageInterface;
+use Drupal\node\NodeInterface;
 use Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
@@ @@
   /**
    * The current database connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
-   *
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
    * Test the storage for handling pending revisions with translations.
    */
   public function testCompositePendingRevisionTranslation() {
-    /** @var \Drupal\node\NodeStorageInterface $node_storage */
+    /** @var NodeStorageInterface $node_storage */
     $node_storage = \Drupal::entityTypeManager()->getStorage('node');

     // Create the test composite entity.
@@ @@
     ]);
     $node->save();

-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = $node_storage->load($node->id());

     // Assert the revision count.
@@ @@
     $composite_de = $node->get('composite_reference')->entity->createDuplicate();
     $composite_de->set('langcode', 'de');
     $composite_de->set('name', 'Pending Revision Composite #1 DE');
-    /** @var \Drupal\node\NodeInterface $node_de */
+    /** @var NodeInterface $node_de */
     $node_de = $node->addTranslation('de', ['title' => 'Pending Revision Node #1 DE', 'composite_reference' => $composite_de] + $node->toArray());
     $node_de->setNewRevision(TRUE);
     $node_de->isDefaultRevision(FALSE);
@@ @@
     // The DE translation will now reference to a pending revision of the
     // composite entity but the en translation will reference the existing,
     // unchanged revision.
-    /** @var \Drupal\node\NodeInterface $node_revision */
+    /** @var NodeInterface $node_revision */
     $node_revision = $node_storage->loadRevision($node_de->getRevisionId());
     $this->assertFalse($node_revision->isDefaultRevision());
     $this->assertFalse((bool) $node_revision->isRevisionTranslationAffected());
@@ @@
     // Now assert that all 3 revisions exist as expected. Two translation
     // pending revisions, each has the original revision as parent without
     // any existing translation.
-    /** @var \Drupal\node\NodeInterface $node_fr */
+    /** @var NodeInterface $node_fr */
     $node_revision = $node_storage->loadRevision($node_fr->getRevisionId());
     $this->assertFalse($node_revision->isDefaultRevision());
     $this->assertFalse((bool) $node_revision->isRevisionTranslationAffected());
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/entity_reference_revisions/tests/src/Kernel/EntityReferenceRevisionsCompositeTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Kernel;

+use Drupal\Core\Database\Connection;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\Core\Cron;
+use Drupal\node\NodeInterface;
 use Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\field\Entity\FieldStorageConfig;
@@ @@
   /**
    * The current database connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
-   *
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The cron service.
    *
-   * @var \Drupal\Core\Cron
+   * @var Cron
    */
   protected $cron;

@@ @@
     $this->assertEquals(1, $composite_revisions_count);

     // Create a node with a reference to the test composite entity.
-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = Node::create(array(
       'title' => $this->randomMachineName(),
       'type' => 'article',
@@ @@
     $node->save();
     $nid = $node->id();
     $node_storage->resetCache([$nid]);
-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = $node_storage->load($nid);

     // Check the composite has changed.
@@ @@
     ]);
     $composite->save();
     // Create a node with a reference to the test composite entity.
-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     $node = Node::create([
       'title' => $this->randomMachineName(),
       'type' => 'article',
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsOrphanRemovalTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Functional;

+use Drupal\user\UserInterface;
+use Drupal\node\NodeStorageInterface;
 use Drupal\Core\Site\Settings;
 use Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship;
 use Drupal\field\Entity\FieldConfig;
@@ @@
   /**
    * A user with administration access.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;

@@ @@
    * Inserts revisionable entities needed for testing.
    */
   public function insertRevisionableData() {
-    /** @var \Drupal\node\NodeStorageInterface $node_storage */
+    /** @var NodeStorageInterface $node_storage */
     $node_storage = \Drupal::entityTypeManager()->getStorage('node');
     NodeType::create(['type' => 'revisionable', 'new_revision' => TRUE])->save();
     // Add a translatable field and a not translatable field to both content
@@ @@
    * Inserts non revisionable entities needed for testing.
    */
   public function insertNonRevisionableData() {
-    /** @var \Drupal\node\NodeStorageInterface $node_storage */
+    /** @var NodeStorageInterface $node_storage */
     NodeType::create(['type' => 'non_revisionable', 'new_revision' => FALSE])->save();
     // Add a translatable field and a not translatable field to both content
     // types.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsOrphanRemovalForBaseFieldDefinitionTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Functional;

+use Drupal\user\UserInterface;
+use Drupal\node\NodeStorageInterface;
+use Drupal\Core\Entity\RevisionableInterface;
 use Drupal\entity_composite_relationship_test\Entity\EntityTestCompositeRelationship;
 use Drupal\entity_host_relationship_test\Entity\EntityTestHostRelationship;

@@ @@
   /**
    * A user with administration access.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;

@@ @@
    * {@inheritdoc}
    */
   public function insertRevisionableData() {
-    /** @var \Drupal\node\NodeStorageInterface $entity_host_storage */
+    /** @var NodeStorageInterface $entity_host_storage */
     $entity_host_storage = \Drupal::entityTypeManager()->getStorage('entity_host_relationship_test');
     // Scenario 1: A composite with a default revision that is referenced and an
     // old revision that is not. Result: Only the old revision is deleted.
@@ @@
    * @param bool $reset
    *   (optional) Whether to reset the entity cache.
    *
-   * @return \Drupal\Core\Entity\RevisionableInterface
+   * @return RevisionableInterface
    *   A revisionable entity matching $name.
    */
   protected function getEntityHostByName($name, $reset = FALSE) {
@@ @@
       \Drupal::entityTypeManager()->getStorage('entity_host_relationship_test')->resetCache();
     }
     $name = (string) $name;
-    /** @var \Drupal\Core\Entity\RevisionableInterface[] $entities */
+    /** @var RevisionableInterface[] $entities */
     $entities = \Drupal::entityTypeManager()
       ->getStorage('entity_host_relationship_test')
       ->loadByProperties(['name' => $name]);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsAutocompleteTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\entity_reference_revisions\Functional;

+use Drupal\block\BlockInterface;
 use Drupal\block_content\Entity\BlockContent;
 use Drupal\Component\Utility\Html;
 use Drupal\node\Entity\Node;
@@ @@
    * @param $reset
    *   (optional) Whether to reset the entity cache.
    *
-   * @return \Drupal\block\BlockInterface
+   * @return BlockInterface
    *   A block entity matching $info.
    */
   function drupalGetBlockByInfo($info, $reset = FALSE) {
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/entity_reference_revisions/tests/src/Functional/EntityReferenceRevisionsAdminTest.php:157

    ---------- begin diff ----------
@@ @@

   /**
    * Tests target bundle settings for an entity reference revisions field.
+   * @doesNotPerformAssertions
    */
   public function testMultipleTargetBundles() {
     // Create a couple of content types for the ERR field to point to.
    ----------- end diff -----------

Applied rules:
 * AddDoesNotPerformAssertionToNonAssertingTestRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * AssertEqualsParameterToSpecificMethodsTypeRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/entity_reference_revisions/src/Plugin/migrate/destination/EntityReferenceRevisions.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_reference_revisions\Plugin\migrate\destination;

+use Drupal\Core\Entity\RevisionableInterface;
+use Drupal\Core\Entity\EntityInterface;
 use Drupal\Component\Plugin\ConfigurableInterface;
 use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\TypedData\TranslatableInterface;
@@ @@

     // If a specific revision_id is supplied and exists, assert the entity_id
     // matches (if supplied), and update the revision.
-    /** @var \Drupal\Core\Entity\RevisionableInterface|\Drupal\Core\Entity\EntityInterface $entity */
+    /** @var RevisionableInterface|EntityInterface $entity */
     if (!empty($revision_id) && ($entity = $this->storage->loadRevision($revision_id))) {
       if (!empty($entity_id) && ($entity->id() != $entity_id)) {
         throw new MigrateException("The revision_id exists for this entity type, but does not belong to the given entity id");
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/entity_reference_revisions/src/Plugin/QueueWorker/OrphanPurger.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_reference_revisions\Plugin\QueueWorker;

+use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Database\Connection;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
@@ @@
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The purger.
    *
-   * @var \Drupal\entity_reference_revisions\EntityReferenceRevisionsOrphanPurger
+   * @var EntityReferenceRevisionsOrphanPurger
    */
   protected $purger;

@@ @@
   /**
    * The database.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager service.
-   * @param \Drupal\entity_reference_revisions\EntityReferenceRevisionsOrphanPurger $purger
+   * @param EntityReferenceRevisionsOrphanPurger $purger
    *   The purger service.
-   * @param \Drupal\Core\Database\Connection $database
+   * @param Connection $database
    *   The database service.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entity_type_manager, EntityReferenceRevisionsOrphanPurger $purger, Connection $database) {
@@ @@
       ->execute()
       ->fetchCol();

-    /** @var \Drupal\Core\Entity\ContentEntityInterface $composite_revision */
+    /** @var ContentEntityInterface $composite_revision */
     foreach ($composite_storage->loadMultipleRevisions($entity_revision_ids) as $composite_revision) {
       if (!$this->purger->isUsed($composite_revision)) {
         $this->purger->deleteUnusedRevision($composite_revision);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/entity_reference_revisions/src/Plugin/Field/FieldType/EntityReferenceRevisionsItem.php:78

    ---------- begin diff ----------
@@ @@
       return $entity_type->get('common_reference_revisions_target') && $entity_type->isRevisionable();
     });

-    /** @var \Drupal\Core\Entity\EntityTypeInterface $entity_type */
+    /** @var EntityTypeInterface $entity_type */
     foreach ($common_references as $entity_type) {

       $options[$entity_type->id()] = [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/entity_reference_revisions/src/Plugin/Field/FieldFormatter/EntityReferenceRevisionsEntityFormatter.php:26

    ---------- begin diff ----------
@@ @@
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;

@@ @@
   /**
    * The entity display repository.
    *
-   * @var \Drupal\Core\Entity\EntityDisplayRepositoryInterface
+   * @var EntityDisplayRepositoryInterface
    */
   protected $entityDisplayRepository;

@@ @@
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ @@
    *   Any third party settings settings.
    * @param LoggerChannelFactoryInterface $logger_factory
    *   The logger factory.
-   * @param \Drupal\Core\Entity\EntityDisplayRepositoryInterface $entity_display_repository
+   * @param EntityDisplayRepositoryInterface $entity_display_repository
    *   The entity display repository.
    */
   public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, $label, $view_mode, array $third_party_settings, LoggerChannelFactoryInterface $logger_factory, EntityDisplayRepositoryInterface $entity_display_repository) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/entity_reference_revisions/src/Plugin/DataType/EntityReferenceRevisions.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_reference_revisions\Plugin\DataType;

+use Drupal\Core\Entity\TypedData\EntityDataDefinitionInterface;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Entity\Plugin\DataType\EntityReference;

@@ @@
   /**
    * Returns the definition of the referenced entity.
    *
-   * @return \Drupal\Core\Entity\TypedData\EntityDataDefinitionInterface
+   * @return EntityDataDefinitionInterface
    *   The reference target's definition.
    */
   public function getTargetDefinition() {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/entity_reference_revisions/src/Form/OrphanedCompositeEntitiesDeleteForm.php:18

    ---------- begin diff ----------
@@ @@
   /**
    * The Entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The messenger.
    *
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;

@@ @@
   /**
    * The entity reference revisions orphan purger service.
    *
-   * @var \Drupal\entity_reference_revisions\EntityReferenceRevisionsOrphanPurger
+   * @var EntityReferenceRevisionsOrphanPurger
    */
   protected $purger;

@@ @@
   /**
    * OrphanedCompositeEntitiesDeleteForm constructor.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_manager
+   * @param EntityTypeManagerInterface $entity_manager
    *   The EntityTypeManager service.
-   * @param \Drupal\Core\Messenger\MessengerInterface $messenger
+   * @param MessengerInterface $messenger
    *   The messenger.
-   * @param \Drupal\entity_reference_revisions\EntityReferenceRevisionsOrphanPurger $purger
+   * @param EntityReferenceRevisionsOrphanPurger $purger
    *   The entity reference revisions orphan purger.
    */
   public function __construct(EntityTypeManagerInterface $entity_manager, MessengerInterface $messenger, EntityReferenceRevisionsOrphanPurger $purger) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/entity_reference_revisions/src/EntityReferenceRevisionsOrphanPurger.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_reference_revisions;

+use Drupal\Core\Entity\ContentEntityStorageInterface;
+use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\Component\Datetime\TimeInterface;
 use Drupal\Core\Database\Connection;
 use Drupal\Core\Datetime\DateFormatterInterface;
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The entity field manager.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;

@@ @@
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;

@@ @@
   /**
    * The time service.
    *
-   * @var \Drupal\Component\Datetime\TimeInterface
+   * @var TimeInterface
    */
   protected $time;

@@ @@
   /**
    * The database service.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
   /**
    * The messenger.
    *
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;

@@ @@
   /**
    * Constructs a EntityReferenceRevisionsOrphanManager object.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Core\Entity\EntityFieldManagerInterface $entity_field_manager
+   * @param EntityFieldManagerInterface $entity_field_manager
    *   The entity field manager.
-   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   * @param DateFormatterInterface $date_formatter
    *   The date formatter service.
-   * @param \Drupal\Component\Datetime\TimeInterface $time
+   * @param TimeInterface $time
    *   The time service.
-   * @param \Drupal\Core\Database\Connection $database
+   * @param Connection $database
    *   The database service.
-   * @param \Drupal\Core\Messenger\MessengerInterface $messenger
+   * @param MessengerInterface $messenger
    *   The messenger service.
    */
   public function __construct(EntityTypeManagerInterface $entity_type_manager, EntityFieldManagerInterface $entity_field_manager, DateFormatterInterface $date_formatter, TimeInterface $time, Connection $database, MessengerInterface $messenger) {
@@ @@
   /**
    * Deletes unused revision or an entity if there are no revisions remaining.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $composite_revision
+   * @param ContentEntityInterface $composite_revision
    *   The composite revision.
    *
    * @return bool
@@ @@
   public function deleteOrphansBatchOperation($entity_type_id, &$context) {
     $composite_type = $this->entityTypeManager->getDefinition($entity_type_id);
     $composite_revision_key = $composite_type->getKey('revision');
-    /** @var \Drupal\Core\Entity\ContentEntityStorageInterface $composite_storage */
+    /** @var ContentEntityStorageInterface $composite_storage */
     $composite_storage = $this->entityTypeManager->getStorage($entity_type_id);
     $batch_size = Settings::get('entity_update_batch_size', 50);

@@ @@
       ->execute()
       ->fetchCol();

-    /** @var \Drupal\Core\Entity\ContentEntityInterface $composite_revision */
+    /** @var ContentEntityInterface $composite_revision */
     foreach ($composite_storage->loadMultipleRevisions($entity_revision_ids) as $composite_revision) {
       $context['sandbox']['progress']++;
       $context['sandbox']['current_revision_id'] = $composite_revision->getRevisionId();
@@ @@
   /**
    * Checks if the composite entity is used.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $composite_revision
+   * @param ContentEntityInterface $composite_revision
    *   The composite revision.
    *
    * @return bool
@@ @@
   /**
    * Returns a list of composite entity types.
    *
-   * @return \Drupal\Core\Entity\EntityTypeInterface[]
+   * @return EntityTypeInterface[]
    *   An array of composite entity types.
    */
   public function getCompositeEntityTypes() {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


18) modules/contrib/entity_reference_revisions/src/Commands/EntityReferenceRevisionsCommands.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * The purger service.
    *
-   * @var \Drupal\entity_reference_revisions\EntityReferenceRevisionsOrphanPurger
+   * @var EntityReferenceRevisionsOrphanPurger
    */
   protected $purger;

@@ @@
   /**
    * Constructs a ERRCommands object.
    *
-   * @param \Drupal\entity_reference_revisions\EntityReferenceRevisionsOrphanPurger $purger
+   * @param EntityReferenceRevisionsOrphanPurger $purger
    */
   public function __construct(EntityReferenceRevisionsOrphanPurger $purger) {
     $this->purger = $purger;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


19) modules/contrib/entity_reference_revisions/entity_reference_revisions.views.inc:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\Core\Entity\Sql\DefaultTableMapping;
 /**
  * @file
  * Provides views data for the entity_reference_revisions module.
@@ @@
     $args['@entity'] = $entity_type->getLabel();
     $args['@label'] = $target_entity_type->getSingularLabel();
     $pseudo_field_name = 'reverse__' . $entity_type_id . '__' . $field_name;
-    /** @var \Drupal\Core\Entity\Sql\DefaultTableMapping $table_mapping */
+    /** @var DefaultTableMapping $table_mapping */
     $table_mapping = $entity_manager->getStorage($entity_type_id)->getTableMapping();
     $data[$target_base_table][$pseudo_field_name]['relationship'] = array(
       'title' => t('@entity using @field_name', $args),
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


20) modules/contrib/entity_reference_revisions/entity_reference_revisions.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\Core\Field\FieldTypePluginManager;
 /**
  * @file
  * Provides a field that can reference other entities.
@@ @@
               }
             }

-            /** @var \Drupal\Core\Entity\ContentEntityInterface $target_entity */
+            /** @var ContentEntityInterface $target_entity */
             $target_entity = $item->entity;
             if (!$target_entity->hasTranslation($active_langcode)) {
               $target_entity->addTranslation($active_langcode, $target_entity->toArray());
@@ @@
   }

   $entity_type_manager = \Drupal::entityTypeManager();
-  /** @var \Drupal\Core\Field\FieldTypePluginManager $field_type_manager */
+  /** @var FieldTypePluginManager $field_type_manager */
   $field_type_manager = \Drupal::service('plugin.manager.field.field_type');
   foreach ($entity->getFieldDefinitions() as $field_name => $field_definition) {
     $field_class = $field_type_manager->getPluginClass($field_definition->getType());
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


 [ERROR] Could not process                                                      
         "modules/contrib/entity_reference_revisions/src/Plugin/diff/Field/EntityR
         eferenceRevisionsFieldDiffBuilder.php" file, due to:                   
         "Analyze error: "Class Drupal\diff\FieldDiffBuilderBase not found.".   
         Include your files in "$rectorConfig->autoloadPaths([...]);" or        
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

