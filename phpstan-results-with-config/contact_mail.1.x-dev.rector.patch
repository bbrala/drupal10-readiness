diff --git a/contact_mail.info.yml b/contact_mail.info.yml
index 996fea1..5a59970 100644
--- a/contact_mail.info.yml
+++ b/contact_mail.info.yml
@@ -1,7 +1,6 @@
 name: Contact Mail
 description: 'Contact mail formater'
 type: module
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'Mail'
 configure: synmail.config
diff --git a/src/Hook/MailAlter.php b/src/Hook/MailAlter.php
index c8b3c7c..15152f1 100644
--- a/src/Hook/MailAlter.php
+++ b/src/Hook/MailAlter.php
@@ -103,7 +103,7 @@ class MailAlter extends ControllerBase {
             $target = isset($value[0]['target_id']) ? $value[0]['target_id'] : FALSE;
             $file = File::load($target);
             if ($file) {
-              $fileUrl = file_create_url($file->getFileUri());
+              $fileUrl = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
               $val = "<a href='{$fileUrl}'>" . $file->getFilename() . "</a>";
             }
           }
