diff --git a/image_edit.module b/image_edit.module
index 826fccd..db2eb9e 100644
--- a/image_edit.module
+++ b/image_edit.module
@@ -1,11 +1,12 @@
 <?php
+use Drupal\image\Plugin\Field\FieldType\ImageItem;
 use Drupal\Core\Routing\RouteMatchInterface;
 
 /**
  * Implements hook_preprocess_HOOK().
  */
 function image_edit_preprocess_image_formatter(&$variables) {
-  /** @var \Drupal\image\Plugin\Field\FieldType\ImageItem $imageItem */
+  /** @var ImageItem $imageItem */
   $imageItem = $variables['item'];
   $variables['image']['#attributes'] = [
     'data-image-id' => $imageItem->getValue()['target_id']
diff --git a/src/Plugin/Block/ImageEditorOverlay.php b/src/Plugin/Block/ImageEditorOverlay.php
index 232a46f..9f300c3 100644
--- a/src/Plugin/Block/ImageEditorOverlay.php
+++ b/src/Plugin/Block/ImageEditorOverlay.php
@@ -38,7 +38,7 @@ class ImageEditorOverlay extends BlockBase {
         '#type' => 'item',
         '#markup' => file_get_contents(
           \Drupal::root()  . DIRECTORY_SEPARATOR .
-          drupal_get_path('module', 'image_edit') .
+          \Drupal::service('extension.list.module')->getPath('image_edit') .
           DIRECTORY_SEPARATOR . 'popup_template.html'
         ),
         '#attached' => ['library' => ['image_edit/editor_code']],
