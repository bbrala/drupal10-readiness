modules/contrib/image_approval/image_approval.install
modules/contrib/image_approval/image_approval.module
modules/contrib/image_approval/src/Form/ImageApprovalOverview.php
modules/contrib/image_approval/src/ImageApprovalItemInterface.php

2 files with changes
====================

1) modules/contrib/image_approval/src/Form/ImageApprovalOverview.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\image_approval\Form;

+use Drupal\Core\Render\Renderer;
 use Drupal\Core\Url;
 use Drupal\Core\Link;
 use Drupal\image_approval\ImageApprovalItemInterface;
@@ @@
   /**
    * The Database Connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;

@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The render service.
    *
-   * @var \Drupal\Core\Render\Renderer
+   * @var Renderer
    */
   protected $renderer;

@@ @@
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;
   /**
    * Messenger service.
    *
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;

@@ @@
   /**
    * Creates a ImageApprovalOverview form.
    *
-   * @param \Drupal\Core\Database\Connection $database
+   * @param Connection $database
    *   The connection service.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The render service.
-   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   * @param DateFormatterInterface $date_formatter
    *   The date formatter service.
-   * @param \Drupal\Core\Messenger\MessengerInterface $messenger
+   * @param MessengerInterface $messenger
    *   The messenger service.
    */
   public function __construct(Connection $database, EntityTypeManagerInterface $entity_type_manager, RendererInterface $renderer, DateFormatterInterface $date_formatter, MessengerInterface $messenger) {
@@ @@
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    * @param string $type
    *   The type of the overview form ('awaiting','approve' or 'disapprove').
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/image_approval/image_approval.module:80

    ---------- begin diff ----------
@@ @@
   $url = $file->getFileUri();
   $info = pathinfo($url);
   \Drupal::service('file_system')->prepareDirectory($info['dirname'], FileSystemInterface::CREATE_DIRECTORY);
-  $destination = file_stream_wrapper_uri_normalize($info['dirname'] . '/picture-' . $uid . '-' . REQUEST_TIME . '.' . $info['extension']);
+  $destination = file_stream_wrapper_uri_normalize($info['dirname'] . '/picture-' . $uid . '-' . \Drupal::time()->getRequestTime() . '.' . $info['extension']);
   // Move the temporary file into the final location.
-  $file = file_move($file, $destination, FILE_EXISTS_RENAME);
+  $file = \Drupal::service('file.repository')->move($file, $destination, FileSystemInterface::EXISTS_RENAME);
   $file->setPermanent();
   $file->save();
   image_approval_image_to_be_moderated($uid, $upload);
@@ @@
     ->values([
       'uid' => $user_id,
       'fid' => $fid,
-      'timestamp' => REQUEST_TIME,
+      'timestamp' => \Drupal::time()->getRequestTime(),
       'status' => ImageApprovalItemInterface::IMAGE_APPROVAL_PENDING ,
       'name' => $username ,
     ])
@@ @@
     ->fields([
       'status' => $status,
       'moderator' => $user->getDisplayName(),
-      'timestamp' => REQUEST_TIME,
+      'timestamp' => \Drupal::time()->getRequestTime(),
     ])
     ->condition('fid', $fid)
     ->execute();
@@ @@
     ->fields([
       'status' => $status,
       'moderator' => $user->getDisplayName(),
-      'timestamp' => REQUEST_TIME,
+      'timestamp' => \Drupal::time()->getRequestTime(),
     ])
     ->condition('fid', $fid)
     ->execute();
    ----------- end diff -----------

Applied rules:
 * FileExistsRenameRector
 * FileMoveRector
 * RequestTimeConstRector
 * ArgumentRemoverRector


 [OK] 2 files have been changed by Rector                                       

