diff --git a/jfu.module b/jfu.module
index 54ab661..b0d3e72 100644
--- a/jfu.module
+++ b/jfu.module
@@ -226,7 +226,7 @@ function jfu_form_alter(&$form, FormStateInterface $form_state, $form_id) {
   
     $url_upload_image = Url::fromRoute('jfu.image_dialog', ['entity_type' => $entity_type, 'bundle' => $bundle], ['absolute' => TRUE]);
     $url_base = Url::fromRoute('<front>', [], ['absolute' => TRUE]);
-    $url_public = file_create_url('public://');
+    $url_public = \Drupal::service('file_url_generator')->generateAbsoluteString('public://');
 
     //TODO: Particular entity reference autocomplete for node
     $target_type = 'node';
diff --git a/src/Form/JfuImageDialog.php b/src/Form/JfuImageDialog.php
index 6c47bd7..b72d984 100644
--- a/src/Form/JfuImageDialog.php
+++ b/src/Form/JfuImageDialog.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\jfu\Form;
 
+use Drupal\file\FileInterface;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Ajax\AjaxResponse;
@@ -24,21 +25,21 @@ class JfuImageDialog extends FormBase {
   /**
    * The file storage service.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $fileStorage;
 
   /**
    * The entity display repository service.
    *
-   * @var \Drupal\Core\Entity\EntityDisplayRepository
+   * @var EntityDisplayRepository
    */
   protected $entityDisplayRepository;
 
   /**
    * Constructs a form object for image dialog.
    *
-   * @param \Drupal\Core\Entity\EntityStorageInterface $file_storage
+   * @param EntityStorageInterface $file_storage
    *   The file storage service.
    */
   public function __construct(EntityStorageInterface $file_storage, EntityDisplayRepository $entity_display_repository) {
@@ -150,7 +151,7 @@ class JfuImageDialog extends FormBase {
     // attributes and set data-entity-type to 'file'.
     $fid = $form_state->getValue(['fid', 0]);
     if (!empty($fid)) {
-      /** @var \Drupal\file\FileInterface $file */
+      /** @var FileInterface $file */
       $file = $this->fileStorage->load($fid);
       $file_url = $file->getFileUri();
       $form_state->setValue(['attributes', 'src'], $file_url);
diff --git a/src/Plugin/Field/FieldWidget/JSONComponentWidget.php b/src/Plugin/Field/FieldWidget/JSONComponentWidget.php
index f3fc157..670ac6f 100644
--- a/src/Plugin/Field/FieldWidget/JSONComponentWidget.php
+++ b/src/Plugin/Field/FieldWidget/JSONComponentWidget.php
@@ -175,7 +175,7 @@ class JSONComponentWidget extends JSONTextareaWidget {
     }
 
     $components = $this->getSetting('components');
-    $cmd = DRUPAL_ROOT . '/' . drupal_get_path('module', 'jfu') . '/component_models/';
+    $cmd = DRUPAL_ROOT . '/' . \Drupal::service('extension.list.module')->getPath('jfu') . '/component_models/';
     $jfu_components = [];
     
     foreach ($components as $name) {
diff --git a/src/Plugin/rest/resource/BlockListResource.php b/src/Plugin/rest/resource/BlockListResource.php
index e252f68..da5d5ad 100644
--- a/src/Plugin/rest/resource/BlockListResource.php
+++ b/src/Plugin/rest/resource/BlockListResource.php
@@ -20,9 +20,8 @@ use Drupal\rest\ResourceResponse;
 class BlockListResource extends ResourceBase {
   /**
    * Responds to entity GET requests.
-   * @return \Drupal\rest\ResourceResponse
+   * @return ResourceResponse
    */
-
   public function get() {
     $blockManager = \Drupal::service('plugin.manager.block');
     $contextRepository = \Drupal::service('context.repository');
