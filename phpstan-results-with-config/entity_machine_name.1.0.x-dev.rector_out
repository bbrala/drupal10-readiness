modules/contrib/entity_machine_name/entity_machine_name.api.php
modules/contrib/entity_machine_name/entity_machine_name.deploy.php
modules/contrib/entity_machine_name/entity_machine_name.install
modules/contrib/entity_machine_name/entity_machine_name.module
modules/contrib/entity_machine_name/entity_machine_name.views.inc
modules/contrib/entity_machine_name/src/Plugin/views/argument_validator/EntityMachineNameNode.php
modules/contrib/entity_machine_name/src/Plugin/views/argument_validator/EntityMachineNameTerm.php
modules/contrib/entity_machine_name/src/Plugin/views/filter/EntityTermIndexMachineName.php
modules/contrib/entity_machine_name/src/Services/EntityMachineNameForm.php
modules/contrib/entity_machine_name/src/Services/EntityMachineNameHelper.php

7 files with changes
====================

1) modules/contrib/entity_machine_name/src/Services/EntityMachineNameHelper.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_machine_name\Services;

+use Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException;
+use Drupal\Component\Plugin\Exception\PluginNotFoundException;
 use Drupal\Component\Utility\Unicode;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected EntityTypeManagerInterface $entityTypeManager;

@@ @@
   /**
    * Constructs a new Entity Machine Name Helper.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
+   * @param EntityTypeManagerInterface $entityTypeManager
    *   The entity type manager.
    */
   public function __construct(EntityTypeManagerInterface $entityTypeManager) {
@@ @@
    *
    * @param string $machine_name
    *   Machine name to uniquify.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity to uniquify.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function uniqueMachineName(string &$machine_name, EntityInterface $entity) {
-    /** @var \Drupal\Core\Entity\EntityInterface $existing */
+    /** @var EntityInterface $existing */
     $existing = $this->entityMachineNameLoad($machine_name, $entity);
     if (!$existing || $existing->id() == $entity->id()) {
       return;
@@ @@
    *
    * @param string $machine_name
    *   The machine name to search for.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity to search.
    *
-   * @return \Drupal\Core\Entity\EntityInterface|null
+   * @return EntityInterface|null
    *   Entity object or NULL.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function entityMachineNameLoad(string $machine_name, EntityInterface $entity): ?EntityInterface {
     $entities = [];
@@ @@
    * @param string $entity_type
    *   The entity type to search.
    *
-   * @return \Drupal\Core\Entity\EntityInterface|null
+   * @return EntityInterface|null
    *   Entity object or NULL.
    *
-   * @throws \Drupal\Component\Plugin\Exception\InvalidPluginDefinitionException
-   * @throws \Drupal\Component\Plugin\Exception\PluginNotFoundException
+   * @throws InvalidPluginDefinitionException
+   * @throws PluginNotFoundException
    */
   public function entityMachineNameLoadByType(string $machine_name, string $entity_type): ?EntityInterface {
     $conditions = [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


2) modules/contrib/entity_machine_name/src/Services/EntityMachineNameForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_machine_name\Services;

+use Drupal\Core\Language\LanguageManagerInterface;
+use Drupal\Core\Transliteration\PhpTransliteration;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\TypedData\Exception\MissingDataException;
+use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Entity\EntityForm;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\StringTranslation\StringTranslationTrait;
@@ @@
   /**
    * The language manager.
    *
-   * @var \Drupal\Core\Language\LanguageManagerInterface
+   * @var LanguageManagerInterface
    */
   private $languageManager;

@@ @@
   /**
    * The transliterator.
    *
-   * @var \Drupal\Core\Transliteration\PhpTransliteration
+   * @var PhpTransliteration
    */
   protected $transliteration;

@@ @@
   /**
    * The module hadler.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;

@@ @@
    *
    * @param array $form
    *   Nested array of form elements that comprise the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    *
-   * @throws \Drupal\Core\TypedData\Exception\MissingDataException
+   * @throws MissingDataException
    */
   public function formAlter(array &$form, FormStateInterface $form_state) {
     if ($form_state->getFormObject() instanceof EntityForm) {
-      /** @var \Drupal\Core\Entity\ContentEntityInterface $entity */
+      /** @var ContentEntityInterface $entity */
       $entity = $form_state->getFormObject()->getEntity();

       if ($entity instanceof TermInterface || $entity instanceof NodeInterface) {
@@ @@
           if ($entity instanceof TermInterface) {
             $this->setMachineNameTerm($entity);
           }
-          /** @var \Drupal\node\NodeInterface $entity */
+          /** @var NodeInterface $entity */
           if ($entity instanceof NodeInterface) {
             $this->setMachineNameNode($entity);
           }
@@ @@
    *
    * @param array $form
    *   Nested array of form elements that comprise the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    */
   public function entityMachineNameFormValidate(array $form, FormStateInterface $form_state) {
@@ @@
   /**
    * Set term machine name.
    *
-   * @param \Drupal\taxonomy\TermInterface $entity
+   * @param TermInterface $entity
    *   The entity.
    */
   protected function setMachineNameTerm(TermInterface $entity) {
@@ @@
   /**
    * Set node machine name.
    *
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    */
   protected function setMachineNameNode(NodeInterface $entity) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


3) modules/contrib/entity_machine_name/src/Plugin/views/filter/EntityTermIndexMachineName.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * The vocabulary storage.
    *
-   * @var \Drupal\taxonomy\VocabularyStorageInterface
+   * @var VocabularyStorageInterface
    */
   protected $vocabularyStorage;

@@ @@
   /**
    * The term storage.
    *
-   * @var \Drupal\taxonomy\TermStorageInterface
+   * @var TermStorageInterface
    */
   protected $termStorage;

@@ @@
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\taxonomy\VocabularyStorageInterface $vocabulary_storage
+   * @param VocabularyStorageInterface $vocabulary_storage
    *   The vocabulary storage.
-   * @param \Drupal\taxonomy\TermStorageInterface $term_storage
+   * @param TermStorageInterface $term_storage
    *   The term storage.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, VocabularyStorageInterface $vocabulary_storage, TermStorageInterface $term_storage) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/entity_machine_name/src/Plugin/views/argument_validator/EntityMachineNameTerm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_machine_name\Plugin\views\argument_validator;

+use Drupal\taxonomy\TermStorageInterface;
+use Drupal\taxonomy\Entity\Term;
 use Drupal\Core\Entity\EntityTypeBundleInfoInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Form\FormStateInterface;
@@ @@
   /**
    * The taxonomy term storage.
    *
-   * @var \Drupal\taxonomy\TermStorageInterface
+   * @var TermStorageInterface
    */
   protected $termStorage;

@@ @@

     // Not knowing which term will be used if more than one is returned check
     // each one.
-    /** @var \Drupal\taxonomy\Entity\Term $term */
+    /** @var Term $term */
     foreach ($terms as $term) {
       if (!$this->validateEntity($term)) {
         return FALSE;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/entity_machine_name/src/Plugin/views/argument_validator/EntityMachineNameNode.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\entity_machine_name\Plugin\views\argument_validator;

+use Drupal\node\NodeStorageInterface;
+use Drupal\node\NodeInterface;
 use Drupal\Core\Entity\EntityTypeBundleInfoInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Form\FormStateInterface;
@@ @@
   /**
    * The node storage.
    *
-   * @var \Drupal\node\NodeStorageInterface
+   * @var NodeStorageInterface
    */
   protected $nodeStorage;

@@ @@

     // Not knowing which node will be used if more than one is returned check
     // each one.
-    /** @var \Drupal\node\NodeInterface $node */
+    /** @var NodeInterface $node */
     foreach ($nodes as $node) {
       if (!$this->validateEntity($node)) {
         return FALSE;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/entity_machine_name/entity_machine_name.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\taxonomy\Entity\Term;
+use Drupal\taxonomy\TermForm;
+use Drupal\entity_machine_name\Services\EntityMachineNameHelper;
 /**
  * @file
  * Primary module hooks for Entity Machine Name module.
@@ @@
   $position = FALSE;

   foreach (Element::children($form['terms']) as $key) {
-    /** @var \Drupal\taxonomy\Entity\Term $term */
+    /** @var Term $term */
     $term = $form['terms'][$key]['#term'];
     if (!empty($term_machine_name = $term->get('machine_name')->first())) {
       $machine_name = $term_machine_name->getValue()['value'];
@@ @@
  *   Name of the term to search for.
  * @param array $element
  *   Element to validate. Defaults to NULL.
- * @param \Drupal\Core\Form\FormStateInterface $form_state
+ * @param FormStateInterface $form_state
  *   Form state.
  *
- * @return \Drupal\Core\Entity\EntityInterface
+ * @return EntityInterface
  *   Entity object or NULL.
  */
 function entity_machine_name_exists_load($machine_name, array $element, FormStateInterface $form_state = NULL) {
@@ @@
   $entity = NULL;
   if (NULL !== $form_state) {
     $buildInfo = $form_state->getBuildInfo();
-    /** @var \Drupal\taxonomy\TermForm $callbackObject */
+    /** @var TermForm $callbackObject */
     $callbackObject = $buildInfo['callback_object'];
-    /** @var \Drupal\taxonomy\Entity\Term $term */
+    /** @var Term $term */
     $entity = $callbackObject->getEntity();
   }
-  /** @var \Drupal\entity_machine_name\Services\EntityMachineNameHelper $service */
+  /** @var EntityMachineNameHelper $service */
   $service = \Drupal::service('entity_machine_name.machine_name_helper');
   return $service->entityMachineNameLoad($machine_name, $entity);
 }
@@ @@
  * Implements hook_ENTITY_TYPE_presave().
  */
 function entity_machine_name_taxonomy_term_presave(EntityInterface $term) {
-  /** @var \Drupal\taxonomy\Entity\Term $term */
+  /** @var Term $term */
   if ($term->get('machine_name')->isEmpty()) {
     $machine_name = $term->get('name')->value;
   }
@@ @@

   // If the alias already exists, generate a new,
   // hopefully unique, variant.
-  /** @var \Drupal\entity_machine_name\Services\EntityMachineNameHelper $service */
+  /** @var EntityMachineNameHelper $service */
   $service = \Drupal::service('entity_machine_name.machine_name_helper');
   $service->uniqueMachineName($machine_name, $term);

@@ @@
  * Implements hook_ENTITY_TYPE_presave().
  */
 function entity_machine_node_presave(EntityInterface $node) {
-  /** @var \Drupal\node\NodeInterface $node */
+  /** @var NodeInterface $node */
   $machine_name = entity_machine_name_clean_name($node->getTitle());

   // If the alias already exists, generate a new,
   // hopefully unique, variant.
-  /** @var \Drupal\entity_machine_name\Services\EntityMachineNameHelper $service */
+  /** @var EntityMachineNameHelper $service */
   $service = \Drupal::service('entity_machine_name.machine_name_helper');
   $service->uniqueMachineName($machine_name, $node);
   // entity_machine_name_uniquify($machine_name, $node);.
@@ @@
 /**
  * Update entity with machine name.
  *
- * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+ * @param ContentEntityInterface $entity
  *   The content entity.
  *
- * @return \Drupal\Core\Entity\ContentEntityInterface
+ * @return ContentEntityInterface
  *   The entity saved.
  */
 function entity_machine_name_entities_update(ContentEntityInterface $entity) {
@@ @@
 /**
  * Update term with machine name.
  *
- * @param \Drupal\taxonomy\TermInterface $term
+ * @param TermInterface $term
  *   Taxonomy term storage.
  *
- * @return \Drupal\taxonomy\TermInterface
+ * @return TermInterface
  *   The taxonomy term.
  */
 function entity_machine_name_update(TermInterface $term) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


7) modules/contrib/entity_machine_name/entity_machine_name.install:14

    ---------- begin diff ----------
@@ @@
 function entity_machine_name_install() {
   batch_set(
     [
-      'file' => drupal_get_path('module', 'entity_machine_name') . '/entity_machine_name.install',
+      'file' => \Drupal::service('extension.list.module')->getPath('entity_machine_name') . '/entity_machine_name.install',
       'title' => t('Generating missing taxonomy term machine names'),
       'init_message' => t('Starting taxonomy term machine names update'),
       'error_message' => t('Error updating taxonomy term machine names'),
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


 [OK] 7 files have been changed by Rector                                       

