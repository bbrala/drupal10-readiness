modules/contrib/instagram_feeds/instagram_feeds.install
modules/contrib/instagram_feeds/instagram_feeds.module
modules/contrib/instagram_feeds/instagram_feeds.tokens.inc
modules/contrib/instagram_feeds/src/CronHandler.php
modules/contrib/instagram_feeds/src/Entity/InstagramAccount.php
modules/contrib/instagram_feeds/src/Entity/InstagramAccountInterface.php
modules/contrib/instagram_feeds/src/Event/InstagramFeedsEventBase.php
modules/contrib/instagram_feeds/src/Event/InstagramPostsObtainedEvent.php
modules/contrib/instagram_feeds/src/Event/MediaEntityInstantiatedEvent.php
modules/contrib/instagram_feeds/src/EventSubscriber/InstagramPostsObtainedSubscriber.php
modules/contrib/instagram_feeds/src/Form/InstagramAccountDeleteForm.php
modules/contrib/instagram_feeds/src/Form/InstagramAccountForm.php
modules/contrib/instagram_feeds/src/Form/SettingsForm.php
modules/contrib/instagram_feeds/src/InstagramAccountListBuilder.php
modules/contrib/instagram_feeds/src/InstagramApiTrait.php
modules/contrib/instagram_feeds/src/Plugin/Action/Derivative/RefreshInstagramTokenActionDeriver.php
modules/contrib/instagram_feeds/src/Plugin/Action/RefreshInstagramTokenAction.php

14 files with changes
=====================

1) modules/contrib/instagram_feeds/src/Plugin/Action/RefreshInstagramTokenAction.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds\Plugin\Action;

+use Drupal\instagram_feeds\Entity\InstagramAccountInterface;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Action\Plugin\Action\EntityActionBase;
 use Drupal\Component\Datetime\TimeInterface;
@@ @@
   /**
    * The time service.
    *
-   * @var \Drupal\Component\Datetime\TimeInterface
+   * @var TimeInterface
    */
   protected $time;

@@ @@
   /**
    * GuzzleHttp\ClientInterface definition.
    *
-   * @var \GuzzleHttp\ClientInterface
+   * @var ClientInterface
    */
   protected $httpClient;

@@ @@
    *   The plugin ID for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Component\Datetime\TimeInterface $time
+   * @param TimeInterface $time
    *   The time service.
    */
   public function __construct(
@@ @@
    * {@inheritdoc}
    */
   public function execute($entity = NULL) {
-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $entity */
+    /** @var InstagramAccountInterface $entity */
     $entity->refreshToken($this->httpClient, TRUE);
   }

@@ @@
    * {@inheritdoc}
    */
   public function access($object, AccountInterface $account = NULL, $return_as_object = FALSE) {
-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $object */
+    /** @var InstagramAccountInterface $object */
     if (!$account) {
       $account = \Drupal::currentUser();
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/instagram_feeds/src/InstagramApiTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds;

+use Psr\Http\Message\ResponseInterface;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Logger\LoggerChannelFactoryInterface;
 use Drupal\Core\Utility\Token;
@@ @@
   /**
    * Guzzle HTTP Client instance.
    *
-   * @var \GuzzleHttp\Client
+   * @var Client
    */
   private $httpClient;

@@ @@
   /**
    * The token service.
    *
-   * @var \Drupal\Core\Utility\Token
+   * @var Token
    */
   private $token;

@@ @@
   /**
    * The Instagram Feeds Logger channel.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   private $logger;

@@ @@
    */
   protected function getInstagramResponceContents($url, $is_json_expected = FALSE) {
     try {
-      /** @var \Psr\Http\Message\ResponseInterface $response */
+      /** @var ResponseInterface $response */
       $response = $this->httpClient()->get($url);
       if ($response->getStatusCode() !== 200) {
         throw new \Exception(t('Invalid responce code @code from Instagram.', [
@@ @@
   /**
    * Returns a channel logger object.
    *
-   * @return \Psr\Log\LoggerInterface
+   * @return LoggerInterface
    *   The logger for instagram_feeds channel.
    */
   protected function logger(): LoggerInterface {
@@ @@
   /**
    * Returns the Guzzle HTTP Client.
    *
-   * @return \GuzzleHttp\Client
+   * @return Client
    */
   protected function httpClient(): Client {
     if (!isset($this->httpClient)) {
@@ @@
   /**
    * Returns the token service.
    *
-   * @return \Drupal\Core\Utility\Token
+   * @return Token
    *   The token service.
    */
   protected function token(): Token {
@@ @@
   /**
    * Sets logger for instagram_feeds channel.
    *
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   * @param LoggerChannelFactoryInterface $logger_factory
    *   The Logger factory service.
    *
    * @return $this
@@ @@
   /**
    * Sets Guzzle HTTP client.
    *
-   * @param \GuzzleHttp\Client $client
+   * @param Client $client
    *  Guzzle HTTP client.
    *
    * @return $this
@@ @@
   /**
    * Sets the token service.
    *
-   * @param \Drupal\Core\Utility\Token $token
+   * @param Token $token
    *   The token service.
    *
    * @return $this
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


3) modules/contrib/instagram_feeds/src/InstagramAccountListBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds;

+use Drupal\instagram_feeds\Entity\InstagramAccountInterface;
 use Drupal\Core\Datetime\DateFormatterInterface;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Entity\EntityListBuilder;
@@ @@
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatterService;

@@ @@
   /**
    * Gets date formatter service.
    *
-   * @return \Drupal\Core\Datetime\DateFormatterInterface
+   * @return DateFormatterInterface
    *   The date formatter service.
    */
   protected function dateFormatter(): DateFormatterInterface {
@@ @@
    * {@inheritdoc}
    */
   public function buildRow(EntityInterface $entity) {
-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $entity */
+    /** @var InstagramAccountInterface $entity */
     $row = [];
     foreach (array_keys($this->getColumns()) as $field) {
       $value = $entity->get($field)->first()->getValue();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/instagram_feeds/src/Form/SettingsForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds\Form;

+use Drupal\Core\Entity\EntityFieldManagerInterface;
+use Drupal\media\MediaTypeInterface;
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\Core\Datetime\DateFormatterInterface;
 use Drupal\Core\Form\ConfigFormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\StreamWrapper\StreamWrapperInterface;
@@ @@
    *
    * @param array $form
    *   Form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   Form state object.
    * @param string $field_name
    *   Parent field name to build the form tree.
@@ @@
       '#tree' => TRUE,
     ];
     $media_types = $this->getInstagramMediaTypes();
-    /** @var \Drupal\Core\Entity\EntityFieldManagerInterface $entity_field_manager */
+    /** @var EntityFieldManagerInterface $entity_field_manager */
     $entity_field_manager = \Drupal::service('entity_field.manager');
-    /** @var \Drupal\media\MediaTypeInterface $media_type */
+    /** @var MediaTypeInterface $media_type */
     foreach ($media_types as $media_type_id => $media_type) {
       $element[$media_type_id] = [
         '#type' => 'details',
@@ @@
   /**
    * Checks if media entity field can be mapped with Instagram data.
    *
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   Media entity field definition.
    *
    * @return bool
@@ @@
   /**
    * Gets Media types with Instagram source.
    *
-   * @return \Drupal\media\MediaTypeInterface[]
+   * @return MediaTypeInterface[]
    *   Media Types options for Select form element.
    */
   protected function getInstagramMediaTypes(): array {
@@ @@
     $options = [];
     $media_types = \Drupal::entityTypeManager()->getStorage('media_type')->loadMultiple();
     foreach ($media_types as $media_type) {
-      /** @var \Drupal\media\MediaTypeInterface $media_type */
+      /** @var MediaTypeInterface $media_type */
       if (in_array($media_type->getSource()->getPluginId(), ['instagram', 'image'])) {
         $options[$media_type->id()] = $media_type;
       }
@@ @@
    */
   protected function getRefreshFrequencyOptions() {
     $days = [2, 5, 7, 10, 14, 30, 45, 59];
-    /** @var \Drupal\Core\Datetime\DateFormatterInterface $date_formatter */
+    /** @var DateFormatterInterface $date_formatter */
     $date_formatter = \Drupal::service('date.formatter');
     $period = array_map(function($val) {
       return $val * 86400;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/instagram_feeds/src/Form/InstagramAccountForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds\Form;

+use Drupal\Core\Config\ImmutableConfig;
+use Drupal\instagram_feeds\Entity\InstagramAccountInterface;
 use Drupal\Core\Entity\ContentEntityForm;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Url;
@@ @@
   /**
    * The instagram_feeds.settings configuration object.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   protected $instagram_feeds_config;

@@ @@
       ];
     }

-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $i_account */
+    /** @var InstagramAccountInterface $i_account */
     $i_account = $this->getEntity();

 //    if ($i_account->isNew() && $i_account->get('token')->isEmpty()) {
@@ @@
     if (empty($this->getConfig('client_id')) || empty($this->getConfig('client_secret'))) {
       return $form;
     }
-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $i_account */
+    /** @var InstagramAccountInterface $i_account */
     $i_account = $this->getEntity();
     if ($this->operation == 'edit') {
       $form['#title'] = $this->t('<em>Edit @type</em> @title', [
@@ @@
   protected function prepareEntity() {
     parent::prepareEntity();

-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $i_account */
+    /** @var InstagramAccountInterface $i_account */
     $i_account = $this->getEntity();
     // Obtain Instagram short-lived and exchange to long-lived token.
     $code = $this->getRequest()->query->get('code');
@@ @@
    *   Form link element renderable array.
    */
   protected function getAuthWindowButton(): array {
-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $i_account */
+    /** @var InstagramAccountInterface $i_account */
     $i_account = $this->getEntity();
     return [
       'auth' => [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/instagram_feeds/src/EventSubscriber/InstagramPostsObtainedSubscriber.php:29

    ---------- begin diff ----------
@@ @@
   /**
    * Constructs a new PageManagerRoutes.
    *
-   * @param \GuzzleHttp\Client $http_client
+   * @param Client $http_client
    *   The instance of Guzzle HTTP Client.
-   * @param \Drupal\Core\Utility\Token $token
+   * @param Token $token
    *   The token service.
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   * @param LoggerChannelFactoryInterface $logger_factory
    *   The Logger factory service.
    */
   public function __construct(Client $http_client, Token $token, LoggerChannelFactoryInterface $logger_factory) {
@@ @@
     // Added for compatibility with Drupal < 8.7.0.
     $this->file_exists_replace = defined('\Drupal\Core\File\FileSystemInterface::EXISTS_REPLACE')
       ? FileSystemInterface::EXISTS_REPLACE
-      : FILE_EXISTS_REPLACE;
+      : FileSystemInterface::EXISTS_REPLACE;
   }

   /**
@@ @@
   /**
    * Reacts on posts obtained event.
    *
-   * @param \Drupal\instagram_feeds\Event\InstagramPostsObtainedEvent $event
+   * @param InstagramPostsObtainedEvent $event
    *   Instance of InstagramPostsObtainedEvent.
    */
   public function onInstagramPostsObtained(InstagramPostsObtainedEvent $event) {
@@ @@
   /**
    * Scrape the Instagram post owner avatar URL using permalink URL.
    *
-   * @param \Drupal\instagram_feeds\Event\InstagramPostsObtainedEvent $event
+   * @param InstagramPostsObtainedEvent $event
    *   Instance of InstagramPostsObtainedEvent.
    *
    * @return string[]
@@ @@
         $full_name = $owner['full_name'] ?? 'Instagram Avatar';
         $avatar_file_extension = pathinfo(parse_url($owner['profile_pic_url'], PHP_URL_PATH), PATHINFO_EXTENSION);
         $file_uri_destination = $avatar_dir . '/' . $account->id() . '.' . $avatar_file_extension;
-        $file = file_save_data($file_data, $file_uri_destination, $this->file_exists_replace);
+        $file = \Drupal::service('file.repository')->writeData($file_data, $file_uri_destination, $this->file_exists_replace);
       }

     }
@@ @@
       return \Drupal::service('file_system')->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY);
     }
     else {
-      return file_prepare_directory($directory, FILE_CREATE_DIRECTORY);
+      return \Drupal::service('file_system')->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY);
     }
   }
    ----------- end diff -----------

Applied rules:
 * FileCreateDirectoryRector
 * FileExistsReplaceRector
 * FilePrepareDirectoryRector
 * FileSaveDataRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


7) modules/contrib/instagram_feeds/src/Event/MediaEntityInstantiatedEvent.php:17

    ---------- begin diff ----------
@@ @@
   /**
    * Just created media entity.
    *
-   * @var \Drupal\media\MediaInterface
+   * @var MediaInterface
    */
   public $mediaEntity;

@@ @@
   /**
    * Constructs the object.
    *
-   * @param \Drupal\Core\Config\ImmutableConfig $configuration
+   * @param ImmutableConfig $configuration
    *   The Instagram feeds module settings.
-   * @param \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @param InstagramAccountInterface $account
    *   The Instagram account.
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   The media entity just created (not saved yet).
    * @param array $post
    *   Instagram single post data.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/instagram_feeds/src/Event/InstagramPostsObtainedEvent.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * Constructs the object.
    *
-   * @param \Drupal\Core\Config\ImmutableConfig $configuration
+   * @param ImmutableConfig $configuration
    *   The Instagram feeds module settings.
-   * @param \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @param InstagramAccountInterface $account
    *   The Instagram account.
    * @param array $posts
    *   The list of Instagram posts to modify.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/instagram_feeds/src/Event/InstagramFeedsEventBase.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds\Event;

+use Symfony\Contracts\EventDispatcher\Event;
 use Drupal\Core\Config\ImmutableConfig;
 use Drupal\instagram_feeds\Entity\InstagramAccountInterface;
-use Symfony\Component\EventDispatcher\Event;

 /**
  * En event occurs when instagram_feeds creates a new media entity.
@@ @@
   /**
    * Instagram Feeds Config bucket.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   private $config;

@@ @@
   /**
    * Instagram account.
    *
-   * @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @var InstagramAccountInterface $account
    */
   private $account;

@@ @@
   /**
    * Constructs the object.
    *
-   * @param \Drupal\Core\Config\ImmutableConfig $configuration
+   * @param ImmutableConfig $configuration
    *   The Instagram feeds module settings.
-   * @param \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @param InstagramAccountInterface $account
    *   The Instagram account.
    */
   public function __construct(ImmutableConfig $configuration, InstagramAccountInterface $account) {
@@ @@
   /**
    * Gets related Instagram Account.
    *
-   * @return \Drupal\instagram_feeds\Entity\InstagramAccountInterface
+   * @return InstagramAccountInterface
    *   Currently processed Instagram account.
    */
   public function getAccount() : InstagramAccountInterface {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/instagram_feeds/src/Entity/InstagramAccountInterface.php:43

    ---------- begin diff ----------
@@ @@
   /**
    * Tries to refresh long-lived Instagram access token.
    *
-   * @param \GuzzleHttp\Client $http_client
+   * @param Client $http_client
    *   Guzzle HTTP Client.
    * @param bool $save
    *   Save entity or not after token has been refreshed successfully.
@@ @@
   /**
    * Gets URL to Instagram Auth form.
    *
-   * @return \Drupal\Core\Url
+   * @return Url
    *   Url to Instagram Auth form.
    */
   public function getOauthUrl($client_id): Url;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


11) modules/contrib/instagram_feeds/src/Entity/InstagramAccount.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds\Entity;

+use Drupal\media\MediaTypeInterface;
+use GuzzleHttp\Psr7\Response;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Entity\ContentEntityBase;
 use Drupal\Core\Entity\EntityTypeInterface;
@@ @@
       ->setDefaultValueCallback(self::class . '::getCurrentUserId');

     $weight = -1 - count($fields) * 5;
-    /** @var \Drupal\Core\Field\BaseFieldDefinition $field */
+    /** @var BaseFieldDefinition $field */
     foreach ($fields as $id => $field) {
       $view_settings = $form_settings = ['weight' => $weight];
       if ($id == 'uid') {
@@ @@
     $options = [];
     $media_types = \Drupal::entityTypeManager()->getStorage('media_type')->loadMultiple();
     foreach ($media_types as $media_type) {
-      /** @var \Drupal\media\MediaTypeInterface $media_type */
+      /** @var MediaTypeInterface $media_type */
       if (in_array($media_type->getSource()->getPluginId(), ['instagram', 'image'])) {
         $options[$media_type->id()] = $media_type->label();
       }
@@ @@
   /**
    * Extracts Instagram data from Guzzle response.
    *
-   * @param \GuzzleHttp\Psr7\Response $response
+   * @param Response $response
    *   Guzzle response.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/instagram_feeds/src/CronHandler.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\instagram_feeds;

+use Drupal\Core\Config\ImmutableConfig;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\taxonomy\TermStorageInterface;
+use Drupal\taxonomy\TermInterface;
+use Drupal\media\MediaTypeInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ @@

   /**
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   protected $config;

@@ @@
   /**
    * Instance of Media storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $mediaStorage;

@@ @@
   /**
    * The event dispatcher service.
    *
-   * @var \Symfony\Component\EventDispatcher\EventDispatcherInterface
+   * @var EventDispatcherInterface
    */
   protected $eventDispatcher;

@@ @@
   /**
    * Entity Type Manager Service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The entity field manager service.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;

@@ @@
   /**
    * The list of published active accounts.
    *
-   * @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface[]
+   * @var InstagramAccountInterface[]
    */
   protected $instagramAccounts;

@@ @@
   /**
    * Gets active Instagram account entities.
    *
-   * @return \Drupal\instagram_feeds\Entity\InstagramAccountInterface[]
+   * @return InstagramAccountInterface[]
    */
   protected function getInstagramAccounts() : array {
     if (!isset($this->instagramAccounts)) {
       $this->instagramAccounts = [];
       $instagram_accounts = $this->entityTypeManager->getStorage('instagram_account')->loadMultiple();
-      /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account */
+      /** @var InstagramAccountInterface $account */
       foreach ($instagram_accounts as $account) {
         // Skip if entity is unpublished or token is invalid.
         if ($account->isPublished() && $account->tokenIsValid()) {
@@ @@
   /**
    * Gets 25 recent posts created by Instagram user.
    *
-   * @param \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @param InstagramAccountInterface $account
    *   Instagram account.
    *
    * @return array
@@ @@
     }
     // Dispatch the event.
     $event = new InstagramPostsObtainedEvent($this->config, $account, $result ?? []);
-    $this->eventDispatcher->dispatch(InstagramPostsObtainedEvent::getEventName(), $event);
+    $this->eventDispatcher->dispatch($event, InstagramPostsObtainedEvent::getEventName());
     return $event->posts;
   }

@@ @@
   /**
    * Instagram posts import processor for the given account.
    *
-   * @param \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @param InstagramAccountInterface $account
    *   Instagram Feed configuration Entity.
    */
   protected function processAccount(InstagramAccountInterface $account) {
@@ @@
    *
    * @param array $post
    *   Instagram post data array.
-   * @param \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account
+   * @param InstagramAccountInterface $account
    *   Instagram Feed configuration Entity.
    */
   protected function createMediaEntity(array $post, InstagramAccountInterface $account) {
@@ @@
         $entity_array['name'] = trim($entity_array['name']);
       }
       elseif ($post_field_name == 'tags' && $post[$post_field_name]) {
-        /** @var \Drupal\Core\Entity\EntityFieldManagerInterface $field_manager */
+        /** @var EntityFieldManagerInterface $field_manager */
         $fields = $this->entityFieldManager->getFieldDefinitions('media', $media_type);
         $field_definition = $fields[$entity_field_name];
         $entity_array[$entity_field_name] = 'entity_reference' == $field_definition->getType()
@@ @@
     $media_entity = $this->mediaStorage->create($entity_array);
     // Dispatch an event, so other modules can modify media entity before save.
     $event = new MediaEntityInstantiatedEvent($this->config, $account, $media_entity, $post);
-    $this->eventDispatcher->dispatch(MediaEntityInstantiatedEvent::getEventName(), $event);
+    $this->eventDispatcher->dispatch($event, MediaEntityInstantiatedEvent::getEventName());

     $event->mediaEntity->save();
   }
@@ @@
   /**
    * Gets IDs of existing ones or creates new taxonomy terms based on hashtags.
    *
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The array of field definitions for the bundle, keyed by field name.
    * @param string[] $tags
    *  Instagram hash tags.
@@ @@
   protected function getTerms(FieldDefinitionInterface $field_definition, $tags) {
     $result = [];
     $settings = $field_definition->getSetting('handler_settings');
-    /** @var \Drupal\taxonomy\TermStorageInterface $term_storage */
+    /** @var TermStorageInterface $term_storage */
     $term_storage = $this->entityTypeManager->getStorage('taxonomy_term');
     $vocabulary = $settings['auto_create_bundle'] ?: reset($settings['target_bundles']);
     $terms = $term_storage->loadByProperties([
@@ @@
     }
     $create_tags = $settings['auto_create'] ? array_diff($tags, $existing_tags) : [];
     foreach ($create_tags as $tag) {
-      /** @var \Drupal\taxonomy\TermInterface $term */
+      /** @var TermInterface $term */
       $term = $term_storage->create([
         'name' => $tag,
         'vid' => $vocabulary,
@@ @@
    */
   protected function getInstagramSourceField($media_type_name): string {
     if (!isset($this->mediaTypeSources[$media_type_name])) {
-      /** @var \Drupal\media\MediaTypeInterface $mediaType */
+      /** @var MediaTypeInterface $mediaType */
       $mediaType = $this->entityTypeManager->getStorage('media_type')->load($media_type_name);
       $this->mediaTypeSources[$media_type_name] = $mediaType->getSource()->getSourceFieldDefinition($mediaType)->getName();
     }
@@ @@
    */
   protected function getInstagramSourcePluginID($media_type_name): string {
     if (!isset($this->mediaTypeSourceIDs[$media_type_name])) {
-      /** @var \Drupal\media\MediaTypeInterface $mediaType */
+      /** @var MediaTypeInterface $mediaType */
       $mediaType = $this->entityTypeManager->getStorage('media_type')->load($media_type_name);
       $this->mediaTypeSourceIDs[$media_type_name] = $mediaType->getSource()->getPluginId();
     }
@@ @@
     $current_time = \Drupal::time()->getRequestTime();
     $frequency = $this->config->get('refresh_frequency');

-    /** @var \Drupal\instagram_feeds\Entity\InstagramAccountInterface $account */
+    /** @var InstagramAccountInterface $account */
     foreach ($this->getInstagramAccounts() as $account) {
       // Long-lived tokens are valid 60 days, so token_expiration - 60 days
       // (5184000 sec) will be the date, when token was generated/refreshed
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * MakeDispatchFirstArgumentEventRector
 * WrapReturnRector


13) modules/contrib/instagram_feeds/instagram_feeds.tokens.inc:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\Core\Datetime\DateFormatterInterface;
 /**
  * @file
  * Provides Token integration for Instagram Feeds.
@@ @@
 function _instagram_feeds_post_tokens(Token $token_service, $tokens, array $post, array $options, BubbleableMetadata $bubbleable_metadata) {
   $replacements = [];

-  /** @var Drupal\Core\Datetime\DateFormatterInterface $date_formatter_service */
+  /** @var DateFormatterInterface $date_formatter_service */
   $date_formatter_service = \Drupal::service('date.formatter');

   foreach ($tokens as $name => $original) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


14) modules/contrib/instagram_feeds/instagram_feeds.module:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\instagram_feeds\CronHandler;
 /**
  * @file
  * Hooks and custom functions for instagram_feeds module.
@@ @@
  * Implements hook_cron().
  */
 function instagram_feeds_cron() {
-  /** @var Drupal\instagram_feeds\CronHandler $cron_handler */
+  /** @var CronHandler $cron_handler */
   $cron_handler = Drupal::service('instagram_feeds.cron_handler');
   $cron_handler->refreshTokens()->importInstagramPosts();
 }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


 [WARNING] 1 nodes were removed                                                 

 [OK] 14 files have been changed by Rector                                      

