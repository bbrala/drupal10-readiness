diff --git a/consistent_uid_test/src/Controller/ConsistentUidTestController.php b/consistent_uid_test/src/Controller/ConsistentUidTestController.php
index 9af5304..16d3733 100644
--- a/consistent_uid_test/src/Controller/ConsistentUidTestController.php
+++ b/consistent_uid_test/src/Controller/ConsistentUidTestController.php
@@ -31,7 +31,7 @@ class ConsistentUidTestController extends ControllerBase {
     $edit = [];
     $edit['name'] = !empty($user_name) ? $user_name : (new Random())->name(8, TRUE);
     $edit['mail'] = $edit['name'] . '@example.com';
-    $edit['pass'] = user_password();
+    $edit['pass'] = \Drupal::service('password_generator')->generate();
     $edit['status'] = 1;
     $account = User::create($edit);
     $account->save();
diff --git a/src/HookHandler/ConsistentUidHookHandler.php b/src/HookHandler/ConsistentUidHookHandler.php
index 4be8881..95498dc 100644
--- a/src/HookHandler/ConsistentUidHookHandler.php
+++ b/src/HookHandler/ConsistentUidHookHandler.php
@@ -19,7 +19,7 @@ class ConsistentUidHookHandler implements ContainerInjectionInterface {
   const LOCK = 'consistent_uid.lock';
 
   /**
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;
 
@@ -33,7 +33,7 @@ class ConsistentUidHookHandler implements ContainerInjectionInterface {
   /**
    * Locker service.
    *
-   * @var \Drupal\Core\Lock\LockBackendInterface
+   * @var LockBackendInterface
    */
   protected $lockBackend;
 
diff --git a/tests/src/Functional/ConsistentUidFunctionalTest.php b/tests/src/Functional/ConsistentUidFunctionalTest.php
index 7e258bf..ab0f05a 100755
--- a/tests/src/Functional/ConsistentUidFunctionalTest.php
+++ b/tests/src/Functional/ConsistentUidFunctionalTest.php
@@ -2,6 +2,9 @@
 
 namespace Drupal\Tests\consistent_uid\Functional;
 
+use Drupal\Core\Url;
+use GuzzleHttp\Promise\PromiseInterface;
+use function GuzzleHttp\Promise\all;
 use Drupal\Tests\BrowserTestBase;
 use Drupal\user\Entity\User;
 
@@ -26,7 +29,7 @@ class ConsistentUidFunctionalTest extends BrowserTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
   }
 
@@ -44,7 +47,7 @@ class ConsistentUidFunctionalTest extends BrowserTestBase {
       $requests[] = $this->drupalGetAsync('/consistent_uid_test/user_create_handler/user-' . $i . '/' . sha1('keep_calm_dude'));
       $i++;
     }
-    \GuzzleHttp\Promise\all($requests)->wait();
+    all($requests)->wait();
     $users = User::loadMultiple();
     $this->assertCount($usersCount + 2, $users, "User count is {$usersCount}");
     $i = 0;
@@ -57,7 +60,7 @@ class ConsistentUidFunctionalTest extends BrowserTestBase {
   /**
    * Retrieves a Drupal path or an absolute path.
    *
-   * @param string|\Drupal\Core\Url $path
+   * @param string|Url $path
    *   Drupal path or URL to load into Mink controlled browser.
    * @param array $options
    *   (optional) Options to be forwarded to the url generator.
@@ -72,7 +75,7 @@ class ConsistentUidFunctionalTest extends BrowserTestBase {
    *
    * @see \Drupal\Tests\BrowserTestBase::getHttpClient()
    *
-   * @return \GuzzleHttp\Promise\PromiseInterface
+   * @return PromiseInterface
    *   Promise.
    */
   protected function drupalGetAsync($path, array $options = [], array $headers = []) {
diff --git a/tests/src/Kernel/ConsistentUidKernelTest.php b/tests/src/Kernel/ConsistentUidKernelTest.php
index 908230f..4cbd860 100644
--- a/tests/src/Kernel/ConsistentUidKernelTest.php
+++ b/tests/src/Kernel/ConsistentUidKernelTest.php
@@ -29,21 +29,21 @@ class ConsistentUidKernelTest extends KernelTestBase {
   /**
    * Database service.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $database;
 
   /**
    * State service.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;
 
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
 
     parent::setup();
     $this->installConfig(['system']);
