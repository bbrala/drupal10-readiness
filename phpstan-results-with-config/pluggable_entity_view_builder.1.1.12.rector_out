modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder.install
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder.module
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/pluggable_entity_view_builder_example.install
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/pluggable_entity_view_builder_example.module
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/ElementContainerTrait.php
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/Plugin/EntityViewBuilder/NodeArticle.php
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/ProcessedTextBuilderTrait.php
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/TagBuilderTrait.php
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_paragraphs_example/pluggable_entity_view_builder_paragraphs_example.install
modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_paragraphs_example/src/Plugin/EntityViewBuilder/ParagraphCard.php
modules/contrib/pluggable_entity_view_builder/src/Annotation/EntityViewBuilder.php
modules/contrib/pluggable_entity_view_builder/src/BlockContentContextualLinksTrait.php
modules/contrib/pluggable_entity_view_builder/src/BlockContentViewBuilder.php
modules/contrib/pluggable_entity_view_builder/src/BuildBlockTrait.php
modules/contrib/pluggable_entity_view_builder/src/BuildFieldTrait.php
modules/contrib/pluggable_entity_view_builder/src/CommentViewBuilder.php
modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilder.php
modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilder/EntityViewBuilderPluginInterface.php
modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilder/EntityViewBuilderPluginManager.php
modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilderPluginAbstract.php
modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilderTrait.php
modules/contrib/pluggable_entity_view_builder/src/Exception/ViewModeNotFoundException.php
modules/contrib/pluggable_entity_view_builder/src/Form/SettingsForm.php
modules/contrib/pluggable_entity_view_builder/src/NodeViewBuilder.php
modules/contrib/pluggable_entity_view_builder/src/ParagraphViewBuilder.php
modules/contrib/pluggable_entity_view_builder/tests/modules/pluggable_entity_view_builder_test/pluggable_entity_view_builder_test.module
modules/contrib/pluggable_entity_view_builder/tests/modules/pluggable_entity_view_builder_test/src/Plugin/EntityViewBuilder/EntityTestMul.php
modules/contrib/pluggable_entity_view_builder/tests/modules/pluggable_entity_view_builder_test/src/Plugin/EntityViewBuilder/NodeArticle.php
modules/contrib/pluggable_entity_view_builder/tests/src/Functional/ContextualLinksTest.php
modules/contrib/pluggable_entity_view_builder/tests/src/Functional/EntityViewDisplayEditTest.php
modules/contrib/pluggable_entity_view_builder/tests/src/Kernel/NodeOverrideTest.php
modules/contrib/pluggable_entity_view_builder/tests/src/Kernel/ReferencedEntityViewBuilderTest.php
modules/contrib/pluggable_entity_view_builder/tests/src/Kernel/TranslatedEntityViewBuilderTest.php

20 files with changes
=====================

1) modules/contrib/pluggable_entity_view_builder/tests/src/Kernel/TranslatedEntityViewBuilderTest.php:3

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\pluggable_entity_view_builder\Kernel;

+use Drupal\Core\Entity\EntityTypeManager;
+use Drupal\Core\Entity\ContentEntityInterface;
+use Drupal\Core\Render\RendererInterface;
 use Drupal\KernelTests\Core\Entity\EntityLanguageTestBase;
 use Drupal\Tests\EntityViewTrait;
 use Drupal\user\Entity\Role;
@@ @@
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManager
+   * @var EntityTypeManager
    */
   protected $entityTypeManager;

@@ @@
   /**
    * Test entity 1.
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   protected $testEntity1;

@@ @@
   /**
    * Test entity 2.
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   protected $testEntity2;

@@ @@
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/pluggable_entity_view_builder/tests/src/Kernel/ReferencedEntityViewBuilderTest.php:3

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\pluggable_entity_view_builder\Kernel;

+use Drupal\Core\Entity\EntityTypeManager;
+use Drupal\Core\Entity\ContentEntityInterface;
+use Drupal\Core\Render\RendererInterface;
 use Drupal\Core\Datetime\Entity\DateFormat;
 use Drupal\KernelTests\Core\Entity\EntityKernelTestBase;
 use Drupal\node\NodeInterface;
@@ @@
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManager
+   * @var EntityTypeManager
    */
   protected $entityTypeManager;

@@ @@
   /**
    * Test entity 1.
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   protected $testEntity1;

@@ @@
   /**
    * Test entity 2.
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   protected $testEntity2;

@@ @@
   /**
    * Test entity 3.
    *
-   * @var \Drupal\Core\Entity\ContentEntityInterface
+   * @var ContentEntityInterface
    */
   protected $testEntity3;

@@ @@
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/pluggable_entity_view_builder/tests/src/Kernel/NodeOverrideTest.php:3

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\pluggable_entity_view_builder\Kernel;

+use Drupal\Core\Render\RendererInterface;
 use Drupal\Core\Datetime\Entity\DateFormat;
 use Drupal\KernelTests\KernelTestBase;
 use Drupal\Tests\EntityViewTrait;
@@ @@
    * Tests the render array result of an overridden bundle.
    */
   public function testRenderArray() {
-    /** @var \Drupal\Core\Render\RendererInterface $renderer */
+    /** @var RendererInterface $renderer */
     $renderer = $this->container->get('renderer');

     $settings = [
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/pluggable_entity_view_builder/tests/modules/pluggable_entity_view_builder_test/src/Plugin/EntityViewBuilder/NodeArticle.php:24

    ---------- begin diff ----------
@@ @@
    *
    * @param array $build
    *   The build array.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/pluggable_entity_view_builder/tests/modules/pluggable_entity_view_builder_test/src/Plugin/EntityViewBuilder/EntityTestMul.php:24

    ---------- begin diff ----------
@@ @@
    *
    * @param array $build
    *   The build array.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/pluggable_entity_view_builder/src/NodeViewBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager;
 use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\node\NodeViewBuilder as CoreNodeViewBuilder;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * The entity view builder service.
    *
-   * @var \Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager
+   * @var EntityViewBuilderPluginManager
    */
   protected $entityViewBuilderPluginManager;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/pluggable_entity_view_builder/src/Form/SettingsForm.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder\Form;

+use Drupal\Core\Extension\ModuleHandlerInterface;
 use Drupal\Core\Form\ConfigFormBase;
 use Drupal\Core\Form\FormStateInterface;
 use Drupal\Core\Url;
@@ @@
   /**
    * The module handler service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilderTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager;
+use Drupal\Component\Plugin\Exception\PluginException;
+use Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginInterface;
 use Drupal\Component\Plugin\Exception\PluginNotFoundException;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\pluggable_entity_view_builder\Exception\ViewModeNotFoundException;
@@ @@
  * the render array, and if we'd need another module's work - we'd call it
  * manually.
  *
- * @property \Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager $entityViewBuilderPluginManager
+ * @property EntityViewBuilderPluginManager $entityViewBuilderPluginManager
  */
 trait EntityViewBuilderTrait {

@@ @@
    *   - 'plugin_used': TRUE if an Entity view builder plugin was used to create
    *   the render array, otherwise FALSE.
    *
-   * @throws \Drupal\Component\Plugin\Exception\PluginException
+   * @throws PluginException
    */
   public function doBuild(array $build) {
     $no_change = [
@@ @@
     if (!empty($build['#entity_type'])) {
       $entity_type = $build['#entity_type'];

-      /** @var \Drupal\Core\Entity\EntityInterface $entity */
+      /** @var EntityInterface $entity */
       $entity = $build['#' . $entity_type];
     }
     else {
       foreach ($build as $row) {
         if ($row instanceof EntityInterface) {
-          /** @var \Drupal\Core\Entity\EntityInterface $entity */
+          /** @var EntityInterface $entity */
           $entity = $row;
           break;
         }
@@ @@
       return $no_change;
     }

-    /** @var \Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginInterface $plugin */
+    /** @var EntityViewBuilderPluginInterface $plugin */
     $plugin = $this->entityViewBuilderPluginManager->createInstance($plugin_id);
     $view_mode = $build['#view_mode'];
     try {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


9) modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilderPluginAbstract.php:19

    ---------- begin diff ----------
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The current user.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $currentUser;

@@ @@
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager service.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entity_type_manager, AccountInterface $current_user) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilder/EntityViewBuilderPluginInterface.php:15

    ---------- begin diff ----------
@@ @@
    *
    * @param array $build
    *   The existing render array.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity to show.
    * @param string $view_mode
    *   The view mode.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


11) modules/contrib/pluggable_entity_view_builder/src/EntityViewBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager;
 use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\Core\Entity\EntityViewBuilder as CoreEntityViewBuilder;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * The entity view builder service.
    *
-   * @var \Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager
+   * @var EntityViewBuilderPluginManager
    */
   protected $entityViewBuilderPluginManager;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/pluggable_entity_view_builder/src/CommentViewBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager;
 use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\comment\CommentViewBuilder as CoreCommentViewBuilder;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * The entity view builder service.
    *
-   * @var \Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager
+   * @var EntityViewBuilderPluginManager
    */
   protected $entityViewBuilderPluginManager;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/pluggable_entity_view_builder/src/BuildFieldTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\datetime\Plugin\Field\FieldType\DateTimeFieldItemList;
+use Drupal\Core\Datetime\DrupalDateTime;
+use Drupal\media\MediaInterface;
+use Drupal\file\FileInterface;
+use Drupal\image\ImageStyleInterface;
 use Drupal\Core\Cache\CacheableMetadata;
 use Drupal\Core\Entity\ContentEntityInterface;
 use Drupal\Core\Entity\EntityInterface;
@@ @@
 /**
  * Common methods for all field-able content entities' view builders.
  *
- * @property \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
+ * @property EntityTypeManagerInterface $entityTypeManager
  */
 trait BuildFieldTrait {

@@ @@
    * Suitable for plain text fields mostly, but can work with any fields which
    * return string values.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The field name to get the value of.
@@ @@
    *
    * Suitable for text list fields.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The field name to get the value of.
@@ @@
   /**
    * Get the value of a boolean field on an entity.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The field name to get the value of.
@@ @@
    *
    * Note that this is compatible with a single date field, not with date_range.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The name of the single date field.
@@ @@
     if ($entity->get($field_name)->isEmpty()) {
       return '';
     }
-    /** @var \Drupal\datetime\Plugin\Field\FieldType\DateTimeFieldItemList $date_field */
+    /** @var DateTimeFieldItemList $date_field */
     $date_field = $entity->get($field_name);
     if (!isset($date_field->date)) {
       return '';
     }
-    /** @var \Drupal\Core\Datetime\DrupalDateTime $date */
+    /** @var DrupalDateTime $date */
     $date = $date_field->date;
     return $date->format($date_format);
   }
@@ @@
   /**
    * Get the URL and title of a link field on an entity.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The link field name.
@@ @@
   /**
    * Get the array with the (styled) URL of an image on a media field.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The media field name.
@@ @@
     }

     // Get the Media entity.
-    /** @var \Drupal\media\MediaInterface $media */
+    /** @var MediaInterface $media */
     $media = $this->getReferencedEntityFromField($entity, $field_name);
     if (empty($media)) {
       // No media found, or no access to view it.
@@ @@
     }

     // Get the Image entity from Media.
-    /** @var \Drupal\file\FileInterface $image */
+    /** @var FileInterface $image */
     $image = $this->getReferencedEntityFromField($media, 'field_media_image');

     if (empty($image)) {
@@ @@
     // Generate image url or image style url if we have it.
     if (!empty($image_style)) {
       // Get the image style.
-      /** @var \Drupal\image\ImageStyleInterface $image_style */
+      /** @var ImageStyleInterface $image_style */
       $style = ImageStyle::load($image_style);
       $url = $style->buildUrl($image->getFileUri());
     }
     else {
-      $url = file_create_url($image->getFileUri());
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($image->getFileUri());
     }

     return [
@@ @@
   /**
    * Get the image field from a media entity on an entity.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The name of the media field.
    *
-   * @return \Drupal\Core\Field\FieldItemListInterface|null
+   * @return FieldItemListInterface|null
    *   The image field on the media entity.
    */
   protected function getImageFieldFromMediaEntity(ContentEntityInterface $entity, string $field_name): ?FieldItemListInterface {
     // Get the media entity.
-    /** @var \Drupal\media\MediaInterface $media */
+    /** @var MediaInterface $media */
     $media = $this->getReferencedEntityFromField($entity, $field_name);
     if (empty($media) || $media->field_media_image->isEmpty() || empty($media->field_media_image->entity)) {
       return NULL;
@@ @@
   /**
    * Get a referenced entity from a field.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The reference field name.
    *
-   * @return \Drupal\Core\Entity\EntityInterface|null
+   * @return EntityInterface|null
    *   The referenced entity or null if the field is empty or the entity isn't
    *   found, or the current user has no access to view the entity.
    */
   protected function getReferencedEntityFromField(ContentEntityInterface $entity, string $field_name): ?EntityInterface {
     // Get the media entity.
-    /** @var \Drupal\Core\Field\EntityReferenceFieldItemListInterface $field */
+    /** @var EntityReferenceFieldItemListInterface $field */
     $field = $entity->get($field_name);
     if ($field->isEmpty() || empty($field->entity) || !$field->entity->access('view')) {
       // Field is empty or referenced entity has been deleted, or no access.
@@ @@
   /**
    * Build an image referenced in the given entity's given field name.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   Optional; The field name. Defaults to "field_image".
@@ @@
   /**
    * Build a styled image referenced in the given entity's given field name.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $image_style
    *   The image style.
@@ @@
   /**
    * Get image and alt from a File field.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   Optional; The field name. Defaults to "field_image".
@@ @@
       return NULL;
     }

-    /** @var \Drupal\file\FileInterface $image */
+    /** @var FileInterface $image */
     $image = $this->getReferencedEntityFromField($entity, $field_name);
     if (empty($image)) {
       // Image doesn't exist, or no access to it.
@@ @@

     if (!empty($image_style)) {
       // Get the image style.
-      /** @var \Drupal\image\ImageStyleInterface $image_style */
+      /** @var ImageStyleInterface $image_style */
       $style = ImageStyle::load($image_style);
       $url = $style->buildUrl($uri);
     }
     else {
-      $url = file_create_url($uri);
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($uri);
     }

     return [
@@ @@
    *
    * Note: Responsive Image core module is required for this to work.
    *
-   * @param \Drupal\Core\Entity\ContentEntityInterface $entity
+   * @param ContentEntityInterface $entity
    *   The entity.
    * @param string $field_name
    *   The field name.
@@ @@
     if ($entity->get($field_name)->isEmpty()) {
       return [];
     }
-    /** @var \Drupal\media\MediaInterface $media */
+    /** @var MediaInterface $media */
     $media = $this->getReferencedEntityFromField($entity, $field_name);
     if (empty($media)) {
       // No media to display.
@@ @@
       return [];
     }

-    /** @var \Drupal\file\FileInterface $image */
+    /** @var FileInterface $image */
     $image = $this->getReferencedEntityFromField($media, 'field_media_image');
     if (empty($image)) {
       // Image doesn't exist, or no access to it.
@@ @@
   /**
    * Build entities in given view mode.
    *
-   * @param \Drupal\Core\Entity\EntityInterface[] $entities
+   * @param EntityInterface[] $entities
    *   An array of entities.
    * @param string $view_mode
    *   Optional; The view mode to build. Defaults to "full".
@@ @@
   /**
    * Build entities in given view mode, from a reference field.
    *
-   * @param \Drupal\Core\Field\EntityReferenceFieldItemListInterface|null $reference_field
+   * @param EntityReferenceFieldItemListInterface|null $reference_field
    *   The field object where the referenced items are stored.
    * @param string $view_mode
    *   Optional; The view mode to build. Defaults to "full".
    ----------- end diff -----------

Applied rules:
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


14) modules/contrib/pluggable_entity_view_builder/src/BuildBlockTrait.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\Core\Block\BlockManager;
+use Drupal\Core\Entity\EntityRepositoryInterface;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\Core\Language\LanguageManagerInterface;
+use Drupal\Component\Plugin\Exception\PluginException;
+use Drupal\Core\Entity\EntityStorageException;
 /**
  * Embed Block and block content helpers.
  *
- * @property \Drupal\Core\Block\BlockManager $blockManager
- * @property \Drupal\Core\Entity\EntityRepositoryInterface $entityRepository
- * @property \Drupal\Core\Entity\EntityTypeManagerInterface $entityTypeManager
- * @property \Drupal\Core\Session\AccountInterface $currentUser
- * @property \Drupal\Core\Language\LanguageManagerInterface $languageManager
+ * @property BlockManager $blockManager
+ * @property EntityRepositoryInterface $entityRepository
+ * @property EntityTypeManagerInterface $entityTypeManager
+ * @property AccountInterface $currentUser
+ * @property LanguageManagerInterface $languageManager
  *
  * To use this trait it is assumed above services are present. You may use the
  * following `create` method in your PEVB plugin, in order to have them.
@@ @@
    * @return array
    *   The render array.
    *
-   * @throws \Drupal\Component\Plugin\Exception\PluginException
+   * @throws PluginException
    */
   protected function buildBlock(string $block_id, array $config = []) : array {
     $plugin_block = $this->blockManager->createInstance($block_id, $config);
@@ @@
    * @return array
    *   The render array.
    *
-   * @throws \Drupal\Core\Entity\EntityStorageException
+   * @throws EntityStorageException
    */
   protected function buildContentBlock(string $uuid, array $title = [], string $langcode = NULL) : array {
     $block = $this->entityRepository->loadEntityByUuid('block_content', $uuid);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


15) modules/contrib/pluggable_entity_view_builder/src/BlockContentViewBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder;

+use Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager;
 use Drupal\Core\Entity\EntityTypeInterface;
 use Drupal\block_content\BlockContentViewBuilder as CoreBlockContentViewBuilder;
 use Symfony\Component\DependencyInjection\ContainerInterface;
@@ @@
   /**
    * The entity view builder service.
    *
-   * @var \Drupal\pluggable_entity_view_builder\EntityViewBuilder\EntityViewBuilderPluginManager
+   * @var EntityViewBuilderPluginManager
    */
   protected $entityViewBuilderPluginManager;
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/pluggable_entity_view_builder/src/Annotation/EntityViewBuilder.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\pluggable_entity_view_builder\Annotation;

+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;

 /**
@@ @@
   /**
    * The label of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
    ----------- end diff -----------

Applied rules:
 * PseudoNamespaceToNamespaceRector


17) modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_paragraphs_example/pluggable_entity_view_builder_paragraphs_example.install:0

    ---------- begin diff ----------
@@ @@
 <?php

+use Drupal\Core\Entity\EntityDisplayRepositoryInterface;
 /**
  * @file
  * Install functionality.
  */
-
 /**
  * Implements hook_install().
  *
@@ @@
  * to put the field on the Article node's edit form.
  */
 function pluggable_entity_view_builder_paragraphs_example_install() {
-  /** @var \Drupal\Core\Entity\EntityDisplayRepositoryInterface $entity_display_repo */
+  /** @var EntityDisplayRepositoryInterface $entity_display_repo */
   $entity_display_repo = \Drupal::service('entity_display.repository');
   $form_display = $entity_display_repo->getFormDisplay('node', 'article', 'default');
   $form_display->setComponent('field_paragraphs', [
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


18) modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/TagBuilderTrait.php:15

    ---------- begin diff ----------
@@ @@
   /**
    * Build a single tag.
    *
-   * @param \Drupal\taxonomy\TermInterface $term
+   * @param TermInterface $term
    *   The Term to render.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


19) modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/ProcessedTextBuilderTrait.php:13

    ---------- begin diff ----------
@@ @@
   /**
    * Build the comments and comment from of a node.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    *
    * @return array
@@ @@
   /**
    * Build a (processed) text of the content.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    * @param string $field
    *   Optional; The name of the field. Defaults to "body".
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


20) modules/contrib/pluggable_entity_view_builder/pluggable_entity_view_builder_example/src/Plugin/EntityViewBuilder/NodeArticle.php:28

    ---------- begin diff ----------
@@ @@
    *
    * @param array $build
    *   The existing build.
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    *
    * @return array
@@ @@
    *
    * @param array $build
    *   The existing build.
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    *
    * @return array
@@ @@
   /**
    * Get common elements for the view modes.
    *
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    *
    * @return array
@@ @@
   /**
    * Build the Hero Header section, with Title, and Background Image.
    *
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    * @param string $image_field_name
    *   Optional; The field name. Defaults to "field_image".
@@ @@
   /**
    * Build the content tags section.
    *
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    * @param string $field_name
    *   Optional; The term reference field name. Defaults to "field_tags".
@@ @@
   /**
    * Build a list of tags.
    *
-   * @param \Drupal\node\NodeInterface $entity
+   * @param NodeInterface $entity
    *   The entity.
    * @param string $field_name
    *   Optional; The term reference field name. Defaults to "field_tags".
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [ERROR] Could not process                                                      
         "modules/contrib/pluggable_entity_view_builder/src/ParagraphViewBuilder.p
         hp" file, due to:                                                      
         "Analyze error: "Class Drupal\paragraphs\ParagraphViewBuilder not      
         found.". Include your files in "$rectorConfig->autoloadPaths([...]);" or
         "$rectorConfig->bootstrapFiles([...]);" in "rector.php" config.        
         See https://github.com/rectorphp/rector#configuration".                

