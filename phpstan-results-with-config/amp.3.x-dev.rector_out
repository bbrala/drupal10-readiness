modules/contrib/amp/amp.install
modules/contrib/amp/amp.module
modules/contrib/amp/amp.post_update.php
modules/contrib/amp/amp.theme.inc
modules/contrib/amp/modules/amp_adsense/amp_adsense.module
modules/contrib/amp/modules/amp_rdf/amp_rdf.module
modules/contrib/amp/modules/amp_toolbar/amp_toolbar.module
modules/contrib/amp/src/AMP/DrupalAMP.php
modules/contrib/amp/src/AMP/DrupalParsedValidatorRules.php
modules/contrib/amp/src/AmpFormTrait.php
modules/contrib/amp/src/Asset/AmpCssCollectionRenderer.php
modules/contrib/amp/src/Controller/AMPTestLibrary.php
modules/contrib/amp/src/Element/AmpAnalytics.php
modules/contrib/amp/src/Element/AmpCustomStyle.php
modules/contrib/amp/src/Element/AmpProcessedText.php
modules/contrib/amp/src/Element/AmpSidebar.php
modules/contrib/amp/src/Element/AmpSocialPost.php
modules/contrib/amp/src/EntityTypeInfo.php
modules/contrib/amp/src/EventSubscriber/AmpEventSubscriber.php
modules/contrib/amp/src/Form/AmpAnalyticsSettingsForm.php
modules/contrib/amp/src/Form/AmpSettingsForm.php
modules/contrib/amp/src/Plugin/Block/AmpGoogleDoubleClickBlock.php
modules/contrib/amp/src/Plugin/Block/AmpSocialShareBlock.php
modules/contrib/amp/src/Plugin/Block/AmpSystemBrandingBlock.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpIframeFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpImageCarousel.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpImageFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpMediaImageFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpSocialPostFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpSummaryOrTrimmedFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpTextFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpTextTrimmedFormatter.php
modules/contrib/amp/src/Plugin/Field/FieldFormatter/AmpVideoFormatter.php
modules/contrib/amp/src/Plugin/views/style/AmpViewsCarouselStyle.php
modules/contrib/amp/src/Render/AmpHtmlRenderer.php
modules/contrib/amp/src/Render/AmpHtmlResponseAttachmentsProcessor.php
modules/contrib/amp/src/Routing/AmpContext.php
modules/contrib/amp/src/Service/AMPService.php
modules/contrib/amp/src/Theme/AmpNegotiator.php
modules/contrib/amp/src/Utility/AmpQueryParameters.php
modules/contrib/amp/tests/src/Functional/Amp.php
modules/contrib/amp/tests/src/Functional/AmpAdsense.php
modules/contrib/amp/tests/src/Functional/AmpCSSTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterFacebookTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterImageCarouselTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterImageTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterMediaImageTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTestBase.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTextTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTextTrimmedTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterTwitterTest.php
modules/contrib/amp/tests/src/Functional/AmpFormatterVideoTest.php
modules/contrib/amp/tests/src/Functional/AmpRdf.php
modules/contrib/amp/tests/src/Functional/AmpTestBase.php
modules/contrib/amp/tests/src/Functional/AmpToolbar.php
modules/contrib/amp/tests/src/Functional/AmpViewModeTest.php
modules/contrib/amp/tests/src/Functional/BasicTestCaseBase.php
modules/contrib/amp/tests/src/Unit/AmpSocialPostTest.php

20 files with changes
=====================

1) modules/contrib/amp/tests/src/Functional/BasicTestCaseBase.php:30

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     // Make sure to complete the normal setup steps first.
     parent::setUp();

@@ @@
     $this->assertSession()->statusCodeEquals(200);

     // Confirm that the front page contains the standard text.
-    $this->assertText('Welcome to Drupal');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains('Welcome to Drupal');
   }

 }
    ----------- end diff -----------

Applied rules:
 * AssertTextRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/amp/tests/src/Functional/AmpTestBase.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\amp\Functional;

+use Drupal\node\Entity\Node;
+use Drupal\Core\Entity\EntityDisplayRepositoryInterface;
+use Drupal\user\UserInterface;
 use Drupal\Core\Url;
 use Drupal\Tests\node\Traits\ContentTypeCreationTrait;
 use Drupal\Tests\BrowserTestBase;
@@ @@
   /**
    * The node created by tests.
    *
-   * @var \Drupal\node\Entity\Node
+   * @var Node
    */
   protected $node = NULL;

@@ @@
   /**
    * The display repository.
    *
-   * @var \Drupal\Core\Entity\EntityDisplayRepositoryInterface
+   * @var EntityDisplayRepositoryInterface
    */
   protected $displayRepository = NULL;

@@ @@
   /**
    * An user with administration permissions.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;

@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/amp/tests/src/Functional/AmpFormatterVideoTest.php:44

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/amp/tests/src/Functional/AmpFormatterTwitterTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Add field to the test content type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/amp/tests/src/Functional/AmpFormatterTestBase.php:62

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     if (empty($this->fieldName)) {
       $this->fieldName = strtolower($this->randomMachineName());
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/amp/tests/src/Functional/AmpFormatterMediaImageTest.php:43

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create an image media type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/amp/tests/src/Functional/AmpFormatterImageTest.php:42

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


8) modules/contrib/amp/tests/src/Functional/AmpFormatterImageCarouselTest.php:46

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {

     parent::setUp();
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/amp/tests/src/Functional/AmpFormatterFacebookTest.php:34

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Add field to the test content type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


10) modules/contrib/amp/src/Theme/AmpNegotiator.php:15

    ---------- begin diff ----------
@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * AmpContext.
    *
-   * @var \Drupal\amp\Routing\AmpContext
+   * @var AmpContext
    */
   protected $ampContext;

@@ @@
   /**
    * Creates a new AmpNegotiator instance.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The config factory.
-   * @param \Drupal\amp\Routing\AmpContext $ampContext
+   * @param AmpContext $ampContext
    *   The AmpContext.
    */
   public function __construct(ConfigFactoryInterface $configFactory, AmpContext $ampContext) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/amp/src/Service/AMPService.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\amp\Service;

+use Drupal\Core\Render\Markup;
 use Drupal\amp\AMP\DrupalAMP;
 use Drupal\Core\DependencyInjection\ServiceProviderBase;
 use Drupal\Core\Messenger\MessengerInterface;
@@ @@
   /**
    * The Messenger service.
    *
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;

@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * The route amp context to determine whether a route is an amp one.
    *
-   * @var \Drupal\amp\Routing\AmpContext
+   * @var AmpContext
    */
   protected $ampContext;

@@ @@
   /**
    * The renderer.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;

@@ @@
   /**
    * Constructs an AMPService instance.
    *
-   * @param \Drupal\Core\Messenger\MessengerInterface $messenger
+   * @param MessengerInterface $messenger
    *   Core messager service.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   Configuration factory.
-   * @param \Drupal\amp\Routing\AmpContext $ampContext
+   * @param AmpContext $ampContext
    *   AMP context.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer.
    */
   public function __construct(MessengerInterface $messenger, ConfigFactoryInterface $configFactory, AmpContext $ampContext, RendererInterface $renderer) {
@@ @@
   public function devMessage($message, $method = 'addMessage') {
     $user = \Drupal::currentUser();
     if ($this->isDevPage() && $user->hasPermission('administer nodes')) {
-      $rendered_message = \Drupal\Core\Render\Markup::create($message);
+      $rendered_message = Markup::create($message);
       $translated_message = new TranslatableMarkup ('@message', array('@message' => $rendered_message));
       if (method_exists($this->messenger, $method)) {
         $this->messenger->$method($translated_message);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


12) modules/contrib/amp/src/Routing/AmpContext.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\amp\Routing;

+use Drupal\node\NodeInterface;
 use Drupal\Core\DependencyInjection\ServiceProviderBase;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Theme\ThemeManager;
@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * Theme manager.
    *
-   * @var \Drupal\Core\Theme\ThemeManager
+   * @var ThemeManager
    */
   protected $themeManager;

@@ @@
   /**
    * Information about AMP-enabled content types.
    *
-   * @var \Drupal\amp\EntityTypeInfo
+   * @var EntityTypeInfo
    */
   protected $entityTypeInfo;

@@ @@
   /**
    * The route match.
    *
-   * @var \Drupal\Core\Routing\RouteMatchInterface
+   * @var RouteMatchInterface
    */
   protected $routeMatch;

@@ @@
   /**
    * The admin context.
    *
-   * @var \Drupal\Core\Routing\AdminContext
+   * @var AdminContext
    */
   protected $adminContext;

@@ @@
   /**
    * Construct a new amp context helper instance.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The config factory.
-   * @param \Drupal\Core\Theme\ThemeManager $themeManager
+   * @param ThemeManager $themeManager
    *   The theme manager.
-   * @param \Drupal\amp\EntityTypeInfo $entity_type_info
+   * @param EntityTypeInfo $entity_type_info
    *   Information about AMP-enabled content types.
-   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   * @param RouteMatchInterface $route_match
    *   The route match.
-   * @param \Drupal\Core\Routing\AdminContext $adminContext
+   * @param AdminContext $adminContext
    *   The admin route context.
    */
   public function __construct(ConfigFactoryInterface $configFactory, ThemeManager $themeManager, EntityTypeInfo $entityTypeInfo, RouteMatchInterface $routeMatch, AdminContext $adminContext) {
@@ @@
   /**
    * Determines whether the active route is an AMP route.
    *
-   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   * @param RouteMatchInterface $route_match
    *   The route match.
    * @param mixed $entity
    *   The entity to assess, if any.
@@ @@
     }
     // If we have an entity, we can test it.
     $route_entity = $this->routeEntity($routeMatch);
-    if ($entity instanceof \Drupal\node\NodeInterface || $route_entity instanceof \Drupal\node\NodeInterface) {
+    if ($entity instanceof NodeInterface || $route_entity instanceof NodeInterface) {
       $entity_is_amp = $this->entityIsAmp($entity);
       $route_entity_is_amp = $this->entityIsAmp($route_entity);
       return $entity_is_amp || $route_entity_is_amp;
@@ @@
   /**
    * See if this route uses the AMP theme.
    *
-   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   * @param RouteMatchInterface $route_match
    *   The route match.
    *
    * @return boolean
@@ @@
    *
    * Some routes must be AMP.
    *
-   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   * @param RouteMatchInterface $route_match
    *   The route match.
    *
    * @return boolean
@@ @@
    * Check off things that indicate this can't be an AMP route. TRUE means it
    * can't be an AMP route, FALSE means we can't tell.
    *
-   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   * @param RouteMatchInterface $route_match
    *   The route match.
    *
    * @return boolean
@@ @@
   /**
    * Get the entity from the route.
    *
-   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   * @param RouteMatchInterface $route_match
    *   The route match.
    *
    * @return mixed
@@ @@
    * @return boolean
    */
   public function entityIsAmp($entity) {
-    if ($entity instanceof \Drupal\node\NodeInterface) {
+    if ($entity instanceof NodeInterface) {
       $type = $entity->getType();
       return $this->entityTypeInfo->isAmpEnabledType($type);
     }
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


13) modules/contrib/amp/src/Render/AmpHtmlResponseAttachmentsProcessor.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\amp\Render;

+use Drupal\Core\Config\Config;
 use Drupal\Core\Render\HtmlResponseAttachmentsProcessor;
 use Drupal\Core\Asset\AssetResolverInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
@@ @@
   /**
    * The inner service that we are decorating.
    *
-   * @var \Drupal\Core\Render\HtmlResponseAttachmentsProcessor
+   * @var HtmlResponseAttachmentsProcessor
    */
   protected $htmlResponseAttachmentsProcessor;

@@ @@
   /**
    * The route amp context to determine whether a route is an AMP one.
    *
-   * @var \Drupal\amp\Routing\AmpContext
+   * @var AmpContext
    */
   protected $ampContext;

@@ @@
   /**
    * A config object for the system performance configuration.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $config;

@@ @@
   /**
    * Constructs a HtmlResponseAttachmentsProcessor object.
    *
-   * @param \Drupal\amp\Routing\AmpContext $amp_context
+   * @param AmpContext $amp_context
    *   The route amp context to determine whether the route is an amp one.
-   * @param \Drupal\Core\Asset\AssetResolverInterface $asset_resolver
+   * @param AssetResolverInterface $asset_resolver
    *   An asset resolver.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   A config factory for retrieving required config objects.
-   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $css_collection_renderer
+   * @param AssetCollectionRendererInterface $css_collection_renderer
    *   The CSS asset collection renderer.
-   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $js_collection_renderer
+   * @param AssetCollectionRendererInterface $js_collection_renderer
    *   The JS asset collection renderer.
-   * @param \Symfony\Component\HttpFoundation\RequestStack $request_stack
+   * @param RequestStack $request_stack
    *   The request stack.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler service.
    */
   public function __construct(HtmlResponseAttachmentsProcessor $htmlResponseAttachmentsProcessor, AmpContext $amp_context, AssetResolverInterface $asset_resolver, ConfigFactoryInterface $config_factory, AssetCollectionRendererInterface $css_collection_renderer, AssetCollectionRendererInterface $js_collection_renderer, RequestStack $request_stack, RendererInterface $renderer, ModuleHandlerInterface $module_handler) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


14) modules/contrib/amp/src/Render/AmpHtmlRenderer.php:27

    ---------- begin diff ----------
@@ @@
   /**
    * AMP Service.
    *
-   * @var \Drupal\amp\Service\AMPService
+   * @var AMPService
    */
   protected $ampService;

@@ @@
   /**
    * Constructs a new HtmlRenderer.
    *
-   * @param \Drupal\Core\Controller\TitleResolverInterface $title_resolver
+   * @param TitleResolverInterface $title_resolver
    *   The title resolver.
-   * @param \Drupal\Component\Plugin\PluginManagerInterface $display_variant_manager
+   * @param PluginManagerInterface $display_variant_manager
    *   The display variant manager.
-   * @param \Symfony\Component\EventDispatcher\EventDispatcherInterface $event_dispatcher
+   * @param EventDispatcherInterface $event_dispatcher
    *   The event dispatcher.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer service.
-   * @param \Drupal\Core\Render\RenderCacheInterface $render_cache
+   * @param RenderCacheInterface $render_cache
    *   The render cache service.
    * @param array $renderer_config
    *   The renderer configuration array.
-   * @param \Drupal\Core\Theme\ThemeManagerInterface $theme_manager
+   * @param ThemeManagerInterface $theme_manager
    *   The theme manager.
-   * @param \Drupal\amp\Service\AMPService $amp_service
+   * @param AMPService $amp_service
    *   The AMP service.
    */
   public function __construct(TitleResolverInterface $title_resolver, PluginManagerInterface $display_variant_manager, EventDispatcherInterface $event_dispatcher, ModuleHandlerInterface $module_handler, RendererInterface $renderer, RenderCacheInterface $render_cache, array $renderer_config, ThemeManagerInterface $theme_manager = NULL, AMPService $amp_service) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


15) modules/contrib/amp/src/Form/AmpSettingsForm.php:18

    ---------- begin diff ----------
@@ @@
   /**
    * The theme handler service.
    *
-   * @var \Drupal\Core\Extension\ThemeHandlerInterface
+   * @var ThemeHandlerInterface
    */
   protected $themeHandler;

@@ @@
   /**
    * The cache tags invalidator.
    *
-   * @var \Drupal\Core\Cache\CacheTagsInvalidatorInterface
+   * @var CacheTagsInvalidatorInterface
    */
   protected $tagInvalidate;

@@ @@
   /**
    * Information about AMP-enabled content types.
    *
-   * @var \Drupal\amp\EntityTypeInfo
+   * @var EntityTypeInfo
    */
   protected $entityTypeInfo;

@@ @@
   /**
    * Constructs a AmpSettingsForm object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The factory for configuration objects.
-   * @param \Drupal\Core\Extension\ThemeHandlerInterface $theme_handler
+   * @param ThemeHandlerInterface $theme_handler
    *   The theme handler.
-   * @param \Drupal\Core\Cache\CacheTagsInvalidatorInterface $tag_invalidate
+   * @param CacheTagsInvalidatorInterface $tag_invalidate
    *   The cache tags invalidator.
-   * @param \Drupal\amp\EntityTypeInfo $entity_type_info
+   * @param EntityTypeInfo $entity_type_info
    *   Information about AMP-enabled content types.
    */
   public function __construct(ConfigFactoryInterface $config_factory, ThemeHandlerInterface $theme_handler, CacheTagsInvalidatorInterface $tag_invalidate, EntityTypeInfo $entity_type_info) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


16) modules/contrib/amp/src/EventSubscriber/AmpEventSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\amp\EventSubscriber;

+use Symfony\Component\HttpKernel\Event\ViewEvent;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
-use Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent;
 use Drupal\Core\EventSubscriber\MainContentViewSubscriber;
 use Symfony\Component\HttpKernel\KernelEvents;
 use Drupal\Core\Routing\RouteMatchInterface;
@@ @@
   /**
    * AMP context service.
    *
-   * @var Drupal\amp\Routing\AmpContext
+   * @var AmpContext
    */
   protected $ampContext;

@@ @@
   /**
    * The route match service.
    *
-   * @var \Drupal\Core\Routing\RouteMatchInterface
+   * @var RouteMatchInterface
    */
   protected $routeMatch;

@@ @@
   /**
    * Constructs an AmpEventSubscriber object.
    *
-   * @param Drupal\amp\Routing\AmpContext $ampContext
+   * @param AmpContext $ampContext
    *   The AMP context service.
-   * @param \Drupal\Core\Routing\RouteMatchInterface $routeMatch
+   * @param RouteMatchInterface $routeMatch
    *   The RouteMatch service.
    */
   public function __construct(AmpContext $ampContext, RouteMatchInterface $routeMatch) {
@@ @@
   /**
    * Alters the wrapper format if this is an AMP request.
    *
-   * @param \Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent $event
+   * @param ViewEvent $event
    *   The event to process.
    */
-  public function onView(GetResponseForControllerResultEvent $event) {
+  public function onView(ViewEvent $event) {

     // Don't interfere if this is a request that does not use html or amp
     // wrapper formats.
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


17) modules/contrib/amp/src/EntityTypeInfo.php:14

    ---------- begin diff ----------
@@ @@
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;

@@ @@
   /**
    * The cache backend to use for the complete theme registry data.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cache;

@@ @@
   /**
    * Constructs a new EntityTypeRepository.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache
+   * @param CacheBackendInterface $cache
    *   The cache backend interface to use for the complete theme registry data.
    */
   public function __construct(EntityTypeManagerInterface $entity_type_manager, CacheBackendInterface $cache) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


18) modules/contrib/amp/src/Element/AmpProcessedText.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\amp\Element;

+use Drupal\amp\Service\AMPService;
+use Lullabot\AMP\AMP;
 use Drupal\filter\Element\ProcessedText;
 use Drupal\Component\Utility\Xss;

@@ @@
    * Pre-render callback: Processes the amp markup and attaches libraries.
    */
   public static function preRenderAmpText($element) {
-    /** @var \Drupal\amp\Service\AMPService $amp_service */
+    /** @var AMPService $amp_service */
     $amp_service = \Drupal::service('amp.utilities');
-    /** @var \Lullabot\AMP\AMP $amp */
+    /** @var AMP $amp */
     $amp = $amp_service->createAMPConverter();

     $amp->loadHtml($element['#markup']);
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


19) modules/contrib/amp/src/Asset/AmpCssCollectionRenderer.php:41

    ---------- begin diff ----------
@@ @@
   /**
    * The inner service that we are decorating.
    *
-   * @var \Drupal\Core\Asset\CssCollectionRenderer
+   * @var CssCollectionRenderer
    */
   protected $cssCollectionRenderer;

@@ @@
   /**
    * AMP Service.
    *
-   * @var \Drupal\amp\Service\AMPService
+   * @var AMPService
    */
   protected $ampService;

@@ @@
   /**
    * The renderer.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;

@@ @@
   /**
    * The config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;

@@ @@
   /**
    * Constructs a CssCollectionRenderer.
    *
-   * @param \Drupal\Core\Asset\CssCollectionRenderer $cssCollectionRenderer
+   * @param CssCollectionRenderer $cssCollectionRenderer
    *   The decorated CssCollectionRenderer.
-   * @param \Drupal\Core\State\StateInterface $state
+   * @param StateInterface $state
    *   The state key/value store.
-   * @param \Drupal\amp\Service\AMPService $ampService
+   * @param AMPService $ampService
    *   The AMP service.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   Configuration factory.
    */
   public function __construct(
@@ @@
       $last = $path;
       $path = preg_replace('`(^|/)(?!\.\./)([^/]+)/\.\./`', '$1', $path);
     }
-    return 'url(' . file_url_transform_relative(file_create_url($path)) . ')';
+    return 'url(' . \Drupal::service('file_url_generator')->generateString($path) . ')';
   }

 }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


20) modules/contrib/amp/amp.module:323

    ---------- begin diff ----------
@@ @@
 function amp_theme_registry_alter(&$theme_registry) {
   $theme_registry['amp_image_wrapper'] = $theme_registry['image'];
   $theme_registry['amp_image_wrapper']['template'] = 'amp-image-wrapper';
-  $theme_registry['amp_image_wrapper']['path'] = drupal_get_path('module', 'amp') . '/templates';
+  $theme_registry['amp_image_wrapper']['path'] = \Drupal::service('extension.list.module')->getPath('amp') . '/templates';
 }

 /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


 [OK] 20 files have been changed by Rector                                      

