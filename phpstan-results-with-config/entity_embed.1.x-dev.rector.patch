diff --git a/entity_embed.api.php b/entity_embed.api.php
index ec83c6e..0b91ae7 100644
--- a/entity_embed.api.php
+++ b/entity_embed.api.php
@@ -1,5 +1,8 @@
 <?php
 
+use Drupal\file\FileInterface;
+use Drupal\node\NodeInterface;
+use Drupal\Core\Entity\EntityInterface;
 /**
  * @file
  * Hooks provided by the Entity Embed module.
@@ -40,17 +43,17 @@ function hook_entity_embed_display_plugins_for_context_alter(array &$definitions
   $entity = $contexts['entity'];
 
   // For video and audio files, limit the available options to the media player.
-  if ($entity instanceof \Drupal\file\FileInterface && in_array($entity->bundle(), ['audio', 'video'])) {
+  if ($entity instanceof FileInterface && in_array($entity->bundle(), ['audio', 'video'])) {
     $definitions = array_intersect_key($definitions, array_flip(['file:jwplayer_formatter']));
   }
 
   // For images, use the image formatter.
-  if ($entity instanceof \Drupal\file\FileInterface && in_array($entity->bundle(), ['image'])) {
+  if ($entity instanceof FileInterface && in_array($entity->bundle(), ['image'])) {
     $definitions = array_intersect_key($definitions, array_flip(['image:image']));
   }
 
   // For nodes, use the default option.
-  if ($entity instanceof \Drupal\node\NodeInterface) {
+  if ($entity instanceof NodeInterface) {
     $definitions = array_intersect_key($definitions, array_flip(['entity_reference:entity_reference_entity_view']));
   }
 }
@@ -60,10 +63,10 @@ function hook_entity_embed_display_plugins_for_context_alter(array &$definitions
  *
  * @param array &$context
  *   The context array.
- * @param \Drupal\Core\Entity\EntityInterface $entity
+ * @param EntityInterface $entity
  *   The entity object.
  */
-function hook_entity_embed_context_alter(array &$context, \Drupal\Core\Entity\EntityInterface $entity) {
+function hook_entity_embed_context_alter(array &$context, EntityInterface $entity) {
   if (isset($context['overrides']) && is_array($context['overrides'])) {
     foreach ($context['overrides'] as $key => $value) {
       $entity->key = $value;
@@ -76,10 +79,10 @@ function hook_entity_embed_context_alter(array &$context, \Drupal\Core\Entity\En
  *
  * @param array &$context
  *   The context array.
- * @param \Drupal\Core\Entity\EntityInterface $entity
+ * @param EntityInterface $entity
  *   The entity object.
  */
-function hook_ENTITY_TYPE_embed_context_alter(array &$context, \Drupal\Core\Entity\EntityInterface $entity) {
+function hook_ENTITY_TYPE_embed_context_alter(array &$context, EntityInterface $entity) {
   if (isset($context['overrides']) && is_array($context['overrides'])) {
     foreach ($context['overrides'] as $key => $value) {
       $entity->key = $value;
@@ -96,12 +99,12 @@ function hook_ENTITY_TYPE_embed_context_alter(array &$context, \Drupal\Core\Enti
  *
  * @param array &$build
  *   A renderable array representing the embedded entity content.
- * @param \Drupal\Core\Entity\EntityInterface $entity
+ * @param EntityInterface $entity
  *   The embedded entity object.
  * @param array $context
  *   The context array.
  */
-function hook_entity_embed_alter(array &$build, \Drupal\Core\Entity\EntityInterface $entity, array &$context) {
+function hook_entity_embed_alter(array &$build, EntityInterface $entity, array &$context) {
   // Remove the contextual links.
   if (isset($build['#contextual_links'])) {
     unset($build['#contextual_links']);
@@ -113,12 +116,12 @@ function hook_entity_embed_alter(array &$build, \Drupal\Core\Entity\EntityInterf
  *
  * @param array &$build
  *   A renderable array representing the embedded entity content.
- * @param \Drupal\Core\Entity\EntityInterface $entity
+ * @param EntityInterface $entity
  *   The embedded entity object.
  * @param array $context
  *   The context array.
  */
-function hook_ENTITY_TYPE_embed_alter(array &$build, \Drupal\Core\Entity\EntityInterface $entity, array &$context) {
+function hook_ENTITY_TYPE_embed_alter(array &$build, EntityInterface $entity, array &$context) {
   // Remove the contextual links.
   if (isset($build['#contextual_links'])) {
     unset($build['#contextual_links']);
diff --git a/entity_embed.module b/entity_embed.module
index 2889c50..8d543c7 100644
--- a/entity_embed.module
+++ b/entity_embed.module
@@ -1,5 +1,7 @@
 <?php
 
+use Drupal\filter\Entity\FilterFormat;
+use Drupal\embed\Entity\EmbedButton;
 /**
  * @file
  * Framework for allowing entities to be embedded in CKEditor.
@@ -164,7 +166,7 @@ function entity_embed_filter_format_edit_form_validate($form, FormStateInterface
         }
       }
 
-      /** @var \Drupal\filter\Entity\FilterFormat $filter_format */
+      /** @var FilterFormat $filter_format */
       $filter_format = $form_state->getFormObject()->getEntity();
 
       $filter_html = $filter_format->filters()->get('filter_html');
@@ -176,7 +178,7 @@ function entity_embed_filter_format_edit_form_validate($form, FormStateInterface
         ->getStorage('embed_button')
         ->loadMultiple($buttons);
 
-      /** @var \Drupal\embed\Entity\EmbedButton $embed */
+      /** @var EmbedButton $embed */
       foreach ($embeds as $embed) {
         if ($embed->getTypeId() !== 'entity') {
           continue;
diff --git a/src/Annotation/EntityEmbedDisplay.php b/src/Annotation/EntityEmbedDisplay.php
index 3339088..3c7700b 100644
--- a/src/Annotation/EntityEmbedDisplay.php
+++ b/src/Annotation/EntityEmbedDisplay.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\Annotation;
 
+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;
 
 /**
@@ -32,7 +33,7 @@ class EntityEmbedDisplay extends Plugin {
   /**
    * The human-readable name of the Entity Embed Display plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
diff --git a/src/EntityEmbedBuilder.php b/src/EntityEmbedBuilder.php
index 892ec3a..ee0159c 100644
--- a/src/EntityEmbedBuilder.php
+++ b/src/EntityEmbedBuilder.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed;
 
+use Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayBase;
 use Drupal\Component\Utility\Html;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Extension\ModuleHandlerInterface;
@@ -17,23 +18,23 @@ class EntityEmbedBuilder implements EntityEmbedBuilderInterface {
   /**
    * The module handler service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;
 
   /**
    * The entity embed display plugin manager service.
    *
-   * @var \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager
+   * @var EntityEmbedDisplayManager
    */
   protected $displayPluginManager;
 
   /**
    * Constructs a EntityEmbedBuilder object.
    *
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler service.
-   * @param \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager $display_manager
+   * @param EntityEmbedDisplayManager $display_manager
    *   The entity embed display plugin manager.
    */
   public function __construct(ModuleHandlerInterface $module_handler, EntityEmbedDisplayManager $display_manager) {
@@ -130,7 +131,7 @@ class EntityEmbedBuilder implements EntityEmbedBuilderInterface {
   /**
    * Builds the render array for an entity using an Entity Embed Display plugin.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity to be rendered.
    * @param string $plugin_id
    *   The Entity Embed Display plugin ID.
@@ -145,7 +146,7 @@ class EntityEmbedBuilder implements EntityEmbedBuilderInterface {
    */
   protected function buildEntityEmbedDisplayPlugin(EntityInterface $entity, $plugin_id, array $plugin_configuration = [], array $context = []) {
     // Build the Entity Embed Display plugin.
-    /** @var \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayBase $display */
+    /** @var EntityEmbedDisplayBase $display */
     $display = $this->displayPluginManager->createInstance($plugin_id, $plugin_configuration);
     $display->setContextValue('entity', $entity);
     $display->setAttributes($context);
diff --git a/src/EntityEmbedBuilderInterface.php b/src/EntityEmbedBuilderInterface.php
index e87c2c6..6a5d93f 100644
--- a/src/EntityEmbedBuilderInterface.php
+++ b/src/EntityEmbedBuilderInterface.php
@@ -14,7 +14,7 @@ interface EntityEmbedBuilderInterface {
   /**
    * Builds the render array for an embedded entity.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity to be rendered.
    * @param array $context
    *   (optional) Array of context values, corresponding to the attributes on
diff --git a/src/EntityEmbedDisplay/EntityEmbedDisplayBase.php b/src/EntityEmbedDisplay/EntityEmbedDisplayBase.php
index 3cb86cd..0e06d6f 100644
--- a/src/EntityEmbedDisplay/EntityEmbedDisplayBase.php
+++ b/src/EntityEmbedDisplay/EntityEmbedDisplayBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\EntityEmbedDisplay;
 
+use Drupal\Core\Entity\EntityInterface;
 use Drupal\Component\Utility\NestedArray;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
@@ -28,14 +29,14 @@ abstract class EntityEmbedDisplayBase extends PluginBase implements ContainerFac
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * The language manager.
    *
-   * @var \Drupal\Core\Language\LanguageManagerInterface
+   * @var LanguageManagerInterface
    */
   protected $languageManager;
 
@@ -62,9 +63,9 @@ abstract class EntityEmbedDisplayBase extends PluginBase implements ContainerFac
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager service.
-   * @param \Drupal\Core\Language\LanguageManagerInterface $language_manager
+   * @param LanguageManagerInterface $language_manager
    *   The language manager.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entity_type_manager, LanguageManagerInterface $language_manager) {
@@ -278,7 +279,7 @@ abstract class EntityEmbedDisplayBase extends PluginBase implements ContainerFac
    * on this, plus any of its subclasses. Right now, this is effectively a
    * global that breaks cacheability metadata.
    *
-   * @return \Drupal\Core\Entity\EntityInterface
+   * @return EntityInterface
    *   The entity from the current context.
    */
   public function getEntityFromContext() {
diff --git a/src/EntityEmbedDisplay/EntityEmbedDisplayInterface.php b/src/EntityEmbedDisplay/EntityEmbedDisplayInterface.php
index f35f28b..47d2ed4 100644
--- a/src/EntityEmbedDisplay/EntityEmbedDisplayInterface.php
+++ b/src/EntityEmbedDisplay/EntityEmbedDisplayInterface.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\EntityEmbedDisplay;
 
+use Drupal\Core\Access\AccessResultInterface;
 use Drupal\Component\Plugin\PluginInspectionInterface;
 use Drupal\Core\Plugin\PluginFormInterface;
 use Drupal\Core\Session\AccountInterface;
@@ -50,11 +51,11 @@ interface EntityEmbedDisplayInterface extends ConfigurableInterface, DependentPl
    * This method allows base implementations to add general access restrictions
    * that should apply to all extending Entity Embed display plugins.
    *
-   * @param \Drupal\Core\Session\AccountInterface $account
+   * @param AccountInterface $account
    *   (optional) The user for which to check access, or NULL to check access
    *   for the current user. Defaults to NULL.
    *
-   * @return \Drupal\Core\Access\AccessResultInterface
+   * @return AccessResultInterface
    *   The access result.
    */
   public function access(AccountInterface $account = NULL);
diff --git a/src/EntityEmbedDisplay/EntityEmbedDisplayManager.php b/src/EntityEmbedDisplay/EntityEmbedDisplayManager.php
index 67531e2..de65ee0 100644
--- a/src/EntityEmbedDisplay/EntityEmbedDisplayManager.php
+++ b/src/EntityEmbedDisplay/EntityEmbedDisplayManager.php
@@ -25,9 +25,9 @@ class EntityEmbedDisplayManager extends DefaultPluginManager {
    * @param \Traversable $namespaces
    *   An object that implements \Traversable which contains the root paths
    *   keyed by the corresponding namespace to look for plugin implementations.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   * @param CacheBackendInterface $cache_backend
    *   Cache backend instance to use.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler to invoke the alter hook with.
    */
   public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler) {
@@ -120,7 +120,7 @@ class EntityEmbedDisplayManager extends DefaultPluginManager {
    * Provides a list of plugins that can be used for a certain entity and
    * filters out plugins that should be hidden in the UI.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   An entity object.
    *
    * @return array
diff --git a/src/EntityEmbedDisplay/FieldFormatterEntityEmbedDisplayBase.php b/src/EntityEmbedDisplay/FieldFormatterEntityEmbedDisplayBase.php
index 99b6e24..fff1a17 100644
--- a/src/EntityEmbedDisplay/FieldFormatterEntityEmbedDisplayBase.php
+++ b/src/EntityEmbedDisplay/FieldFormatterEntityEmbedDisplayBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\EntityEmbedDisplay;
 
+use Drupal\Core\Field\FormatterInterface;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Field\BaseFieldDefinition;
@@ -23,28 +24,28 @@ abstract class FieldFormatterEntityEmbedDisplayBase extends EntityEmbedDisplayBa
   /**
    * The field formatter plugin manager.
    *
-   * @var \Drupal\Core\Field\FormatterPluginManager
+   * @var FormatterPluginManager
    */
   protected $formatterPluginManager;
 
   /**
    * The typed data manager.
    *
-   * @var \Drupal\Core\TypedData\TypedDataManager
+   * @var TypedDataManager
    */
   protected $typedDataManager;
 
   /**
    * The field definition.
    *
-   * @var \Drupal\Core\Field\BaseFieldDefinition
+   * @var BaseFieldDefinition
    */
   protected $fieldDefinition;
 
   /**
    * The field formatter.
    *
-   * @var \Drupal\Core\Field\FormatterInterface
+   * @var FormatterInterface
    */
   protected $fieldFormatter;
 
@@ -61,7 +62,7 @@ abstract class FieldFormatterEntityEmbedDisplayBase extends EntityEmbedDisplayBa
   /**
    * Get the FieldDefinition object required to render this field's formatter.
    *
-   * @return \Drupal\Core\Field\BaseFieldDefinition
+   * @return BaseFieldDefinition
    *   The field definition.
    *
    * @see \Drupal\entity_embed\FieldFormatterEntityEmbedDisplayBase::build()
@@ -96,7 +97,7 @@ abstract class FieldFormatterEntityEmbedDisplayBase extends EntityEmbedDisplayBa
   /**
    * Checks if the field formatter is applicable.
    *
-   * @return \Drupal\Core\Access\AccessResult
+   * @return AccessResult
    *   Returns the access result.
    */
   protected function isApplicableFieldFormatter() {
@@ -163,7 +164,7 @@ abstract class FieldFormatterEntityEmbedDisplayBase extends EntityEmbedDisplayBa
   /**
    * Constructs a field formatter.
    *
-   * @return \Drupal\Core\Field\FormatterInterface
+   * @return FormatterInterface
    *   The formatter object.
    */
   public function getFieldFormatter() {
@@ -194,7 +195,7 @@ abstract class FieldFormatterEntityEmbedDisplayBase extends EntityEmbedDisplayBa
    * @param string $type
    *   The type of the field.
    *
-   * @return \Drupal\Core\Field\BaseFieldDefinition
+   * @return BaseFieldDefinition
    *   A new field definition.
    */
   protected function createFieldDefinition($type) {
@@ -224,7 +225,7 @@ abstract class FieldFormatterEntityEmbedDisplayBase extends EntityEmbedDisplayBa
    * invoked via the constructor, and our services are injected after the
    * constructor are called.
    *
-   * @return \Drupal\Core\Field\FormatterPluginManager
+   * @return FormatterPluginManager
    */
   public function formatterPluginManager() {
     if (!isset($this->formatterPluginManager)) {
diff --git a/src/Form/EntityEmbedDialog.php b/src/Form/EntityEmbedDialog.php
index 5ae3b11..e1c3ab2 100644
--- a/src/Form/EntityEmbedDialog.php
+++ b/src/Form/EntityEmbedDialog.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\Form;
 
+use Drupal\Core\Entity\EntityFieldManager;
 use Drupal\Component\Utility\Html;
 use Drupal\Core\Ajax\AjaxResponse;
 use Drupal\Core\Ajax\CloseModalDialogCommand;
@@ -34,28 +35,28 @@ class EntityEmbedDialog extends FormBase {
   /**
    * The entity embed display manager.
    *
-   * @var \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager
+   * @var EntityEmbedDisplayManager
    */
   protected $entityEmbedDisplayManager;
 
   /**
    * The form builder.
    *
-   * @var \Drupal\Core\Form\FormBuilderInterface
+   * @var FormBuilderInterface
    */
   protected $formBuilder;
 
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * Event dispatcher service.
    *
-   * @var \Symfony\Component\EventDispatcher\EventDispatcherInterface
+   * @var EventDispatcherInterface
    */
   protected $eventDispatcher;
 
@@ -69,14 +70,14 @@ class EntityEmbedDialog extends FormBase {
   /**
    * The entity field manager.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManager
+   * @var EntityFieldManager
    */
   protected $entityFieldManager;
 
   /**
    * The module handler service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;
 
@@ -90,17 +91,17 @@ class EntityEmbedDialog extends FormBase {
   /**
    * Constructs a EntityEmbedDialog object.
    *
-   * @param \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager $entity_embed_display_manager
+   * @param EntityEmbedDisplayManager $entity_embed_display_manager
    *   The Module Handler.
-   * @param \Drupal\Core\Form\FormBuilderInterface $form_builder
+   * @param FormBuilderInterface $form_builder
    *   The Form Builder.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager service.
-   * @param \Symfony\Component\EventDispatcher\EventDispatcherInterface $event_dispatcher
+   * @param EventDispatcherInterface $event_dispatcher
    *   Event dispatcher service.
-   * @param \Drupal\Core\Entity\EntityFieldManagerInterface $entity_field_manager
+   * @param EntityFieldManagerInterface $entity_field_manager
    *   The entity field manager.
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler.
    */
   public function __construct(EntityEmbedDisplayManager $entity_embed_display_manager, FormBuilderInterface $form_builder, EntityTypeManagerInterface $entity_type_manager, EventDispatcherInterface $event_dispatcher, EntityFieldManagerInterface $entity_field_manager, ModuleHandlerInterface $module_handler) {
@@ -140,7 +141,7 @@ class EntityEmbedDialog extends FormBase {
    *   An array of HTML attributes, including at least `data-entity-type` and
    *   `data-entity-uuid`, and optionally `data-langcode`.
    *
-   * @return \Drupal\Core\Entity\EntityInterface|null
+   * @return EntityInterface|null
    *   The requested entity, or NULL.
    */
   protected function loadEntityByAttributes(array $attributes) {
@@ -161,11 +162,11 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
-   * @param \Drupal\editor\EditorInterface $editor
+   * @param EditorInterface $editor
    *   The editor to which this dialog corresponds.
-   * @param \Drupal\embed\EmbedButtonInterface $embed_button
+   * @param EmbedButtonInterface $embed_button
    *   The URL button to which this dialog corresponds.
    */
   public function buildForm(array $form, FormStateInterface $form_state, EditorInterface $editor = NULL, EmbedButtonInterface $embed_button = NULL) {
@@ -231,7 +232,7 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    *
    * @return array
@@ -241,7 +242,7 @@ class EntityEmbedDialog extends FormBase {
     // Entity element is calculated on every AJAX request/submit.
     // See self::buildForm().
     $entity_element = $form_state->get('entity_element');
-    /** @var \Drupal\embed\EmbedButtonInterface $embed_button */
+    /** @var EmbedButtonInterface $embed_button */
     $embed_button = $form_state->get('embed_button');
     $entity = $form_state->get('entity');
 
@@ -329,14 +330,14 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    *
    * @return array
    *   The form structure.
    */
   public function buildReviewStep(array $form, FormStateInterface $form_state) {
-    /** @var \Drupal\Core\Entity\EntityInterface $entity */
+    /** @var EntityInterface $entity */
     $entity = $form_state->get('entity');
 
     $form['#title'] = $this->t('Review selected @type', ['@type' => $entity->getEntityType()->getSingularLabel()]);
@@ -385,7 +386,7 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    *
    * @return array
@@ -395,11 +396,11 @@ class EntityEmbedDialog extends FormBase {
     // Entity element is calculated on every AJAX request/submit.
     // See self::buildForm().
     $entity_element = $form_state->get('entity_element');
-    /** @var \Drupal\embed\EmbedButtonInterface $embed_button */
+    /** @var EmbedButtonInterface $embed_button */
     $embed_button = $form_state->get('embed_button');
-    /** @var \Drupal\editor\EditorInterface $editor */
+    /** @var EditorInterface $editor */
     $editor = $form_state->get('editor');
-    /** @var \Drupal\Core\Entity\EntityInterface $entity */
+    /** @var EntityInterface $entity */
     $entity = $form_state->get('entity');
     $values = $form_state->getValues();
 
@@ -415,7 +416,7 @@ class EntityEmbedDialog extends FormBase {
         $entity_label = $entity->toLink($entity->label(), 'canonical', $options)->toString();
       }
       elseif ($entity->getEntityTypeId() == 'file') {
-        $entity_label = '<a href="' . file_create_url($entity->getFileUri()) . '" target="_blank">' . $entity->label() . '</a>';
+        $entity_label = '<a href="' . \Drupal::service('file_url_generator')->generateAbsoluteString($entity->getFileUri()) . '" target="_blank">' . $entity->label() . '</a>';
       }
       else {
         $entity_label = '<a href="' . $entity->toUrl()->toString() . '" target="_blank">' . $entity->label() . '</a>';
@@ -576,7 +577,7 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    */
   public function validateSelectStep(array $form, FormStateInterface $form_state) {
@@ -635,7 +636,7 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The current state of the form.
    */
   public function validateEmbedStep(array $form, FormStateInterface $form_state) {
@@ -660,7 +661,7 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   The form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
    */
   public function updatePluginConfigurationForm(array &$form, FormStateInterface $form_state) {
@@ -672,12 +673,12 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   The form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
    * @param string $step
    *   The next step name, such as 'select', 'review' or 'embed'.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response.
    */
   public function submitStep(array &$form, FormStateInterface $form_state, $step) {
@@ -702,10 +703,10 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   The form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response.
    */
   public function submitSelectStep(array &$form, FormStateInterface $form_state) {
@@ -737,10 +738,10 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   The form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response.
    */
   public function submitAndShowSelect(array &$form, FormStateInterface $form_state) {
@@ -752,10 +753,10 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   The form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response.
    */
   public function submitAndShowReview(array &$form, FormStateInterface $form_state) {
@@ -767,10 +768,10 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   The form array.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response.
    */
   public function submitAndShowEmbed(array $form, FormStateInterface $form_state) {
@@ -787,10 +788,10 @@ class EntityEmbedDialog extends FormBase {
    *
    * @param array $form
    *   An associative array containing the structure of the form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state object.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response.
    */
   public function submitEmbedStep(array &$form, FormStateInterface $form_state) {
@@ -853,9 +854,9 @@ class EntityEmbedDialog extends FormBase {
   /**
    * Returns the allowed display plugins given an embed button and an entity.
    *
-   * @param \Drupal\embed\EmbedButtonInterface $embed_button
+   * @param EmbedButtonInterface $embed_button
    *   The embed button.
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   The entity.
    *
    * @return array
@@ -886,14 +887,14 @@ class EntityEmbedDialog extends FormBase {
   /**
    * Load the current entity browser and its settings from the form state.
    *
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state object.
    */
   protected function loadEntityBrowser(FormStateInterface $form_state) {
     $this->entityBrowser = NULL;
     $this->entityBrowserSettings = [];
 
-    /** @var \Drupal\embed\EmbedButtonInterface $embed_button */
+    /** @var EmbedButtonInterface $embed_button */
     $embed_button = $form_state->get('embed_button');
 
     if ($embed_button && $entity_browser_id = $embed_button->getTypePlugin()->getConfigurationValue('entity_browser')) {
diff --git a/src/Plugin/Derivative/FieldFormatterDeriver.php b/src/Plugin/Derivative/FieldFormatterDeriver.php
index d420acc..ff4a39a 100644
--- a/src/Plugin/Derivative/FieldFormatterDeriver.php
+++ b/src/Plugin/Derivative/FieldFormatterDeriver.php
@@ -18,23 +18,23 @@ class FieldFormatterDeriver extends DeriverBase implements ContainerDeriverInter
   /**
    * The manager for formatter plugins.
    *
-   * @var \Drupal\Core\Field\FormatterPluginManager
+   * @var FormatterPluginManager
    */
   protected $formatterManager;
 
   /**
    * The config factory service.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * Constructs new FieldFormatterEntityEmbedDisplayBase.
    *
-   * @param \Drupal\Core\Field\FormatterPluginManager $formatter_manager
+   * @param FormatterPluginManager $formatter_manager
    *   The field formatter plugin manager.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   A config factory for retrieving required config objects.
    */
   public function __construct(FormatterPluginManager $formatter_manager, ConfigFactoryInterface $config_factory) {
diff --git a/src/Plugin/Derivative/ViewModeDeriver.php b/src/Plugin/Derivative/ViewModeDeriver.php
index 75fc762..510dc82 100644
--- a/src/Plugin/Derivative/ViewModeDeriver.php
+++ b/src/Plugin/Derivative/ViewModeDeriver.php
@@ -18,23 +18,23 @@ class ViewModeDeriver extends DeriverBase implements ContainerDeriverInterface {
   /**
    * The entity display repository.
    *
-   * @var \Drupal\Core\Entity\EntityDisplayRepositoryInterface
+   * @var EntityDisplayRepositoryInterface
    */
   protected $entityDisplayRepository;
 
   /**
    * The config factory service.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
   /**
    * Constructs a ViewModeDeriver object.
    *
-   * @param \Drupal\Core\Entity\EntityDisplayRepositoryInterface $entity_display_repository
+   * @param EntityDisplayRepositoryInterface $entity_display_repository
    *   The entity display repository.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   A config factory for retrieving required config objects.
    */
   public function __construct(EntityDisplayRepositoryInterface $entity_display_repository, ConfigFactoryInterface $config_factory) {
diff --git a/src/Plugin/EmbedType/Entity.php b/src/Plugin/EmbedType/Entity.php
index 554ff3d..2795a80 100644
--- a/src/Plugin/EmbedType/Entity.php
+++ b/src/Plugin/EmbedType/Entity.php
@@ -28,28 +28,28 @@ class Entity extends EmbedTypeBase implements ContainerFactoryPluginInterface {
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * The entity type repository service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeRepositoryInterface
+   * @var EntityTypeRepositoryInterface
    */
   protected $entityTypeRepository;
 
   /**
    * The entity type bundle info service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeBundleInfoInterface
+   * @var EntityTypeBundleInfoInterface
    */
   protected $entityTypeBundleInfo;
 
   /**
    * The Entity Embed Display plugin manager.
    *
-   * @var \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager
+   * @var EntityEmbedDisplayManager
    */
   protected $displayPluginManager;
 
@@ -62,13 +62,13 @@ class Entity extends EmbedTypeBase implements ContainerFactoryPluginInterface {
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager service.
-   * @param \Drupal\Core\Entity\EntityTypeRepositoryInterface $entity_type_repository
+   * @param EntityTypeRepositoryInterface $entity_type_repository
    *   The entity type repository service.
-   * @param \Drupal\Core\Entity\EntityTypeBundleInfoInterface $bundle_info
+   * @param EntityTypeBundleInfoInterface $bundle_info
    *   The entity type bundle info service.
-   * @param \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager $display_plugin_manager
+   * @param EntityEmbedDisplayManager $display_plugin_manager
    *   The plugin manager.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entity_type_manager, EntityTypeRepositoryInterface $entity_type_repository, EntityTypeBundleInfoInterface $bundle_info, EntityEmbedDisplayManager $display_plugin_manager) {
@@ -273,7 +273,7 @@ class Entity extends EmbedTypeBase implements ContainerFactoryPluginInterface {
    * {@inheritdoc}
    */
   public function getDefaultIconUrl() {
-    return file_create_url(drupal_get_path('module', 'entity_embed') . '/js/plugins/drupalentity/entity.png');
+    return \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::service('extension.list.module')->getPath('entity_embed') . '/js/plugins/drupalentity/entity.png');
   }
 
   /**
diff --git a/src/Plugin/Filter/EntityEmbedFilter.php b/src/Plugin/Filter/EntityEmbedFilter.php
index f244f89..b63c686 100644
--- a/src/Plugin/Filter/EntityEmbedFilter.php
+++ b/src/Plugin/Filter/EntityEmbedFilter.php
@@ -42,28 +42,28 @@ class EntityEmbedFilter extends FilterBase implements ContainerFactoryPluginInte
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
 
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * The entity embed builder service.
    *
-   * @var \Drupal\entity_embed\EntityEmbedBuilderInterface
+   * @var EntityEmbedBuilderInterface
    */
   protected $builder;
 
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;
 
@@ -88,13 +88,13 @@ class EntityEmbedFilter extends FilterBase implements ContainerFactoryPluginInte
    *   The plugin ID for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer.
-   * @param \Drupal\entity_embed\EntityEmbedBuilderInterface $builder
+   * @param EntityEmbedBuilderInterface $builder
    *   The entity embed builder service.
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   * @param LoggerChannelFactoryInterface $logger_factory
    *   The logger factory.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entity_type_manager, RendererInterface $renderer, EntityEmbedBuilderInterface $builder, LoggerChannelFactoryInterface $logger_factory) {
@@ -158,7 +158,7 @@ class EntityEmbedFilter extends FilterBase implements ContainerFactoryPluginInte
           }
           if (!$entity instanceof EntityInterface) {
             $missing_text = $this->t('Missing @type.', ['@type' => $this->entityTypeManager->getDefinition($entity_type)->getSingularLabel()]);
-            $entity_output = '<img src="' . file_url_transform_relative(file_create_url('core/modules/media/images/icons/no-thumbnail.png')) . '" width="180" height="180" alt="' . $missing_text . '" title="' . $missing_text . '"/>';
+            $entity_output = '<img src="' . \Drupal::service('file_url_generator')->generateString('core/modules/media/images/icons/no-thumbnail.png') . '" width="180" height="180" alt="' . $missing_text . '" title="' . $missing_text . '"/>';
             throw new EntityNotFoundException(sprintf('Unable to load embedded %s entity %s.', $entity_type, $id));
           }
         }
diff --git a/src/Plugin/entity_embed/EntityEmbedDisplay/EntityReferenceFieldFormatter.php b/src/Plugin/entity_embed/EntityEmbedDisplay/EntityReferenceFieldFormatter.php
index 9e79f7d..188ff97 100644
--- a/src/Plugin/entity_embed/EntityEmbedDisplay/EntityReferenceFieldFormatter.php
+++ b/src/Plugin/entity_embed/EntityEmbedDisplay/EntityReferenceFieldFormatter.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\Plugin\entity_embed\EntityEmbedDisplay;
 
+use Drupal\Core\Entity\EntityInterface;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Entity\ContentEntityInterface;
@@ -31,7 +32,7 @@ class EntityReferenceFieldFormatter extends FieldFormatterEntityEmbedDisplayBase
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   protected $configFactory;
 
@@ -114,7 +115,7 @@ class EntityReferenceFieldFormatter extends FieldFormatterEntityEmbedDisplayBase
       return $build;
     }
 
-    /** @var \Drupal\Core\Entity\EntityInterface $entity */
+    /** @var EntityInterface $entity */
     $entity = $this->getEntityFromContext();
 
     // There are a few concerns when rendering an embedded media entity:
diff --git a/src/Plugin/entity_embed/EntityEmbedDisplay/ImageFieldFormatter.php b/src/Plugin/entity_embed/EntityEmbedDisplay/ImageFieldFormatter.php
index fd23923..5d6cd8d 100644
--- a/src/Plugin/entity_embed/EntityEmbedDisplay/ImageFieldFormatter.php
+++ b/src/Plugin/entity_embed/EntityEmbedDisplay/ImageFieldFormatter.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\entity_embed\Plugin\entity_embed\EntityEmbedDisplay;
 
+use Drupal\file\FileInterface;
 use Drupal\Core\Access\AccessResult;
 use Drupal\Core\Entity\EntityTypeManagerInterface;
 use Drupal\Core\Field\FormatterPluginManager;
@@ -32,14 +33,14 @@ class ImageFieldFormatter extends FileFieldFormatter {
   /**
    * The image factory.
    *
-   * @var \Drupal\Core\Image\ImageFactory
+   * @var ImageFactory
    */
   protected $imageFactory;
 
   /**
    * The messenger.
    *
-   * @var \Drupal\Core\Messenger\MessengerInterface
+   * @var MessengerInterface
    */
   protected $messenger;
 
@@ -74,7 +75,7 @@ class ImageFieldFormatter extends FileFieldFormatter {
   /**
    * Checks if the image is valid.
    *
-   * @return \Drupal\Core\Access\AccessResult
+   * @return AccessResult
    *   Returns the access result.
    */
   protected function isValidImage() {
@@ -89,7 +90,7 @@ class ImageFieldFormatter extends FileFieldFormatter {
 
     // @todo needs cacheability metadata for getEntityFromContext.
     // @see \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayBase::getEntityFromContext()
-    /** @var \Drupal\file\FileInterface $entity */
+    /** @var FileInterface $entity */
     if ($entity = $this->getEntityFromContext()) {
       // Loading large files is slow, make sure it is an image mime type before
       // doing that.
diff --git a/src/Plugin/entity_embed/EntityEmbedDisplay/MediaImageDecorator.php b/src/Plugin/entity_embed/EntityEmbedDisplay/MediaImageDecorator.php
index 7d319eb..dfe4827 100644
--- a/src/Plugin/entity_embed/EntityEmbedDisplay/MediaImageDecorator.php
+++ b/src/Plugin/entity_embed/EntityEmbedDisplay/MediaImageDecorator.php
@@ -27,14 +27,14 @@ class MediaImageDecorator implements EntityEmbedDisplayInterface {
   /**
    * The decorated EntityEmbedDisplay class.
    *
-   * @var \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayInterface
+   * @var EntityEmbedDisplayInterface
    */
   private $decorated;
 
   /**
    * MediaImageDecorator constructor.
    *
-   * @param \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayInterface $decorated
+   * @param EntityEmbedDisplayInterface $decorated
    *   The decorated EntityEmbedDisplay plugin.
    */
   public function __construct(EntityEmbedDisplayInterface $decorated) {
@@ -110,7 +110,7 @@ class MediaImageDecorator implements EntityEmbedDisplayInterface {
   public function buildConfigurationForm(array $form, FormStateInterface $form_state) {
     $form = $this->decorated->buildConfigurationForm($form, $form_state);
 
-    /** @var \Drupal\Core\Entity\EntityInterface $entity */
+    /** @var EntityInterface $entity */
     $entity = $this->decorated->getEntityFromContext();
 
     if ($image_field = $this->getMediaImageSourceField($entity)) {
@@ -158,7 +158,7 @@ class MediaImageDecorator implements EntityEmbedDisplayInterface {
    * {@inheritdoc}
    */
   public function submitConfigurationForm(array &$form, FormStateInterface $form_state) {
-    /** @var \Drupal\Core\Entity\EntityInterface $entity */
+    /** @var EntityInterface $entity */
     $entity = $this->decorated->getEntityFromContext();
     if ($image_field = $this->getMediaImageSourceField($entity)) {
       $settings = $entity->{$image_field}->getItemDefinition()->getSettings();
@@ -212,7 +212,7 @@ class MediaImageDecorator implements EntityEmbedDisplayInterface {
   public function build() {
     $build = $this->decorated->build();
 
-    /** @var \Drupal\Core\Entity\EntityInterface $entity */
+    /** @var EntityInterface $entity */
     $entity = $this->decorated->getEntityFromContext();
 
     if ($image_field = $this->getMediaImageSourceField($entity)) {
@@ -235,7 +235,7 @@ class MediaImageDecorator implements EntityEmbedDisplayInterface {
   /**
    * Get image field from source config.
    *
-   * @param \Drupal\Core\Entity\EntityInterface $entity
+   * @param EntityInterface $entity
    *   Embedded entity.
    *
    * @return string|null
diff --git a/src/Twig/EntityEmbedTwigExtension.php b/src/Twig/EntityEmbedTwigExtension.php
index 5dac420..246d43f 100644
--- a/src/Twig/EntityEmbedTwigExtension.php
+++ b/src/Twig/EntityEmbedTwigExtension.php
@@ -14,23 +14,23 @@ class EntityEmbedTwigExtension extends \Twig_Extension {
   /**
    * The entity type manager service.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * The entity embed builder service.
    *
-   * @var \Drupal\entity_embed\EntityEmbedBuilderInterface
+   * @var EntityEmbedBuilderInterface
    */
   protected $builder;
 
   /**
    * Constructs a new EntityEmbedTwigExtension.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager service.
-   * @param \Drupal\entity_embed\EntityEmbedBuilderInterface $builder
+   * @param EntityEmbedBuilderInterface $builder
    *   The Entity embed builder service.
    */
   public function __construct(EntityTypeManagerInterface $entity_type_manager, EntityEmbedBuilderInterface $builder) {
diff --git a/tests/src/Functional/EntityEmbedDisplayManagerTest.php b/tests/src/Functional/EntityEmbedDisplayManagerTest.php
index c18ab25..b11fbb2 100644
--- a/tests/src/Functional/EntityEmbedDisplayManagerTest.php
+++ b/tests/src/Functional/EntityEmbedDisplayManagerTest.php
@@ -2,6 +2,9 @@
 
 namespace Drupal\Tests\entity_embed\Functional;
 
+use Drupal\embed\Entity\EmbedButton;
+use Drupal\file\FileInterface;
+use Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager;
 use Drupal\Tests\BrowserTestBase;
 
 /**
@@ -30,35 +33,35 @@ class EntityEmbedDisplayManagerTest extends BrowserTestBase {
   /**
    * The test button that embeds image files.
    *
-   * @var \Drupal\embed\Entity\EmbedButton
+   * @var EmbedButton
    */
   protected $imageButton;
 
   /**
    * Created file entity.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $image;
 
   /**
    * File created with invalid image.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $invalidImage;
 
   /**
    * The EntityEmbedDisplay plugin manager.
    *
-   * @var \Drupal\entity_embed\EntityEmbedDisplay\EntityEmbedDisplayManager
+   * @var EntityEmbedDisplayManager
    */
   protected $entityEmbedDisplayManager;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->imageButton = $this->container->get('entity_type.manager')
diff --git a/tests/src/Functional/EntityEmbedHooksTest.php b/tests/src/Functional/EntityEmbedHooksTest.php
index 99d30f9..2a2a233 100644
--- a/tests/src/Functional/EntityEmbedHooksTest.php
+++ b/tests/src/Functional/EntityEmbedHooksTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\Functional;
 
+use Drupal\Core\State\StateInterface;
 /**
  * Tests the hooks provided by entity_embed module.
  *
@@ -12,14 +13,14 @@ class EntityEmbedHooksTest extends EntityEmbedTestBase {
   /**
    * The state service.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->state = $this->container->get('state');
   }
diff --git a/tests/src/Functional/EntityEmbedTestBase.php b/tests/src/Functional/EntityEmbedTestBase.php
index 5bebea6..1dbf52b 100644
--- a/tests/src/Functional/EntityEmbedTestBase.php
+++ b/tests/src/Functional/EntityEmbedTestBase.php
@@ -2,6 +2,9 @@
 
 namespace Drupal\Tests\entity_embed\Functional;
 
+use Drupal\user\UserInterface;
+use Drupal\node\NodeInterface;
+use Drupal\file\FileInterface;
 use Drupal\Core\Entity\EntityInterface;
 use Drupal\editor\Entity\Editor;
 use Drupal\file\Entity\File;
@@ -36,21 +39,21 @@ abstract class EntityEmbedTestBase extends BrowserTestBase {
   /**
    * The test user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $webUser;
 
   /**
    * A test node to be used for embedding.
    *
-   * @var \Drupal\node\NodeInterface
+   * @var NodeInterface
    */
   protected $node;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a page content type.
@@ -113,7 +116,7 @@ abstract class EntityEmbedTestBase extends BrowserTestBase {
   /**
    * Retrieves a sample file of the specified type.
    *
-   * @return \Drupal\file\FileInterface
+   * @return FileInterface
    *   The test file created.
    */
   protected function getTestFile($type_name, $size = NULL) {
diff --git a/tests/src/Functional/EntityEmbedTwigTest.php b/tests/src/Functional/EntityEmbedTwigTest.php
index 6ec214a..6b5d356 100644
--- a/tests/src/Functional/EntityEmbedTwigTest.php
+++ b/tests/src/Functional/EntityEmbedTwigTest.php
@@ -14,7 +14,7 @@ class EntityEmbedTwigTest extends EntityEmbedTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     \Drupal::service('theme_installer')->install(['test_theme']);
   }
@@ -34,19 +34,34 @@ class EntityEmbedTwigTest extends EntityEmbedTestBase {
   public function testEntityEmbedTwigFunction() {
     // Test embedding a node using entity ID.
     $this->drupalGet('entity_embed_twig_test/id');
-    $this->assertText($this->node->body->value, 'Embedded node exists in page');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains($this->node->body->value);
 
     // Test 'Label' Entity Embed Display plugin.
     $this->drupalGet('entity_embed_twig_test/label_plugin');
-    $this->assertText($this->node->title->value, 'Title of the embedded node exists in page.');
-    $this->assertNoText($this->node->body->value, 'Body of embedded node does not exists in page when "Label" plugin is used.');
-    $this->assertLinkByHref('node/' . $this->node->id(), 0, 'Link to the embedded node exists when "Label" plugin is used.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains($this->node->title->value);
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains($this->node->body->value);
+    $this->assertSession()->linkByHrefExists('node/' . $this->node->id(), 0, 'Link to the embedded node exists when "Label" plugin is used.');
 
     // Test 'Label' Entity Embed Display plugin without linking to the node.
     $this->drupalGet('entity_embed_twig_test/label_plugin_no_link');
-    $this->assertText($this->node->title->value, 'Title of the embedded node exists in page.');
-    $this->assertNoText($this->node->body->value, 'Body of embedded node does not exists in page when "Label" plugin is used.');
-    $this->assertNoLinkByHref('node/' . $this->node->id(), 0, 'Link to the embedded node does not exists.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextContains() for HTML responses, responseContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextContains($this->node->title->value);
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains($this->node->body->value);
+    $this->assertSession()->linkByHrefNotExists('node/' . $this->node->id(), 0, 'Link to the embedded node does not exists.');
   }
 
 }
diff --git a/tests/src/Functional/EntityEmbedUpdateHookTest.php b/tests/src/Functional/EntityEmbedUpdateHookTest.php
index f967102..a47ba8e 100644
--- a/tests/src/Functional/EntityEmbedUpdateHookTest.php
+++ b/tests/src/Functional/EntityEmbedUpdateHookTest.php
@@ -24,7 +24,7 @@ class EntityEmbedUpdateHookTest extends UpdatePathTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $button = $this->container
       ->get('entity_type.manager')
diff --git a/tests/src/Functional/EntityReferenceFieldFormatterTest.php b/tests/src/Functional/EntityReferenceFieldFormatterTest.php
index b78b51d..2e7ec8b 100644
--- a/tests/src/Functional/EntityReferenceFieldFormatterTest.php
+++ b/tests/src/Functional/EntityReferenceFieldFormatterTest.php
@@ -21,7 +21,7 @@ class EntityReferenceFieldFormatterTest extends EntityEmbedTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Add a new menu entity which does not has a view controller.
diff --git a/tests/src/Functional/FileFieldFormatterTest.php b/tests/src/Functional/FileFieldFormatterTest.php
index 351ba1b..a3a93b7 100644
--- a/tests/src/Functional/FileFieldFormatterTest.php
+++ b/tests/src/Functional/FileFieldFormatterTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\Functional;
 
+use Drupal\file\FileInterface;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Form\FormState;
 
@@ -22,14 +23,14 @@ class FileFieldFormatterTest extends EntityEmbedTestBase {
   /**
    * Created file entity.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $file;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->file = $this->getTestFile('text');
   }
@@ -81,7 +82,7 @@ class FileFieldFormatterTest extends EntityEmbedTestBase {
     // Verify description of the embedded file exists in page.
     $this->assertSession()->responseContains($embed_settings['description']);
     $this->assertSession()->responseNotContains('This placeholder should not be rendered.');
-    $this->assertSession()->linkByHrefExists(file_url_transform_relative(file_create_url($this->file->getFileUri())), 0, 'Link to the embedded file exists.');
+    $this->assertSession()->linkByHrefExists(\Drupal::service('file_url_generator')->generateString($this->file->getFileUri()), 0, 'Link to the embedded file exists.');
   }
 
 }
diff --git a/tests/src/Functional/ImageFieldFormatterTest.php b/tests/src/Functional/ImageFieldFormatterTest.php
index 95cbc30..250a657 100644
--- a/tests/src/Functional/ImageFieldFormatterTest.php
+++ b/tests/src/Functional/ImageFieldFormatterTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\Functional;
 
+use Drupal\file\FileInterface;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Form\FormState;
 
@@ -22,21 +23,21 @@ class ImageFieldFormatterTest extends EntityEmbedTestBase {
   /**
    * Created file entity.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $image;
 
   /**
    * Created file entity.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $file;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->image = $this->getTestFile('image');
     $this->file = $this->getTestFile('text');
@@ -107,7 +108,7 @@ class ImageFieldFormatterTest extends EntityEmbedTestBase {
     // when embed is successful.
     $this->assertSession()->responseContains($alt_text);
     $this->assertSession()->responseNotContains('This placeholder should not be rendered.');
-    $this->assertSession()->linkByHrefExists(file_url_transform_relative(file_create_url($this->image->getFileUri())), 0, 'Link to the embedded image exists.');
+    $this->assertSession()->linkByHrefExists(\Drupal::service('file_url_generator')->generateString($this->image->getFileUri()), 0, 'Link to the embedded image exists.');
 
     // Embed all three field types in one, to ensure they all render correctly.
     $content = '<drupal-entity data-entity-type="node" data-entity-uuid="' . $this->node->uuid() . '" data-entity-embed-display="entity_reference:entity_reference_label"></drupal-entity>';
diff --git a/tests/src/FunctionalJavascript/ButtonAdminTest.php b/tests/src/FunctionalJavascript/ButtonAdminTest.php
index 272dda5..631719d 100644
--- a/tests/src/FunctionalJavascript/ButtonAdminTest.php
+++ b/tests/src/FunctionalJavascript/ButtonAdminTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\user\UserInterface;
 use Drupal\FunctionalJavascriptTests\WebDriverTestBase;
 use Drupal\Tests\media\Traits\MediaTypeCreationTrait;
 
@@ -32,14 +33,14 @@ class ButtonAdminTest extends WebDriverTestBase {
   /**
    * The user to use during testing.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->container
diff --git a/tests/src/FunctionalJavascript/CKEditorIntegrationTest.php b/tests/src/FunctionalJavascript/CKEditorIntegrationTest.php
index b3d1804..97520ca 100644
--- a/tests/src/FunctionalJavascript/CKEditorIntegrationTest.php
+++ b/tests/src/FunctionalJavascript/CKEditorIntegrationTest.php
@@ -2,6 +2,10 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\user\UserInterface;
+use Drupal\node\NodeInterface;
+use Behat\Mink\Exception\ElementNotFoundException;
+use Behat\Mink\Exception\ResponseTextException;
 use Drupal\editor\Entity\Editor;
 use Drupal\filter\Entity\FilterFormat;
 
@@ -42,21 +46,21 @@ class CKEditorIntegrationTest extends EntityEmbedTestBase {
   /**
    * The test administrative user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;
 
   /**
    * A test node to be used for embedding.
    *
-   * @var \Drupal\node\NodeInterface
+   * @var NodeInterface
    */
   protected $node;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->button = $this->container->get('entity_type.manager')
@@ -274,8 +278,8 @@ class CKEditorIntegrationTest extends EntityEmbedTestBase {
    * @param array $not_contains
    *   The strings the CKEditor instance is expected to not contain.
    *
-   * @throws \Behat\Mink\Exception\ElementNotFoundException
-   * @throws \Behat\Mink\Exception\ResponseTextException
+   * @throws ElementNotFoundException
+   * @throws ResponseTextException
    */
   protected function assertCkeditorUndoOrRedo($action, array $contains, array $not_contains) {
     if ($action !== 'undo' && $action !== 'redo') {
diff --git a/tests/src/FunctionalJavascript/ConfigurationUiTest.php b/tests/src/FunctionalJavascript/ConfigurationUiTest.php
index 7abdf03..bcf2efa 100644
--- a/tests/src/FunctionalJavascript/ConfigurationUiTest.php
+++ b/tests/src/FunctionalJavascript/ConfigurationUiTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\Core\Session\AccountInterface;
 use Drupal\editor\Entity\Editor;
 use Drupal\filter\Entity\FilterFormat;
 
@@ -25,14 +26,14 @@ class ConfigurationUiTest extends EntityEmbedTestBase {
   /**
    * The test administrative user.
    *
-   * @var \Drupal\Core\Session\AccountInterface
+   * @var AccountInterface
    */
   protected $adminUser;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $format = FilterFormat::create([
diff --git a/tests/src/FunctionalJavascript/ContentTranslationTest.php b/tests/src/FunctionalJavascript/ContentTranslationTest.php
index 86c579c..7df5cba 100644
--- a/tests/src/FunctionalJavascript/ContentTranslationTest.php
+++ b/tests/src/FunctionalJavascript/ContentTranslationTest.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\user\UserInterface;
+use Drupal\file\FileInterface;
 use Drupal\Component\Utility\Html;
 use Drupal\file\Entity\File;
 use Drupal\media\Entity\Media;
@@ -16,7 +18,7 @@ class ContentTranslationTest extends EntityEmbedTestBase {
   /**
    * The 'translator' user to use during testing.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $translator;
 
@@ -28,7 +30,7 @@ class ContentTranslationTest extends EntityEmbedTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->translator = $this->drupalCreateUser([
@@ -78,7 +80,7 @@ class ContentTranslationTest extends EntityEmbedTestBase {
     $node_fr->save();
 
     \Drupal::service('file_system')->copy($this->root . '/core/misc/druplicon.png', 'public://Smeagol.jpg');
-    /** @var \Drupal\file\FileInterface $file */
+    /** @var FileInterface $file */
     $file = File::create([
       'uri' => 'public://Smeagol.jpg',
       'uid' => $this->translator->id(),
diff --git a/tests/src/FunctionalJavascript/EntityEmbedDialogTest.php b/tests/src/FunctionalJavascript/EntityEmbedDialogTest.php
index 8008cdc..d5e72e3 100644
--- a/tests/src/FunctionalJavascript/EntityEmbedDialogTest.php
+++ b/tests/src/FunctionalJavascript/EntityEmbedDialogTest.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\user\UserInterface;
+use Drupal\node\NodeInterface;
 use Drupal\editor\Entity\Editor;
 use Drupal\filter\Entity\FilterFormat;
 
@@ -23,21 +25,21 @@ class EntityEmbedDialogTest extends EntityEmbedTestBase {
   /**
    * The test user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $webUser;
 
   /**
    * A test node to be used for embedding.
    *
-   * @var \Drupal\node\NodeInterface
+   * @var NodeInterface
    */
   protected $node;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Create a page content type.
diff --git a/tests/src/FunctionalJavascript/ImageFieldFormatterTest.php b/tests/src/FunctionalJavascript/ImageFieldFormatterTest.php
index cb864aa..9025271 100644
--- a/tests/src/FunctionalJavascript/ImageFieldFormatterTest.php
+++ b/tests/src/FunctionalJavascript/ImageFieldFormatterTest.php
@@ -2,6 +2,9 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\embed\Entity\EmbedButton;
+use Drupal\user\UserInterface;
+use Drupal\file\FileInterface;
 use Drupal\FunctionalJavascriptTests\WebDriverTestBase;
 use Drupal\editor\Entity\Editor;
 use Drupal\filter\Entity\FilterFormat;
@@ -35,35 +38,35 @@ class ImageFieldFormatterTest extends WebDriverTestBase {
   /**
    * The test button.
    *
-   * @var Drupal\embed\Entity\EmbedButton
+   * @var EmbedButton
    */
   protected $button;
 
   /**
    * The test administrative user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;
 
   /**
    * Created file entity.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $image;
 
   /**
    * File created with invalid image.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $invalidImage;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->button = $this->container->get('entity_type.manager')
diff --git a/tests/src/FunctionalJavascript/MediaImageTest.php b/tests/src/FunctionalJavascript/MediaImageTest.php
index 9965905..15563d5 100644
--- a/tests/src/FunctionalJavascript/MediaImageTest.php
+++ b/tests/src/FunctionalJavascript/MediaImageTest.php
@@ -2,6 +2,10 @@
 
 namespace Drupal\Tests\entity_embed\FunctionalJavascript;
 
+use Drupal\user\UserInterface;
+use Drupal\media\MediaInterface;
+use Drupal\node\NodeInterface;
+use Behat\Mink\Exception\ElementNotFoundException;
 use Drupal\Component\Utility\Html;
 use Drupal\editor\Entity\Editor;
 use Drupal\entity_embed\Plugin\entity_embed\EntityEmbedDisplay\MediaImageDecorator;
@@ -24,21 +28,21 @@ class MediaImageTest extends EntityEmbedTestBase {
   /**
    * The user to use during testing.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $adminUser;
 
   /**
    * The sample Media entity to embed.
    *
-   * @var \Drupal\media\MediaInterface
+   * @var MediaInterface
    */
   protected $media;
 
   /**
    * A host entity with a body field to embed media in.
    *
-   * @var \Drupal\node\NodeInterface
+   * @var NodeInterface
    */
   protected $host;
 
@@ -55,7 +59,7 @@ class MediaImageTest extends EntityEmbedTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     // Note that media_install() grants 'view media' to all users by default.
@@ -596,6 +600,7 @@ class MediaImageTest extends EntityEmbedTestBase {
 
   /**
    * Tests linkability of the CKEditor widget when `drupalimage` is disabled.
+   * @doesNotPerformAssertions
    */
   public function testCkeditorWidgetIsLinkableWhenDrupalImageIsAbsent() {
     // Remove the `drupalimage` plugin's `DrupalImage` button.
@@ -840,7 +845,7 @@ JS;
    * @param string $text
    *   The title attribute of the link to click.
    *
-   * @throws \Behat\Mink\Exception\ElementNotFoundException
+   * @throws ElementNotFoundException
    */
   protected function clickPathLinkByTitleAttribute($text) {
     $this->getSession()->switchToIFrame();
diff --git a/tests/src/Kernel/EntityEmbedFilterDisabledIntegrationsTest.php b/tests/src/Kernel/EntityEmbedFilterDisabledIntegrationsTest.php
index f47ada0..9465c66 100644
--- a/tests/src/Kernel/EntityEmbedFilterDisabledIntegrationsTest.php
+++ b/tests/src/Kernel/EntityEmbedFilterDisabledIntegrationsTest.php
@@ -21,7 +21,7 @@ class EntityEmbedFilterDisabledIntegrationsTest extends EntityEmbedFilterTestBas
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig('system');
diff --git a/tests/src/Kernel/EntityEmbedFilterLegacyTest.php b/tests/src/Kernel/EntityEmbedFilterLegacyTest.php
index f060f90..ea9093e 100644
--- a/tests/src/Kernel/EntityEmbedFilterLegacyTest.php
+++ b/tests/src/Kernel/EntityEmbedFilterLegacyTest.php
@@ -12,7 +12,7 @@ class EntityEmbedFilterLegacyTest extends EntityEmbedFilterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig('system');
diff --git a/tests/src/Kernel/EntityEmbedFilterOverridesTest.php b/tests/src/Kernel/EntityEmbedFilterOverridesTest.php
index 22a4de2..402522b 100644
--- a/tests/src/Kernel/EntityEmbedFilterOverridesTest.php
+++ b/tests/src/Kernel/EntityEmbedFilterOverridesTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\Kernel;
 
+use Drupal\file\FileInterface;
 use Drupal\field\Entity\FieldConfig;
 use Drupal\file\Entity\File;
 use Drupal\media\Entity\Media;
@@ -22,7 +23,7 @@ class EntityEmbedFilterOverridesTest extends EntityEmbedFilterTestBase {
   /**
    * The image file to use in tests.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $image;
 
@@ -38,7 +39,7 @@ class EntityEmbedFilterOverridesTest extends EntityEmbedFilterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installSchema('file', ['file_usage']);
diff --git a/tests/src/Kernel/EntityEmbedFilterTest.php b/tests/src/Kernel/EntityEmbedFilterTest.php
index 854e354..ae1d1d3 100644
--- a/tests/src/Kernel/EntityEmbedFilterTest.php
+++ b/tests/src/Kernel/EntityEmbedFilterTest.php
@@ -24,7 +24,7 @@ class EntityEmbedFilterTest extends EntityEmbedFilterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installConfig('system');
@@ -275,7 +275,7 @@ class EntityEmbedFilterTest extends EntityEmbedFilterTestBase {
     $this->assertNotEmpty($deleted_embed_warning);
     $this->assertHasAttributes($deleted_embed_warning[0], [
       'alt' => $expected_missing_text,
-      'src' => file_url_transform_relative(file_create_url('core/modules/media/images/icons/no-thumbnail.png')),
+      'src' => \Drupal::service('file_url_generator')->generateString('core/modules/media/images/icons/no-thumbnail.png'),
       'title' => $expected_missing_text,
     ]);
   }
diff --git a/tests/src/Kernel/EntityEmbedFilterTestBase.php b/tests/src/Kernel/EntityEmbedFilterTestBase.php
index 43e287f..54221f2 100644
--- a/tests/src/Kernel/EntityEmbedFilterTestBase.php
+++ b/tests/src/Kernel/EntityEmbedFilterTestBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\entity_embed\Kernel;
 
+use Drupal\node\NodeInterface;
 use Drupal\Component\Utility\Html;
 use Drupal\Core\Render\BubbleableMetadata;
 use Drupal\Core\Render\RenderContext;
@@ -52,14 +53,14 @@ abstract class EntityEmbedFilterTestBase extends KernelTestBase {
   /**
    * The sample Node entity to embed.
    *
-   * @var \Drupal\node\NodeInterface
+   * @var NodeInterface
    */
   protected $embeddedEntity;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     $this->installSchema('node', 'node_access');
@@ -114,7 +115,7 @@ abstract class EntityEmbedFilterTestBase extends KernelTestBase {
    * @param string $langcode
    *   The language code of the text to be filtered.
    *
-   * @return \Drupal\filter\FilterProcessResult
+   * @return FilterProcessResult
    *   The filtered text, wrapped in a FilterProcessResult object, and possibly
    *   with associated assets, cacheability metadata and placeholders.
    *
@@ -157,7 +158,7 @@ abstract class EntityEmbedFilterTestBase extends KernelTestBase {
    *   (optional) The filter plugin IDs to apply to the given text, in the order
    *   they are being requested to be executed.
    *
-   * @return \Drupal\filter\FilterProcessResult
+   * @return FilterProcessResult
    *   The filtered text, wrapped in a FilterProcessResult object, and possibly
    *   with associated assets, cacheability metadata and placeholders.
    *
@@ -172,11 +173,11 @@ abstract class EntityEmbedFilterTestBase extends KernelTestBase {
     }
 
     $render_context = new RenderContext();
-    /** @var \Drupal\filter\FilterProcessResult $filter_result */
+    /** @var FilterProcessResult $filter_result */
     $filter_result = $this->container->get('renderer')->executeInRenderContext($render_context, function () use ($text, $filters, $langcode) {
       $metadata = new BubbleableMetadata();
       foreach ($filters as $filter) {
-        /** @var \Drupal\filter\FilterProcessResult $result */
+        /** @var FilterProcessResult $result */
         $result = $filter->process($text, $langcode);
         $metadata = $metadata->merge($result);
         $text = $result->getProcessedText();
diff --git a/tests/src/Kernel/EntityEmbedFilterTranslationTest.php b/tests/src/Kernel/EntityEmbedFilterTranslationTest.php
index 7f907aa..383c89f 100644
--- a/tests/src/Kernel/EntityEmbedFilterTranslationTest.php
+++ b/tests/src/Kernel/EntityEmbedFilterTranslationTest.php
@@ -22,7 +22,7 @@ class EntityEmbedFilterTranslationTest extends EntityEmbedFilterTestBase {
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
 
     ConfigurableLanguage::createFromLangcode('pt-br')->save();
