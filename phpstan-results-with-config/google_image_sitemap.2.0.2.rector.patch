diff --git a/google_image_sitemap.info.yml b/google_image_sitemap.info.yml
index 59ef148..c68bd3f 100644
--- a/google_image_sitemap.info.yml
+++ b/google_image_sitemap.info.yml
@@ -1,6 +1,6 @@
 name: 'Google Image Sitemap'
 description: 'This will create a Google Image Sitemap.'
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 type: module
 package: Search
 configure: google_image_sitemap.list
diff --git a/src/Controller/GISController.php b/src/Controller/GISController.php
index 242bbcb..675b8eb 100644
--- a/src/Controller/GISController.php
+++ b/src/Controller/GISController.php
@@ -129,7 +129,7 @@ class GISController extends ControllerBase {
         foreach ($nodes as $node) {
           $output .= '<url><loc>' . Url::fromUri('internal:/node/' . $node->nid, ['absolute' => TRUE])->toString() . '</loc>
                      <image:image>
-                       <image:loc>' . file_create_url($node->uri) . '</image:loc>
+                       <image:loc>' . \Drupal::service('file_url_generator')->generateAbsoluteString($node->uri) . '</image:loc>
                        <image:title>' . $node->title . '</image:title>
                        <image:caption>' . $node->title . '</image:caption>
                        <image:license>' . $result->license . '</image:license>
diff --git a/src/Form/GoogleImageSitemapDeleteConfirmForm.php b/src/Form/GoogleImageSitemapDeleteConfirmForm.php
index f6ef1d1..a40dc94 100644
--- a/src/Form/GoogleImageSitemapDeleteConfirmForm.php
+++ b/src/Form/GoogleImageSitemapDeleteConfirmForm.php
@@ -17,7 +17,7 @@ class GoogleImageSitemapDeleteConfirmForm extends ConfirmFormBase {
   /**
    * The database connection.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $connection;
   private $sitemapId;
@@ -25,7 +25,7 @@ class GoogleImageSitemapDeleteConfirmForm extends ConfirmFormBase {
   /**
    * Constructs a new DblogClearLogConfirmForm.
    *
-   * @param \Drupal\Core\Database\Connection $connection
+   * @param Connection $connection
    *   The database connection.
    */
   public function __construct(Connection $connection) {
