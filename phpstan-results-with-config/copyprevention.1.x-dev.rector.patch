diff --git a/copyprevention.info.yml b/copyprevention.info.yml
index 9e60deb..d2ebee3 100644
--- a/copyprevention.info.yml
+++ b/copyprevention.info.yml
@@ -2,5 +2,5 @@ name: 'Copy Prevention'
 description: 'Makes copying from your site harder.'
 package: 'User interface'
 configure: copyprevention.settings_form
-core_version_requirement: '^8 || ^9'
+core_version_requirement: ^9.3 || ^10
 type: module
diff --git a/copyprevention.module b/copyprevention.module
index 1038dd2..696125f 100644
--- a/copyprevention.module
+++ b/copyprevention.module
@@ -68,12 +68,12 @@ function copyprevention_page_attachments(&$page) {
     return;
   }
 
-  $path = $base_url . '/' . drupal_get_path('module', 'copyprevention');
+  $path = $base_url . '/' . \Drupal::service('extension.list.module')->getPath('copyprevention');
   $settings = [
     'body' => array_filter(\Drupal::configFactory()->getEditable('copyprevention.settings')->get('copyprevention_body')),
     'images' => array_filter(\Drupal::configFactory()->getEditable('copyprevention.settings')->get('copyprevention_images')),
     'images_min_dimension' => \Drupal::configFactory()->getEditable('copyprevention.settings')->get('copyprevention_images_min_dimension'),
-    'transparentgif' => file_create_url($path . '/transparent.gif'),
+    'transparentgif' => \Drupal::service('file_url_generator')->generateAbsoluteString($path . '/transparent.gif'),
 
   ];
   $page['#attached']['drupalSettings']['copyprevention'] = $settings;
diff --git a/src/Form/CopypreventionSettingsForm.php b/src/Form/CopypreventionSettingsForm.php
index 8e9c482..2d0f5f3 100644
--- a/src/Form/CopypreventionSettingsForm.php
+++ b/src/Form/CopypreventionSettingsForm.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\copyprevention\Form;
 
+use Drupal\Core\Config\Config;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Form\ConfigFormBase;
 use Drupal\Core\Form\FormStateInterface;
@@ -15,7 +16,7 @@ class CopypreventionSettingsForm extends ConfigFormBase {
   /**
    * The configuration factory.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $config;
 
