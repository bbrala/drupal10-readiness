diff --git a/ebt_core.module b/ebt_core.module
index fba0f78..b738820 100644
--- a/ebt_core.module
+++ b/ebt_core.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\block_content\Entity\BlockContent;
 /**
  * @file
  * EBT Core module file.
@@ -214,7 +215,7 @@ function ebt_core_block_content_view(array &$build, EntityInterface $entity, Ent
   $bundle = _ebt_core_underscore_to_camel_case($entity->bundle());
 
   // Use Block revision ID for Layout builder blocks.
-  /** @var \Drupal\block_content\Entity\BlockContent $entity */
+  /** @var BlockContent $entity */
   $revision_id = $entity->get('revision_id')->getValue();
   if (!empty($entity->field_ebt_settings)) {
     $options = $entity->get('field_ebt_settings')->getValue();
diff --git a/src/Services/GenerateCSS.php b/src/Services/GenerateCSS.php
index 7267006..38fc007 100644
--- a/src/Services/GenerateCSS.php
+++ b/src/Services/GenerateCSS.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\ebt_core\Services;
 
+use Drupal\Core\Config\Config;
+use Drupal\file\Entity\File;
 use Drupal\Component\Utility\Html;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Theme\ThemeManagerInterface;
@@ -16,32 +18,32 @@ class GenerateCSS {
   /**
    * The EBT Core configuration.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $config;
 
   /**
    * The theme manager.
    *
-   * @var \Drupal\Core\Theme\ThemeManagerInterface
+   * @var ThemeManagerInterface
    */
   protected $themeManager;
 
   /**
    * The file URL generator.
    *
-   * @var \Drupal\Core\File\FileUrlGeneratorInterface
+   * @var FileUrlGeneratorInterface
    */
   protected $fileUrlGenerator;
 
   /**
    * Constructs a new GenerateCSS object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   Config factory.
-   * @param \Drupal\Core\Theme\ThemeManagerInterface $theme_manager
+   * @param ThemeManagerInterface $theme_manager
    *   The theme manager.
-   * @param \Drupal\Core\File\FileUrlGeneratorInterface $file_url_generator
+   * @param FileUrlGeneratorInterface $file_url_generator
    *   The file URL generator.
    */
   public function __construct(ConfigFactoryInterface $config_factory,  ThemeManagerInterface $theme_manager, FileUrlGeneratorInterface $file_url_generator = NULL) {
@@ -101,7 +103,7 @@ class GenerateCSS {
       $media = Media::load($settings['other_settings']['background_media']);
       if (!empty($media) && $media->bundle() == 'image') {
         // It is for image media.
-        /** @var \Drupal\file\Entity\File $file */
+        /** @var File $file */
         $file = $media->field_media_image->entity;
         $uri = $file->getFileUri();
         if ($this->fileUrlGenerator !== null) {
@@ -109,7 +111,7 @@ class GenerateCSS {
         }
         else {
           // Add support for Drupal 9.2 and below.
-          $media_url = file_url_transform_relative(file_create_url($uri));
+          $media_url = \Drupal::service('file_url_generator')->generateString($uri);
         }
 
         if (!empty($media_url)) {
diff --git a/src/Services/GenerateJS.php b/src/Services/GenerateJS.php
index e1e58e7..40a6863 100644
--- a/src/Services/GenerateJS.php
+++ b/src/Services/GenerateJS.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\ebt_core\Services;
 
+use Drupal\Core\Config\Config;
+use Drupal\file\Entity\File;
 use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\media\Entity\Media;
 use Drupal\media\OEmbed\UrlResolver;
@@ -15,32 +17,32 @@ class GenerateJS {
   /**
    * The EBT Core configuration.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $config;
 
   /**
    * Converts oEmbed media URLs into endpoint-specific resource URLs.
    *
-   * @var \Drupal\media\OEmbed\UrlResolver
+   * @var UrlResolver
    */
   protected $urlResolver;
 
   /**
    * The file URL generator.
    *
-   * @var \Drupal\Core\File\FileUrlGeneratorInterface
+   * @var FileUrlGeneratorInterface
    */
   protected $fileUrlGenerator;
 
   /**
    * Constructs a new GenerateCSS object.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   Config factory.
-   * @param \Drupal\media\OEmbed\UrlResolver $url_resolver
+   * @param UrlResolver $url_resolver
    *   Converts oEmbed media URLs into endpoint-specific resource URLs.
-   * @param \Drupal\Core\File\FileUrlGeneratorInterface $file_url_generator
+   * @param FileUrlGeneratorInterface $file_url_generator
    *   The file URL generator.
    */
   public function __construct(ConfigFactoryInterface $config_factory, UrlResolver $url_resolver, FileUrlGeneratorInterface $file_url_generator = NULL) {
@@ -61,7 +63,7 @@ class GenerateJS {
     if (!empty($settings['other_settings']['background_media'])) {
       $media = Media::load($settings['other_settings']['background_media']);
       if (!empty($media) && $media->bundle() == 'image') {
-        /** @var \Drupal\file\Entity\File $file */
+        /** @var File $file */
         $file = $media->field_media_image->entity;
         $uri = $file->getFileUri();
         if ($this->fileUrlGenerator !== null) {
@@ -69,7 +71,7 @@ class GenerateJS {
         }
         else {
           // Add support for Drupal 9.2 and below.
-          $media_url = file_url_transform_relative(file_create_url($uri));
+          $media_url = \Drupal::service('file_url_generator')->generateString($uri);
         }
         if (!empty($media_url) && !empty($settings['other_settings']['background_image_style']) &&
           $settings['other_settings']['background_image_style'] == 'parallax') {
