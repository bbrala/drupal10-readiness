diff --git a/modules/test_file_history/test_file_history.module b/modules/test_file_history/test_file_history.module
index ed3a8f6..f1bf0a7 100644
--- a/modules/test_file_history/test_file_history.module
+++ b/modules/test_file_history/test_file_history.module
@@ -17,7 +17,7 @@ function test_file_history_file_history_upload_validator_alter(&$validators, $fi
 /**
  * Add a custom validator to file_upload.
  *
- * @param \Drupal\file\FileInterface $file
+ * @param FileInterface $file
  *   A file entity.
  * @param mixed $first_parameter
  *   (optional) Some additional data.
diff --git a/src/Controller/FileHistoryDownloadController.php b/src/Controller/FileHistoryDownloadController.php
index 77be80e..088c678 100644
--- a/src/Controller/FileHistoryDownloadController.php
+++ b/src/Controller/FileHistoryDownloadController.php
@@ -17,7 +17,7 @@ class FileHistoryDownloadController extends ControllerBase {
   /**
    * File_system_service.
    *
-   * @var \Drupal\Core\File\FileSystem
+   * @var FileSystem
    */
   private $fileSystemService;
 
@@ -42,10 +42,10 @@ class FileHistoryDownloadController extends ControllerBase {
   /**
    * Download non public files.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   File object.
    *
-   * @return \Symfony\Component\HttpFoundation\Response
+   * @return Response
    *   File content
    */
   public function downloadFile(FileInterface $file) {
diff --git a/src/Element/FileHistory.php b/src/Element/FileHistory.php
index f070b51..52aef21 100644
--- a/src/Element/FileHistory.php
+++ b/src/Element/FileHistory.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\file_history\Element;
 
+use Drupal\Core\Render\RendererInterface;
 use Drupal\Component\Utility\NestedArray;
 use Drupal\Core\Ajax\AjaxResponse;
 use Drupal\Core\Ajax\ReplaceCommand;
@@ -107,16 +108,16 @@ class FileHistory extends FormElement {
    *
    * @param mixed $form
    *   The build form.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   The form state.
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The current request.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The ajax response of the ajax upload.
    */
   public static function uploadAjaxCallback(&$form, FormStateInterface &$form_state, Request $request) {
-    /** @var \Drupal\Core\Render\RendererInterface $renderer */
+    /** @var RendererInterface $renderer */
     $renderer = \Drupal::service('renderer');
 
     $form_parents = explode('/', $request->query->get('element_parents'));
@@ -429,7 +430,7 @@ class FileHistory extends FormElement {
    *
    * @param mixed $element
    *   Element.
-   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   * @param FormStateInterface $form_state
    *   Form state.
    * @param array $new_files
    *   Files newly uploaded.
@@ -483,7 +484,7 @@ class FileHistory extends FormElement {
 
     // Provide Legacy mode (use physical folder to manage files).
     if ($element['#legacy']) {
-      /** @var \Drupal\Core\File\FileSystemInterface  $file_sytem_service */
+      /** @var FileSystemInterface $file_sytem_service */
       $file_sytem_service = \Drupal::service('file_system');
 
       if (!$file_sytem_service->prepareDirectory($element['#upload_location'])) {
@@ -585,10 +586,10 @@ class FileHistory extends FormElement {
   /**
    * Generate Download URL.
    *
-   * @param \Drupal\file\Entity\File $file
+   * @param File $file
    *   File object.
    *
-   * @return \Drupal\Core\Url
+   * @return Url
    *   Url object
    */
   public static function makeDownloadLink(File $file): Url {
@@ -597,7 +598,7 @@ class FileHistory extends FormElement {
     $scheme = \Drupal::service('file_system')->uriScheme($path);
 
     if ($scheme == 'public') {
-      $filepath = file_create_url($path);
+      $filepath = \Drupal::service('file_url_generator')->generateAbsoluteString($path);
       return Url::fromUri($filepath);
     }
     else {
