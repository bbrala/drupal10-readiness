diff --git a/badgr_badge.install b/badgr_badge.install
index 255ab7f..f088b08 100644
--- a/badgr_badge.install
+++ b/badgr_badge.install
@@ -12,7 +12,7 @@ function badgr_badge_uninstall() {
   $result = \Drupal::entityQuery('node')
       ->condition('type', ['badgr_account','badgr_issuer','badgr_badges'], 'IN')
       ->execute();
-  entity_delete_multiple('node', $result);
+  \Drupal::service('entity_type.manager')->getStorage('node')->delete(\Drupal::service('entity_type.manager')->getStorage('node')->loadMultiple($result));
   $configFactory = \Drupal::configFactory();
   $configNames = [
     'field.field.node.badgr_account.field_badgr_access_token',
diff --git a/src/BadgrHelpers.php b/src/BadgrHelpers.php
index 497d824..4b87249 100644
--- a/src/BadgrHelpers.php
+++ b/src/BadgrHelpers.php
@@ -19,14 +19,14 @@ class BadgrHelpers {
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * Constructs a BadgrHelpers object.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
    */
   public function __construct(EntityTypeManagerInterface $entity_type_manager) {
@@ -151,8 +151,8 @@ class BadgrHelpers {
             if (!empty($value_badges['image'])) {
               $image_file_name = pathinfo($value_badges['image']);
               $image = file_get_contents($value_badges['image']);
-              $file = file_save_data($image, 'public://' . $image_file_name['basename'], FileSystemInterface::EXISTS_RENAME);
-              $file = file_copy($file, 'public://');
+              $file = \Drupal::service('file.repository')->writeData($image, 'public://' . $image_file_name['basename'], FileSystemInterface::EXISTS_RENAME);
+              $file = \Drupal::service('file.repository')->copy($file, 'public://');
               $issuer_content->set('field_badge_image',['target_id' => $file->id()]);
             }
             $issuer_content->save();
@@ -170,7 +170,7 @@ class BadgrHelpers {
             if (!empty($value_badges['image'])) {
               $image_file_name = pathinfo($value_badges['image']);
               $image = file_get_contents($value_badges['image']);
-              $file = file_save_data($image, 'public://' . $image_file_name['basename'], FileSystemInterface::EXISTS_RENAME);
+              $file = \Drupal::service('file.repository')->writeData($image, 'public://' . $image_file_name['basename'], FileSystemInterface::EXISTS_RENAME);
               if (!empty($file) && !empty($file->id())) {
                 $file->setPermanent();
                 $file->save();
@@ -225,7 +225,7 @@ class BadgrHelpers {
           if (!empty($value_issuer['image'])) {
             $image_file_name = pathinfo($value_issuer['image']);
             $image = file_get_contents($value_issuer['image']);
-            $file = file_save_data($image, 'public://' . $image_file_name['basename']);
+            $file = \Drupal::service('file.repository')->writeData($image, 'public://' . $image_file_name['basename']);
             if (!empty($file) && !empty($file->id())) {
             $file->setPermanent();
             $file->save();
@@ -256,7 +256,7 @@ class BadgrHelpers {
         if (!empty($value_issuer['image'])) {
           $image_file_name = pathinfo($value_issuer['image']);
           $image = file_get_contents($value_issuer['image']);
-          $file = file_save_data($image, 'public://' . $image_file_name['basename'], FileSystemInterface::EXISTS_RENAME);
+          $file = \Drupal::service('file.repository')->writeData($image, 'public://' . $image_file_name['basename'], FileSystemInterface::EXISTS_RENAME);
           if (!empty($file) && !empty($file->id())) {
             $file->setPermanent();
             $file->save();
diff --git a/src/BadgrService.php b/src/BadgrService.php
index 7c7186b..aa3d635 100644
--- a/src/BadgrService.php
+++ b/src/BadgrService.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\badgr_badge;
 
+use Drupal\Core\Session\AccountProxyInterface;
+use GuzzleHttp\Exception\GuzzleException;
 use Drupal\Core\Session\AccountInterface;
 use GuzzleHttp\Exception\RequestException;
 use Drupal\Component\Serialization\Json;
@@ -36,23 +38,23 @@ class BadgrService implements BadgrServiceInterface {
   /**
    * The current user.
    *
-   * @var \Drupal\Core\Session\AccountProxyInterface
+   * @var AccountProxyInterface
    */
   protected $currentUser;
 
   /**
    * An http client.
    *
-   * @var \GuzzleHttp\ClientInterface
+   * @var ClientInterface
    */
   protected $httpClient;
 
   /**
    * Constructs a new BadgrService object.
    *
-   * @param \Drupal\Core\Session\AccountInterface $currentUser
+   * @param AccountInterface $currentUser
    *    An current user.
-   * @param \GuzzleHttp\ClientInterface $http_client
+   * @param ClientInterface $http_client
    *    An HTTP client.
    */
   public function __construct(AccountInterface $currentUser, ClientInterface $http_client) {
@@ -66,7 +68,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param array $_post_details
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_initiate(array $_post_details) {
 
@@ -94,7 +96,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param string $refresh_token
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_refresh_token(string $refresh_token) {
     $_post_details = [
@@ -141,7 +143,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param string $access_token
    *
    * @return boolean
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_user_authenticate(string $access_token) {
     $_headers = $this->badgr_set_header($access_token);
@@ -192,7 +194,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param string $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_create_issuer(string $access_token, string $_post_details, string $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -230,7 +232,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_update_rud_issuer(string $access_token, string $entity_id, string $method = NULL, array $_post_details = NULL, int $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -281,7 +283,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_list_all_issuer(string &$access_token, int $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -316,7 +318,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_list_all_existing_issuer(string &$access_token, int $badgr_account_id) {
     $issuer_data = [];
@@ -342,7 +344,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_create_issuer_badges(string &$access_token, string $_post_details, string $entity_id, int $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -379,7 +381,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_list_all_badges(string &$access_token, int $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -413,7 +415,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_list_all_existing_badges(string &$access_token, int $badgr_account_id) {
     $badges_options = [];
@@ -438,7 +440,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_update_rud_badges(string $access_token, string $entity_id, string $method = NULL, array $_post_details = NULL, int $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -491,7 +493,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_award_badges(string &$access_token, string $_post_details, string $entity_id, int $badgr_account_id) {
     if (!$this->badgr_user_authenticate($access_token)) {
@@ -530,7 +532,7 @@ class BadgrService implements BadgrServiceInterface {
    * @param string $recipient
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   public function badgr_get_award_badges(string &$access_token, int $badgr_account_id, string $entity_id, string $recipient) {
     if (!$this->badgr_user_authenticate($access_token)) {
diff --git a/src/BadgrServiceInterface.php b/src/BadgrServiceInterface.php
index 5e91413..1d7ebfb 100644
--- a/src/BadgrServiceInterface.php
+++ b/src/BadgrServiceInterface.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\badgr_badge;
 
+use GuzzleHttp\Exception\GuzzleException;
 /**
  * Interface BadgrServiceInterface.
  */
@@ -103,7 +104,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_list_all_issuer(string &$access_token, int $badgr_account_id);
 
@@ -114,7 +115,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_list_all_existing_issuer(string &$access_token, int $badgr_account_id);
 
@@ -127,7 +128,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_create_issuer_badges(string &$access_token, string $_post_details, string $entity_id, int $badgr_account_id);
 
@@ -138,7 +139,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_list_all_badges(string &$access_token, int $badgr_account_id);
 
@@ -149,7 +150,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_list_all_existing_badges(string &$access_token, int $badgr_account_id);
 
@@ -163,7 +164,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_update_rud_badges(string $access_token, string $entity_id, string $method = NULL, array $_post_details = NULL, int $badgr_account_id);
 
@@ -176,7 +177,7 @@ interface BadgrServiceInterface {
    * @param int $badgr_account_id
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_award_badges(string &$access_token, string $_post_details, string $entity_id, int $badgr_account_id);
 
@@ -189,7 +190,7 @@ interface BadgrServiceInterface {
    * @param string $recipient
    *
    * @return mixed
-   * @throws \GuzzleHttp\Exception\GuzzleException
+   * @throws GuzzleException
    */
   function badgr_get_award_badges(string &$access_token, int $badgr_account_id, string $entity_id, string $recipient);
 }
diff --git a/src/Controller/AddToBackpack.php b/src/Controller/AddToBackpack.php
index 59640a6..fc93fa1 100644
--- a/src/Controller/AddToBackpack.php
+++ b/src/Controller/AddToBackpack.php
@@ -29,7 +29,7 @@ class AddToBackpack extends ControllerBase {
   /**
    * Drupal\badgr_badge\BadgrServiceInterface definition.
    *
-   * @var \Drupal\badgr_badge\BadgrServiceInterface
+   * @var BadgrServiceInterface
    */
   protected $badgrService;
 
@@ -37,9 +37,9 @@ class AddToBackpack extends ControllerBase {
   /**
    * Constructs a \Drupal\badgr_badge\Form object.
    *
-   * @param \Drupal\badgr_badge\BadgrServiceInterface $badgrService
+   * @param BadgrServiceInterface $badgrService
    *   The entity type manager.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
    */
   public function __construct(BadgrServiceInterface $badgrService, AccountInterface $current_user) {
@@ -79,7 +79,7 @@ class AddToBackpack extends ControllerBase {
       }
 
       if (!$badge->get('field_badge_image')->isEmpty()) {
-        $badge_image = file_create_url($badge->field_badge_image->entity->getFileUri());
+        $badge_image = \Drupal::service('file_url_generator')->generateAbsoluteString($badge->field_badge_image->entity->getFileUri());
       }
 
       if (!$badge->get('field_badge_account')->isEmpty()) {
diff --git a/src/Form/BadgrConfigForm.php b/src/Form/BadgrConfigForm.php
index d063e81..8d6b7e1 100644
--- a/src/Form/BadgrConfigForm.php
+++ b/src/Form/BadgrConfigForm.php
@@ -20,23 +20,23 @@ class BadgrConfigForm extends ConfigFormBase {
   /**
    * The entity type manager.
    *
-   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   * @var EntityTypeManagerInterface
    */
   protected $entityTypeManager;
 
   /**
    * The badgr service manager.
    *
-   * @var \Drupal\badgr_badge\BadgrServiceInterface
+   * @var BadgrServiceInterface
    */
   protected $badgrService;
 
   /**
    * Constructs a \Drupal\badgr_badge\Form object.
    *
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   The entity type manager.
-   * @param \Drupal\badgr_badge\BadgrServiceInterface $badgrService
+   * @param BadgrServiceInterface $badgrService
    *   The entity type manager.
    */
   public function __construct(EntityTypeManagerInterface $entity_type_manager, BadgrServiceInterface $badgrService) {
