diff --git a/apptiles.module b/apptiles.module
index 9575f8b..b227309 100644
--- a/apptiles.module
+++ b/apptiles.module
@@ -39,7 +39,7 @@ function apptiles_page_attachments(array &$attachments): void {
         '#tag' => 'link',
         '#attributes' => $attributes + [
           'rel' => $rel,
-          'href' => \file_url_transform_relative($href),
+          'href' => \Drupal::service('file_url_generator')->transformRelative($href),
         ],
       ]);
     };
@@ -48,7 +48,7 @@ function apptiles_page_attachments(array &$attachments): void {
     $metatag('mobile-web-app-capable', 'yes');
 
     if (\file_exists(APPTILES_BROWSERCONFIG)) {
-      $metatag('msapplication-config', \file_url_transform_relative(\file_create_url(APPTILES_BROWSERCONFIG)));
+      $metatag('msapplication-config', \Drupal::service('file_url_generator')->generateString(APPTILES_BROWSERCONFIG));
     }
 
     /* @see https://developer.chrome.com/multidevice/android/installtohomescreen */
diff --git a/src/AppTilesManager.php b/src/AppTilesManager.php
index ac90bfb..290e2e0 100644
--- a/src/AppTilesManager.php
+++ b/src/AppTilesManager.php
@@ -31,21 +31,21 @@ class AppTilesManager implements AppTilesManagerInterface {
   /**
    * An instance of the "cache.default" service.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cacheBackend;
 
   /**
    * An instance of the "router.admin_context" service.
    *
-   * @var \Drupal\Core\Routing\AdminContext
+   * @var AdminContext
    */
   protected $adminContext;
 
   /**
    * An instance of the "file_system" service.
    *
-   * @var \Drupal\Core\File\FileSystemInterface
+   * @var FileSystemInterface
    */
   protected $fileSystem;
 
diff --git a/tests/src/Functional/ApplicationTilesTest.php b/tests/src/Functional/ApplicationTilesTest.php
index 26bb6c9..447f324 100644
--- a/tests/src/Functional/ApplicationTilesTest.php
+++ b/tests/src/Functional/ApplicationTilesTest.php
@@ -60,7 +60,7 @@ class ApplicationTilesTest extends ApplicationTilesTestBase {
     // Check metatags existence on the page.
     $this->checkMetatags($exists);
     // Set option which allows to output metatags on admin pages.
-    $this->drupalPostForm(NULL, [sprintf('%s[allowed_for_admin_theme]', APPTILES_MODULE_NAME) => (int) !$exists], t('Save configuration'));
+    $this->submitForm([sprintf('%s[allowed_for_admin_theme]', APPTILES_MODULE_NAME) => (int) !$exists], t('Save configuration'));
     // Now state must be changed.
     $this->checkMetatags(!$exists);
   }
diff --git a/tests/src/Functional/ApplicationTilesTestBase.php b/tests/src/Functional/ApplicationTilesTestBase.php
index 3939f8d..50f5bf9 100644
--- a/tests/src/Functional/ApplicationTilesTestBase.php
+++ b/tests/src/Functional/ApplicationTilesTestBase.php
@@ -51,7 +51,7 @@ abstract class ApplicationTilesTestBase extends BrowserTestBase {
       foreach ($dimensions as $dimension => $url) {
         $this->assertSame(
           $exists,
-          \strpos($html, \file_url_transform_relative($url)) !== FALSE,
+          \strpos($html, \Drupal::service('file_url_generator')->transformRelative($url)) !== FALSE,
           \sprintf('Metatag for "%s" with "%s" dimension%sexists on the page.', $os, $dimension, $exists ? ' ' : ' doses not ')
         );
       }
