diff --git a/src/Plugin/Field/FieldFormatter/BgImageFormatter.php b/src/Plugin/Field/FieldFormatter/BgImageFormatter.php
index 598e7a3..34027b9 100644
--- a/src/Plugin/Field/FieldFormatter/BgImageFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/BgImageFormatter.php
@@ -35,14 +35,14 @@ class BgImageFormatter extends ImageFormatter {
   /**
    * The renderer service.
    *
-   * @var \Drupal\Core\Render\RendererInterface
+   * @var RendererInterface
    */
   protected $renderer;
 
   /**
    * The current request.
    *
-   * @var \Symfony\Component\HttpFoundation\Request
+   * @var Request
    */
   protected $request;
 
@@ -53,7 +53,7 @@ class BgImageFormatter extends ImageFormatter {
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ -63,13 +63,13 @@ class BgImageFormatter extends ImageFormatter {
    *   The view mode.
    * @param array $third_party_settings
    *   Any third party settings settings.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
-   * @param \Drupal\Core\Entity\EntityStorageInterface $image_style_storage
+   * @param EntityStorageInterface $image_style_storage
    *   The image style storage.
-   * @param \Drupal\Core\Render\RendererInterface $renderer
+   * @param RendererInterface $renderer
    *   The renderer service.
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The current request.
    */
   public function __construct(
@@ -577,10 +577,10 @@ class BgImageFormatter extends ImageFormatter {
         $file_url = $style->buildUrl($file->getFileUri());
       }
       else {
-        $file_url = file_create_url($file->getFileUri());
+        $file_url = \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri());
       }
 
-      $image_url = $path_format === 'absolute' ? $file_url : file_url_transform_relative($file_url);
+      $image_url = $path_format === 'absolute' ? $file_url : \Drupal::service('file_url_generator')->transformRelative($file_url);
 
       $css = $this->getBackgroundImageCss($image_url, $css_settings);
 
