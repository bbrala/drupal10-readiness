diff --git a/modules/views_rss_media_getid3/views_rss_media_getid3.module b/modules/views_rss_media_getid3/views_rss_media_getid3.module
index 15f9680..1caf37c 100644
--- a/modules/views_rss_media_getid3/views_rss_media_getid3.module
+++ b/modules/views_rss_media_getid3/views_rss_media_getid3.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\image\ImageStyleInterface;
 /**
  * @file
  * Hook implementations for this module.
@@ -85,7 +86,7 @@ function views_rss_media_getid3_preprocess_media_thumbnail(&$variables) {
     if ($file instanceof FileInterface) {
       // Image style is defined, need to link to resized version.
       if ($image_style_name = $item['rendered']['#image_style']) {
-        /** @var \Drupal\image\ImageStyleInterface $image_style */
+        /** @var ImageStyleInterface $image_style */
         $image_style = ImageStyle::load($image_style_name);
         $uri = $image_style->buildUri($file->getFileUri());
       }
diff --git a/views_rss_media.inc b/views_rss_media.inc
index 2788554..a0acbc2 100644
--- a/views_rss_media.inc
+++ b/views_rss_media.inc
@@ -42,7 +42,7 @@ function views_rss_media_preprocess_item_content(&$variables) {
         $image_style = ImageStyle::load($image_style_name);
         $uri = $image_style->buildUri($file->getFileUri());
         $element['attributes'] = array(
-          'url' => file_create_url($uri),
+          'url' => \Drupal::service('file_url_generator')->generateAbsoluteString($uri),
           'fileSize' => filesize(\Drupal::service('file_system')->realpath($uri)),
           'type' => $mime_type,
         );
@@ -50,7 +50,7 @@ function views_rss_media_preprocess_item_content(&$variables) {
       // Normal image size.
       else {
         $element['attributes'] = array(
-          'url' => file_create_url($file->getFileUri()),
+          'url' => \Drupal::service('file_url_generator')->generateAbsoluteString($file->getFileUri()),
           'fileSize' => $file->getSize(),
           'type' => $mime_type,
         );
@@ -116,7 +116,7 @@ function views_rss_media_preprocess_item_thumbnail(&$variables) {
       // Image style is defined, need to link to resized version.
       if ($image_style_name = $item['rendered']['#image_style']) {
         $image_style = ImageStyle::load($image_style_name);
-        $element['attributes']['url'] = file_create_url($image_style->buildUri($file->getFileUri()));
+        $element['attributes']['url'] = \Drupal::service('file_url_generator')->generateAbsoluteString($image_style->buildUri($file->getFileUri()));
       }
       // Normal image size.
       else {
diff --git a/views_rss_media.module b/views_rss_media.module
index 94bddc1..8151331 100644
--- a/views_rss_media.module
+++ b/views_rss_media.module
@@ -8,7 +8,7 @@
 /**
  * Include file with all preprocess functions.
  */
-include_once drupal_get_path('module', 'views_rss_media') .'/views_rss_media.inc';
+include_once \Drupal::service('extension.list.module')->getPath('views_rss_media') .'/views_rss_media.inc';
 
 /**
  * Implements hook_views_rss_namespaces().
