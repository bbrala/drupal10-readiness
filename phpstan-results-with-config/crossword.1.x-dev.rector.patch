diff --git a/crossword.api.php b/crossword.api.php
index d52df9e..bf03971 100644
--- a/crossword.api.php
+++ b/crossword.api.php
@@ -15,7 +15,7 @@ use Drupal\file\FileInterface;
  * @param array $data
  *   The parsed crossword file, ready to be used by formatters and/or
  *   passed to drupalSettings.
- * @param Drupal\file\FileInterface $file
+ * @param FileInterface $file
  *   The crossword file.
  */
 function hook_crossword_data_alter(array &$data, FileInterface $file) {
diff --git a/crossword.post_update.php b/crossword.post_update.php
index 6b97e3b..747c73f 100644
--- a/crossword.post_update.php
+++ b/crossword.post_update.php
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Field\FormatterPluginManager;
 /**
  * @file
  * Post-update functions crossword module.
@@ -57,7 +58,7 @@ function crossword_post_update_musical_formatters_step_1(&$sandbox) {
  */
 function crossword_post_update_musical_formatters_step_2(&$sandbox) {
   $config_entity_updater = \Drupal::classResolver(ConfigEntityUpdater::class);
-  /** @var \Drupal\Core\Field\FormatterPluginManager $field_formatter_manager */
+  /** @var FormatterPluginManager $field_formatter_manager */
   $field_formatter_manager = \Drupal::service('plugin.manager.field.formatter');
   $field_formatter_manager->clearCachedDefinitions();
 
@@ -110,7 +111,7 @@ function crossword_post_update_musical_formatters_step_2(&$sandbox) {
  */
 function crossword_post_update_button_schema(&$sandbox) {
   $config_entity_updater = \Drupal::classResolver(ConfigEntityUpdater::class);
-  /** @var \Drupal\Core\Field\FormatterPluginManager $field_formatter_manager */
+  /** @var FormatterPluginManager $field_formatter_manager */
   $field_formatter_manager = \Drupal::service('plugin.manager.field.formatter');
 
   $formatter_callback = function (EntityDisplayInterface $display) {
@@ -157,7 +158,7 @@ function crossword_post_update_button_schema(&$sandbox) {
  */
 function crossword_post_update_button_confirm(&$sandbox) {
   $config_entity_updater = \Drupal::classResolver(ConfigEntityUpdater::class);
-  /** @var \Drupal\Core\Field\FormatterPluginManager $field_formatter_manager */
+  /** @var FormatterPluginManager $field_formatter_manager */
   $field_formatter_manager = \Drupal::service('plugin.manager.field.formatter');
 
   $formatter_callback = function (EntityDisplayInterface $display) {
@@ -188,7 +189,7 @@ function crossword_post_update_button_confirm(&$sandbox) {
  */
 function crossword_post_update_musical_formatters_step_3(&$sandbox) {
   $config_entity_updater = \Drupal::classResolver(ConfigEntityUpdater::class);
-  /** @var \Drupal\Core\Field\FormatterPluginManager $field_formatter_manager */
+  /** @var FormatterPluginManager $field_formatter_manager */
   $field_formatter_manager = \Drupal::service('plugin.manager.field.formatter');
   $field_formatter_manager->clearCachedDefinitions();
 
diff --git a/modules/crossword_colors/src/CrosswordColorsService.php b/modules/crossword_colors/src/CrosswordColorsService.php
index ee05d2c..71cc065 100644
--- a/modules/crossword_colors/src/CrosswordColorsService.php
+++ b/modules/crossword_colors/src/CrosswordColorsService.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword_colors;
 
+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Component\Utility\Color as ColorUtility;
 use Drupal\Core\Config\ConfigFactory;
 use Drupal\Core\File\FileSystem;
@@ -14,14 +15,14 @@ class CrosswordColorsService {
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystem
+   * @var FileSystem
    */
   protected $fileSystem;
 
   /**
    * Colors config.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   protected $config;
 
@@ -33,9 +34,9 @@ class CrosswordColorsService {
   /**
    * Construct the Crossword Image Service.
    *
-   * @param \Drupal\Core\File\FileSystem $file_system
+   * @param FileSystem $file_system
    *   The file system.
-   * @param \Drupal\Core\Config\ConfigFactory $config_factory
+   * @param ConfigFactory $config_factory
    *   Config factory.
    */
   public function __construct(FileSystem $file_system, ConfigFactory $config_factory) {
diff --git a/modules/crossword_contest/src/Controller/CrosswordContestController.php b/modules/crossword_contest/src/Controller/CrosswordContestController.php
index 5b6c9cd..b4eca92 100644
--- a/modules/crossword_contest/src/Controller/CrosswordContestController.php
+++ b/modules/crossword_contest/src/Controller/CrosswordContestController.php
@@ -23,14 +23,14 @@ class CrosswordContestController extends ControllerBase {
    * the mid is for a crossword_contest media entity to which the user
    * has access.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   The request.
    * @param string $mid
    *   The id of the crossword_contest media.
    * @param string $answer
    *   The answer as a json string.
    *
-   * @return \Drupal\Core\Ajax\AjaxResponse
+   * @return AjaxResponse
    *   The crossword_contest media in the appropriate view mode.
    */
   public function build(Request $request, $mid, $answer) {
@@ -57,7 +57,7 @@ class CrosswordContestController extends ControllerBase {
    * @param string $mid
    *   The id of the media entity.
    *
-   * @return \Drupal\Core\Access\AccessResult
+   * @return AccessResult
    *   The custom access.
    */
   public function validateMid($mid) {
@@ -85,7 +85,7 @@ class CrosswordContestController extends ControllerBase {
   /**
    * Compares submitted answer to the correct answer.
    *
-   * @param \Drupal\media\MediaInterface $media
+   * @param MediaInterface $media
    *   The loaded crossword_content media.
    * @param string $answer
    *   Json encoded answer submitted by user.
diff --git a/modules/crossword_image/src/Annotation/CrosswordImage.php b/modules/crossword_image/src/Annotation/CrosswordImage.php
index 34f1d62..f2c8350 100644
--- a/modules/crossword_image/src/Annotation/CrosswordImage.php
+++ b/modules/crossword_image/src/Annotation/CrosswordImage.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword_image\Annotation;
 
+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;
 
 /**
@@ -21,7 +22,7 @@ class CrosswordImage extends Plugin {
   /**
    * The title of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
diff --git a/modules/crossword_image/src/CrosswordImagePluginBase.php b/modules/crossword_image/src/CrosswordImagePluginBase.php
index ebc0890..1c0af79 100644
--- a/modules/crossword_image/src/CrosswordImagePluginBase.php
+++ b/modules/crossword_image/src/CrosswordImagePluginBase.php
@@ -17,21 +17,21 @@ abstract class CrosswordImagePluginBase extends PluginBase implements CrosswordI
   /**
    * The crossword data service.
    *
-   * @var \Drupal\crossword\CrosswordDataServiceInterface
+   * @var CrosswordDataServiceInterface
    */
   protected $crosswordDataService;
 
   /**
    * The image toolkit plugin manage.
    *
-   * @var \Drupal\Core\ImageToolkit\ImageToolkitManager
+   * @var ImageToolkitManager
    */
   protected $toolkitManager;
 
   /**
    * The extension list.
    *
-   * @var \Drupal\Core\Extension\ExtensionList
+   * @var ExtensionList
    */
   protected $extensionList;
 
diff --git a/modules/crossword_image/src/CrosswordImagePluginInterface.php b/modules/crossword_image/src/CrosswordImagePluginInterface.php
index 0386868..d9b083f 100644
--- a/modules/crossword_image/src/CrosswordImagePluginInterface.php
+++ b/modules/crossword_image/src/CrosswordImagePluginInterface.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword_image;
 
+use Drupal\Core\ImageToolkit\ImageToolkitInterface;
 use Drupal\file\FileInterface;
 
 /**
@@ -12,7 +13,7 @@ interface CrosswordImagePluginInterface {
   /**
    * Returns an image resource representing a preview of the puzzle.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The crossword file.
    *
    * @return resource
@@ -31,7 +32,7 @@ interface CrosswordImagePluginInterface {
   /**
    * The toolkit to be used.
    *
-   * @return \Drupal\Core\ImageToolkit\ImageToolkitInterface
+   * @return ImageToolkitInterface
    *   The php image type to be saved.
    */
   public function getToolkit();
diff --git a/modules/crossword_image/src/CrosswordImageService.php b/modules/crossword_image/src/CrosswordImageService.php
index a136052..6ce8fe0 100644
--- a/modules/crossword_image/src/CrosswordImageService.php
+++ b/modules/crossword_image/src/CrosswordImageService.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword_image;
 
+use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Component\Plugin\Exception\PluginNotFoundException;
 use Drupal\Core\Database\Connection;
 use Drupal\Core\Entity\EntityTypeManager;
@@ -22,57 +23,57 @@ class CrosswordImageService implements CrosswordImageServiceInterface {
   /**
    * The file system service.
    *
-   * @var \Drupal\Core\File\FileSystem
+   * @var FileSystem
    */
   protected $fileSystem;
 
   /**
    * Crossword image plugin manager.
    *
-   * @var \Drupal\crossword_image\CrosswordImageManager
+   * @var CrosswordImageManager
    */
   protected $crosswordImageManager;
 
   /**
    * File usage.
    *
-   * @var \Drupal\file\FileUsage\DatabaseFileUsageBackend
+   * @var DatabaseFileUsageBackend
    */
   protected $fileUsage;
 
   /**
    * File storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $fileStorage;
 
   /**
    * The database connection used to store file usage information.
    *
-   * @var \Drupal\Core\Database\Connection
+   * @var Connection
    */
   protected $connection;
 
   /**
    * The crossword data service.
    *
-   * @var \Drupal\crossword\CrosswordDataServiceInterface
+   * @var CrosswordDataServiceInterface
    */
   protected $crosswordDataService;
 
   /**
    * Construct the Crossword Image Service.
    *
-   * @param \Drupal\Core\File\FileSystem $file_system
+   * @param FileSystem $file_system
    *   The file system.
-   * @param \Drupal\file\FileUsage\DatabaseFileUsageBackend $file_usage
+   * @param DatabaseFileUsageBackend $file_usage
    *   File usage service.
-   * @param \Drupal\crossword_image\CrosswordImageManager $crossword_image_manager
+   * @param CrosswordImageManager $crossword_image_manager
    *   Crossword image plugin manager.
-   * @param \Drupal\Core\Entity\EntityTypeManager $entity_type_manager
+   * @param EntityTypeManager $entity_type_manager
    *   Entity type manager.
-   * @param \Drupal\Core\Database\Connection $connection
+   * @param Connection $connection
    *   Database connection.
    */
   public function __construct(FileSystem $file_system, DatabaseFileUsageBackend $file_usage, CrosswordImageManager $crossword_image_manager, EntityTypeManager $entity_type_manager, Connection $connection, CrosswordDataServiceInterface $crossword_data_service) {
@@ -136,7 +137,7 @@ class CrosswordImageService implements CrosswordImageServiceInterface {
   /**
    * Creates and saves image representation of the crossword file.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The file from which the image is to be created.
    * @param CrosswordImagePluginInterface $plugin
    *   The loaded crossword_image plugin.
@@ -165,7 +166,7 @@ class CrosswordImageService implements CrosswordImageServiceInterface {
    * By default the image is saved in a subdirectory of the directory that
    * holds the crossword file itself.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The file that is being converted.
    * @param CrosswordImagePluginInterface $plugin
    *   The loaded crossword_image plugin.
@@ -189,12 +190,12 @@ class CrosswordImageService implements CrosswordImageServiceInterface {
   /**
    * Save a file entity for the image file (a managed file).
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The file from which the image is to be created.
    * @param string $destination_uri
    *   The destination of the new file.
    *
-   * @return \Drupal\file\FileInterface
+   * @return FileInterface
    *   The file entity of the image.
    */
   protected function saveImageEntity(FileInterface $file, $destination_uri) {
@@ -209,7 +210,7 @@ class CrosswordImageService implements CrosswordImageServiceInterface {
       return $image;
     }
     else {
-      /** @var \Drupal\file\FileInterface $image */
+      /** @var FileInterface $image */
       $image = $this->fileStorage->create($values);
       $image->setPermanent();
       $image->save();
diff --git a/modules/crossword_image/src/CrosswordImageServiceInterface.php b/modules/crossword_image/src/CrosswordImageServiceInterface.php
index 6b2bec2..4168bc1 100644
--- a/modules/crossword_image/src/CrosswordImageServiceInterface.php
+++ b/modules/crossword_image/src/CrosswordImageServiceInterface.php
@@ -12,7 +12,7 @@ interface CrosswordImageServiceInterface {
   /**
    * Get a uri to the image.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The Crossword file.
    * @param string $plugin_id
    *   Id of the crossword_image plugin to use.
@@ -25,12 +25,12 @@ interface CrosswordImageServiceInterface {
   /**
    * Get a file entity of the image.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The Crossword file.
    * @param string $plugin_id
    *   Id of the crossword_image plugin to use.
    *
-   * @return \Drupal\file\FileInterface|null
+   * @return FileInterface|null
    *   The file entity of the image or null.
    */
   public function getImageEntity(FileInterface $file, string $plugin_id);
diff --git a/modules/crossword_image/src/Plugin/Field/FieldFormatter/CrosswordImageRendered.php b/modules/crossword_image/src/Plugin/Field/FieldFormatter/CrosswordImageRendered.php
index 24ad860..7de37c2 100644
--- a/modules/crossword_image/src/Plugin/Field/FieldFormatter/CrosswordImageRendered.php
+++ b/modules/crossword_image/src/Plugin/Field/FieldFormatter/CrosswordImageRendered.php
@@ -33,21 +33,21 @@ class CrosswordImageRendered extends ImageFormatter implements ContainerFactoryP
   /**
    * The crossword image manager service.
    *
-   * @var \Drupal\crossword_image\CrosswordImageManager
+   * @var CrosswordImageManager
    */
   protected $crosswordImageManager;
 
   /**
    * The crossword data service.
    *
-   * @var \Drupal\crossword\CrosswordDataServiceInterface
+   * @var CrosswordDataServiceInterface
    */
   protected $crosswordDataService;
 
   /**
    * The crossword image service.
    *
-   * @var \Drupal\crossword_image\CrosswordImageServiceInterface
+   * @var CrosswordImageServiceInterface
    */
   protected $crosswordImageService;
 
@@ -58,7 +58,7 @@ class CrosswordImageRendered extends ImageFormatter implements ContainerFactoryP
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ -68,15 +68,15 @@ class CrosswordImageRendered extends ImageFormatter implements ContainerFactoryP
    *   The view mode.
    * @param array $third_party_settings
    *   Any third party settings settings.
-   * @param \Drupal\Core\Session\AccountInterface $current_user
+   * @param AccountInterface $current_user
    *   The current user.
-   * @param \Drupal\Core\Entity\EntityStorageInterface $image_style_storage
+   * @param EntityStorageInterface $image_style_storage
    *   The image style storage.
-   * @param \Drupal\crossword_image\CrosswordImageManager $crossword_image_manager
+   * @param CrosswordImageManager $crossword_image_manager
    *   The crossword image manager service.
-   * @param \Drupal\crossword\CrosswordDataServiceInterface $crossword_data_service
+   * @param CrosswordDataServiceInterface $crossword_data_service
    *   The crossword data service.
-   * @param \Drupal\crossword_image\CrosswordImageServiceInterface $crossword_image_service
+   * @param CrosswordImageServiceInterface $crossword_image_service
    *   The crossword image service.
    */
   public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, $label, $view_mode, array $third_party_settings, AccountInterface $current_user, EntityStorageInterface $image_style_storage, CrosswordImageManager $crossword_image_manager, CrosswordDataServiceInterface $crossword_data_service, CrosswordImageServiceInterface $crossword_image_service) {
@@ -219,11 +219,11 @@ class CrosswordImageRendered extends ImageFormatter implements ContainerFactoryP
         // context to ensure different file URLs are generated for different
         // sites in a multisite setup, including HTTP and HTTPS versions of the
         // same site. Fix in https://www.drupal.org/node/2646744.
-        $url = Url::fromUri(file_create_url($image_uri));
+        $url = \Drupal::service('file_url_generator')->generate($image_uri);
         $cache_contexts[] = 'url.site';
       }
       elseif (isset($link_file)) {
-        $url = Url::fromUri(file_create_url($file->getFileUri()));
+        $url = \Drupal::service('file_url_generator')->generate($file->getFileUri());
         $cache_contexts[] = 'url.site';
       }
       $cache_tags = Cache::mergeTags($base_cache_tags, $file->getCacheTags(), $image->getCacheTags());
diff --git a/modules/crossword_media/src/Plugin/media/Source/Crossword.php b/modules/crossword_media/src/Plugin/media/Source/Crossword.php
index 9f74531..198f199 100644
--- a/modules/crossword_media/src/Plugin/media/Source/Crossword.php
+++ b/modules/crossword_media/src/Plugin/media/Source/Crossword.php
@@ -31,14 +31,14 @@ class Crossword extends File implements ContainerFactoryPluginInterface {
   /**
    * The crossword image manager.
    *
-   * @var \Drupal\crossword_image\CrosswordImageManager
+   * @var CrosswordImageManager
    */
   protected $crosswordImageManager;
 
   /**
    * The crossword image service.
    *
-   * @var \Drupal\crossword_image\CrosswordImageServiceInterface
+   * @var CrosswordImageServiceInterface
    */
   protected $crosswordImageService;
 
@@ -51,17 +51,17 @@ class Crossword extends File implements ContainerFactoryPluginInterface {
    *   The plugin_id for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   * @param EntityTypeManagerInterface $entity_type_manager
    *   Entity type manager service.
-   * @param \Drupal\Core\Entity\EntityFieldManagerInterface $entity_field_manager
+   * @param EntityFieldManagerInterface $entity_field_manager
    *   Entity field manager service.
-   * @param \Drupal\Core\Field\FieldTypePluginManagerInterface $field_type_manager
+   * @param FieldTypePluginManagerInterface $field_type_manager
    *   The field type plugin manager service.
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   The config factory service.
-   * @param \Drupal\crossword_image\CrosswordImageManager $crossword_image_manager
+   * @param CrosswordImageManager $crossword_image_manager
    *   The crossword image manager service.
-   * @param \Drupal\crossword_image\CrosswordImageServiceInterface $crossword_image_service
+   * @param CrosswordImageServiceInterface $crossword_image_service
    *   The crossword image service.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityTypeManagerInterface $entity_type_manager, EntityFieldManagerInterface $entity_field_manager, FieldTypePluginManagerInterface $field_type_manager, ConfigFactoryInterface $config_factory, CrosswordImageManager $crossword_image_manager, CrosswordImageServiceInterface $crossword_image_service) {
diff --git a/modules/crossword_token/crossword_token.tokens.inc b/modules/crossword_token/crossword_token.tokens.inc
index 231d647..1930bb9 100755
--- a/modules/crossword_token/crossword_token.tokens.inc
+++ b/modules/crossword_token/crossword_token.tokens.inc
@@ -123,7 +123,7 @@ function crossword_token_tokens($type, $tokens, array $data = [], array $options
                 $replacements[$original] = $style->buildUrl($image->getFileUri());
               }
               elseif (!isset($parts[1])) {
-                $replacements[$original] = file_create_url($image->getFileUri());
+                $replacements[$original] = \Drupal::service('file_url_generator')->generateAbsoluteString($image->getFileUri());
               }
             }
           }
diff --git a/src/Annotation/CrosswordFileParser.php b/src/Annotation/CrosswordFileParser.php
index e19976d..dca4b7e 100644
--- a/src/Annotation/CrosswordFileParser.php
+++ b/src/Annotation/CrosswordFileParser.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword\Annotation;
 
+use Drupal\Core\Annotation\Translation;
 use Drupal\Component\Annotation\Plugin;
 
 /**
@@ -21,7 +22,7 @@ class CrosswordFileParser extends Plugin {
   /**
    * The title of the plugin.
    *
-   * @var \Drupal\Core\Annotation\Translation
+   * @var Translation
    *
    * @ingroup plugin_translatable
    */
diff --git a/src/CrosswordDataService.php b/src/CrosswordDataService.php
index eb79a2a..bff55bd 100644
--- a/src/CrosswordDataService.php
+++ b/src/CrosswordDataService.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword;
 
+use Drupal\Core\Logger\LoggerChannelInterface;
 use Drupal\Component\Utility\Xss;
 use Drupal\Core\Cache\CacheBackendInterface;
 use Drupal\Core\Extension\ModuleHandler;
@@ -22,41 +23,41 @@ class CrosswordDataService implements CrosswordDataServiceInterface {
   /**
    * Cache for the result of the parse function.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cache;
 
   /**
    * The crossword file parser plugin manage.
    *
-   * @var \Drupal\crossword\CrosswordFileParserManager
+   * @var CrosswordFileParserManager
    */
   protected $parserManager;
 
   /**
    * The module handler.
    *
-   * @var \Drupal\Core\Extension\ModuleHandler
+   * @var ModuleHandler
    */
   protected $moduleHandler;
 
   /**
    * The Metatag logging channel.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelInterface
+   * @var LoggerChannelInterface
    */
   protected $logger;
 
   /**
    * Construct the Crossword Data Service.
    *
-   * @param Drupal\Core\Cache\CacheBackendInterface $cache
+   * @param CacheBackendInterface $cache
    *   The cache.
-   * @param Drupal\crossword\CrosswordFileParserManager $parser_manager
+   * @param CrosswordFileParserManager $parser_manager
    *   The crossword parser manager.
-   * @param Drupal\Core\Extension\ModuleHandler $module_handler
+   * @param ModuleHandler $module_handler
    *   The module handler.
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $channelFactory
+   * @param LoggerChannelFactoryInterface $channelFactory
    *   The LoggerChannelFactoryInterface object.
    */
   public function __construct(CacheBackendInterface $cache, CrosswordFileParserManager $parser_manager, ModuleHandler $module_handler, LoggerChannelFactoryInterface $channelFactory) {
diff --git a/src/CrosswordDataServiceInterface.php b/src/CrosswordDataServiceInterface.php
index 754535e..67ee939 100644
--- a/src/CrosswordDataServiceInterface.php
+++ b/src/CrosswordDataServiceInterface.php
@@ -14,7 +14,7 @@ interface CrosswordDataServiceInterface {
    *
    * See CrosswordFilePluginInterface::parse() for returned data structure.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    * @param bool $redacted
    *   If TRUE, answers and rebus info will not be included.
@@ -43,7 +43,7 @@ interface CrosswordDataServiceInterface {
   /**
    * Get the crossword author from a file.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    *
    * @return mixed
@@ -54,7 +54,7 @@ interface CrosswordDataServiceInterface {
   /**
    * Get the crossword dimension from a file.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    *
    * @return mixed
@@ -65,7 +65,7 @@ interface CrosswordDataServiceInterface {
   /**
    * Get the crossword dimension from a file.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    *
    * @return mixed
@@ -76,7 +76,7 @@ interface CrosswordDataServiceInterface {
   /**
    * Get the crossword dimensions from a file.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    * @param string $delimiter
    *   The delimiter.
@@ -89,7 +89,7 @@ interface CrosswordDataServiceInterface {
   /**
    * Get the crossword title from a file.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    *
    * @return mixed
@@ -105,7 +105,7 @@ interface CrosswordDataServiceInterface {
    * means that the correct answer for a black square is an empty
    * string, not NULL.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    * @param string $black
    *   The string to represent a black square.
@@ -118,7 +118,7 @@ interface CrosswordDataServiceInterface {
   /**
    * Find out if it's a rebus puzzle, which may require more instructions.
    *
-   * @param Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The (crossword) file.
    *
    * @return bool
diff --git a/src/CrosswordFileParserManagerInterface.php b/src/CrosswordFileParserManagerInterface.php
index b19723c..0a1e918 100644
--- a/src/CrosswordFileParserManagerInterface.php
+++ b/src/CrosswordFileParserManagerInterface.php
@@ -14,10 +14,10 @@ interface CrosswordFileParserManagerInterface {
    *
    * @param array $definitions
    *   A list of definitions to test against.
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The user input file to test against the plugins.
    *
-   * @return \Drupal\crossword\CrosswordFileParserPluginInterface|bool
+   * @return CrosswordFileParserPluginInterface|bool
    *   The relevant plugin or FALSE on failure.
    */
   public function filterApplicableDefinitions(array $definitions, FileInterface $file);
@@ -25,10 +25,10 @@ interface CrosswordFileParserManagerInterface {
   /**
    * Load a crossword file parser from user input file.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   File provided from a field.
    *
-   * @return \Drupal\crossword\CrosswordFileParserPluginInterface|bool
+   * @return CrosswordFileParserPluginInterface|bool
    *   The loaded plugin.
    */
   public function loadCrosswordFileParserFromInput(FileInterface $file);
@@ -36,7 +36,7 @@ interface CrosswordFileParserManagerInterface {
   /**
    * Load a plugin definition from an input.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   An input string.
    *
    * @return array
diff --git a/src/CrosswordFileParserPluginBase.php b/src/CrosswordFileParserPluginBase.php
index 5a41da8..d02d86c 100644
--- a/src/CrosswordFileParserPluginBase.php
+++ b/src/CrosswordFileParserPluginBase.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword;
 
+use Drupal\file\FileInterface;
 use Drupal\Core\Plugin\PluginBase;
 use Drupal\file\Entity\File;
 use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
@@ -15,7 +16,7 @@ abstract class CrosswordFileParserPluginBase extends PluginBase implements Cross
   /**
    * The file entity that hopefully represents a crossword.
    *
-   * @var \Drupal\file\FileInterface
+   * @var FileInterface
    */
   protected $file;
 
diff --git a/src/CrosswordFileParserPluginInterface.php b/src/CrosswordFileParserPluginInterface.php
index f6b8cd8..98a4cd1 100644
--- a/src/CrosswordFileParserPluginInterface.php
+++ b/src/CrosswordFileParserPluginInterface.php
@@ -16,7 +16,7 @@ interface CrosswordFileParserPluginInterface {
    * and essential structure of the file. It could be as
    * simple as checking the extension.
    *
-   * @param \Drupal\file\FileInterface $file
+   * @param FileInterface $file
    *   The user input file to test against the plugins.
    *
    * @return bool
@@ -98,7 +98,7 @@ interface CrosswordFileParserPluginInterface {
    * @return array
    *   An associative array that represents the crossword.
    *
-   * @throws \Drupal\crossword\CrosswordException
+   * @throws CrosswordException
    *   Thrown if something causes parsing to fail.
    */
   public function parse();
diff --git a/src/Plugin/Field/FieldFormatter/CrosswordFormatter.php b/src/Plugin/Field/FieldFormatter/CrosswordFormatter.php
index ef2ed34..324569a 100644
--- a/src/Plugin/Field/FieldFormatter/CrosswordFormatter.php
+++ b/src/Plugin/Field/FieldFormatter/CrosswordFormatter.php
@@ -28,7 +28,7 @@ class CrosswordFormatter extends FileFormatterBase {
   /**
    * Crossword data service.
    *
-   * @var \Drupal\crossword\CrosswordDataServiceInterface
+   * @var CrosswordDataServiceInterface
    */
   protected $crosswordDataService;
 
@@ -48,7 +48,7 @@ class CrosswordFormatter extends FileFormatterBase {
    *   The plugin_id for the formatter.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+   * @param FieldDefinitionInterface $field_definition
    *   The definition of the field to which the formatter is associated.
    * @param array $settings
    *   The formatter settings.
@@ -58,7 +58,7 @@ class CrosswordFormatter extends FileFormatterBase {
    *   The view mode.
    * @param array $third_party_settings
    *   Any third party settings.
-   * @param \Drupal\crossword\CrosswordDataServiceInterface $crossword_data_service
+   * @param CrosswordDataServiceInterface $crossword_data_service
    *   Token service.
    */
   public function __construct($plugin_id, $plugin_definition, FieldDefinitionInterface $field_definition, array $settings, $label, $view_mode, array $third_party_settings, CrosswordDataServiceInterface $crossword_data_service) {
diff --git a/src/Plugin/Validation/Constraint/CrosswordDimensionsValidator.php b/src/Plugin/Validation/Constraint/CrosswordDimensionsValidator.php
index 96439eb..3100684 100644
--- a/src/Plugin/Validation/Constraint/CrosswordDimensionsValidator.php
+++ b/src/Plugin/Validation/Constraint/CrosswordDimensionsValidator.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword\Plugin\Validation\Constraint;
 
+use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Entity\EntityTypeManager;
 use Drupal\crossword\CrosswordDataServiceInterface;
 use Psr\Log\LoggerInterface;
@@ -18,32 +19,32 @@ class CrosswordDimensionsValidator extends ConstraintValidator implements Contai
   /**
    * Crossword data service.
    *
-   * @var \Drupal\crossword\CrosswordDataServiceInterface
+   * @var CrosswordDataServiceInterface
    */
   protected $crosswordDataService;
 
   /**
    * File storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $fileStorage;
 
   /**
    * A logger instance.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;
 
   /**
    * Create an instance of the validator.
    *
-   * @param \Drupal\crossword\CrosswordDataServiceInterface $crossword_data_service
+   * @param CrosswordDataServiceInterface $crossword_data_service
    *   The parser manager service.
-   * @param \Drupal\Core\Entity\EntityTypeManager $entity_type_manager
+   * @param EntityTypeManager $entity_type_manager
    *   Entity type manager.
-   * @param \Psr\Log\LoggerInterface $logger
+   * @param LoggerInterface $logger
    *   A logger instance.
    */
   public function __construct(CrosswordDataServiceInterface $crossword_data_service, EntityTypeManager $entity_type_manager, LoggerInterface $logger) {
diff --git a/src/Plugin/Validation/Constraint/CrosswordFileValidator.php b/src/Plugin/Validation/Constraint/CrosswordFileValidator.php
index 2c079b0..ffb021e 100644
--- a/src/Plugin/Validation/Constraint/CrosswordFileValidator.php
+++ b/src/Plugin/Validation/Constraint/CrosswordFileValidator.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\crossword\Plugin\Validation\Constraint;
 
+use Drupal\Core\Entity\EntityStorageInterface;
 use Drupal\Core\Entity\EntityTypeManager;
 use Drupal\crossword\CrosswordException;
 use Psr\Log\LoggerInterface;
@@ -19,32 +20,32 @@ class CrosswordFileValidator extends ConstraintValidator implements ContainerInj
   /**
    * Crossword Parser manager service.
    *
-   * @var \Drupal\crossword\CrosswordFileParserManagerInterface
+   * @var CrosswordFileParserManagerInterface
    */
   protected $parserManager;
 
   /**
    * File storage.
    *
-   * @var \Drupal\Core\Entity\EntityStorageInterface
+   * @var EntityStorageInterface
    */
   protected $fileStorage;
 
   /**
    * A logger instance.
    *
-   * @var \Psr\Log\LoggerInterface
+   * @var LoggerInterface
    */
   protected $logger;
 
   /**
    * Create an instance of the validator.
    *
-   * @param \Drupal\crossword\CrosswordFileParserManagerInterface $parser_manager
+   * @param CrosswordFileParserManagerInterface $parser_manager
    *   The parser manager service.
-   * @param \Drupal\Core\Entity\EntityTypeManager $entity_type_manager
+   * @param EntityTypeManager $entity_type_manager
    *   Entity type manager.
-   * @param \Psr\Log\LoggerInterface $logger
+   * @param LoggerInterface $logger
    *   A logger instance.
    */
   public function __construct(CrosswordFileParserManagerInterface $parser_manager, EntityTypeManager $entity_type_manager, LoggerInterface $logger) {
diff --git a/tests/src/Functional/CrosswordColorsTest.php b/tests/src/Functional/CrosswordColorsTest.php
index d469ea8..b4c5cb3 100644
--- a/tests/src/Functional/CrosswordColorsTest.php
+++ b/tests/src/Functional/CrosswordColorsTest.php
@@ -25,7 +25,7 @@ class CrosswordColorsTest extends BrowserTestBase {
    * Use form to update config and confirm stylesheet is saved/updated.
    */
   public function testCrosswordColorsForm() {
-    $this->assertFileNotExists('public://crossword-colors.css');
+    $this->assertFileDoesNotExist('public://crossword-colors.css');
     $this->drupalLogin($this->drupalCreateUser(['configure crossword colors']));
 
     // Save config for first time.
@@ -53,7 +53,7 @@ class CrosswordColorsTest extends BrowserTestBase {
    * Load library without ever visiting form.
    */
   public function testCrosswordColorsInstall() {
-    $this->assertFileNotExists('public://crossword-colors.css');
+    $this->assertFileDoesNotExist('public://crossword-colors.css');
     $this->drupalLogin($this->drupalCreateUser(['configure crossword colors']));
     $library = \Drupal::service('library.discovery')->getLibraryByName('crossword', 'crossword.default');
     // The library_info_alter hook should have created the file.
diff --git a/tests/src/Functional/CrosswordContestAccessTest.php b/tests/src/Functional/CrosswordContestAccessTest.php
index 339d13f..203045d 100644
--- a/tests/src/Functional/CrosswordContestAccessTest.php
+++ b/tests/src/Functional/CrosswordContestAccessTest.php
@@ -72,7 +72,7 @@ class CrosswordContestAccessTest extends BrowserTestBase {
   protected function createTestMedia() {
     // First we move a test file to the file system.
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/{$this->testPuzzleFilename}");
-    $file = file_save_data($contents, "public://{$this->testPuzzleFilename}");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://{$this->testPuzzleFilename}");
     // Now use that file in a new crossword_contests media.
     $media = Media::create(['bundle' => 'crossword_contest']);
     $media->set('name', 'Published Crossword Contest');
diff --git a/tests/src/Functional/CrosswordFieldValidateTest.php b/tests/src/Functional/CrosswordFieldValidateTest.php
index 65099ee..36d5d82 100644
--- a/tests/src/Functional/CrosswordFieldValidateTest.php
+++ b/tests/src/Functional/CrosswordFieldValidateTest.php
@@ -33,22 +33,22 @@ class CrosswordFieldValidateTest extends BrowserTestBase {
     // Not crossword.
     $filename = 'failure.txt';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $not_crossword = file_save_data($contents, "public://$filename");
+    $not_crossword = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Corrupted txt.
     $filename = 'corrupted_bad_grid.txt';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $corrupted_txt = file_save_data($contents, "public://$filename");
+    $corrupted_txt = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Ok txt.
     $filename = 'test.txt';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $ok_txt = file_save_data($contents, "public://$filename");
+    $ok_txt = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Ok puz.
     $filename = 'test.puz';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $ok_puz = file_save_data($contents, "public://$filename");
+    $ok_puz = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Log in as admin.
     $this->drupalLogin($this->drupalCreateUser([], 'radmin', TRUE));
@@ -86,17 +86,17 @@ class CrosswordFieldValidateTest extends BrowserTestBase {
     // Big file (25x25).
     $filename = '3185956.puz';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $big_file = file_save_data($contents, "public://$filename");
+    $big_file = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Tiny File (2x2).
     $filename = 'tiny.txt';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $tiny_file = file_save_data($contents, "public://$filename");
+    $tiny_file = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Ok size (3x3).
     $filename = 'test.txt';
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $ok_file = file_save_data($contents, "public://$filename");
+    $ok_file = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
 
     // Log in as admin.
     $this->drupalLogin($this->drupalCreateUser([], 'radmin', TRUE));
diff --git a/tests/src/Functional/CrosswordImageRegenerateTest.php b/tests/src/Functional/CrosswordImageRegenerateTest.php
index bcfa75a..5b0bdf3 100644
--- a/tests/src/Functional/CrosswordImageRegenerateTest.php
+++ b/tests/src/Functional/CrosswordImageRegenerateTest.php
@@ -30,7 +30,7 @@ class CrosswordImageRegenerateTest extends BrowserTestBase {
   public function testRegenerate() {
     // Create a crossword file.
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/test.txt");
-    $file = file_save_data($contents, "public://test.txt");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://test.txt");
 
     // Create a couple crossword images. Don't create solution.
     $crossword_image_service = \Drupal::service('crossword.image_service');
@@ -41,7 +41,7 @@ class CrosswordImageRegenerateTest extends BrowserTestBase {
     // Confirm they exist.
     $this->assertFileExists('public://crossword/1-thumbnail.png');
     $this->assertFileExists('public://crossword/1-numbered_thumbnail.png');
-    $this->assertFileNotExists('public://crossword/1-solution_thumbnail.png');
+    $this->assertFileDoesNotExist('public://crossword/1-solution_thumbnail.png');
     // Put in a delay so updates can be measured..
     sleep(2);
     // Navigate to the regenerate form.
@@ -60,10 +60,10 @@ class CrosswordImageRegenerateTest extends BrowserTestBase {
     $this->assertSession()->pageTextContains('Crossword Image Regeneration is complete');
     // Check file existence (or non-existence).
     $this->assertFileExists('public://crossword/1-thumbnail.png');
-    $this->assertFileNotExists('public://crossword/1-thumbnail_0.png');
+    $this->assertFileDoesNotExist('public://crossword/1-thumbnail_0.png');
     $this->assertFileExists('public://crossword/1-numbered_thumbnail.png');
-    $this->assertFileNotExists('public://crossword/1-numbered_thumbnail_0.png');
-    $this->assertFileNotExists('public://crossword/1-solution_thumbnail.png');
+    $this->assertFileDoesNotExist('public://crossword/1-numbered_thumbnail_0.png');
+    $this->assertFileDoesNotExist('public://crossword/1-solution_thumbnail.png');
     // Check modification times. Only numbered should have been updated.
     $this->assertEquals($thumbnail_time, filemtime('public://crossword/1-thumbnail.png'));
     $this->assertGreaterThan($numbered_time, filemtime('public://crossword/1-numbered_thumbnail.png'));
diff --git a/tests/src/FunctionalJavascript/CrosswordContestTest.php b/tests/src/FunctionalJavascript/CrosswordContestTest.php
index b47060a..43ed014 100644
--- a/tests/src/FunctionalJavascript/CrosswordContestTest.php
+++ b/tests/src/FunctionalJavascript/CrosswordContestTest.php
@@ -97,7 +97,7 @@ class CrosswordContestTest extends WebDriverTestBase {
   protected function createTestNode() {
     // First we move a test file to the file system.
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/{$this->testPuzzleFilename}");
-    $file = file_save_data($contents, "public://{$this->testPuzzleFilename}");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://{$this->testPuzzleFilename}");
     // Now use that file in a new crossword_contests media.
     $media = Media::create(['bundle' => 'crossword_contest']);
     $media->set('name', 'Test Crossword Contest');
diff --git a/tests/src/FunctionalJavascript/CrosswordFormatterTestBase.php b/tests/src/FunctionalJavascript/CrosswordFormatterTestBase.php
index aa17b38..fe6a7c8 100644
--- a/tests/src/FunctionalJavascript/CrosswordFormatterTestBase.php
+++ b/tests/src/FunctionalJavascript/CrosswordFormatterTestBase.php
@@ -325,13 +325,13 @@ abstract class CrosswordFormatterTestBase extends WebDriverTestBase {
   /**
    * Helper function to create node that can be viewed and used for testing.
    *
-   * @return Drupal\node\Entity\Node
+   * @return Node
    *   A crossword node that can be used in tests.
    */
   protected function createTestNode() {
     // First we move a test file to the file system.
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/{$this->testPuzzleFilename}");
-    $file = file_save_data($contents, "public://{$this->testPuzzleFilename}");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://{$this->testPuzzleFilename}");
     // Now use that file in a new crossword node.
     $node = Node::create(['type' => 'crossword']);
     $node->set('title', 'Test Crossword Node');
diff --git a/tests/src/FunctionalJavascript/CrosswordStatusTest.php b/tests/src/FunctionalJavascript/CrosswordStatusTest.php
index fe4f51f..97aa7ef 100644
--- a/tests/src/FunctionalJavascript/CrosswordStatusTest.php
+++ b/tests/src/FunctionalJavascript/CrosswordStatusTest.php
@@ -173,13 +173,13 @@ class CrosswordStatusTest extends WebDriverTestBase {
   /**
    * Helper function to create node that can be viewed and used for testing.
    *
-   * @return Drupal\node\Entity\Node
+   * @return Node
    *   A crossword node that can be used in tests.
    */
   protected function createTestNode() {
     // First we move a test file to the file system.
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/{$this->testPuzzleFilename}");
-    $file = file_save_data($contents, "public://{$this->testPuzzleFilename}");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://{$this->testPuzzleFilename}");
     // Now use that file in a new crossword node.
     $node = Node::create(['type' => 'crossword']);
     $node->set('title', 'Test Crossword Node');
diff --git a/tests/src/Kernel/AcrossLitePuzParserTest.php b/tests/src/Kernel/AcrossLitePuzParserTest.php
index 6ad53cb..115ce32 100644
--- a/tests/src/Kernel/AcrossLitePuzParserTest.php
+++ b/tests/src/Kernel/AcrossLitePuzParserTest.php
@@ -32,6 +32,7 @@ class AcrossLitePuzParserTest extends CrosswordFileParserPluginTestBase {
    *
    * @return array
    *   Structured data for tests.
+   * @doesNotPerformAssertions
    */
   public function testExceptionsProvider() {
     return [
diff --git a/tests/src/Kernel/AcrossLiteTextParserTest.php b/tests/src/Kernel/AcrossLiteTextParserTest.php
index 1f05a32..c0793e0 100644
--- a/tests/src/Kernel/AcrossLiteTextParserTest.php
+++ b/tests/src/Kernel/AcrossLiteTextParserTest.php
@@ -32,6 +32,7 @@ class AcrossLiteTextParserTest extends CrosswordFileParserPluginTestBase {
    *
    * @return array
    *   Structured data for tests.
+   * @doesNotPerformAssertions
    */
   public function testExceptionsProvider() {
     return [
diff --git a/tests/src/Kernel/CrosswordCompilerXmlParserTest.php b/tests/src/Kernel/CrosswordCompilerXmlParserTest.php
index c2c5c37..87ea99d 100644
--- a/tests/src/Kernel/CrosswordCompilerXmlParserTest.php
+++ b/tests/src/Kernel/CrosswordCompilerXmlParserTest.php
@@ -32,6 +32,7 @@ class CrosswordCompilerXmlParserTest extends CrosswordFileParserPluginTestBase {
    *
    * @return array
    *   Structured data for tests.
+   * @doesNotPerformAssertions
    */
   public function testExceptionsProvider() {
     return [
diff --git a/tests/src/Kernel/CrosswordDataServiceTest.php b/tests/src/Kernel/CrosswordDataServiceTest.php
index 0ca728b..809616c 100644
--- a/tests/src/Kernel/CrosswordDataServiceTest.php
+++ b/tests/src/Kernel/CrosswordDataServiceTest.php
@@ -36,7 +36,7 @@ class CrosswordDataServiceTest extends KernelTestBase {
    */
   public function testCrosswordDataService() {
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/test.txt");
-    $file = file_save_data($contents, "public://test.txt");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://test.txt");
     $expected_json = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/test.json");
     $expected_data = json_decode($expected_json, TRUE);
     $expected_data['id'] = $file->id();
@@ -96,7 +96,7 @@ class CrosswordDataServiceTest extends KernelTestBase {
    */
   public function testCrosswordDataServiceXss() {
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/xss.txt");
-    $file = file_save_data($contents, "public://xss.txt");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://xss.txt");
     $expected_json = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/xss.json");
     $expected_data = json_decode($expected_json, TRUE);
     $expected_data['id'] = $file->id();
@@ -113,7 +113,7 @@ class CrosswordDataServiceTest extends KernelTestBase {
    */
   public function testJsonEncoding() {
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/3102647.puz");
-    $file = file_save_data($contents, "public://3102647.puz");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://3102647.puz");
 
     $crossword_data_service = \Drupal::service('crossword.data_service');
     $data = $crossword_data_service->getData($file);
@@ -125,7 +125,7 @@ class CrosswordDataServiceTest extends KernelTestBase {
    */
   public function testCorruptedFile() {
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/corrupted_bad_grid.puz");
-    $file = file_save_data($contents, "public://corrupted_bad_grid.puz");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://corrupted_bad_grid.puz");
 
     $cache_service = \Drupal::service('cache.crossword');
     $this->assertFalse($cache_service->get($file->id()));
diff --git a/tests/src/Kernel/CrosswordFileParserPluginTestBase.php b/tests/src/Kernel/CrosswordFileParserPluginTestBase.php
index fcebd53..8805f08 100644
--- a/tests/src/Kernel/CrosswordFileParserPluginTestBase.php
+++ b/tests/src/Kernel/CrosswordFileParserPluginTestBase.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\Tests\crossword\Kernel;
 
+use Drupal\crossword\CrosswordFileParserManagerInterface;
+use Drupal\crossword\CrosswordDataService;
 use Drupal\crossword\CrosswordException;
 use Drupal\KernelTests\KernelTestBase;
 
@@ -13,14 +15,14 @@ abstract class CrosswordFileParserPluginTestBase extends KernelTestBase {
   /**
    * The parser plugin manager.
    *
-   * @var \Drupal\crossword\CrosswordFileParserManagerInterface
+   * @var CrosswordFileParserManagerInterface
    */
   protected $parserManager;
 
   /**
    * The crossword data service.
    *
-   * @var \Drupal\crossword\CrosswordDataService
+   * @var CrosswordDataService
    */
   protected $crosswordDataService;
 
@@ -125,7 +127,7 @@ abstract class CrosswordFileParserPluginTestBase extends KernelTestBase {
    * This does not closely examine the parsed data. It simply checks whether
    * the parsing completes with or without an expected exception.
    *
-   * @dataProvider testExceptionsProvider
+   * @dataProvider exceptionsProvider
    */
   public function testExceptions($filename, $message) {
     $file = $this->getTestFile($filename);
@@ -149,7 +151,7 @@ abstract class CrosswordFileParserPluginTestBase extends KernelTestBase {
    */
   protected function getTestFile($filename) {
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/" . $filename);
-    $file = file_save_data($contents, "public://$filename");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://$filename");
     return $file;
   }
 
diff --git a/tests/src/Kernel/CrosswordImageServiceTest.php b/tests/src/Kernel/CrosswordImageServiceTest.php
index eeb8ed9..2006572 100644
--- a/tests/src/Kernel/CrosswordImageServiceTest.php
+++ b/tests/src/Kernel/CrosswordImageServiceTest.php
@@ -42,7 +42,7 @@ class CrosswordImageServiceTest extends KernelTestBase {
    */
   public function testCrosswordImageService() {
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/test.txt");
-    $file = file_save_data($contents, "public://test.txt");
+    $file = \Drupal::service('file.repository')->writeData($contents, "public://test.txt");
 
     $crossword_image_manager = \Drupal::service('crossword.manager.image');
     $plugin_ids = array_keys($crossword_image_manager->getCrosswordImageOptionList());
diff --git a/tests/src/Kernel/Formatter/CrosswordFileDownloadLinkFormatterTest.php b/tests/src/Kernel/Formatter/CrosswordFileDownloadLinkFormatterTest.php
index a258e32..155d86c 100644
--- a/tests/src/Kernel/Formatter/CrosswordFileDownloadLinkFormatterTest.php
+++ b/tests/src/Kernel/Formatter/CrosswordFileDownloadLinkFormatterTest.php
@@ -56,7 +56,7 @@ class CrosswordFileDownloadLinkFormatterTest extends SimpleCrosswordFormatterTes
     $expected_render = [
       '#type' => 'link',
       '#title' => 'Test Puzzle (3x3)',
-      '#url' => Url::fromUri(file_create_url('public://test.txt')),
+      '#url' => \Drupal::service('file_url_generator')->generate('public://test.txt'),
       '#options' => [
         'attributes' => [
           'class' => [
diff --git a/tests/src/Kernel/Formatter/CrosswordImageDownloadLinkFormatterTest.php b/tests/src/Kernel/Formatter/CrosswordImageDownloadLinkFormatterTest.php
index 4f8f896..a0dcba5 100644
--- a/tests/src/Kernel/Formatter/CrosswordImageDownloadLinkFormatterTest.php
+++ b/tests/src/Kernel/Formatter/CrosswordImageDownloadLinkFormatterTest.php
@@ -58,7 +58,7 @@ class CrosswordImageDownloadLinkFormatterTest extends SimpleCrosswordFormatterTe
     $expected_render = [
       '#type' => 'link',
       '#title' => 'Solution (png)',
-      '#url' => Url::fromUri(file_create_url('public://crossword/1-solution_thumbnail.png')),
+      '#url' => \Drupal::service('file_url_generator')->generate('public://crossword/1-solution_thumbnail.png'),
       '#options' => [
         'attributes' => [
           'class' => [
diff --git a/tests/src/Kernel/Formatter/SimpleCrosswordFormatterTestBase.php b/tests/src/Kernel/Formatter/SimpleCrosswordFormatterTestBase.php
index 0b3e3bb..9d27502 100644
--- a/tests/src/Kernel/Formatter/SimpleCrosswordFormatterTestBase.php
+++ b/tests/src/Kernel/Formatter/SimpleCrosswordFormatterTestBase.php
@@ -40,7 +40,7 @@ abstract class SimpleCrosswordFormatterTestBase extends KernelTestBase {
   /**
    * A test entity.
    *
-   * @var Drupal\entity_test\Entity\EntityTestRev
+   * @var EntityTestRev
    */
   public $entity;
 
@@ -75,14 +75,14 @@ abstract class SimpleCrosswordFormatterTestBase extends KernelTestBase {
   /**
    * Helper function to create node that can be used for testing.
    *
-   * @return Drupal\entity_test\Entity\EntityTestRev
+   * @return EntityTestRev
    *   An entity to be used for testing.
    */
   protected function createTestEntity() {
     // First we move a test file to the file system.
     $contents = file_get_contents(\Drupal::service('extension.list.module')->getPath('crossword') . "/tests/files/test.txt");
 
-    $file = file_save_data($contents, 'public://test.txt');
+    $file = \Drupal::service('file.repository')->writeData($contents, 'public://test.txt');
     $field_storage = FieldStorageConfig::create([
       'field_name' => 'field_crossword',
       'entity_type' => 'entity_test_rev',
diff --git a/tests/src/Kernel/IpuzParserTest.php b/tests/src/Kernel/IpuzParserTest.php
index 400055a..8a9279c 100644
--- a/tests/src/Kernel/IpuzParserTest.php
+++ b/tests/src/Kernel/IpuzParserTest.php
@@ -32,6 +32,7 @@ class IpuzParserTest extends CrosswordFileParserPluginTestBase {
    *
    * @return array
    *   Structured data for tests.
+   * @doesNotPerformAssertions
    */
   public function testExceptionsProvider() {
     return [
diff --git a/tests/src/Unit/FindReferencesTest.php b/tests/src/Unit/FindReferencesTest.php
index a96462f..c1f049d 100644
--- a/tests/src/Unit/FindReferencesTest.php
+++ b/tests/src/Unit/FindReferencesTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\crossword\Unit;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\crossword\CrosswordDataService;
 use Drupal\Tests\UnitTestCase;
 
@@ -12,13 +13,14 @@ use Drupal\Tests\UnitTestCase;
  */
 class FindReferencesTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * Test findReferences function.
    *
    * @dataProvider findReferencesProvider
    */
   public function testFindReferences($text) {
-    /** @var \Drupal\crossword\CrosswordDataService $crossword_data_service */
+    /** @var CrosswordDataService $crossword_data_service */
     $crossword_data_service = $this->prophesize(CrosswordDataService::class);
     $crossword_data_service = $crossword_data_service->reveal();
 
@@ -66,7 +68,7 @@ class FindReferencesTest extends UnitTestCase {
    * Tests addReferences specifically with "starred clues".
    */
   public function testStarredClues() {
-    /** @var \Drupal\crossword\CrosswordDataService $crossword_data_service */
+    /** @var CrosswordDataService $crossword_data_service */
     $crossword_data_service = $this->prophesize(CrosswordDataService::class);
     $crossword_data_service = $crossword_data_service->reveal();
 
