diff --git a/toolbar_anti_flicker.module b/toolbar_anti_flicker.module
index c2d5f7e..bd7e538 100644
--- a/toolbar_anti_flicker.module
+++ b/toolbar_anti_flicker.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Link;
 use Drupal\Core\Url;
 
 function toolbar_anti_flicker_page_attachments_alter(array &$page) {
@@ -122,7 +123,7 @@ function toolbar_anti_flicker_replace_library(array &$target_library, $key, arra
  */
 function toolbar_anti_flicker_library_info_alter(array &$libraries, $module) {
   if ($module === 'toolbar' && isset($libraries['toolbar'])) {
-    $module_path = '/' . drupal_get_path('module', 'toolbar_anti_flicker') . '/';
+    $module_path = '/' . \Drupal::service('extension.list.module')->getPath('toolbar_anti_flicker') . '/';
 
     // Version 8.4 introduced css fixes.
     if (version_compare(\DRUPAL::VERSION, 8.4, '<')) {
@@ -169,7 +170,7 @@ function toolbar_anti_flicker_toolbar() {
       'content' => [
         '#theme' => 'item_list',
         '#items' => [
-          \Drupal\Core\Link::fromTextAndUrl('&nbsp;', new Url('<front>', [], []))
+          Link::fromTextAndUrl('&nbsp;', new Url('<front>', [], []))
         ],
         '#attributes' => [
           'class' => ['toolbar-menu'],
