diff --git a/src/EventSubscriber/HtmlResponseBigPipeSessionlessSubscriber.php b/src/EventSubscriber/HtmlResponseBigPipeSessionlessSubscriber.php
index 888e690..0998bdb 100644
--- a/src/EventSubscriber/HtmlResponseBigPipeSessionlessSubscriber.php
+++ b/src/EventSubscriber/HtmlResponseBigPipeSessionlessSubscriber.php
@@ -22,25 +22,25 @@ class HtmlResponseBigPipeSessionlessSubscriber extends HtmlResponseBigPipeSubscr
   /**
    * The BigPipeSessionless service.
    *
-   * @var \Drupal\big_pipe_sessionless\Render\BigPipeSessionless
+   * @var BigPipeSessionless
    */
   protected $bigPipeSessionless;
 
   /**
    * The session configuration.
    *
-   * @var \Drupal\Core\Session\SessionConfigurationInterface
+   * @var SessionConfigurationInterface
    */
   protected $sessionConfiguration;
 
   /**
    * Constructs a HtmlResponseBigPipeSessionlessSubscriber object.
    *
-   * @param \Drupal\big_pipe\Render\BigPipe $big_pipe
+   * @param BigPipe $big_pipe
    *   The BigPipe service.
-   * @param \Drupal\big_pipe_sessionless\Render\BigPipeSessionless $big_pipe_sessionless
+   * @param BigPipeSessionless $big_pipe_sessionless
    *   The BigPipeSessionless service.
-   * @param \Drupal\Core\Session\SessionConfigurationInterface $session_configuration
+   * @param SessionConfigurationInterface $session_configuration
    *   The session configuration.
    */
   public function __construct(BigPipe $big_pipe, BigPipeSessionless $big_pipe_sessionless, SessionConfigurationInterface $session_configuration) {
diff --git a/src/Render/BigPipeSessionless.php b/src/Render/BigPipeSessionless.php
index e12912c..f066f76 100644
--- a/src/Render/BigPipeSessionless.php
+++ b/src/Render/BigPipeSessionless.php
@@ -18,7 +18,7 @@ class BigPipeSessionless extends BigPipe {
    * Contains replaced placeholders. Its cacheability metadata and attachments
    * are only for the placeholders.
    *
-   * @var \Drupal\Core\Render\HtmlResponse
+   * @var HtmlResponse
    *
    * @see \Drupal\big_pipe\Render\BigPipeResponse::getOriginalHtmlResponse()
    * @see ::sendContent()
@@ -28,14 +28,14 @@ class BigPipeSessionless extends BigPipe {
   /**
    * The PageCache middleware.
    *
-   * @var \Symfony\Component\HttpKernel\HttpKernelInterface
+   * @var HttpKernelInterface
    */
   protected $pageCacheMiddleware;
 
   /**
    * Sets the PageCache middleware.
    *
-   * @param \Symfony\Component\HttpKernel\HttpKernelInterface $page_cache_middleware
+   * @param HttpKernelInterface $page_cache_middleware
    *   The page cache middleware.
    */
   public function setPageCacheMiddleware(HttpKernelInterface $page_cache_middleware) {
@@ -91,7 +91,7 @@ class BigPipeSessionless extends BigPipe {
   /**
    * Primes the Page Cache based on the streamed response.
    *
-   * @param \Drupal\big_pipe\Render\BigPipeResponse $response
+   * @param BigPipeResponse $response
    *   The BigPipe response that was sent.
    */
   protected function primePageCache(BigPipeResponse $response) {
diff --git a/src/StackMiddleware/BigPipeSessionlessPageCache.php b/src/StackMiddleware/BigPipeSessionlessPageCache.php
index 18a68c8..0ed27aa 100644
--- a/src/StackMiddleware/BigPipeSessionlessPageCache.php
+++ b/src/StackMiddleware/BigPipeSessionlessPageCache.php
@@ -20,9 +20,9 @@ class BigPipeSessionlessPageCache extends PageCache {
   /**
    * Stores a response in the page cache.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   A request object.
-   * @param \Symfony\Component\HttpFoundation\Response $response
+   * @param Response $response
    *   A response object that should be stored in the page cache.
    *
    * @return bool
diff --git a/tests/src/Functional/BigPipeSessionlessRegressionTest.php b/tests/src/Functional/BigPipeSessionlessRegressionTest.php
index bb52956..6b900c1 100644
--- a/tests/src/Functional/BigPipeSessionlessRegressionTest.php
+++ b/tests/src/Functional/BigPipeSessionlessRegressionTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\big_pipe_sessionless\Functional;
 
+use GuzzleHttp\ClientInterface;
 use Drupal\Core\Cache\Cache;
 use Drupal\Tests\BrowserTestBase;
 
@@ -35,7 +36,7 @@ class BigPipeSessionlessRegressionTest extends BrowserTestBase {
    * @see https://www.drupal.org/project/big_pipe_sessionless/issues/2942484
    */
   public function testHeadRequestForIssue2942484() {
-    /** @var \GuzzleHttp\ClientInterface $client */
+    /** @var ClientInterface $client */
     $client = $this->getSession()->getDriver()->getClient()->getClient();
 
     Cache::invalidateTags(['rendered']);
diff --git a/tests/src/Functional/BigPipeSessionlessTest.php b/tests/src/Functional/BigPipeSessionlessTest.php
index f1c7881..b2715be 100644
--- a/tests/src/Functional/BigPipeSessionlessTest.php
+++ b/tests/src/Functional/BigPipeSessionlessTest.php
@@ -58,22 +58,18 @@ class BigPipeSessionlessTest extends BigPipeTest {
     ];
 
     foreach ($cases as $case => $expectations) {
-      $this->pass("No-session test case: $case");
-
       // Simulate production.
       $this->config('system.logging')->set('error_level', ERROR_REPORTING_HIDE)->save();
       $this->config('system.performance')->set('cache.page.max_age', $expectations['configured max-age'])->save();
 
       $this->assertSessionCookieExists(FALSE);
       $this->assertBigPipeNoJsCookieExists(FALSE);
-
-      $this->pass('First request: Page Cache miss, streamed response by BigPipe');
       $this->drupalGet(Url::fromRoute('big_pipe_sessionless_test'));
       $this->assertNull($this->drupalGetHeader('X-Drupal-Cache'), 'No X-Drupal-Cache header.');
       $this->assertBigPipeResponseHeadersPresent();
       $this->assertSession()->responseHeaderNotContains('X-Drupal-Cache-Tags', 'cache_tag_set_in_lazy_builder');
-      $this->assertRaw('<a href="' . base_path() . 'big_pipe_sessionless_test" data-drupal-link-system-path="big_pipe_sessionless_test" class="is-active">This should be marked active</a>');
-      $this->assertRaw('<a href="' . base_path() . '" data-drupal-link-system-path="&lt;front&gt;">This should be marked inactive</a>');
+      $this->assertSession()->responseContains('<a href="' . base_path() . 'big_pipe_sessionless_test" data-drupal-link-system-path="big_pipe_sessionless_test" class="is-active">This should be marked active</a>');
+      $this->assertSession()->responseContains('<a href="' . base_path() . '" data-drupal-link-system-path="&lt;front&gt;">This should be marked inactive</a>');
 
       $cases = $this->getTestCases();
       $this->assertBigPipeNoJsPlaceholders([
@@ -84,29 +80,22 @@ class BigPipeSessionlessTest extends BigPipeTest {
         $cases['exception__lazy_builder']->bigPipePlaceholderId => NULL,
         $cases['exception__embedded_response']->bigPipePlaceholderId => NULL,
       ]);
-
-      $this->pass('Verifying there are no BigPipe placeholders & replacements.');
-      $this->assertEqual('<none>', $this->drupalGetHeader('BigPipe-Test-Placeholders'));
-      $this->pass('Verifying BigPipe start/stop signals are absent.');
+      $this->assertEquals('<none>', $this->drupalGetHeader('BigPipe-Test-Placeholders'));
       // BigPipe start signal absent.
-      $this->assertNoRaw(BigPipe::START_SIGNAL);
+      $this->assertSession()->responseNotContains(BigPipe::START_SIGNAL);
       // BigPipe stop signal absent.
-      $this->assertNoRaw(BigPipe::STOP_SIGNAL);
-
-      $this->pass('Verifying BigPipe assets are absent.');
+      $this->assertSession()->responseNotContains(BigPipe::STOP_SIGNAL);
       $this->assertTrue(empty($this->getDrupalSettings()), 'drupalSettings and BigPipe asset library absent.');
       // Closing body tag present.
-      $this->assertRaw('</body>');
-
-      $this->pass('Repeat request: Page Cache hit, BigPipe not involved');
+      $this->assertSession()->responseContains('</body>');
       $this->drupalGet(Url::fromRoute('big_pipe_sessionless_test'));
-      $this->assertIdentical('HIT', $this->drupalGetHeader('X-Drupal-Cache'), 'Page cache hit.');
-      $this->assertIdentical($expectations['page cache hit cache control'], $this->drupalGetHeader('Cache-Control'));
+      $this->assertSame('HIT', $this->drupalGetHeader('X-Drupal-Cache'), 'Page cache hit.');
+      $this->assertSame($expectations['page cache hit cache control'], $this->drupalGetHeader('Cache-Control'));
       $this->assertNull($this->drupalGetHeader('Surrogate-Control'), 'No Surrogate-Control header.');
       $this->assertNull($this->drupalGetHeader('X-Accel-Buffering'), 'No X-Accel-Buffering header.');
-      $this->assertCacheTag('cache_tag_set_in_lazy_builder');
-      $this->assertRaw('<a href="' . base_path() . 'big_pipe_sessionless_test" data-drupal-link-system-path="big_pipe_sessionless_test" class="is-active">This should be marked active</a>');
-      $this->assertRaw('<a href="' . base_path() . '" data-drupal-link-system-path="&lt;front&gt;">This should be marked inactive</a>');
+      $this->assertSession()->responseHeaderContains('X-Drupal-Cache-Tags', 'cache_tag_set_in_lazy_builder');
+      $this->assertSession()->responseContains('<a href="' . base_path() . 'big_pipe_sessionless_test" data-drupal-link-system-path="big_pipe_sessionless_test" class="is-active">This should be marked active</a>');
+      $this->assertSession()->responseContains('<a href="' . base_path() . '" data-drupal-link-system-path="&lt;front&gt;">This should be marked inactive</a>');
 
       // Clear the Page Cache. Note that we use a cache tag that exists on this
       // response, despite it being absent from both the Page Cache miss
@@ -114,16 +103,13 @@ class BigPipeSessionlessTest extends BigPipeTest {
       // (because it is identical to the original Page Cache miss response,
       // minus the streaming).
       Cache::invalidateTags(['cache_tag_set_in_lazy_builder']);
-
-      // Simulate development.
-      $this->pass('Verifying BigPipe provides useful error output when an error occurs while rendering a placeholder if verbose error logging is enabled.');
       $this->config('system.logging')->set('error_level', ERROR_REPORTING_DISPLAY_VERBOSE)->save();
       $this->drupalGet(Url::fromRoute('big_pipe_sessionless_test'));
       // The 'edge_case__html_exception' case throws an exception.
-      $this->assertRaw('The website encountered an unexpected error. Please try again later');
-      $this->assertRaw('You are not allowed to say llamas are not cool!');
+      $this->assertSession()->responseContains('The website encountered an unexpected error. Please try again later');
+      $this->assertSession()->responseContains('You are not allowed to say llamas are not cool!');
       // Closing body tag absent: error occurred before then.
-      $this->assertNoRaw('</body>');
+      $this->assertSession()->responseNotContains('</body>');
       // The exception is expected. Do not interpret it as a test failure.
       unlink(\Drupal::root() . '/' . $this->siteDirectory . '/error.log');
 
diff --git a/tests/src/Unit/Render/Placeholder/BigPipeSessionlessStrategyTest.php b/tests/src/Unit/Render/Placeholder/BigPipeSessionlessStrategyTest.php
index d26c5f6..e47e46e 100644
--- a/tests/src/Unit/Render/Placeholder/BigPipeSessionlessStrategyTest.php
+++ b/tests/src/Unit/Render/Placeholder/BigPipeSessionlessStrategyTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\big_pipe_sessionless\Unit\Render\Placeholder;
 
+use Prophecy\PhpUnit\ProphecyTrait;
 use Drupal\big_pipe_test\BigPipePlaceholderTestCases;
 use Drupal\big_pipe_sessionless\Render\Placeholder\BigPipeSessionlessStrategy;
 use Drupal\Core\Routing\RouteMatchInterface;
@@ -20,6 +21,7 @@ use Symfony\Component\Routing\Route;
  */
 class BigPipeSessionlessStrategyTest extends UnitTestCase {
 
+  use ProphecyTrait;
   /**
    * @covers ::processPlaceholders
    *
