diff --git a/simplesamlphp_custom_attributes.module b/simplesamlphp_custom_attributes.module
index 32b6df7..0e174fd 100644
--- a/simplesamlphp_custom_attributes.module
+++ b/simplesamlphp_custom_attributes.module
@@ -1,5 +1,6 @@
 <?php
 
+use Drupal\Core\Entity\EntityFieldManagerInterface;
 /**
  * @file
  * SimpleSAMLphp Custom Attribute Mapping module.
@@ -21,7 +22,7 @@ function simplesamlphp_custom_attributes_help($route_name) {
 /**
  * Alter a user account after authentication using attribute mapping.
  *
- * @param Drupal\user\UserInterface $account
+ * @param UserInterface $account
  *   The user account that can be altered.
  * @param array $attributes
  *   The SimpleSAMLphp attributes for this user.
@@ -31,7 +32,7 @@ function simplesamlphp_custom_attributes_help($route_name) {
  */
 function simplesamlphp_custom_attributes_simplesamlphp_auth_user_attributes(UserInterface $account, array $attributes) {
   $mappings = Drupal::config('simplesamlphp_custom_attributes.mappings')->get('mappings');
-  /** @var Drupal\Core\Entity\EntityFieldManagerInterface $entityFieldManager */
+  /** @var EntityFieldManagerInterface $entityFieldManager */
   $entityFieldManager = Drupal::service('entity_field.manager');
   $fields = $entityFieldManager->getFieldDefinitions('user', 'user');
   $changed = 0;
diff --git a/src/Controller/SimplesamlphpCustomAttributesController.php b/src/Controller/SimplesamlphpCustomAttributesController.php
index 6f8500b..0971fa9 100644
--- a/src/Controller/SimplesamlphpCustomAttributesController.php
+++ b/src/Controller/SimplesamlphpCustomAttributesController.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\simplesamlphp_custom_attributes\Controller;
 
+use Drupal\Core\Config\Config;
 use Drupal\Core\Controller\ControllerBase;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Url;
@@ -15,14 +16,14 @@ class SimplesamlphpCustomAttributesController extends ControllerBase {
   /**
    * Mapping settings.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $mappingConfig;
 
   /**
    * Used to get field names for user entity.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;
 
@@ -105,7 +106,7 @@ class SimplesamlphpCustomAttributesController extends ControllerBase {
         $table['#rows'][$id] = [
           'saml_attribute' => $mapping['attribute_name'],
           'user_field' => $user_field,
-          'operations' => render($operations),
+          'operations' => \Drupal::service('renderer')->render($operations),
         ];
       }
     }
diff --git a/src/Form/SimplesamlphpCustomAttributesDeleteForm.php b/src/Form/SimplesamlphpCustomAttributesDeleteForm.php
index 99a0d53..ccbeeed 100644
--- a/src/Form/SimplesamlphpCustomAttributesDeleteForm.php
+++ b/src/Form/SimplesamlphpCustomAttributesDeleteForm.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\simplesamlphp_custom_attributes\Form;
 
+use Drupal\Core\Config\Config;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Form\ConfirmFormBase;
 use Drupal\Core\Form\FormStateInterface;
@@ -16,14 +17,14 @@ class SimplesamlphpCustomAttributesDeleteForm extends ConfirmFormBase {
   /**
    * Mapping settings.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $mappingConfig;
 
   /**
    * Used to get field names for user entity.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;
 
diff --git a/src/Form/SimplesamlphpCustomAttributesEditForm.php b/src/Form/SimplesamlphpCustomAttributesEditForm.php
index 376de20..a36c77e 100644
--- a/src/Form/SimplesamlphpCustomAttributesEditForm.php
+++ b/src/Form/SimplesamlphpCustomAttributesEditForm.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\simplesamlphp_custom_attributes\Form;
 
+use Drupal\Core\Config\Config;
 use Drupal\Core\Entity\EntityFieldManagerInterface;
 use Drupal\Core\Form\FormBase;
 use Drupal\Core\Form\FormStateInterface;
@@ -15,14 +16,14 @@ class SimplesamlphpCustomAttributesEditForm extends FormBase {
   /**
    * Mapping settings.
    *
-   * @var \Drupal\Core\Config\Config
+   * @var Config
    */
   protected $mappingConfig;
 
   /**
    * Used to get field names for user entity.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;
 
