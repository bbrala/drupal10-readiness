diff --git a/referenced_entities_revision.info.yml b/referenced_entities_revision.info.yml
index 0ae5087..a0aeaa7 100644
--- a/referenced_entities_revision.info.yml
+++ b/referenced_entities_revision.info.yml
@@ -1,5 +1,5 @@
 name: 'referenced_entities_revision'
 type: module
 description: 'Lists all referenced entities on a node recursively'
-core_version_requirement: ^8.9 || ^9
+core_version_requirement: ^9.3 || ^10
 package: 'Custom'
diff --git a/src/Controller/RevisionsListController.php b/src/Controller/RevisionsListController.php
index 5812d81..b912803 100644
--- a/src/Controller/RevisionsListController.php
+++ b/src/Controller/RevisionsListController.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\referenced_entities_revision\Controller;
 
+use Drupal\Core\Entity\EntityFieldManagerInterface;
+use Drupal\node\Entity\Node;
 use Drupal\Core\Controller\ControllerBase;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Drupal\Core\Link;
@@ -14,7 +16,7 @@ class RevisionsListController extends ControllerBase {
   /**
    * Drupal\Core\Entity\EntityFieldManagerInterface definition.
    *
-   * @var \Drupal\Core\Entity\EntityFieldManagerInterface
+   * @var EntityFieldManagerInterface
    */
   protected $entityFieldManager;
 
@@ -46,7 +48,7 @@ class RevisionsListController extends ControllerBase {
 
     $includes = [];
     if($entity == NULL)
-      $entity = \Drupal\node\Entity\Node::load('471');
+      $entity = Node::load('471');
     // Iterate the fields of an entity and look for fields that can reference
     // other entities.
     $field_definitions = $this->entityFieldManager->getFieldDefinitions($entity->getEntityTypeId(), $entity->bundle());
@@ -82,7 +84,7 @@ class RevisionsListController extends ControllerBase {
     $this->revisionList($node, $referenced_entities);
     $all_revisions = [];
     foreach($referenced_entities as $entity_id){
-      $entity = \Drupal\node\Entity\Node::load($entity_id);
+      $entity = Node::load($entity_id);
       $vids = \Drupal::entityTypeManager()->getStorage('node')->revisionIds($entity);
       foreach($vids as $vid){        
         $revision = \Drupal::entityTypeManager()->getStorage('node')->loadRevision($vid);
@@ -123,7 +125,7 @@ class RevisionsListController extends ControllerBase {
     ];
     return [
       '#type' => '#markup',
-      '#markup' => render($build)
+      '#markup' => \Drupal::service('renderer')->render($build)
     ];
 
   }
diff --git a/tests/src/Functional/LoadTest.php b/tests/src/Functional/LoadTest.php
index f5a7c45..abd7cef 100644
--- a/tests/src/Functional/LoadTest.php
+++ b/tests/src/Functional/LoadTest.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\Tests\referenced_entities_revision\Functional;
 
+use Drupal\user\UserInterface;
 use Drupal\Core\Url;
 use Drupal\Tests\BrowserTestBase;
 
@@ -22,14 +23,14 @@ class LoadTest extends BrowserTestBase {
   /**
    * A user with permission to administer site configuration.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $user;
 
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     $this->user = $this->drupalCreateUser(['administer site configuration']);
     $this->drupalLogin($this->user);
