themes/contrib/dxpr_theme/color/color.inc
themes/contrib/dxpr_theme/dxpr_theme.theme
themes/contrib/dxpr_theme/dxpr_theme_STARTERKIT/color/color.inc
themes/contrib/dxpr_theme/dxpr_theme_STARTERKIT/dxpr_theme_STARTERKIT.theme
themes/contrib/dxpr_theme/dxpr_theme_callbacks.inc
themes/contrib/dxpr_theme/features/sooper-block-design/block-design-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-block-design/block-design-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-custom-css/custom-css-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-custom-css/custom-css-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-fonts/fonts-theme-settings-controller.inc
themes/contrib/dxpr_theme/features/sooper-fonts/fonts-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-fonts/fonts-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-header/header-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-header/header-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-layout/layout-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-layout/layout-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-page-title/page_title-theme-settings-controller.inc
themes/contrib/dxpr_theme/features/sooper-page-title/page_title-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-page-title/page_title-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-prevnext/prevnext-theme-settings.inc
themes/contrib/dxpr_theme/features/sooper-typography/typography-theme-settings-css.inc
themes/contrib/dxpr_theme/features/sooper-typography/typography-theme-settings.inc
themes/contrib/dxpr_theme/theme-settings.php

7 files with changes
====================

1) themes/contrib/dxpr_theme/theme-settings.php:24

    ---------- begin diff ----------
@@ @@
   };
   $build_info = $form_state->getBuildInfo();
   $subject_theme = $build_info['args'][0];
-  $dxpr_theme_theme_path = drupal_get_path('theme', 'dxpr_theme') . '/';
+  $dxpr_theme_theme_path = \Drupal::service('extension.list.theme')->getPath('dxpr_theme') . '/';
   $themes = \Drupal::service('theme_handler')->listInfo();

   $img = '<img style="width:35px;margin-right:5px;" src="' . $base_path . $dxpr_theme_theme_path . 'dxpr-logo-white.svg" />';
@@ @@
    * settings are saved and once after the redirect with the updated settings.
    * @todo come up with a less 'icky' solution
    */
-  require_once drupal_get_path('theme', 'dxpr_theme') . '/dxpr_theme_callbacks.inc';
+  require_once \Drupal::service('extension.list.theme')->getPath('dxpr_theme') . '/dxpr_theme_callbacks.inc';

   $dxpr_theme_css_file = _dxpr_theme_css_cache_file($subject_theme);
   if (!file_exists($dxpr_theme_css_file)) {
@@ @@
     dxpr_theme_css_cache_build($subject_theme);
   }

-  foreach (\Drupal::service('file_system')->scanDirectory(drupal_get_path('theme', 'dxpr_theme') . '/features', '/settings.inc/i') as $file) {
+  foreach (\Drupal::service('file_system')->scanDirectory(\Drupal::service('extension.list.theme')->getPath('dxpr_theme') . '/features', '/settings.inc/i') as $file) {
     require_once $file->uri;
     $function_name = basename($file->filename, '.inc');
     $function_name = str_replace('-', '_', $function_name);
@@ @@
  */
 function dxpr_theme_form_system_theme_settings_submit(&$form, &$form_state) {
   // If the user uploaded a new image, save it to a permanent location.
-  /** @var \Drupal\Core\File\FileSystemInterface $file_system */
+  /** @var FileSystemInterface $file_system */
   $file_system = \Drupal::service('file_system');
   $directory = 'public://dxpr_theme/images/';

@@ @@
     return $theme_info[$theme];
   }

-  $path = drupal_get_path('theme', $theme);
+  $path = \Drupal::service('extension.list.theme')->getPath($theme);
   $file = DRUPAL_ROOT . '/' . $path . '/color/color.inc';
   if ($path && file_exists($file)) {
     include $file;
@@ @@
  * @see \Drupal\system\Form\ThemeSettingsForm::submitForm()
  */
 function dxpr_theme_form_system_theme_settings_after_submit(&$form, &$form_state) {
-  require_once drupal_get_path('theme', 'dxpr_theme') . '/dxpr_theme_callbacks.inc';
+  require_once \Drupal::service('extension.list.theme')->getPath('dxpr_theme') . '/dxpr_theme_callbacks.inc';

   $build_info = $form_state->getBuildInfo();
   $subject_theme = $build_info['args'][0];
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


2) themes/contrib/dxpr_theme/features/sooper-page-title/page_title-theme-settings-css.inc:88

    ---------- begin diff ----------
@@ @@
   }

   if ($page_title_image_path = theme_get_setting('page_title_image_path', $theme)) {
-    $css .= ".page-title-full-width-container:after { background-image: url('" . file_url_transform_relative(file_create_url($page_title_image_path)) . "'); }\n\n";
+    $css .= ".page-title-full-width-container:after { background-image: url('" . \Drupal::service('file_url_generator')->generateString($page_title_image_path) . "'); }\n\n";
   }
 }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector


3) themes/contrib/dxpr_theme/features/sooper-layout/layout-theme-settings-css.inc:117

    ---------- begin diff ----------
@@ @@
   }

   if ($background_image_path = theme_get_setting('background_image_path', $theme)) {
-    $css .= "body { background-image: url('" . file_url_transform_relative(file_create_url($background_image_path)) . "'); }\n\n";
+    $css .= "body { background-image: url('" . \Drupal::service('file_url_generator')->generateString($background_image_path) . "'); }\n\n";
   }
 }
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector


4) themes/contrib/dxpr_theme/features/sooper-fonts/fonts-theme-settings.inc:126

    ---------- begin diff ----------
@@ @@

   $fonts = [];
   foreach ($theme_chain as $theme) {
-    $theme_path = drupal_get_path('theme', $theme);
+    $theme_path = \Drupal::service('extension.list.theme')->getPath($theme);
     if (!is_dir($theme_path . '/fonts')) {
       continue;
     }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


5) themes/contrib/dxpr_theme/features/sooper-fonts/fonts-theme-settings-controller.inc:74

    ---------- begin diff ----------
@@ @@
   $added_stylesheets = $added_stylesheets ?? [];

   $font = explode('|', substr($font, 1));
-  $path = drupal_get_path('theme', $font[0]) . $font[1];
+  $path = \Drupal::service('extension.list.theme')->getPath($font[0]) . $font[1];
   if (empty($added_stylesheets[$path])) {
     $element = [
       '#tag' => 'link',
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


6) themes/contrib/dxpr_theme/dxpr_theme_callbacks.inc:61

    ---------- begin diff ----------
@@ @@
   }
   $paths['target'] = $paths['target'] . '/';
   $paths['id'] = $id;
-  $paths['source'] = drupal_get_path('theme', $theme) . '/';
+  $paths['source'] = \Drupal::service('extension.list.theme')->getPath($theme) . '/';
   $paths['files'] = $paths['map'] = [];

   // Save palette and logo location.
@@ @@
   // Construct CSS file:
   $css = '';
   // Load Sooper Features CSS.
-  foreach (\Drupal::service('file_system')->scanDirectory(drupal_get_path('theme', 'dxpr_theme') . '/features', '/css.inc/i') as $file) {
+  foreach (\Drupal::service('file_system')->scanDirectory(\Drupal::service('extension.list.theme')->getPath('dxpr_theme') . '/features', '/css.inc/i') as $file) {
     require_once $file->uri;
     $function_name = basename($file->filename, '.inc');
     $function_name = str_replace('-', '_', $function_name);
@@ @@
       $function_name($theme, $css, $palette);
     }
   }
-  $file_object = file_save_data($css, $dxpr_theme_css_file, FileSystemInterface::EXISTS_REPLACE);
+  $file_object = \Drupal::service('file.repository')->writeData($css, $dxpr_theme_css_file, FileSystemInterface::EXISTS_REPLACE);
   if ($dir_writable && !empty($file_object)) {
     $message = t('DXPR Theme CSS file cache built for %theme', ['%theme' => $theme]);
     \Drupal::messenger()->addMessage($message);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileSaveDataRector
 * ArgumentRemoverRector


7) themes/contrib/dxpr_theme/dxpr_theme.theme:82

    ---------- begin diff ----------
@@ @@
   }

   // Load Sooper Features Controllers.
-  foreach (\Drupal::service('file_system')->scanDirectory(drupal_get_path('theme', 'dxpr_theme') . '/features', '/controller.inc/i') as $file) {
+  foreach (\Drupal::service('file_system')->scanDirectory(\Drupal::service('extension.list.theme')->getPath('dxpr_theme') . '/features', '/controller.inc/i') as $file) {
     require_once $file->uri;
     $function_name = basename($file->filename, '.inc');
     $function_name = str_replace('-', '_', $function_name);
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector


 [OK] 7 files have been changed by Rector                                       

