modules/contrib/ckeditor_uploadimage/ckeditor_uploadimage.install
modules/contrib/ckeditor_uploadimage/ckeditor_uploadimage.module
modules/contrib/ckeditor_uploadimage/src/Controller/CKEditorUploadImageController.php
modules/contrib/ckeditor_uploadimage/src/Form/CKEditorUploadImageDrupalImage.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/DrupalUploadImage.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/DrupalUploadImageImce.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/FileTools.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/Notification.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/NotificationAggregator.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/UploadImage.php
modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/UploadWidget.php

4 files with changes
====================

1) modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/DrupalUploadImageImce.php:40

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   function getFile() {
-    return drupal_get_path('module', 'ckeditor_uploadimage') . '/js/plugins/drupaluploadimage/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('ckeditor_uploadimage') . '/js/plugins/drupaluploadimage/plugin.js';
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/ckeditor_uploadimage/src/Plugin/CKEditorPlugin/DrupalUploadImage.php:40

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   function getFile() {
-    return drupal_get_path('module', 'ckeditor_uploadimage') . '/js/plugins/' . $this->getPluginId() . '/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('ckeditor_uploadimage') . '/js/plugins/' . $this->getPluginId() . '/plugin.js';
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


3) modules/contrib/ckeditor_uploadimage/src/Controller/CKEditorUploadImageController.php:5

    ---------- begin diff ----------
@@ @@

 namespace Drupal\ckeditor_uploadimage\Controller;

+use Drupal\Core\Render\Markup;
+use Drupal\media\Entity\Media;
+use Drupal\node\NodeInterface;
 use Drupal\Core\Controller\ControllerBase;
 use Drupal\Component\Utility\Bytes;
 use Symfony\Component\HttpFoundation\Request;
@@ @@
     }
     $maxFilesize = min(Bytes::toInt($imageUpload['max_size']), Environment::getUploadMaxSize());
     $destination = $imageUpload['scheme'] . '://' . $imageUpload['directory'];
-    /** @var \Drupal\Core\File\FileSystemInterface $fileSystem */
+    /** @var FileSystemInterface $fileSystem */
     $fileSystem = \Drupal::service('file_system');
     if (isset($destination) && !$fileSystem->prepareDirectory($destination, FileSystemInterface::CREATE_DIRECTORY)) {
       \Drupal::logger('ckeditor_uploadimage')->notice(
@@ @@
       $file = file_save_upload('fid', $validators, $destination);
       $messages = \Drupal::messenger()->all();
       if (isset($messages['error'])) {
-        /** @var \Drupal\Core\Render\Markup $message */
+        /** @var Markup $message */
         foreach ($messages['error'] as $message) {
           $errorMsg = '<div>' . $message->jsonSerialize() . '</div>';
         }
       }
       if (isset($messages['warning'])) {
-        /** @var \Drupal\Core\Render\Markup $message */
+        /** @var Markup $message */
         foreach ($messages['warning'] as $message) {
           $errorMsg .= '<div>' . $message->jsonSerialize() . '</div>';
         }
       }
       if (isset($messages['status'])) {
-        /** @var \Drupal\Core\Render\Markup $message */
+        /** @var Markup $message */
         foreach ($messages['status'] as $message) {
           $errorMsg .= '<div>' . $message->jsonSerialize() . '</div>';
         }
@@ @@
         $uri  = $file[0]->getFileUri();
         $uuid = $file[0]->uuid();
         $fileName = $fileSystem->basename($uri);
-        $url = file_url_transform_relative(file_create_url($uri));
+        $url = \Drupal::service('file_url_generator')->generateString($uri);
         $entityType = $file[0]->getEntityTypeId();
         $moduleHandler = \Drupal::service('module_handler');
         if ($moduleHandler->moduleExists('inline_responsive_images')){
@@ @@
           $mediaImageFields = \Drupal::service('entity_field.manager')->getFieldDefinitions('media', 'image');
           if (isset($mediaImageFields['field_media_image']) && $imageUpload['media_entity_image']) {
             // Create media entity with saved file.
-            $imageMedia = \Drupal\media\Entity\Media::create([
+            $imageMedia = Media::create([
               'bundle' => 'image',
               'name' => $alt,
               'uid' => \Drupal::currentUser()->id(),
               'langcode' => \Drupal::languageManager()->getDefaultLanguage()->getId(),
-              'status' => \Drupal\node\NodeInterface::PUBLISHED,
+              'status' => NodeInterface::PUBLISHED,
               'thumbnail' => [
                 'target_id' => $file[0]->id(),
               ],
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/ckeditor_uploadimage/ckeditor_uploadimage.install:0

    ---------- begin diff ----------
@@ @@
 <?php
+use Drupal\Core\File\FileSystem;
 /**
  * @file
  * Install file for the CKEditor Upload Image module.
@@ @@
       'notification' => t('CKEditor Notification plugin'),
       'notificationaggregator' => t('CKEditor Notification Aggregator plugin'),
     ];
-    /** @var \Drupal\Core\File\FileSystem $filesystem */
+    /** @var FileSystem $filesystem */
     $filesystem = \Drupal::service('file_system');
     $dir = $filesystem->realpath('');
     foreach ($plugins as $plugin => $label) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector


 [OK] 4 files have been changed by Rector                                       

