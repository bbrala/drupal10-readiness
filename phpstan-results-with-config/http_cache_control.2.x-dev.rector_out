modules/contrib/http_cache_control/http_cache_control.module
modules/contrib/http_cache_control/src/EventSubscriber/CacheControlEventSubscriber.php
modules/contrib/http_cache_control/tests/src/HttpCacheControlTest.php

2 files with changes
====================

1) modules/contrib/http_cache_control/tests/src/HttpCacheControlTest.php:22

    ---------- begin diff ----------
@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     $this->config('system.site')
@@ @@
     // Fill the cache.
     $this->drupalGet('system-test/set-header', ['query' => ['name' => 'Foo', 'value' => 'max-age']]);

-    $this->assertEqual($this->drupalGetHeader('Cache-Control'), 'max-age=300, public', 'Cache-Control header was sent.');
-    $this->assertNotContains('s-maxage', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header does not contain s-maxage');
+    $this->assertEquals($this->drupalGetHeader('Cache-Control'), 'max-age=300, public', 'Cache-Control header was sent.');
+    $this->assertStringNotContainsString('s-maxage', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header does not contain s-maxage');
     $this->assertEmpty($this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control is not present');

     $config = $this->config('http_cache_control.settings');
@@ @@
     $config->save();

     $this->drupalGet('system-test/set-header', ['query' => ['name' => 'Foo', 'value' => 's-maxage']]);
-    $this->assertContains('s-maxage=400', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header contain s-maxage');
+    $this->assertStringContainsString('s-maxage=400', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header contain s-maxage');

     $config->set('cache.http.404_max_age', 404);
     $config->save();

     $this->drupalGet('system-test/not-found');
-    $this->assertContains('max-age=404', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header contain maxage for 404');
-    $this->assertContains('s-maxage=404', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header does not contain s-maxage');
+    $this->assertStringContainsString('max-age=404', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header contain maxage for 404');
+    $this->assertStringContainsString('s-maxage=404', $this->drupalGetHeader('Cache-Control'), 'Cache-Control header does not contain s-maxage');

     $config->set('cache.http.vary', 'Drupal-Test-Header');
     $config->save();

     $this->drupalGet('system-test/set-header', ['query' => ['name' => 'Foo', 'value' => 'vary']]);
-    $this->assertContains('Drupal-Test-Header', $this->drupalGetHeader('Vary'), 'Vary header contains Drupal-Test-Header.');
+    $this->assertStringContainsString('Drupal-Test-Header', $this->drupalGetHeader('Vary'), 'Vary header contains Drupal-Test-Header.');

     // Surrogate Control tests
     $config->set('cache.surrogate.maxage', 405);
@@ @@
     $config->save();

     $this->drupalGet('system-test/set-header', ['query' => ['name' => 'Foo', 'value' => 'surrogate-max-age']]);
-    $this->assertContains('max-age=405', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header contains maxage');
-    $this->assertNotContains('no-store', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header does not contain no-store');
+    $this->assertStringContainsString('max-age=405', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header contains maxage');
+    $this->assertStringNotContainsString('no-store', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header does not contain no-store');

     $config->set('cache.surrogate.nostore', true);
     $config->save();

     $this->drupalGet('system-test/set-header', ['query' => ['name' => 'Foo', 'value' => 'surrogate-nostore']]);
-    $this->assertContains('max-age=405', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header contains maxage');
-    $this->assertContains('no-store', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header does contain no-store');
+    $this->assertStringContainsString('max-age=405', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header contains maxage');
+    $this->assertStringContainsString('no-store', $this->drupalGetHeader('Surrogate-Control'), 'Surrogate-Control header does contain no-store');

   }
 }
    ----------- end diff -----------

Applied rules:
 * AssertEqualRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * SpecificAssertContainsRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/http_cache_control/src/EventSubscriber/CacheControlEventSubscriber.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\http_cache_control\EventSubscriber;

+use Symfony\Component\HttpKernel\Event\ResponseEvent;
 use Symfony\Component\EventDispatcher\EventSubscriberInterface;
 use Symfony\Component\HttpKernel\KernelEvents;
-use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
 use Drupal\Core\Site\Settings;
 use Drupal\Core\Config\ConfigFactory;

@@ @@
     /**
      * Configuration Factory.
      *
-     * @var \Drupal\Core\Config\ConfigFactory
+     * @var ConfigFactory
      */
     protected $configFactory;

@@ @@
     /**
      * Set http cache control headers.
      */
-    public function setHeaderCacheControl(FilterResponseEvent $event) {
+    public function setHeaderCacheControl(ResponseEvent $event) {
         $config = $this->configFactory->get('http_cache_control.settings');
         $response = $event->getResponse();
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


 [OK] 2 files have been changed by Rector                                       

