modules/contrib/eloqua_api_redux/modules/eloqua_api_auth_fallback/src/Commands/EloquaAuthTokensGenerate.php
modules/contrib/eloqua_api_redux/modules/eloqua_api_auth_fallback/src/Form/Settings.php
modules/contrib/eloqua_api_redux/src/Controller/Callback.php
modules/contrib/eloqua_api_redux/src/Form/Settings.php
modules/contrib/eloqua_api_redux/src/Service/Contact.php
modules/contrib/eloqua_api_redux/src/Service/EloquaApiClient.php
modules/contrib/eloqua_api_redux/src/Service/EloquaAuthDefaultFallback.php
modules/contrib/eloqua_api_redux/src/Service/EloquaAuthFallbackInterface.php
modules/contrib/eloqua_api_redux/src/Service/Forms.php
modules/contrib/eloqua_api_redux/tests/src/Unit/EloquaApiClientTest.php

7 files with changes
====================

1) modules/contrib/eloqua_api_redux/tests/src/Unit/EloquaApiClientTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\eloqua_api_redux\Unit;

+use Drupal\Core\Logger\LoggerChannelFactoryInterface;
+use Drupal\Core\Config\Config;
+use Drupal\Core\Config\ImmutableConfig;
+use Drupal\Core\Config\ConfigFactory;
+use Drupal\Core\Http\ClientFactory;
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
 use Drupal\Component\Serialization\Json;
 use Drupal\Tests\UnitTestCase;
 use GuzzleHttp\Psr7\Response;
@@ @@
   /**
    * Logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;

@@ @@
   /**
    * Config instance.
    *
-   * @var \Drupal\Core\Config\Config|\Drupal\Core\Config\ImmutableConfig
+   * @var Config|ImmutableConfig
    */
   protected $config;

@@ @@
   /**
    * Token Config instance.
    *
-   * @var \Drupal\Core\Config\Config|\Drupal\Core\Config\ImmutableConfig
+   * @var Config|ImmutableConfig
    */
   protected $configTokens;

@@ @@
   /**
    * Config factory.
    *
-   * @var \Drupal\Core\Config\ConfigFactory
+   * @var ConfigFactory
    */
   protected $configFactory;

@@ @@
   /**
    * Guzzle http client factory.
    *
-   * @var \Drupal\Core\Http\ClientFactory
+   * @var ClientFactory
    */
   protected $httpClientFactory;

@@ @@
   /**
    * Cache backend.
    *
-   * @var \Drupal\Core\Cache\CacheBackendInterface
+   * @var CacheBackendInterface
    */
   protected $cacheBackend;

@@ @@
   /**
    * The module handler to load the module path.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   * @var ModuleHandlerInterface
    */
   protected $moduleHandler;

@@ @@
   /**
    * {@inheritdoc}
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

-    $this->httpClientFactory = $this->getMockBuilder('Drupal\Core\Http\ClientFactory')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->httpClientFactory = $this->createMock('Drupal\Core\Http\ClientFactory');

     $this->config = $this->getMockBuilder('Drupal\Core\Config\Config\Drupal\Core\Config\ImmutableConfig')
       ->disableOriginalConstructor()
@@ @@
       ->setMethods(['get'])
       ->getMock();

-    $this->configFactory = $this->getMockBuilder('Drupal\Core\Config\ConfigFactory')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->configFactory = $this->createMock('Drupal\Core\Config\ConfigFactory');

     $this->configFactory->expects($this->any())
       ->method('get')
@@ @@
       ->with('eloqua_api_redux.tokens')
       ->will($this->returnValue($this->configTokens));

-    $this->loggerFactory = $this->getMockBuilder('Drupal\Core\Logger\LoggerChannelFactoryInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->loggerFactory = $this->createMock('Drupal\Core\Logger\LoggerChannelFactoryInterface');

-    $this->cacheBackend = $this->getMockBuilder('Drupal\Core\Cache\CacheBackendInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->cacheBackend = $this->createMock('Drupal\Core\Cache\CacheBackendInterface');

-    $this->moduleHandler = $this->getMockBuilder('Drupal\Core\Extension\ModuleHandlerInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->moduleHandler = $this->createMock('Drupal\Core\Extension\ModuleHandlerInterface');

     // Set container and required dependencies.
     $container = new ContainerBuilder();
-    $pathValidator = $this->getMockBuilder('Drupal\Core\Path\PathValidatorInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
-    $unroutedUrlAssembler = $this->getMockBuilder('Drupal\Core\Utility\UnroutedUrlAssemblerInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
-    $authFallbackService = $this->getMockBuilder('Drupal\eloqua_api_redux\Service\EloquaAuthFallbackInterface')
-      ->disableOriginalConstructor()
-      ->getMock();
+    $pathValidator = $this->createMock('Drupal\Core\Path\PathValidatorInterface');
+    $unroutedUrlAssembler = $this->createMock('Drupal\Core\Utility\UnroutedUrlAssemblerInterface');
+    $authFallbackService = $this->createMock('Drupal\eloqua_api_redux\Service\EloquaAuthFallbackInterface');
     $container->set('path.validator', $pathValidator);
     $container->set('unrouted_url_assembler', $unroutedUrlAssembler);
     $container->set('eloqua_api_redux.auth_fallback_default', $authFallbackService);
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/eloqua_api_redux/src/Service/Forms.php:13

    ---------- begin diff ----------
@@ @@
   /**
    * Eloqua Api Client.
    *
-   * @var \Drupal\eloqua_api_redux\Service\EloquaApiClient
+   * @var EloquaApiClient
    */
   protected $client;

@@ @@
   /**
    * Contact constructor.
    *
-   * @param \Drupal\eloqua_api_redux\Service\EloquaApiClient $client
+   * @param EloquaApiClient $client
    *   Eloqua API Client.
    */
   public function __construct(EloquaApiClient $client) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


3) modules/contrib/eloqua_api_redux/src/Service/EloquaApiClient.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\eloqua_api_redux\Service;

+use Drupal\Core\Config\Config;
+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Component\Serialization\Json;
 use Drupal\Core\Cache\CacheBackendInterface;
 use Drupal\Core\Config\ConfigFactory;
@@ @@
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;

@@ @@
   /**
    * Editable Tokens Config.
    *
-   * @var \Drupal\Core\Config\Config|\Drupal\Core\Config\ImmutableConfig
+   * @var Config|ImmutableConfig
    */
   private $configTokens;

@@ @@
   /**
    * Uneditable Config.
    *
-   * @var \Drupal\Core\Config\Config|\Drupal\Core\Config\ImmutableConfig
+   * @var Config|ImmutableConfig
    */
   private $config;

@@ @@
   /**
    * The HTTP client to fetch the API data.
    *
-   * @var \Drupal\Core\Http\ClientFactory
+   * @var ClientFactory
    */
   protected $httpClientFactory;

@@ @@
   /**
    * Callback Controller constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactory $config
+   * @param ConfigFactory $config
    *   An instance of ConfigFactory.
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $loggerFactory
+   * @param LoggerChannelFactoryInterface $loggerFactory
    *   LoggerChannelFactoryInterface.
-   * @param \Drupal\Core\Cache\CacheBackendInterface $cacheBackend
+   * @param CacheBackendInterface $cacheBackend
    *   Cache Backend.
-   * @param \Drupal\Core\Http\ClientFactory $httpClientFactory
+   * @param ClientFactory $httpClientFactory
    *   A Guzzle client object.
    */
   public function __construct(ConfigFactory $config,
@@ @@
     // Save the token.
     $cacheItem = [
       'value' => $value,
-      'expire' => REQUEST_TIME + $this->eloquaApiCacheAge($key),
+      'expire' => \Drupal::time()->getRequestTime() + $this->eloquaApiCacheAge($key),
     ];

     $this->configTokens
@@ @@
     if ($cache = $this->configTokens->get($type)) {
       $response = unserialize($cache, ['allowed_classes' => FALSE]);

-      $now = REQUEST_TIME;
+      $now = \Drupal::time()->getRequestTime();
       $expire = $response['expire'];

       // Manually validate if the token is still fresh.
    ----------- end diff -----------

Applied rules:
 * RequestTimeConstRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


4) modules/contrib/eloqua_api_redux/src/Service/Contact.php:21

    ---------- begin diff ----------
@@ @@
   /**
    * Eloqua Api Client.
    *
-   * @var \Drupal\eloqua_api_redux\Service\EloquaApiClient
+   * @var EloquaApiClient
    */
   protected $client;

@@ @@
   /**
    * Contact constructor.
    *
-   * @param \Drupal\eloqua_api_redux\Service\EloquaApiClient $client
+   * @param EloquaApiClient $client
    *   Eloqua API Client.
    */
   public function __construct(EloquaApiClient $client) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


5) modules/contrib/eloqua_api_redux/src/Form/Settings.php:17

    ---------- begin diff ----------
@@ @@
   /**
    * The date formatter service.
    *
-   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   * @var DateFormatterInterface
    */
   protected $dateFormatter;

@@ @@
   /**
    * Settings constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param ConfigFactoryInterface $config_factory
    *   Config Factory.
-   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   * @param DateFormatterInterface $date_formatter
    *   Date Formatter.
    */
   public function __construct(ConfigFactoryInterface $config_factory,
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/eloqua_api_redux/src/Controller/Callback.php:18

    ---------- begin diff ----------
@@ @@
   /**
    * Eloqua API Client.
    *
-   * @var \Drupal\eloqua_api_redux\Service\EloquaApiClient
+   * @var EloquaApiClient
    */
   private $eloquaClient;

@@ @@
   /**
    * Callback constructor.
    *
-   * @param \Drupal\eloqua_api_redux\Service\EloquaApiClient $eloquaClient
+   * @param EloquaApiClient $eloquaClient
    *   Eloqua API Client.
    */
   public function __construct(EloquaApiClient $eloquaClient) {
@@ @@
   /**
    * Callback URL for Eloqua API Auth.
    *
-   * @param \Symfony\Component\HttpFoundation\Request $request
+   * @param Request $request
    *   Request.
    *
    * @return array
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


7) modules/contrib/eloqua_api_redux/modules/eloqua_api_auth_fallback/src/Commands/EloquaAuthTokensGenerate.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\eloqua_api_auth_fallback\Commands;

+use Drupal\Core\Config\Config;
+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Config\ConfigFactory;
 use Drupal\Core\Logger\LoggerChannelFactoryInterface;
 use Drupal\eloqua_api_redux\Service\EloquaApiClient;
@@ @@
   /**
    * Immutable Config.
    *
-   * @var \Drupal\Core\Config\Config|\Drupal\Core\Config\ImmutableConfig
+   * @var Config|ImmutableConfig
    */
   protected $configSettings;

@@ @@
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;

@@ @@
   /**
    * Eloqua API client service.
    *
-   * @var \Drupal\eloqua_api_redux\Service\EloquaApiClient
+   * @var EloquaApiClient
    */
   protected $eloquaApiClient;

@@ @@
   /**
    * EloquaAuthTokensGenerate constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactory $config_factory
+   * @param ConfigFactory $config_factory
    *   An instance of ConfigFactory.
-   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   * @param LoggerChannelFactoryInterface $logger_factory
    *   LoggerChannelFactoryInterface.
-   * @param \Drupal\eloqua_api_redux\Service\EloquaApiClient $eloqua_api_client
+   * @param EloquaApiClient $eloqua_api_client
    *   Eloqua API client service.
    */
   public function __construct(ConfigFactory $config_factory,
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 7 files have been changed by Rector                                       

