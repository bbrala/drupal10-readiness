modules/contrib/url_embed/src/Form/UrlEmbedDialog.php
modules/contrib/url_embed/src/Plugin/CKEditorPlugin/DrupalUrl.php
modules/contrib/url_embed/src/Plugin/EmbedType/Url.php
modules/contrib/url_embed/src/Plugin/Field/FieldFormatter/LinkEmbedFormatter.php
modules/contrib/url_embed/src/Plugin/Filter/ConvertUrlToEmbedFilter.php
modules/contrib/url_embed/src/Plugin/Filter/UrlEmbedFilter.php
modules/contrib/url_embed/src/UrlEmbed.php
modules/contrib/url_embed/src/UrlEmbedHelperTrait.php
modules/contrib/url_embed/src/UrlEmbedInterface.php
modules/contrib/url_embed/tests/src/Functional/ConvertUrlToEmbedFilterTest.php
modules/contrib/url_embed/tests/src/Functional/LinkEmbedFormatterTest.php
modules/contrib/url_embed/tests/src/Functional/UrlEmbedDialogTest.php
modules/contrib/url_embed/tests/src/Functional/UrlEmbedFilterTest.php
modules/contrib/url_embed/tests/src/Functional/UrlEmbedTestBase.php
modules/contrib/url_embed/url_embed.install
modules/contrib/url_embed/url_embed.module

11 files with changes
=====================

1) modules/contrib/url_embed/tests/src/Functional/UrlEmbedTestBase.php:6

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\url_embed\Functional;

+use Drupal\user\UserInterface;
 use Drupal\editor\Entity\Editor;
 use Drupal\filter\Entity\FilterFormat;
 use Drupal\Tests\BrowserTestBase;
@@ @@
   /**
    * The test user.
    *
-   * @var \Drupal\user\UserInterface
+   * @var UserInterface
    */
   protected $webUser;

@@ @@
   /**
    * A set up for all tests.
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();

     // Create a page content type.
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/url_embed/tests/src/Functional/UrlEmbedFilterTest.php:29

    ---------- begin diff ----------
@@ @@
     $node = $this->drupalCreateNode($settings);
     $this->drupalGet('node/' . $node->id());
     $this->assertSession()->responseContains(static::FLICKR_OUTPUT_WYSIWYG);
-    $this->assertNoText(strip_tags($content), 'Placeholder does not appear in the output when embed is successful.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains(strip_tags($content));

     // Ensure that placeholder is not replaced when embed is unsuccessful.
     $content = '<drupal-url data-embed-url="">This placeholder should be rendered since specified URL does not exists.</drupal-url>';
@@ @@
     $settings['body'] = array(array('value' => $content, 'format' => 'custom_format'));
     $node = $this->drupalCreateNode($settings);
     $this->drupalGet('node/' . $node->id());
-    $this->assertNoText(strip_tags($content), 'Placeholder does not appear in the output when embed is unsuccessful.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains(strip_tags($content));

     // Test that tag of container element is not replaced when it's not
     // <drupal-url>.
    ----------- end diff -----------

Applied rules:
 * AssertNoTextRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


3) modules/contrib/url_embed/tests/src/Functional/UrlEmbedDialogTest.php:17

    ---------- begin diff ----------
@@ @@
     // Ensure that the route is not accessible without specifying all the
     // parameters.
     $this->getEmbedDialog();
-    $this->assertResponse(404, 'Embed dialog is not accessible without specifying filter format and embed button.');
+    $this->assertSession()->statusCodeEquals(404, 'Embed dialog is not accessible without specifying filter format and embed button.');
     $this->getEmbedDialog('custom_format');
-    $this->assertResponse(404, 'Embed dialog is not accessible without specifying embed button.');
+    $this->assertSession()->statusCodeEquals(404, 'Embed dialog is not accessible without specifying embed button.');

     // Ensure that the route is not accessible with an invalid embed button.
     $this->getEmbedDialog('custom_format', 'invalid_button');
-    $this->assertResponse(404, 'Embed dialog is not accessible without specifying filter format and embed button.');
+    $this->assertSession()->statusCodeEquals(404, 'Embed dialog is not accessible without specifying filter format and embed button.');

     // Ensure that the route is not accessible with text format without the
     // button configured.
     $this->getEmbedDialog('plain_text', 'url');
-    $this->assertResponse(404, 'Embed dialog is not accessible with a filter that does not have an editor configuration.');
+    $this->assertSession()->statusCodeEquals(404, 'Embed dialog is not accessible with a filter that does not have an editor configuration.');

     // Add an empty configuration for the plain_text editor configuration.
     $editor = Editor::create([
@@ @@
     ]);
     $editor->save();
     $this->getEmbedDialog('plain_text', 'url');
-    $this->assertResponse(403, 'Embed dialog is not accessible with a filter that does not have the embed button assigned to it.');
+    $this->assertSession()->statusCodeEquals(403, 'Embed dialog is not accessible with a filter that does not have the embed button assigned to it.');

     // Ensure that the route is accessible with a valid embed button.
     // 'URL' embed button is provided by default by the module and hence the
     // request must be successful.
     $this->getEmbedDialog('custom_format', 'url');
-    $this->assertResponse(200, 'Embed dialog is accessible with correct filter format and embed button.');
+    $this->assertSession()->statusCodeEquals(200, 'Embed dialog is accessible with correct filter format and embed button.');
   }

   /**
@@ @@
     // Ensure that the route is not accessible with text format without the
     // button configured.
     $this->getEmbedDialog('plain_text', 'url');
-    $this->assertResponse(404, 'Embed dialog is not accessible with a filter that does not have an editor configuration.');
+    $this->assertSession()->statusCodeEquals(404, 'Embed dialog is not accessible with a filter that does not have an editor configuration.');
     // Add an empty configuration for the plain_text editor configuration.
     $editor = Editor::create([
       'format' => 'plain_text',
@@ @@
     ]);
     $editor->save();
     $this->getEmbedDialog('plain_text', 'url');
-    $this->assertResponse(403, 'Embed dialog is not accessible with a filter that does not have the embed button assigned to it.');
+    $this->assertSession()->statusCodeEquals(403, 'Embed dialog is not accessible with a filter that does not have the embed button assigned to it.');
     // Ensure that the route is accessible with a valid embed button.
     // 'URL' embed button is provided by default by the module and hence the
     // request must be successful.
     $this->getEmbedDialog('custom_format', 'url');
-    $this->assertResponse(200, 'Embed dialog is accessible with correct filter format and embed button.');
+    $this->assertSession()->statusCodeEquals(200, 'Embed dialog is accessible with correct filter format and embed button.');
     // Ensure form structure of the url_embed_dialog form.
-    $this->assertFieldByName('attributes[data-embed-url]', '', 'URL field is present.');
+    $this->assertSession()->fieldValueEquals('attributes[data-embed-url]', '');
     // Check that 'Embed' is a primary button.
     $this->assertFieldByXPath('//input[contains(@class, "button--primary")]', 'Embed', 'Embed is a primary button');
     $edit = ['attributes[data-embed-url]' => static::FLICKR_URL];
-    $this->drupalPostForm(NULL, $edit, 'Embed');
+    $this->submitForm($edit, 'Embed');
   }

   /**
    ----------- end diff -----------

Applied rules:
 * AssertFieldByNameRector
 * AssertResponseRector
 * UiHelperTraitDrupalPostFormRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


4) modules/contrib/url_embed/tests/src/Functional/LinkEmbedFormatterTest.php:28

    ---------- begin diff ----------
@@ @@
   /**
    * A field to use in this test class.
    *
-   * @var \Drupal\field\Entity\FieldStorageConfig
+   * @var FieldStorageConfig
    */
   protected $fieldStorage;
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


5) modules/contrib/url_embed/tests/src/Functional/ConvertUrlToEmbedFilterTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\url_embed\Functional;

+use Drupal\filter\FilterFormatInterface;
 use Drupal\editor\Entity\Editor;
 use Drupal\filter\Entity\FilterFormat;
 use Drupal\Tests\BrowserTestBase;
@@ @@
   /**
    * Set the configuration up.
    */
-  protected function setUp() {
+  protected function setUp(): void {
     parent::setUp();
     // Create a page content type.
     $this->drupalCreateContentType(['type' => 'page', 'name' => 'Basic page']);
@@ @@
     $node = $this->drupalCreateNode($settings);
     $this->drupalGet('node/' . $node->id());
     $this->assertSession()->responseContains('<drupal-url data-embed-url="https://twitter.com/drupal/status/735873777683320832"></drupal-url>');
-    $this->assertNoText(strip_tags($content), 'URL does not appear in the output when embed is successful.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains(strip_tags($content));

     $content = 'before /not-valid/url after';
     $settings = [];
@@ @@
     $this->drupalGet('node/' . $node->id());
     $this->assertSession()->responseContains($content);

-    /** @var \Drupal\filter\FilterFormatInterface $format */
+    /** @var FilterFormatInterface $format */
     $format = FilterFormat::load('custom_format');
     $configuration = $format->filters('url_embed_convert_links')->getConfiguration();
     $configuration['settings']['url_prefix'] = 'EMBED ';
@@ @@
     $node = $this->drupalCreateNode($settings);
     $this->drupalGet('node/' . $node->id());
     $this->assertSession()->responseContains('<drupal-url data-embed-url="https://twitter.com/drupal/status/735873777683320832"></drupal-url>');
-    $this->assertNoText(strip_tags($content), 'URL does not appear in the output when embed is successful.');
+    // TODO: Drupal Rector Notice: Please delete the following comment after you've made any necessary changes.
+    // Verify the assertion: pageTextNotContains() for HTML responses, responseNotContains() for non-HTML responses.
+    // The passed text should be HTML decoded, exactly as a human sees it in the browser.
+    $this->assertSession()->pageTextNotContains(strip_tags($content));

     $content = 'before Embed https://twitter.com/drupal/status/735873777683320832 after';
     $settings = [];
    ----------- end diff -----------

Applied rules:
 * AssertNoTextRector
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


6) modules/contrib/url_embed/src/UrlEmbedInterface.php:6

    ---------- begin diff ----------
@@ @@

 namespace Drupal\url_embed;

+use Embed\Exceptions\InvalidUrlException;
 /**
  * A service class for handling URL embeds.
  *
@@ @@
    *   (optional) Options passed to the adapter. If not provided the default
    *   options on the service will be used.
    *
-   * @throws \Embed\Exceptions\InvalidUrlException
+   * @throws InvalidUrlException
    *   If the urls is not valid
    * @throws \InvalidArgumentException
    *   If any config argument is not valid
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


7) modules/contrib/url_embed/src/UrlEmbedHelperTrait.php:21

    ---------- begin diff ----------
@@ @@
   /**
    * The module handler service.
    *
-   * @var \Drupal\Core\Extension\ModuleHandlerInterface.
+   * @var ModuleHandlerInterface .
    */
   protected $moduleHandler;

@@ @@
   /**
    * Returns the module handler.
    *
-   * @return \Drupal\Core\Extension\ModuleHandlerInterface
+   * @return ModuleHandlerInterface
    *   The module handler.
    */
   protected function moduleHandler() {
@@ @@
   /**
    * Sets the module handler service.
    *
-   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   * @param ModuleHandlerInterface $module_handler
    *   The module handler service.
    *
    * @return self
@@ @@
   /**
    * Returns the URL embed service.
    *
-   * @return \Drupal\url_embed\UrlEmbedInterface
+   * @return UrlEmbedInterface
    *   The URL embed service..
    */
   protected function urlEmbed() {
@@ @@
   /**
    * Sets the URL embed service.
    *
-   * @param \Drupal\url_embed\UrlEmbedInterface $url_embed
+   * @param UrlEmbedInterface $url_embed
    *   The URL embed service.
    *
    * @return self
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector


8) modules/contrib/url_embed/src/Plugin/Filter/UrlEmbedFilter.php:38

    ---------- begin diff ----------
@@ @@
    *   The plugin ID for the plugin instance.
    * @param mixed $plugin_definition
    *   The plugin implementation definition.
-   * @param \Drupal\url_embed\UrlEmbedInterface $url_embed
+   * @param UrlEmbedInterface $url_embed
    *   The URL embed service.
    */
   public function __construct(array $configuration, $plugin_id, $plugin_definition, UrlEmbedInterface $url_embed) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


9) modules/contrib/url_embed/src/Plugin/EmbedType/Url.php:22

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function getDefaultIconUrl() {
-    return file_create_url(drupal_get_path('module', 'url_embed') . '/js/plugins/drupalurl/urlembed.png');
+    return \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::service('extension.list.module')->getPath('url_embed') . '/js/plugins/drupalurl/urlembed.png');
   }
 }
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * FileCreateUrlRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * ChangeMethodVisibilityRector


10) modules/contrib/url_embed/src/Plugin/CKEditorPlugin/DrupalUrl.php:24

    ---------- begin diff ----------
@@ @@
    * {@inheritdoc}
    */
   public function getFile() {
-    return drupal_get_path('module', 'url_embed') . '/js/plugins/drupalurl/plugin.js';
+    return \Drupal::service('extension.list.module')->getPath('url_embed') . '/js/plugins/drupalurl/plugin.js';
   }

   /**
    ----------- end diff -----------

Applied rules:
 * DrupalGetPathRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


11) modules/contrib/url_embed/src/Form/UrlEmbedDialog.php:28

    ---------- begin diff ----------
@@ @@
   /**
    * The form builder.
    *
-   * @var \Drupal\Core\Form\FormBuilderInterface
+   * @var FormBuilderInterface
    */
   protected $formBuilder;

@@ @@
   /**
    * Constructs a UrlEmbedDialog object.
    *
-   * @param \Drupal\url_embed\UrlEmbedInterface $url_embed
+   * @param UrlEmbedInterface $url_embed
    *   The URL embed service.
-   * @param \Drupal\Core\Form\FormBuilderInterface $form_builder
+   * @param FormBuilderInterface $form_builder
    *   The Form Builder.
    */
   public function __construct(UrlEmbedInterface $url_embed, FormBuilderInterface $form_builder) {
@@ @@
   /**
    * {@inheritdoc}
    *
-   * @param \Drupal\editor\EditorInterface $editor
+   * @param EditorInterface $editor
    *   The editor to which this dialog corresponds.
-   * @param \Drupal\embed\EmbedButtonInterface $embed_button
+   * @param EmbedButtonInterface $embed_button
    *   The URL button to which this dialog corresponds.
    */
   public function buildForm(array $form, FormStateInterface $form_state, EditorInterface $editor = NULL, EmbedButtonInterface $embed_button = NULL) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector
 * ChangeMethodVisibilityRector


 [OK] 11 files have been changed by Rector                                      

