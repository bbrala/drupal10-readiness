modules/contrib/ie9/ie9.module
modules/contrib/ie9/src/Asset/CssCollectionRenderer.php
modules/contrib/ie9/src/EventSubscriber/CspSubscriber.php
modules/contrib/ie9/tests/src/Unit/EventSubscriber/CspSubscriberTest.php

3 files with changes
====================

1) modules/contrib/ie9/tests/src/Unit/EventSubscriber/CspSubscriberTest.php:1

    ---------- begin diff ----------
@@ @@

 namespace Drupal\Tests\ie9\Unit\EventSubscriber;

+use PHPUnit\Framework\MockObject\MockObject;
+use Drupal\Core\Config\ConfigFactoryInterface;
 use Drupal\Core\Render\HtmlResponse;
 use Drupal\Core\State\StateInterface;
 use Drupal\csp\Csp;
@@ @@
   /**
    * The State service.
    *
-   * @var \Drupal\Core\State\StateInterface|\PHPUnit\Framework\MockObject\MockObject
+   * @var StateInterface|MockObject
    */
   private $state;

@@ @@
   /**
    * The response object.
    *
-   * @var \Drupal\Core\Render\HtmlResponse|\PHPUnit\Framework\MockObject\MockObject
+   * @var HtmlResponse|MockObject
    */
   private $response;

@@ @@
   /**
    * {@inheritdoc}
    */
-  public function setUp() {
+  public function setUp(): void {
     parent::setUp();

     if (!class_exists(Csp::class)) {
@@ @@
       $this->markTestSkipped('Content Security Policy module is not available.');
     }

-    $this->state = $this->getMockBuilder(StateInterface::class)
-      ->getMock();
+    $this->state = $this->createMock(StateInterface::class);

-    $this->response = $this->getMockBuilder(HtmlResponse::class)
-      ->disableOriginalConstructor()
-      ->getMock();
+    $this->response = $this->createMock(HtmlResponse::class);
   }

   /**
@@ @@
    * @covers ::onCspPolicyAlter
    */
   public function testNoDirectives() {
-    /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit_Framework_MockObject_MockObject $configFactory */
+    /** @var ConfigFactoryInterface|MockObject $configFactory */
     $configFactory = $this->getConfigFactoryStub([
       'system.performance' => [
         'css.preprocess' => FALSE,
@@ @@
    * @covers ::onCspPolicyAlter
    */
   public function testStyleNotNeeded() {
-    /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit_Framework_MockObject_MockObject $configFactory */
+    /** @var ConfigFactoryInterface|MockObject $configFactory */
     $configFactory = $this->getConfigFactoryStub([
       'system.performance' => [
         'css.preprocess' => TRUE,
@@ @@
    * @covers ::onCspPolicyAlter
    */
   public function testStyleNoPreprocess() {
-    /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit_Framework_MockObject_MockObject $configFactory */
+    /** @var ConfigFactoryInterface|MockObject $configFactory */
     $configFactory = $this->getConfigFactoryStub([
       'system.performance' => [
         'css.preprocess' => FALSE,
@@ @@
    * @covers ::onCspPolicyAlter
    */
   public function testStyleMaintenance() {
-    /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit_Framework_MockObject_MockObject $configFactory */
+    /** @var ConfigFactoryInterface|MockObject $configFactory */
     $configFactory = $this->getConfigFactoryStub([
       'system.performance' => [
         'css.preprocess' => TRUE,
@@ @@
    * @covers ::onCspPolicyAlter
    */
   public function testStyleElemFallback() {
-    /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit_Framework_MockObject_MockObject $configFactory */
+    /** @var ConfigFactoryInterface|MockObject $configFactory */
     $configFactory = $this->getConfigFactoryStub([
       'system.performance' => [
         'css.preprocess' => FALSE,
@@ @@
    * @covers ::onCspPolicyAlter
    */
   public function testStyleDefaultFallback() {
-    /** @var \Drupal\Core\Config\ConfigFactoryInterface|\PHPUnit_Framework_MockObject_MockObject $configFactory */
+    /** @var ConfigFactoryInterface|MockObject $configFactory */
     $configFactory = $this->getConfigFactoryStub([
       'system.performance' => [
         'css.preprocess' => FALSE,
    ----------- end diff -----------

Applied rules:
 * ExceptionAnnotationRector
 * RemoveDataProviderTestPrefixRector
 * GetMockBuilderGetMockToCreateMockRector
 * ArgumentRemoverRector
 * RenameAnnotationRector
 * PseudoNamespaceToNamespaceRector
 * RenameClassRector
 * WrapReturnRector
 * AddReturnTypeDeclarationRector
 * ChangeMethodVisibilityRector


2) modules/contrib/ie9/src/EventSubscriber/CspSubscriber.php:16

    ---------- begin diff ----------
@@ @@
   /**
    * The Config Factory Service.
    *
-   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   * @var ConfigFactoryInterface
    */
   private $configFactory;

@@ @@
   /**
    * The State service.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   private $state;

@@ @@
   /**
    * Ie9CspSubscriber constructor.
    *
-   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param ConfigFactoryInterface $configFactory
    *   The Config Factory service.
-   * @param \Drupal\Core\State\StateInterface $state
+   * @param StateInterface $state
    *   The State service.
    */
   public function __construct(ConfigFactoryInterface $configFactory, StateInterface $state) {
    ----------- end diff -----------

Applied rules:
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


3) modules/contrib/ie9/src/Asset/CssCollectionRenderer.php:56

    ---------- begin diff ----------
@@ @@
   /**
    * The state key/value store.
    *
-   * @var \Drupal\Core\State\StateInterface
+   * @var StateInterface
    */
   protected $state;

@@ @@
   /**
    * The decorated CssCollectionRenderer.
    *
-   * @var \Drupal\Core\Asset\AssetCollectionRendererInterface
+   * @var AssetCollectionRendererInterface
    */
   protected $originalCssCollectionRenderer;

@@ @@
   /**
    * Constructs a CssCollectionRenderer.
    *
-   * @param \Drupal\Core\State\StateInterface $state
+   * @param StateInterface $state
    *   The state key/value store.
-   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $cssCollectionRenderer
+   * @param AssetCollectionRendererInterface $cssCollectionRenderer
    *   The decorated CssCollectionRenderer.
    */
   public function __construct(StateInterface $state, AssetCollectionRendererInterface $cssCollectionRenderer) {
@@ @@
           // LINK tag.
           if (!$css_asset['preprocess']) {
             $element = $link_element_defaults;
-            $element['#attributes']['href'] = file_url_transform_relative(file_create_url($css_asset['data'])) . $query_string_separator . $query_string;
+            $element['#attributes']['href'] = \Drupal::service('file_url_generator')->generateString($css_asset['data']) . $query_string_separator . $query_string;
             $element['#attributes']['media'] = $css_asset['media'];
             $element['#browsers'] = $css_asset['browsers'];
             $elements[] = $element;
@@ @@
               // control browser-caching. IE7 does not support a media type on
               // the @import statement, so we instead specify the media for
               // the group on the STYLE tag.
-              $import[] = '@import url("' . Html::escape(file_url_transform_relative(file_create_url($next_css_asset['data'])) . '?' . $query_string) . '");';
+              $import[] = '@import url("' . Html::escape(\Drupal::service('file_url_generator')->generateString($next_css_asset['data']) . '?' . $query_string) . '");';
               // Move the outer for loop skip the next item, since we
               // processed it here.
               $i = $j;
    ----------- end diff -----------

Applied rules:
 * FileUrlTransformRelativeRector
 * ArgumentRemoverRector
 * PseudoNamespaceToNamespaceRector
 * WrapReturnRector
 * AddParamTypeDeclarationRector


 [OK] 3 files have been changed by Rector                                       

