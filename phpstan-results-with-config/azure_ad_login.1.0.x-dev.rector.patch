diff --git a/azure_ad_login.info.yml b/azure_ad_login.info.yml
index 32e5f73..dd54cc7 100644
--- a/azure_ad_login.info.yml
+++ b/azure_ad_login.info.yml
@@ -2,7 +2,6 @@ name: Azure AD Login
 type: module
 description: Use Active record Directory to login into Drupal
 package: Custom
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.1 || ^10
 dependencies:
   - user
diff --git a/src/AzureAD.php b/src/AzureAD.php
index 184e7d3..5121b78 100644
--- a/src/AzureAD.php
+++ b/src/AzureAD.php
@@ -2,6 +2,7 @@
 
 namespace Drupal\azure_ad_login;
 
+use Drupal\Core\Config\ImmutableConfig;
 use Drupal\Core\Url;
 use Drupal\Core\Link;
 use GuzzleHttp\Client;
@@ -25,21 +26,21 @@ class AzureAD {
   /**
    * Azure active directory settings.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   private $azureADSettings;
 
   /**
    * Guzzle\Client instance.
    *
-   * @var \GuzzleHttp\Client
+   * @var Client
    */
   protected $httpClient;
 
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;
 
diff --git a/src/Controller/CallbackController.php b/src/Controller/CallbackController.php
index b43e688..a50272a 100644
--- a/src/Controller/CallbackController.php
+++ b/src/Controller/CallbackController.php
@@ -2,6 +2,8 @@
 
 namespace Drupal\azure_ad_login\Controller;
 
+use Drupal\Core\Config\ImmutableConfig;
+use GuzzleHttp\Client;
 use Drupal\Core\Controller\ControllerBase;
 use Symfony\Component\HttpFoundation\Request;
 use Drupal\Core\Config\ConfigFactoryInterface;
@@ -19,21 +21,21 @@ class CallbackController extends ControllerBase {
   /**
    * Azure active directory settings.
    *
-   * @var \Drupal\Core\Config\ImmutableConfig
+   * @var ImmutableConfig
    */
   private $azureADSettings;
 
   /**
    * Guzzle\Client instance.
    *
-   * @var \GuzzleHttp\Client
+   * @var Client
    */
   protected $httpClient;
 
   /**
    * The logger factory.
    *
-   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   * @var LoggerChannelFactoryInterface
    */
   protected $loggerFactory;
 
@@ -136,7 +138,7 @@ class CallbackController extends ControllerBase {
     $language = $this->languageManager->getCurrentLanguage()->getId();
 
     $new_user = User::create();
-    $new_user->setPassword(user_password(25));
+    $new_user->setPassword(\Drupal::service('password_generator')->generate(25));
     $new_user->setEmail($account['userPrincipalName']);
     $new_user->setUsername($name);
     $new_user->set('init', 'email');
