diff --git a/src/Plugin/Filter/ThemeFilter.php b/src/Plugin/Filter/ThemeFilter.php
index d2287ea..46d9764 100644
--- a/src/Plugin/Filter/ThemeFilter.php
+++ b/src/Plugin/Filter/ThemeFilter.php
@@ -38,7 +38,7 @@ class ThemeFilter extends FilterBase {
       if (!empty($matches)) {
         foreach ($matches[0] as $key => $match) {
           if (empty($matches['absolute'])) {
-            $trans[$match] = base_path() . drupal_get_path('theme', $matches['themename'][$key]);
+            $trans[$match] = base_path() . \Drupal::service('extension.list.theme')->getPath($matches['themename'][$key]);
           }
         }
       }
@@ -47,7 +47,7 @@ class ThemeFilter extends FilterBase {
       if (!empty($matches)) {
         foreach ($matches[0] as $key => $match) {
           if (!empty($matches['absolute'])) {
-            $trans[$match] = file_create_url(drupal_get_path('theme', $matches['themename'][$key]));
+            $trans[$match] = \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::service('extension.list.theme')->getPath($matches['themename'][$key]));
           }
         }
       }
@@ -71,7 +71,7 @@ class ThemeFilter extends FilterBase {
       if (!empty($matches)) {
         foreach ($matches[0] as $key => $match) {
           if (!empty($matches['absolute'])) {
-            $trans[$match] = file_create_url(\Drupal::theme()->getActiveTheme()->getPath());
+            $trans[$match] = \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::theme()->getActiveTheme()->getPath());
           }
         }
       }
diff --git a/theme_filter.info.yml b/theme_filter.info.yml
index e68fb8e..91ffe16 100644
--- a/theme_filter.info.yml
+++ b/theme_filter.info.yml
@@ -1,8 +1,7 @@
 type: module
 name: 'Theme Filter'
 description: 'Allows Theme path to be used as filters.'
-core: 8.x
-core_version_requirement: ^8 || ^9
+core_version_requirement: ^9.3 || ^10
 
 # Information added by Drupal.org packaging script on 2020-11-09
 version: '8.x-1.1'
diff --git a/theme_filter.tokens.inc b/theme_filter.tokens.inc
index 6be663f..cd95091 100644
--- a/theme_filter.tokens.inc
+++ b/theme_filter.tokens.inc
@@ -70,10 +70,10 @@ function theme_filter_tokens($type, array $tokens, array $data = array(), array
         case 'theme':
           if (!empty($explode[1])) {
             if (isset($explode[2]) && $explode[2] == 'absolute') {
-              $replacements[$original] = file_create_url(drupal_get_path('theme', $explode[1]));
+              $replacements[$original] = \Drupal::service('file_url_generator')->generateAbsoluteString(\Drupal::service('extension.list.theme')->getPath($explode[1]));
             }
             else {
-              $replacements[$original] = base_path() . drupal_get_path('theme', $explode[1]);
+              $replacements[$original] = base_path() . \Drupal::service('extension.list.theme')->getPath($explode[1]);
             }
           }
           break;
@@ -81,7 +81,7 @@ function theme_filter_tokens($type, array $tokens, array $data = array(), array
         case 'path-to-theme':
           $path_to_theme = \Drupal::theme()->getActiveTheme()->getPath();
           if (isset($explode[1]) && $explode[1] == 'absolute') {
-            $replacements[$original] = file_create_url($path_to_theme);
+            $replacements[$original] = \Drupal::service('file_url_generator')->generateAbsoluteString($path_to_theme);
           }
           else {
             $replacements[$original] = base_path() . $path_to_theme;
